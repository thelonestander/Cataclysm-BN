<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm BN: known_magic Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm BN
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classknown__magic.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classknown__magic-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">known_magic Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="magic_8h_source.html">magic.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2e9d576a3710bfe2534471e630df5bb7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#a2e9d576a3710bfe2534471e630df5bb7">known_magic</a> ()</td></tr>
<tr class="separator:a2e9d576a3710bfe2534471e630df5bb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39b5a4fcc441be1ebdaba7bcbb22fffa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#a39b5a4fcc441be1ebdaba7bcbb22fffa">learn_spell</a> (const std::string &amp;sp, <a class="el" href="classCharacter.html">Character</a> &amp;guy, bool force=false)</td></tr>
<tr class="separator:a39b5a4fcc441be1ebdaba7bcbb22fffa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeab7b087a69b633b0ae61509ca5e0d48"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#aeab7b087a69b633b0ae61509ca5e0d48">learn_spell</a> (const <a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a> &amp;sp, <a class="el" href="classCharacter.html">Character</a> &amp;guy, bool force=false)</td></tr>
<tr class="separator:aeab7b087a69b633b0ae61509ca5e0d48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dc8309c014c9d2698826bdb8883cd39"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#a7dc8309c014c9d2698826bdb8883cd39">learn_spell</a> (const <a class="el" href="classspell__type.html">spell_type</a> *sp, <a class="el" href="classCharacter.html">Character</a> &amp;guy, bool force=false)</td></tr>
<tr class="separator:a7dc8309c014c9d2698826bdb8883cd39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51f338d00a8e83a453e33766b5a05bd6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#a51f338d00a8e83a453e33766b5a05bd6">forget_spell</a> (const std::string &amp;sp)</td></tr>
<tr class="separator:a51f338d00a8e83a453e33766b5a05bd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad23426154495b1a395dc6309ce47c6cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#ad23426154495b1a395dc6309ce47c6cc">forget_spell</a> (const <a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a> &amp;sp)</td></tr>
<tr class="separator:ad23426154495b1a395dc6309ce47c6cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ec46640014cc1ea785a7db001203b37"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#a3ec46640014cc1ea785a7db001203b37">time_to_learn_spell</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy, const <a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a> &amp;sp) const</td></tr>
<tr class="separator:a3ec46640014cc1ea785a7db001203b37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad425ea60cd0b564225bddfd3afd7e40c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#ad425ea60cd0b564225bddfd3afd7e40c">time_to_learn_spell</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy, const std::string &amp;str) const</td></tr>
<tr class="separator:ad425ea60cd0b564225bddfd3afd7e40c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4bdf834ec136179f6755e4566435b61"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#ad4bdf834ec136179f6755e4566435b61">can_learn_spell</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy, const <a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a> &amp;sp) const</td></tr>
<tr class="separator:ad4bdf834ec136179f6755e4566435b61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af808c41802489957df2f33a5e3e381c7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#af808c41802489957df2f33a5e3e381c7">knows_spell</a> (const std::string &amp;sp) const</td></tr>
<tr class="separator:af808c41802489957df2f33a5e3e381c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8921c5cb6ecfcb2ad0f76a54f516070b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#a8921c5cb6ecfcb2ad0f76a54f516070b">knows_spell</a> (const <a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a> &amp;sp) const</td></tr>
<tr class="separator:a8921c5cb6ecfcb2ad0f76a54f516070b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67d5ecb476afb7f4a131ee82f223e44e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#a67d5ecb476afb7f4a131ee82f223e44e">knows_spell</a> () const</td></tr>
<tr class="separator:a67d5ecb476afb7f4a131ee82f223e44e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab05f99ea584c7bec9ab34369e14369f0"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#ab05f99ea584c7bec9ab34369e14369f0">spells</a> () const</td></tr>
<tr class="separator:ab05f99ea584c7bec9ab34369e14369f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86c3dca5ebcd118303a6be29a38a73ea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classspell.html">spell</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#a86c3dca5ebcd118303a6be29a38a73ea">get_spell</a> (const <a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a> &amp;sp)</td></tr>
<tr class="separator:a86c3dca5ebcd118303a6be29a38a73ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aded01b4e292bc7526c77526769125a4c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#aded01b4e292bc7526c77526769125a4c">select_spell</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy)</td></tr>
<tr class="separator:aded01b4e292bc7526c77526769125a4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af47da2a24159ff7852576b1db2e30eab"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classspell.html">spell</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#af47da2a24159ff7852576b1db2e30eab">get_spells</a> ()</td></tr>
<tr class="separator:af47da2a24159ff7852576b1db2e30eab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe4bbf2ea0bcb6c32349b7a54640b6c5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#afe4bbf2ea0bcb6c32349b7a54640b6c5">available_mana</a> () const</td></tr>
<tr class="separator:afe4bbf2ea0bcb6c32349b7a54640b6c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1d54e77049ce1b9ed9d20a559ae0a38"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#af1d54e77049ce1b9ed9d20a559ae0a38">max_mana</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy) const</td></tr>
<tr class="separator:af1d54e77049ce1b9ed9d20a559ae0a38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae44e12a998ae53c5d487828d83165168"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#ae44e12a998ae53c5d487828d83165168">mod_mana</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy, int add_mana)</td></tr>
<tr class="separator:ae44e12a998ae53c5d487828d83165168"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeed71b588441f7580d8f3bf9d27a7eb9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#aeed71b588441f7580d8f3bf9d27a7eb9">set_mana</a> (int new_mana)</td></tr>
<tr class="separator:aeed71b588441f7580d8f3bf9d27a7eb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa24ea6f5285f81f10610fd6d1fa7012e"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#aa24ea6f5285f81f10610fd6d1fa7012e">mana_regen_rate</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy) const</td></tr>
<tr class="memdesc:aa24ea6f5285f81f10610fd6d1fa7012e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mana regeneration rate (units per turn).  <a href="classknown__magic.html#aa24ea6f5285f81f10610fd6d1fa7012e">More...</a><br /></td></tr>
<tr class="separator:aa24ea6f5285f81f10610fd6d1fa7012e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d186e83099014168116c53b0dd805f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#a4d186e83099014168116c53b0dd805f1">update_mana</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy, double turns)</td></tr>
<tr class="separator:a4d186e83099014168116c53b0dd805f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ae3fde0f6332bfb1398a623141c3a9e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#a1ae3fde0f6332bfb1398a623141c3a9e">has_enough_energy</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;guy, <a class="el" href="classspell.html">spell</a> &amp;sp) const</td></tr>
<tr class="separator:a1ae3fde0f6332bfb1398a623141c3a9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadc9db2d8635c2b6e6e28f14bf689cd1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#aadc9db2d8635c2b6e6e28f14bf689cd1">on_mutation_gain</a> (const <a class="el" href="type__id_8h.html#a44aa01c09faf1c1723400eb9075a1f4d">trait_id</a> &amp;mid, <a class="el" href="classCharacter.html">Character</a> &amp;guy)</td></tr>
<tr class="separator:aadc9db2d8635c2b6e6e28f14bf689cd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8492a7babf0a12769b76bff2e61e0098"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#a8492a7babf0a12769b76bff2e61e0098">on_mutation_loss</a> (const <a class="el" href="type__id_8h.html#a44aa01c09faf1c1723400eb9075a1f4d">trait_id</a> &amp;mid)</td></tr>
<tr class="separator:a8492a7babf0a12769b76bff2e61e0098"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8acd3edf4541649cd1b1ee21124dd0a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#af8acd3edf4541649cd1b1ee21124dd0a">serialize</a> (<a class="el" href="classJsonOut.html">JsonOut</a> &amp;json) const</td></tr>
<tr class="separator:af8acd3edf4541649cd1b1ee21124dd0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27a91ae27d5f1cf6146f3f26b4b6dc8e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#a27a91ae27d5f1cf6146f3f26b4b6dc8e">deserialize</a> (<a class="el" href="classJsonIn.html">JsonIn</a> &amp;jsin)</td></tr>
<tr class="separator:a27a91ae27d5f1cf6146f3f26b4b6dc8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1adf916c9f70a561c9475f40c94259f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#ad1adf916c9f70a561c9475f40c94259f">set_invlet</a> (const <a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a> &amp;sp, int invlet, const std::set&lt; int &gt; &amp;used_invlets)</td></tr>
<tr class="separator:ad1adf916c9f70a561c9475f40c94259f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c29f4c065729517316b825e410641df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#a9c29f4c065729517316b825e410641df">rem_invlet</a> (const <a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a> &amp;sp)</td></tr>
<tr class="separator:a9c29f4c065729517316b825e410641df"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a8feaad1d7a7ecbb054556ef48e4599c6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#a8feaad1d7a7ecbb054556ef48e4599c6">casting_ignore</a> = false</td></tr>
<tr class="separator:a8feaad1d7a7ecbb054556ef48e4599c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:adb9da4817cfdc19624a8674d4cc16fea"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#adb9da4817cfdc19624a8674d4cc16fea">get_spellname_max_width</a> ()</td></tr>
<tr class="separator:adb9da4817cfdc19624a8674d4cc16fea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92c16301084172b5bd459c257af9c002"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#a92c16301084172b5bd459c257af9c002">get_invlet</a> (const <a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a> &amp;sp, std::set&lt; int &gt; &amp;used_invlets)</td></tr>
<tr class="separator:a92c16301084172b5bd459c257af9c002"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:af94169b33d6d2cd59d75efac9f92c570"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a>, <a class="el" href="classspell.html">spell</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#af94169b33d6d2cd59d75efac9f92c570">spellbook</a></td></tr>
<tr class="separator:af94169b33d6d2cd59d75efac9f92c570"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdb326bf0885177b20fd45f26a6d68ad"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a>, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#abdb326bf0885177b20fd45f26a6d68ad">invlets</a></td></tr>
<tr class="separator:abdb326bf0885177b20fd45f26a6d68ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e2bc1600c4888fb87cc14508f0111c3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#a2e2bc1600c4888fb87cc14508f0111c3">mana_base</a> = 0</td></tr>
<tr class="separator:a2e2bc1600c4888fb87cc14508f0111c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7545cd34ae575060a438e9a6486762e6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknown__magic.html#a7545cd34ae575060a438e9a6486762e6">mana</a> = 0</td></tr>
<tr class="separator:a7545cd34ae575060a438e9a6486762e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="magic_8h_source.html#l00446">446</a> of file <a class="el" href="magic_8h_source.html">magic.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a2e9d576a3710bfe2534471e630df5bb7" name="a2e9d576a3710bfe2534471e630df5bb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e9d576a3710bfe2534471e630df5bb7">&#9670;&nbsp;</a></span>known_magic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">known_magic::known_magic </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01249">1249</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>{</div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>    <a class="code hl_variable" href="classknown__magic.html#a2e2bc1600c4888fb87cc14508f0111c3">mana_base</a> = 1000;</div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span>    <a class="code hl_variable" href="classknown__magic.html#a7545cd34ae575060a438e9a6486762e6">mana</a> = <a class="code hl_variable" href="classknown__magic.html#a2e2bc1600c4888fb87cc14508f0111c3">mana_base</a>;</div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span>}</div>
<div class="ttc" id="aclassknown__magic_html_a2e2bc1600c4888fb87cc14508f0111c3"><div class="ttname"><a href="classknown__magic.html#a2e2bc1600c4888fb87cc14508f0111c3">known_magic::mana_base</a></div><div class="ttdeci">int mana_base</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00454">magic.h:454</a></div></div>
<div class="ttc" id="aclassknown__magic_html_a7545cd34ae575060a438e9a6486762e6"><div class="ttname"><a href="classknown__magic.html#a7545cd34ae575060a438e9a6486762e6">known_magic::mana</a></div><div class="ttdeci">int mana</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00456">magic.h:456</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00456">mana</a>, and <a class="el" href="magic_8h_source.html#l00454">mana_base</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="afe4bbf2ea0bcb6c32349b7a54640b6c5" name="afe4bbf2ea0bcb6c32349b7a54640b6c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe4bbf2ea0bcb6c32349b7a54640b6c5">&#9670;&nbsp;</a></span>available_mana()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int known_magic::available_mana </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01416">1416</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01417" name="l01417"></a><span class="lineno"> 1417</span>{</div>
<div class="line"><a id="l01418" name="l01418"></a><span class="lineno"> 1418</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classknown__magic.html#a7545cd34ae575060a438e9a6486762e6">mana</a>;</div>
<div class="line"><a id="l01419" name="l01419"></a><span class="lineno"> 1419</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00456">mana</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01472">has_enough_energy()</a>.</p>

</div>
</div>
<a id="ad4bdf834ec136179f6755e4566435b61" name="ad4bdf834ec136179f6755e4566435b61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4bdf834ec136179f6755e4566435b61">&#9670;&nbsp;</a></span>can_learn_spell()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool known_magic::can_learn_spell </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a> &amp;&#160;</td>
          <td class="paramname"><em>sp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01388">1388</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span>{</div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span>    <span class="keyword">const</span> <a class="code hl_class" href="classspell__type.html">spell_type</a> &amp;sp_t = sp.<a class="code hl_function" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>();</div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span>    <span class="keywordflow">if</span>( sp_t.<a class="code hl_variable" href="classspell__type.html#a77a45ea3e4de418a9fbe8849be99d27c">spell_class</a> == <a class="code hl_variable" href="magic_8cpp.html#ad4dc12b16a8db4bc3a0debd31fa0ca5d">trait_NONE</a> ) {</div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span>    }</div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span>    <span class="keywordflow">return</span> !guy.<a class="code hl_function" href="classCharacter.html#a809f85bef6731c16373600ad9f97dad7">has_opposite_trait</a>( sp_t.<a class="code hl_variable" href="classspell__type.html#a77a45ea3e4de418a9fbe8849be99d27c">spell_class</a> );</div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span>}</div>
<div class="ttc" id="aclassCharacter_html_a809f85bef6731c16373600ad9f97dad7"><div class="ttname"><a href="classCharacter.html#a809f85bef6731c16373600ad9f97dad7">Character::has_opposite_trait</a></div><div class="ttdeci">bool has_opposite_trait(const trait_id &amp;flag) const</div><div class="ttdoc">Returns true if the player has a trait which cancels the entered trait.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09884">character.cpp:9884</a></div></div>
<div class="ttc" id="aclassspell__type_html"><div class="ttname"><a href="classspell__type.html">spell_type</a></div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00131">magic.h:132</a></div></div>
<div class="ttc" id="aclassspell__type_html_a77a45ea3e4de418a9fbe8849be99d27c"><div class="ttname"><a href="classspell__type.html#a77a45ea3e4de418a9fbe8849be99d27c">spell_type::spell_class</a></div><div class="ttdeci">trait_id spell_class</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00236">magic.h:236</a></div></div>
<div class="ttc" id="aclassstring__id_html_a4796245d3cd6e0283670698a98d46ae9"><div class="ttname"><a href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">string_id::obj</a></div><div class="ttdeci">const T &amp; obj() const</div><div class="ttdoc">Returns the actual object this id refers to.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00058">achievement.cpp:58</a></div></div>
<div class="ttc" id="amagic_8cpp_html_ad4dc12b16a8db4bc3a0debd31fa0ca5d"><div class="ttname"><a href="magic_8cpp.html#ad4dc12b16a8db4bc3a0debd31fa0ca5d">trait_NONE</a></div><div class="ttdeci">static const trait_id trait_NONE(&quot;NONE&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8cpp_source.html#l09884">Character::has_opposite_trait()</a>, <a class="el" href="achievement_8cpp_source.html#l00058">string_id&lt; T &gt;::obj()</a>, <a class="el" href="magic_8h_source.html#l00236">spell_type::spell_class</a>, and <a class="el" href="magic_8cpp.html#ad4dc12b16a8db4bc3a0debd31fa0ca5d">trait_NONE</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01320">learn_spell()</a>.</p>

</div>
</div>
<a id="a27a91ae27d5f1cf6146f3f26b4b6dc8e" name="a27a91ae27d5f1cf6146f3f26b4b6dc8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27a91ae27d5f1cf6146f3f26b4b6dc8e">&#9670;&nbsp;</a></span>deserialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void known_magic::deserialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classJsonIn.html">JsonIn</a> &amp;&#160;</td>
          <td class="paramname"><em>jsin</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01275">1275</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>{</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>    <a class="code hl_class" href="classJsonObject.html">JsonObject</a> data = jsin.<a class="code hl_function" href="classJsonIn.html#af988f122efed0696d9d05f649e57c9b2">get_object</a>();</div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;mana&quot;</span>, <a class="code hl_variable" href="classknown__magic.html#a7545cd34ae575060a438e9a6486762e6">mana</a> );</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span> </div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classJsonObject.html">JsonObject</a> jo : data.<a class="code hl_function" href="classJsonObject.html#a69f62f59b5e39da6059b7c3cf8b12421">get_array</a>( <span class="stringliteral">&quot;spellbook&quot;</span> ) ) {</div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>        std::string <span class="keywordtype">id</span> = jo.get_string( <span class="stringliteral">&quot;id&quot;</span> );</div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span>        <a class="code hl_class" href="classstring__id.html">spell_id</a> sp = <a class="code hl_enumvalue" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a26fc65fa85c36140553bad2b5359989f">spell_id</a>( <span class="keywordtype">id</span> );</div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>        <span class="keywordtype">int</span> xp = jo.get_int( <span class="stringliteral">&quot;xp&quot;</span> );</div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>        <span class="keywordflow">if</span>( !sp.<a class="code hl_function" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() ) {</div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>            <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Skipping spell with invalid id: %s&quot;</span>, sp.<a class="code hl_function" href="classstring__id.html#a19aea01aa4a1f53aac09acc978f67cf8">c_str</a>() );</div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classknown__magic.html#a67d5ecb476afb7f4a131ee82f223e44e">knows_spell</a>( sp ) ) {</div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>            <a class="code hl_variable" href="classknown__magic.html#af94169b33d6d2cd59d75efac9f92c570">spellbook</a>[sp].set_exp( xp );</div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span>            <a class="code hl_variable" href="classknown__magic.html#af94169b33d6d2cd59d75efac9f92c570">spellbook</a>.emplace( sp, <a class="code hl_class" href="classspell.html">spell</a>( sp, xp ) );</div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>        }</div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>    }</div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;invlets&quot;</span>, <a class="code hl_variable" href="classknown__magic.html#abdb326bf0885177b20fd45f26a6d68ad">invlets</a> );</div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>}</div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4a26fc65fa85c36140553bad2b5359989f"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a26fc65fa85c36140553bad2b5359989f">cata_variant_type::spell_id</a></div><div class="ttdeci">@ spell_id</div></div>
<div class="ttc" id="aclassJsonIn_html_af988f122efed0696d9d05f649e57c9b2"><div class="ttname"><a href="classJsonIn.html#af988f122efed0696d9d05f649e57c9b2">JsonIn::get_object</a></div><div class="ttdeci">JsonObject get_object()</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l01364">json.cpp:1364</a></div></div>
<div class="ttc" id="aclassJsonObject_html"><div class="ttname"><a href="classJsonObject.html">JsonObject</a></div><div class="ttdef"><b>Definition:</b> <a href="json_8h_source.html#l00831">json.h:832</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a69f62f59b5e39da6059b7c3cf8b12421"><div class="ttname"><a href="classJsonObject.html#a69f62f59b5e39da6059b7c3cf8b12421">JsonObject::get_array</a></div><div class="ttdeci">JsonArray get_array(const std::string &amp;name) const</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l00332">json.cpp:332</a></div></div>
<div class="ttc" id="aclassJsonObject_html_ae66d47f9cb4993dfaf79819ec2aff2f8"><div class="ttname"><a href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">JsonObject::read</a></div><div class="ttdeci">bool read(const std::string &amp;name, T &amp;t, bool throw_on_error=true) const</div><div class="ttdef"><b>Definition:</b> <a href="json_8h_source.html#l00944">json.h:944</a></div></div>
<div class="ttc" id="aclassknown__magic_html_a67d5ecb476afb7f4a131ee82f223e44e"><div class="ttname"><a href="classknown__magic.html#a67d5ecb476afb7f4a131ee82f223e44e">known_magic::knows_spell</a></div><div class="ttdeci">bool knows_spell() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01305">magic.cpp:1305</a></div></div>
<div class="ttc" id="aclassknown__magic_html_abdb326bf0885177b20fd45f26a6d68ad"><div class="ttname"><a href="classknown__magic.html#abdb326bf0885177b20fd45f26a6d68ad">known_magic::invlets</a></div><div class="ttdeci">std::map&lt; spell_id, int &gt; invlets</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00452">magic.h:452</a></div></div>
<div class="ttc" id="aclassknown__magic_html_af94169b33d6d2cd59d75efac9f92c570"><div class="ttname"><a href="classknown__magic.html#af94169b33d6d2cd59d75efac9f92c570">known_magic::spellbook</a></div><div class="ttdeci">std::map&lt; spell_id, spell &gt; spellbook</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00450">magic.h:450</a></div></div>
<div class="ttc" id="aclassspell_html"><div class="ttname"><a href="classspell.html">spell</a></div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00285">magic.h:286</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; spell_type &gt;</a></div></div>
<div class="ttc" id="aclassstring__id_html_a19aea01aa4a1f53aac09acc978f67cf8"><div class="ttname"><a href="classstring__id.html#a19aea01aa4a1f53aac09acc978f67cf8">string_id::c_str</a></div><div class="ttdeci">const char * c_str() const</div><div class="ttdoc">Interface to the plain C-string of the id.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00247">string_id.h:247</a></div></div>
<div class="ttc" id="aclassstring__id_html_a8ca0e76fa665125f1e50bd1ed8dbd213"><div class="ttname"><a href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">string_id::is_valid</a></div><div class="ttdeci">bool is_valid() const</div><div class="ttdoc">Returns whether this id is valid, that means whether it refers to an existing object.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00065">achievement.cpp:65</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level DL::Error and class DC::DebugMsg, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00074">debug.h:74</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="string__id_8h_source.html#l00247">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="json_8cpp_source.html#l00332">JsonObject::get_array()</a>, <a class="el" href="json_8cpp_source.html#l01364">JsonIn::get_object()</a>, <a class="el" href="magic_8h_source.html#l00452">invlets</a>, <a class="el" href="achievement_8cpp_source.html#l00065">string_id&lt; T &gt;::is_valid()</a>, <a class="el" href="magic_8cpp_source.html#l01305">knows_spell()</a>, <a class="el" href="magic_8h_source.html#l00456">mana</a>, <a class="el" href="json_8h_source.html#l00944">JsonObject::read()</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a26fc65fa85c36140553bad2b5359989f">spell_id</a>, and <a class="el" href="magic_8h_source.html#l00450">spellbook</a>.</p>

</div>
</div>
<a id="ad23426154495b1a395dc6309ce47c6cc" name="ad23426154495b1a395dc6309ce47c6cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad23426154495b1a395dc6309ce47c6cc">&#9670;&nbsp;</a></span>forget_spell() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void known_magic::forget_spell </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a> &amp;&#160;</td>
          <td class="paramname"><em>sp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01378">1378</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span>{</div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classknown__magic.html#a67d5ecb476afb7f4a131ee82f223e44e">knows_spell</a>( sp ) ) {</div>
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"> 1381</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Can&#39;t forget a spell you don&#39;t know!&quot;</span> );</div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"> 1382</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span>    }</div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;All knowledge of %s leaves you.&quot;</span> ), sp-&gt;<a class="code hl_variable" href="classspell__type.html#adcac4bcd0931ffd34281a9eed747d93c">name</a> );</div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span>    <a class="code hl_variable" href="classknown__magic.html#af94169b33d6d2cd59d75efac9f92c570">spellbook</a>.erase( sp );</div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"> 1386</span>}</div>
<div class="ttc" id="aclassspell__type_html_adcac4bcd0931ffd34281a9eed747d93c"><div class="ttname"><a href="classspell__type.html#adcac4bcd0931ffd34281a9eed747d93c">spell_type::name</a></div><div class="ttdeci">translation name</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00143">magic.h:143</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00254">enums.h:254</a></div></div>
<div class="ttc" id="amessages_8cpp_html_a54489326fc37823819c5105addfa27f2"><div class="ttname"><a href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a></div><div class="ttdeci">void add_msg(std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l00884">messages.cpp:884</a></div></div>
<div class="ttc" id="atranslations_8h_html_aa829053017e23ef22d44dccecba63a34"><div class="ttname"><a href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a></div><div class="ttdeci">#define _(msg)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00116">translations.h:116</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="magic_8cpp_source.html#l01305">knows_spell()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="magic_8h_source.html#l00143">spell_type::name</a>, and <a class="el" href="magic_8h_source.html#l00450">spellbook</a>.</p>

</div>
</div>
<a id="a51f338d00a8e83a453e33766b5a05bd6" name="a51f338d00a8e83a453e33766b5a05bd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51f338d00a8e83a453e33766b5a05bd6">&#9670;&nbsp;</a></span>forget_spell() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void known_magic::forget_spell </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>sp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01373">1373</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span>{</div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span>    <a class="code hl_function" href="classknown__magic.html#a51f338d00a8e83a453e33766b5a05bd6">forget_spell</a>( <a class="code hl_enumvalue" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a26fc65fa85c36140553bad2b5359989f">spell_id</a>( sp ) );</div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span>}</div>
<div class="ttc" id="aclassknown__magic_html_a51f338d00a8e83a453e33766b5a05bd6"><div class="ttname"><a href="classknown__magic.html#a51f338d00a8e83a453e33766b5a05bd6">known_magic::forget_spell</a></div><div class="ttdeci">void forget_spell(const std::string &amp;sp)</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01373">magic.cpp:1373</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01373">forget_spell()</a>, and <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a26fc65fa85c36140553bad2b5359989f">spell_id</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01373">forget_spell()</a>, and <a class="el" href="magic_8cpp_source.html#l01865">on_mutation_loss()</a>.</p>

</div>
</div>
<a id="a92c16301084172b5bd459c257af9c002" name="a92c16301084172b5bd459c257af9c002"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92c16301084172b5bd459c257af9c002">&#9670;&nbsp;</a></span>get_invlet()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int known_magic::get_invlet </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a> &amp;&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::set&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>used_invlets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01788">1788</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01789" name="l01789"></a><span class="lineno"> 1789</span>{</div>
<div class="line"><a id="l01790" name="l01790"></a><span class="lineno"> 1790</span>    <span class="keyword">auto</span> found = <a class="code hl_variable" href="classknown__magic.html#abdb326bf0885177b20fd45f26a6d68ad">invlets</a>.find( sp );</div>
<div class="line"><a id="l01791" name="l01791"></a><span class="lineno"> 1791</span>    <span class="keywordflow">if</span>( found != <a class="code hl_variable" href="classknown__magic.html#abdb326bf0885177b20fd45f26a6d68ad">invlets</a>.end() ) {</div>
<div class="line"><a id="l01792" name="l01792"></a><span class="lineno"> 1792</span>        <span class="keywordflow">return</span> found-&gt;second;</div>
<div class="line"><a id="l01793" name="l01793"></a><span class="lineno"> 1793</span>    }</div>
<div class="line"><a id="l01794" name="l01794"></a><span class="lineno"> 1794</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const spell_id, int&gt; &amp;invlet_pair : <a class="code hl_variable" href="classknown__magic.html#abdb326bf0885177b20fd45f26a6d68ad">invlets</a> ) {</div>
<div class="line"><a id="l01795" name="l01795"></a><span class="lineno"> 1795</span>        used_invlets.emplace( invlet_pair.second );</div>
<div class="line"><a id="l01796" name="l01796"></a><span class="lineno"> 1796</span>    }</div>
<div class="line"><a id="l01797" name="l01797"></a><span class="lineno"> 1797</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = <span class="charliteral">&#39;a&#39;</span>; i &lt;= <span class="charliteral">&#39;z&#39;</span>; i++ ) {</div>
<div class="line"><a id="l01798" name="l01798"></a><span class="lineno"> 1798</span>        <span class="keywordflow">if</span>( used_invlets.count( i ) == 0 ) {</div>
<div class="line"><a id="l01799" name="l01799"></a><span class="lineno"> 1799</span>            used_invlets.emplace( i );</div>
<div class="line"><a id="l01800" name="l01800"></a><span class="lineno"> 1800</span>            <span class="keywordflow">return</span> i;</div>
<div class="line"><a id="l01801" name="l01801"></a><span class="lineno"> 1801</span>        }</div>
<div class="line"><a id="l01802" name="l01802"></a><span class="lineno"> 1802</span>    }</div>
<div class="line"><a id="l01803" name="l01803"></a><span class="lineno"> 1803</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = <span class="charliteral">&#39;A&#39;</span>; i &lt;= <span class="charliteral">&#39;Z&#39;</span>; i++ ) {</div>
<div class="line"><a id="l01804" name="l01804"></a><span class="lineno"> 1804</span>        <span class="keywordflow">if</span>( used_invlets.count( i ) == 0 ) {</div>
<div class="line"><a id="l01805" name="l01805"></a><span class="lineno"> 1805</span>            used_invlets.emplace( i );</div>
<div class="line"><a id="l01806" name="l01806"></a><span class="lineno"> 1806</span>            <span class="keywordflow">return</span> i;</div>
<div class="line"><a id="l01807" name="l01807"></a><span class="lineno"> 1807</span>        }</div>
<div class="line"><a id="l01808" name="l01808"></a><span class="lineno"> 1808</span>    }</div>
<div class="line"><a id="l01809" name="l01809"></a><span class="lineno"> 1809</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = <span class="charliteral">&#39;!&#39;</span>; i &lt;= <span class="charliteral">&#39;-&#39;</span>; i++ ) {</div>
<div class="line"><a id="l01810" name="l01810"></a><span class="lineno"> 1810</span>        <span class="keywordflow">if</span>( used_invlets.count( i ) == 0 ) {</div>
<div class="line"><a id="l01811" name="l01811"></a><span class="lineno"> 1811</span>            used_invlets.emplace( i );</div>
<div class="line"><a id="l01812" name="l01812"></a><span class="lineno"> 1812</span>            <span class="keywordflow">return</span> i;</div>
<div class="line"><a id="l01813" name="l01813"></a><span class="lineno"> 1813</span>        }</div>
<div class="line"><a id="l01814" name="l01814"></a><span class="lineno"> 1814</span>    }</div>
<div class="line"><a id="l01815" name="l01815"></a><span class="lineno"> 1815</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01816" name="l01816"></a><span class="lineno"> 1816</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00452">invlets</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01818">select_spell()</a>.</p>

</div>
</div>
<a id="a86c3dca5ebcd118303a6be29a38a73ea" name="a86c3dca5ebcd118303a6be29a38a73ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86c3dca5ebcd118303a6be29a38a73ea">&#9670;&nbsp;</a></span>get_spell()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classspell.html">spell</a> &amp; known_magic::get_spell </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a> &amp;&#160;</td>
          <td class="paramname"><em>sp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01397">1397</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span>{</div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classknown__magic.html#a67d5ecb476afb7f4a131ee82f223e44e">knows_spell</a>( sp ) ) {</div>
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"> 1400</span>        <span class="keyword">static</span> <a class="code hl_class" href="classspell.html">spell</a> bugged_spell;</div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"> 1401</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;ERROR: Tried to get unknown spell&quot;</span> );</div>
<div class="line"><a id="l01402" name="l01402"></a><span class="lineno"> 1402</span>        <span class="keywordflow">return</span> bugged_spell;</div>
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"> 1403</span>    }</div>
<div class="line"><a id="l01404" name="l01404"></a><span class="lineno"> 1404</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classknown__magic.html#af94169b33d6d2cd59d75efac9f92c570">spellbook</a>.at( sp );</div>
<div class="line"><a id="l01405" name="l01405"></a><span class="lineno"> 1405</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="magic_8cpp_source.html#l01305">knows_spell()</a>, and <a class="el" href="magic_8h_source.html#l00450">spellbook</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01854">on_mutation_gain()</a>.</p>

</div>
</div>
<a id="adb9da4817cfdc19624a8674d4cc16fea" name="adb9da4817cfdc19624a8674d4cc16fea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb9da4817cfdc19624a8674d4cc16fea">&#9670;&nbsp;</a></span>get_spellname_max_width()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int known_magic::get_spellname_max_width </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01510">1510</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01511" name="l01511"></a><span class="lineno"> 1511</span>{</div>
<div class="line"><a id="l01512" name="l01512"></a><span class="lineno"> 1512</span>    <span class="keywordtype">int</span> width = 0;</div>
<div class="line"><a id="l01513" name="l01513"></a><span class="lineno"> 1513</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classspell.html">spell</a> *sp : <a class="code hl_function" href="classknown__magic.html#af47da2a24159ff7852576b1db2e30eab">get_spells</a>() ) {</div>
<div class="line"><a id="l01514" name="l01514"></a><span class="lineno"> 1514</span>        width = std::max( width, <a class="code hl_function" href="catacharset_8cpp.html#a7616a48a4b48437c60b6683439a8f3e2">utf8_width</a>( sp-&gt;name() ) );</div>
<div class="line"><a id="l01515" name="l01515"></a><span class="lineno"> 1515</span>    }</div>
<div class="line"><a id="l01516" name="l01516"></a><span class="lineno"> 1516</span>    <span class="keywordflow">return</span> width;</div>
<div class="line"><a id="l01517" name="l01517"></a><span class="lineno"> 1517</span>}</div>
<div class="ttc" id="acatacharset_8cpp_html_a7616a48a4b48437c60b6683439a8f3e2"><div class="ttname"><a href="catacharset_8cpp.html#a7616a48a4b48437c60b6683439a8f3e2">utf8_width</a></div><div class="ttdeci">int utf8_width(const char *s, const bool ignore_tags)</div><div class="ttdef"><b>Definition:</b> <a href="catacharset_8cpp_source.html#l00142">catacharset.cpp:142</a></div></div>
<div class="ttc" id="aclassknown__magic_html_af47da2a24159ff7852576b1db2e30eab"><div class="ttname"><a href="classknown__magic.html#af47da2a24159ff7852576b1db2e30eab">known_magic::get_spells</a></div><div class="ttdeci">std::vector&lt; spell * &gt; get_spells()</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01407">magic.cpp:1407</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01407">get_spells()</a>, and <a class="el" href="catacharset_8cpp_source.html#l00142">utf8_width()</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01818">select_spell()</a>.</p>

</div>
</div>
<a id="af47da2a24159ff7852576b1db2e30eab" name="af47da2a24159ff7852576b1db2e30eab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af47da2a24159ff7852576b1db2e30eab">&#9670;&nbsp;</a></span>get_spells()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="classspell.html">spell</a> * &gt; known_magic::get_spells </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01407">1407</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01408" name="l01408"></a><span class="lineno"> 1408</span>{</div>
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"> 1409</span>    std::vector&lt;spell *&gt; <a class="code hl_function" href="classknown__magic.html#ab05f99ea584c7bec9ab34369e14369f0">spells</a>;</div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"> 1410</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;spell_pair : <a class="code hl_variable" href="classknown__magic.html#af94169b33d6d2cd59d75efac9f92c570">spellbook</a> ) {</div>
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"> 1411</span>        <a class="code hl_function" href="classknown__magic.html#ab05f99ea584c7bec9ab34369e14369f0">spells</a>.emplace_back( &amp;spell_pair.second );</div>
<div class="line"><a id="l01412" name="l01412"></a><span class="lineno"> 1412</span>    }</div>
<div class="line"><a id="l01413" name="l01413"></a><span class="lineno"> 1413</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classknown__magic.html#ab05f99ea584c7bec9ab34369e14369f0">spells</a>;</div>
<div class="line"><a id="l01414" name="l01414"></a><span class="lineno"> 1414</span>}</div>
<div class="ttc" id="aclassknown__magic_html_ab05f99ea584c7bec9ab34369e14369f0"><div class="ttname"><a href="classknown__magic.html#ab05f99ea584c7bec9ab34369e14369f0">known_magic::spells</a></div><div class="ttdeci">std::vector&lt; spell_id &gt; spells() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01462">magic.cpp:1462</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00450">spellbook</a>, and <a class="el" href="magic_8cpp_source.html#l01462">spells()</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01510">get_spellname_max_width()</a>, <a class="el" href="magic_8cpp_source.html#l01865">on_mutation_loss()</a>, and <a class="el" href="magic_8cpp_source.html#l01818">select_spell()</a>.</p>

</div>
</div>
<a id="a1ae3fde0f6332bfb1398a623141c3a9e" name="a1ae3fde0f6332bfb1398a623141c3a9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ae3fde0f6332bfb1398a623141c3a9e">&#9670;&nbsp;</a></span>has_enough_energy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool known_magic::has_enough_energy </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classspell.html">spell</a> &amp;&#160;</td>
          <td class="paramname"><em>sp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01472">1472</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01473" name="l01473"></a><span class="lineno"> 1473</span>{</div>
<div class="line"><a id="l01474" name="l01474"></a><span class="lineno"> 1474</span>    <span class="keywordtype">int</span> cost = sp.<a class="code hl_function" href="classspell.html#a4ddf2ffd71f86bc2ca2ebca259071924">energy_cost</a>( guy );</div>
<div class="line"><a id="l01475" name="l01475"></a><span class="lineno"> 1475</span>    <span class="keywordflow">switch</span>( sp.<a class="code hl_function" href="classspell.html#a9e3016a896d4431fed8428ea82ab6539">energy_source</a>() ) {</div>
<div class="line"><a id="l01476" name="l01476"></a><span class="lineno"> 1476</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="magic_8h.html#a3c314c02f97a7d720f18adcd1dbd7313a2248f5dfe0c227c3e94764da499d5ab9">mana_energy</a>:</div>
<div class="line"><a id="l01477" name="l01477"></a><span class="lineno"> 1477</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="classknown__magic.html#afe4bbf2ea0bcb6c32349b7a54640b6c5">available_mana</a>() &gt;= cost;</div>
<div class="line"><a id="l01478" name="l01478"></a><span class="lineno"> 1478</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="magic_8h.html#a3c314c02f97a7d720f18adcd1dbd7313a64a465572520ca8000f9628233063d7d">bionic_energy</a>:</div>
<div class="line"><a id="l01479" name="l01479"></a><span class="lineno"> 1479</span>            <span class="keywordflow">return</span> guy.<a class="code hl_function" href="classCharacter.html#add22510ff2fa20a662868b4dd86e030e">get_power_level</a>() &gt;= <a class="code hl_function" href="namespaceunits.html#ada24d52c1ffd0df8d52a363d013d3231">units::from_kilojoule</a>( cost );</div>
<div class="line"><a id="l01480" name="l01480"></a><span class="lineno"> 1480</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="magic_8h.html#a3c314c02f97a7d720f18adcd1dbd7313a0ea8c94416e89879238d116c38bb8ae4">stamina_energy</a>:</div>
<div class="line"><a id="l01481" name="l01481"></a><span class="lineno"> 1481</span>            <span class="keywordflow">return</span> guy.<a class="code hl_function" href="classCharacter.html#a0ffe14df559cee6e9b5d02f5b214d009">get_stamina</a>() &gt;= cost;</div>
<div class="line"><a id="l01482" name="l01482"></a><span class="lineno"> 1482</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="magic_8h.html#a3c314c02f97a7d720f18adcd1dbd7313a035da4b29716d283ad9e6f63574058b3">hp_energy</a>:</div>
<div class="line"><a id="l01483" name="l01483"></a><span class="lineno"> 1483</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const bodypart_str_id, bodypart&gt; &amp;elem : guy.<a class="code hl_function" href="classCreature.html#ac4dbde454c86b3296f53681c60612974">get_body</a>() ) {</div>
<div class="line"><a id="l01484" name="l01484"></a><span class="lineno"> 1484</span>                <span class="keywordflow">if</span>( elem.second.get_hp_cur() &gt; cost ) {</div>
<div class="line"><a id="l01485" name="l01485"></a><span class="lineno"> 1485</span>                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01486" name="l01486"></a><span class="lineno"> 1486</span>                }</div>
<div class="line"><a id="l01487" name="l01487"></a><span class="lineno"> 1487</span>            }</div>
<div class="line"><a id="l01488" name="l01488"></a><span class="lineno"> 1488</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01489" name="l01489"></a><span class="lineno"> 1489</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="magic_8h.html#a3c314c02f97a7d720f18adcd1dbd7313a9af1db96b3277688bd53f9c41dac5d9b">fatigue_energy</a>:</div>
<div class="line"><a id="l01490" name="l01490"></a><span class="lineno"> 1490</span>            <span class="keywordflow">return</span> guy.<a class="code hl_function" href="classCharacter.html#a31c20b0d370fef88fefe520ff046daf5">get_fatigue</a>() &lt; <a class="code hl_enumvalue" href="character_8h.html#abf088072c9ca5b676f7f7545bac9a137ae349d735a5fa5b10d9770031e669c477">fatigue_levels::exhausted</a>;</div>
<div class="line"><a id="l01491" name="l01491"></a><span class="lineno"> 1491</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="magic_8h.html#a3c314c02f97a7d720f18adcd1dbd7313ac5dea5bec6450a607e6b31abd578d55b">none_energy</a>:</div>
<div class="line"><a id="l01492" name="l01492"></a><span class="lineno"> 1492</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01493" name="l01493"></a><span class="lineno"> 1493</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l01494" name="l01494"></a><span class="lineno"> 1494</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01495" name="l01495"></a><span class="lineno"> 1495</span>    }</div>
<div class="line"><a id="l01496" name="l01496"></a><span class="lineno"> 1496</span>}</div>
<div class="ttc" id="acharacter_8h_html_abf088072c9ca5b676f7f7545bac9a137ae349d735a5fa5b10d9770031e669c477"><div class="ttname"><a href="character_8h.html#abf088072c9ca5b676f7f7545bac9a137ae349d735a5fa5b10d9770031e669c477">fatigue_levels::exhausted</a></div><div class="ttdeci">@ exhausted</div></div>
<div class="ttc" id="aclassCharacter_html_a0ffe14df559cee6e9b5d02f5b214d009"><div class="ttname"><a href="classCharacter.html#a0ffe14df559cee6e9b5d02f5b214d009">Character::get_stamina</a></div><div class="ttdeci">int get_stamina() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07175">character.cpp:7175</a></div></div>
<div class="ttc" id="aclassCharacter_html_a31c20b0d370fef88fefe520ff046daf5"><div class="ttname"><a href="classCharacter.html#a31c20b0d370fef88fefe520ff046daf5">Character::get_fatigue</a></div><div class="ttdeci">int get_fatigue() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04439">character.cpp:4439</a></div></div>
<div class="ttc" id="aclassCharacter_html_add22510ff2fa20a662868b4dd86e030e"><div class="ttname"><a href="classCharacter.html#add22510ff2fa20a662868b4dd86e030e">Character::get_power_level</a></div><div class="ttdeci">units::energy get_power_level() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01956">character.cpp:1956</a></div></div>
<div class="ttc" id="aclassCreature_html_ac4dbde454c86b3296f53681c60612974"><div class="ttname"><a href="classCreature.html#ac4dbde454c86b3296f53681c60612974">Creature::get_body</a></div><div class="ttdeci">const std::map&lt; bodypart_str_id, bodypart &gt; &amp; get_body() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01521">creature.cpp:1521</a></div></div>
<div class="ttc" id="aclassknown__magic_html_afe4bbf2ea0bcb6c32349b7a54640b6c5"><div class="ttname"><a href="classknown__magic.html#afe4bbf2ea0bcb6c32349b7a54640b6c5">known_magic::available_mana</a></div><div class="ttdeci">int available_mana() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01416">magic.cpp:1416</a></div></div>
<div class="ttc" id="aclassspell_html_a4ddf2ffd71f86bc2ca2ebca259071924"><div class="ttname"><a href="classspell.html#a4ddf2ffd71f86bc2ca2ebca259071924">spell::energy_cost</a></div><div class="ttdeci">int energy_cost(const Character &amp;guy) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00631">magic.cpp:631</a></div></div>
<div class="ttc" id="aclassspell_html_a9e3016a896d4431fed8428ea82ab6539"><div class="ttname"><a href="classspell.html#a9e3016a896d4431fed8428ea82ab6539">spell::energy_source</a></div><div class="ttdeci">energy_type energy_source() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00939">magic.cpp:939</a></div></div>
<div class="ttc" id="amagic_8h_html_a3c314c02f97a7d720f18adcd1dbd7313a035da4b29716d283ad9e6f63574058b3"><div class="ttname"><a href="magic_8h.html#a3c314c02f97a7d720f18adcd1dbd7313a035da4b29716d283ad9e6f63574058b3">hp_energy</a></div><div class="ttdeci">@ hp_energy</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00064">magic.h:64</a></div></div>
<div class="ttc" id="amagic_8h_html_a3c314c02f97a7d720f18adcd1dbd7313a0ea8c94416e89879238d116c38bb8ae4"><div class="ttname"><a href="magic_8h.html#a3c314c02f97a7d720f18adcd1dbd7313a0ea8c94416e89879238d116c38bb8ae4">stamina_energy</a></div><div class="ttdeci">@ stamina_energy</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00066">magic.h:66</a></div></div>
<div class="ttc" id="amagic_8h_html_a3c314c02f97a7d720f18adcd1dbd7313a2248f5dfe0c227c3e94764da499d5ab9"><div class="ttname"><a href="magic_8h.html#a3c314c02f97a7d720f18adcd1dbd7313a2248f5dfe0c227c3e94764da499d5ab9">mana_energy</a></div><div class="ttdeci">@ mana_energy</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00065">magic.h:65</a></div></div>
<div class="ttc" id="amagic_8h_html_a3c314c02f97a7d720f18adcd1dbd7313a64a465572520ca8000f9628233063d7d"><div class="ttname"><a href="magic_8h.html#a3c314c02f97a7d720f18adcd1dbd7313a64a465572520ca8000f9628233063d7d">bionic_energy</a></div><div class="ttdeci">@ bionic_energy</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00067">magic.h:67</a></div></div>
<div class="ttc" id="amagic_8h_html_a3c314c02f97a7d720f18adcd1dbd7313a9af1db96b3277688bd53f9c41dac5d9b"><div class="ttname"><a href="magic_8h.html#a3c314c02f97a7d720f18adcd1dbd7313a9af1db96b3277688bd53f9c41dac5d9b">fatigue_energy</a></div><div class="ttdeci">@ fatigue_energy</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00068">magic.h:68</a></div></div>
<div class="ttc" id="amagic_8h_html_a3c314c02f97a7d720f18adcd1dbd7313ac5dea5bec6450a607e6b31abd578d55b"><div class="ttname"><a href="magic_8h.html#a3c314c02f97a7d720f18adcd1dbd7313ac5dea5bec6450a607e6b31abd578d55b">none_energy</a></div><div class="ttdeci">@ none_energy</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00070">magic.h:69</a></div></div>
<div class="ttc" id="anamespaceunits_html_ada24d52c1ffd0df8d52a363d013d3231"><div class="ttname"><a href="namespaceunits.html#ada24d52c1ffd0df8d52a363d013d3231">units::from_kilojoule</a></div><div class="ttdeci">constexpr quantity&lt; value_type, energy_in_joule_tag &gt; from_kilojoule(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units__energy_8h_source.html#l00032">units_energy.h:32</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01416">available_mana()</a>, <a class="el" href="magic_8h_source.html#l00067">bionic_energy</a>, <a class="el" href="magic_8cpp_source.html#l00631">spell::energy_cost()</a>, <a class="el" href="magic_8cpp_source.html#l00939">spell::energy_source()</a>, <a class="el" href="character_8h.html#abf088072c9ca5b676f7f7545bac9a137ae349d735a5fa5b10d9770031e669c477">exhausted</a>, <a class="el" href="magic_8h_source.html#l00068">fatigue_energy</a>, <a class="el" href="units__energy_8h_source.html#l00032">units::from_kilojoule()</a>, <a class="el" href="creature_8cpp_source.html#l01521">Creature::get_body()</a>, <a class="el" href="character_8cpp_source.html#l04439">Character::get_fatigue()</a>, <a class="el" href="character_8cpp_source.html#l01956">Character::get_power_level()</a>, <a class="el" href="character_8cpp_source.html#l07175">Character::get_stamina()</a>, <a class="el" href="magic_8h_source.html#l00064">hp_energy</a>, <a class="el" href="magic_8h_source.html#l00065">mana_energy</a>, <a class="el" href="magic_8h_source.html#l00069">none_energy</a>, and <a class="el" href="magic_8h_source.html#l00066">stamina_energy</a>.</p>

</div>
</div>
<a id="a67d5ecb476afb7f4a131ee82f223e44e" name="a67d5ecb476afb7f4a131ee82f223e44e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67d5ecb476afb7f4a131ee82f223e44e">&#9670;&nbsp;</a></span>knows_spell() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool known_magic::knows_spell </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01305">1305</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>{</div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>    <span class="keywordflow">return</span> !<a class="code hl_variable" href="classknown__magic.html#af94169b33d6d2cd59d75efac9f92c570">spellbook</a>.empty();</div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00450">spellbook</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01275">deserialize()</a>, <a class="el" href="magic_8cpp_source.html#l01378">forget_spell()</a>, <a class="el" href="magic_8cpp_source.html#l01397">get_spell()</a>, and <a class="el" href="magic_8cpp_source.html#l01295">knows_spell()</a>.</p>

</div>
</div>
<a id="a8921c5cb6ecfcb2ad0f76a54f516070b" name="a8921c5cb6ecfcb2ad0f76a54f516070b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8921c5cb6ecfcb2ad0f76a54f516070b">&#9670;&nbsp;</a></span>knows_spell() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool known_magic::knows_spell </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a> &amp;&#160;</td>
          <td class="paramname"><em>sp</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01300">1300</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span>{</div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classknown__magic.html#af94169b33d6d2cd59d75efac9f92c570">spellbook</a>.count( sp ) == 1;</div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00450">spellbook</a>.</p>

</div>
</div>
<a id="af808c41802489957df2f33a5e3e381c7" name="af808c41802489957df2f33a5e3e381c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af808c41802489957df2f33a5e3e381c7">&#9670;&nbsp;</a></span>knows_spell() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool known_magic::knows_spell </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>sp</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01295">1295</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>{</div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classknown__magic.html#a67d5ecb476afb7f4a131ee82f223e44e">knows_spell</a>( <a class="code hl_enumvalue" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a26fc65fa85c36140553bad2b5359989f">spell_id</a>( sp ) );</div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01305">knows_spell()</a>, and <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a26fc65fa85c36140553bad2b5359989f">spell_id</a>.</p>

</div>
</div>
<a id="aeab7b087a69b633b0ae61509ca5e0d48" name="aeab7b087a69b633b0ae61509ca5e0d48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeab7b087a69b633b0ae61509ca5e0d48">&#9670;&nbsp;</a></span>learn_spell() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void known_magic::learn_spell </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a> &amp;&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>force</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01315">1315</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span>{</div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span>    <a class="code hl_function" href="classknown__magic.html#a39b5a4fcc441be1ebdaba7bcbb22fffa">learn_spell</a>( &amp;sp.<a class="code hl_function" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>(), guy, force );</div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span>}</div>
<div class="ttc" id="aclassknown__magic_html_a39b5a4fcc441be1ebdaba7bcbb22fffa"><div class="ttname"><a href="classknown__magic.html#a39b5a4fcc441be1ebdaba7bcbb22fffa">known_magic::learn_spell</a></div><div class="ttdeci">void learn_spell(const std::string &amp;sp, Character &amp;guy, bool force=false)</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01310">magic.cpp:1310</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01310">learn_spell()</a>, and <a class="el" href="achievement_8cpp_source.html#l00058">string_id&lt; T &gt;::obj()</a>.</p>

</div>
</div>
<a id="a7dc8309c014c9d2698826bdb8883cd39" name="a7dc8309c014c9d2698826bdb8883cd39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dc8309c014c9d2698826bdb8883cd39">&#9670;&nbsp;</a></span>learn_spell() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void known_magic::learn_spell </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classspell__type.html">spell_type</a> *&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>force</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01320">1320</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span>{</div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span>    <span class="keywordflow">if</span>( !sp-&gt;<a class="code hl_function" href="classspell__type.html#ab9b1f0c5e1c6127b4bb37b371ff09e92">is_valid</a>() ) {</div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to learn invalid spell&quot;</span> );</div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>    }</div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span>    <span class="keywordflow">if</span>( guy.<a class="code hl_variable" href="classCharacter.html#af2ff32cce5f17bcf04be958121abe524">magic</a>-&gt;knows_spell( sp-&gt;<a class="code hl_variable" href="classspell__type.html#a27241a7d092889a2be195551797dfbf8">id</a> ) ) {</div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>        <span class="comment">// you already know the spell</span></div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>    }</div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>    <a class="code hl_class" href="classspell.html">spell</a> temp_spell( sp-&gt;<a class="code hl_variable" href="classspell__type.html#a27241a7d092889a2be195551797dfbf8">id</a> );</div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span>    <span class="keywordflow">if</span>( !temp_spell.is_valid() ) {</div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to learn invalid spell&quot;</span> );</div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span>    }</div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>    <span class="keywordflow">if</span>( !force &amp;&amp; sp-&gt;<a class="code hl_variable" href="classspell__type.html#a77a45ea3e4de418a9fbe8849be99d27c">spell_class</a> != <a class="code hl_variable" href="magic_8cpp.html#ad4dc12b16a8db4bc3a0debd31fa0ca5d">trait_NONE</a> ) {</div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classknown__magic.html#ad4bdf834ec136179f6755e4566435b61">can_learn_spell</a>( guy, sp-&gt;<a class="code hl_variable" href="classspell__type.html#a27241a7d092889a2be195551797dfbf8">id</a> ) &amp;&amp; !guy.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( sp-&gt;<a class="code hl_variable" href="classspell__type.html#a77a45ea3e4de418a9fbe8849be99d27c">spell_class</a> ) ) {</div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>            std::string trait_cancel;</div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> &amp;<a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726afa28df73c87d81742155531f0f36dc71">cancel</a> : sp-&gt;<a class="code hl_variable" href="classspell__type.html#a77a45ea3e4de418a9fbe8849be99d27c">spell_class</a>-&gt;<a class="code hl_variable" href="structmutation__branch.html#a47e84e29e1d8622962a99479ef99bf0f">cancels</a> ) {</div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span>                <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726afa28df73c87d81742155531f0f36dc71">cancel</a> == sp-&gt;<a class="code hl_variable" href="classspell__type.html#a77a45ea3e4de418a9fbe8849be99d27c">spell_class</a>-&gt;<a class="code hl_variable" href="structmutation__branch.html#a47e84e29e1d8622962a99479ef99bf0f">cancels</a>.back() &amp;&amp;</div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span>                    sp-&gt;<a class="code hl_variable" href="classspell__type.html#a77a45ea3e4de418a9fbe8849be99d27c">spell_class</a>-&gt;<a class="code hl_variable" href="structmutation__branch.html#a47e84e29e1d8622962a99479ef99bf0f">cancels</a>.back() != sp-&gt;<a class="code hl_variable" href="classspell__type.html#a77a45ea3e4de418a9fbe8849be99d27c">spell_class</a>-&gt;<a class="code hl_variable" href="structmutation__branch.html#a47e84e29e1d8622962a99479ef99bf0f">cancels</a>.front() ) {</div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span>                    trait_cancel = <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;%s and %s&quot;</span> ), trait_cancel, <a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726afa28df73c87d81742155531f0f36dc71">cancel</a>-&gt;name() );</div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726afa28df73c87d81742155531f0f36dc71">cancel</a> == sp-&gt;<a class="code hl_variable" href="classspell__type.html#a77a45ea3e4de418a9fbe8849be99d27c">spell_class</a>-&gt;<a class="code hl_variable" href="structmutation__branch.html#a47e84e29e1d8622962a99479ef99bf0f">cancels</a>.front() ) {</div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>                    trait_cancel = <a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726afa28df73c87d81742155531f0f36dc71">cancel</a>-&gt;name();</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span>                    <span class="keywordflow">if</span>( sp-&gt;<a class="code hl_variable" href="classspell__type.html#a77a45ea3e4de418a9fbe8849be99d27c">spell_class</a>-&gt;<a class="code hl_variable" href="structmutation__branch.html#a47e84e29e1d8622962a99479ef99bf0f">cancels</a>.size() == 1 ) {</div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span>                        trait_cancel = <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <span class="stringliteral">&quot;%s: %s&quot;</span>, trait_cancel, <a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726afa28df73c87d81742155531f0f36dc71">cancel</a>-&gt;desc() );</div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span>                    }</div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>                    trait_cancel = <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;%s, %s&quot;</span> ), trait_cancel, <a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726afa28df73c87d81742155531f0f36dc71">cancel</a>-&gt;name() );</div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span>                }</div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span>                <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726afa28df73c87d81742155531f0f36dc71">cancel</a> == sp-&gt;<a class="code hl_variable" href="classspell__type.html#a77a45ea3e4de418a9fbe8849be99d27c">spell_class</a>-&gt;<a class="code hl_variable" href="structmutation__branch.html#a47e84e29e1d8622962a99479ef99bf0f">cancels</a>.back() ) {</div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span>                    trait_cancel += <span class="stringliteral">&quot;.&quot;</span>;</div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span>                }</div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span>            }</div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>(</div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>                    <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Learning this spell will make you a\n\n%s: %s\n\nand lock you out of\n\n%s\n\nContinue?&quot;</span> ),</div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span>                    sp-&gt;<a class="code hl_variable" href="classspell__type.html#a77a45ea3e4de418a9fbe8849be99d27c">spell_class</a>-&gt;<a class="code hl_function" href="structmutation__branch.html#a13305ba1184f2074399b71e279f223c1">name</a>(), sp-&gt;<a class="code hl_variable" href="classspell__type.html#a77a45ea3e4de418a9fbe8849be99d27c">spell_class</a>-&gt;<a class="code hl_function" href="structmutation__branch.html#a14a1b2967f485f6aa8c8f5560967c207">desc</a>(), trait_cancel ) ) {</div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span>                guy.<a class="code hl_function" href="classCharacter.html#ab62ff442fdad1420ab48b1c166af2e89">set_mutation</a>( sp-&gt;<a class="code hl_variable" href="classspell__type.html#a77a45ea3e4de418a9fbe8849be99d27c">spell_class</a> );</div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span>                guy.<a class="code hl_function" href="classCharacter.html#a4609d68fa1977aefed931d2a51afa52b">on_mutation_gain</a>( sp-&gt;<a class="code hl_variable" href="classspell__type.html#a77a45ea3e4de418a9fbe8849be99d27c">spell_class</a> );</div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span>                guy.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( sp-&gt;<a class="code hl_variable" href="classspell__type.html#a77a45ea3e4de418a9fbe8849be99d27c">spell_class</a>.<a class="code hl_function" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code hl_function" href="structmutation__branch.html#a14a1b2967f485f6aa8c8f5560967c207">desc</a>() );</div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span>            }</div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>        }</div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span>    }</div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>    <span class="keywordflow">if</span>( force || <a class="code hl_function" href="classknown__magic.html#ad4bdf834ec136179f6755e4566435b61">can_learn_spell</a>( guy, sp-&gt;<a class="code hl_variable" href="classspell__type.html#a27241a7d092889a2be195551797dfbf8">id</a> ) ) {</div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>        <a class="code hl_variable" href="classknown__magic.html#af94169b33d6d2cd59d75efac9f92c570">spellbook</a>.emplace( sp-&gt;<a class="code hl_variable" href="classspell__type.html#a27241a7d092889a2be195551797dfbf8">id</a>, temp_spell );</div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>        guy.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You learned %s!&quot;</span> ), sp-&gt;<a class="code hl_variable" href="classspell__type.html#adcac4bcd0931ffd34281a9eed747d93c">name</a> );</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>        guy.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You can&#39;t learn this spell.&quot;</span> ) );</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span>    }</div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span>}</div>
<div class="ttc" id="aclassCharacter_html_a4609d68fa1977aefed931d2a51afa52b"><div class="ttname"><a href="classCharacter.html#a4609d68fa1977aefed931d2a51afa52b">Character::on_mutation_gain</a></div><div class="ttdeci">void on_mutation_gain(const trait_id &amp;mid)</div><div class="ttdoc">Called when a mutation is gained.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09863">character.cpp:9863</a></div></div>
<div class="ttc" id="aclassCharacter_html_ab62ff442fdad1420ab48b1c166af2e89"><div class="ttname"><a href="classCharacter.html#ab62ff442fdad1420ab48b1c166af2e89">Character::set_mutation</a></div><div class="ttdeci">void set_mutation(const trait_id &amp;)</div><div class="ttdoc">Add or removes a mutation on the player, but does not trigger mutation loss/gain effects.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00154">mutation.cpp:154</a></div></div>
<div class="ttc" id="aclassCharacter_html_af06dd97724f4f05df782e7a4b4f9cfe1"><div class="ttname"><a href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">Character::has_trait</a></div><div class="ttdeci">bool has_trait(const trait_id &amp;b) const override</div><div class="ttdoc">Returns true if the player has the entered trait.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00103">mutation.cpp:103</a></div></div>
<div class="ttc" id="aclassCharacter_html_af2ff32cce5f17bcf04be958121abe524"><div class="ttname"><a href="classCharacter.html#af2ff32cce5f17bcf04be958121abe524">Character::magic</a></div><div class="ttdeci">pimpl&lt; known_magic &gt; magic</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01476">character.h:1476</a></div></div>
<div class="ttc" id="aclassCreature_html_a91dc4715c36eef7d116f944be9a4d435"><div class="ttname"><a href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">Creature::add_msg_if_player</a></div><div class="ttdeci">virtual void add_msg_if_player(const std::string &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00593">creature.h:593</a></div></div>
<div class="ttc" id="aclassknown__magic_html_ad4bdf834ec136179f6755e4566435b61"><div class="ttname"><a href="classknown__magic.html#ad4bdf834ec136179f6755e4566435b61">known_magic::can_learn_spell</a></div><div class="ttdeci">bool can_learn_spell(const Character &amp;guy, const spell_id &amp;sp) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01388">magic.cpp:1388</a></div></div>
<div class="ttc" id="aclassspell__type_html_a27241a7d092889a2be195551797dfbf8"><div class="ttname"><a href="classspell__type.html#a27241a7d092889a2be195551797dfbf8">spell_type::id</a></div><div class="ttdeci">spell_id id</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00139">magic.h:139</a></div></div>
<div class="ttc" id="aclassspell__type_html_ab9b1f0c5e1c6127b4bb37b371ff09e92"><div class="ttname"><a href="classspell__type.html#ab9b1f0c5e1c6127b4bb37b371ff09e92">spell_type::is_valid</a></div><div class="ttdeci">bool is_valid() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00439">magic.cpp:439</a></div></div>
<div class="ttc" id="acraft__command_8h_html_a5684f219761d78b4f98e7b2869dd1726afa28df73c87d81742155531f0f36dc71"><div class="ttname"><a href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726afa28df73c87d81742155531f0f36dc71">cancel</a></div><div class="ttdeci">@ cancel</div><div class="ttdef"><b>Definition:</b> <a href="craft__command_8h_source.html#l00028">craft_command.h:28</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a></div><div class="ttdeci">@ m_good</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00253">enums.h:253</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ab62599a77867b8f416669b92f60f4900"><div class="ttname"><a href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a></div><div class="ttdeci">bool query_yn(const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00698">output.cpp:698</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a9b089d0b697443b096063219dab08ef5"><div class="ttname"><a href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a></div><div class="ttdeci">std::string string_format(std::string format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00418">string_formatter.h:418</a></div></div>
<div class="ttc" id="astructmutation__branch_html_a13305ba1184f2074399b71e279f223c1"><div class="ttname"><a href="structmutation__branch.html#a13305ba1184f2074399b71e279f223c1">mutation_branch::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="mutation__data_8cpp_source.html#l00556">mutation_data.cpp:556</a></div></div>
<div class="ttc" id="astructmutation__branch_html_a14a1b2967f485f6aa8c8f5560967c207"><div class="ttname"><a href="structmutation__branch.html#a14a1b2967f485f6aa8c8f5560967c207">mutation_branch::desc</a></div><div class="ttdeci">std::string desc() const</div><div class="ttdef"><b>Definition:</b> <a href="mutation__data_8cpp_source.html#l00561">mutation_data.cpp:561</a></div></div>
<div class="ttc" id="astructmutation__branch_html_a47e84e29e1d8622962a99479ef99bf0f"><div class="ttname"><a href="structmutation__branch.html#a47e84e29e1d8622962a99479ef99bf0f">mutation_branch::cancels</a></div><div class="ttdeci">std::vector&lt; trait_id &gt; cancels</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8h_source.html#l00279">mutation.h:279</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8h_source.html#l00593">Creature::add_msg_if_player()</a>, <a class="el" href="magic_8cpp_source.html#l01388">can_learn_spell()</a>, <a class="el" href="craft__command_8h_source.html#l00028">cancel</a>, <a class="el" href="mutation_8h_source.html#l00279">mutation_branch::cancels</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="mutation__data_8cpp_source.html#l00561">mutation_branch::desc()</a>, <a class="el" href="mutation_8cpp_source.html#l00103">Character::has_trait()</a>, <a class="el" href="magic_8h_source.html#l00139">spell_type::id</a>, <a class="el" href="magic_8cpp_source.html#l00439">spell_type::is_valid()</a>, <a class="el" href="magic_8cpp_source.html#l00887">spell::is_valid()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00253">m_good</a>, <a class="el" href="character_8h_source.html#l01476">Character::magic</a>, <a class="el" href="magic_8h_source.html#l00143">spell_type::name</a>, <a class="el" href="mutation__data_8cpp_source.html#l00556">mutation_branch::name()</a>, <a class="el" href="achievement_8cpp_source.html#l00058">string_id&lt; T &gt;::obj()</a>, <a class="el" href="character_8cpp_source.html#l09863">Character::on_mutation_gain()</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="mutation_8cpp_source.html#l00154">Character::set_mutation()</a>, <a class="el" href="magic_8h_source.html#l00236">spell_type::spell_class</a>, <a class="el" href="magic_8h_source.html#l00450">spellbook</a>, <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>, and <a class="el" href="magic_8cpp.html#ad4dc12b16a8db4bc3a0debd31fa0ca5d">trait_NONE</a>.</p>

</div>
</div>
<a id="a39b5a4fcc441be1ebdaba7bcbb22fffa" name="a39b5a4fcc441be1ebdaba7bcbb22fffa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39b5a4fcc441be1ebdaba7bcbb22fffa">&#9670;&nbsp;</a></span>learn_spell() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void known_magic::learn_spell </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>force</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01310">1310</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>{</div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>    <a class="code hl_function" href="classknown__magic.html#a39b5a4fcc441be1ebdaba7bcbb22fffa">learn_spell</a>( <a class="code hl_enumvalue" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a26fc65fa85c36140553bad2b5359989f">spell_id</a>( sp ), guy, force );</div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01310">learn_spell()</a>, and <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a26fc65fa85c36140553bad2b5359989f">spell_id</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01310">learn_spell()</a>, and <a class="el" href="magic_8cpp_source.html#l01854">on_mutation_gain()</a>.</p>

</div>
</div>
<a id="aa24ea6f5285f81f10610fd6d1fa7012e" name="aa24ea6f5285f81f10610fd6d1fa7012e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa24ea6f5285f81f10610fd6d1fa7012e">&#9670;&nbsp;</a></span>mana_regen_rate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double known_magic::mana_regen_rate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mana regeneration rate (units per turn). </p>

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01444">1444</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span>{</div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span>    <span class="comment">// mana should replenish in 8 hours.</span></div>
<div class="line"><a id="l01447" name="l01447"></a><span class="lineno"> 1447</span>    <span class="keywordtype">double</span> full_replenish = to_turns&lt;double&gt;( 8_hours );</div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"> 1448</span>    <span class="keywordtype">double</span> capacity = <a class="code hl_function" href="classknown__magic.html#af1d54e77049ce1b9ed9d20a559ae0a38">max_mana</a>( guy );</div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span>    <span class="keywordtype">double</span> mut_mul = guy.<a class="code hl_function" href="classCharacter.html#a7fbae705aa03db588d52519dfa1e285c">mutation_value</a>( <span class="stringliteral">&quot;mana_regen_multiplier&quot;</span> );</div>
<div class="line"><a id="l01450" name="l01450"></a><span class="lineno"> 1450</span>    <span class="keywordtype">double</span> natural_regen = std::max( 0.0, capacity * mut_mul / full_replenish );</div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"> 1451</span> </div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"> 1452</span>    <span class="keywordtype">double</span> ench_bonus = guy.<a class="code hl_function" href="classCharacter.html#adc248f444bde56349dc619c48a549c04">bonus_from_enchantments</a>( natural_regen, <a class="code hl_enumvalue" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a7cd20b68c70e507cf83076bf03fd0a3e">enchant_vals::mod::MANA_REGEN</a> );</div>
<div class="line"><a id="l01453" name="l01453"></a><span class="lineno"> 1453</span> </div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span>    <span class="keywordflow">return</span> std::max( 0.0, natural_regen + ench_bonus );</div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"> 1455</span>}</div>
<div class="ttc" id="aclassCharacter_html_a7fbae705aa03db588d52519dfa1e285c"><div class="ttname"><a href="classCharacter.html#a7fbae705aa03db588d52519dfa1e285c">Character::mutation_value</a></div><div class="ttdeci">float mutation_value(const std::string &amp;val) const</div><div class="ttdoc">Goes over all mutations, gets min and max of a value with given name.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06732">character.cpp:6732</a></div></div>
<div class="ttc" id="aclassCharacter_html_adc248f444bde56349dc619c48a549c04"><div class="ttname"><a href="classCharacter.html#adc248f444bde56349dc619c48a549c04">Character::bonus_from_enchantments</a></div><div class="ttdeci">double bonus_from_enchantments(double base, enchant_vals::mod value, bool round=false) const</div><div class="ttdoc">Calculate bonus from enchantments for given base value.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08017">character.cpp:8017</a></div></div>
<div class="ttc" id="aclassknown__magic_html_af1d54e77049ce1b9ed9d20a559ae0a38"><div class="ttname"><a href="classknown__magic.html#af1d54e77049ce1b9ed9d20a559ae0a38">known_magic::max_mana</a></div><div class="ttdeci">int max_mana(const Character &amp;guy) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01431">magic.cpp:1431</a></div></div>
<div class="ttc" id="anamespaceenchant__vals_html_acd6a6ebb27f9ecb82b3bce1d3aef2998a7cd20b68c70e507cf83076bf03fd0a3e"><div class="ttname"><a href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a7cd20b68c70e507cf83076bf03fd0a3e">enchant_vals::mod::MANA_REGEN</a></div><div class="ttdeci">@ MANA_REGEN</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8cpp_source.html#l08017">Character::bonus_from_enchantments()</a>, <a class="el" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a7cd20b68c70e507cf83076bf03fd0a3e">enchant_vals::MANA_REGEN</a>, <a class="el" href="magic_8cpp_source.html#l01431">max_mana()</a>, and <a class="el" href="character_8cpp_source.html#l06732">Character::mutation_value()</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01457">update_mana()</a>.</p>

</div>
</div>
<a id="af1d54e77049ce1b9ed9d20a559ae0a38" name="af1d54e77049ce1b9ed9d20a559ae0a38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1d54e77049ce1b9ed9d20a559ae0a38">&#9670;&nbsp;</a></span>max_mana()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int known_magic::max_mana </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01431">1431</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01432" name="l01432"></a><span class="lineno"> 1432</span>{</div>
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"> 1433</span>    <span class="keywordtype">float</span> int_bonus = ( ( 0.2f + guy.<a class="code hl_function" href="classCharacter.html#a588d5cc1d729490552fe03b006685ae5">get_int</a>() * 0.1f ) - 1.0f ) * <a class="code hl_variable" href="classknown__magic.html#a2e2bc1600c4888fb87cc14508f0111c3">mana_base</a>;</div>
<div class="line"><a id="l01434" name="l01434"></a><span class="lineno"> 1434</span>    <span class="keywordtype">float</span> mut_mul = guy.<a class="code hl_function" href="classCharacter.html#a7fbae705aa03db588d52519dfa1e285c">mutation_value</a>( <span class="stringliteral">&quot;mana_multiplier&quot;</span> );</div>
<div class="line"><a id="l01435" name="l01435"></a><span class="lineno"> 1435</span>    <span class="keywordtype">float</span> mut_add = guy.<a class="code hl_function" href="classCharacter.html#a7fbae705aa03db588d52519dfa1e285c">mutation_value</a>( <span class="stringliteral">&quot;mana_modifier&quot;</span> );</div>
<div class="line"><a id="l01436" name="l01436"></a><span class="lineno"> 1436</span>    <span class="keywordtype">int</span> natural_cap = std::max( 0.0f, ( ( <a class="code hl_variable" href="classknown__magic.html#a2e2bc1600c4888fb87cc14508f0111c3">mana_base</a> + int_bonus ) * mut_mul ) + mut_add );</div>
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"> 1437</span> </div>
<div class="line"><a id="l01438" name="l01438"></a><span class="lineno"> 1438</span>    <span class="keywordtype">int</span> bp_penalty = <a class="code hl_function" href="namespaceunits.html#a54442f1523294bc7b9946662beed96e6">units::to_kilojoule</a>( guy.<a class="code hl_function" href="classCharacter.html#add22510ff2fa20a662868b4dd86e030e">get_power_level</a>() );</div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span>    <span class="keywordtype">int</span> ench_bonus = guy.<a class="code hl_function" href="classCharacter.html#adc248f444bde56349dc619c48a549c04">bonus_from_enchantments</a>( natural_cap, <a class="code hl_enumvalue" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998ab331df9e93f5acecb7d416b8e1bde138">enchant_vals::mod::MANA_CAP</a>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"> 1440</span> </div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"> 1441</span>    <span class="keywordflow">return</span> std::max( 0, natural_cap - bp_penalty + ench_bonus );</div>
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"> 1442</span>}</div>
<div class="ttc" id="aclassCharacter_html_a588d5cc1d729490552fe03b006685ae5"><div class="ttname"><a href="classCharacter.html#a588d5cc1d729490552fe03b006685ae5">Character::get_int</a></div><div class="ttdeci">virtual int get_int() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04060">character.cpp:4060</a></div></div>
<div class="ttc" id="anamespaceenchant__vals_html_acd6a6ebb27f9ecb82b3bce1d3aef2998ab331df9e93f5acecb7d416b8e1bde138"><div class="ttname"><a href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998ab331df9e93f5acecb7d416b8e1bde138">enchant_vals::mod::MANA_CAP</a></div><div class="ttdeci">@ MANA_CAP</div></div>
<div class="ttc" id="anamespaceunits_html_a54442f1523294bc7b9946662beed96e6"><div class="ttname"><a href="namespaceunits.html#a54442f1523294bc7b9946662beed96e6">units::to_kilojoule</a></div><div class="ttdeci">constexpr value_type to_kilojoule(const quantity&lt; value_type, energy_in_joule_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units__energy_8h_source.html#l00046">units_energy.h:46</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8cpp_source.html#l08017">Character::bonus_from_enchantments()</a>, <a class="el" href="character_8cpp_source.html#l04060">Character::get_int()</a>, <a class="el" href="character_8cpp_source.html#l01956">Character::get_power_level()</a>, <a class="el" href="magic_8h_source.html#l00454">mana_base</a>, <a class="el" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998ab331df9e93f5acecb7d416b8e1bde138">enchant_vals::MANA_CAP</a>, <a class="el" href="character_8cpp_source.html#l06732">Character::mutation_value()</a>, and <a class="el" href="units__energy_8h_source.html#l00046">units::to_kilojoule()</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01444">mana_regen_rate()</a>, and <a class="el" href="magic_8cpp_source.html#l01426">mod_mana()</a>.</p>

</div>
</div>
<a id="ae44e12a998ae53c5d487828d83165168" name="ae44e12a998ae53c5d487828d83165168"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae44e12a998ae53c5d487828d83165168">&#9670;&nbsp;</a></span>mod_mana()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void known_magic::mod_mana </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>add_mana</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01426">1426</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01427" name="l01427"></a><span class="lineno"> 1427</span>{</div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span>    <a class="code hl_function" href="classknown__magic.html#aeed71b588441f7580d8f3bf9d27a7eb9">set_mana</a>( <a class="code hl_function" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( <a class="code hl_variable" href="classknown__magic.html#a7545cd34ae575060a438e9a6486762e6">mana</a> + add_mana, 0, <a class="code hl_function" href="classknown__magic.html#af1d54e77049ce1b9ed9d20a559ae0a38">max_mana</a>( guy ) ) );</div>
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"> 1429</span>}</div>
<div class="ttc" id="acata__utility_8h_html_ad22b4a043b6eb4c2c06f87f83b720b15"><div class="ttname"><a href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a></div><div class="ttdeci">constexpr T clamp(const T &amp;val, const T &amp;min, const T &amp;max)</div><div class="ttdoc">Clamp first argument so that it is no lower than second and no higher than third.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00145">cata_utility.h:145</a></div></div>
<div class="ttc" id="aclassknown__magic_html_aeed71b588441f7580d8f3bf9d27a7eb9"><div class="ttname"><a href="classknown__magic.html#aeed71b588441f7580d8f3bf9d27a7eb9">known_magic::set_mana</a></div><div class="ttdeci">void set_mana(int new_mana)</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01421">magic.cpp:1421</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cata__utility_8h_source.html#l00145">clamp()</a>, <a class="el" href="magic_8h_source.html#l00456">mana</a>, <a class="el" href="magic_8cpp_source.html#l01431">max_mana()</a>, and <a class="el" href="magic_8cpp_source.html#l01421">set_mana()</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01457">update_mana()</a>.</p>

</div>
</div>
<a id="aadc9db2d8635c2b6e6e28f14bf689cd1" name="aadc9db2d8635c2b6e6e28f14bf689cd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadc9db2d8635c2b6e6e28f14bf689cd1">&#9670;&nbsp;</a></span>on_mutation_gain()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void known_magic::on_mutation_gain </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a44aa01c09faf1c1723400eb9075a1f4d">trait_id</a> &amp;&#160;</td>
          <td class="paramname"><em>mid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01854">1854</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01855" name="l01855"></a><span class="lineno"> 1855</span>{</div>
<div class="line"><a id="l01856" name="l01856"></a><span class="lineno"> 1856</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const spell_id, int&gt; &amp;sp : mid-&gt;<a class="code hl_variable" href="structmutation__branch.html#a7c0ff24a9aac03207154197f7f6fa789">spells_learned</a> ) {</div>
<div class="line"><a id="l01857" name="l01857"></a><span class="lineno"> 1857</span>        <a class="code hl_function" href="classknown__magic.html#a39b5a4fcc441be1ebdaba7bcbb22fffa">learn_spell</a>( sp.first, guy, <span class="keyword">true</span> );</div>
<div class="line"><a id="l01858" name="l01858"></a><span class="lineno"> 1858</span>        <a class="code hl_class" href="classspell.html">spell</a> &amp;temp_sp = <a class="code hl_function" href="classknown__magic.html#a86c3dca5ebcd118303a6be29a38a73ea">get_spell</a>( sp.first );</div>
<div class="line"><a id="l01859" name="l01859"></a><span class="lineno"> 1859</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> level = 0; level &lt; sp.second; level++ ) {</div>
<div class="line"><a id="l01860" name="l01860"></a><span class="lineno"> 1860</span>            temp_sp.<a class="code hl_function" href="classspell.html#a887122b032b65c06188a2ff712624b9f">gain_level</a>();</div>
<div class="line"><a id="l01861" name="l01861"></a><span class="lineno"> 1861</span>        }</div>
<div class="line"><a id="l01862" name="l01862"></a><span class="lineno"> 1862</span>    }</div>
<div class="line"><a id="l01863" name="l01863"></a><span class="lineno"> 1863</span>}</div>
<div class="ttc" id="aclassknown__magic_html_a86c3dca5ebcd118303a6be29a38a73ea"><div class="ttname"><a href="classknown__magic.html#a86c3dca5ebcd118303a6be29a38a73ea">known_magic::get_spell</a></div><div class="ttdeci">spell &amp; get_spell(const spell_id &amp;sp)</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01397">magic.cpp:1397</a></div></div>
<div class="ttc" id="aclassspell_html_a887122b032b65c06188a2ff712624b9f"><div class="ttname"><a href="classspell.html#a887122b032b65c06188a2ff712624b9f">spell::gain_level</a></div><div class="ttdeci">void gain_level()</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00597">magic.cpp:597</a></div></div>
<div class="ttc" id="astructmutation__branch_html_a7c0ff24a9aac03207154197f7f6fa789"><div class="ttname"><a href="structmutation__branch.html#a7c0ff24a9aac03207154197f7f6fa789">mutation_branch::spells_learned</a></div><div class="ttdeci">std::map&lt; spell_id, int &gt; spells_learned</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8h_source.html#l00251">mutation.h:251</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l00597">spell::gain_level()</a>, <a class="el" href="magic_8cpp_source.html#l01397">get_spell()</a>, <a class="el" href="magic_8cpp_source.html#l01310">learn_spell()</a>, and <a class="el" href="mutation_8h_source.html#l00251">mutation_branch::spells_learned</a>.</p>

</div>
</div>
<a id="a8492a7babf0a12769b76bff2e61e0098" name="a8492a7babf0a12769b76bff2e61e0098"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8492a7babf0a12769b76bff2e61e0098">&#9670;&nbsp;</a></span>on_mutation_loss()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void known_magic::on_mutation_loss </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a44aa01c09faf1c1723400eb9075a1f4d">trait_id</a> &amp;&#160;</td>
          <td class="paramname"><em>mid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01865">1865</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01866" name="l01866"></a><span class="lineno"> 1866</span>{</div>
<div class="line"><a id="l01867" name="l01867"></a><span class="lineno"> 1867</span>    std::vector&lt;spell_id&gt; spells_to_forget;</div>
<div class="line"><a id="l01868" name="l01868"></a><span class="lineno"> 1868</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classspell.html">spell</a> *sp : <a class="code hl_function" href="classknown__magic.html#af47da2a24159ff7852576b1db2e30eab">get_spells</a>() ) {</div>
<div class="line"><a id="l01869" name="l01869"></a><span class="lineno"> 1869</span>        <span class="keywordflow">if</span>( sp-&gt;is_spell_class( mid ) ) {</div>
<div class="line"><a id="l01870" name="l01870"></a><span class="lineno"> 1870</span>            spells_to_forget.emplace_back( sp-&gt;id() );</div>
<div class="line"><a id="l01871" name="l01871"></a><span class="lineno"> 1871</span>        }</div>
<div class="line"><a id="l01872" name="l01872"></a><span class="lineno"> 1872</span>    }</div>
<div class="line"><a id="l01873" name="l01873"></a><span class="lineno"> 1873</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">spell_id</a> &amp;sp_id : spells_to_forget ) {</div>
<div class="line"><a id="l01874" name="l01874"></a><span class="lineno"> 1874</span>        <a class="code hl_function" href="classknown__magic.html#a51f338d00a8e83a453e33766b5a05bd6">forget_spell</a>( sp_id );</div>
<div class="line"><a id="l01875" name="l01875"></a><span class="lineno"> 1875</span>    }</div>
<div class="line"><a id="l01876" name="l01876"></a><span class="lineno"> 1876</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01373">forget_spell()</a>, and <a class="el" href="magic_8cpp_source.html#l01407">get_spells()</a>.</p>

</div>
</div>
<a id="a9c29f4c065729517316b825e410641df" name="a9c29f4c065729517316b825e410641df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c29f4c065729517316b825e410641df">&#9670;&nbsp;</a></span>rem_invlet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void known_magic::rem_invlet </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a> &amp;&#160;</td>
          <td class="paramname"><em>sp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01783">1783</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01784" name="l01784"></a><span class="lineno"> 1784</span>{</div>
<div class="line"><a id="l01785" name="l01785"></a><span class="lineno"> 1785</span>    <a class="code hl_variable" href="classknown__magic.html#abdb326bf0885177b20fd45f26a6d68ad">invlets</a>.erase( sp );</div>
<div class="line"><a id="l01786" name="l01786"></a><span class="lineno"> 1786</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00452">invlets</a>.</p>

</div>
</div>
<a id="aded01b4e292bc7526c77526769125a4c" name="aded01b4e292bc7526c77526769125a4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aded01b4e292bc7526c77526769125a4c">&#9670;&nbsp;</a></span>select_spell()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int known_magic::select_spell </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01818">1818</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01819" name="l01819"></a><span class="lineno"> 1819</span>{</div>
<div class="line"><a id="l01820" name="l01820"></a><span class="lineno"> 1820</span>    <span class="comment">// max width of spell names</span></div>
<div class="line"><a id="l01821" name="l01821"></a><span class="lineno"> 1821</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> max_spell_name_length = <a class="code hl_function" href="classknown__magic.html#adb9da4817cfdc19624a8674d4cc16fea">get_spellname_max_width</a>();</div>
<div class="line"><a id="l01822" name="l01822"></a><span class="lineno"> 1822</span>    std::vector&lt;spell *&gt; known_spells = <a class="code hl_function" href="classknown__magic.html#af47da2a24159ff7852576b1db2e30eab">get_spells</a>();</div>
<div class="line"><a id="l01823" name="l01823"></a><span class="lineno"> 1823</span> </div>
<div class="line"><a id="l01824" name="l01824"></a><span class="lineno"> 1824</span>    <a class="code hl_class" href="classuilist.html">uilist</a> spell_menu;</div>
<div class="line"><a id="l01825" name="l01825"></a><span class="lineno"> 1825</span>    spell_menu.<a class="code hl_variable" href="classuilist.html#a7d03ff2194b5dc30035d88d77108f6a4">w_height_setup</a> = [&amp;]() -&gt; <span class="keywordtype">int</span> {</div>
<div class="line"><a id="l01826" name="l01826"></a><span class="lineno"> 1826</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( known_spells.size() ), 24, <a class="code hl_variable" href="output_8cpp.html#a567a63be8cb70cc3eb47bf8affced8e5">TERMY</a> * 9 / 10 );</div>
<div class="line"><a id="l01827" name="l01827"></a><span class="lineno"> 1827</span>    };</div>
<div class="line"><a id="l01828" name="l01828"></a><span class="lineno"> 1828</span>    <span class="keyword">const</span> <span class="keyword">auto</span> calc_width = []() -&gt; <span class="keywordtype">int</span> {</div>
<div class="line"><a id="l01829" name="l01829"></a><span class="lineno"> 1829</span>        <span class="keywordflow">return</span> std::max( 80, <a class="code hl_variable" href="output_8cpp.html#a000abea6447dfafd5f9b787aa6753609">TERMX</a> * 3 / 8 );</div>
<div class="line"><a id="l01830" name="l01830"></a><span class="lineno"> 1830</span>    };</div>
<div class="line"><a id="l01831" name="l01831"></a><span class="lineno"> 1831</span>    spell_menu.<a class="code hl_variable" href="classuilist.html#a5dac54c98fae0ec2bc4b0ac75c9fcd57">w_width_setup</a> = calc_width;</div>
<div class="line"><a id="l01832" name="l01832"></a><span class="lineno"> 1832</span>    spell_menu.<a class="code hl_variable" href="classuilist.html#a790be01eb1b3db027e262729e5e95aae">pad_right_setup</a> = [&amp;]() -&gt; <span class="keywordtype">int</span> {</div>
<div class="line"><a id="l01833" name="l01833"></a><span class="lineno"> 1833</span>        <span class="keywordflow">return</span> calc_width() - max_spell_name_length - 5;</div>
<div class="line"><a id="l01834" name="l01834"></a><span class="lineno"> 1834</span>    };</div>
<div class="line"><a id="l01835" name="l01835"></a><span class="lineno"> 1835</span>    spell_menu.<a class="code hl_variable" href="classuilist.html#a53ff5990a6abb4e7da837db31afea4b8">title</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Choose a Spell&quot;</span> );</div>
<div class="line"><a id="l01836" name="l01836"></a><span class="lineno"> 1836</span>    spell_menu.<a class="code hl_variable" href="classuilist.html#ae4ae08b4f010935825c956ea705065aa">hilight_disabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01837" name="l01837"></a><span class="lineno"> 1837</span>    <a class="code hl_class" href="classspellcasting__callback.html">spellcasting_callback</a> cb( known_spells, <a class="code hl_variable" href="classknown__magic.html#a8feaad1d7a7ecbb054556ef48e4599c6">casting_ignore</a> );</div>
<div class="line"><a id="l01838" name="l01838"></a><span class="lineno"> 1838</span>    spell_menu.<a class="code hl_variable" href="classuilist.html#ad4f5806d1d8ab3de3af8e3285faf47d6">callback</a> = &amp;cb;</div>
<div class="line"><a id="l01839" name="l01839"></a><span class="lineno"> 1839</span> </div>
<div class="line"><a id="l01840" name="l01840"></a><span class="lineno"> 1840</span>    std::set&lt;int&gt; used_invlets{ cb.reserved_invlets };</div>
<div class="line"><a id="l01841" name="l01841"></a><span class="lineno"> 1841</span> </div>
<div class="line"><a id="l01842" name="l01842"></a><span class="lineno"> 1842</span>    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0; i &lt; known_spells.size(); i++ ) {</div>
<div class="line"><a id="l01843" name="l01843"></a><span class="lineno"> 1843</span>        spell_menu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( i ), known_spells[i]-&gt;can_cast( guy ),</div>
<div class="line"><a id="l01844" name="l01844"></a><span class="lineno"> 1844</span>                             <a class="code hl_function" href="classknown__magic.html#a92c16301084172b5bd459c257af9c002">get_invlet</a>( known_spells[i]-&gt;<span class="keywordtype">id</span>(), used_invlets ), known_spells[i]-&gt;<a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>() );</div>
<div class="line"><a id="l01845" name="l01845"></a><span class="lineno"> 1845</span>    }</div>
<div class="line"><a id="l01846" name="l01846"></a><span class="lineno"> 1846</span> </div>
<div class="line"><a id="l01847" name="l01847"></a><span class="lineno"> 1847</span>    spell_menu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l01848" name="l01848"></a><span class="lineno"> 1848</span> </div>
<div class="line"><a id="l01849" name="l01849"></a><span class="lineno"> 1849</span>    <a class="code hl_variable" href="classknown__magic.html#a8feaad1d7a7ecbb054556ef48e4599c6">casting_ignore</a> = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classspellcasting__callback.html">spellcasting_callback</a> *<span class="keyword">&gt;</span>( spell_menu.<a class="code hl_variable" href="classuilist.html#ad4f5806d1d8ab3de3af8e3285faf47d6">callback</a> )-&gt;<a class="code hl_variable" href="classknown__magic.html#a8feaad1d7a7ecbb054556ef48e4599c6">casting_ignore</a>;</div>
<div class="line"><a id="l01850" name="l01850"></a><span class="lineno"> 1850</span> </div>
<div class="line"><a id="l01851" name="l01851"></a><span class="lineno"> 1851</span>    <span class="keywordflow">return</span> spell_menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a id="l01852" name="l01852"></a><span class="lineno"> 1852</span>}</div>
<div class="ttc" id="aclassknown__magic_html_a8feaad1d7a7ecbb054556ef48e4599c6"><div class="ttname"><a href="classknown__magic.html#a8feaad1d7a7ecbb054556ef48e4599c6">known_magic::casting_ignore</a></div><div class="ttdeci">bool casting_ignore</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00459">magic.h:459</a></div></div>
<div class="ttc" id="aclassknown__magic_html_a92c16301084172b5bd459c257af9c002"><div class="ttname"><a href="classknown__magic.html#a92c16301084172b5bd459c257af9c002">known_magic::get_invlet</a></div><div class="ttdeci">int get_invlet(const spell_id &amp;sp, std::set&lt; int &gt; &amp;used_invlets)</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01788">magic.cpp:1788</a></div></div>
<div class="ttc" id="aclassknown__magic_html_adb9da4817cfdc19624a8674d4cc16fea"><div class="ttname"><a href="classknown__magic.html#adb9da4817cfdc19624a8674d4cc16fea">known_magic::get_spellname_max_width</a></div><div class="ttdeci">int get_spellname_max_width()</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01510">magic.cpp:1510</a></div></div>
<div class="ttc" id="aclassspellcasting__callback_html"><div class="ttname"><a href="classspellcasting__callback.html">spellcasting_callback</a></div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01519">magic.cpp:1520</a></div></div>
<div class="ttc" id="aclassuilist_html"><div class="ttname"><a href="classuilist.html">uilist</a></div><div class="ttdoc">uilist: scrolling vertical list menu</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00186">ui.h:187</a></div></div>
<div class="ttc" id="aclassuilist_html_a0baa34622db6972a59d47d478bfd21d6"><div class="ttname"><a href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">uilist::ret</a></div><div class="ttdeci">int ret</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00412">ui.h:412</a></div></div>
<div class="ttc" id="aclassuilist_html_a53ff5990a6abb4e7da837db31afea4b8"><div class="ttname"><a href="classuilist.html#a53ff5990a6abb4e7da837db31afea4b8">uilist::title</a></div><div class="ttdeci">std::string title</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00319">ui.h:319</a></div></div>
<div class="ttc" id="aclassuilist_html_a5dac54c98fae0ec2bc4b0ac75c9fcd57"><div class="ttname"><a href="classuilist.html#a5dac54c98fae0ec2bc4b0ac75c9fcd57">uilist::w_width_setup</a></div><div class="ttdeci">size_scalar w_width_setup</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00339">ui.h:339</a></div></div>
<div class="ttc" id="aclassuilist_html_a790be01eb1b3db027e262729e5e95aae"><div class="ttname"><a href="classuilist.html#a790be01eb1b3db027e262729e5e95aae">uilist::pad_right_setup</a></div><div class="ttdeci">size_scalar pad_right_setup</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00345">ui.h:345</a></div></div>
<div class="ttc" id="aclassuilist_html_a7d03ff2194b5dc30035d88d77108f6a4"><div class="ttname"><a href="classuilist.html#a7d03ff2194b5dc30035d88d77108f6a4">uilist::w_height_setup</a></div><div class="ttdeci">size_scalar w_height_setup</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00340">ui.h:340</a></div></div>
<div class="ttc" id="aclassuilist_html_ad4f5806d1d8ab3de3af8e3285faf47d6"><div class="ttname"><a href="classuilist.html#ad4f5806d1d8ab3de3af8e3285faf47d6">uilist::callback</a></div><div class="ttdeci">uilist_callback * callback</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00335">ui.h:335</a></div></div>
<div class="ttc" id="aclassuilist_html_ae4ae08b4f010935825c956ea705065aa"><div class="ttname"><a href="classuilist.html#ae4ae08b4f010935825c956ea705065aa">uilist::hilight_disabled</a></div><div class="ttdeci">bool hilight_disabled</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00366">ui.h:366</a></div></div>
<div class="ttc" id="aclassuilist_html_af99f28334902af64487e2d0758df2ab9"><div class="ttname"><a href="classuilist.html#af99f28334902af64487e2d0758df2ab9">uilist::addentry</a></div><div class="ttdeci">void addentry(const std::string &amp;str)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l00932">ui.cpp:932</a></div></div>
<div class="ttc" id="agroup__UI_html_ga7604af7545244003f0a52ac87ce37979"><div class="ttname"><a href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">uilist::query</a></div><div class="ttdeci">void query(bool loop=true, int timeout=-1)</div><div class="ttdoc">Handle input and update display.</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l00828">ui.cpp:828</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_a8ba958ccfad28c0a5572a04dd1428f32"><div class="ttname"><a href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">om_direction::name</a></div><div class="ttdeci">std::string name(type dir)</div><div class="ttdoc">Get Human readable name of a direction.</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l04051">overmap.cpp:4051</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a000abea6447dfafd5f9b787aa6753609"><div class="ttname"><a href="output_8cpp.html#a000abea6447dfafd5f9b787aa6753609">TERMX</a></div><div class="ttdeci">int TERMX</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00047">output.cpp:47</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a567a63be8cb70cc3eb47bf8affced8e5"><div class="ttname"><a href="output_8cpp.html#a567a63be8cb70cc3eb47bf8affced8e5">TERMY</a></div><div class="ttdeci">int TERMY</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00048">output.cpp:48</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="ui_8cpp_source.html#l00932">uilist::addentry()</a>, <a class="el" href="ui_8h_source.html#l00335">uilist::callback</a>, <a class="el" href="magic_8h_source.html#l00459">casting_ignore</a>, <a class="el" href="cata__utility_8h_source.html#l00145">clamp()</a>, <a class="el" href="magic_8cpp_source.html#l01788">get_invlet()</a>, <a class="el" href="magic_8cpp_source.html#l01510">get_spellname_max_width()</a>, <a class="el" href="magic_8cpp_source.html#l01407">get_spells()</a>, <a class="el" href="ui_8h_source.html#l00366">uilist::hilight_disabled</a>, <a class="el" href="overmap_8cpp_source.html#l04051">om_direction::name()</a>, <a class="el" href="ui_8h_source.html#l00345">uilist::pad_right_setup</a>, <a class="el" href="ui_8cpp_source.html#l00828">uilist::query()</a>, <a class="el" href="magic_8cpp_source.html#l01526">spellcasting_callback::reserved_invlets</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="output_8cpp_source.html#l00047">TERMX</a>, <a class="el" href="output_8cpp_source.html#l00048">TERMY</a>, <a class="el" href="ui_8h_source.html#l00319">uilist::title</a>, <a class="el" href="ui_8h_source.html#l00340">uilist::w_height_setup</a>, and <a class="el" href="ui_8h_source.html#l00339">uilist::w_width_setup</a>.</p>

</div>
</div>
<a id="af8acd3edf4541649cd1b1ee21124dd0a" name="af8acd3edf4541649cd1b1ee21124dd0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8acd3edf4541649cd1b1ee21124dd0a">&#9670;&nbsp;</a></span>serialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void known_magic::serialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classJsonOut.html">JsonOut</a> &amp;&#160;</td>
          <td class="paramname"><em>json</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01255">1255</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>{</div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span>    json.<a class="code hl_function" href="classJsonOut.html#a4756f9a569adbfc60de127f7c335d82f">start_object</a>();</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span> </div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;mana&quot;</span>, <a class="code hl_variable" href="classknown__magic.html#a7545cd34ae575060a438e9a6486762e6">mana</a> );</div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span> </div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;spellbook&quot;</span> );</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span>    json.<a class="code hl_function" href="classJsonOut.html#a4550e2036b904c4d4a90e440dd41c684">start_array</a>();</div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> pair : <a class="code hl_variable" href="classknown__magic.html#af94169b33d6d2cd59d75efac9f92c570">spellbook</a> ) {</div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>        json.<a class="code hl_function" href="classJsonOut.html#a4756f9a569adbfc60de127f7c335d82f">start_object</a>();</div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>        json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;id&quot;</span>, pair.second.id() );</div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>        json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;xp&quot;</span>, pair.second.xp() );</div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span>        json.<a class="code hl_function" href="classJsonOut.html#aa38d37840ed6ba168b78a43570e98681">end_object</a>();</div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>    }</div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span>    json.<a class="code hl_function" href="classJsonOut.html#a44cdd853d4c6913b37caa9f0131eeff2">end_array</a>();</div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;invlets&quot;</span>, <a class="code hl_variable" href="classknown__magic.html#abdb326bf0885177b20fd45f26a6d68ad">invlets</a> );</div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span> </div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>    json.<a class="code hl_function" href="classJsonOut.html#aa38d37840ed6ba168b78a43570e98681">end_object</a>();</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>}</div>
<div class="ttc" id="aclassJsonOut_html_a44cdd853d4c6913b37caa9f0131eeff2"><div class="ttname"><a href="classJsonOut.html#a44cdd853d4c6913b37caa9f0131eeff2">JsonOut::end_array</a></div><div class="ttdeci">void end_array()</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l01961">json.cpp:1961</a></div></div>
<div class="ttc" id="aclassJsonOut_html_a4550e2036b904c4d4a90e440dd41c684"><div class="ttname"><a href="classJsonOut.html#a4550e2036b904c4d4a90e440dd41c684">JsonOut::start_array</a></div><div class="ttdeci">void start_array(bool wrap=false)</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l01950">json.cpp:1950</a></div></div>
<div class="ttc" id="aclassJsonOut_html_a4756f9a569adbfc60de127f7c335d82f"><div class="ttname"><a href="classJsonOut.html#a4756f9a569adbfc60de127f7c335d82f">JsonOut::start_object</a></div><div class="ttdeci">void start_object(bool wrap=false)</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l01931">json.cpp:1931</a></div></div>
<div class="ttc" id="aclassJsonOut_html_aa38d37840ed6ba168b78a43570e98681"><div class="ttname"><a href="classJsonOut.html#aa38d37840ed6ba168b78a43570e98681">JsonOut::end_object</a></div><div class="ttdeci">void end_object()</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l01942">json.cpp:1942</a></div></div>
<div class="ttc" id="aclassJsonOut_html_adb3c899f0ad7fc4f25cd3357c51a2c42"><div class="ttname"><a href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">JsonOut::member</a></div><div class="ttdeci">void member(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02046">json.cpp:2046</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="json_8cpp_source.html#l01961">JsonOut::end_array()</a>, <a class="el" href="json_8cpp_source.html#l01942">JsonOut::end_object()</a>, <a class="el" href="magic_8h_source.html#l00452">invlets</a>, <a class="el" href="magic_8h_source.html#l00456">mana</a>, <a class="el" href="json_8cpp_source.html#l02046">JsonOut::member()</a>, <a class="el" href="magic_8h_source.html#l00450">spellbook</a>, <a class="el" href="json_8cpp_source.html#l01950">JsonOut::start_array()</a>, and <a class="el" href="json_8cpp_source.html#l01931">JsonOut::start_object()</a>.</p>

</div>
</div>
<a id="ad1adf916c9f70a561c9475f40c94259f" name="ad1adf916c9f70a561c9475f40c94259f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1adf916c9f70a561c9475f40c94259f">&#9670;&nbsp;</a></span>set_invlet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool known_magic::set_invlet </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a> &amp;&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>invlet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::set&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>used_invlets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01774">1774</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01775" name="l01775"></a><span class="lineno"> 1775</span>{</div>
<div class="line"><a id="l01776" name="l01776"></a><span class="lineno"> 1776</span>    <span class="keywordflow">if</span>( used_invlets.count( invlet ) &gt; 0 ) {</div>
<div class="line"><a id="l01777" name="l01777"></a><span class="lineno"> 1777</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01778" name="l01778"></a><span class="lineno"> 1778</span>    }</div>
<div class="line"><a id="l01779" name="l01779"></a><span class="lineno"> 1779</span>    <a class="code hl_variable" href="classknown__magic.html#abdb326bf0885177b20fd45f26a6d68ad">invlets</a>[sp] = invlet;</div>
<div class="line"><a id="l01780" name="l01780"></a><span class="lineno"> 1780</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01781" name="l01781"></a><span class="lineno"> 1781</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00452">invlets</a>.</p>

</div>
</div>
<a id="aeed71b588441f7580d8f3bf9d27a7eb9" name="aeed71b588441f7580d8f3bf9d27a7eb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeed71b588441f7580d8f3bf9d27a7eb9">&#9670;&nbsp;</a></span>set_mana()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void known_magic::set_mana </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>new_mana</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01421">1421</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01422" name="l01422"></a><span class="lineno"> 1422</span>{</div>
<div class="line"><a id="l01423" name="l01423"></a><span class="lineno"> 1423</span>    <a class="code hl_variable" href="classknown__magic.html#a7545cd34ae575060a438e9a6486762e6">mana</a> = new_mana;</div>
<div class="line"><a id="l01424" name="l01424"></a><span class="lineno"> 1424</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00456">mana</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01426">mod_mana()</a>.</p>

</div>
</div>
<a id="ab05f99ea584c7bec9ab34369e14369f0" name="ab05f99ea584c7bec9ab34369e14369f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab05f99ea584c7bec9ab34369e14369f0">&#9670;&nbsp;</a></span>spells()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a> &gt; known_magic::spells </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01462">1462</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01463" name="l01463"></a><span class="lineno"> 1463</span>{</div>
<div class="line"><a id="l01464" name="l01464"></a><span class="lineno"> 1464</span>    std::vector&lt;spell_id&gt; spell_ids;</div>
<div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> pair : <a class="code hl_variable" href="classknown__magic.html#af94169b33d6d2cd59d75efac9f92c570">spellbook</a> ) {</div>
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"> 1466</span>        spell_ids.emplace_back( pair.first );</div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span>    }</div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span>    <span class="keywordflow">return</span> spell_ids;</div>
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"> 1469</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00450">spellbook</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01407">get_spells()</a>.</p>

</div>
</div>
<a id="a3ec46640014cc1ea785a7db001203b37" name="a3ec46640014cc1ea785a7db001203b37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ec46640014cc1ea785a7db001203b37">&#9670;&nbsp;</a></span>time_to_learn_spell() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int known_magic::time_to_learn_spell </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a> &amp;&#160;</td>
          <td class="paramname"><em>sp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01503">1503</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01504" name="l01504"></a><span class="lineno"> 1504</span>{</div>
<div class="line"><a id="l01505" name="l01505"></a><span class="lineno"> 1505</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> base_time = to_moves&lt;int&gt;( 30_minutes );</div>
<div class="line"><a id="l01506" name="l01506"></a><span class="lineno"> 1506</span>    <span class="keywordflow">return</span> base_time * ( 1.0 + sp-&gt;<a class="code hl_variable" href="classspell__type.html#ae66fc792f5f14edd826130493830c768">difficulty</a> / ( 1.0 + ( guy.<a class="code hl_function" href="classCharacter.html#a588d5cc1d729490552fe03b006685ae5">get_int</a>() - 8.0 ) / 8.0 ) +</div>
<div class="line"><a id="l01507" name="l01507"></a><span class="lineno"> 1507</span>                         ( guy.<a class="code hl_function" href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">get_skill_level</a>( sp-&gt;<a class="code hl_variable" href="classspell__type.html#abd2cfd23c656755b0f887064683d9e13">skill</a> ) / 10.0 ) );</div>
<div class="line"><a id="l01508" name="l01508"></a><span class="lineno"> 1508</span>}</div>
<div class="ttc" id="aclassCharacter_html_afa95fe499ca6b55ab97f1b442a4c95c5"><div class="ttname"><a href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">Character::get_skill_level</a></div><div class="ttdeci">int get_skill_level(const skill_id &amp;ident) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03327">character.cpp:3327</a></div></div>
<div class="ttc" id="aclassspell__type_html_abd2cfd23c656755b0f887064683d9e13"><div class="ttname"><a href="classspell__type.html#abd2cfd23c656755b0f887064683d9e13">spell_type::skill</a></div><div class="ttdeci">skill_id skill</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00150">magic.h:150</a></div></div>
<div class="ttc" id="aclassspell__type_html_ae66fc792f5f14edd826130493830c768"><div class="ttname"><a href="classspell__type.html#ae66fc792f5f14edd826130493830c768">spell_type::difficulty</a></div><div class="ttdeci">int difficulty</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00239">magic.h:239</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h_source.html#l00239">spell_type::difficulty</a>, <a class="el" href="character_8cpp_source.html#l04060">Character::get_int()</a>, <a class="el" href="character_8cpp_source.html#l03327">Character::get_skill_level()</a>, and <a class="el" href="magic_8h_source.html#l00150">spell_type::skill</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01498">time_to_learn_spell()</a>.</p>

</div>
</div>
<a id="ad425ea60cd0b564225bddfd3afd7e40c" name="ad425ea60cd0b564225bddfd3afd7e40c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad425ea60cd0b564225bddfd3afd7e40c">&#9670;&nbsp;</a></span>time_to_learn_spell() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int known_magic::time_to_learn_spell </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>str</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01498">1498</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01499" name="l01499"></a><span class="lineno"> 1499</span>{</div>
<div class="line"><a id="l01500" name="l01500"></a><span class="lineno"> 1500</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classknown__magic.html#a3ec46640014cc1ea785a7db001203b37">time_to_learn_spell</a>( guy, <a class="code hl_enumvalue" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a26fc65fa85c36140553bad2b5359989f">spell_id</a>( str ) );</div>
<div class="line"><a id="l01501" name="l01501"></a><span class="lineno"> 1501</span>}</div>
<div class="ttc" id="aclassknown__magic_html_a3ec46640014cc1ea785a7db001203b37"><div class="ttname"><a href="classknown__magic.html#a3ec46640014cc1ea785a7db001203b37">known_magic::time_to_learn_spell</a></div><div class="ttdeci">int time_to_learn_spell(const Character &amp;guy, const spell_id &amp;sp) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01503">magic.cpp:1503</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a26fc65fa85c36140553bad2b5359989f">spell_id</a>, and <a class="el" href="magic_8cpp_source.html#l01503">time_to_learn_spell()</a>.</p>

</div>
</div>
<a id="a4d186e83099014168116c53b0dd805f1" name="a4d186e83099014168116c53b0dd805f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d186e83099014168116c53b0dd805f1">&#9670;&nbsp;</a></span>update_mana()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void known_magic::update_mana </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>guy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>turns</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8cpp_source.html#l01457">1457</a> of file <a class="el" href="magic_8cpp_source.html">magic.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01458" name="l01458"></a><span class="lineno"> 1458</span>{</div>
<div class="line"><a id="l01459" name="l01459"></a><span class="lineno"> 1459</span>    <a class="code hl_function" href="classknown__magic.html#ae44e12a998ae53c5d487828d83165168">mod_mana</a>( guy, <a class="code hl_function" href="classknown__magic.html#aa24ea6f5285f81f10610fd6d1fa7012e">mana_regen_rate</a>( guy ) * turns );</div>
<div class="line"><a id="l01460" name="l01460"></a><span class="lineno"> 1460</span>}</div>
<div class="ttc" id="aclassknown__magic_html_aa24ea6f5285f81f10610fd6d1fa7012e"><div class="ttname"><a href="classknown__magic.html#aa24ea6f5285f81f10610fd6d1fa7012e">known_magic::mana_regen_rate</a></div><div class="ttdeci">double mana_regen_rate(const Character &amp;guy) const</div><div class="ttdoc">Mana regeneration rate (units per turn).</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01444">magic.cpp:1444</a></div></div>
<div class="ttc" id="aclassknown__magic_html_ae44e12a998ae53c5d487828d83165168"><div class="ttname"><a href="classknown__magic.html#ae44e12a998ae53c5d487828d83165168">known_magic::mod_mana</a></div><div class="ttdeci">void mod_mana(const Character &amp;guy, int add_mana)</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01426">magic.cpp:1426</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01444">mana_regen_rate()</a>, and <a class="el" href="magic_8cpp_source.html#l01426">mod_mana()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a8feaad1d7a7ecbb054556ef48e4599c6" name="a8feaad1d7a7ecbb054556ef48e4599c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8feaad1d7a7ecbb054556ef48e4599c6">&#9670;&nbsp;</a></span>casting_ignore</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool known_magic::casting_ignore = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8h_source.html#l00459">459</a> of file <a class="el" href="magic_8h_source.html">magic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01818">select_spell()</a>.</p>

</div>
</div>
<a id="abdb326bf0885177b20fd45f26a6d68ad" name="abdb326bf0885177b20fd45f26a6d68ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdb326bf0885177b20fd45f26a6d68ad">&#9670;&nbsp;</a></span>invlets</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a>, int&gt; known_magic::invlets</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8h_source.html#l00452">452</a> of file <a class="el" href="magic_8h_source.html">magic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01275">deserialize()</a>, <a class="el" href="magic_8cpp_source.html#l01788">get_invlet()</a>, <a class="el" href="magic_8cpp_source.html#l01783">rem_invlet()</a>, <a class="el" href="magic_8cpp_source.html#l01255">serialize()</a>, and <a class="el" href="magic_8cpp_source.html#l01774">set_invlet()</a>.</p>

</div>
</div>
<a id="a7545cd34ae575060a438e9a6486762e6" name="a7545cd34ae575060a438e9a6486762e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7545cd34ae575060a438e9a6486762e6">&#9670;&nbsp;</a></span>mana</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int known_magic::mana = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8h_source.html#l00456">456</a> of file <a class="el" href="magic_8h_source.html">magic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01416">available_mana()</a>, <a class="el" href="magic_8cpp_source.html#l01275">deserialize()</a>, <a class="el" href="magic_8cpp_source.html#l01249">known_magic()</a>, <a class="el" href="magic_8cpp_source.html#l01426">mod_mana()</a>, <a class="el" href="magic_8cpp_source.html#l01255">serialize()</a>, and <a class="el" href="magic_8cpp_source.html#l01421">set_mana()</a>.</p>

</div>
</div>
<a id="a2e2bc1600c4888fb87cc14508f0111c3" name="a2e2bc1600c4888fb87cc14508f0111c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e2bc1600c4888fb87cc14508f0111c3">&#9670;&nbsp;</a></span>mana_base</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int known_magic::mana_base = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8h_source.html#l00454">454</a> of file <a class="el" href="magic_8h_source.html">magic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01249">known_magic()</a>, and <a class="el" href="magic_8cpp_source.html#l01431">max_mana()</a>.</p>

</div>
</div>
<a id="af94169b33d6d2cd59d75efac9f92c570" name="af94169b33d6d2cd59d75efac9f92c570"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af94169b33d6d2cd59d75efac9f92c570">&#9670;&nbsp;</a></span>spellbook</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="type__id_8h.html#a50c51ecb994fe99b3be7adf3873d9b34">spell_id</a>, <a class="el" href="classspell.html">spell</a>&gt; known_magic::spellbook</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="magic_8h_source.html#l00450">450</a> of file <a class="el" href="magic_8h_source.html">magic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="magic_8cpp_source.html#l01275">deserialize()</a>, <a class="el" href="magic_8cpp_source.html#l01378">forget_spell()</a>, <a class="el" href="magic_8cpp_source.html#l01397">get_spell()</a>, <a class="el" href="magic_8cpp_source.html#l01407">get_spells()</a>, <a class="el" href="magic_8cpp_source.html#l01300">knows_spell()</a>, <a class="el" href="magic_8cpp_source.html#l01320">learn_spell()</a>, <a class="el" href="magic_8cpp_source.html#l01255">serialize()</a>, and <a class="el" href="magic_8cpp_source.html#l01462">spells()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="magic_8h_source.html">magic.h</a></li>
<li>src/<a class="el" href="magic_8cpp_source.html">magic.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classknown__magic.html">known_magic</a></li>
    <li class="footer">Generated on Sat Nov 12 2022 15:15:53 for Cataclysm BN by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
