<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm BN: src/calendar.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm BN
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('calendar_8cpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">calendar.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="calendar_8h_source.html">calendar.h</a>&quot;</code><br />
<code>#include &lt;algorithm&gt;</code><br />
<code>#include &lt;array&gt;</code><br />
<code>#include &lt;cassert&gt;</code><br />
<code>#include &lt;cmath&gt;</code><br />
<code>#include &lt;cstddef&gt;</code><br />
<code>#include &lt;limits&gt;</code><br />
<code>#include &quot;<a class="el" href="debug_8h_source.html">debug.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="options_8h_source.html">options.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="rng_8h_source.html">rng.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="string__formatter_8h_source.html">string_formatter.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="translations_8h_source.html">translations.h</a>&quot;</code><br />
</div>
<p><a href="calendar_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aaf7cb0e1d64b92af65e14538a7e97674"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#aaf7cb0e1d64b92af65e14538a7e97674">default_daylight_level</a> ()</td></tr>
<tr class="memdesc:aaf7cb0e1d64b92af65e14538a7e97674"><td class="mdescLeft">&#160;</td><td class="mdescRight">How much light is provided in full daylight.  <a href="calendar_8cpp.html#aaf7cb0e1d64b92af65e14538a7e97674">More...</a><br /></td></tr>
<tr class="separator:aaf7cb0e1d64b92af65e14538a7e97674"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae15341d001c737a325a8d3805ffa898d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="calendar_8h.html#a108488c56b99a99f407bda5389fd85ce">moon_phase</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#ae15341d001c737a325a8d3805ffa898d">get_moon_phase</a> (const <a class="el" href="classtime__point.html">time_point</a> &amp;p)</td></tr>
<tr class="memdesc:ae15341d001c737a325a8d3805ffa898d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current light level of the moon.  <a href="calendar_8cpp.html#ae15341d001c737a325a8d3805ffa898d">More...</a><br /></td></tr>
<tr class="separator:ae15341d001c737a325a8d3805ffa898d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b66a9bcaa19d642c0b89e9e07a5bcf8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtime__point.html">time_point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#a3b66a9bcaa19d642c0b89e9e07a5bcf8">sunrise</a> (const <a class="el" href="classtime__point.html">time_point</a> &amp;p)</td></tr>
<tr class="memdesc:a3b66a9bcaa19d642c0b89e9e07a5bcf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current sunrise time based on the time of year.  <a href="calendar_8cpp.html#a3b66a9bcaa19d642c0b89e9e07a5bcf8">More...</a><br /></td></tr>
<tr class="separator:a3b66a9bcaa19d642c0b89e9e07a5bcf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4930c6084e3379ceb56259d33dee133e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtime__point.html">time_point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#a4930c6084e3379ceb56259d33dee133e">sunset</a> (const <a class="el" href="classtime__point.html">time_point</a> &amp;p)</td></tr>
<tr class="memdesc:a4930c6084e3379ceb56259d33dee133e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current sunset time based on the time of year.  <a href="calendar_8cpp.html#a4930c6084e3379ceb56259d33dee133e">More...</a><br /></td></tr>
<tr class="separator:a4930c6084e3379ceb56259d33dee133e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a6003467bed851ed16dff1c59f44d22"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtime__point.html">time_point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#a1a6003467bed851ed16dff1c59f44d22">night_time</a> (const <a class="el" href="classtime__point.html">time_point</a> &amp;p)</td></tr>
<tr class="memdesc:a1a6003467bed851ed16dff1c59f44d22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the time it gets dark based on sunset.  <a href="calendar_8cpp.html#a1a6003467bed851ed16dff1c59f44d22">More...</a><br /></td></tr>
<tr class="separator:a1a6003467bed851ed16dff1c59f44d22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04e147268481a0e152b633ff1321907c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtime__point.html">time_point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#a04e147268481a0e152b633ff1321907c">daylight_time</a> (const <a class="el" href="classtime__point.html">time_point</a> &amp;p)</td></tr>
<tr class="memdesc:a04e147268481a0e152b633ff1321907c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the time it gets light based on sunrise.  <a href="calendar_8cpp.html#a04e147268481a0e152b633ff1321907c">More...</a><br /></td></tr>
<tr class="separator:a04e147268481a0e152b633ff1321907c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07a1c09320c43c4d206905e06c2c42a8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#a07a1c09320c43c4d206905e06c2c42a8">is_night</a> (const <a class="el" href="classtime__point.html">time_point</a> &amp;p)</td></tr>
<tr class="memdesc:a07a1c09320c43c4d206905e06c2c42a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if it's currently night time - after dusk and before dawn.  <a href="calendar_8cpp.html#a07a1c09320c43c4d206905e06c2c42a8">More...</a><br /></td></tr>
<tr class="separator:a07a1c09320c43c4d206905e06c2c42a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f243cd9207ab39fad97d6b638b76757"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#a1f243cd9207ab39fad97d6b638b76757">is_day</a> (const <a class="el" href="classtime__point.html">time_point</a> &amp;p)</td></tr>
<tr class="memdesc:a1f243cd9207ab39fad97d6b638b76757"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if it's currently day time - after dawn and before dusk.  <a href="calendar_8cpp.html#a1f243cd9207ab39fad97d6b638b76757">More...</a><br /></td></tr>
<tr class="separator:a1f243cd9207ab39fad97d6b638b76757"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac200b295554f05d816686a1488c685db"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#ac200b295554f05d816686a1488c685db">is_dusk</a> (const <a class="el" href="classtime__point.html">time_point</a> &amp;p)</td></tr>
<tr class="memdesc:ac200b295554f05d816686a1488c685db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if it's currently dusk - between sunset and and twilight_duration after sunset.  <a href="calendar_8cpp.html#ac200b295554f05d816686a1488c685db">More...</a><br /></td></tr>
<tr class="separator:ac200b295554f05d816686a1488c685db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d0328da4c2fb146307396324bb85fa1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#a1d0328da4c2fb146307396324bb85fa1">is_dawn</a> (const <a class="el" href="classtime__point.html">time_point</a> &amp;p)</td></tr>
<tr class="memdesc:a1d0328da4c2fb146307396324bb85fa1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if it's currently dawn - between sunrise and twilight_duration after sunrise.  <a href="calendar_8cpp.html#a1d0328da4c2fb146307396324bb85fa1">More...</a><br /></td></tr>
<tr class="separator:a1d0328da4c2fb146307396324bb85fa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf86f573555410b0d59670df114d73a2"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#aaf86f573555410b0d59670df114d73a2">current_daylight_level</a> (const <a class="el" href="classtime__point.html">time_point</a> &amp;p)</td></tr>
<tr class="memdesc:aaf86f573555410b0d59670df114d73a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current seasonally-adjusted maximum daylight level.  <a href="calendar_8cpp.html#aaf86f573555410b0d59670df114d73a2">More...</a><br /></td></tr>
<tr class="separator:aaf86f573555410b0d59670df114d73a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaffe4a17e181d5522e294ab936f3f368"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#aaffe4a17e181d5522e294ab936f3f368">sunlight</a> (const <a class="el" href="classtime__point.html">time_point</a> &amp;p, const bool vision)</td></tr>
<tr class="memdesc:aaffe4a17e181d5522e294ab936f3f368"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current sunlight or moonlight level through the preceding functions.  <a href="calendar_8cpp.html#aaffe4a17e181d5522e294ab936f3f368">More...</a><br /></td></tr>
<tr class="separator:aaffe4a17e181d5522e294ab936f3f368"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a595c4d560d7152dceb681820e7e00882"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#a595c4d560d7152dceb681820e7e00882">to_string_clipped</a> (const int num, const <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00">clipped_unit</a> <a class="el" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a>, const <a class="el" href="calendar_8h.html#a2966e2ed60e1b292fb9f87bc519ece79">clipped_align</a> align)</td></tr>
<tr class="separator:a595c4d560d7152dceb681820e7e00882"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a9ae8a761db573b638118f7cf3b5993"><td class="memItemLeft" align="right" valign="top">std::pair&lt; int, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00">clipped_unit</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#a9a9ae8a761db573b638118f7cf3b5993">clipped_time</a> (const <a class="el" href="classtime__duration.html">time_duration</a> &amp;d)</td></tr>
<tr class="memdesc:a9a9ae8a761db573b638118f7cf3b5993"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a value representing the passed in duration truncated to an appropriate unit along with the unit in question.  <a href="calendar_8cpp.html#a9a9ae8a761db573b638118f7cf3b5993">More...</a><br /></td></tr>
<tr class="separator:a9a9ae8a761db573b638118f7cf3b5993"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dbbb36f2116679538e2d2898a0380de"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#a6dbbb36f2116679538e2d2898a0380de">to_string_clipped</a> (const <a class="el" href="classtime__duration.html">time_duration</a> &amp;d, const <a class="el" href="calendar_8h.html#a2966e2ed60e1b292fb9f87bc519ece79">clipped_align</a> align)</td></tr>
<tr class="memdesc:a6dbbb36f2116679538e2d2898a0380de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a string showing a duration as whole number of appropriate units, e.g.  <a href="calendar_8cpp.html#a6dbbb36f2116679538e2d2898a0380de">More...</a><br /></td></tr>
<tr class="separator:a6dbbb36f2116679538e2d2898a0380de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb989652ea2bf7fd03b07a74fd30bd7a"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#aeb989652ea2bf7fd03b07a74fd30bd7a">to_string</a> (const <a class="el" href="classtime__duration.html">time_duration</a> &amp;d)</td></tr>
<tr class="memdesc:aeb989652ea2bf7fd03b07a74fd30bd7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a string showing a duration.  <a href="calendar_8cpp.html#aeb989652ea2bf7fd03b07a74fd30bd7a">More...</a><br /></td></tr>
<tr class="separator:aeb989652ea2bf7fd03b07a74fd30bd7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cbd6a4aa555daec83ee03cc90dd7715"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#a3cbd6a4aa555daec83ee03cc90dd7715">to_string_approx</a> (const <a class="el" href="classtime__duration.html">time_duration</a> &amp;dur, const bool verbose)</td></tr>
<tr class="memdesc:a3cbd6a4aa555daec83ee03cc90dd7715"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns approximate duration.  <a href="calendar_8cpp.html#a3cbd6a4aa555daec83ee03cc90dd7715">More...</a><br /></td></tr>
<tr class="separator:a3cbd6a4aa555daec83ee03cc90dd7715"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a307340221160e8ffe2af4ddfe5e2a56e"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#a307340221160e8ffe2af4ddfe5e2a56e">to_string_time_of_day</a> (const <a class="el" href="classtime__point.html">time_point</a> &amp;p)</td></tr>
<tr class="separator:a307340221160e8ffe2af4ddfe5e2a56e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4913a41335973f0a82358272fe601eb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="calendar_8h.html#aca1a965ea25b5c617810af73ed5345c1">weekdays</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#ac4913a41335973f0a82358272fe601eb">day_of_week</a> (const <a class="el" href="classtime__point.html">time_point</a> &amp;p)</td></tr>
<tr class="separator:ac4913a41335973f0a82358272fe601eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4249b6f1d0842211bfe53e5f9e206a10"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtime__duration.html">time_duration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a> (<a class="el" href="classtime__duration.html">time_duration</a> lo, <a class="el" href="classtime__duration.html">time_duration</a> hi)</td></tr>
<tr class="separator:a4249b6f1d0842211bfe53e5f9e206a10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a359120c15f92d54a49fec9de7bcb571f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a> (const <a class="el" href="classtime__duration.html">time_duration</a> &amp;<a class="el" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a>, const <a class="el" href="classtime__duration.html">time_duration</a> &amp;<a class="el" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>)</td></tr>
<tr class="separator:a359120c15f92d54a49fec9de7bcb571f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81656706da6c7486137ad8578c0f523e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="calendar_8h.html#a5ac915753729cd68b608506d3c63ad1b">season_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#a81656706da6c7486137ad8578c0f523e">season_of_year</a> (const <a class="el" href="classtime__point.html">time_point</a> &amp;p)</td></tr>
<tr class="separator:a81656706da6c7486137ad8578c0f523e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2ab0c8a0e548cc45b1a3c21042b8bbc"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#ae2ab0c8a0e548cc45b1a3c21042b8bbc">to_string</a> (const <a class="el" href="classtime__point.html">time_point</a> &amp;p)</td></tr>
<tr class="separator:ae2ab0c8a0e548cc45b1a3c21042b8bbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aec47826445a332667774d86f72ce8f7b"><td class="memItemLeft" align="right" valign="top">static constexpr double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#aec47826445a332667774d86f72ce8f7b">moonlight_per_quarter</a> = 2.25</td></tr>
<tr class="memdesc:aec47826445a332667774d86f72ce8f7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">How much light moon provides per lit-up quarter (Full-moon light is four times this value)  <a href="calendar_8cpp.html#aec47826445a332667774d86f72ce8f7b">More...</a><br /></td></tr>
<tr class="separator:aec47826445a332667774d86f72ce8f7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae89780c7957fdf646b9e3c7f8d8c6cfe"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#ae89780c7957fdf646b9e3c7f8d8c6cfe">cur_season_length</a> = 1</td></tr>
<tr class="separator:ae89780c7957fdf646b9e3c7f8d8c6cfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71f093b6c6124bff85dbbcaae3543979"><td class="memItemLeft" align="right" valign="top">static constexpr int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#a71f093b6c6124bff85dbbcaae3543979">sunrise_winter</a> = 7</td></tr>
<tr class="memdesc:a71f093b6c6124bff85dbbcaae3543979"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hour of sunrise at winter solstice.  <a href="calendar_8cpp.html#a71f093b6c6124bff85dbbcaae3543979">More...</a><br /></td></tr>
<tr class="separator:a71f093b6c6124bff85dbbcaae3543979"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7b47331e571f7450c39016a1850ac34"><td class="memItemLeft" align="right" valign="top">static constexpr int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#aa7b47331e571f7450c39016a1850ac34">sunrise_summer</a> = 5</td></tr>
<tr class="memdesc:aa7b47331e571f7450c39016a1850ac34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hour of sunrise at summer solstice.  <a href="calendar_8cpp.html#aa7b47331e571f7450c39016a1850ac34">More...</a><br /></td></tr>
<tr class="separator:aa7b47331e571f7450c39016a1850ac34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ca55217f1b65aebfbcd03c3d5db28b2"><td class="memItemLeft" align="right" valign="top">static constexpr int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#a5ca55217f1b65aebfbcd03c3d5db28b2">sunrise_equinox</a> = ( <a class="el" href="calendar_8cpp.html#aa7b47331e571f7450c39016a1850ac34">sunrise_summer</a> + <a class="el" href="calendar_8cpp.html#a71f093b6c6124bff85dbbcaae3543979">sunrise_winter</a> ) / 2</td></tr>
<tr class="memdesc:a5ca55217f1b65aebfbcd03c3d5db28b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hour of sunrise at fall and spring equinox.  <a href="calendar_8cpp.html#a5ca55217f1b65aebfbcd03c3d5db28b2">More...</a><br /></td></tr>
<tr class="separator:a5ca55217f1b65aebfbcd03c3d5db28b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9fd6a52586f6912d69e4bb0b1232485"><td class="memItemLeft" align="right" valign="top">static constexpr int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#ab9fd6a52586f6912d69e4bb0b1232485">sunset_winter</a> = 17</td></tr>
<tr class="memdesc:ab9fd6a52586f6912d69e4bb0b1232485"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hour of sunset at winter solstice.  <a href="calendar_8cpp.html#ab9fd6a52586f6912d69e4bb0b1232485">More...</a><br /></td></tr>
<tr class="separator:ab9fd6a52586f6912d69e4bb0b1232485"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae289f054ed82e4caeecc7ca04f7f48bf"><td class="memItemLeft" align="right" valign="top">static constexpr int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#ae289f054ed82e4caeecc7ca04f7f48bf">sunset_summer</a> = 21</td></tr>
<tr class="memdesc:ae289f054ed82e4caeecc7ca04f7f48bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hour of sunset at summer solstice.  <a href="calendar_8cpp.html#ae289f054ed82e4caeecc7ca04f7f48bf">More...</a><br /></td></tr>
<tr class="separator:ae289f054ed82e4caeecc7ca04f7f48bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b6297f1329bba12bcf4ad019e548699"><td class="memItemLeft" align="right" valign="top">static constexpr int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#a3b6297f1329bba12bcf4ad019e548699">sunset_equinox</a> = ( <a class="el" href="calendar_8cpp.html#ae289f054ed82e4caeecc7ca04f7f48bf">sunset_summer</a> + <a class="el" href="calendar_8cpp.html#ab9fd6a52586f6912d69e4bb0b1232485">sunset_winter</a> ) / 2</td></tr>
<tr class="memdesc:a3b6297f1329bba12bcf4ad019e548699"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hour of sunset at fall and spring equinox.  <a href="calendar_8cpp.html#a3b6297f1329bba12bcf4ad019e548699">More...</a><br /></td></tr>
<tr class="separator:a3b6297f1329bba12bcf4ad019e548699"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53dee894346dba396b94c4cfe558322c"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="classtime__duration.html">time_duration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#a53dee894346dba396b94c4cfe558322c">twilight_duration</a> = 1_hours</td></tr>
<tr class="separator:a53dee894346dba396b94c4cfe558322c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41c70b303ede8b309874e15a1a547ee5"><td class="memItemLeft" align="right" valign="top">static constexpr int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calendar_8cpp.html#a41c70b303ede8b309874e15a1a547ee5">default_season_length</a> = 14</td></tr>
<tr class="separator:a41c70b303ede8b309874e15a1a547ee5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9a9ae8a761db573b638118f7cf3b5993" name="a9a9ae8a761db573b638118f7cf3b5993"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a9ae8a761db573b638118f7cf3b5993">&#9670;&nbsp;</a></span>clipped_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; int, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00">clipped_unit</a> &gt; clipped_time </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__duration.html">time_duration</a> &amp;&#160;</td>
          <td class="paramname"><em>d</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a value representing the passed in duration truncated to an appropriate unit along with the unit in question. </p>
<p >"10 days" or "1 minute". The chosen unit will be the smallest unit, that is at least as much as the given duration. E.g. an input of 60 minutes will return "1 hour", an input of 59 minutes will return "59 minutes". </p>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00284">284</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>{</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>    <span class="keywordflow">if</span>( d &gt;= <a class="code hl_variable" href="namespacecalendar.html#a8805341f2154c0e7a8b656e77e1a4143">calendar::INDEFINITELY_LONG_DURATION</a> ) {</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>        <span class="keywordflow">return</span> { 0, <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00ad7af994f1f1ef8b5e3beb9f7fb139f57">clipped_unit::forever</a> };</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>    }</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span> </div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    <span class="keywordflow">if</span>( d &lt; 1_minutes ) {</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> sec = to_seconds&lt;int&gt;( d );</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>        <span class="keywordflow">return</span> { sec, <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00aa9f0e61a137d86aa9db53465e0801612">clipped_unit::second</a> };</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( d &lt; 1_hours ) {</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> min = to_minutes&lt;int&gt;( d );</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>        <span class="keywordflow">return</span> { min, <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a0a7d55be9d12a369a6a8da0fb517fba4">clipped_unit::minute</a> };</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( d &lt; 1_days ) {</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a896c55cc5e46fab38ce9f51ebf7bfcd3">hour</a> = to_hours&lt;int&gt;( d );</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>        <span class="keywordflow">return</span> { <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a896c55cc5e46fab38ce9f51ebf7bfcd3">hour</a>, <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a896c55cc5e46fab38ce9f51ebf7bfcd3">clipped_unit::hour</a> };</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( d &lt; 7_days ) {</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a628b7db04235f228d40adc671413a8c8">day</a> = to_days&lt;int&gt;( d );</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>        <span class="keywordflow">return</span> { <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a628b7db04235f228d40adc671413a8c8">day</a>, <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a628b7db04235f228d40adc671413a8c8">clipped_unit::day</a> };</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( d &lt; <a class="code hl_function" href="namespacecalendar.html#aa61c940cc539463295afa98e7bf7d22b">calendar::season_length</a>() || <a class="code hl_function" href="namespacecalendar.html#a18e011596e47842fc4d1ab7f84cbb7a1">calendar::eternal_season</a>() ) {</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>        <span class="comment">// eternal seasons means one season is indistinguishable from the next,</span></div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>        <span class="comment">// therefore no way to count them</span></div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a172a8327fcd3685ab3c0f740d031da09">week</a> = to_weeks&lt;int&gt;( d );</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>        <span class="keywordflow">return</span> { <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a172a8327fcd3685ab3c0f740d031da09">week</a>, <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a172a8327fcd3685ab3c0f740d031da09">clipped_unit::week</a> };</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( d &lt; <a class="code hl_function" href="namespacecalendar.html#a151f3184ac6460605cc4931707b08d8f">calendar::year_length</a>() &amp;&amp; !<a class="code hl_function" href="namespacecalendar.html#a18e011596e47842fc4d1ab7f84cbb7a1">calendar::eternal_season</a>() ) {</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>        <span class="comment">// TODO: consider a to_season function, but season length is variable, so</span></div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>        <span class="comment">// this might be misleading</span></div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a3f1b0333a44fd5f611d3429887eba4a8">season</a> = to_turns&lt;int&gt;( d ) / to_turns&lt;int&gt;( <a class="code hl_function" href="namespacecalendar.html#aa61c940cc539463295afa98e7bf7d22b">calendar::season_length</a>() );</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>        <span class="keywordflow">return</span> { <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a3f1b0333a44fd5f611d3429887eba4a8">season</a>, <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a3f1b0333a44fd5f611d3429887eba4a8">clipped_unit::season</a> };</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>        <span class="comment">// TODO: consider a to_year function, but year length is variable, so</span></div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>        <span class="comment">// this might be misleading</span></div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a84cdc76cabf41bd7c961f6ab12f117d8">year</a> = to_turns&lt;int&gt;( d ) / to_turns&lt;int&gt;( <a class="code hl_function" href="namespacecalendar.html#a151f3184ac6460605cc4931707b08d8f">calendar::year_length</a>() );</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>        <span class="keywordflow">return</span> { <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a84cdc76cabf41bd7c961f6ab12f117d8">year</a>, <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a84cdc76cabf41bd7c961f6ab12f117d8">clipped_unit::year</a> };</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>    }</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>}</div>
<div class="ttc" id="acalendar_8h_html_a5db9490f8316b22d7c367c5a563a2f00a0a7d55be9d12a369a6a8da0fb517fba4"><div class="ttname"><a href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a0a7d55be9d12a369a6a8da0fb517fba4">clipped_unit::minute</a></div><div class="ttdeci">@ minute</div></div>
<div class="ttc" id="acalendar_8h_html_a5db9490f8316b22d7c367c5a563a2f00a172a8327fcd3685ab3c0f740d031da09"><div class="ttname"><a href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a172a8327fcd3685ab3c0f740d031da09">clipped_unit::week</a></div><div class="ttdeci">@ week</div></div>
<div class="ttc" id="acalendar_8h_html_a5db9490f8316b22d7c367c5a563a2f00a3f1b0333a44fd5f611d3429887eba4a8"><div class="ttname"><a href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a3f1b0333a44fd5f611d3429887eba4a8">clipped_unit::season</a></div><div class="ttdeci">@ season</div></div>
<div class="ttc" id="acalendar_8h_html_a5db9490f8316b22d7c367c5a563a2f00a628b7db04235f228d40adc671413a8c8"><div class="ttname"><a href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a628b7db04235f228d40adc671413a8c8">clipped_unit::day</a></div><div class="ttdeci">@ day</div></div>
<div class="ttc" id="acalendar_8h_html_a5db9490f8316b22d7c367c5a563a2f00a84cdc76cabf41bd7c961f6ab12f117d8"><div class="ttname"><a href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a84cdc76cabf41bd7c961f6ab12f117d8">clipped_unit::year</a></div><div class="ttdeci">@ year</div></div>
<div class="ttc" id="acalendar_8h_html_a5db9490f8316b22d7c367c5a563a2f00a896c55cc5e46fab38ce9f51ebf7bfcd3"><div class="ttname"><a href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a896c55cc5e46fab38ce9f51ebf7bfcd3">clipped_unit::hour</a></div><div class="ttdeci">@ hour</div></div>
<div class="ttc" id="acalendar_8h_html_a5db9490f8316b22d7c367c5a563a2f00aa9f0e61a137d86aa9db53465e0801612"><div class="ttname"><a href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00aa9f0e61a137d86aa9db53465e0801612">clipped_unit::second</a></div><div class="ttdeci">@ second</div></div>
<div class="ttc" id="acalendar_8h_html_a5db9490f8316b22d7c367c5a563a2f00ad7af994f1f1ef8b5e3beb9f7fb139f57"><div class="ttname"><a href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00ad7af994f1f1ef8b5e3beb9f7fb139f57">clipped_unit::forever</a></div><div class="ttdeci">@ forever</div></div>
<div class="ttc" id="anamespacecalendar_html_a151f3184ac6460605cc4931707b08d8f"><div class="ttname"><a href="namespacecalendar.html#a151f3184ac6460605cc4931707b08d8f">calendar::year_length</a></div><div class="ttdeci">time_duration year_length()</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00461">calendar.cpp:461</a></div></div>
<div class="ttc" id="anamespacecalendar_html_a18e011596e47842fc4d1ab7f84cbb7a1"><div class="ttname"><a href="namespacecalendar.html#a18e011596e47842fc4d1ab7f84cbb7a1">calendar::eternal_season</a></div><div class="ttdeci">bool eternal_season()</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00456">calendar.cpp:456</a></div></div>
<div class="ttc" id="anamespacecalendar_html_a8805341f2154c0e7a8b656e77e1a4143"><div class="ttname"><a href="namespacecalendar.html#a8805341f2154c0e7a8b656e77e1a4143">calendar::INDEFINITELY_LONG_DURATION</a></div><div class="ttdeci">const time_duration INDEFINITELY_LONG_DURATION</div><div class="ttdoc">The expected duration of the cataclysm.</div></div>
<div class="ttc" id="anamespacecalendar_html_aa61c940cc539463295afa98e7bf7d22b"><div class="ttname"><a href="namespacecalendar.html#aa61c940cc539463295afa98e7bf7d22b">calendar::season_length</a></div><div class="ttdeci">time_duration season_length()</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00466">calendar.cpp:466</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a628b7db04235f228d40adc671413a8c8">day</a>, <a class="el" href="calendar_8cpp_source.html#l00456">calendar::eternal_season()</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00ad7af994f1f1ef8b5e3beb9f7fb139f57">forever</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a896c55cc5e46fab38ce9f51ebf7bfcd3">hour</a>, <a class="el" href="namespacecalendar.html#a8805341f2154c0e7a8b656e77e1a4143">calendar::INDEFINITELY_LONG_DURATION</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a0a7d55be9d12a369a6a8da0fb517fba4">minute</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a3f1b0333a44fd5f611d3429887eba4a8">season</a>, <a class="el" href="calendar_8cpp_source.html#l00466">calendar::season_length()</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00aa9f0e61a137d86aa9db53465e0801612">second</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a172a8327fcd3685ab3c0f740d031da09">week</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a84cdc76cabf41bd7c961f6ab12f117d8">year</a>, and <a class="el" href="calendar_8cpp_source.html#l00461">calendar::year_length()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item_8cpp_source.html#l00886">item::stacks_with()</a>, and <a class="el" href="calendar_8cpp_source.html#l00320">to_string_clipped()</a>.</p>

</div>
</div>
<a id="aaf86f573555410b0d59670df114d73a2" name="aaf86f573555410b0d59670df114d73a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf86f573555410b0d59670df114d73a2">&#9670;&nbsp;</a></span>current_daylight_level()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double current_daylight_level </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current seasonally-adjusted maximum daylight level. </p>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00171">171</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>{</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> percent = <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( day_of_season&lt;int&gt;( p ) ) / to_days&lt;int&gt;</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>                           ( <a class="code hl_function" href="namespacecalendar.html#aa61c940cc539463295afa98e7bf7d22b">calendar::season_length</a>() );</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    <span class="keywordtype">double</span> modifier = 1.0;</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    <span class="comment">// For ~Boston: solstices are +/- 25% sunlight intensity from equinoxes</span></div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>    <span class="keyword">static</span> <span class="keywordtype">double</span> deviation = 0.25;</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span> </div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>    <span class="keywordflow">switch</span>( <a class="code hl_function" href="calendar_8cpp.html#a81656706da6c7486137ad8578c0f523e">season_of_year</a>( p ) ) {</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5ac915753729cd68b608506d3c63ad1ba74ce3137b26cdafc19bdb66d881971fa">SPRING</a>:</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>            modifier = 1. + ( percent * deviation );</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5ac915753729cd68b608506d3c63ad1ba6d813ab9ea240f6c6eeff923ccb680ae">SUMMER</a>:</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>            modifier = ( 1. + deviation ) - ( percent * deviation );</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5ac915753729cd68b608506d3c63ad1ba5c29d7e8c16f80d457fa37c9dafab61e">AUTUMN</a>:</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>            modifier = 1. - ( percent * deviation );</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5ac915753729cd68b608506d3c63ad1ba1d8c9db74467f6c2fdad36f154ca6873">WINTER</a>:</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>            modifier = ( 1. - deviation ) + ( percent * deviation );</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>            <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Invalid season&quot;</span> );</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>    }</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span> </div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>    <span class="keywordflow">return</span> modifier * <a class="code hl_function" href="calendar_8cpp.html#aaf7cb0e1d64b92af65e14538a7e97674">default_daylight_level</a>();</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>}</div>
<div class="ttc" id="acalendar_8cpp_html_a81656706da6c7486137ad8578c0f523e"><div class="ttname"><a href="calendar_8cpp.html#a81656706da6c7486137ad8578c0f523e">season_of_year</a></div><div class="ttdeci">season_type season_of_year(const time_point &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00547">calendar.cpp:547</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_aaf7cb0e1d64b92af65e14538a7e97674"><div class="ttname"><a href="calendar_8cpp.html#aaf7cb0e1d64b92af65e14538a7e97674">default_daylight_level</a></div><div class="ttdeci">double default_daylight_level()</div><div class="ttdoc">How much light is provided in full daylight.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00062">calendar.cpp:62</a></div></div>
<div class="ttc" id="acalendar_8h_html_a5ac915753729cd68b608506d3c63ad1ba1d8c9db74467f6c2fdad36f154ca6873"><div class="ttname"><a href="calendar_8h.html#a5ac915753729cd68b608506d3c63ad1ba1d8c9db74467f6c2fdad36f154ca6873">WINTER</a></div><div class="ttdeci">@ WINTER</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00021">calendar.h:21</a></div></div>
<div class="ttc" id="acalendar_8h_html_a5ac915753729cd68b608506d3c63ad1ba5c29d7e8c16f80d457fa37c9dafab61e"><div class="ttname"><a href="calendar_8h.html#a5ac915753729cd68b608506d3c63ad1ba5c29d7e8c16f80d457fa37c9dafab61e">AUTUMN</a></div><div class="ttdeci">@ AUTUMN</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00020">calendar.h:20</a></div></div>
<div class="ttc" id="acalendar_8h_html_a5ac915753729cd68b608506d3c63ad1ba6d813ab9ea240f6c6eeff923ccb680ae"><div class="ttname"><a href="calendar_8h.html#a5ac915753729cd68b608506d3c63ad1ba6d813ab9ea240f6c6eeff923ccb680ae">SUMMER</a></div><div class="ttdeci">@ SUMMER</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00019">calendar.h:19</a></div></div>
<div class="ttc" id="acalendar_8h_html_a5ac915753729cd68b608506d3c63ad1ba74ce3137b26cdafc19bdb66d881971fa"><div class="ttname"><a href="calendar_8h.html#a5ac915753729cd68b608506d3c63ad1ba74ce3137b26cdafc19bdb66d881971fa">SPRING</a></div><div class="ttdeci">@ SPRING</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00018">calendar.h:18</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level DL::Error and class DC::DebugMsg, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00074">debug.h:74</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="calendar_8h_source.html#l00020">AUTUMN</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="calendar_8cpp_source.html#l00062">default_daylight_level()</a>, <a class="el" href="calendar_8cpp_source.html#l00466">calendar::season_length()</a>, <a class="el" href="calendar_8cpp_source.html#l00547">season_of_year()</a>, <a class="el" href="calendar_8h_source.html#l00018">SPRING</a>, <a class="el" href="calendar_8h_source.html#l00019">SUMMER</a>, and <a class="el" href="calendar_8h_source.html#l00021">WINTER</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l07481">game::list_items_monsters()</a>, <a class="el" href="character_8cpp_source.html#l10174">Character::sees_with_infrared()</a>, <a class="el" href="calendar_8cpp_source.html#l00199">sunlight()</a>, and <a class="el" href="editmap_8cpp_source.html#l00692">editmap::update_view_with_help()</a>.</p>

</div>
</div>
<a id="ac4913a41335973f0a82358272fe601eb" name="ac4913a41335973f0a82358272fe601eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4913a41335973f0a82358272fe601eb">&#9670;&nbsp;</a></span>day_of_week()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="calendar_8h.html#aca1a965ea25b5c617810af73ed5345c1">weekdays</a> day_of_week </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00427">427</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>{</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>    <span class="comment">/* Design rationale:</span></div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span><span class="comment">     * &lt;kevingranade&gt; here&#39;s a question</span></div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span><span class="comment">     * &lt;kevingranade&gt; what day of the week is day 0?</span></div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span><span class="comment">     * &lt;wito&gt; Sunday</span></div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span><span class="comment">     * &lt;GlyphGryph&gt; Why does it matter?</span></div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span><span class="comment">     * &lt;GlyphGryph&gt; For like where people are and stuff?</span></div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span><span class="comment">     * &lt;wito&gt; 7 is also Sunday</span></div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span><span class="comment">     * &lt;kevingranade&gt; NOAA weather forecasts include day of week</span></div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span><span class="comment">     * &lt;GlyphGryph&gt; Also by day0 do you mean the day people start day 0</span></div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span><span class="comment">     * &lt;GlyphGryph&gt; Or actual day 0</span></div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span><span class="comment">     * &lt;kevingranade&gt; good point, turn 0</span></div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span><span class="comment">     * &lt;GlyphGryph&gt; So day 5</span></div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span><span class="comment">     * &lt;wito&gt; Oh, I thought we were talking about week day numbering in general.</span></div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span><span class="comment">     * &lt;wito&gt; Day 5 is a thursday, I think.</span></div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span><span class="comment">     * &lt;wito&gt; Nah, Day 5 feels like a thursday. :P</span></div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span><span class="comment">     * &lt;wito&gt; Which would put the apocalpyse on a saturday?</span></div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span><span class="comment">     * &lt;Starfyre&gt; must be a thursday.  I was never able to get the hang of those.</span></div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span><span class="comment">     * &lt;ZChris13&gt; wito: seems about right to me</span></div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span><span class="comment">     * &lt;wito&gt; kevingranade: add four for thursday. ;)</span></div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span><span class="comment">     * &lt;kevingranade&gt; sounds like consensus to me</span></div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span><span class="comment">     * &lt;kevingranade&gt; Thursday it is */</span></div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> day_since_cataclysm = to_days&lt;int&gt;( p - <a class="code hl_variable" href="namespacecalendar.html#a2ad145a605c70358e73fdd4a802ba21a">calendar::turn_zero</a> );</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_enumeration" href="calendar_8h.html#aca1a965ea25b5c617810af73ed5345c1">weekdays</a> start_day = <a class="code hl_enumvalue" href="calendar_8h.html#aca1a965ea25b5c617810af73ed5345c1a7a61b324afb4dd8b2fb4a38afc34f755">weekdays::THURSDAY</a>;</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a> = day_since_cataclysm + <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( start_day );</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="calendar_8h.html#aca1a965ea25b5c617810af73ed5345c1">weekdays</a><span class="keyword">&gt;</span>( <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a> % 7 );</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>}</div>
<div class="ttc" id="acalendar_8h_html_aca1a965ea25b5c617810af73ed5345c1"><div class="ttname"><a href="calendar_8h.html#aca1a965ea25b5c617810af73ed5345c1">weekdays</a></div><div class="ttdeci">weekdays</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00610">calendar.h:610</a></div></div>
<div class="ttc" id="acalendar_8h_html_aca1a965ea25b5c617810af73ed5345c1a7a61b324afb4dd8b2fb4a38afc34f755"><div class="ttname"><a href="calendar_8h.html#aca1a965ea25b5c617810af73ed5345c1a7a61b324afb4dd8b2fb4a38afc34f755">weekdays::THURSDAY</a></div><div class="ttdeci">@ THURSDAY</div></div>
<div class="ttc" id="anamespacecalendar_html_a2ad145a605c70358e73fdd4a802ba21a"><div class="ttname"><a href="namespacecalendar.html#a2ad145a605c70358e73fdd4a802ba21a">calendar::turn_zero</a></div><div class="ttdeci">const time_point turn_zero</div><div class="ttdoc">Represents time point 0.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00026">calendar.cpp:26</a></div></div>
<div class="ttc" id="anamespacedetail_1_1digits_html_aad69d2373aa047bdd9e81494bf3da5ae"><div class="ttname"><a href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">detail::digits::result</a></div><div class="ttdeci">result</div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__format-inl_8h_source.html#l01626">fmtlib_format-inl.h:1626</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="calendar_8h.html#aca1a965ea25b5c617810af73ed5345c1a7a61b324afb4dd8b2fb4a38afc34f755">THURSDAY</a>, and <a class="el" href="calendar_8cpp_source.html#l00026">calendar::turn_zero</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather_8cpp_source.html#l00611">weather_forecast()</a>.</p>

</div>
</div>
<a id="a04e147268481a0e152b633ff1321907c" name="a04e147268481a0e152b633ff1321907c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04e147268481a0e152b633ff1321907c">&#9670;&nbsp;</a></span>daylight_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtime__point.html">time_point</a> daylight_time </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the time it gets light based on sunrise. </p>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00131">131</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>{</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    <span class="comment">// TODO: Actual daylight should start 18 degrees before sunrise</span></div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="calendar_8cpp.html#a3b66a9bcaa19d642c0b89e9e07a5bcf8">sunrise</a>( p ) + 15_minutes;</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>}</div>
<div class="ttc" id="acalendar_8cpp_html_a3b66a9bcaa19d642c0b89e9e07a5bcf8"><div class="ttname"><a href="calendar_8cpp.html#a3b66a9bcaa19d642c0b89e9e07a5bcf8">sunrise</a></div><div class="ttdeci">time_point sunrise(const time_point &amp;p)</div><div class="ttdoc">Returns the current sunrise time based on the time of year.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00086">calendar.cpp:86</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="calendar_8cpp_source.html#l00086">sunrise()</a>.</p>

<p class="reference">Referenced by <a class="el" href="handle__action_8cpp_source.html#l00861">wait()</a>.</p>

</div>
</div>
<a id="aaf7cb0e1d64b92af65e14538a7e97674" name="aaf7cb0e1d64b92af65e14538a7e97674"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf7cb0e1d64b92af65e14538a7e97674">&#9670;&nbsp;</a></span>default_daylight_level()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double default_daylight_level </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>How much light is provided in full daylight. </p>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00062">62</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>{</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>    <span class="keywordflow">return</span> 100.0;</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="bionics_8cpp_source.html#l01154">Character::burn_fuel()</a>, <a class="el" href="calendar_8cpp_source.html#l00171">current_daylight_level()</a>, <a class="el" href="game_8cpp_source.html#l03855">game::natural_light_level()</a>, <a class="el" href="bionics_8cpp_source.html#l01311">Character::passive_power_gen()</a>, <a class="el" href="creature_8cpp_source.html#l00274">Creature::sees()</a>, <a class="el" href="monster_8cpp_source.html#l00938">monster::sight_range()</a>, <a class="el" href="vehicle_8cpp_source.html#l04514">vehicle::total_solar_epower_w()</a>, <a class="el" href="active__tile__data_8cpp_source.html#l00113">solar_tile::update_internal()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06657">vehicle::update_time()</a>.</p>

</div>
</div>
<a id="ae15341d001c737a325a8d3805ffa898d" name="ae15341d001c737a325a8d3805ffa898d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae15341d001c737a325a8d3805ffa898d">&#9670;&nbsp;</a></span>get_moon_phase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="calendar_8h.html#a108488c56b99a99f407bda5389fd85ce">moon_phase</a> get_moon_phase </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current light level of the moon. </p>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00067">67</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>{</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    <span class="comment">// Seasons last 14 days, not 91 like in real life</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> synodic_month = ( 14 / 3.0f ) * 1_days;</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> moon_phase_duration =</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>        <a class="code hl_function" href="namespacecalendar.html#aef148fa54dcd19dba93471745bb00975">calendar::season_ratio</a>() * synodic_month;</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>    <span class="comment">// Reset moon phase at start of the year</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    <a class="code hl_class" href="classtime__point.html">time_point</a> p_year = <a class="code hl_variable" href="namespacecalendar.html#a2ad145a605c70358e73fdd4a802ba21a">calendar::turn_zero</a> + <a class="code hl_function" href="calendar_8h.html#a1ff4d060fe2cd2f878a5593fe6bb96b7">time_past_new_year</a>( p );</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>    <span class="comment">// Switch moon phase at noon so it stays the same all night</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> num_middays = to_days&lt;int&gt;( p_year - <a class="code hl_variable" href="namespacecalendar.html#a2ad145a605c70358e73fdd4a802ba21a">calendar::turn_zero</a> + 1_days / 2 );</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> nearest_midnight = num_middays * 1_days;</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> phase_change = nearest_midnight / moon_phase_duration;</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> current_phase = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( std::round( phase_change * <a class="code hl_enumvalue" href="calendar_8h.html#a108488c56b99a99f407bda5389fd85cea250f593eae709d77804f1b924c21b445">MOON_PHASE_MAX</a> ) ) %</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>                              <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_enumvalue" href="calendar_8h.html#a108488c56b99a99f407bda5389fd85cea250f593eae709d77804f1b924c21b445">MOON_PHASE_MAX</a> );</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="calendar_8h.html#a108488c56b99a99f407bda5389fd85ce">moon_phase</a><span class="keyword">&gt;</span>( current_phase );</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>}</div>
<div class="ttc" id="acalendar_8h_html_a108488c56b99a99f407bda5389fd85ce"><div class="ttname"><a href="calendar_8h.html#a108488c56b99a99f407bda5389fd85ce">moon_phase</a></div><div class="ttdeci">moon_phase</div><div class="ttdoc">Phases of the moon.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00031">calendar.h:31</a></div></div>
<div class="ttc" id="acalendar_8h_html_a108488c56b99a99f407bda5389fd85cea250f593eae709d77804f1b924c21b445"><div class="ttname"><a href="calendar_8h.html#a108488c56b99a99f407bda5389fd85cea250f593eae709d77804f1b924c21b445">MOON_PHASE_MAX</a></div><div class="ttdeci">@ MOON_PHASE_MAX</div><div class="ttdoc">Not a valid moon phase, but can be used for iterating through enum.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00050">calendar.h:49</a></div></div>
<div class="ttc" id="acalendar_8h_html_a1ff4d060fe2cd2f878a5593fe6bb96b7"><div class="ttname"><a href="calendar_8h.html#a1ff4d060fe2cd2f878a5593fe6bb96b7">time_past_new_year</a></div><div class="ttdeci">time_duration time_past_new_year(const time_point &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00502">calendar.h:502</a></div></div>
<div class="ttc" id="aclasstime__duration_html"><div class="ttname"><a href="classtime__duration.html">time_duration</a></div><div class="ttdoc">A duration defined as a number of specific time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00179">calendar.h:180</a></div></div>
<div class="ttc" id="aclasstime__point_html"><div class="ttname"><a href="classtime__point.html">time_point</a></div><div class="ttdoc">A point in the game time.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00430">calendar.h:431</a></div></div>
<div class="ttc" id="anamespacecalendar_html_aef148fa54dcd19dba93471745bb00975"><div class="ttname"><a href="namespacecalendar.html#aef148fa54dcd19dba93471745bb00975">calendar::season_ratio</a></div><div class="ttdeci">float season_ratio()</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00485">calendar.cpp:485</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="calendar_8h_source.html#l00049">MOON_PHASE_MAX</a>, <a class="el" href="calendar_8cpp_source.html#l00485">calendar::season_ratio()</a>, <a class="el" href="calendar_8h_source.html#l00502">time_past_new_year()</a>, and <a class="el" href="calendar_8cpp_source.html#l00026">calendar::turn_zero</a>.</p>

<p class="reference">Referenced by <a class="el" href="panels_8cpp_source.html#l00466">get_moon()</a>, <a class="el" href="panels_8cpp_source.html#l00450">get_moon_graphic()</a>, and <a class="el" href="calendar_8cpp_source.html#l00199">sunlight()</a>.</p>

</div>
</div>
<a id="a1d0328da4c2fb146307396324bb85fa1" name="a1d0328da4c2fb146307396324bb85fa1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d0328da4c2fb146307396324bb85fa1">&#9670;&nbsp;</a></span>is_dawn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool is_dawn </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if it's currently dawn - between sunrise and twilight_duration after sunrise. </p>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00163">163</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>{</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> now = <a class="code hl_function" href="calendar_8h.html#aa8a2c3326ae8829cef1439aa327897c4">time_past_midnight</a>( p );</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> <a class="code hl_function" href="calendar_8cpp.html#a3b66a9bcaa19d642c0b89e9e07a5bcf8">sunrise</a> = <a class="code hl_function" href="calendar_8h.html#aa8a2c3326ae8829cef1439aa327897c4">time_past_midnight</a>( ::<a class="code hl_function" href="calendar_8cpp.html#a3b66a9bcaa19d642c0b89e9e07a5bcf8">sunrise</a>( p ) );</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span> </div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    <span class="keywordflow">return</span> now &gt;= <a class="code hl_function" href="calendar_8cpp.html#a3b66a9bcaa19d642c0b89e9e07a5bcf8">sunrise</a> &amp;&amp; now &lt;= <a class="code hl_function" href="calendar_8cpp.html#a3b66a9bcaa19d642c0b89e9e07a5bcf8">sunrise</a> + <a class="code hl_variable" href="calendar_8cpp.html#a53dee894346dba396b94c4cfe558322c">twilight_duration</a>;</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>}</div>
<div class="ttc" id="acalendar_8cpp_html_a53dee894346dba396b94c4cfe558322c"><div class="ttname"><a href="calendar_8cpp.html#a53dee894346dba396b94c4cfe558322c">twilight_duration</a></div><div class="ttdeci">static const time_duration twilight_duration</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00060">calendar.cpp:60</a></div></div>
<div class="ttc" id="acalendar_8h_html_aa8a2c3326ae8829cef1439aa327897c4"><div class="ttname"><a href="calendar_8h.html#aa8a2c3326ae8829cef1439aa327897c4">time_past_midnight</a></div><div class="ttdeci">time_duration time_past_midnight(const time_point &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00497">calendar.h:497</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="calendar_8cpp_source.html#l00086">sunrise()</a>, <a class="el" href="calendar_8h_source.html#l00497">time_past_midnight()</a>, and <a class="el" href="calendar_8cpp_source.html#l00060">twilight_duration</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse_8cpp_source.html#l07099">photo_def_for_camera_point()</a>, <a class="el" href="calendar_8cpp_source.html#l00199">sunlight()</a>, and <a class="el" href="weather_8cpp_source.html#l00611">weather_forecast()</a>.</p>

</div>
</div>
<a id="a1f243cd9207ab39fad97d6b638b76757" name="a1f243cd9207ab39fad97d6b638b76757"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f243cd9207ab39fad97d6b638b76757">&#9670;&nbsp;</a></span>is_day()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool is_day </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if it's currently day time - after dawn and before dusk. </p>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00146">146</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>{</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> now = <a class="code hl_function" href="calendar_8h.html#aa8a2c3326ae8829cef1439aa327897c4">time_past_midnight</a>( p );</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> <a class="code hl_function" href="calendar_8cpp.html#a3b66a9bcaa19d642c0b89e9e07a5bcf8">sunrise</a> = <a class="code hl_function" href="calendar_8h.html#aa8a2c3326ae8829cef1439aa327897c4">time_past_midnight</a>( ::<a class="code hl_function" href="calendar_8cpp.html#a3b66a9bcaa19d642c0b89e9e07a5bcf8">sunrise</a>( p ) );</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> <a class="code hl_function" href="calendar_8cpp.html#a4930c6084e3379ceb56259d33dee133e">sunset</a> = <a class="code hl_function" href="calendar_8h.html#aa8a2c3326ae8829cef1439aa327897c4">time_past_midnight</a>( ::<a class="code hl_function" href="calendar_8cpp.html#a4930c6084e3379ceb56259d33dee133e">sunset</a>( p ) );</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span> </div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>    <span class="keywordflow">return</span> now &gt;= <a class="code hl_function" href="calendar_8cpp.html#a3b66a9bcaa19d642c0b89e9e07a5bcf8">sunrise</a> + <a class="code hl_variable" href="calendar_8cpp.html#a53dee894346dba396b94c4cfe558322c">twilight_duration</a> &amp;&amp; now &lt;= <a class="code hl_function" href="calendar_8cpp.html#a4930c6084e3379ceb56259d33dee133e">sunset</a>;</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>}</div>
<div class="ttc" id="acalendar_8cpp_html_a4930c6084e3379ceb56259d33dee133e"><div class="ttname"><a href="calendar_8cpp.html#a4930c6084e3379ceb56259d33dee133e">sunset</a></div><div class="ttdeci">time_point sunset(const time_point &amp;p)</div><div class="ttdoc">Returns the current sunset time based on the time of year.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00106">calendar.cpp:106</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="calendar_8cpp_source.html#l00086">sunrise()</a>, <a class="el" href="calendar_8cpp_source.html#l00106">sunset()</a>, <a class="el" href="calendar_8h_source.html#l00497">time_past_midnight()</a>, and <a class="el" href="calendar_8cpp_source.html#l00060">twilight_duration</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather__gen_8cpp_source.html#l00212">weather_generator::get_weather_conditions()</a>, and <a class="el" href="weather_8cpp_source.html#l00611">weather_forecast()</a>.</p>

</div>
</div>
<a id="ac200b295554f05d816686a1488c685db" name="ac200b295554f05d816686a1488c685db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac200b295554f05d816686a1488c685db">&#9670;&nbsp;</a></span>is_dusk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool is_dusk </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if it's currently dusk - between sunset and and twilight_duration after sunset. </p>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00155">155</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>{</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> now = <a class="code hl_function" href="calendar_8h.html#aa8a2c3326ae8829cef1439aa327897c4">time_past_midnight</a>( p );</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> <a class="code hl_function" href="calendar_8cpp.html#a4930c6084e3379ceb56259d33dee133e">sunset</a> = <a class="code hl_function" href="calendar_8h.html#aa8a2c3326ae8829cef1439aa327897c4">time_past_midnight</a>( ::<a class="code hl_function" href="calendar_8cpp.html#a4930c6084e3379ceb56259d33dee133e">sunset</a>( p ) );</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span> </div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    <span class="keywordflow">return</span> now &gt;= <a class="code hl_function" href="calendar_8cpp.html#a4930c6084e3379ceb56259d33dee133e">sunset</a> &amp;&amp; now &lt;= <a class="code hl_function" href="calendar_8cpp.html#a4930c6084e3379ceb56259d33dee133e">sunset</a> + <a class="code hl_variable" href="calendar_8cpp.html#a53dee894346dba396b94c4cfe558322c">twilight_duration</a>;</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="calendar_8cpp_source.html#l00106">sunset()</a>, <a class="el" href="calendar_8h_source.html#l00497">time_past_midnight()</a>, and <a class="el" href="calendar_8cpp_source.html#l00060">twilight_duration</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse_8cpp_source.html#l07099">photo_def_for_camera_point()</a>, <a class="el" href="calendar_8cpp_source.html#l00199">sunlight()</a>, and <a class="el" href="weather_8cpp_source.html#l00611">weather_forecast()</a>.</p>

</div>
</div>
<a id="a07a1c09320c43c4d206905e06c2c42a8" name="a07a1c09320c43c4d206905e06c2c42a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07a1c09320c43c4d206905e06c2c42a8">&#9670;&nbsp;</a></span>is_night()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool is_night </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if it's currently night time - after dusk and before dawn. </p>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00137">137</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>{</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> now = <a class="code hl_function" href="calendar_8h.html#aa8a2c3326ae8829cef1439aa327897c4">time_past_midnight</a>( p );</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> <a class="code hl_function" href="calendar_8cpp.html#a3b66a9bcaa19d642c0b89e9e07a5bcf8">sunrise</a> = <a class="code hl_function" href="calendar_8h.html#aa8a2c3326ae8829cef1439aa327897c4">time_past_midnight</a>( ::<a class="code hl_function" href="calendar_8cpp.html#a3b66a9bcaa19d642c0b89e9e07a5bcf8">sunrise</a>( p ) );</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> <a class="code hl_function" href="calendar_8cpp.html#a4930c6084e3379ceb56259d33dee133e">sunset</a> = <a class="code hl_function" href="calendar_8h.html#aa8a2c3326ae8829cef1439aa327897c4">time_past_midnight</a>( ::<a class="code hl_function" href="calendar_8cpp.html#a4930c6084e3379ceb56259d33dee133e">sunset</a>( p ) );</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span> </div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>    <span class="keywordflow">return</span> now &gt;= <a class="code hl_function" href="calendar_8cpp.html#a4930c6084e3379ceb56259d33dee133e">sunset</a> + <a class="code hl_variable" href="calendar_8cpp.html#a53dee894346dba396b94c4cfe558322c">twilight_duration</a> || now &lt;= <a class="code hl_function" href="calendar_8cpp.html#a3b66a9bcaa19d642c0b89e9e07a5bcf8">sunrise</a>;</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="calendar_8cpp_source.html#l00086">sunrise()</a>, <a class="el" href="calendar_8cpp_source.html#l00106">sunset()</a>, <a class="el" href="calendar_8h_source.html#l00497">time_past_midnight()</a>, and <a class="el" href="calendar_8cpp_source.html#l00060">twilight_duration</a>.</p>

<p class="reference">Referenced by <a class="el" href="bionics_8cpp_source.html#l01355">Character::find_remote_fuel()</a>, <a class="el" href="weather_8cpp_source.html#l01162">weather::is_in_sunlight()</a>, <a class="el" href="iuse_8cpp_source.html#l07099">photo_def_for_camera_point()</a>, <a class="el" href="condition_8cpp_source.html#l00811">conditional_t&lt; T &gt;::set_is_day()</a>, and <a class="el" href="calendar_8cpp_source.html#l00199">sunlight()</a>.</p>

</div>
</div>
<a id="a1a6003467bed851ed16dff1c59f44d22" name="a1a6003467bed851ed16dff1c59f44d22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a6003467bed851ed16dff1c59f44d22">&#9670;&nbsp;</a></span>night_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtime__point.html">time_point</a> night_time </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the time it gets dark based on sunset. </p>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00126">126</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>{</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="calendar_8cpp.html#a4930c6084e3379ceb56259d33dee133e">sunset</a>( p ) + <a class="code hl_variable" href="calendar_8cpp.html#a53dee894346dba396b94c4cfe558322c">twilight_duration</a>;</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="calendar_8cpp_source.html#l00106">sunset()</a>, and <a class="el" href="calendar_8cpp_source.html#l00060">twilight_duration</a>.</p>

<p class="reference">Referenced by <a class="el" href="handle__action_8cpp_source.html#l00861">wait()</a>.</p>

</div>
</div>
<a id="a4249b6f1d0842211bfe53e5f9e206a10" name="a4249b6f1d0842211bfe53e5f9e206a10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4249b6f1d0842211bfe53e5f9e206a10">&#9670;&nbsp;</a></span>rng()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtime__duration.html">time_duration</a> rng </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtime__duration.html">time_duration</a>&#160;</td>
          <td class="paramname"><em>lo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classtime__duration.html">time_duration</a>&#160;</td>
          <td class="paramname"><em>hi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00516">516</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>{</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a>( <a class="code hl_function" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#aa83c5be51fbbf9c1e23c0369c6b31137">lo</a>.turns_, hi.<a class="code hl_variable" href="classtime__duration.html#ac24c0833db07e068c12690d9d1f59fa7">turns_</a> ) );</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>}</div>
<div class="ttc" id="acalendar_8cpp_html_a4249b6f1d0842211bfe53e5f9e206a10"><div class="ttname"><a href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a></div><div class="ttdeci">time_duration rng(time_duration lo, time_duration hi)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00516">calendar.cpp:516</a></div></div>
<div class="ttc" id="aclasstime__duration_html_ac24c0833db07e068c12690d9d1f59fa7"><div class="ttname"><a href="classtime__duration.html#ac24c0833db07e068c12690d9d1f59fa7">time_duration::turns_</a></div><div class="ttdeci">int turns_</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00183">calendar.h:183</a></div></div>
<div class="ttc" id="anamespacecata_1_1hash64__detail_html_aa83c5be51fbbf9c1e23c0369c6b31137"><div class="ttname"><a href="namespacecata_1_1hash64__detail.html#aa83c5be51fbbf9c1e23c0369c6b31137">cata::hash64_detail::lo</a></div><div class="ttdeci">std::uint32_t lo</div><div class="ttdef"><b>Definition:</b> <a href="hash__utils_8h_source.html#l00096">hash_utils.h:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a81656706da6c7486137ad8578c0f523e" name="a81656706da6c7486137ad8578c0f523e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81656706da6c7486137ad8578c0f523e">&#9670;&nbsp;</a></span>season_of_year()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="calendar_8h.html#a5ac915753729cd68b608506d3c63ad1b">season_type</a> season_of_year </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The season of the of the given time point. Returns the same season for any input if the <a class="el" href="namespacecalendar.html#a18e011596e47842fc4d1ab7f84cbb7a1">calendar::eternal_season</a> yields true. </dd></dl>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00547">547</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>{</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>    <span class="comment">// TODO: Explain why is it cached, make the cache explicit, or get rid of caching</span></div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>    <span class="keyword">static</span> <a class="code hl_class" href="classtime__point.html">time_point</a> prev_turn = <a class="code hl_variable" href="namespacecalendar.html#ae25f99fbff61e25df40b5b26bcedee8c">calendar::before_time_starts</a>;</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>    <span class="keyword">static</span> <a class="code hl_enumeration" href="calendar_8h.html#a5ac915753729cd68b608506d3c63ad1b">season_type</a> prev_season = <a class="code hl_variable" href="namespacecalendar.html#a3f30b41b5e57753e77e315bb4fc58f25">calendar::initial_season</a>;</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span> </div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>    <span class="keywordflow">if</span>( p != prev_turn ) {</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>        prev_turn = p;</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacecalendar.html#a18e011596e47842fc4d1ab7f84cbb7a1">calendar::eternal_season</a>() ) {</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>            <span class="comment">// If we use calendar::start to determine the initial season, and the user shortens the season length</span></div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>            <span class="comment">// mid-game, the result could be the wrong season!</span></div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>            <span class="keywordflow">return</span> prev_season = <a class="code hl_variable" href="namespacecalendar.html#a3f30b41b5e57753e77e315bb4fc58f25">calendar::initial_season</a>;</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>        }</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>        <span class="keywordflow">return</span> prev_season = <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="calendar_8h.html#a5ac915753729cd68b608506d3c63ad1b">season_type</a><span class="keyword">&gt;</span>(</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>                                 to_turn&lt;int&gt;( p ) / to_turns&lt;int&gt;( <a class="code hl_function" href="namespacecalendar.html#aa61c940cc539463295afa98e7bf7d22b">calendar::season_length</a>() ) % 4</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>                             );</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>    }</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span> </div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>    <span class="keywordflow">return</span> prev_season;</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>}</div>
<div class="ttc" id="acalendar_8h_html_a5ac915753729cd68b608506d3c63ad1b"><div class="ttname"><a href="calendar_8h.html#a5ac915753729cd68b608506d3c63ad1b">season_type</a></div><div class="ttdeci">season_type</div><div class="ttdoc">Real world seasons.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00017">calendar.h:17</a></div></div>
<div class="ttc" id="anamespacecalendar_html_a3f30b41b5e57753e77e315bb4fc58f25"><div class="ttname"><a href="namespacecalendar.html#a3f30b41b5e57753e77e315bb4fc58f25">calendar::initial_season</a></div><div class="ttdeci">const season_type &amp; initial_season</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00035">calendar.cpp:35</a></div></div>
<div class="ttc" id="anamespacecalendar_html_ae25f99fbff61e25df40b5b26bcedee8c"><div class="ttname"><a href="namespacecalendar.html#ae25f99fbff61e25df40b5b26bcedee8c">calendar::before_time_starts</a></div><div class="ttdeci">const time_point before_time_starts</div><div class="ttdoc">A time point that is always before the current turn, even when the game has just started.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00025">calendar.cpp:25</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="calendar_8cpp_source.html#l00025">calendar::before_time_starts</a>, <a class="el" href="calendar_8cpp_source.html#l00456">calendar::eternal_season()</a>, <a class="el" href="calendar_8cpp_source.html#l00035">calendar::initial_season</a>, and <a class="el" href="calendar_8cpp_source.html#l00466">calendar::season_length()</a>.</p>

<p class="reference">Referenced by <a class="el" href="mapdata_8cpp_source.html#l00555">map_data_common_t::color()</a>, <a class="el" href="calendar_8cpp_source.html#l00171">current_daylight_level()</a>, <a class="el" href="iexamine_8cpp_source.html#l01755">dead_plant()</a>, <a class="el" href="debug__menu_8cpp_source.html#l01325">debug_menu::debug()</a>, <a class="el" href="panels_8cpp_source.html#l01396">draw_loc_labels()</a>, <a class="el" href="panels_8cpp_source.html#l01077">draw_time()</a>, <a class="el" href="panels_8cpp_source.html#l02038">draw_time_classic()</a>, <a class="el" href="iexamine_8cpp_source.html#l02042">iexamine::flower_marloss()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l01671">activity_handlers::forage_finish()</a>, <a class="el" href="mission__companion_8cpp_source.html#l01423">talk_function::forage_return()</a>, <a class="el" href="faction__camp_8cpp_source.html#l02646">basecamp::gathering_return()</a>, <a class="el" href="weather__gen_8cpp_source.html#l00045">get_common_data()</a>, <a class="el" href="mapdata_8cpp_source.html#l00560">map_data_common_t::get_harvest()</a>, <a class="el" href="mongroup_8cpp_source.html#l00098">MonsterGroupManager::GetResultFromGroup()</a>, <a class="el" href="weather_8cpp_source.html#l00075">glare()</a>, <a class="el" href="monexamine_8cpp_source.html#l00064">monexamine::pet_menu()</a>, <a class="el" href="monmove_8cpp_source.html#l00307">monster::plan()</a>, <a class="el" href="map_8cpp_source.html#l07061">map::restock_fruits()</a>, <a class="el" href="map_8cpp_source.html#l06770">map::saven()</a>, <a class="el" href="condition_8cpp_source.html#l00589">conditional_t&lt; T &gt;::set_is_season()</a>, <a class="el" href="calendar_8cpp_source.html#l00086">sunrise()</a>, <a class="el" href="calendar_8cpp_source.html#l00106">sunset()</a>, <a class="el" href="mapdata_8cpp_source.html#l00550">map_data_common_t::symbol()</a>, <a class="el" href="weather__gen_8cpp_source.html#l00328">weather_generator::test_weather()</a>, <a class="el" href="calendar_8cpp_source.html#l00568">to_string()</a>, and <a class="el" href="monster_8cpp_source.html#l00390">monster::try_reproduce()</a>.</p>

</div>
</div>
<a id="aaffe4a17e181d5522e294ab936f3f368" name="aaffe4a17e181d5522e294ab936f3f368"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaffe4a17e181d5522e294ab936f3f368">&#9670;&nbsp;</a></span>sunlight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float sunlight </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>vision</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current sunlight or moonlight level through the preceding functions. </p>
<p >By default, returns sunlight level for vision, with moonlight providing a measurable amount of light. with vision == false, returns sunlight for solar panel purposes, and moonlight provides 0 light </p>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00199">199</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>{</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> now = <a class="code hl_function" href="calendar_8h.html#aa8a2c3326ae8829cef1439aa327897c4">time_past_midnight</a>( p );</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> <a class="code hl_function" href="calendar_8cpp.html#a3b66a9bcaa19d642c0b89e9e07a5bcf8">sunrise</a> = <a class="code hl_function" href="calendar_8h.html#aa8a2c3326ae8829cef1439aa327897c4">time_past_midnight</a>( ::<a class="code hl_function" href="calendar_8cpp.html#a3b66a9bcaa19d642c0b89e9e07a5bcf8">sunrise</a>( p ) );</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> <a class="code hl_function" href="calendar_8cpp.html#a4930c6084e3379ceb56259d33dee133e">sunset</a> = <a class="code hl_function" href="calendar_8h.html#aa8a2c3326ae8829cef1439aa327897c4">time_past_midnight</a>( ::<a class="code hl_function" href="calendar_8cpp.html#a4930c6084e3379ceb56259d33dee133e">sunset</a>( p ) );</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span> </div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> daylight_level = <a class="code hl_function" href="calendar_8cpp.html#aaf86f573555410b0d59670df114d73a2">current_daylight_level</a>( p );</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span> </div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>    <span class="keywordtype">int</span> current_phase = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_function" href="calendar_8cpp.html#ae15341d001c737a325a8d3805ffa898d">get_moon_phase</a>( p ) );</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>    <span class="keywordflow">if</span>( current_phase &gt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_enumvalue" href="calendar_8h.html#a108488c56b99a99f407bda5389fd85cea250f593eae709d77804f1b924c21b445">MOON_PHASE_MAX</a> ) / 2 ) {</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>        current_phase = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_enumvalue" href="calendar_8h.html#a108488c56b99a99f407bda5389fd85cea250f593eae709d77804f1b924c21b445">MOON_PHASE_MAX</a> ) - current_phase;</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>    }</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span> </div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> moonlight = <a class="code hl_namespace" href="namespacevision.html">vision</a> ? 1 + <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( current_phase * <a class="code hl_variable" href="calendar_8cpp.html#aec47826445a332667774d86f72ce8f7b">moonlight_per_quarter</a> ) :</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>                          0;</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span> </div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="calendar_8cpp.html#a07a1c09320c43c4d206905e06c2c42a8">is_night</a>( p ) ) {</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>        <span class="keywordflow">return</span> moonlight;</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="calendar_8cpp.html#a1d0328da4c2fb146307396324bb85fa1">is_dawn</a>( p ) ) {</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>        <span class="keyword">const</span> <span class="keywordtype">double</span> percent = ( now - <a class="code hl_function" href="calendar_8cpp.html#a3b66a9bcaa19d642c0b89e9e07a5bcf8">sunrise</a> ) / <a class="code hl_variable" href="calendar_8cpp.html#a53dee894346dba396b94c4cfe558322c">twilight_duration</a>;</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>        <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( moonlight ) * ( 1. - percent ) + daylight_level * percent;</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="calendar_8cpp.html#ac200b295554f05d816686a1488c685db">is_dusk</a>( p ) ) {</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>        <span class="keyword">const</span> <span class="keywordtype">double</span> percent = ( now - <a class="code hl_function" href="calendar_8cpp.html#a4930c6084e3379ceb56259d33dee133e">sunset</a> ) / <a class="code hl_variable" href="calendar_8cpp.html#a53dee894346dba396b94c4cfe558322c">twilight_duration</a>;</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>        <span class="keywordflow">return</span> daylight_level * ( 1. - percent ) + <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( moonlight ) * percent;</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>        <span class="keywordflow">return</span> daylight_level;</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>    }</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>}</div>
<div class="ttc" id="acalendar_8cpp_html_a07a1c09320c43c4d206905e06c2c42a8"><div class="ttname"><a href="calendar_8cpp.html#a07a1c09320c43c4d206905e06c2c42a8">is_night</a></div><div class="ttdeci">bool is_night(const time_point &amp;p)</div><div class="ttdoc">Returns true if it's currently night time - after dusk and before dawn.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00137">calendar.cpp:137</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a1d0328da4c2fb146307396324bb85fa1"><div class="ttname"><a href="calendar_8cpp.html#a1d0328da4c2fb146307396324bb85fa1">is_dawn</a></div><div class="ttdeci">bool is_dawn(const time_point &amp;p)</div><div class="ttdoc">Returns true if it's currently dawn - between sunrise and twilight_duration after sunrise.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00163">calendar.cpp:163</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_aaf86f573555410b0d59670df114d73a2"><div class="ttname"><a href="calendar_8cpp.html#aaf86f573555410b0d59670df114d73a2">current_daylight_level</a></div><div class="ttdeci">double current_daylight_level(const time_point &amp;p)</div><div class="ttdoc">Returns the current seasonally-adjusted maximum daylight level.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00171">calendar.cpp:171</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_ac200b295554f05d816686a1488c685db"><div class="ttname"><a href="calendar_8cpp.html#ac200b295554f05d816686a1488c685db">is_dusk</a></div><div class="ttdeci">bool is_dusk(const time_point &amp;p)</div><div class="ttdoc">Returns true if it's currently dusk - between sunset and and twilight_duration after sunset.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00155">calendar.cpp:155</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_ae15341d001c737a325a8d3805ffa898d"><div class="ttname"><a href="calendar_8cpp.html#ae15341d001c737a325a8d3805ffa898d">get_moon_phase</a></div><div class="ttdeci">moon_phase get_moon_phase(const time_point &amp;p)</div><div class="ttdoc">Returns the current light level of the moon.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00067">calendar.cpp:67</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_aec47826445a332667774d86f72ce8f7b"><div class="ttname"><a href="calendar_8cpp.html#aec47826445a332667774d86f72ce8f7b">moonlight_per_quarter</a></div><div class="ttdeci">static constexpr double moonlight_per_quarter</div><div class="ttdoc">How much light moon provides per lit-up quarter (Full-moon light is four times this value)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00017">calendar.cpp:17</a></div></div>
<div class="ttc" id="anamespacevision_html"><div class="ttname"><a href="namespacevision.html">vision</a></div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01775">character.cpp:1776</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="calendar_8cpp_source.html#l00171">current_daylight_level()</a>, <a class="el" href="calendar_8cpp_source.html#l00067">get_moon_phase()</a>, <a class="el" href="calendar_8cpp_source.html#l00163">is_dawn()</a>, <a class="el" href="calendar_8cpp_source.html#l00155">is_dusk()</a>, <a class="el" href="calendar_8cpp_source.html#l00137">is_night()</a>, <a class="el" href="calendar_8h_source.html#l00049">MOON_PHASE_MAX</a>, <a class="el" href="calendar_8cpp_source.html#l00017">moonlight_per_quarter</a>, <a class="el" href="calendar_8cpp_source.html#l00086">sunrise()</a>, <a class="el" href="calendar_8cpp_source.html#l00106">sunset()</a>, <a class="el" href="calendar_8h_source.html#l00497">time_past_midnight()</a>, and <a class="el" href="calendar_8cpp_source.html#l00060">twilight_duration</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather_8cpp_source.html#l00107">incident_sunlight()</a>, <a class="el" href="game_8cpp_source.html#l03855">game::natural_light_level()</a>, and <a class="el" href="active__tile__data_8cpp_source.html#l00113">solar_tile::update_internal()</a>.</p>

</div>
</div>
<a id="a3b66a9bcaa19d642c0b89e9e07a5bcf8" name="a3b66a9bcaa19d642c0b89e9e07a5bcf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b66a9bcaa19d642c0b89e9e07a5bcf8">&#9670;&nbsp;</a></span>sunrise()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtime__point.html">time_point</a> sunrise </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current sunrise time based on the time of year. </p>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00086">86</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>{</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    <span class="keyword">static_assert</span>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_enumvalue" href="calendar_8h.html#a5ac915753729cd68b608506d3c63ad1ba74ce3137b26cdafc19bdb66d881971fa">SPRING</a> ) == 0,</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>                   <span class="stringliteral">&quot;Expected spring to be the first season.  If not, code below will use wrong index into array&quot;</span> );</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span> </div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;int, 4&gt; start_hours = { { <a class="code hl_variable" href="calendar_8cpp.html#a5ca55217f1b65aebfbcd03c3d5db28b2">sunrise_equinox</a>, <a class="code hl_variable" href="calendar_8cpp.html#aa7b47331e571f7450c39016a1850ac34">sunrise_summer</a>, <a class="code hl_variable" href="calendar_8cpp.html#a5ca55217f1b65aebfbcd03c3d5db28b2">sunrise_equinox</a>, <a class="code hl_variable" href="calendar_8cpp.html#a71f093b6c6124bff85dbbcaae3543979">sunrise_winter</a>, } };</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a3f1b0333a44fd5f611d3429887eba4a8">season</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( <a class="code hl_function" href="calendar_8cpp.html#a81656706da6c7486137ad8578c0f523e">season_of_year</a>( p ) );</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    assert( season &lt; start_hours.size() );</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span> </div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> start_hour = start_hours[<a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a3f1b0333a44fd5f611d3429887eba4a8">season</a>];</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> end_hour = start_hours[( <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a3f1b0333a44fd5f611d3429887eba4a8">season</a> + 1 ) % 4];</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span> </div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> into_month = <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( day_of_season&lt;int&gt;( p ) ) / to_days&lt;int&gt;</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>                              ( <a class="code hl_function" href="namespacecalendar.html#aa61c940cc539463295afa98e7bf7d22b">calendar::season_length</a>() );</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> time = start_hour * ( 1.0 - into_month ) + end_hour * into_month;</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span> </div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__point.html">time_point</a> midnight = p - <a class="code hl_function" href="calendar_8h.html#aa8a2c3326ae8829cef1439aa327897c4">time_past_midnight</a>( p );</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>    <span class="keywordflow">return</span> midnight + <a class="code hl_function" href="classtime__duration.html#a20688ca0a8848ec0d73636ede90d27ad">time_duration::from_minutes</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( time * 60 ) );</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>}</div>
<div class="ttc" id="acalendar_8cpp_html_a5ca55217f1b65aebfbcd03c3d5db28b2"><div class="ttname"><a href="calendar_8cpp.html#a5ca55217f1b65aebfbcd03c3d5db28b2">sunrise_equinox</a></div><div class="ttdeci">static constexpr int sunrise_equinox</div><div class="ttdoc">Hour of sunrise at fall and spring equinox.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00048">calendar.cpp:48</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a71f093b6c6124bff85dbbcaae3543979"><div class="ttname"><a href="calendar_8cpp.html#a71f093b6c6124bff85dbbcaae3543979">sunrise_winter</a></div><div class="ttdeci">static constexpr int sunrise_winter</div><div class="ttdoc">Hour of sunrise at winter solstice.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00042">calendar.cpp:42</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_aa7b47331e571f7450c39016a1850ac34"><div class="ttname"><a href="calendar_8cpp.html#aa7b47331e571f7450c39016a1850ac34">sunrise_summer</a></div><div class="ttdeci">static constexpr int sunrise_summer</div><div class="ttdoc">Hour of sunrise at summer solstice.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00045">calendar.cpp:45</a></div></div>
<div class="ttc" id="aclasstime__duration_html_a20688ca0a8848ec0d73636ede90d27ad"><div class="ttname"><a href="classtime__duration.html#a20688ca0a8848ec0d73636ede90d27ad">time_duration::from_minutes</a></div><div class="ttdeci">static constexpr time_duration from_minutes(const T m)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00212">calendar.h:212</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="calendar_8h_source.html#l00212">time_duration::from_minutes()</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a3f1b0333a44fd5f611d3429887eba4a8">season</a>, <a class="el" href="calendar_8cpp_source.html#l00466">calendar::season_length()</a>, <a class="el" href="calendar_8cpp_source.html#l00547">season_of_year()</a>, <a class="el" href="calendar_8h_source.html#l00018">SPRING</a>, <a class="el" href="calendar_8cpp_source.html#l00048">sunrise_equinox</a>, <a class="el" href="calendar_8cpp_source.html#l00045">sunrise_summer</a>, <a class="el" href="calendar_8cpp_source.html#l00042">sunrise_winter</a>, and <a class="el" href="calendar_8h_source.html#l00497">time_past_midnight()</a>.</p>

<p class="reference">Referenced by <a class="el" href="calendar_8cpp_source.html#l00131">daylight_time()</a>, <a class="el" href="mongroup_8cpp_source.html#l00098">MonsterGroupManager::GetResultFromGroup()</a>, <a class="el" href="calendar_8cpp_source.html#l00163">is_dawn()</a>, <a class="el" href="calendar_8cpp_source.html#l00146">is_day()</a>, <a class="el" href="calendar_8cpp_source.html#l00137">is_night()</a>, and <a class="el" href="calendar_8cpp_source.html#l00199">sunlight()</a>.</p>

</div>
</div>
<a id="a4930c6084e3379ceb56259d33dee133e" name="a4930c6084e3379ceb56259d33dee133e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4930c6084e3379ceb56259d33dee133e">&#9670;&nbsp;</a></span>sunset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtime__point.html">time_point</a> sunset </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current sunset time based on the time of year. </p>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00106">106</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>{</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    <span class="keyword">static_assert</span>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_enumvalue" href="calendar_8h.html#a5ac915753729cd68b608506d3c63ad1ba74ce3137b26cdafc19bdb66d881971fa">SPRING</a> ) == 0,</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>                   <span class="stringliteral">&quot;Expected spring to be the first season.  If not, code below will use wrong index into array&quot;</span> );</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span> </div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;int, 4&gt; start_hours = { { <a class="code hl_variable" href="calendar_8cpp.html#a3b6297f1329bba12bcf4ad019e548699">sunset_equinox</a>, <a class="code hl_variable" href="calendar_8cpp.html#ae289f054ed82e4caeecc7ca04f7f48bf">sunset_summer</a>, <a class="code hl_variable" href="calendar_8cpp.html#a3b6297f1329bba12bcf4ad019e548699">sunset_equinox</a>, <a class="code hl_variable" href="calendar_8cpp.html#ab9fd6a52586f6912d69e4bb0b1232485">sunset_winter</a>, } };</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a3f1b0333a44fd5f611d3429887eba4a8">season</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( <a class="code hl_function" href="calendar_8cpp.html#a81656706da6c7486137ad8578c0f523e">season_of_year</a>( p ) );</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>    assert( season &lt; start_hours.size() );</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span> </div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> start_hour = start_hours[<a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a3f1b0333a44fd5f611d3429887eba4a8">season</a>];</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> end_hour = start_hours[( <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a3f1b0333a44fd5f611d3429887eba4a8">season</a> + 1 ) % 4];</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span> </div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> into_month = <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( day_of_season&lt;int&gt;( p ) ) / to_days&lt;int&gt;</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>                              ( <a class="code hl_function" href="namespacecalendar.html#aa61c940cc539463295afa98e7bf7d22b">calendar::season_length</a>() );</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> time = start_hour * ( 1.0 - into_month ) + end_hour * into_month;</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span> </div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__point.html">time_point</a> midnight = p - <a class="code hl_function" href="calendar_8h.html#aa8a2c3326ae8829cef1439aa327897c4">time_past_midnight</a>( p );</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>    <span class="keywordflow">return</span> midnight + <a class="code hl_function" href="classtime__duration.html#a20688ca0a8848ec0d73636ede90d27ad">time_duration::from_minutes</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( time * 60 ) );</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>}</div>
<div class="ttc" id="acalendar_8cpp_html_a3b6297f1329bba12bcf4ad019e548699"><div class="ttname"><a href="calendar_8cpp.html#a3b6297f1329bba12bcf4ad019e548699">sunset_equinox</a></div><div class="ttdeci">static constexpr int sunset_equinox</div><div class="ttdoc">Hour of sunset at fall and spring equinox.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00057">calendar.cpp:57</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_ab9fd6a52586f6912d69e4bb0b1232485"><div class="ttname"><a href="calendar_8cpp.html#ab9fd6a52586f6912d69e4bb0b1232485">sunset_winter</a></div><div class="ttdeci">static constexpr int sunset_winter</div><div class="ttdoc">Hour of sunset at winter solstice.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00051">calendar.cpp:51</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_ae289f054ed82e4caeecc7ca04f7f48bf"><div class="ttname"><a href="calendar_8cpp.html#ae289f054ed82e4caeecc7ca04f7f48bf">sunset_summer</a></div><div class="ttdeci">static constexpr int sunset_summer</div><div class="ttdoc">Hour of sunset at summer solstice.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00054">calendar.cpp:54</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="calendar_8h_source.html#l00212">time_duration::from_minutes()</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a3f1b0333a44fd5f611d3429887eba4a8">season</a>, <a class="el" href="calendar_8cpp_source.html#l00466">calendar::season_length()</a>, <a class="el" href="calendar_8cpp_source.html#l00547">season_of_year()</a>, <a class="el" href="calendar_8h_source.html#l00018">SPRING</a>, <a class="el" href="calendar_8cpp_source.html#l00057">sunset_equinox</a>, <a class="el" href="calendar_8cpp_source.html#l00054">sunset_summer</a>, <a class="el" href="calendar_8cpp_source.html#l00051">sunset_winter</a>, and <a class="el" href="calendar_8h_source.html#l00497">time_past_midnight()</a>.</p>

<p class="reference">Referenced by <a class="el" href="mongroup_8cpp_source.html#l00098">MonsterGroupManager::GetResultFromGroup()</a>, <a class="el" href="calendar_8cpp_source.html#l00146">is_day()</a>, <a class="el" href="calendar_8cpp_source.html#l00155">is_dusk()</a>, <a class="el" href="calendar_8cpp_source.html#l00137">is_night()</a>, <a class="el" href="calendar_8cpp_source.html#l00126">night_time()</a>, and <a class="el" href="calendar_8cpp_source.html#l00199">sunlight()</a>.</p>

</div>
</div>
<a id="aeb989652ea2bf7fd03b07a74fd30bd7a" name="aeb989652ea2bf7fd03b07a74fd30bd7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb989652ea2bf7fd03b07a74fd30bd7a">&#9670;&nbsp;</a></span>to_string() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string to_string </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__duration.html">time_duration</a> &amp;&#160;</td>
          <td class="paramname"><em>d</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a string showing a duration. </p>
<p >The string contains at most two numbers along with their units. E.g. 3661 seconds will return "1 hour and 1 minute" (the 1 additional second is clipped). An input of 3601 will return "1 hour" (the second is clipped again and the number of additional minutes would be 0 so it's skipped). </p>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00327">327</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>{</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>    <span class="keywordflow">if</span>( d &gt;= <a class="code hl_variable" href="namespacecalendar.html#a8805341f2154c0e7a8b656e77e1a4143">calendar::INDEFINITELY_LONG_DURATION</a> ) {</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;forever&quot;</span> );</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>    }</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span> </div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    <span class="keywordflow">if</span>( d &lt;= 1_minutes ) {</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="calendar_8cpp.html#a595c4d560d7152dceb681820e7e00882">to_string_clipped</a>( d );</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>    }</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span> </div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>    <a class="code hl_class" href="classtime__duration.html">time_duration</a> divider = 0_turns;</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>    <span class="keywordflow">if</span>( d &lt; 1_hours ) {</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>        divider = 1_minutes;</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( d &lt; 1_days ) {</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>        divider = 1_hours;</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( d &lt; 1_weeks ) {</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>        divider = 1_days;</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( d &lt; <a class="code hl_function" href="namespacecalendar.html#aa61c940cc539463295afa98e7bf7d22b">calendar::season_length</a>() || <a class="code hl_function" href="namespacecalendar.html#a18e011596e47842fc4d1ab7f84cbb7a1">calendar::eternal_season</a>() ) {</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>        divider = 1_weeks;</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( d &lt; <a class="code hl_function" href="namespacecalendar.html#a151f3184ac6460605cc4931707b08d8f">calendar::year_length</a>() ) {</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>        divider = <a class="code hl_function" href="namespacecalendar.html#aa61c940cc539463295afa98e7bf7d22b">calendar::season_length</a>();</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>        divider = <a class="code hl_function" href="namespacecalendar.html#a151f3184ac6460605cc4931707b08d8f">calendar::year_length</a>();</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>    }</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span> </div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>    <span class="keywordflow">if</span>( d % divider != 0_turns ) {</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>        <span class="comment">//~ %1$s - greater units of time (e.g. 3 hours), %2$s - lesser units of time (e.g. 11 minutes).</span></div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;%1$s and %2$s&quot;</span> ),</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>                              <a class="code hl_function" href="calendar_8cpp.html#a595c4d560d7152dceb681820e7e00882">to_string_clipped</a>( d ),</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>                              <a class="code hl_function" href="calendar_8cpp.html#a595c4d560d7152dceb681820e7e00882">to_string_clipped</a>( d % divider ) );</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>    }</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="calendar_8cpp.html#a595c4d560d7152dceb681820e7e00882">to_string_clipped</a>( d );</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>}</div>
<div class="ttc" id="acalendar_8cpp_html_a595c4d560d7152dceb681820e7e00882"><div class="ttname"><a href="calendar_8cpp.html#a595c4d560d7152dceb681820e7e00882">to_string_clipped</a></div><div class="ttdeci">static std::string to_string_clipped(const int num, const clipped_unit type, const clipped_align align)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00228">calendar.cpp:228</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a9b089d0b697443b096063219dab08ef5"><div class="ttname"><a href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a></div><div class="ttdeci">std::string string_format(std::string format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00418">string_formatter.h:418</a></div></div>
<div class="ttc" id="atranslations_8h_html_aa829053017e23ef22d44dccecba63a34"><div class="ttname"><a href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a></div><div class="ttdeci">#define _(msg)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00116">translations.h:116</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="calendar_8cpp_source.html#l00456">calendar::eternal_season()</a>, <a class="el" href="namespacecalendar.html#a8805341f2154c0e7a8b656e77e1a4143">calendar::INDEFINITELY_LONG_DURATION</a>, <a class="el" href="calendar_8cpp_source.html#l00466">calendar::season_length()</a>, <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>, <a class="el" href="calendar_8cpp_source.html#l00228">to_string_clipped()</a>, and <a class="el" href="calendar_8cpp_source.html#l00461">calendar::year_length()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02958">target_ui::action_switch_mode()</a>, <a class="el" href="memorial__logger_8cpp_source.html#l00096">memorial_logger::add()</a>, <a class="el" href="iuse_8cpp_source.html#l08388">iuse::autoclave()</a>, <a class="el" href="iexamine_8cpp_source.html#l02799">iexamine::autoclave_full()</a>, <a class="el" href="iexamine_8cpp_source.html#l04707">iexamine::autodoc()</a>, <a class="el" href="game__inventory_8cpp_source.html#l02060">bionic_sterilize_preset::bionic_sterilize_preset()</a>, <a class="el" href="bionics_8cpp_source.html#l01154">Character::burn_fuel()</a>, <a class="el" href="faction__camp_8cpp_source.html#l03643">camp_trip_description()</a>, <a class="el" href="cata__variant_8h_source.html#l00270">cata_variant::cata_variant()</a>, <a class="el" href="magic_8cpp_source.html#l01883">color_number()</a>, <a class="el" href="mission__companion_8cpp_source.html#l00208">talk_function::commune_carpentry()</a>, <a class="el" href="mission__companion_8cpp_source.html#l00297">talk_function::commune_forage()</a>, <a class="el" href="mission__companion_8cpp_source.html#l00189">talk_function::commune_menial()</a>, <a class="el" href="mission__companion_8cpp_source.html#l00319">talk_function::commune_refuge_caravan()</a>, <a class="el" href="morale_8cpp_source.html#l00841">player_morale::consistent_with()</a>, <a class="el" href="string__formatter_8h_source.html#l00145">cata::convert()</a>, <a class="el" href="faction__camp_8cpp_source.html#l03668">basecamp::craft_description()</a>, <a class="el" href="player__activity_8cpp_source.html#l00118">craft_progress_message()</a>, <a class="el" href="debug__menu_8cpp_source.html#l01325">debug_menu::debug()</a>, <a class="el" href="panels_8cpp_source.html#l00129">dex_string()</a>, <a class="el" href="units_8cpp_source.html#l00059">units::display()</a>, <a class="el" href="bionics__ui_8cpp_source.html#l00186">draw_bionics_titlebar()</a>, <a class="el" href="panels_8cpp_source.html#l01264">draw_char_narrow()</a>, <a class="el" href="panels_8cpp_source.html#l01305">draw_char_wide()</a>, <a class="el" href="panels_8cpp_source.html#l01651">draw_health_classic()</a>, <a class="el" href="panels_8cpp_source.html#l01953">draw_lighting_classic()</a>, <a class="el" href="panels_8cpp_source.html#l01102">draw_needs_compact()</a>, <a class="el" href="panels_8cpp_source.html#l01562">draw_sound_labels()</a>, <a class="el" href="panels_8cpp_source.html#l01575">draw_sound_narrow()</a>, <a class="el" href="magic_8cpp_source.html#l01630">spellcasting_callback::draw_spell_info()</a>, <a class="el" href="panels_8cpp_source.html#l00966">draw_stats()</a>, <a class="el" href="panels_8cpp_source.html#l01014">draw_stealth()</a>, <a class="el" href="panels_8cpp_source.html#l01077">draw_time()</a>, <a class="el" href="panels_8cpp_source.html#l02038">draw_time_classic()</a>, <a class="el" href="dump_8cpp_source.html#l00037">game::dump_stats()</a>, <a class="el" href="string__input__popup_8cpp_source.html#l00518">string_input_popup::edit()</a>, <a class="el" href="editmap_8cpp_source.html#l01379">editmap::edit_itm()</a>, <a class="el" href="magic_8cpp_source.html#l00838">spell::energy_cost_string()</a>, <a class="el" href="magic_8cpp_source.html#l00861">spell::energy_cur_string()</a>, <a class="el" href="monster_8cpp_source.html#l00677">monster::extended_description()</a>, <a class="el" href="basecamp_8cpp_source.html#l00072">base_camps::faction_encode_abs()</a>, <a class="el" href="faction__camp_8cpp_source.html#l03799">basecamp::farm_description()</a>, <a class="el" href="bionics_8cpp_source.html#l01355">Character::find_remote_fuel()</a>, <a class="el" href="iuse_8cpp_source.html#l07877">iuse::foodperson()</a>, <a class="el" href="consumption_8cpp_source.html#l01396">Character::fuel_bionic_with()</a>, <a class="el" href="mapgen_8cpp_source.html#l00105">map::generate()</a>, <a class="el" href="overmap_8cpp_source.html#l01638">overmap::generate_sub()</a>, <a class="el" href="json_8cpp_source.html#l01187">JsonIn::get_int()</a>, <a class="el" href="json_8cpp_source.html#l01229">JsonIn::get_int64()</a>, <a class="el" href="string__formatter_8h_source.html#l00265">cata::string_formatter::get_nth_arg_as()</a>, <a class="el" href="game__inventory_8cpp_source.html#l01833">bionic_install_preset::get_operation_duration()</a>, <a class="el" href="game__inventory_8cpp_source.html#l01932">bionic_install_surgeon_preset::get_operation_duration()</a>, <a class="el" href="game__inventory_8cpp_source.html#l02016">bionic_uninstall_preset::get_operation_duration()</a>, <a class="el" href="filesystem_8cpp_source.html#l00493">get_pid_string()</a>, <a class="el" href="construction_8cpp_source.html#l01710">construction::get_time_string()</a>, <a class="el" href="json_8cpp_source.html#l01215">JsonIn::get_uint()</a>, <a class="el" href="item__group_8cpp_source.html#l00632">get_unique_group_id()</a>, <a class="el" href="trait__group_8cpp_source.html#l00036">get_unique_trait_group_id()</a>, <a class="el" href="character_8cpp_source.html#l04520">Character::get_weight_string()</a>, <a class="el" href="faction__camp_8cpp_source.html#l03561">basecamp::give_equipment()</a>, <a class="el" href="bionics_8cpp_source.html#l01450">Character::heat_emission()</a>, <a class="el" href="fmtlib__format-inl_8h_source.html#l00253">system_error::init()</a>, <a class="el" href="panels_8cpp_source.html#l00144">int_string()</a>, <a class="el" href="faction__camp_8cpp_source.html#l01744">basecamp::job_assignment_ui()</a>, <a class="el" href="overmap__ui_8cpp_source.html#l00511">overmap_ui::map_notes_callback::key()</a>, <a class="el" href="mission__ui_8cpp_source.html#l00022">game::list_missions()</a>, <a class="el" href="item_8cpp_source.html#l00504">item::make_corpse()</a>, <a class="el" href="panels_8cpp_source.html#l00814">mana_stat()</a>, <a class="el" href="basecamp_8cpp_source.html#l00099">base_camps::max_upgrade_by_type()</a>, <a class="el" href="iexamine_8cpp_source.html#l05493">mill_load_food()</a>, <a class="el" href="iuse_8cpp_source.html#l03893">iuse::mininuke()</a>, <a class="el" href="magic_8cpp_source.html#l00200">moves_to_string()</a>, <a class="el" href="game__inventory_8cpp_source.html#l01493">game_menus::inv::multiwash()</a>, <a class="el" href="basecamp_8cpp_source.html#l00208">basecamp::om_upgrade_description()</a>, <a class="el" href="fmtlib__format-inl_8h_source.html#l02881">detail::stringifier::operator()()</a>, <a class="el" href="string__formatter_8h_source.html#l00358">cata::string_formatter::parse()</a>, <a class="el" href="monexamine_8cpp_source.html#l00405">monexamine::pay_bot()</a>, <a class="el" href="iexamine_8cpp_source.html#l04292">iexamine::pay_gas()</a>, <a class="el" href="panels_8cpp_source.html#l00159">per_string()</a>, <a class="el" href="iuse_8cpp_source.html#l07099">photo_def_for_camera_point()</a>, <a class="el" href="panels_8cpp_source.html#l00787">power_stat()</a>, <a class="el" href="melee_8cpp_source.html#l01320">print_damage_info()</a>, <a class="el" href="monster_8cpp_source.html#l00637">monster::print_info()</a>, <a class="el" href="panels_8cpp_source.html#l02077">print_mana()</a>, <a class="el" href="iexamine_8cpp_source.html#l00517">anonymous_namespace{iexamine.cpp}::atm_menu::prompt_for_amount()</a>, <a class="el" href="monexamine_8cpp_source.html#l00392">prompt_for_amount()</a>, <a class="el" href="iexamine_8cpp_source.html#l05608">iexamine::quern_examine()</a>, <a class="el" href="output_8cpp_source.html#l00718">query_int()</a>, <a class="el" href="iuse_8cpp_source.html#l08067">iuse::radiocontrol()</a>, <a class="el" href="avatar_8cpp_source.html#l00367">avatar::read()</a>, <a class="el" href="game__inventory_8cpp_source.html#l00969">read_inventory_preset::read_inventory_preset()</a>, <a class="el" href="magic__teleporter__list_8cpp_source.html#l00169">teleporter_callback::refresh()</a>, <a class="el" href="iexamine_8cpp_source.html#l03836">iexamine::reload_furniture()</a>, <a class="el" href="recipe_8cpp_source.html#l00505">required_skills_as_string()</a>, <a class="el" href="mission__companion_8cpp_source.html#l00147">talk_function::scavenger_patrol()</a>, <a class="el" href="mission__companion_8cpp_source.html#l00167">talk_function::scavenger_raid()</a>, <a class="el" href="crafting__gui_8cpp_source.html#l00161">select_crafting_recipe()</a>, <a class="el" href="npctalk_8cpp_source.html#l02023">talk_effect_fun_t::set_adjust_var()</a>, <a class="el" href="safemode__ui_8cpp_source.html#l00050">safemode::show()</a>, <a class="el" href="avatar_8cpp_source.html#l00652">skim_book_msg()</a>, <a class="el" href="iexamine_8cpp_source.html#l05385">smoker_load_food()</a>, <a class="el" href="iexamine_8cpp_source.html#l05775">iexamine::smoker_options()</a>, <a class="el" href="npc_8cpp_source.html#l00999">npc::start_read()</a>, <a class="el" href="savegame__json_8cpp_source.html#l00626">Character::store()</a>, <a class="el" href="panels_8cpp_source.html#l00114">str_string()</a>, <a class="el" href="text__style__check_8h_source.html#l00028">text_style_check()</a>, <a class="el" href="cata__variant_8h_source.html#l00178">cata_variant_detail::convert&lt; cata_variant_type::bool_ &gt;::to_string()</a>, <a class="el" href="cata__variant_8h_source.html#l00189">cata_variant_detail::convert&lt; cata_variant_type::character_id &gt;::to_string()</a>, <a class="el" href="cata__variant_8h_source.html#l00209">cata_variant_detail::convert&lt; cata_variant_type::int_ &gt;::to_string()</a>, <a class="el" href="tileray_8cpp_source.html#l00172">tileray::to_string_azimuth_from_north()</a>, <a class="el" href="achievement_8cpp_source.html#l00241">achievement::time_bound::ui_text()</a>, <a class="el" href="achievement_8cpp_source.html#l00434">achievement_state::ui_text()</a>, <a class="el" href="faction__camp_8cpp_source.html#l00495">update_time_fixed()</a>, <a class="el" href="faction__camp_8cpp_source.html#l00477">update_time_left()</a>, <a class="el" href="fmtlib__format-inl_8h_source.html#l02995">detail::vformat()</a>, <a class="el" href="fmtlib__printf_8h_source.html#l00699">vsprintf()</a>, <a class="el" href="handle__action_8cpp_source.html#l00861">wait()</a>, <a class="el" href="player_8cpp_source.html#l04165">player::weapname()</a>, and <a class="el" href="memorial__logger_8cpp_source.html#l00150">memorial_logger::write()</a>.</p>

</div>
</div>
<a id="ae2ab0c8a0e548cc45b1a3c21042b8bbc" name="ae2ab0c8a0e548cc45b1a3c21042b8bbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2ab0c8a0e548cc45b1a3c21042b8bbc">&#9670;&nbsp;</a></span>to_string() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string to_string </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The time point formatted to be shown to the player. Contains year, season, day and time of day. </dd></dl>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00568">568</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>{</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a84cdc76cabf41bd7c961f6ab12f117d8">year</a> = to_turns&lt;int&gt;( p - <a class="code hl_variable" href="namespacecalendar.html#a2ad145a605c70358e73fdd4a802ba21a">calendar::turn_zero</a> ) / to_turns&lt;int&gt;</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>                     ( <a class="code hl_function" href="namespacecalendar.html#a151f3184ac6460605cc4931707b08d8f">calendar::year_length</a>() ) + 1;</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>    <span class="keyword">const</span> std::string time = <a class="code hl_function" href="calendar_8cpp.html#a307340221160e8ffe2af4ddfe5e2a56e">to_string_time_of_day</a>( p );</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacecalendar.html#a18e011596e47842fc4d1ab7f84cbb7a1">calendar::eternal_season</a>() ) {</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a628b7db04235f228d40adc671413a8c8">day</a> = to_days&lt;int&gt;( <a class="code hl_function" href="calendar_8h.html#a1ff4d060fe2cd2f878a5593fe6bb96b7">time_past_new_year</a>( p ) );</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>        <span class="comment">//~ 1 is the year, 2 is the day (of the *year*), 3 is the time of the day in its usual format</span></div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Year %1$d, day %2$d %3$s&quot;</span> ), year, day, time );</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a628b7db04235f228d40adc671413a8c8">day</a> = day_of_season&lt;int&gt;( p ) + 1;</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>        <span class="comment">//~ 1 is the year, 2 is the season name, 3 is the day (of the season), 4 is the time of the day in its usual format</span></div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Year %1$d, %2$s, day %3$d %4$s&quot;</span> ), year,</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>                              <a class="code hl_function" href="namespacecalendar.html#a67a11ba36aa7fa53b90410e49d2d5b19">calendar::name_season</a>( <a class="code hl_function" href="calendar_8cpp.html#a81656706da6c7486137ad8578c0f523e">season_of_year</a>( p ) ), day, time );</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>    }</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>}</div>
<div class="ttc" id="acalendar_8cpp_html_a307340221160e8ffe2af4ddfe5e2a56e"><div class="ttname"><a href="calendar_8cpp.html#a307340221160e8ffe2af4ddfe5e2a56e">to_string_time_of_day</a></div><div class="ttdeci">std::string to_string_time_of_day(const time_point &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00400">calendar.cpp:400</a></div></div>
<div class="ttc" id="anamespacecalendar_html_a67a11ba36aa7fa53b90410e49d2d5b19"><div class="ttname"><a href="namespacecalendar.html#a67a11ba36aa7fa53b90410e49d2d5b19">calendar::name_season</a></div><div class="ttdeci">std::string name_season(season_type s)</div><div class="ttdoc">Returns the translated name of the season (with first letter being uppercase).</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00495">calendar.cpp:495</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a628b7db04235f228d40adc671413a8c8">day</a>, <a class="el" href="calendar_8cpp_source.html#l00456">calendar::eternal_season()</a>, <a class="el" href="calendar_8cpp_source.html#l00495">calendar::name_season()</a>, <a class="el" href="calendar_8cpp_source.html#l00547">season_of_year()</a>, <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>, <a class="el" href="calendar_8h_source.html#l00502">time_past_new_year()</a>, <a class="el" href="calendar_8cpp_source.html#l00400">to_string_time_of_day()</a>, <a class="el" href="calendar_8cpp_source.html#l00026">calendar::turn_zero</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a84cdc76cabf41bd7c961f6ab12f117d8">year</a>, and <a class="el" href="calendar_8cpp_source.html#l00461">calendar::year_length()</a>.</p>

</div>
</div>
<a id="a3cbd6a4aa555daec83ee03cc90dd7715" name="a3cbd6a4aa555daec83ee03cc90dd7715"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cbd6a4aa555daec83ee03cc90dd7715">&#9670;&nbsp;</a></span>to_string_approx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string to_string_approx </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__duration.html">time_duration</a> &amp;&#160;</td>
          <td class="paramname"><em>dur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>verbose</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns approximate duration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">verbose</td><td>If true, 'less than' and 'more than' will be printed instead of '&lt;' and '&gt;' respectively. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00361">361</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>{</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>    <a class="code hl_class" href="classtime__duration.html">time_duration</a> d = dur;</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>    <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code hl_function" href="submap_8cpp.html#a764d8e5a2a71dd56dafdd4c404573510">make_result</a> = [verbose]( <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> &amp; d, <span class="keyword">const</span> <span class="keywordtype">char</span> *verbose_str,</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *short_str ) {</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( verbose ? verbose_str : short_str, <a class="code hl_function" href="calendar_8cpp.html#a595c4d560d7152dceb681820e7e00882">to_string_clipped</a>( d ) );</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>    };</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span> </div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>    <a class="code hl_class" href="classtime__duration.html">time_duration</a> divider = 0_turns;</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>    <a class="code hl_class" href="classtime__duration.html">time_duration</a> vicinity = 0_turns;</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span> </div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>    <span class="comment">// Minutes and seconds can be estimated precisely.</span></div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>    <span class="keywordflow">if</span>( d &gt; 1_days ) {</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>        divider = 1_days;</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>        vicinity = 2_hours;</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( d &gt; 1_hours ) {</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>        divider = 1_hours;</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>        vicinity = 5_minutes;</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>    }</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span> </div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>    <span class="keywordflow">if</span>( divider != 0_turns ) {</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>        <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> remainder = d % divider;</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span> </div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>        <span class="keywordflow">if</span>( remainder &gt;= divider - vicinity ) {</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>            d += divider;</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( remainder &gt; vicinity ) {</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>            <span class="keywordflow">if</span>( remainder &lt; divider / 2 ) {</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>                <span class="comment">//~ %s - time (e.g. 2 hours).</span></div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="submap_8cpp.html#a764d8e5a2a71dd56dafdd4c404573510">make_result</a>( d, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;more than %s&quot;</span> ), <span class="stringliteral">&quot;&gt;%s&quot;</span> );</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>                <span class="comment">//~ %s - time (e.g. 2 hours).</span></div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="submap_8cpp.html#a764d8e5a2a71dd56dafdd4c404573510">make_result</a>( d + divider, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;less than %s&quot;</span> ), <span class="stringliteral">&quot;&lt;%s&quot;</span> );</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>            }</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>        }</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>    }</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>    <span class="comment">//~ %s - time (e.g. 2 hours).</span></div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="submap_8cpp.html#a764d8e5a2a71dd56dafdd4c404573510">make_result</a>( d, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;about %s&quot;</span> ), <span class="stringliteral">&quot;%s&quot;</span> );</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>}</div>
<div class="ttc" id="asubmap_8cpp_html_a764d8e5a2a71dd56dafdd4c404573510"><div class="ttname"><a href="submap_8cpp.html#a764d8e5a2a71dd56dafdd4c404573510">make_result</a></div><div class="ttdeci">static cosmetic_find_result make_result(bool b, int ndx)</div><div class="ttdef"><b>Definition:</b> <a href="submap_8cpp_source.html#l00065">submap.cpp:65</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="submap_8cpp_source.html#l00065">make_result()</a>, <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>, and <a class="el" href="calendar_8cpp_source.html#l00228">to_string_clipped()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item_8cpp_source.html#l03113">item::disassembly_info()</a>, <a class="el" href="npctalk_8cpp_source.html#l00894">dialogue::dynamic_line()</a>, <a class="el" href="veh__interact_8cpp_source.html#l00295">veh_interact::format_reqs()</a>, <a class="el" href="game_8cpp_source.html#l05673">get_fire_fuel_string()</a>, <a class="el" href="item_8cpp_source.html#l01119">get_freshness_description()</a>, <a class="el" href="game__inventory_8cpp_source.html#l00698">comestible_inventory_preset::get_time_left_rounded()</a>, <a class="el" href="mission__ui_8cpp_source.html#l00022">game::list_missions()</a>, <a class="el" href="player_8cpp_source.html#l02665">player::mend_item()</a>, and <a class="el" href="game__inventory_8cpp_source.html#l00969">read_inventory_preset::read_inventory_preset()</a>.</p>

</div>
</div>
<a id="a595c4d560d7152dceb681820e7e00882" name="a595c4d560d7152dceb681820e7e00882"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a595c4d560d7152dceb681820e7e00882">&#9670;&nbsp;</a></span>to_string_clipped() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::string to_string_clipped </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00">clipped_unit</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="calendar_8h.html#a2966e2ed60e1b292fb9f87bc519ece79">clipped_align</a>&#160;</td>
          <td class="paramname"><em>align</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00228">228</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>{</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>    <span class="keywordflow">switch</span>( <a class="code hl_namespace" href="namespacealign.html">align</a> ) {</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="calendar_8h.html#a2966e2ed60e1b292fb9f87bc519ece79a334c4a4c42fdb79d7ebc3e73b517e6f8">clipped_align::none</a>:</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>            <span class="keywordflow">switch</span>( <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a> ) {</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>                <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00ad7af994f1f1ef8b5e3beb9f7fb139f57">clipped_unit::forever</a>:</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>                    <span class="keywordflow">return</span> <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;forever&quot;</span> );</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00aa9f0e61a137d86aa9db53465e0801612">clipped_unit::second</a>:</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>                    <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;%d second&quot;</span>, <span class="stringliteral">&quot;%d seconds&quot;</span>, num ), num );</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a0a7d55be9d12a369a6a8da0fb517fba4">clipped_unit::minute</a>:</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>                    <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;%d minute&quot;</span>, <span class="stringliteral">&quot;%d minutes&quot;</span>, num ), num );</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a896c55cc5e46fab38ce9f51ebf7bfcd3">clipped_unit::hour</a>:</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>                    <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;%d hour&quot;</span>, <span class="stringliteral">&quot;%d hours&quot;</span>, num ), num );</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a628b7db04235f228d40adc671413a8c8">clipped_unit::day</a>:</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>                    <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;%d day&quot;</span>, <span class="stringliteral">&quot;%d days&quot;</span>, num ), num );</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a172a8327fcd3685ab3c0f740d031da09">clipped_unit::week</a>:</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>                    <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;%d week&quot;</span>, <span class="stringliteral">&quot;%d weeks&quot;</span>, num ), num );</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a3f1b0333a44fd5f611d3429887eba4a8">clipped_unit::season</a>:</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>                    <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;%d season&quot;</span>, <span class="stringliteral">&quot;%d seasons&quot;</span>, num ), num );</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a84cdc76cabf41bd7c961f6ab12f117d8">clipped_unit::year</a>:</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>                    <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;%d year&quot;</span>, <span class="stringliteral">&quot;%d years&quot;</span>, num ), num );</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>            }</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="calendar_8h.html#a2966e2ed60e1b292fb9f87bc519ece79a7c4f29407893c334a6cb7a87bf045c0d">clipped_align::right</a>:</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>            <span class="keywordflow">switch</span>( <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a> ) {</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>                <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00ad7af994f1f1ef8b5e3beb9f7fb139f57">clipped_unit::forever</a>:</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>                    <span class="comment">//~ Right-aligned time string. should right-align with other strings with this same comment</span></div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>                    <span class="keywordflow">return</span> <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;    forever&quot;</span> );</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00aa9f0e61a137d86aa9db53465e0801612">clipped_unit::second</a>:</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>                    <span class="comment">//~ Right-aligned time string. should right-align with other strings with this same comment</span></div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>                    <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;%3d  second&quot;</span>, <span class="stringliteral">&quot;%3d seconds&quot;</span>, num ), num );</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a0a7d55be9d12a369a6a8da0fb517fba4">clipped_unit::minute</a>:</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>                    <span class="comment">//~ Right-aligned time string. should right-align with other strings with this same comment</span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>                    <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;%3d  minute&quot;</span>, <span class="stringliteral">&quot;%3d minutes&quot;</span>, num ), num );</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a896c55cc5e46fab38ce9f51ebf7bfcd3">clipped_unit::hour</a>:</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>                    <span class="comment">//~ Right-aligned time string. should right-align with other strings with this same comment</span></div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>                    <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;%3d    hour&quot;</span>, <span class="stringliteral">&quot;%3d   hours&quot;</span>, num ), num );</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a628b7db04235f228d40adc671413a8c8">clipped_unit::day</a>:</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>                    <span class="comment">//~ Right-aligned time string. should right-align with other strings with this same comment</span></div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>                    <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;%3d     day&quot;</span>, <span class="stringliteral">&quot;%3d    days&quot;</span>, num ), num );</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a172a8327fcd3685ab3c0f740d031da09">clipped_unit::week</a>:</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>                    <span class="comment">//~ Right-aligned time string. should right-align with other strings with this same comment</span></div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>                    <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;%3d    week&quot;</span>, <span class="stringliteral">&quot;%3d   weeks&quot;</span>, num ), num );</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a3f1b0333a44fd5f611d3429887eba4a8">clipped_unit::season</a>:</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>                    <span class="comment">//~ Right-aligned time string. should right-align with other strings with this same comment</span></div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>                    <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;%3d  season&quot;</span>, <span class="stringliteral">&quot;%3d seasons&quot;</span>, num ), num );</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a84cdc76cabf41bd7c961f6ab12f117d8">clipped_unit::year</a>:</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>                    <span class="comment">//~ Right-aligned time string. should right-align with other strings with this same comment</span></div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>                    <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;%3d    year&quot;</span>, <span class="stringliteral">&quot;%3d   years&quot;</span>, num ), num );</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>            }</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>    }</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>}</div>
<div class="ttc" id="acalendar_8h_html_a2966e2ed60e1b292fb9f87bc519ece79a334c4a4c42fdb79d7ebc3e73b517e6f8"><div class="ttname"><a href="calendar_8h.html#a2966e2ed60e1b292fb9f87bc519ece79a334c4a4c42fdb79d7ebc3e73b517e6f8">clipped_align::none</a></div><div class="ttdeci">@ none</div></div>
<div class="ttc" id="acalendar_8h_html_a2966e2ed60e1b292fb9f87bc519ece79a7c4f29407893c334a6cb7a87bf045c0d"><div class="ttname"><a href="calendar_8h.html#a2966e2ed60e1b292fb9f87bc519ece79a7c4f29407893c334a6cb7a87bf045c0d">clipped_align::right</a></div><div class="ttdeci">@ right</div></div>
<div class="ttc" id="aenums_8h_html_ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab"><div class="ttname"><a href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a></div><div class="ttdeci">@ type</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00075">enums.h:75</a></div></div>
<div class="ttc" id="anamespacealign_html"><div class="ttname"><a href="namespacealign.html">align</a></div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__format_8h_source.html#l01354">fmtlib_format.h:1355</a></div></div>
<div class="ttc" id="atranslations_8cpp_html_a82b835742108b8d7f5f6a291b41e208e"><div class="ttname"><a href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a></div><div class="ttdeci">const char * vgettext(const char *msgid, const char *msgid_plural, size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8cpp_source.html#l00036">translations.cpp:36</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a628b7db04235f228d40adc671413a8c8">day</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00ad7af994f1f1ef8b5e3beb9f7fb139f57">forever</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a896c55cc5e46fab38ce9f51ebf7bfcd3">hour</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a0a7d55be9d12a369a6a8da0fb517fba4">minute</a>, <a class="el" href="calendar_8h.html#a2966e2ed60e1b292fb9f87bc519ece79a334c4a4c42fdb79d7ebc3e73b517e6f8">none</a>, <a class="el" href="dependency__tree_8h.html#a8935964c16c2e4cfade43a60a2659da9a0fc3cfbc27e91ea60a787de13dae3e3c">num</a>, <a class="el" href="calendar_8h.html#a2966e2ed60e1b292fb9f87bc519ece79a7c4f29407893c334a6cb7a87bf045c0d">right</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a3f1b0333a44fd5f611d3429887eba4a8">season</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00aa9f0e61a137d86aa9db53465e0801612">second</a>, <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>, <a class="el" href="enums_8h_source.html#l00075">type</a>, <a class="el" href="translations_8cpp_source.html#l00036">vgettext()</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a172a8327fcd3685ab3c0f740d031da09">week</a>, and <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a84cdc76cabf41bd7c961f6ab12f117d8">year</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l08386">add_disassemblables()</a>, <a class="el" href="game_8cpp_source.html#l08365">add_salvagables()</a>, <a class="el" href="game_8cpp_source.html#l08556">game::butcher()</a>, <a class="el" href="game_8cpp_source.html#l08407">butcher_submenu()</a>, <a class="el" href="game__inventory_8cpp_source.html#l00502">comestible_inventory_preset::comestible_inventory_preset()</a>, <a class="el" href="game__inventory_8cpp_source.html#l00447">disassemble_inventory_preset::disassemble_inventory_preset()</a>, <a class="el" href="item_8cpp_source.html#l03546">item::final_info()</a>, <a class="el" href="item_8cpp_source.html#l01654">item::food_info()</a>, <a class="el" href="messages_8cpp_source.html#l00477">Messages::dialog::init()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00398">vehicle::print_fuel_indicator()</a>, <a class="el" href="iexamine_8cpp_source.html#l05608">iexamine::quern_examine()</a>, <a class="el" href="game__inventory_8cpp_source.html#l01402">salvage_inventory_preset::salvage_inventory_preset()</a>, <a class="el" href="messages_8cpp_source.html#l00544">Messages::dialog::show()</a>, <a class="el" href="calendar_8cpp_source.html#l00327">to_string()</a>, <a class="el" href="calendar_8cpp_source.html#l00361">to_string_approx()</a>, and <a class="el" href="calendar_8cpp_source.html#l00320">to_string_clipped()</a>.</p>

</div>
</div>
<a id="a6dbbb36f2116679538e2d2898a0380de" name="a6dbbb36f2116679538e2d2898a0380de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dbbb36f2116679538e2d2898a0380de">&#9670;&nbsp;</a></span>to_string_clipped() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string to_string_clipped </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__duration.html">time_duration</a> &amp;&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="calendar_8h.html#a2966e2ed60e1b292fb9f87bc519ece79">clipped_align</a>&#160;</td>
          <td class="paramname"><em>align</em> = <code><a class="el" href="calendar_8h.html#a2966e2ed60e1b292fb9f87bc519ece79a334c4a4c42fdb79d7ebc3e73b517e6f8">clipped_align::none</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a string showing a duration as whole number of appropriate units, e.g. </p>
<p >"10 days" or "1 minute". The chosen unit will be the smallest unit, that is at least as much as the given duration. E.g. an input of 60 minutes will return "1 hour", an input of 59 minutes will return "59 minutes". </p>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00320">320</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>{</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>    <span class="keyword">const</span> std::pair&lt;int, clipped_unit&gt; time = <a class="code hl_function" href="calendar_8cpp.html#a9a9ae8a761db573b638118f7cf3b5993">clipped_time</a>( d );</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="calendar_8cpp.html#a595c4d560d7152dceb681820e7e00882">to_string_clipped</a>( time.first, time.second, <a class="code hl_namespace" href="namespacealign.html">align</a> );</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>}</div>
<div class="ttc" id="acalendar_8cpp_html_a9a9ae8a761db573b638118f7cf3b5993"><div class="ttname"><a href="calendar_8cpp.html#a9a9ae8a761db573b638118f7cf3b5993">clipped_time</a></div><div class="ttdeci">std::pair&lt; int, clipped_unit &gt; clipped_time(const time_duration &amp;d)</div><div class="ttdoc">Returns a value representing the passed in duration truncated to an appropriate unit along with the u...</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00284">calendar.cpp:284</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="calendar_8cpp_source.html#l00284">clipped_time()</a>, and <a class="el" href="calendar_8cpp_source.html#l00228">to_string_clipped()</a>.</p>

</div>
</div>
<a id="a307340221160e8ffe2af4ddfe5e2a56e" name="a307340221160e8ffe2af4ddfe5e2a56e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a307340221160e8ffe2af4ddfe5e2a56e">&#9670;&nbsp;</a></span>to_string_time_of_day()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string to_string_time_of_day </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The time point formatted to be shown to the player. Contains only the time of day, not the year, day or season. </dd></dl>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00400">400</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>{</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a896c55cc5e46fab38ce9f51ebf7bfcd3">hour</a> = hour_of_day&lt;int&gt;( p );</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a0a7d55be9d12a369a6a8da0fb517fba4">minute</a> = minute_of_hour&lt;int&gt;( p );</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00aa9f0e61a137d86aa9db53465e0801612">second</a> = ( to_seconds&lt;int&gt;( <a class="code hl_function" href="calendar_8h.html#aa8a2c3326ae8829cef1439aa327897c4">time_past_midnight</a>( p ) ) ) % 60;</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>    <span class="keyword">const</span> std::string format_type = get_option&lt;std::string&gt;( <span class="stringliteral">&quot;24_HOUR&quot;</span> );</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span> </div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>    <span class="keywordflow">if</span>( format_type == <span class="stringliteral">&quot;military&quot;</span> ) {</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <span class="stringliteral">&quot;%02d%02d.%02d&quot;</span>, hour, minute, second );</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( format_type == <span class="stringliteral">&quot;24h&quot;</span> ) {</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>        <span class="comment">//~ hour:minute (24hr time display)</span></div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;%02d:%02d:%02d&quot;</span> ), hour, minute, second );</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>        <span class="keywordtype">int</span> hour_param = <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a896c55cc5e46fab38ce9f51ebf7bfcd3">hour</a> % 12;</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>        <span class="keywordflow">if</span>( hour_param == 0 ) {</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>            hour_param = 12;</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>        }</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>        <span class="comment">// Padding is removed as necessary to prevent clipping with SAFE notification in wide sidebar mode</span></div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>        <span class="keyword">const</span> std::string padding = hour_param &lt; 10 ? <span class="stringliteral">&quot; &quot;</span> : <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>        <span class="keywordflow">if</span>( hour &lt; 12 ) {</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;%d:%02d:%02d%sAM&quot;</span> ), hour_param, minute, second, padding );</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;%d:%02d:%02d%sPM&quot;</span> ), hour_param, minute, second, padding );</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>        }</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>    }</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a896c55cc5e46fab38ce9f51ebf7bfcd3">hour</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a0a7d55be9d12a369a6a8da0fb517fba4">minute</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00aa9f0e61a137d86aa9db53465e0801612">second</a>, <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>, and <a class="el" href="calendar_8h_source.html#l00497">time_past_midnight()</a>.</p>

<p class="reference">Referenced by <a class="el" href="panels_8cpp_source.html#l01396">draw_loc_labels()</a>, <a class="el" href="panels_8cpp_source.html#l01077">draw_time()</a>, <a class="el" href="panels_8cpp_source.html#l02038">draw_time_classic()</a>, <a class="el" href="messages_8cpp_source.html#l00244">anonymous_namespace{messages.cpp}::messages_impl::recent_messages()</a>, <a class="el" href="advanced__inv_8cpp_source.html#l01044">advanced_inventory::redraw_sidebar()</a>, <a class="el" href="calendar_8cpp_source.html#l00568">to_string()</a>, <a class="el" href="handle__action_8cpp_source.html#l00861">wait()</a>, and <a class="el" href="weather_8cpp_source.html#l00611">weather_forecast()</a>.</p>

</div>
</div>
<a id="a359120c15f92d54a49fec9de7bcb571f" name="a359120c15f92d54a49fec9de7bcb571f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a359120c15f92d54a49fec9de7bcb571f">&#9670;&nbsp;</a></span>x_in_y()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool x_in_y </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__duration.html">time_duration</a> &amp;&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtime__duration.html">time_duration</a> &amp;&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section see"><dt>See also</dt><dd>x_in_y(int,int) </dd></dl>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00521">521</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>{</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>    <a class="code hl_function" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">return ::x_in_y</a>( to_turns&lt;int&gt;( <a class="code hl_variable" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> ), to_turns&lt;int&gt;( <a class="code hl_variable" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a> ) );</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>}</div>
<div class="ttc" id="acalendar_8cpp_html_a359120c15f92d54a49fec9de7bcb571f"><div class="ttname"><a href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a></div><div class="ttdeci">bool x_in_y(const time_duration &amp;a, const time_duration &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00521">calendar.cpp:521</a></div></div>
<div class="ttc" id="amagic_8cpp_html_a188caae18b60b66f9f44214c7e28ac1f"><div class="ttname"><a href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a></div><div class="ttdeci">constexpr double a</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01029">magic.cpp:1029</a></div></div>
<div class="ttc" id="amagic_8cpp_html_aa93a189fb7bbbf87be54bcc7bd11bb6f"><div class="ttname"><a href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a></div><div class="ttdeci">constexpr double b</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01030">magic.cpp:1030</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01029">a</a>, <a class="el" href="magic_8cpp_source.html#l01030">b</a>, and <a class="el" href="calendar_8cpp_source.html#l00521">x_in_y()</a>.</p>

<p class="reference">Referenced by <a class="el" href="effect_8cpp_source.html#l01108">effect::activated()</a>, <a class="el" href="game_8cpp_source.html#l12340">game::add_artifact_dreams()</a>, <a class="el" href="overmap_8cpp_source.html#l04759">overmap::add_mon_group()</a>, <a class="el" href="weather_8cpp_source.html#l00211">item::add_rain_to_container()</a>, <a class="el" href="addiction_8cpp_source.html#l00057">addict_effect()</a>, <a class="el" href="mapgen_8cpp_source.html#l01289">jmapgen_monster::apply()</a>, <a class="el" href="mapgen_8cpp_source.html#l01370">jmapgen_vehicle::apply()</a>, <a class="el" href="mapgen_8cpp_source.html#l01687">jmapgen_sealed_item::apply()</a>, <a class="el" href="projectile_8cpp_source.html#l00110">apply_ammo_effects()</a>, <a class="el" href="iuse_8cpp_source.html#l05982">iuse::bell()</a>, <a class="el" href="iuse_8cpp_source.html#l03485">iuse::can_goo()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l00463">check_butcher_cbm()</a>, <a class="el" href="character_8cpp_source.html#l01092">Character::check_mount_is_spooked()</a>, <a class="el" href="crafting_8cpp_source.html#l01007">complete_craft()</a>, <a class="el" href="character_8cpp_source.html#l07628">Character::cough()</a>, <a class="el" href="character_8cpp_source.html#l08437">Character::deal_damage()</a>, <a class="el" href="mapgen_8cpp_source.html#l02927">map::draw_office_tower()</a>, <a class="el" href="suffer_8cpp_source.html#l01755">Character::drench()</a>, <a class="el" href="player__hardcoded__effects_8cpp_source.html#l00125">eff_fun_fungus()</a>, <a class="el" href="player__hardcoded__effects_8cpp_source.html#l00217">eff_fun_hallu()</a>, <a class="el" href="player__hardcoded__effects_8cpp_source.html#l00116">eff_fun_spores()</a>, <a class="el" href="map__field_8cpp_source.html#l01924">map::emit_field()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l03741">heal_actor::finish_using()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03242">activity_handlers::fish_do_turn()</a>, <a class="el" href="fungal__effects_8cpp_source.html#l00065">fungal_effects::fungalize()</a>, <a class="el" href="iuse_8cpp_source.html#l00653">iuse::fungicide()</a>, <a class="el" href="mapgen_8cpp_source.html#l00105">map::generate()</a>, <a class="el" href="cellular__automata_8h_source.html#l00057">CellularAutomata::generate_cellular_automaton()</a>, <a class="el" href="crafting_8cpp_source.html#l00918">item::handle_craft_failure()</a>, <a class="el" href="ranged_8cpp_source.html#l00589">player::handle_gun_damage()</a>, <a class="el" href="player__hardcoded__effects_8cpp_source.html#l00464">player::hardcoded_effects()</a>, <a class="el" href="player_8cpp_source.html#l01169">player::impact()</a>, <a class="el" href="monster_8cpp_source.html#l01375">monster::melee_attack()</a>, <a class="el" href="melee_8cpp_source.html#l01764">Character::melee_special_effects()</a>, <a class="el" href="monmove_8cpp_source.html#l00632">monster::move()</a>, <a class="el" href="monster_8cpp_source.html#l01661">monster::move_effects()</a>, <a class="el" href="melee_8cpp_source.html#l01906">Character::mutation_attacks()</a>, <a class="el" href="faction__camp_8cpp_source.html#l03133">om_harvest_furn()</a>, <a class="el" href="faction__camp_8cpp_source.html#l03269">om_harvest_itm()</a>, <a class="el" href="faction__camp_8cpp_source.html#l03176">om_harvest_ter()</a>, <a class="el" href="mattack__actors_8cpp_source.html#l00328">melee_actor::on_damage()</a>, <a class="el" href="character_8cpp_source.html#l04479">Character::on_damage_of_type()</a>, <a class="el" href="monster_8cpp_source.html#l02868">monster::on_damage_of_type()</a>, <a class="el" href="npc__class_8cpp_source.html#l00420">distribution::one_in()</a>, <a class="el" href="player_8cpp_source.html#l00756">player::pause()</a>, <a class="el" href="game_8cpp_source.html#l11565">game::perhaps_add_random_npc()</a>, <a class="el" href="iuse_8cpp_source.html#l01550">petfood()</a>, <a class="el" href="game_8cpp_source.html#l09629">game::place_player()</a>, <a class="el" href="vehicle_8cpp_source.html#l05295">vehicle::place_spawn_items()</a>, <a class="el" href="overmap_8cpp_source.html#l04426">overmap::place_specials()</a>, <a class="el" href="map__field_8cpp_source.html#l01220">map::player_in_field()</a>, <a class="el" href="vehicle_8cpp_source.html#l04619">vehicle::power_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l01217">vehicle::power_to_energy_bat()</a>, <a class="el" href="item_8cpp_source.html#l09302">item::process_tool()</a>, <a class="el" href="npc_8cpp_source.html#l02798">npc::process_turn()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l01972">activity_handlers::pulp_do_turn()</a>, <a class="el" href="map_8cpp_source.html#l07172">map::rad_scorch()</a>, <a class="el" href="melee_8cpp_source.html#l00622">player::reach_attack()</a>, <a class="el" href="inventory_8cpp_source.html#l00748">inventory::remove_randomly_by_volume()</a>, <a class="el" href="monattack_8cpp_source.html#l00934">mattack::resurrect()</a>, <a class="el" href="character_8cpp_source.html#l08818">Character::rooted()</a>, <a class="el" href="map_8cpp_source.html#l03718">map::shoot()</a>, <a class="el" href="map_8cpp_source.html#l02992">map::smash_items()</a>, <a class="el" href="iuse_8cpp_source.html#l01236">spawn_spores()</a>, <a class="el" href="fungal__effects_8cpp_source.html#l00139">fungal_effects::spread_fungus_one_tile()</a>, <a class="el" href="map__field_8cpp_source.html#l00249">map::spread_gas()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00918">vehicle::start_engine()</a>, <a class="el" href="suffer_8cpp_source.html#l00941">Character::suffer_from_other_mutations()</a>, <a class="el" href="suffer_8cpp_source.html#l01049">Character::suffer_from_radiation()</a>, <a class="el" href="suffer_8cpp_source.html#l00806">Character::suffer_from_sunburn()</a>, <a class="el" href="suffer_8cpp_source.html#l00714">Character::suffer_in_sunlight()</a>, <a class="el" href="mutation_8cpp_source.html#l01605">test_crossing_threshold()</a>, <a class="el" href="character_8cpp_source.html#l01342">try_remove_bear_trap()</a>, <a class="el" href="character_8cpp_source.html#l01435">try_remove_crushed()</a>, <a class="el" href="character_8cpp_source.html#l01405">try_remove_heavysnare()</a>, <a class="el" href="character_8cpp_source.html#l01377">try_remove_lightsnare()</a>, <a class="el" href="character_8cpp_source.html#l01504">try_remove_webs()</a>, <a class="el" href="player_8cpp_source.html#l01711">player::update_body_wetness()</a>, <a class="el" href="scenario_8cpp_source.html#l00107">scenario::weighted_random()</a>, <a class="el" href="scenario_8cpp_source.html#l00367">scenario::weighted_random_profession()</a>, and <a class="el" href="calendar_8cpp_source.html#l00521">x_in_y()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ae89780c7957fdf646b9e3c7f8d8c6cfe" name="ae89780c7957fdf646b9e3c7f8d8c6cfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae89780c7957fdf646b9e3c7f8d8c6cfe">&#9670;&nbsp;</a></span>cur_season_length</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int cur_season_length = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00023">23</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="calendar_8cpp_source.html#l00466">calendar::season_length()</a>, and <a class="el" href="calendar_8cpp_source.html#l00478">calendar::set_season_length()</a>.</p>

</div>
</div>
<a id="a41c70b303ede8b309874e15a1a547ee5" name="a41c70b303ede8b309874e15a1a547ee5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41c70b303ede8b309874e15a1a547ee5">&#9670;&nbsp;</a></span>default_season_length</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr int default_season_length = 14</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00483">483</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="calendar_8cpp_source.html#l00485">calendar::season_ratio()</a>.</p>

</div>
</div>
<a id="aec47826445a332667774d86f72ce8f7b" name="aec47826445a332667774d86f72ce8f7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec47826445a332667774d86f72ce8f7b">&#9670;&nbsp;</a></span>moonlight_per_quarter</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr double moonlight_per_quarter = 2.25</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>How much light moon provides per lit-up quarter (Full-moon light is four times this value) </p>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00017">17</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="calendar_8cpp_source.html#l00199">sunlight()</a>.</p>

</div>
</div>
<a id="a5ca55217f1b65aebfbcd03c3d5db28b2" name="a5ca55217f1b65aebfbcd03c3d5db28b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ca55217f1b65aebfbcd03c3d5db28b2">&#9670;&nbsp;</a></span>sunrise_equinox</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr int sunrise_equinox = ( <a class="el" href="calendar_8cpp.html#aa7b47331e571f7450c39016a1850ac34">sunrise_summer</a> + <a class="el" href="calendar_8cpp.html#a71f093b6c6124bff85dbbcaae3543979">sunrise_winter</a> ) / 2</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Hour of sunrise at fall and spring equinox. </p>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00048">48</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="calendar_8cpp_source.html#l00086">sunrise()</a>.</p>

</div>
</div>
<a id="aa7b47331e571f7450c39016a1850ac34" name="aa7b47331e571f7450c39016a1850ac34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7b47331e571f7450c39016a1850ac34">&#9670;&nbsp;</a></span>sunrise_summer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr int sunrise_summer = 5</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Hour of sunrise at summer solstice. </p>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00045">45</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="calendar_8cpp_source.html#l00086">sunrise()</a>.</p>

</div>
</div>
<a id="a71f093b6c6124bff85dbbcaae3543979" name="a71f093b6c6124bff85dbbcaae3543979"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71f093b6c6124bff85dbbcaae3543979">&#9670;&nbsp;</a></span>sunrise_winter</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr int sunrise_winter = 7</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Hour of sunrise at winter solstice. </p>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00042">42</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="calendar_8cpp_source.html#l00086">sunrise()</a>.</p>

</div>
</div>
<a id="a3b6297f1329bba12bcf4ad019e548699" name="a3b6297f1329bba12bcf4ad019e548699"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b6297f1329bba12bcf4ad019e548699">&#9670;&nbsp;</a></span>sunset_equinox</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr int sunset_equinox = ( <a class="el" href="calendar_8cpp.html#ae289f054ed82e4caeecc7ca04f7f48bf">sunset_summer</a> + <a class="el" href="calendar_8cpp.html#ab9fd6a52586f6912d69e4bb0b1232485">sunset_winter</a> ) / 2</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Hour of sunset at fall and spring equinox. </p>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00057">57</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="calendar_8cpp_source.html#l00106">sunset()</a>.</p>

</div>
</div>
<a id="ae289f054ed82e4caeecc7ca04f7f48bf" name="ae289f054ed82e4caeecc7ca04f7f48bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae289f054ed82e4caeecc7ca04f7f48bf">&#9670;&nbsp;</a></span>sunset_summer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr int sunset_summer = 21</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Hour of sunset at summer solstice. </p>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00054">54</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="calendar_8cpp_source.html#l00106">sunset()</a>.</p>

</div>
</div>
<a id="ab9fd6a52586f6912d69e4bb0b1232485" name="ab9fd6a52586f6912d69e4bb0b1232485"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9fd6a52586f6912d69e4bb0b1232485">&#9670;&nbsp;</a></span>sunset_winter</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr int sunset_winter = 17</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Hour of sunset at winter solstice. </p>

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00051">51</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="calendar_8cpp_source.html#l00106">sunset()</a>.</p>

</div>
</div>
<a id="a53dee894346dba396b94c4cfe558322c" name="a53dee894346dba396b94c4cfe558322c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53dee894346dba396b94c4cfe558322c">&#9670;&nbsp;</a></span>twilight_duration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classtime__duration.html">time_duration</a> twilight_duration = 1_hours</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="calendar_8cpp_source.html#l00060">60</a> of file <a class="el" href="calendar_8cpp_source.html">calendar.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="calendar_8cpp_source.html#l00163">is_dawn()</a>, <a class="el" href="calendar_8cpp_source.html#l00146">is_day()</a>, <a class="el" href="calendar_8cpp_source.html#l00155">is_dusk()</a>, <a class="el" href="calendar_8cpp_source.html#l00137">is_night()</a>, <a class="el" href="calendar_8cpp_source.html#l00126">night_time()</a>, and <a class="el" href="calendar_8cpp_source.html#l00199">sunlight()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="calendar_8cpp.html">calendar.cpp</a></li>
    <li class="footer">Generated on Sat Nov 12 2022 15:15:35 for Cataclysm BN by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
