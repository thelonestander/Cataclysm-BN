<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm BN: crafting Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm BN
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('namespacecrafting.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">crafting Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5844edf7e04b20037d08a1215cf62236"><td class="memItemLeft" align="right" valign="top">static std::vector&lt; <a class="el" href="structavail__tool__comp.html">avail_tool_comp</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecrafting.html#a5844edf7e04b20037d08a1215cf62236">find_tool_component</a> (const <a class="el" href="classCharacter.html">Character</a> *player_with_inv, const std::vector&lt; <a class="el" href="structtool__comp.html">tool_comp</a> &gt; &amp;tools, int batch, const <a class="el" href="classinventory.html">inventory</a> &amp;map_inv, <a class="el" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131">cost_adjustment</a> charge_mod)</td></tr>
<tr class="separator:a5844edf7e04b20037d08a1215cf62236"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4dc51f886647b644d25e4e7d45de094"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structcomp__selection.html">comp_selection</a>&lt; <a class="el" href="structtool__comp.html">tool_comp</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecrafting.html#af4dc51f886647b644d25e4e7d45de094">query_tool_selection</a> (const std::vector&lt; <a class="el" href="structavail__tool__comp.html">avail_tool_comp</a> &gt; &amp;available_tools, const std::string &amp;hotkeys, bool can_cancel, bool is_npc)</td></tr>
<tr class="separator:af4dc51f886647b644d25e4e7d45de094"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07496c9e8d995433ae9debe590894c3e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcomp__selection.html">comp_selection</a>&lt; <a class="el" href="structtool__comp.html">tool_comp</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecrafting.html#a07496c9e8d995433ae9debe590894c3e">select_tool_component</a> (const std::vector&lt; <a class="el" href="structtool__comp.html">tool_comp</a> &gt; &amp;tools, int batch, const <a class="el" href="classinventory.html">inventory</a> &amp;map_inv, const <a class="el" href="classCharacter.html">Character</a> *player_with_inv, bool can_cancel, const std::string &amp;hotkeys, <a class="el" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131">cost_adjustment</a> adjustment)</td></tr>
<tr class="memdesc:a07496c9e8d995433ae9debe590894c3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns selected tool component that matches one of the expected ones.  <a href="namespacecrafting.html#a07496c9e8d995433ae9debe590894c3e">More...</a><br /></td></tr>
<tr class="separator:a07496c9e8d995433ae9debe590894c3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a942e117de7c377ddfab0cb29c6584aca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcomp__selection.html">comp_selection</a>&lt; <a class="el" href="structtool__comp.html">tool_comp</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecrafting.html#a942e117de7c377ddfab0cb29c6584aca">select_tool_component</a> (const std::vector&lt; <a class="el" href="structtool__comp.html">tool_comp</a> &gt; &amp;tools, int batch, const <a class="el" href="classinventory.html">inventory</a> &amp;map_inv, const <a class="el" href="classCharacter.html">Character</a> *player_with_inv, bool can_cancel)</td></tr>
<tr class="separator:a942e117de7c377ddfab0cb29c6584aca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d310e1d954941b884e3806116ae6f7b"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecrafting.html#a0d310e1d954941b884e3806116ae6f7b">get_books_for_recipe</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;<a class="el" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>, const <a class="el" href="classinventory.html">inventory</a> &amp;crafting_inv, const <a class="el" href="classrecipe.html">recipe</a> *r)</td></tr>
<tr class="memdesc:a0d310e1d954941b884e3806116ae6f7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the set of book types in crafting_inv that provide the given recipe.  <a href="namespacecrafting.html#a0d310e1d954941b884e3806116ae6f7b">More...</a><br /></td></tr>
<tr class="separator:a0d310e1d954941b884e3806116ae6f7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22e3c95d08749d4a4a07b9aaf64db9e8"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecrafting.html#a22e3c95d08749d4a4a07b9aaf64db9e8">get_books_for_recipe</a> (const <a class="el" href="classrecipe.html">recipe</a> *r)</td></tr>
<tr class="memdesc:a22e3c95d08749d4a4a07b9aaf64db9e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the set of book types that provide the given recipe.  <a href="namespacecrafting.html#a22e3c95d08749d4a4a07b9aaf64db9e8">More...</a><br /></td></tr>
<tr class="separator:a22e3c95d08749d4a4a07b9aaf64db9e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66f83eefe72e71cf1a8831fde5afe0aa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecrafting.html#a66f83eefe72e71cf1a8831fde5afe0aa">charges_for_complete</a> (int full_charges)</td></tr>
<tr class="separator:a66f83eefe72e71cf1a8831fde5afe0aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bd0760f7e4a7e545662d263469fb277"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecrafting.html#a6bd0760f7e4a7e545662d263469fb277">charges_for_starting</a> (int full_charges)</td></tr>
<tr class="separator:a6bd0760f7e4a7e545662d263469fb277"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a653e8b3027cf7e8256c46600bdea2697"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecrafting.html#a653e8b3027cf7e8256c46600bdea2697">charges_for_continuing</a> (int full_charges)</td></tr>
<tr class="separator:a653e8b3027cf7e8256c46600bdea2697"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a66f83eefe72e71cf1a8831fde5afe0aa" name="a66f83eefe72e71cf1a8831fde5afe0aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66f83eefe72e71cf1a8831fde5afe0aa">&#9670;&nbsp;</a></span>charges_for_complete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crafting::charges_for_complete </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>full_charges</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="crafting_8cpp_source.html#l02435">2435</a> of file <a class="el" href="crafting_8cpp_source.html">crafting.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02436" name="l02436"></a><span class="lineno"> 2436</span>{</div>
<div class="line"><a id="l02437" name="l02437"></a><span class="lineno"> 2437</span>    <span class="keywordflow">return</span> full_charges;</div>
<div class="line"><a id="l02438" name="l02438"></a><span class="lineno"> 2438</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="crafting_8cpp_source.html#l01573">find_tool_component()</a>.</p>

</div>
</div>
<a id="a653e8b3027cf7e8256c46600bdea2697" name="a653e8b3027cf7e8256c46600bdea2697"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a653e8b3027cf7e8256c46600bdea2697">&#9670;&nbsp;</a></span>charges_for_continuing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crafting::charges_for_continuing </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>full_charges</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="crafting_8cpp_source.html#l02443">2443</a> of file <a class="el" href="crafting_8cpp_source.html">crafting.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02444" name="l02444"></a><span class="lineno"> 2444</span>{</div>
<div class="line"><a id="l02445" name="l02445"></a><span class="lineno"> 2445</span>    <span class="keywordflow">return</span> full_charges / 20;</div>
<div class="line"><a id="l02446" name="l02446"></a><span class="lineno"> 2446</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="crafting_8cpp_source.html#l01147">player::can_continue_craft()</a>, <a class="el" href="crafting_8cpp_source.html#l01730">player::craft_consume_tools()</a>, <a class="el" href="crafting_8cpp_source.html#l01573">find_tool_component()</a>, and <a class="el" href="requirements_8cpp_source.html#l00771">tool_comp::has()</a>.</p>

</div>
</div>
<a id="a6bd0760f7e4a7e545662d263469fb277" name="a6bd0760f7e4a7e545662d263469fb277"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bd0760f7e4a7e545662d263469fb277">&#9670;&nbsp;</a></span>charges_for_starting()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crafting::charges_for_starting </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>full_charges</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="crafting_8cpp_source.html#l02439">2439</a> of file <a class="el" href="crafting_8cpp_source.html">crafting.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02440" name="l02440"></a><span class="lineno"> 2440</span>{</div>
<div class="line"><a id="l02441" name="l02441"></a><span class="lineno"> 2441</span>    <span class="keywordflow">return</span> full_charges / 20 + full_charges % 20;</div>
<div class="line"><a id="l02442" name="l02442"></a><span class="lineno"> 2442</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="crafting_8cpp_source.html#l01730">player::craft_consume_tools()</a>, <a class="el" href="crafting_8cpp_source.html#l01573">find_tool_component()</a>, and <a class="el" href="requirements_8cpp_source.html#l00771">tool_comp::has()</a>.</p>

</div>
</div>
<a id="a5844edf7e04b20037d08a1215cf62236" name="a5844edf7e04b20037d08a1215cf62236"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5844edf7e04b20037d08a1215cf62236">&#9670;&nbsp;</a></span>find_tool_component()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::vector&lt; <a class="el" href="structavail__tool__comp.html">avail_tool_comp</a> &gt; crafting::find_tool_component </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>player_with_inv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="structtool__comp.html">tool_comp</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>tools</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classinventory.html">inventory</a> &amp;&#160;</td>
          <td class="paramname"><em>map_inv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131">cost_adjustment</a>&#160;</td>
          <td class="paramname"><em>charge_mod</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="crafting_8cpp_source.html#l01573">1573</a> of file <a class="el" href="crafting_8cpp_source.html">crafting.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01576" name="l01576"></a><span class="lineno"> 1576</span>{</div>
<div class="line"><a id="l01577" name="l01577"></a><span class="lineno"> 1577</span>    std::vector&lt;avail_tool_comp&gt; available_tools;</div>
<div class="line"><a id="l01578" name="l01578"></a><span class="lineno"> 1578</span> </div>
<div class="line"><a id="l01579" name="l01579"></a><span class="lineno"> 1579</span>    <span class="keyword">auto</span> calc_charges = [&amp;]( <span class="keyword">const</span> <a class="code hl_struct" href="structtool__comp.html">tool_comp</a> &amp; t ) {</div>
<div class="line"><a id="l01580" name="l01580"></a><span class="lineno"> 1580</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> full_craft_charges = std::max( 1, t.count * batch );</div>
<div class="line"><a id="l01581" name="l01581"></a><span class="lineno"> 1581</span>        <span class="keywordflow">switch</span>( charge_mod ) {</div>
<div class="line"><a id="l01582" name="l01582"></a><span class="lineno"> 1582</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131a334c4a4c42fdb79d7ebc3e73b517e6f8">cost_adjustment::none</a>:</div>
<div class="line"><a id="l01583" name="l01583"></a><span class="lineno"> 1583</span>                <span class="keywordflow">return</span> std::make_pair( <a class="code hl_function" href="namespacecrafting.html#a66f83eefe72e71cf1a8831fde5afe0aa">charges_for_complete</a>( full_craft_charges ),</div>
<div class="line"><a id="l01584" name="l01584"></a><span class="lineno"> 1584</span>                                       <a class="code hl_function" href="namespacecrafting.html#a66f83eefe72e71cf1a8831fde5afe0aa">charges_for_complete</a>( full_craft_charges ) );</div>
<div class="line"><a id="l01585" name="l01585"></a><span class="lineno"> 1585</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131ac09b0863169aa4c63d88adf3644aef93">cost_adjustment::start_only</a>:</div>
<div class="line"><a id="l01586" name="l01586"></a><span class="lineno"> 1586</span>                <span class="keywordflow">return</span> std::make_pair( <a class="code hl_function" href="namespacecrafting.html#a6bd0760f7e4a7e545662d263469fb277">charges_for_starting</a>( full_craft_charges ),</div>
<div class="line"><a id="l01587" name="l01587"></a><span class="lineno"> 1587</span>                                       <a class="code hl_function" href="namespacecrafting.html#a66f83eefe72e71cf1a8831fde5afe0aa">charges_for_complete</a>( full_craft_charges ) );</div>
<div class="line"><a id="l01588" name="l01588"></a><span class="lineno"> 1588</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131abe578bdd9326ee6b1aa8d5672dd4c64f">cost_adjustment::continue_only</a>:</div>
<div class="line"><a id="l01589" name="l01589"></a><span class="lineno"> 1589</span>                <span class="keywordflow">return</span> std::make_pair( <a class="code hl_function" href="namespacecrafting.html#a653e8b3027cf7e8256c46600bdea2697">charges_for_continuing</a>( full_craft_charges ),</div>
<div class="line"><a id="l01590" name="l01590"></a><span class="lineno"> 1590</span>                                       <a class="code hl_function" href="namespacecrafting.html#a66f83eefe72e71cf1a8831fde5afe0aa">charges_for_complete</a>( full_craft_charges ) );</div>
<div class="line"><a id="l01591" name="l01591"></a><span class="lineno"> 1591</span>        }</div>
<div class="line"><a id="l01592" name="l01592"></a><span class="lineno"> 1592</span> </div>
<div class="line"><a id="l01593" name="l01593"></a><span class="lineno"> 1593</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Invalid tool_charge_mod&quot;</span> );</div>
<div class="line"><a id="l01594" name="l01594"></a><span class="lineno"> 1594</span>        <span class="keywordflow">return</span> std::make_pair( INT_MAX, INT_MAX );</div>
<div class="line"><a id="l01595" name="l01595"></a><span class="lineno"> 1595</span>    };</div>
<div class="line"><a id="l01596" name="l01596"></a><span class="lineno"> 1596</span> </div>
<div class="line"><a id="l01597" name="l01597"></a><span class="lineno"> 1597</span>    <span class="keywordtype">bool</span> found_nocharge = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01598" name="l01598"></a><span class="lineno"> 1598</span>    <span class="comment">// Use charges of any tools that require charges used</span></div>
<div class="line"><a id="l01599" name="l01599"></a><span class="lineno"> 1599</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> it = tools.begin(); it != tools.end() &amp;&amp; !found_nocharge; ++it ) {</div>
<div class="line"><a id="l01600" name="l01600"></a><span class="lineno"> 1600</span>        <a class="code hl_class" href="classstring__id.html">itype_id</a> <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a> = it-&gt;type;</div>
<div class="line"><a id="l01601" name="l01601"></a><span class="lineno"> 1601</span>        <span class="keywordflow">if</span>( it-&gt;count &gt; 0 ) {</div>
<div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span>            <span class="keyword">const</span> std::pair&lt;int, int&gt; &amp;expected_count = calc_charges( *it );</div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> = expected_count.first;</div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> ideal = expected_count.second;</div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span>            <span class="keywordflow">if</span>( player_with_inv ) {</div>
<div class="line"><a id="l01606" name="l01606"></a><span class="lineno"> 1606</span>                <span class="keywordflow">if</span>( player_with_inv-&gt;<a class="code hl_function" href="classCharacter.html#a9bff3208a5e121c4e3a71b81b378e4e7">has_charges</a>( <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a>, <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> ) ) {</div>
<div class="line"><a id="l01607" name="l01607"></a><span class="lineno"> 1607</span>                    <span class="keywordtype">int</span> total_charges = player_with_inv-&gt;<a class="code hl_function" href="classvisitable.html#a517e20b6f6c13b8316d5cce8e310b871">charges_of</a>( <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a> );</div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span>                    <a class="code hl_struct" href="structcomp__selection.html">comp_selection&lt;tool_comp&gt;</a> sel( <a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726a3d96eab6e691ab4aea5cdad7a15dd08f">use_from_player</a>, *it );</div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"> 1609</span>                    available_tools.emplace_back( sel, total_charges, ideal );</div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span>                }</div>
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"> 1611</span>            }</div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span>            <span class="keywordflow">if</span>( map_inv.<a class="code hl_function" href="classinventory.html#a166c107e18ca4eea3ca2f37be350796c">has_charges</a>( <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a>, <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> ) ) {</div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span>                <span class="keywordtype">int</span> total_charges = map_inv.<a class="code hl_function" href="classvisitable.html#a517e20b6f6c13b8316d5cce8e310b871">charges_of</a>( <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a> );</div>
<div class="line"><a id="l01614" name="l01614"></a><span class="lineno"> 1614</span>                <a class="code hl_struct" href="structcomp__selection.html">comp_selection&lt;tool_comp&gt;</a> sel( <a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726ae0cfa7503d9e51c0f908fe4f210a56cb">use_from_map</a>, *it );</div>
<div class="line"><a id="l01615" name="l01615"></a><span class="lineno"> 1615</span>                available_tools.emplace_back( sel, total_charges, ideal );</div>
<div class="line"><a id="l01616" name="l01616"></a><span class="lineno"> 1616</span>            }</div>
<div class="line"><a id="l01617" name="l01617"></a><span class="lineno"> 1617</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ( player_with_inv &amp;&amp; player_with_inv-&gt;<a class="code hl_function" href="classvisitable.html#ac50bc4422d4636a70a97d41787f22d0d">has_amount</a>( <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a>, 1 ) )</div>
<div class="line"><a id="l01618" name="l01618"></a><span class="lineno"> 1618</span>                   || map_inv.<a class="code hl_function" href="classinventory.html#a20755b405c4369fe85313cfdee366bff">has_tools</a>( <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a>, 1 ) ) {</div>
<div class="line"><a id="l01619" name="l01619"></a><span class="lineno"> 1619</span>            <a class="code hl_struct" href="structcomp__selection.html">comp_selection&lt;tool_comp&gt;</a> sel( <a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726a87a06975828a650a938662676287691c">use_from_none</a>, *it );</div>
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"> 1620</span>            available_tools.emplace_back( sel, 0, 0 );</div>
<div class="line"><a id="l01621" name="l01621"></a><span class="lineno"> 1621</span>        }</div>
<div class="line"><a id="l01622" name="l01622"></a><span class="lineno"> 1622</span>    }</div>
<div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span> </div>
<div class="line"><a id="l01624" name="l01624"></a><span class="lineno"> 1624</span>    std::sort( available_tools.begin(), available_tools.end(),</div>
<div class="line"><a id="l01625" name="l01625"></a><span class="lineno"> 1625</span>    []( <span class="keyword">const</span> <a class="code hl_struct" href="structavail__tool__comp.html">avail_tool_comp</a> &amp; lhs, <span class="keyword">const</span> <a class="code hl_struct" href="structavail__tool__comp.html">avail_tool_comp</a> &amp; rhs ) {</div>
<div class="line"><a id="l01626" name="l01626"></a><span class="lineno"> 1626</span>        if( lhs.comp.use_from == use_from_none &amp;&amp; rhs.comp.use_from != use_from_none ) {</div>
<div class="line"><a id="l01627" name="l01627"></a><span class="lineno"> 1627</span>            return true;</div>
<div class="line"><a id="l01628" name="l01628"></a><span class="lineno"> 1628</span>        }</div>
<div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span>        <span class="keywordflow">if</span>( rhs.<a class="code hl_variable" href="structavail__tool__comp.html#a18cc796cf9362c0e525c11428be471b3">comp</a>.use_from == <a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726a87a06975828a650a938662676287691c">use_from_none</a> ) {</div>
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"> 1630</span>            return false;</div>
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"> 1631</span>        }</div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"> 1632</span>        <span class="keywordflow">if</span>( lhs.<a class="code hl_variable" href="structavail__tool__comp.html#afa9721976928092787823a9e2d199a55">charges</a> &gt;= lhs.<a class="code hl_variable" href="structavail__tool__comp.html#a9b1f865149f2fa289a0c32764639ce86">ideal</a> &amp;&amp; rhs.<a class="code hl_variable" href="structavail__tool__comp.html#afa9721976928092787823a9e2d199a55">charges</a> &lt; rhs.<a class="code hl_variable" href="structavail__tool__comp.html#a9b1f865149f2fa289a0c32764639ce86">ideal</a> ) {</div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span>            return true;</div>
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"> 1634</span>        }</div>
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"> 1635</span>        <span class="keywordflow">if</span>( lhs.<a class="code hl_variable" href="structavail__tool__comp.html#afa9721976928092787823a9e2d199a55">charges</a> &lt; lhs.<a class="code hl_variable" href="structavail__tool__comp.html#a9b1f865149f2fa289a0c32764639ce86">ideal</a> &amp;&amp; rhs.<a class="code hl_variable" href="structavail__tool__comp.html#afa9721976928092787823a9e2d199a55">charges</a> &gt;= rhs.<a class="code hl_variable" href="structavail__tool__comp.html#a9b1f865149f2fa289a0c32764639ce86">ideal</a> ) {</div>
<div class="line"><a id="l01636" name="l01636"></a><span class="lineno"> 1636</span>            return false;</div>
<div class="line"><a id="l01637" name="l01637"></a><span class="lineno"> 1637</span>        }</div>
<div class="line"><a id="l01638" name="l01638"></a><span class="lineno"> 1638</span>        <span class="comment">// We want &quot;bigger&quot; tools first because those are likely to be vehicle mounted</span></div>
<div class="line"><a id="l01639" name="l01639"></a><span class="lineno"> 1639</span>        <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( lhs.<a class="code hl_variable" href="structavail__tool__comp.html#a9b1f865149f2fa289a0c32764639ce86">ideal</a> ) / lhs.<a class="code hl_variable" href="structavail__tool__comp.html#afa9721976928092787823a9e2d199a55">charges</a> &gt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span></div>
<div class="line"><a id="l01640" name="l01640"></a><span class="lineno"> 1640</span>               ( rhs.<a class="code hl_variable" href="structavail__tool__comp.html#a9b1f865149f2fa289a0c32764639ce86">ideal</a> ) / rhs.<a class="code hl_variable" href="structavail__tool__comp.html#afa9721976928092787823a9e2d199a55">charges</a>;</div>
<div class="line"><a id="l01641" name="l01641"></a><span class="lineno"> 1641</span>    } );</div>
<div class="line"><a id="l01642" name="l01642"></a><span class="lineno"> 1642</span>    <span class="keywordflow">return</span> available_tools;</div>
<div class="line"><a id="l01643" name="l01643"></a><span class="lineno"> 1643</span>}</div>
<div class="ttc" id="aclassCharacter_html_a9bff3208a5e121c4e3a71b81b378e4e7"><div class="ttname"><a href="classCharacter.html#a9bff3208a5e121c4e3a71b81b378e4e7">Character::has_charges</a></div><div class="ttdeci">bool has_charges(const itype_id &amp;it, int quantity, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09571">character.cpp:9571</a></div></div>
<div class="ttc" id="aclassinventory_html_a166c107e18ca4eea3ca2f37be350796c"><div class="ttname"><a href="classinventory.html#a166c107e18ca4eea3ca2f37be350796c">inventory::has_charges</a></div><div class="ttdeci">bool has_charges(const itype_id &amp;it, int quantity, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;) const</div><div class="ttdef"><b>Definition:</b> <a href="inventory_8cpp_source.html#l00883">inventory.cpp:883</a></div></div>
<div class="ttc" id="aclassinventory_html_a20755b405c4369fe85313cfdee366bff"><div class="ttname"><a href="classinventory.html#a20755b405c4369fe85313cfdee366bff">inventory::has_tools</a></div><div class="ttdeci">bool has_tools(const itype_id &amp;it, int quantity, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;) const</div><div class="ttdef"><b>Definition:</b> <a href="inventory_8cpp_source.html#l00871">inventory.cpp:871</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; itype &gt;</a></div></div>
<div class="ttc" id="aclassvisitable_html_a517e20b6f6c13b8316d5cce8e310b871"><div class="ttname"><a href="classvisitable.html#a517e20b6f6c13b8316d5cce8e310b871">visitable::charges_of</a></div><div class="ttdeci">int charges_of(const itype_id &amp;what, int limit=INT_MAX, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;, std::function&lt; void(int)&gt; visitor=nullptr) const</div><div class="ttdoc">Count maximum available charges from this instance and any contained items.</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00943">visitable.cpp:943</a></div></div>
<div class="ttc" id="aclassvisitable_html_ac50bc4422d4636a70a97d41787f22d0d"><div class="ttname"><a href="classvisitable.html#ac50bc4422d4636a70a97d41787f22d0d">visitable::has_amount</a></div><div class="ttdeci">bool has_amount(const itype_id &amp;what, int qty, bool pseudo=true, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;) const</div><div class="ttdoc">Check instance provides at least qty of an item (.</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l01108">visitable.cpp:1108</a></div></div>
<div class="ttc" id="acraft__command_8h_html_a5684f219761d78b4f98e7b2869dd1726a3d96eab6e691ab4aea5cdad7a15dd08f"><div class="ttname"><a href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726a3d96eab6e691ab4aea5cdad7a15dd08f">use_from_player</a></div><div class="ttdeci">@ use_from_player</div><div class="ttdef"><b>Definition:</b> <a href="craft__command_8h_source.html#l00026">craft_command.h:26</a></div></div>
<div class="ttc" id="acraft__command_8h_html_a5684f219761d78b4f98e7b2869dd1726a87a06975828a650a938662676287691c"><div class="ttname"><a href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726a87a06975828a650a938662676287691c">use_from_none</a></div><div class="ttdeci">@ use_from_none</div><div class="ttdef"><b>Definition:</b> <a href="craft__command_8h_source.html#l00024">craft_command.h:24</a></div></div>
<div class="ttc" id="acraft__command_8h_html_a5684f219761d78b4f98e7b2869dd1726ae0cfa7503d9e51c0f908fe4f210a56cb"><div class="ttname"><a href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726ae0cfa7503d9e51c0f908fe4f210a56cb">use_from_map</a></div><div class="ttdeci">@ use_from_map</div><div class="ttdef"><b>Definition:</b> <a href="craft__command_8h_source.html#l00025">craft_command.h:25</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level DL::Error and class DC::DebugMsg, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00074">debug.h:74</a></div></div>
<div class="ttc" id="aenums_8h_html_ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab"><div class="ttname"><a href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a></div><div class="ttdeci">@ type</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00075">enums.h:75</a></div></div>
<div class="ttc" id="anamespacecrafting_html_a653e8b3027cf7e8256c46600bdea2697"><div class="ttname"><a href="namespacecrafting.html#a653e8b3027cf7e8256c46600bdea2697">crafting::charges_for_continuing</a></div><div class="ttdeci">int charges_for_continuing(int full_charges)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l02443">crafting.cpp:2443</a></div></div>
<div class="ttc" id="anamespacecrafting_html_a66f83eefe72e71cf1a8831fde5afe0aa"><div class="ttname"><a href="namespacecrafting.html#a66f83eefe72e71cf1a8831fde5afe0aa">crafting::charges_for_complete</a></div><div class="ttdeci">int charges_for_complete(int full_charges)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l02435">crafting.cpp:2435</a></div></div>
<div class="ttc" id="anamespacecrafting_html_a6bd0760f7e4a7e545662d263469fb277"><div class="ttname"><a href="namespacecrafting.html#a6bd0760f7e4a7e545662d263469fb277">crafting::charges_for_starting</a></div><div class="ttdeci">int charges_for_starting(int full_charges)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l02439">crafting.cpp:2439</a></div></div>
<div class="ttc" id="anamespacedetail_html_ab2f84fb3de26acdac3fc63a2dce5ea5e"><div class="ttname"><a href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">detail::count</a></div><div class="ttdeci">constexpr size_t count()</div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__core_8h_source.html#l01073">fmtlib_core.h:1073</a></div></div>
<div class="ttc" id="arequirements_8h_html_a29bc522104aee22ea5cf6e7d3c629131a334c4a4c42fdb79d7ebc3e73b517e6f8"><div class="ttname"><a href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131a334c4a4c42fdb79d7ebc3e73b517e6f8">cost_adjustment::none</a></div><div class="ttdeci">@ none</div></div>
<div class="ttc" id="arequirements_8h_html_a29bc522104aee22ea5cf6e7d3c629131abe578bdd9326ee6b1aa8d5672dd4c64f"><div class="ttname"><a href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131abe578bdd9326ee6b1aa8d5672dd4c64f">cost_adjustment::continue_only</a></div><div class="ttdeci">@ continue_only</div></div>
<div class="ttc" id="arequirements_8h_html_a29bc522104aee22ea5cf6e7d3c629131ac09b0863169aa4c63d88adf3644aef93"><div class="ttname"><a href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131ac09b0863169aa4c63d88adf3644aef93">cost_adjustment::start_only</a></div><div class="ttdeci">@ start_only</div></div>
<div class="ttc" id="astructavail__tool__comp_html"><div class="ttname"><a href="structavail__tool__comp.html">avail_tool_comp</a></div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l01557">crafting.cpp:1557</a></div></div>
<div class="ttc" id="astructavail__tool__comp_html_a18cc796cf9362c0e525c11428be471b3"><div class="ttname"><a href="structavail__tool__comp.html#a18cc796cf9362c0e525c11428be471b3">avail_tool_comp::comp</a></div><div class="ttdeci">comp_selection&lt; tool_comp &gt; comp</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l01564">crafting.cpp:1564</a></div></div>
<div class="ttc" id="astructavail__tool__comp_html_a9b1f865149f2fa289a0c32764639ce86"><div class="ttname"><a href="structavail__tool__comp.html#a9b1f865149f2fa289a0c32764639ce86">avail_tool_comp::ideal</a></div><div class="ttdeci">int ideal</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l01566">crafting.cpp:1566</a></div></div>
<div class="ttc" id="astructavail__tool__comp_html_afa9721976928092787823a9e2d199a55"><div class="ttname"><a href="structavail__tool__comp.html#afa9721976928092787823a9e2d199a55">avail_tool_comp::charges</a></div><div class="ttdeci">int charges</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l01565">crafting.cpp:1565</a></div></div>
<div class="ttc" id="astructcomp__selection_html"><div class="ttname"><a href="structcomp__selection.html">comp_selection</a></div><div class="ttdoc">Struct that represents a selection of a component for crafting.</div><div class="ttdef"><b>Definition:</b> <a href="craft__command_8h_source.html#l00041">craft_command.h:41</a></div></div>
<div class="ttc" id="astructtool__comp_html"><div class="ttname"><a href="structtool__comp.html">tool_comp</a></div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00090">requirements.h:90</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="crafting_8cpp_source.html#l01565">avail_tool_comp::charges</a>, <a class="el" href="crafting_8cpp_source.html#l02435">charges_for_complete()</a>, <a class="el" href="crafting_8cpp_source.html#l02443">charges_for_continuing()</a>, <a class="el" href="crafting_8cpp_source.html#l02439">charges_for_starting()</a>, <a class="el" href="visitable_8cpp_source.html#l00943">visitable&lt; T &gt;::charges_of()</a>, <a class="el" href="crafting_8cpp_source.html#l01564">avail_tool_comp::comp</a>, <a class="el" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131abe578bdd9326ee6b1aa8d5672dd4c64f">continue_only</a>, <a class="el" href="fmtlib__core_8h_source.html#l01073">detail::count()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="visitable_8cpp_source.html#l01108">visitable&lt; T &gt;::has_amount()</a>, <a class="el" href="character_8cpp_source.html#l09571">Character::has_charges()</a>, <a class="el" href="inventory_8cpp_source.html#l00883">inventory::has_charges()</a>, <a class="el" href="inventory_8cpp_source.html#l00871">inventory::has_tools()</a>, <a class="el" href="crafting_8cpp_source.html#l01566">avail_tool_comp::ideal</a>, <a class="el" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131a334c4a4c42fdb79d7ebc3e73b517e6f8">none</a>, <a class="el" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131ac09b0863169aa4c63d88adf3644aef93">start_only</a>, <a class="el" href="enums_8h_source.html#l00075">type</a>, <a class="el" href="craft__command_8h_source.html#l00025">use_from_map</a>, <a class="el" href="craft__command_8h_source.html#l00024">use_from_none</a>, and <a class="el" href="craft__command_8h_source.html#l00026">use_from_player</a>.</p>

<p class="reference">Referenced by <a class="el" href="crafting_8cpp_source.html#l01707">select_tool_component()</a>.</p>

</div>
</div>
<a id="a0d310e1d954941b884e3806116ae6f7b" name="a0d310e1d954941b884e3806116ae6f7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d310e1d954941b884e3806116ae6f7b">&#9670;&nbsp;</a></span>get_books_for_recipe() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &gt; crafting::get_books_for_recipe </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classinventory.html">inventory</a> &amp;&#160;</td>
          <td class="paramname"><em>crafting_inv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classrecipe.html">recipe</a> *&#160;</td>
          <td class="paramname"><em>r</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the set of book types in crafting_inv that provide the given recipe. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td><a class="el" href="classCharacter.html">Character</a> whose skills are used to limit the available recipes </td></tr>
    <tr><td class="paramname">crafting_inv</td><td>Current available items that may contain readable books </td></tr>
    <tr><td class="paramname">r</td><td>Recipe to search for in the available books </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="crafting_8cpp_source.html#l02410">2410</a> of file <a class="el" href="crafting_8cpp_source.html">crafting.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02412" name="l02412"></a><span class="lineno"> 2412</span>{</div>
<div class="line"><a id="l02413" name="l02413"></a><span class="lineno"> 2413</span>    std::set&lt;itype_id&gt; book_ids;</div>
<div class="line"><a id="l02414" name="l02414"></a><span class="lineno"> 2414</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> skill_level = <a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.get_skill_level( r-&gt;<a class="code hl_variable" href="classrecipe.html#a0af03931c6f034e6b5269a5206e31bd2">skill_used</a> );</div>
<div class="line"><a id="l02415" name="l02415"></a><span class="lineno"> 2415</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;book_lvl : r-&gt;<a class="code hl_variable" href="classrecipe.html#aaed75f5099b2f8522f3548f8ccba3275">booksets</a> ) {</div>
<div class="line"><a id="l02416" name="l02416"></a><span class="lineno"> 2416</span>        <a class="code hl_class" href="classstring__id.html">itype_id</a> book_id = book_lvl.first;</div>
<div class="line"><a id="l02417" name="l02417"></a><span class="lineno"> 2417</span>        <span class="keywordtype">int</span> required_skill_level = book_lvl.second;</div>
<div class="line"><a id="l02418" name="l02418"></a><span class="lineno"> 2418</span>        <span class="keywordflow">if</span>( skill_level &gt;= required_skill_level &amp;&amp; crafting_inv.<a class="code hl_function" href="classvisitable.html#a0f314e4c2cf16dde306d92b73a60ff9f">amount_of</a>( book_id ) &gt; 0 ) {</div>
<div class="line"><a id="l02419" name="l02419"></a><span class="lineno"> 2419</span>            book_ids.insert( book_id );</div>
<div class="line"><a id="l02420" name="l02420"></a><span class="lineno"> 2420</span>        }</div>
<div class="line"><a id="l02421" name="l02421"></a><span class="lineno"> 2421</span>    }</div>
<div class="line"><a id="l02422" name="l02422"></a><span class="lineno"> 2422</span>    <span class="keywordflow">return</span> book_ids;</div>
<div class="line"><a id="l02423" name="l02423"></a><span class="lineno"> 2423</span>}</div>
<div class="ttc" id="aclassrecipe_html_a0af03931c6f034e6b5269a5206e31bd2"><div class="ttname"><a href="classrecipe.html#a0af03931c6f034e6b5269a5206e31bd2">recipe::skill_used</a></div><div class="ttdeci">skill_id skill_used</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00107">recipe.h:107</a></div></div>
<div class="ttc" id="aclassrecipe_html_aaed75f5099b2f8522f3548f8ccba3275"><div class="ttname"><a href="classrecipe.html#aaed75f5099b2f8522f3548f8ccba3275">recipe::booksets</a></div><div class="ttdeci">std::map&lt; itype_id, int &gt; booksets</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00112">recipe.h:112</a></div></div>
<div class="ttc" id="aclassvisitable_html_a0f314e4c2cf16dde306d92b73a60ff9f"><div class="ttname"><a href="classvisitable.html#a0f314e4c2cf16dde306d92b73a60ff9f">visitable::amount_of</a></div><div class="ttdeci">int amount_of(const itype_id &amp;what, bool pseudo=true, int limit=INT_MAX, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;) const</div><div class="ttdoc">Count items matching id including both this instance and any contained items.</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l01048">visitable.cpp:1048</a></div></div>
<div class="ttc" id="amagic_8cpp_html_a6753ecfe87da659675b18c2f81d6ec12"><div class="ttname"><a href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a></div><div class="ttdeci">constexpr double c</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01031">magic.cpp:1031</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="visitable_8cpp_source.html#l01048">visitable&lt; T &gt;::amount_of()</a>, <a class="el" href="recipe_8h_source.html#l00112">recipe::booksets</a>, <a class="el" href="magic_8cpp_source.html#l01031">c</a>, and <a class="el" href="recipe_8h_source.html#l00107">recipe::skill_used</a>.</p>

<p class="reference">Referenced by <a class="el" href="crafting__gui_8cpp_source.html#l00161">select_crafting_recipe()</a>.</p>

</div>
</div>
<a id="a22e3c95d08749d4a4a07b9aaf64db9e8" name="a22e3c95d08749d4a4a07b9aaf64db9e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22e3c95d08749d4a4a07b9aaf64db9e8">&#9670;&nbsp;</a></span>get_books_for_recipe() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &gt; crafting::get_books_for_recipe </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classrecipe.html">recipe</a> *&#160;</td>
          <td class="paramname"><em>r</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the set of book types that provide the given recipe. </p>

<p class="definition">Definition at line <a class="el" href="crafting_8cpp_source.html#l02425">2425</a> of file <a class="el" href="crafting_8cpp_source.html">crafting.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02426" name="l02426"></a><span class="lineno"> 2426</span>{</div>
<div class="line"><a id="l02427" name="l02427"></a><span class="lineno"> 2427</span>    std::set&lt;itype_id&gt; book_ids;</div>
<div class="line"><a id="l02428" name="l02428"></a><span class="lineno"> 2428</span>    <a class="code hl_function" href="namespaceiexamine.html#ab9103bcb0e9cb4755b445e5395a0a62f">std::transform</a>( r-&gt;<a class="code hl_variable" href="classrecipe.html#aaed75f5099b2f8522f3548f8ccba3275">booksets</a>.begin(), r-&gt;<a class="code hl_variable" href="classrecipe.html#aaed75f5099b2f8522f3548f8ccba3275">booksets</a>.end(), std::inserter( book_ids, book_ids.end() ),</div>
<div class="line"><a id="l02429" name="l02429"></a><span class="lineno"> 2429</span>    []( <span class="keyword">const</span> std::pair&lt;itype_id, int&gt; &amp;pr ) {</div>
<div class="line"><a id="l02430" name="l02430"></a><span class="lineno"> 2430</span>        return pr.first;</div>
<div class="line"><a id="l02431" name="l02431"></a><span class="lineno"> 2431</span>    } );</div>
<div class="line"><a id="l02432" name="l02432"></a><span class="lineno"> 2432</span>    <span class="keywordflow">return</span> book_ids;</div>
<div class="line"><a id="l02433" name="l02433"></a><span class="lineno"> 2433</span>}</div>
<div class="ttc" id="anamespaceiexamine_html_ab9103bcb0e9cb4755b445e5395a0a62f"><div class="ttname"><a href="namespaceiexamine.html#ab9103bcb0e9cb4755b445e5395a0a62f">iexamine::transform</a></div><div class="ttdeci">void transform(player &amp;p, const tripoint &amp;pos)</div><div class="ttdoc">Transform the examined object into the object specified by its transforms_into property.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01576">iexamine.cpp:1576</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="recipe_8h_source.html#l00112">recipe::booksets</a>, and <a class="el" href="iexamine_8cpp_source.html#l01576">iexamine::transform()</a>.</p>

</div>
</div>
<a id="af4dc51f886647b644d25e4e7d45de094" name="af4dc51f886647b644d25e4e7d45de094"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4dc51f886647b644d25e4e7d45de094">&#9670;&nbsp;</a></span>query_tool_selection()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structcomp__selection.html">comp_selection</a>&lt; <a class="el" href="structtool__comp.html">tool_comp</a> &gt; crafting::query_tool_selection </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="structavail__tool__comp.html">avail_tool_comp</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>available_tools</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>hotkeys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>can_cancel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_npc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="crafting_8cpp_source.html#l01646">1646</a> of file <a class="el" href="crafting_8cpp_source.html">crafting.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01648" name="l01648"></a><span class="lineno"> 1648</span>{</div>
<div class="line"><a id="l01649" name="l01649"></a><span class="lineno"> 1649</span>    <span class="keywordflow">if</span>( available_tools.empty() ) {</div>
<div class="line"><a id="l01650" name="l01650"></a><span class="lineno"> 1650</span>        <span class="comment">// This SHOULD only happen if cooking with a fire,</span></div>
<div class="line"><a id="l01651" name="l01651"></a><span class="lineno"> 1651</span>        <span class="comment">// and the fire goes out.</span></div>
<div class="line"><a id="l01652" name="l01652"></a><span class="lineno"> 1652</span>        <span class="keywordflow">return</span> <a class="code hl_struct" href="structcomp__selection.html">comp_selection&lt;tool_comp&gt;</a>( <a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726a87a06975828a650a938662676287691c">use_from_none</a> );</div>
<div class="line"><a id="l01653" name="l01653"></a><span class="lineno"> 1653</span>    }</div>
<div class="line"><a id="l01654" name="l01654"></a><span class="lineno"> 1654</span>    <span class="keywordflow">if</span>( available_tools.front().comp.use_from == <a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726a87a06975828a650a938662676287691c">use_from_none</a> ) {</div>
<div class="line"><a id="l01655" name="l01655"></a><span class="lineno"> 1655</span>        <span class="comment">// Default to using a tool that doesn&#39;t require charges</span></div>
<div class="line"><a id="l01656" name="l01656"></a><span class="lineno"> 1656</span>        <span class="keywordflow">return</span> available_tools.front().comp;</div>
<div class="line"><a id="l01657" name="l01657"></a><span class="lineno"> 1657</span>    }</div>
<div class="line"><a id="l01658" name="l01658"></a><span class="lineno"> 1658</span>    <span class="keywordflow">if</span>( available_tools.size() == 1 ) {</div>
<div class="line"><a id="l01659" name="l01659"></a><span class="lineno"> 1659</span>        <span class="keywordflow">return</span> available_tools.front().comp;</div>
<div class="line"><a id="l01660" name="l01660"></a><span class="lineno"> 1660</span>    }</div>
<div class="line"><a id="l01661" name="l01661"></a><span class="lineno"> 1661</span>    <span class="keywordflow">if</span>( is_npc ) {</div>
<div class="line"><a id="l01662" name="l01662"></a><span class="lineno"> 1662</span>        <span class="keyword">auto</span> iter = std::find_if( available_tools.begin(), available_tools.end(),</div>
<div class="line"><a id="l01663" name="l01663"></a><span class="lineno"> 1663</span>        []( <span class="keyword">const</span> <a class="code hl_struct" href="structavail__tool__comp.html">avail_tool_comp</a> &amp; tool ) {</div>
<div class="line"><a id="l01664" name="l01664"></a><span class="lineno"> 1664</span>            return tool.comp.use_from == use_from_player;</div>
<div class="line"><a id="l01665" name="l01665"></a><span class="lineno"> 1665</span>        } );</div>
<div class="line"><a id="l01666" name="l01666"></a><span class="lineno"> 1666</span>        <span class="keywordflow">if</span>( iter != available_tools.end() ) {</div>
<div class="line"><a id="l01667" name="l01667"></a><span class="lineno"> 1667</span>            <span class="keywordflow">return</span> iter-&gt;comp;</div>
<div class="line"><a id="l01668" name="l01668"></a><span class="lineno"> 1668</span>        }</div>
<div class="line"><a id="l01669" name="l01669"></a><span class="lineno"> 1669</span>        <span class="keywordflow">return</span> available_tools.front().comp;</div>
<div class="line"><a id="l01670" name="l01670"></a><span class="lineno"> 1670</span>    }</div>
<div class="line"><a id="l01671" name="l01671"></a><span class="lineno"> 1671</span> </div>
<div class="line"><a id="l01672" name="l01672"></a><span class="lineno"> 1672</span>    <span class="comment">// Variety of options, list them and pick one</span></div>
<div class="line"><a id="l01673" name="l01673"></a><span class="lineno"> 1673</span>    <span class="comment">// Populate the list</span></div>
<div class="line"><a id="l01674" name="l01674"></a><span class="lineno"> 1674</span>    <a class="code hl_class" href="classuilist.html">uilist</a> tmenu( hotkeys );</div>
<div class="line"><a id="l01675" name="l01675"></a><span class="lineno"> 1675</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structavail__tool__comp.html">avail_tool_comp</a> &amp;tool : available_tools ) {</div>
<div class="line"><a id="l01676" name="l01676"></a><span class="lineno"> 1676</span>        <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> &amp;comp_type = <a class="code hl_enumvalue" href="consumption_8cpp.html#ab52b3b592a42745385edcf8d90c690a1a39ab32c5aeb56c9f5ae17f073ce31023">tool</a>.comp.comp.type;</div>
<div class="line"><a id="l01677" name="l01677"></a><span class="lineno"> 1677</span>        <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="consumption_8cpp.html#ab52b3b592a42745385edcf8d90c690a1a39ab32c5aeb56c9f5ae17f073ce31023">tool</a>.ideal &gt; 1 ) {</div>
<div class="line"><a id="l01678" name="l01678"></a><span class="lineno"> 1678</span>            <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_function" href="fmtlib__core_8h.html#a80bdffd1698c1834f081bcf015be1cff">format</a> = <a class="code hl_enumvalue" href="consumption_8cpp.html#ab52b3b592a42745385edcf8d90c690a1a39ab32c5aeb56c9f5ae17f073ce31023">tool</a>.comp.use_from == <a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726ae0cfa7503d9e51c0f908fe4f210a56cb">use_from_map</a></div>
<div class="line"><a id="l01679" name="l01679"></a><span class="lineno"> 1679</span>                                 ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;%s (%d/%d charges nearby)&quot;</span> )</div>
<div class="line"><a id="l01680" name="l01680"></a><span class="lineno"> 1680</span>                                 : <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;%s (%d/%d charges on person)&quot;</span> );</div>
<div class="line"><a id="l01681" name="l01681"></a><span class="lineno"> 1681</span>            std::string str = <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_function" href="fmtlib__core_8h.html#a80bdffd1698c1834f081bcf015be1cff">format</a>,</div>
<div class="line"><a id="l01682" name="l01682"></a><span class="lineno"> 1682</span>                                             <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( comp_type ), <a class="code hl_enumvalue" href="consumption_8cpp.html#ab52b3b592a42745385edcf8d90c690a1a39ab32c5aeb56c9f5ae17f073ce31023">tool</a>.ideal,</div>
<div class="line"><a id="l01683" name="l01683"></a><span class="lineno"> 1683</span>                                             <a class="code hl_enumvalue" href="consumption_8cpp.html#ab52b3b592a42745385edcf8d90c690a1a39ab32c5aeb56c9f5ae17f073ce31023">tool</a>.charges );</div>
<div class="line"><a id="l01684" name="l01684"></a><span class="lineno"> 1684</span>            tmenu.addentry( str );</div>
<div class="line"><a id="l01685" name="l01685"></a><span class="lineno"> 1685</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01686" name="l01686"></a><span class="lineno"> 1686</span>            std::string str = <a class="code hl_enumvalue" href="consumption_8cpp.html#ab52b3b592a42745385edcf8d90c690a1a39ab32c5aeb56c9f5ae17f073ce31023">tool</a>.comp.use_from == <a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726ae0cfa7503d9e51c0f908fe4f210a56cb">use_from_map</a></div>
<div class="line"><a id="l01687" name="l01687"></a><span class="lineno"> 1687</span>                              ? <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( comp_type ) + <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot; (nearby)&quot;</span> )</div>
<div class="line"><a id="l01688" name="l01688"></a><span class="lineno"> 1688</span>                              : <a class="code hl_class" href="classitem.html">item</a>::nname( comp_type );</div>
<div class="line"><a id="l01689" name="l01689"></a><span class="lineno"> 1689</span>            tmenu.addentry( str );</div>
<div class="line"><a id="l01690" name="l01690"></a><span class="lineno"> 1690</span>        }</div>
<div class="line"><a id="l01691" name="l01691"></a><span class="lineno"> 1691</span>    }</div>
<div class="line"><a id="l01692" name="l01692"></a><span class="lineno"> 1692</span> </div>
<div class="line"><a id="l01693" name="l01693"></a><span class="lineno"> 1693</span>    tmenu.allow_cancel = can_cancel;</div>
<div class="line"><a id="l01694" name="l01694"></a><span class="lineno"> 1694</span> </div>
<div class="line"><a id="l01695" name="l01695"></a><span class="lineno"> 1695</span>    <span class="comment">// Get selection via a popup menu</span></div>
<div class="line"><a id="l01696" name="l01696"></a><span class="lineno"> 1696</span>    tmenu.title = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Use which tool?&quot;</span> );</div>
<div class="line"><a id="l01697" name="l01697"></a><span class="lineno"> 1697</span>    tmenu.query();</div>
<div class="line"><a id="l01698" name="l01698"></a><span class="lineno"> 1698</span> </div>
<div class="line"><a id="l01699" name="l01699"></a><span class="lineno"> 1699</span>    <span class="keywordflow">if</span>( tmenu.ret &lt; 0 || <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( tmenu.ret ) &gt;= available_tools.size() ) {</div>
<div class="line"><a id="l01700" name="l01700"></a><span class="lineno"> 1700</span>        <span class="keywordflow">return</span> <a class="code hl_struct" href="structcomp__selection.html">comp_selection&lt;tool_comp&gt;</a>( <a class="code hl_enumvalue" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726afa28df73c87d81742155531f0f36dc71">cancel</a> );</div>
<div class="line"><a id="l01701" name="l01701"></a><span class="lineno"> 1701</span>    }</div>
<div class="line"><a id="l01702" name="l01702"></a><span class="lineno"> 1702</span> </div>
<div class="line"><a id="l01703" name="l01703"></a><span class="lineno"> 1703</span>    <span class="keywordflow">return</span> available_tools.at( <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( tmenu.ret ) ).comp;</div>
<div class="line"><a id="l01704" name="l01704"></a><span class="lineno"> 1704</span>}</div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00175">item.h:176</a></div></div>
<div class="ttc" id="aclassitem_html_a438855ffd52d33307e1dfba6d607535b"><div class="ttname"><a href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a></div><div class="ttdeci">static std::string nname(const itype_id &amp;id, unsigned int quantity=1)</div><div class="ttdoc">Returns the translated item name for the item with given id.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09749">item.cpp:9749</a></div></div>
<div class="ttc" id="aclassuilist_html"><div class="ttname"><a href="classuilist.html">uilist</a></div><div class="ttdoc">uilist: scrolling vertical list menu</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00186">ui.h:187</a></div></div>
<div class="ttc" id="aconsumption_8cpp_html_ab52b3b592a42745385edcf8d90c690a1a39ab32c5aeb56c9f5ae17f073ce31023"><div class="ttname"><a href="consumption_8cpp.html#ab52b3b592a42745385edcf8d90c690a1a39ab32c5aeb56c9f5ae17f073ce31023">item_consumption_t::tool</a></div><div class="ttdeci">@ tool</div></div>
<div class="ttc" id="acraft__command_8h_html_a5684f219761d78b4f98e7b2869dd1726afa28df73c87d81742155531f0f36dc71"><div class="ttname"><a href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726afa28df73c87d81742155531f0f36dc71">cancel</a></div><div class="ttdeci">@ cancel</div><div class="ttdef"><b>Definition:</b> <a href="craft__command_8h_source.html#l00028">craft_command.h:28</a></div></div>
<div class="ttc" id="afmtlib__core_8h_html_a80bdffd1698c1834f081bcf015be1cff"><div class="ttname"><a href="fmtlib__core_8h.html#a80bdffd1698c1834f081bcf015be1cff">format</a></div><div class="ttdeci">FMT_INLINE std::basic_string&lt; Char &gt; format(const S &amp;format_str, Args &amp;&amp;... args)</div><div class="ttdoc">\rst Formats arguments and returns the result as a string.</div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__core_8h_source.html#l02316">fmtlib_core.h:2316</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a9b089d0b697443b096063219dab08ef5"><div class="ttname"><a href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a></div><div class="ttdeci">std::string string_format(std::string format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00418">string_formatter.h:418</a></div></div>
<div class="ttc" id="atranslations_8h_html_aa829053017e23ef22d44dccecba63a34"><div class="ttname"><a href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a></div><div class="ttdeci">#define _(msg)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00116">translations.h:116</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="ui_8cpp_source.html#l00932">uilist::addentry()</a>, <a class="el" href="ui_8h_source.html#l00362">uilist::allow_cancel</a>, <a class="el" href="craft__command_8h_source.html#l00028">cancel</a>, <a class="el" href="fmtlib__core_8h_source.html#l02316">format()</a>, <a class="el" href="item_8cpp_source.html#l09749">item::nname()</a>, <a class="el" href="ui_8cpp_source.html#l00828">uilist::query()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>, <a class="el" href="ui_8h_source.html#l00319">uilist::title</a>, <a class="el" href="consumption_8cpp.html#ab52b3b592a42745385edcf8d90c690a1a39ab32c5aeb56c9f5ae17f073ce31023">tool</a>, <a class="el" href="craft__command_8h_source.html#l00025">use_from_map</a>, and <a class="el" href="craft__command_8h_source.html#l00024">use_from_none</a>.</p>

<p class="reference">Referenced by <a class="el" href="crafting_8cpp_source.html#l01707">select_tool_component()</a>.</p>

</div>
</div>
<a id="a942e117de7c377ddfab0cb29c6584aca" name="a942e117de7c377ddfab0cb29c6584aca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a942e117de7c377ddfab0cb29c6584aca">&#9670;&nbsp;</a></span>select_tool_component() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcomp__selection.html">comp_selection</a>&lt; <a class="el" href="structtool__comp.html">tool_comp</a> &gt; crafting::select_tool_component </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="structtool__comp.html">tool_comp</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>tools</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classinventory.html">inventory</a> &amp;&#160;</td>
          <td class="paramname"><em>map_inv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>player_with_inv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>can_cancel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="crafting_8cpp_source.html#l01720">1720</a> of file <a class="el" href="crafting_8cpp_source.html">crafting.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01723" name="l01723"></a><span class="lineno"> 1723</span>{</div>
<div class="line"><a id="l01724" name="l01724"></a><span class="lineno"> 1724</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecrafting.html#a942e117de7c377ddfab0cb29c6584aca">select_tool_component</a>( tools, batch, map_inv, player_with_inv, can_cancel, <a class="code hl_function" href="player_8h.html#a105a2bc78dff70bdbdc683b88b2f5351">DEFAULT_HOTKEYS</a>,</div>
<div class="line"><a id="l01725" name="l01725"></a><span class="lineno"> 1725</span>                                  <a class="code hl_enumvalue" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131a334c4a4c42fdb79d7ebc3e73b517e6f8">cost_adjustment::none</a> );</div>
<div class="line"><a id="l01726" name="l01726"></a><span class="lineno"> 1726</span>}</div>
<div class="ttc" id="anamespacecrafting_html_a942e117de7c377ddfab0cb29c6584aca"><div class="ttname"><a href="namespacecrafting.html#a942e117de7c377ddfab0cb29c6584aca">crafting::select_tool_component</a></div><div class="ttdeci">comp_selection&lt; tool_comp &gt; select_tool_component(const std::vector&lt; tool_comp &gt; &amp;tools, int batch, const inventory &amp;map_inv, const Character *player_with_inv, bool can_cancel)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l01720">crafting.cpp:1720</a></div></div>
<div class="ttc" id="aplayer_8h_html_a105a2bc78dff70bdbdc683b88b2f5351"><div class="ttname"><a href="player_8h.html#a105a2bc78dff70bdbdc683b88b2f5351">DEFAULT_HOTKEYS</a></div><div class="ttdeci">static const std::string DEFAULT_HOTKEYS(&quot;1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="player_8h.html#a105a2bc78dff70bdbdc683b88b2f5351">DEFAULT_HOTKEYS()</a>, <a class="el" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131a334c4a4c42fdb79d7ebc3e73b517e6f8">none</a>, and <a class="el" href="crafting_8cpp_source.html#l01720">select_tool_component()</a>.</p>

<p class="reference">Referenced by <a class="el" href="crafting_8cpp_source.html#l01720">select_tool_component()</a>.</p>

</div>
</div>
<a id="a07496c9e8d995433ae9debe590894c3e" name="a07496c9e8d995433ae9debe590894c3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07496c9e8d995433ae9debe590894c3e">&#9670;&nbsp;</a></span>select_tool_component() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcomp__selection.html">comp_selection</a>&lt; <a class="el" href="structtool__comp.html">tool_comp</a> &gt; crafting::select_tool_component </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="structtool__comp.html">tool_comp</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>tools</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classinventory.html">inventory</a> &amp;&#160;</td>
          <td class="paramname"><em>map_inv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>player_with_inv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>can_cancel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>hotkeys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131">cost_adjustment</a>&#160;</td>
          <td class="paramname"><em>adjustment</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns selected tool component that matches one of the expected ones. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tools</td><td>tools to match </td></tr>
    <tr><td class="paramname">batch</td><td>size of batch to craft, multiplier on expected charges </td></tr>
    <tr><td class="paramname">map_inv</td><td>map inventory to select from </td></tr>
    <tr><td class="paramname">player_with_inv</td><td>if not null, character who provides additional inventory </td></tr>
    <tr><td class="paramname">hotkeys</td><td>hotkeys available to the menu </td></tr>
    <tr><td class="paramname">can_cancel</td><td>can the selection be aborted with no result </td></tr>
    <tr><td class="paramname">adjustment</td><td>affects required charges, see <a class="el" href="requirements_8h.html#a29bc522104aee22ea5cf6e7d3c629131">cost_adjustment</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="crafting_8cpp_source.html#l01707">1707</a> of file <a class="el" href="crafting_8cpp_source.html">crafting.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01712" name="l01712"></a><span class="lineno"> 1712</span>{</div>
<div class="line"><a id="l01713" name="l01713"></a><span class="lineno"> 1713</span>    std::vector&lt;avail_tool_comp&gt; <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a> = <a class="code hl_function" href="namespacecrafting.html#a5844edf7e04b20037d08a1215cf62236">find_tool_component</a>( player_with_inv, tools, batch, map_inv,</div>
<div class="line"><a id="l01714" name="l01714"></a><span class="lineno"> 1714</span>                                           adjustment );</div>
<div class="line"><a id="l01715" name="l01715"></a><span class="lineno"> 1715</span>    <span class="keywordtype">bool</span> is_npc = player_with_inv ? player_with_inv-&gt;<a class="code hl_function" href="classCreature.html#aed84fe52e1335d48d53f482f8a278c87">is_npc</a>() : <span class="keyword">false</span>;</div>
<div class="line"><a id="l01716" name="l01716"></a><span class="lineno"> 1716</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecrafting.html#af4dc51f886647b644d25e4e7d45de094">query_tool_selection</a>( <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>, hotkeys, can_cancel, is_npc );</div>
<div class="line"><a id="l01717" name="l01717"></a><span class="lineno"> 1717</span>}</div>
<div class="ttc" id="aclassCreature_html_aed84fe52e1335d48d53f482f8a278c87"><div class="ttname"><a href="classCreature.html#aed84fe52e1335d48d53f482f8a278c87">Creature::is_npc</a></div><div class="ttdeci">virtual bool is_npc() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00098">creature.h:98</a></div></div>
<div class="ttc" id="anamespacePATH__INFO_html_a5a5d41d971342c3e6103b510ccbcb9bb"><div class="ttname"><a href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">PATH_INFO::options</a></div><div class="ttdeci">std::string options()</div><div class="ttdef"><b>Definition:</b> <a href="path__info_8cpp_source.html#l00238">path_info.cpp:238</a></div></div>
<div class="ttc" id="anamespacecrafting_html_a5844edf7e04b20037d08a1215cf62236"><div class="ttname"><a href="namespacecrafting.html#a5844edf7e04b20037d08a1215cf62236">crafting::find_tool_component</a></div><div class="ttdeci">static std::vector&lt; avail_tool_comp &gt; find_tool_component(const Character *player_with_inv, const std::vector&lt; tool_comp &gt; &amp;tools, int batch, const inventory &amp;map_inv, cost_adjustment charge_mod)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l01573">crafting.cpp:1573</a></div></div>
<div class="ttc" id="anamespacecrafting_html_af4dc51f886647b644d25e4e7d45de094"><div class="ttname"><a href="namespacecrafting.html#af4dc51f886647b644d25e4e7d45de094">crafting::query_tool_selection</a></div><div class="ttdeci">static comp_selection&lt; tool_comp &gt; query_tool_selection(const std::vector&lt; avail_tool_comp &gt; &amp;available_tools, const std::string &amp;hotkeys, bool can_cancel, bool is_npc)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l01646">crafting.cpp:1646</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="crafting_8cpp_source.html#l01573">find_tool_component()</a>, <a class="el" href="creature_8h_source.html#l00098">Creature::is_npc()</a>, <a class="el" href="path__info_8cpp_source.html#l00238">PATH_INFO::options()</a>, and <a class="el" href="crafting_8cpp_source.html#l01646">query_tool_selection()</a>.</p>

<p class="reference">Referenced by <a class="el" href="crafting_8cpp_source.html#l01147">player::can_continue_craft()</a>, <a class="el" href="basecamp_8cpp_source.html#l00713">basecamp_action_components::choose_components()</a>, <a class="el" href="crafting_8cpp_source.html#l01846">player::consume_tools()</a>, <a class="el" href="craft__command_8cpp_source.html#l00097">craft_command::execute()</a>, and <a class="el" href="veh__utils_8cpp_source.html#l00109">veh_utils::repair_part()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacecrafting.html">crafting</a></li>
    <li class="footer">Generated on Sat Nov 12 2022 15:16:07 for Cataclysm BN by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
