<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm BN: mattack Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm BN
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('namespacemattack.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">mattack Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1f0e47669aab3ecd87f94a38309d515a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a1f0e47669aab3ecd87f94a38309d515a">none</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a1f0e47669aab3ecd87f94a38309d515a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33846d02ea27a8463f9f85284b973ed1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a33846d02ea27a8463f9f85284b973ed1">eat_crop</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a33846d02ea27a8463f9f85284b973ed1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad077033f0300879f861859fead0ab3bf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#ad077033f0300879f861859fead0ab3bf">eat_food</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:ad077033f0300879f861859fead0ab3bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a016e0e9bd24e2c55f0945833701c2a26"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a016e0e9bd24e2c55f0945833701c2a26">antqueen</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a016e0e9bd24e2c55f0945833701c2a26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6790ba4e09c2cc0b951be9bbd108f568"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a6790ba4e09c2cc0b951be9bbd108f568">shriek</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a6790ba4e09c2cc0b951be9bbd108f568"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13caf8928bf80f7b3621cd70bdc773ba"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a13caf8928bf80f7b3621cd70bdc773ba">shriek_alert</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a13caf8928bf80f7b3621cd70bdc773ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a787768aa8a85e4a5b851e1e6ab20dbae"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a787768aa8a85e4a5b851e1e6ab20dbae">shriek_stun</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a787768aa8a85e4a5b851e1e6ab20dbae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1408c6404a5086676f125077c742472"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#ae1408c6404a5086676f125077c742472">howl</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:ae1408c6404a5086676f125077c742472"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a797e909b5976a33fb522257a398fcb43"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a797e909b5976a33fb522257a398fcb43">rattle</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a797e909b5976a33fb522257a398fcb43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdda0be7e7c8dabb76e9bd130547a3fa"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#acdda0be7e7c8dabb76e9bd130547a3fa">acid</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:acdda0be7e7c8dabb76e9bd130547a3fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51683e5cfb62ed5adfe8332a081504df"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a51683e5cfb62ed5adfe8332a081504df">acid_accurate</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a51683e5cfb62ed5adfe8332a081504df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcb666efd385834891ffd25095ba1244"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#adcb666efd385834891ffd25095ba1244">acid_barf</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:adcb666efd385834891ffd25095ba1244"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0df2e46cfb1cdde166037df0d6a8c55c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a0df2e46cfb1cdde166037df0d6a8c55c">shockstorm</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a0df2e46cfb1cdde166037df0d6a8c55c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac25b9264f3624fabc007c0c372617df0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#ac25b9264f3624fabc007c0c372617df0">shocking_reveal</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:ac25b9264f3624fabc007c0c372617df0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f1b44ab85e39bcf108530a2f77551b3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a4f1b44ab85e39bcf108530a2f77551b3">pull_metal_weapon</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a4f1b44ab85e39bcf108530a2f77551b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84f4ef33fc59157b5c558a8ed61e7528"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a84f4ef33fc59157b5c558a8ed61e7528">boomer</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a84f4ef33fc59157b5c558a8ed61e7528"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb8bac93a0fbd0c44f4940e1cf0af121"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#acb8bac93a0fbd0c44f4940e1cf0af121">boomer_glow</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:acb8bac93a0fbd0c44f4940e1cf0af121"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb8e5e171700f1684e8c9b0ad762a0c9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#adb8e5e171700f1684e8c9b0ad762a0c9">resurrect</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:adb8e5e171700f1684e8c9b0ad762a0c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b980e0f585bd899371c1378c665be1c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a4b980e0f585bd899371c1378c665be1c">smash</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a4b980e0f585bd899371c1378c665be1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1026fc5bfb1c0cb203b284abb5ce71b6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a1026fc5bfb1c0cb203b284abb5ce71b6">smash_specific</a> (<a class="el" href="classmonster.html">monster</a> *z, <a class="el" href="classCreature.html">Creature</a> *target)</td></tr>
<tr class="separator:a1026fc5bfb1c0cb203b284abb5ce71b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69edf9ed7981f29303fa89ab10fba1a5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a69edf9ed7981f29303fa89ab10fba1a5">science</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a69edf9ed7981f29303fa89ab10fba1a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07af5ccfe3022a9bb301db9b8bccae57"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a07af5ccfe3022a9bb301db9b8bccae57">growplants</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a07af5ccfe3022a9bb301db9b8bccae57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2aea907b3ca1d1d7decf877176d28bb9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a2aea907b3ca1d1d7decf877176d28bb9">grow_vine</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a2aea907b3ca1d1d7decf877176d28bb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2676be6738b2b9622d33c48e7c664c6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#af2676be6738b2b9622d33c48e7c664c6">vine</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:af2676be6738b2b9622d33c48e7c664c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af894c802b6496faad6040c7eaf5a9607"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#af894c802b6496faad6040c7eaf5a9607">spit_sap</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:af894c802b6496faad6040c7eaf5a9607"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fb64bc402d45e98d82c603c475755eb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a8fb64bc402d45e98d82c603c475755eb">triffid_heartbeat</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a8fb64bc402d45e98d82c603c475755eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae08a0dfd17920eaa57b2f97936eab747"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#ae08a0dfd17920eaa57b2f97936eab747">fungus</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:ae08a0dfd17920eaa57b2f97936eab747"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab78843bfc3956dcfebf4d0a9faae65d3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#ab78843bfc3956dcfebf4d0a9faae65d3">fungus_corporate</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:ab78843bfc3956dcfebf4d0a9faae65d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae177db37f394ecc7a1e55efa671b39ff"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#ae177db37f394ecc7a1e55efa671b39ff">fungus_haze</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:ae177db37f394ecc7a1e55efa671b39ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62e8c4fbc29f9a03ebc2837bd0455323"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a62e8c4fbc29f9a03ebc2837bd0455323">fungus_big_blossom</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a62e8c4fbc29f9a03ebc2837bd0455323"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7337d81c74b581c18bd4a1cedb0fb9c1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a7337d81c74b581c18bd4a1cedb0fb9c1">fungus_inject</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a7337d81c74b581c18bd4a1cedb0fb9c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07e7a3e862e11a5c5992b3c3d1e78280"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a07e7a3e862e11a5c5992b3c3d1e78280">fungus_bristle</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a07e7a3e862e11a5c5992b3c3d1e78280"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a124e905e0cd85a68773c0e09adefdfbf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a124e905e0cd85a68773c0e09adefdfbf">fungus_growth</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a124e905e0cd85a68773c0e09adefdfbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c9e9b3034ba4b0fd002a7131c5609bf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a5c9e9b3034ba4b0fd002a7131c5609bf">fungus_sprout</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a5c9e9b3034ba4b0fd002a7131c5609bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4e5d51fdc2d3078ddadb72a9eda18c7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#ac4e5d51fdc2d3078ddadb72a9eda18c7">fungus_fortify</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:ac4e5d51fdc2d3078ddadb72a9eda18c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae75ebfe5b3989553e7954228218df203"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#ae75ebfe5b3989553e7954228218df203">impale</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:ae75ebfe5b3989553e7954228218df203"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa52474914c65788e415d43c94d7fd471"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#aa52474914c65788e415d43c94d7fd471">dermatik</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:aa52474914c65788e415d43c94d7fd471"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87db827a981d171edb3a9ca626342baf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a87db827a981d171edb3a9ca626342baf">dermatik_growth</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a87db827a981d171edb3a9ca626342baf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41571ddd47eff0c37ad293c9da7d2925"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a41571ddd47eff0c37ad293c9da7d2925">fungal_trail</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a41571ddd47eff0c37ad293c9da7d2925"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7304ed99145452654c6e4ce3456f601e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a7304ed99145452654c6e4ce3456f601e">plant</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a7304ed99145452654c6e4ce3456f601e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af898b53c59cc6e85f7f66010f6fd9634"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#af898b53c59cc6e85f7f66010f6fd9634">disappear</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:af898b53c59cc6e85f7f66010f6fd9634"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a001511fcd78df459a0e8bd32315f017f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a001511fcd78df459a0e8bd32315f017f">formblob</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a001511fcd78df459a0e8bd32315f017f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b04f2daea8c9c614169ca1f38fc13f8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a8b04f2daea8c9c614169ca1f38fc13f8">callblobs</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a8b04f2daea8c9c614169ca1f38fc13f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6deb1c5d25f7d3ff5970dc90fa122322"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a6deb1c5d25f7d3ff5970dc90fa122322">jackson</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a6deb1c5d25f7d3ff5970dc90fa122322"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdd93ef287e68dc77f88740411dcfb83"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#afdd93ef287e68dc77f88740411dcfb83">dance</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:afdd93ef287e68dc77f88740411dcfb83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a195e1aed3677a7c1372d15caf6323ef8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a195e1aed3677a7c1372d15caf6323ef8">dogthing</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a195e1aed3677a7c1372d15caf6323ef8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab27c61424df0d5a41c90c11442bed61a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#ab27c61424df0d5a41c90c11442bed61a">tentacle</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:ab27c61424df0d5a41c90c11442bed61a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab942b8c05023c96b91503934ec592b98"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#ab942b8c05023c96b91503934ec592b98">vortex</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:ab942b8c05023c96b91503934ec592b98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa5607dbeec11e77053fd8a80ce34ff1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#aaa5607dbeec11e77053fd8a80ce34ff1">gene_sting</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:aaa5607dbeec11e77053fd8a80ce34ff1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3498ecb900e919d9525e8f51aec49711"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a3498ecb900e919d9525e8f51aec49711">para_sting</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a3498ecb900e919d9525e8f51aec49711"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5477c56594f9a3b33735de5a43538880"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a5477c56594f9a3b33735de5a43538880">triffid_growth</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a5477c56594f9a3b33735de5a43538880"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4646f8ead76e5e7af2fec0bd3e7d20e7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a4646f8ead76e5e7af2fec0bd3e7d20e7">stare</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a4646f8ead76e5e7af2fec0bd3e7d20e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95d5fab8088d3f53d21282823a9e3ea7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a95d5fab8088d3f53d21282823a9e3ea7">fear_paralyze</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a95d5fab8088d3f53d21282823a9e3ea7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5aeefe00f20c767bcdc374eedd168581"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a5aeefe00f20c767bcdc374eedd168581">nurse_check_up</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a5aeefe00f20c767bcdc374eedd168581"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a298448a06b033b766a1cd8674d296c64"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a298448a06b033b766a1cd8674d296c64">nurse_assist</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a298448a06b033b766a1cd8674d296c64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fdfb991ce804ef4da42a10244f77ca3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a1fdfb991ce804ef4da42a10244f77ca3">nurse_operate</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a1fdfb991ce804ef4da42a10244f77ca3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20749a9048978ab45aa38822d84fdd25"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a20749a9048978ab45aa38822d84fdd25">check_money_left</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a20749a9048978ab45aa38822d84fdd25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84fbcd5aaae349e064e227b71ff7ddb2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a84fbcd5aaae349e064e227b71ff7ddb2">photograph</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a84fbcd5aaae349e064e227b71ff7ddb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb8251435c3c334d088110546b95400c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#afb8251435c3c334d088110546b95400c">tazer</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:afb8251435c3c334d088110546b95400c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41b5ef9dd12a09c64c12e8e327443543"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a41b5ef9dd12a09c64c12e8e327443543">flamethrower</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a41b5ef9dd12a09c64c12e8e327443543"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2b2974c98c5ee48657f30170648279b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#ae2b2974c98c5ee48657f30170648279b">searchlight</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:ae2b2974c98c5ee48657f30170648279b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78ae42b818cb83cb572bfc7db3f4e86e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a78ae42b818cb83cb572bfc7db3f4e86e">copbot</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a78ae42b818cb83cb572bfc7db3f4e86e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5ec6f0185771a7f935da77aa4627f28"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#ab5ec6f0185771a7f935da77aa4627f28">chickenbot</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:ab5ec6f0185771a7f935da77aa4627f28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad12ac03a658f88f0e1259d69072d3a3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#aad12ac03a658f88f0e1259d69072d3a3">multi_robot</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:aad12ac03a658f88f0e1259d69072d3a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabedda435c56bb9f8fabc168ddbcc5e4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#aabedda435c56bb9f8fabc168ddbcc5e4">ratking</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:aabedda435c56bb9f8fabc168ddbcc5e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd587bdbaf562c2ce7521301d277afc7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#acd587bdbaf562c2ce7521301d277afc7">generator</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:acd587bdbaf562c2ce7521301d277afc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9f6e64b0eb6f282691998192ebd7a7f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#aa9f6e64b0eb6f282691998192ebd7a7f">upgrade</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:aa9f6e64b0eb6f282691998192ebd7a7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab5452c53a4f87a07d009d2715ec08b5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#aab5452c53a4f87a07d009d2715ec08b5">breathe</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:aab5452c53a4f87a07d009d2715ec08b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b060ca0e13788d28461dc56035cae2c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a6b060ca0e13788d28461dc56035cae2c">brandish</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a6b060ca0e13788d28461dc56035cae2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1ac5174919232955b012d2ee0647b1a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#ae1ac5174919232955b012d2ee0647b1a">flesh_golem</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:ae1ac5174919232955b012d2ee0647b1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9de2706babaa2248b51b23c533487b0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#aa9de2706babaa2248b51b23c533487b0">absorb_meat</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:aa9de2706babaa2248b51b23c533487b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55bb4dfcc05769af381e14b472432e55"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a55bb4dfcc05769af381e14b472432e55">lunge</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a55bb4dfcc05769af381e14b472432e55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62e06457ee6c394b981b749bc58ea5f7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a62e06457ee6c394b981b749bc58ea5f7">longswipe</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a62e06457ee6c394b981b749bc58ea5f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacb645c1d5704bc277f2b0b568862950"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#aacb645c1d5704bc277f2b0b568862950">parrot</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:aacb645c1d5704bc277f2b0b568862950"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83af85e4b61fd7722274848c33012bd6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a83af85e4b61fd7722274848c33012bd6">parrot_at_danger</a> (<a class="el" href="classmonster.html">monster</a> *<a class="el" href="namespacemattack.html#aacb645c1d5704bc277f2b0b568862950">parrot</a>)</td></tr>
<tr class="separator:a83af85e4b61fd7722274848c33012bd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af09473a311230b57a93a4ef86655d764"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#af09473a311230b57a93a4ef86655d764">darkman</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:af09473a311230b57a93a4ef86655d764"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac11209d95e5bbf6a86108ca860f9cfc5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#ac11209d95e5bbf6a86108ca860f9cfc5">slimespring</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:ac11209d95e5bbf6a86108ca860f9cfc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7c417b9b8dd8c4da03e25e28fd5761a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#aa7c417b9b8dd8c4da03e25e28fd5761a">evolve_kill_strike</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:aa7c417b9b8dd8c4da03e25e28fd5761a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53e82f6aeaef748f9378754a9ff8803b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a53e82f6aeaef748f9378754a9ff8803b">leech_spawner</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a53e82f6aeaef748f9378754a9ff8803b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65739d5a70d035190c2891c9591fee54"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a65739d5a70d035190c2891c9591fee54">mon_leech_evolution</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a65739d5a70d035190c2891c9591fee54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2482921ec63e536a2bd13a998a19832f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a2482921ec63e536a2bd13a998a19832f">tindalos_teleport</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a2482921ec63e536a2bd13a998a19832f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af642e98f1e7accbbf605a5d6b082f293"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#af642e98f1e7accbbf605a5d6b082f293">flesh_tendril</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:af642e98f1e7accbbf605a5d6b082f293"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a467112691e63871c66a0c81b236f5f38"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a467112691e63871c66a0c81b236f5f38">bio_op_random_biojutsu</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a467112691e63871c66a0c81b236f5f38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20b5458497cd2c33fa6dea4ec5adc202"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a20b5458497cd2c33fa6dea4ec5adc202">bio_op_takedown</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a20b5458497cd2c33fa6dea4ec5adc202"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af55104213ac374e4cad1babbf0d3a009"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#af55104213ac374e4cad1babbf0d3a009">bio_op_impale</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:af55104213ac374e4cad1babbf0d3a009"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a535178d1fac613ca6f87515de0b30d51"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a535178d1fac613ca6f87515de0b30d51">bio_op_disarm</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a535178d1fac613ca6f87515de0b30d51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb65fd810cb5537ece604f93e297950b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#abb65fd810cb5537ece604f93e297950b">ranged_pull</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:abb65fd810cb5537ece604f93e297950b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6d98508623397f01a9d5ffeebfd460b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#af6d98508623397f01a9d5ffeebfd460b">grab</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:af6d98508623397f01a9d5ffeebfd460b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e5a3f260d767eb958cf1cab89bba139"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a9e5a3f260d767eb958cf1cab89bba139">grab_drag</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a9e5a3f260d767eb958cf1cab89bba139"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5669c48fecab9c36d9ded49280de7899"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a5669c48fecab9c36d9ded49280de7899">suicide</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a5669c48fecab9c36d9ded49280de7899"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a417df1f7014426b1736ddcfc68bed69f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a417df1f7014426b1736ddcfc68bed69f">thrown_by_judo</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a417df1f7014426b1736ddcfc68bed69f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a774768a261f323c61f26af3c063939a3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a774768a261f323c61f26af3c063939a3">riotbot</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a774768a261f323c61f26af3c063939a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab08b3a0dc079b5e5f0eca36b2d0fcb22"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#ab08b3a0dc079b5e5f0eca36b2d0fcb22">stretch_attack</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:ab08b3a0dc079b5e5f0eca36b2d0fcb22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7be87b7fe8fff0649de246bc155cf0b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#ad7be87b7fe8fff0649de246bc155cf0b">stretch_bite</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:ad7be87b7fe8fff0649de246bc155cf0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb3d9ed769522eeacb7a59ef29870f3c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#abb3d9ed769522eeacb7a59ef29870f3c">kamikaze</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:abb3d9ed769522eeacb7a59ef29870f3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4ff21dc47a7f9253c8c2d7ce0064d45"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#ab4ff21dc47a7f9253c8c2d7ce0064d45">grenadier</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:ab4ff21dc47a7f9253c8c2d7ce0064d45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea82e34532936a984dc3eede6c1aff37"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#aea82e34532936a984dc3eede6c1aff37">grenadier_elite</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:aea82e34532936a984dc3eede6c1aff37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7da2dcc474c1415be2fff2af9e3da871"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a7da2dcc474c1415be2fff2af9e3da871">doot</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a7da2dcc474c1415be2fff2af9e3da871"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ff528d847e1c9012c2646531a1423f6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a0ff528d847e1c9012c2646531a1423f6">zombie_fuse</a> (<a class="el" href="classmonster.html">monster</a> *z)</td></tr>
<tr class="separator:a0ff528d847e1c9012c2646531a1423f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa15cec367682f51a8071d832bd2371aa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#aa15cec367682f51a8071d832bd2371aa">taze</a> (<a class="el" href="classmonster.html">monster</a> *z, <a class="el" href="classCreature.html">Creature</a> *target)</td></tr>
<tr class="separator:aa15cec367682f51a8071d832bd2371aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2eb6221fccf307deab17f0240aaf4981"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a2eb6221fccf307deab17f0240aaf4981">rifle</a> (<a class="el" href="classmonster.html">monster</a> *z, <a class="el" href="classCreature.html">Creature</a> *target)</td></tr>
<tr class="separator:a2eb6221fccf307deab17f0240aaf4981"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d8357fbd677c0d10f4ad5500bc9455d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a3d8357fbd677c0d10f4ad5500bc9455d">frag</a> (<a class="el" href="classmonster.html">monster</a> *z, <a class="el" href="classCreature.html">Creature</a> *target)</td></tr>
<tr class="separator:a3d8357fbd677c0d10f4ad5500bc9455d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0681575d21218f143a0d1022654ead3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#ae0681575d21218f143a0d1022654ead3">tankgun</a> (<a class="el" href="classmonster.html">monster</a> *z, <a class="el" href="classCreature.html">Creature</a> *target)</td></tr>
<tr class="separator:ae0681575d21218f143a0d1022654ead3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74c5bd8b75ec90d4af94f3fc218b3eba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a74c5bd8b75ec90d4af94f3fc218b3eba">flame</a> (<a class="el" href="classmonster.html">monster</a> *z, <a class="el" href="classCreature.html">Creature</a> *target)</td></tr>
<tr class="separator:a74c5bd8b75ec90d4af94f3fc218b3eba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4efb8be314551e35f69df8cf8d824174"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemattack.html#a4efb8be314551e35f69df8cf8d824174">dodge_check</a> (<a class="el" href="classmonster.html">monster</a> *z, <a class="el" href="classCreature.html">Creature</a> *target)</td></tr>
<tr class="separator:a4efb8be314551e35f69df8cf8d824174"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa9de2706babaa2248b51b23c533487b0" name="aa9de2706babaa2248b51b23c533487b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9de2706babaa2248b51b23c533487b0">&#9670;&nbsp;</a></span>absorb_meat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::absorb_meat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l04205">4205</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04206" name="l04206"></a><span class="lineno"> 4206</span>{</div>
<div class="line"><a id="l04207" name="l04207"></a><span class="lineno"> 4207</span>    <span class="comment">//Absorb no more than 1/10th monster&#39;s volume, times the volume of a meat chunk</span></div>
<div class="line"><a id="l04208" name="l04208"></a><span class="lineno"> 4208</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> monster_volume = <a class="code hl_function" href="namespaceunits.html#a4e18c5472c3f55e110fb16c9e0fe8c45">units::to_liter</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a304aeb741c4ac28d879d3951dee4cf30">get_volume</a>() );</div>
<div class="line"><a id="l04209" name="l04209"></a><span class="lineno"> 4209</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> average_meat_chunk_volume = 0.5;</div>
<div class="line"><a id="l04210" name="l04210"></a><span class="lineno"> 4210</span>    <span class="comment">// TODO: dynamically get volume of meat</span></div>
<div class="line"><a id="l04211" name="l04211"></a><span class="lineno"> 4211</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> max_meat_absorbed = monster_volume / 10.0 * average_meat_chunk_volume;</div>
<div class="line"><a id="l04212" name="l04212"></a><span class="lineno"> 4212</span>    <span class="comment">//For every milliliter of meat absorbed, heal this many HP</span></div>
<div class="line"><a id="l04213" name="l04213"></a><span class="lineno"> 4213</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> meat_absorption_factor = 0.01;</div>
<div class="line"><a id="l04214" name="l04214"></a><span class="lineno"> 4214</span>    <span class="comment">//Search surrounding tiles for meat</span></div>
<div class="line"><a id="l04215" name="l04215"></a><span class="lineno"> 4215</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;p : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 1 ) ) {</div>
<div class="line"><a id="l04216" name="l04216"></a><span class="lineno"> 4216</span>        <span class="keyword">auto</span> items = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.i_at( p );</div>
<div class="line"><a id="l04217" name="l04217"></a><span class="lineno"> 4217</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;current_item : items ) {</div>
<div class="line"><a id="l04218" name="l04218"></a><span class="lineno"> 4218</span>            <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">material_id</a> current_item_material = current_item.get_base_material().ident();</div>
<div class="line"><a id="l04219" name="l04219"></a><span class="lineno"> 4219</span>            <span class="keywordflow">if</span>( current_item_material == <a class="code hl_typedef" href="type__id_8h.html#a569ce0271cf4ab170e63bb05658be142">material_id</a>( <span class="stringliteral">&quot;flesh&quot;</span> ) ||</div>
<div class="line"><a id="l04220" name="l04220"></a><span class="lineno"> 4220</span>                current_item_material == <a class="code hl_typedef" href="type__id_8h.html#a569ce0271cf4ab170e63bb05658be142">material_id</a>( <span class="stringliteral">&quot;hflesh&quot;</span> ) ) {</div>
<div class="line"><a id="l04221" name="l04221"></a><span class="lineno"> 4221</span>                <span class="comment">//We have something meaty! Calculate how much it will heal the monster</span></div>
<div class="line"><a id="l04222" name="l04222"></a><span class="lineno"> 4222</span>                <span class="keyword">const</span> <span class="keywordtype">int</span> ml_of_meat = units::to_milliliter&lt;int&gt;( current_item.volume() );</div>
<div class="line"><a id="l04223" name="l04223"></a><span class="lineno"> 4223</span>                <span class="keyword">const</span> <span class="keywordtype">int</span> total_charges = current_item.count();</div>
<div class="line"><a id="l04224" name="l04224"></a><span class="lineno"> 4224</span>                <span class="keyword">const</span> <span class="keywordtype">int</span> ml_per_charge = ml_of_meat / total_charges;</div>
<div class="line"><a id="l04225" name="l04225"></a><span class="lineno"> 4225</span>                <span class="comment">//We have a max size of meat here to avoid absorbing whole corpses.</span></div>
<div class="line"><a id="l04226" name="l04226"></a><span class="lineno"> 4226</span>                <span class="keywordflow">if</span>( ml_per_charge &gt; max_meat_absorbed * 1000 ) {</div>
<div class="line"><a id="l04227" name="l04227"></a><span class="lineno"> 4227</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s quivers hungrily in the direction of the %2$s.&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l04228" name="l04228"></a><span class="lineno"> 4228</span>                             current_item.tname() );</div>
<div class="line"><a id="l04229" name="l04229"></a><span class="lineno"> 4229</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04230" name="l04230"></a><span class="lineno"> 4230</span>                }</div>
<div class="line"><a id="l04231" name="l04231"></a><span class="lineno"> 4231</span>                <span class="keywordflow">if</span>( current_item.count_by_charges() ) {</div>
<div class="line"><a id="l04232" name="l04232"></a><span class="lineno"> 4232</span>                    <span class="comment">//Choose a random amount of meat charges to absorb</span></div>
<div class="line"><a id="l04233" name="l04233"></a><span class="lineno"> 4233</span>                    <span class="keywordtype">int</span> meat_absorbed = std::min( max_meat_absorbed, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, total_charges ) );</div>
<div class="line"><a id="l04234" name="l04234"></a><span class="lineno"> 4234</span>                    <span class="keyword">const</span> <span class="keywordtype">int</span> hp_to_heal = meat_absorbed * ml_per_charge * meat_absorption_factor;</div>
<div class="line"><a id="l04235" name="l04235"></a><span class="lineno"> 4235</span>                    z-&gt;<a class="code hl_function" href="classmonster.html#af7763c0da8025aea231a29272f25d5fc">heal</a>( hp_to_heal, <span class="keyword">true</span> );</div>
<div class="line"><a id="l04236" name="l04236"></a><span class="lineno"> 4236</span>                    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.use_charges( p, 0, current_item.type-&gt;get_id(), meat_absorbed );</div>
<div class="line"><a id="l04237" name="l04237"></a><span class="lineno"> 4237</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04238" name="l04238"></a><span class="lineno"> 4238</span>                    <span class="comment">//Only absorb one meaty item</span></div>
<div class="line"><a id="l04239" name="l04239"></a><span class="lineno"> 4239</span>                    <span class="keywordtype">int</span> meat_absorbed = 1;</div>
<div class="line"><a id="l04240" name="l04240"></a><span class="lineno"> 4240</span>                    <span class="keyword">const</span> <span class="keywordtype">int</span> hp_to_heal = meat_absorbed * ml_per_charge * meat_absorption_factor;</div>
<div class="line"><a id="l04241" name="l04241"></a><span class="lineno"> 4241</span>                    z-&gt;<a class="code hl_function" href="classmonster.html#af7763c0da8025aea231a29272f25d5fc">heal</a>( hp_to_heal, <span class="keyword">true</span> );</div>
<div class="line"><a id="l04242" name="l04242"></a><span class="lineno"> 4242</span>                    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.use_amount( p, 0, current_item.type-&gt;get_id(), meat_absorbed );</div>
<div class="line"><a id="l04243" name="l04243"></a><span class="lineno"> 4243</span>                }</div>
<div class="line"><a id="l04244" name="l04244"></a><span class="lineno"> 4244</span>                <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l04245" name="l04245"></a><span class="lineno"> 4245</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s absorbs the %2$s, growing larger.&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l04246" name="l04246"></a><span class="lineno"> 4246</span>                             current_item.tname() );</div>
<div class="line"><a id="l04247" name="l04247"></a><span class="lineno"> 4247</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;The %1$s now has %2$s out of %3$s hp&quot;</span>, z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(), z-&gt;<a class="code hl_function" href="classmonster.html#a2d0e466b9d25796cd99402ddd5d3ce20">get_hp</a>(),</div>
<div class="line"><a id="l04248" name="l04248"></a><span class="lineno"> 4248</span>                             z-&gt;<a class="code hl_function" href="classmonster.html#a551f4a380282f8ec082c74f410c397de">get_hp_max</a>() );</div>
<div class="line"><a id="l04249" name="l04249"></a><span class="lineno"> 4249</span>                }</div>
<div class="line"><a id="l04250" name="l04250"></a><span class="lineno"> 4250</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04251" name="l04251"></a><span class="lineno"> 4251</span>            }</div>
<div class="line"><a id="l04252" name="l04252"></a><span class="lineno"> 4252</span>        }</div>
<div class="line"><a id="l04253" name="l04253"></a><span class="lineno"> 4253</span>    }</div>
<div class="line"><a id="l04254" name="l04254"></a><span class="lineno"> 4254</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04255" name="l04255"></a><span class="lineno"> 4255</span>}</div>
<div class="ttc" id="aartifact_8cpp_html_a70800e95389f34dd34186fafaea2a840"><div class="ttname"><a href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a></div><div class="ttdeci">units::quantity&lt; V, B &gt; rng(const units::quantity&lt; V, B &gt; &amp;min, const units::quantity&lt; V, B &gt; &amp;max)</div><div class="ttdef"><b>Definition:</b> <a href="artifact_8cpp_source.html#l00032">artifact.cpp:32</a></div></div>
<div class="ttc" id="aclassmonster_html_a2d0e466b9d25796cd99402ddd5d3ce20"><div class="ttname"><a href="classmonster.html#a2d0e466b9d25796cd99402ddd5d3ce20">monster::get_hp</a></div><div class="ttdeci">int get_hp(const bodypart_id &amp;) const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l02894">monster.cpp:2894</a></div></div>
<div class="ttc" id="aclassmonster_html_a304aeb741c4ac28d879d3951dee4cf30"><div class="ttname"><a href="classmonster.html#a304aeb741c4ac28d879d3951dee4cf30">monster::get_volume</a></div><div class="ttdeci">units::volume get_volume() const</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l02683">monster.cpp:2683</a></div></div>
<div class="ttc" id="aclassmonster_html_a551f4a380282f8ec082c74f410c397de"><div class="ttname"><a href="classmonster.html#a551f4a380282f8ec082c74f410c397de">monster::get_hp_max</a></div><div class="ttdeci">int get_hp_max(const bodypart_id &amp;) const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l02884">monster.cpp:2884</a></div></div>
<div class="ttc" id="aclassmonster_html_a55d95177d49525c0da7649f135a6306d"><div class="ttname"><a href="classmonster.html#a55d95177d49525c0da7649f135a6306d">monster::pos</a></div><div class="ttdeci">const tripoint &amp; pos() const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00255">monster.cpp:255</a></div></div>
<div class="ttc" id="aclassmonster_html_a7cb9d9786d11c2c0926d3482d3f51ffe"><div class="ttname"><a href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">monster::name</a></div><div class="ttdeci">std::string name(unsigned int quantity=1) const</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00492">monster.cpp:492</a></div></div>
<div class="ttc" id="aclassmonster_html_af7763c0da8025aea231a29272f25d5fc"><div class="ttname"><a href="classmonster.html#af7763c0da8025aea231a29272f25d5fc">monster::heal</a></div><div class="ttdeci">int heal(int delta_hp, bool overheal=false)</div><div class="ttdoc">Flat addition to the monsters hp.</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l01616">monster.cpp:1616</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; material_type &gt;</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a></div><div class="ttdeci">@ m_info</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00258">enums.h:258</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a></div><div class="ttdeci">@ m_debug</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00264">enums.h:264</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a></div><div class="ttdeci">@ m_warning</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00257">enums.h:257</a></div></div>
<div class="ttc" id="agame_8cpp_html_abeb98e93502d73818b4a73fabe191bc1"><div class="ttname"><a href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a></div><div class="ttdeci">std::unique_ptr&lt; game &gt; g</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00267">game.cpp:267</a></div></div>
<div class="ttc" id="amessages_8cpp_html_a54489326fc37823819c5105addfa27f2"><div class="ttname"><a href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a></div><div class="ttdeci">void add_msg(std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l00884">messages.cpp:884</a></div></div>
<div class="ttc" id="anamespaceunits_html_a4e18c5472c3f55e110fb16c9e0fe8c45"><div class="ttname"><a href="namespaceunits.html#a4e18c5472c3f55e110fb16c9e0fe8c45">units::to_liter</a></div><div class="ttdeci">constexpr double to_liter(const volume &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units__volume_8h_source.html#l00043">units_volume.h:43</a></div></div>
<div class="ttc" id="atranslations_8h_html_aa829053017e23ef22d44dccecba63a34"><div class="ttname"><a href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a></div><div class="ttdeci">#define _(msg)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00116">translations.h:116</a></div></div>
<div class="ttc" id="atype__id_8h_html_a569ce0271cf4ab170e63bb05658be142"><div class="ttname"><a href="type__id_8h.html#a569ce0271cf4ab170e63bb05658be142">material_id</a></div><div class="ttdeci">string_id&lt; material_type &gt; material_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00085">type_id.h:85</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="monster_8cpp_source.html#l02894">monster::get_hp()</a>, <a class="el" href="monster_8cpp_source.html#l02884">monster::get_hp_max()</a>, <a class="el" href="monster_8cpp_source.html#l02683">monster::get_volume()</a>, <a class="el" href="monster_8cpp_source.html#l01616">monster::heal()</a>, <a class="el" href="enums_8h_source.html#l00264">m_debug</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, and <a class="el" href="units__volume_8h_source.html#l00043">units::to_liter()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="acdda0be7e7c8dabb76e9bd130547a3fa" name="acdda0be7e7c8dabb76e9bd130547a3fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdda0be7e7c8dabb76e9bd130547a3fa">&#9670;&nbsp;</a></span>acid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::acid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l00581">581</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>{</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classmonster.html#a0f83a7ee7bd8d96efc80200c5a5caf5b">can_act</a>() ) {</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>    }</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span> </div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>    }</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span> </div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>    <span class="comment">// Can&#39;t see/reach target, no attack</span></div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ||</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>        !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.clear_path( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>(), 10, 1, 100 ) ) {</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>    }</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>    <span class="comment">// It takes a while</span></div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 300;</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>    <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 4, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;a spitting noise.&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;misc&quot;</span>,</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>                   <span class="stringliteral">&quot;spitting&quot;</span> );</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span> </div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>    <a class="code hl_struct" href="structprojectile.html">projectile</a> proj;</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>    proj.<a class="code hl_variable" href="structprojectile.html#aa2af53bce63feecb719ef1edba54689e">speed</a> = 10;</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>    <span class="comment">// Mostly just for momentum</span></div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>    proj.<a class="code hl_variable" href="structprojectile.html#a82d8f657f8cfc4e180c15bfab8ca8a6e">impact</a>.<a class="code hl_function" href="structdamage__instance.html#a36067fd68baf04345d0c3626c67b8cac">add_damage</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa8fce673f2bfbb3fdb52be44a8e638c90">DT_ACID</a>, 5 );</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>    proj.<a class="code hl_variable" href="structprojectile.html#a312bc9a78fe7a5fdefb44e3755154db3">range</a> = 10;</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>    proj.<a class="code hl_function" href="structprojectile.html#a05d90cbb1c83669dd7c23477c8f35963">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a2aa953c727f71553252f83fe6cf2abc4">ammo_effect_NO_OVERSHOOT</a> );</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>    <span class="keyword">auto</span> dealt = <a class="code hl_function" href="ballistics_8cpp.html#aeded5f16540ef8f873a7d9eb5edca240">projectile_attack</a>( proj, z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>(), <a class="code hl_class" href="classdispersion__sources.html">dispersion_sources</a>{ 5400 }, z );</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;hitp = dealt.end_point;</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>    <span class="keyword">const</span> <a class="code hl_class" href="classCreature.html">Creature</a> *hit_critter = dealt.hit_critter;</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>    <span class="keywordflow">if</span>( hit_critter == <span class="keyword">nullptr</span> &amp;&amp; <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.hit_with_acid( hitp ) &amp;&amp; <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( hitp ) ) {</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A glob of acid hits the %s!&quot;</span> ),</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>                 <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.tername( hitp ) );</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.impassable( hitp ) ) {</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>            <span class="comment">// TODO: Allow it to spill on the side it hit from</span></div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>        }</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>    }</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span> </div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = -3; i &lt;= 3; i++ ) {</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> j = -3; j &lt;= 3; j++ ) {</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>            <a class="code hl_struct" href="structtripoint.html">tripoint</a> dest = hitp + <a class="code hl_struct" href="structtripoint.html">tripoint</a>( i, j, 0 );</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.passable( dest ) &amp;&amp;</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.clear_path( dest, hitp, 6, 1, 100 ) &amp;&amp;</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>                ( ( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( std::abs( j ) ) &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( std::abs( i ) ) ) || ( i == 0 &amp;&amp; j == 0 ) ) ) {</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_field( dest, <a class="code hl_variable" href="field__type_8cpp.html#ab7a8a9cdb74831f6553f4abf5df22873">fd_acid</a>, 2 );</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>            }</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>        }</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>    }</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span> </div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>}</div>
<div class="ttc" id="aballistics_8cpp_html_aeded5f16540ef8f873a7d9eb5edca240"><div class="ttname"><a href="ballistics_8cpp.html#aeded5f16540ef8f873a7d9eb5edca240">projectile_attack</a></div><div class="ttdeci">dealt_projectile_attack projectile_attack(const projectile &amp;proj_arg, const tripoint &amp;source, const tripoint &amp;target_arg, const dispersion_sources &amp;dispersion, Creature *origin, const vehicle *in_veh)</div><div class="ttdoc">Fires a projectile at the target point from the source point with total_dispersion dispersion.</div><div class="ttdef"><b>Definition:</b> <a href="ballistics_8cpp_source.html#l00201">ballistics.cpp:201</a></div></div>
<div class="ttc" id="aclassCreature_html"><div class="ttname"><a href="classCreature.html">Creature</a></div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00077">creature.h:78</a></div></div>
<div class="ttc" id="aclassCreature_html_a45926a7ba63ccc9be744f87a4d540b7d"><div class="ttname"><a href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos</a></div><div class="ttdeci">virtual const tripoint &amp; pos() const =0</div></div>
<div class="ttc" id="aclassCreature_html_a8c5a392caa213bee9581b47e9f0e2052"><div class="ttname"><a href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">Creature::moves</a></div><div class="ttdeci">int moves</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00569">creature.h:569</a></div></div>
<div class="ttc" id="aclassCreature_html_ab42d5d429a5599b7f80906394c1236e5"><div class="ttname"><a href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">Creature::sees</a></div><div class="ttdeci">virtual bool sees(const Creature &amp;critter) const</div><div class="ttdoc">The functions check whether this creature can see the target.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00202">creature.cpp:202</a></div></div>
<div class="ttc" id="aclassdispersion__sources_html"><div class="ttname"><a href="classdispersion__sources.html">dispersion_sources</a></div><div class="ttdef"><b>Definition:</b> <a href="dispersion_8h_source.html#l00008">dispersion.h:9</a></div></div>
<div class="ttc" id="aclassmonster_html_a0f83a7ee7bd8d96efc80200c5a5caf5b"><div class="ttname"><a href="classmonster.html#a0f83a7ee7bd8d96efc80200c5a5caf5b">monster::can_act</a></div><div class="ttdeci">bool can_act() const</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00931">monster.cpp:931</a></div></div>
<div class="ttc" id="aclassmonster_html_a3414f60cd7b63132b8ab605f6949edf4"><div class="ttname"><a href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">monster::attack_target</a></div><div class="ttdeci">Creature * attack_target()</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00993">monster.cpp:993</a></div></div>
<div class="ttc" id="adamage_8h_html_ae63a2cf8429f9edf77b547d34ffe4e7aa8fce673f2bfbb3fdb52be44a8e638c90"><div class="ttname"><a href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa8fce673f2bfbb3fdb52be44a8e638c90">DT_ACID</a></div><div class="ttdeci">@ DT_ACID</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00026">damage.h:26</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_ab7a8a9cdb74831f6553f4abf5df22873"><div class="ttname"><a href="field__type_8cpp.html#ab7a8a9cdb74831f6553f4abf5df22873">fd_acid</a></div><div class="ttdeci">field_type_id fd_acid</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00342">field_type.cpp:342</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a2aa953c727f71553252f83fe6cf2abc4"><div class="ttname"><a href="monattack_8cpp.html#a2aa953c727f71553252f83fe6cf2abc4">ammo_effect_NO_OVERSHOOT</a></div><div class="ttdeci">static const ammo_effect_str_id ammo_effect_NO_OVERSHOOT(&quot;NO_OVERSHOOT&quot;)</div></div>
<div class="ttc" id="anamespacesounds_html_a6bb79ae1c9c3dcd8c8e0b28c66b0398d"><div class="ttname"><a href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a></div><div class="ttdeci">void sound(const tripoint &amp;p, int vol, sound_t category, const std::string &amp;description, bool ambient=false, const std::string &amp;id=&quot;&quot;, const std::string &amp;variant=&quot;default&quot;)</div><div class="ttdoc">Sound at (p) of intensity (vol)</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l00177">sounds.cpp:177</a></div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a></div><div class="ttdeci">@ combat</div></div>
<div class="ttc" id="arng_8cpp_html_aad28bdad07401a34ecf9912708f8b750"><div class="ttname"><a href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a></div><div class="ttdeci">bool one_in(int chance)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00065">rng.cpp:65</a></div></div>
<div class="ttc" id="astructdamage__instance_html_a36067fd68baf04345d0c3626c67b8cac"><div class="ttname"><a href="structdamage__instance.html#a36067fd68baf04345d0c3626c67b8cac">damage_instance::add_damage</a></div><div class="ttdeci">void add_damage(damage_type dt, float amt, float arpen=0.0f, float arpen_mult=1.0f, float dmg_mult=1.0f)</div><div class="ttdoc">Adds damage to the instance.</div><div class="ttdef"><b>Definition:</b> <a href="damage_8cpp_source.html#l00041">damage.cpp:41</a></div></div>
<div class="ttc" id="astructprojectile_html"><div class="ttname"><a href="structprojectile.html">projectile</a></div><div class="ttdef"><b>Definition:</b> <a href="projectile_8h_source.html#l00020">projectile.h:20</a></div></div>
<div class="ttc" id="astructprojectile_html_a05d90cbb1c83669dd7c23477c8f35963"><div class="ttname"><a href="structprojectile.html#a05d90cbb1c83669dd7c23477c8f35963">projectile::add_effect</a></div><div class="ttdeci">void add_effect(const ammo_effect_str_id &amp;id)</div><div class="ttdef"><b>Definition:</b> <a href="projectile_8h_source.html#l00058">projectile.h:58</a></div></div>
<div class="ttc" id="astructprojectile_html_a312bc9a78fe7a5fdefb44e3755154db3"><div class="ttname"><a href="structprojectile.html#a312bc9a78fe7a5fdefb44e3755154db3">projectile::range</a></div><div class="ttdeci">int range</div><div class="ttdef"><b>Definition:</b> <a href="projectile_8h_source.html#l00026">projectile.h:26</a></div></div>
<div class="ttc" id="astructprojectile_html_a82d8f657f8cfc4e180c15bfab8ca8a6e"><div class="ttname"><a href="structprojectile.html#a82d8f657f8cfc4e180c15bfab8ca8a6e">projectile::impact</a></div><div class="ttdeci">damage_instance impact</div><div class="ttdef"><b>Definition:</b> <a href="projectile_8h_source.html#l00021">projectile.h:21</a></div></div>
<div class="ttc" id="astructprojectile_html_aa2af53bce63feecb719ef1edba54689e"><div class="ttname"><a href="structprojectile.html#aa2af53bce63feecb719ef1edba54689e">projectile::speed</a></div><div class="ttdeci">int speed</div><div class="ttdef"><b>Definition:</b> <a href="projectile_8h_source.html#l00025">projectile.h:25</a></div></div>
<div class="ttc" id="astructtripoint_html"><div class="ttname"><a href="structtripoint.html">tripoint</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00147">point.h:147</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="damage_8cpp_source.html#l00041">damage_instance::add_damage()</a>, <a class="el" href="projectile_8h_source.html#l00058">projectile::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="monattack_8cpp.html#a2aa953c727f71553252f83fe6cf2abc4">ammo_effect_NO_OVERSHOOT</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="monster_8cpp_source.html#l00931">monster::can_act()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::combat</a>, <a class="el" href="damage_8h_source.html#l00026">DT_ACID</a>, <a class="el" href="field__type_8cpp_source.html#l00342">fd_acid</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="projectile_8h_source.html#l00021">projectile::impact</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="ballistics_8cpp_source.html#l00201">projectile_attack()</a>, <a class="el" href="projectile_8h_source.html#l00026">projectile::range</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, and <a class="el" href="projectile_8h_source.html#l00025">projectile::speed</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather_8cpp_source.html#l00211">item::add_rain_to_container()</a>, <a class="el" href="iuse_8cpp_source.html#l04606">iuse::blood_draw()</a>, <a class="el" href="weather_8cpp_source.html#l00319">fill_funnels()</a>, <a class="el" href="weather_8cpp_source.html#l00353">fill_water_collectors()</a>, <a class="el" href="weather__gen_8cpp_source.html#l00123">weather_generator::get_weather()</a>, <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>, <a class="el" href="map__field_8cpp_source.html#l00394">map::process_fields_in_submap()</a>, and <a class="el" href="weather_8cpp_source.html#l00184">retroactively_fill_from_funnel()</a>.</p>

</div>
</div>
<a id="a51683e5cfb62ed5adfe8332a081504df" name="a51683e5cfb62ed5adfe8332a081504df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51683e5cfb62ed5adfe8332a081504df">&#9670;&nbsp;</a></span>acid_accurate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::acid_accurate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l00697">697</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>{</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classmonster.html#a0f83a7ee7bd8d96efc80200c5a5caf5b">can_act</a>() ) {</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>    }</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span> </div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>    }</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span> </div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> range = <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() );</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>    <span class="keywordflow">if</span>( range &gt; 10 || range &lt; 2 || !z-&gt;sees( *target ) ) {</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>    }</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span> </div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 50;</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span> </div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>    <a class="code hl_struct" href="structprojectile.html">projectile</a> proj;</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>    proj.<a class="code hl_variable" href="structprojectile.html#aa2af53bce63feecb719ef1edba54689e">speed</a> = 10;</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>    proj.<a class="code hl_variable" href="structprojectile.html#a312bc9a78fe7a5fdefb44e3755154db3">range</a> = 10;</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>    proj.<a class="code hl_function" href="structprojectile.html#a05d90cbb1c83669dd7c23477c8f35963">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#aca5c34a4efa7eb7aad971e0c6ad33441">ammo_effect_BLINDS_EYES</a> );</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>    proj.<a class="code hl_function" href="structprojectile.html#a05d90cbb1c83669dd7c23477c8f35963">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#afc8900d83dd4d83ef6ea32b9661faba7">ammo_effect_NO_DAMAGE_SCALING</a> );</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>    proj.<a class="code hl_variable" href="structprojectile.html#a82d8f657f8cfc4e180c15bfab8ca8a6e">impact</a>.<a class="code hl_function" href="structdamage__instance.html#a36067fd68baf04345d0c3626c67b8cac">add_damage</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa8fce673f2bfbb3fdb52be44a8e638c90">DT_ACID</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 3, 5 ) );</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>    <span class="comment">// Make it arbitrarily less accurate at close ranges</span></div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>    <a class="code hl_function" href="ballistics_8cpp.html#aeded5f16540ef8f873a7d9eb5edca240">projectile_attack</a>( proj, z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>(), <a class="code hl_class" href="classdispersion__sources.html">dispersion_sources</a>{ 8000.0 * range }, z );</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span> </div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>}</div>
<div class="ttc" id="acoordinates_8h_html_a47953b33a873caa0861b12222842a5ec"><div class="ttname"><a href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a></div><div class="ttdeci">int rl_dist(const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00519">coordinates.h:519</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_aca5c34a4efa7eb7aad971e0c6ad33441"><div class="ttname"><a href="monattack_8cpp.html#aca5c34a4efa7eb7aad971e0c6ad33441">ammo_effect_BLINDS_EYES</a></div><div class="ttdeci">static const ammo_effect_str_id ammo_effect_BLINDS_EYES(&quot;BLINDS_EYES&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_afc8900d83dd4d83ef6ea32b9661faba7"><div class="ttname"><a href="monattack_8cpp.html#afc8900d83dd4d83ef6ea32b9661faba7">ammo_effect_NO_DAMAGE_SCALING</a></div><div class="ttdeci">static const ammo_effect_str_id ammo_effect_NO_DAMAGE_SCALING(&quot;NO_DAMAGE_SCALING&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="damage_8cpp_source.html#l00041">damage_instance::add_damage()</a>, <a class="el" href="projectile_8h_source.html#l00058">projectile::add_effect()</a>, <a class="el" href="monattack_8cpp.html#aca5c34a4efa7eb7aad971e0c6ad33441">ammo_effect_BLINDS_EYES</a>, <a class="el" href="monattack_8cpp.html#afc8900d83dd4d83ef6ea32b9661faba7">ammo_effect_NO_DAMAGE_SCALING</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="monster_8cpp_source.html#l00931">monster::can_act()</a>, <a class="el" href="damage_8h_source.html#l00026">DT_ACID</a>, <a class="el" href="projectile_8h_source.html#l00021">projectile::impact</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="ballistics_8cpp_source.html#l00201">projectile_attack()</a>, <a class="el" href="projectile_8h_source.html#l00026">projectile::range</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, and <a class="el" href="projectile_8h_source.html#l00025">projectile::speed</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="adcb666efd385834891ffd25095ba1244" name="adcb666efd385834891ffd25095ba1244"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcb666efd385834891ffd25095ba1244">&#9670;&nbsp;</a></span>acid_barf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::acid_barf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l00634">634</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>{</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classmonster.html#a0f83a7ee7bd8d96efc80200c5a5caf5b">can_act</a>() ) {</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>    }</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span> </div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>    <span class="comment">// Let it be used on non-player creatures</span></div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> || !<a class="code hl_function" href="monattack_8cpp.html#abf0d71b531a799a8eb3fd58a846064db">is_adjacent</a>( z, target, <span class="keyword">false</span> ) ) {</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>    }</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span> </div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 80;</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>    <span class="comment">// Make sure it happens before uncanny dodge</span></div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_field( target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>(), <a class="code hl_variable" href="field__type_8cpp.html#ab7a8a9cdb74831f6553f4abf5df22873">fd_acid</a>, 1 );</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>    <span class="keywordtype">bool</span> uncanny = target-&gt;<a class="code hl_function" href="classCreature.html#afd2f1b1e5bafdef20afddbb704b1d5a5">uncanny_dodge</a>();</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>    <span class="comment">// Can we dodge the attack? Uses player dodge function % chance (melee.cpp)</span></div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>    <span class="keywordflow">if</span>( uncanny || <a class="code hl_function" href="namespacemattack.html#a4efb8be314551e35f69df8cf8d824174">dodge_check</a>( z, target ) ) {</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>        <span class="keyword">auto</span> msg_type = target == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ? <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a> : <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>;</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( msg_type,</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s barfs acid at you, but you dodge!&quot;</span> ),</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s barfs acid at &lt;npcname&gt;, but they dodge!&quot;</span> ),</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>                                       z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>        <span class="keywordflow">if</span>( !uncanny ) {</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>            target-&gt;<a class="code hl_function" href="classCreature.html#af56188882e3300853d18f166738ee37a">on_dodge</a>( z, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> * 2 );</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>        }</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span> </div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>    }</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span> </div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>    <a class="code hl_enumeration" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980">body_part</a> hit = target-&gt;<a class="code hl_function" href="classCreature.html#a51c96c81ae1ea766b5eead4a265c1492">get_random_body_part</a>()-&gt;token;</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>    <span class="keywordtype">int</span> dam = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 5, 12 );</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>    dam = target-&gt;<a class="code hl_function" href="classCreature.html#a75ad96eb6ce27d3c1df250965b4de7b5">deal_damage</a>( z, <a class="code hl_function" href="bodypart_8cpp.html#ae34a481a7c686b233f2d8c48e43b723a">convert_bp</a>( hit ).<span class="keywordtype">id</span>(), <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa8fce673f2bfbb3fdb52be44a8e638c90">DT_ACID</a>,</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>                               dam ) ).<a class="code hl_function" href="structdealt__damage__instance.html#a86b702070a1c313624abc78ff34eff48">total_damage</a>();</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>    target-&gt;<a class="code hl_function" href="classCreature.html#aeb7869963d4c1060c4d928424511d2e0">add_env_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a489bb033f6a8cb9073ba12f2e4dd5d92">effect_corroding</a>, hit, 5, <a class="code hl_function" href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a>( dam / 2 + 5 ), hit );</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span> </div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>    <span class="keywordflow">if</span>( dam &gt; 0 ) {</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>        <span class="keyword">auto</span> msg_type = target == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ? <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a> : <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>;</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( msg_type,</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>                                       <span class="comment">//~ 1$s is monster name, 2$s bodypart in accusative</span></div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s barfs acid on your %2$s for %3$d damage!&quot;</span> ),</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>                                       <span class="comment">//~ 1$s is monster name, 2$s bodypart in accusative</span></div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s barfs acid on &lt;npcname&gt;&#39;s %2$s for %3$d damage!&quot;</span> ),</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>                                       z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>                                       <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( hit ),</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>                                       dam );</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span> </div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>        <span class="keywordflow">if</span>( hit == <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2055386ee220ee2ca3e61d13df65e868">bp_eyes</a> ) {</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>            target-&gt;<a class="code hl_function" href="classCreature.html#aeb7869963d4c1060c4d928424511d2e0">add_env_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a09e952ef4d27618e2f60ec737a8d1bae">effect_blind</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2055386ee220ee2ca3e61d13df65e868">bp_eyes</a>, 3, 1_minutes );</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>        }</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>(</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>            <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s barfs acid on your %2$s, but it washes off the armor!&quot;</span> ),</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>            <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s barfs acid on &lt;npcname&gt;&#39;s %2$s, but it washes off the armor!&quot;</span> ),</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>            z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>            <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( hit ) );</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>    }</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span> </div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">on_hit</a>( z, <a class="code hl_function" href="bodypart_8cpp.html#ae34a481a7c686b233f2d8c48e43b723a">convert_bp</a>( hit ).<span class="keywordtype">id</span>(),  z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> );</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span> </div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>}</div>
<div class="ttc" id="abodypart_8cpp_html_ab29c0bad9828b787ace4d04a5e951c6b"><div class="ttname"><a href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a></div><div class="ttdeci">std::string body_part_name_accusative(body_part bp, int number)</div><div class="ttdoc">Returns the matching accusative name of the body_part token, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8cpp_source.html#l00329">bodypart.cpp:329</a></div></div>
<div class="ttc" id="abodypart_8cpp_html_ae34a481a7c686b233f2d8c48e43b723a"><div class="ttname"><a href="bodypart_8cpp.html#ae34a481a7c686b233f2d8c48e43b723a">convert_bp</a></div><div class="ttdeci">const bodypart_str_id &amp; convert_bp(body_part bp)</div><div class="ttdoc">Returns the new id for old token.</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8cpp_source.html#l00185">bodypart.cpp:185</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980">body_part</a></div><div class="ttdeci">body_part</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00039">bodypart.h:39</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a2055386ee220ee2ca3e61d13df65e868"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2055386ee220ee2ca3e61d13df65e868">bp_eyes</a></div><div class="ttdeci">@ bp_eyes</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00042">bodypart.h:42</a></div></div>
<div class="ttc" id="aclassCreature_html_a29989737d8bdd693384ee1c193ce7270"><div class="ttname"><a href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">Creature::on_hit</a></div><div class="ttdeci">virtual void on_hit(Creature *source, bodypart_id bp_hit, float difficulty=INT_MIN, dealt_projectile_attack const *proj=nullptr)=0</div><div class="ttdoc">This creature just got hit by an attack - possibly special/ranged attack - from source.</div></div>
<div class="ttc" id="aclassCreature_html_a51c96c81ae1ea766b5eead4a265c1492"><div class="ttname"><a href="classCreature.html#a51c96c81ae1ea766b5eead4a265c1492">Creature::get_random_body_part</a></div><div class="ttdeci">bodypart_id get_random_body_part(bool main=false) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01614">creature.cpp:1614</a></div></div>
<div class="ttc" id="aclassCreature_html_a75ad96eb6ce27d3c1df250965b4de7b5"><div class="ttname"><a href="classCreature.html#a75ad96eb6ce27d3c1df250965b4de7b5">Creature::deal_damage</a></div><div class="ttdeci">virtual dealt_damage_instance deal_damage(Creature *source, bodypart_id bp, const damage_instance &amp;dam)</div><div class="ttdoc">Deals the damage via an attack.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00873">creature.cpp:873</a></div></div>
<div class="ttc" id="aclassCreature_html_a7cf71d2bd6c350f2ceda3f1d64046e63"><div class="ttname"><a href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">Creature::add_msg_player_or_npc</a></div><div class="ttdeci">virtual void add_msg_player_or_npc(const std::string &amp;, const std::string &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00677">creature.h:677</a></div></div>
<div class="ttc" id="aclassCreature_html_aeb7869963d4c1060c4d928424511d2e0"><div class="ttname"><a href="classCreature.html#aeb7869963d4c1060c4d928424511d2e0">Creature::add_env_effect</a></div><div class="ttdeci">bool add_env_effect(const efftype_id &amp;eff_id, body_part vector, int strength, const time_duration &amp;dur, body_part bp=num_bp, int intensity=1, bool force=false)</div><div class="ttdoc">Gives chance to save via environmental resist, returns false if resistance was successful.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01106">creature.cpp:1106</a></div></div>
<div class="ttc" id="aclassCreature_html_af56188882e3300853d18f166738ee37a"><div class="ttname"><a href="classCreature.html#af56188882e3300853d18f166738ee37a">Creature::on_dodge</a></div><div class="ttdeci">virtual void on_dodge(Creature *source, float difficulty)=0</div><div class="ttdoc">This creature just dodged an attack - possibly special/ranged attack - from source.</div></div>
<div class="ttc" id="aclassCreature_html_afd2f1b1e5bafdef20afddbb704b1d5a5"><div class="ttname"><a href="classCreature.html#afd2f1b1e5bafdef20afddbb704b1d5a5">Creature::uncanny_dodge</a></div><div class="ttdeci">virtual bool uncanny_dodge()</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00485">creature.h:485</a></div></div>
<div class="ttc" id="aclassmonster_html_aa30f973bf524ba275ada847f6118b048"><div class="ttname"><a href="classmonster.html#aa30f973bf524ba275ada847f6118b048">monster::type</a></div><div class="ttdeci">const mtype * type</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00478">monster.h:478</a></div></div>
<div class="ttc" id="aclasstime__duration_html_a0f7145f4fc4c09defbaf25f468e4e54a"><div class="ttname"><a href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a></div><div class="ttdeci">static constexpr time_duration from_turns(const T t)</div><div class="ttdoc">Named constructors to get a duration representing a multiple of the named time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00204">calendar.h:204</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00254">enums.h:254</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a09e952ef4d27618e2f60ec737a8d1bae"><div class="ttname"><a href="monattack_8cpp.html#a09e952ef4d27618e2f60ec737a8d1bae">effect_blind</a></div><div class="ttdeci">static const efftype_id effect_blind(&quot;blind&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a489bb033f6a8cb9073ba12f2e4dd5d92"><div class="ttname"><a href="monattack_8cpp.html#a489bb033f6a8cb9073ba12f2e4dd5d92">effect_corroding</a></div><div class="ttdeci">static const efftype_id effect_corroding(&quot;corroding&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_abf0d71b531a799a8eb3fd58a846064db"><div class="ttname"><a href="monattack_8cpp.html#abf0d71b531a799a8eb3fd58a846064db">is_adjacent</a></div><div class="ttdeci">static bool is_adjacent(const monster *z, const Creature *target, const bool allow_zlev)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l00275">monattack.cpp:275</a></div></div>
<div class="ttc" id="anamespacemattack_html_a4efb8be314551e35f69df8cf8d824174"><div class="ttname"><a href="namespacemattack.html#a4efb8be314551e35f69df8cf8d824174">mattack::dodge_check</a></div><div class="ttdeci">bool dodge_check(monster *z, Creature *target)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l05764">monattack.cpp:5764</a></div></div>
<div class="ttc" id="astructdamage__instance_html"><div class="ttname"><a href="structdamage__instance.html">damage_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00051">damage.h:51</a></div></div>
<div class="ttc" id="astructdealt__damage__instance_html_a86b702070a1c313624abc78ff34eff48"><div class="ttname"><a href="structdealt__damage__instance.html#a86b702070a1c313624abc78ff34eff48">dealt_damage_instance::total_damage</a></div><div class="ttdeci">int total_damage() const</div><div class="ttdef"><b>Definition:</b> <a href="damage_8cpp_source.html#l00180">damage.cpp:180</a></div></div>
<div class="ttc" id="astructmtype_html_a575a59af47aec8bf8bfb9021eb4dddf5"><div class="ttname"><a href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">mtype::melee_skill</a></div><div class="ttdeci">int melee_skill</div><div class="ttdoc">moves per regular attack</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00285">mtype.h:285</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8cpp_source.html#l01106">Creature::add_env_effect()</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="bodypart_8cpp_source.html#l00329">body_part_name_accusative()</a>, <a class="el" href="bodypart_8h_source.html#l00042">bp_eyes</a>, <a class="el" href="monster_8cpp_source.html#l00931">monster::can_act()</a>, <a class="el" href="bodypart_8cpp_source.html#l00185">convert_bp()</a>, <a class="el" href="creature_8cpp_source.html#l00873">Creature::deal_damage()</a>, <a class="el" href="monattack_8cpp_source.html#l05764">dodge_check()</a>, <a class="el" href="damage_8h_source.html#l00026">DT_ACID</a>, <a class="el" href="monattack_8cpp.html#a09e952ef4d27618e2f60ec737a8d1bae">effect_blind</a>, <a class="el" href="monattack_8cpp.html#a489bb033f6a8cb9073ba12f2e4dd5d92">effect_corroding</a>, <a class="el" href="field__type_8cpp_source.html#l00342">fd_acid</a>, <a class="el" href="calendar_8h_source.html#l00204">time_duration::from_turns()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8cpp_source.html#l01614">Creature::get_random_body_part()</a>, <a class="el" href="monattack_8cpp_source.html#l00275">is_adjacent()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="mtype_8h_source.html#l00285">mtype::melee_skill</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="classCreature.html#af56188882e3300853d18f166738ee37a">Creature::on_dodge()</a>, <a class="el" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">Creature::on_hit()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="damage_8cpp_source.html#l00180">dealt_damage_instance::total_damage()</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, and <a class="el" href="creature_8h_source.html#l00485">Creature::uncanny_dodge()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a016e0e9bd24e2c55f0945833701c2a26" name="a016e0e9bd24e2c55f0945833701c2a26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a016e0e9bd24e2c55f0945833701c2a26">&#9670;&nbsp;</a></span>antqueen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::antqueen </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l00369">369</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>{</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>    std::vector&lt;tripoint&gt; egg_points;</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>    std::vector&lt;monster *&gt; ants;</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>    <span class="comment">// Count up all adjacent tiles the contain at least one egg.</span></div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;dest : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 2 ) ) {</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.impassable( dest ) ) {</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>        }</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span> </div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>        <span class="keywordflow">if</span>( <a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">const</span> mon = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at&lt;<a class="code hl_class" href="classmonster.html">monster</a>&gt;( dest ) ) {</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>            <span class="keywordflow">if</span>( mon-&gt;type-&gt;default_faction == <a class="code hl_class" href="classint__id.html">mfaction_id</a>( <span class="stringliteral">&quot;ant&quot;</span> ) &amp;&amp; mon-&gt;type-&gt;upgrades ) {</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>                ants.push_back( mon );</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>            }</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span> </div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>        }</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span> </div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_empty( dest ) &amp;&amp; <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.has_items( dest ) ) {</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>            <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;i : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.i_at( dest ) ) {</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>                <span class="keywordflow">if</span>( i.typeId() == <a class="code hl_variable" href="monattack_8cpp.html#a3aba900e0b1a9abaa72549ed33ee144d">itype_ant_egg</a> ) {</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>                    egg_points.push_back( dest );</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>                    <span class="comment">// Done looking at this tile</span></div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>                }</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>            }</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>        }</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>    }</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span> </div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>    <span class="keywordflow">if</span>( !ants.empty() ) {</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>        <span class="comment">// It takes a while</span></div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>        z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 100;</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>        <a class="code hl_class" href="classmonster.html">monster</a> *ant = <a class="code hl_function" href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a>( ants );</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) &amp;&amp; <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *ant ) ) {</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s feeds an %2$s and it grows!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>                     ant-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>        }</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>        ant-&gt;<a class="code hl_function" href="classmonster.html#a39d78be1e47deaf970439c3b9504e5d9">poly</a>( ant-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#ac91d572a0dbdf7e6b24876b0d18535cb">upgrade_into</a> );</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( egg_points.empty() ) {</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>        <span class="comment">// There&#39;s no eggs nearby--lay one.</span></div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s lays an egg!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>        }</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.spawn_item( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), <span class="stringliteral">&quot;ant_egg&quot;</span>, 1, 0, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>        <span class="comment">// There are eggs nearby.  Let&#39;s hatch some.</span></div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>        <span class="comment">// It takes a while</span></div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>        z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 20 * egg_points.size();</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s tends nearby eggs, and they hatch!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>        }</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;egg_pos : egg_points ) {</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>            <a class="code hl_class" href="classmap__stack.html">map_stack</a> items = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.i_at( egg_pos );</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>            <span class="keywordflow">for</span>( <a class="code hl_class" href="classcata_1_1colony_1_1colony__iterator.html">map_stack::iterator</a> it = items.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(); it != items.<a class="code hl_function" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(); ) {</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>                <span class="keywordflow">if</span>( it-&gt;typeId() != <a class="code hl_variable" href="monattack_8cpp.html#a3aba900e0b1a9abaa72549ed33ee144d">itype_ant_egg</a> ) {</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>                    ++it;</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>                }</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>                <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">mtype_id</a> &amp;mt = z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a> == <a class="code hl_variable" href="monattack_8cpp.html#a67004215d3b0b5a67cc34ccf30a87aac">mon_ant_acid_queen</a> ? <a class="code hl_variable" href="monattack_8cpp.html#af2ac57cb3407e95b07df0be21990b6a1">mon_ant_acid_larva</a> : <a class="code hl_variable" href="monattack_8cpp.html#a288c2ad1b212afcc095fa0c4f9a4a7a4">mon_ant_larva</a>;</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>                <span class="comment">// Max one hatch per tile</span></div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>                <span class="keywordflow">if</span>( <a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">const</span> mon = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_at( mt, egg_pos ) ) {</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>                    mon-&gt;make_ally( *z );</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>                    it = items.<a class="code hl_function" href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">erase</a>( it );</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>                }</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>            }</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>        }</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>    }</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span> </div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>}</div>
<div class="ttc" id="aclasscata_1_1colony_1_1colony__iterator_html"><div class="ttname"><a href="classcata_1_1colony_1_1colony__iterator.html">cata::colony::colony_iterator&lt; false &gt;</a></div></div>
<div class="ttc" id="aclassint__id_html"><div class="ttname"><a href="classint__id.html">int_id&lt; monfaction &gt;</a></div></div>
<div class="ttc" id="aclassitem__stack_html_a588d49cd17fbf3c64227906758940769"><div class="ttname"><a href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">item_stack::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00028">item_stack.cpp:28</a></div></div>
<div class="ttc" id="aclassitem__stack_html_ad04a969155cc139c54a6a3b4a3395454"><div class="ttname"><a href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">item_stack::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00033">item_stack.cpp:33</a></div></div>
<div class="ttc" id="aclassmap__stack_html"><div class="ttname"><a href="classmap__stack.html">map_stack</a></div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00100">map.h:101</a></div></div>
<div class="ttc" id="aclassmap__stack_html_ab58ec66a7ca2e476c6d90967dccc8062"><div class="ttname"><a href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">map_stack::erase</a></div><div class="ttdeci">iterator erase(const_iterator it) override</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00147">map.cpp:147</a></div></div>
<div class="ttc" id="aclassmonster_html"><div class="ttname"><a href="classmonster.html">monster</a></div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00083">monster.h:84</a></div></div>
<div class="ttc" id="aclassmonster_html_a39d78be1e47deaf970439c3b9504e5d9"><div class="ttname"><a href="classmonster.html#a39d78be1e47deaf970439c3b9504e5d9">monster::poly</a></div><div class="ttdeci">void poly(const mtype_id &amp;id)</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00260">monster.cpp:260</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a288c2ad1b212afcc095fa0c4f9a4a7a4"><div class="ttname"><a href="monattack_8cpp.html#a288c2ad1b212afcc095fa0c4f9a4a7a4">mon_ant_larva</a></div><div class="ttdeci">static const mtype_id mon_ant_larva(&quot;mon_ant_larva&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a3aba900e0b1a9abaa72549ed33ee144d"><div class="ttname"><a href="monattack_8cpp.html#a3aba900e0b1a9abaa72549ed33ee144d">itype_ant_egg</a></div><div class="ttdeci">static const itype_id itype_ant_egg(&quot;ant_egg&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a67004215d3b0b5a67cc34ccf30a87aac"><div class="ttname"><a href="monattack_8cpp.html#a67004215d3b0b5a67cc34ccf30a87aac">mon_ant_acid_queen</a></div><div class="ttdeci">static const mtype_id mon_ant_acid_queen(&quot;mon_ant_acid_queen&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_af2ac57cb3407e95b07df0be21990b6a1"><div class="ttname"><a href="monattack_8cpp.html#af2ac57cb3407e95b07df0be21990b6a1">mon_ant_acid_larva</a></div><div class="ttdeci">static const mtype_id mon_ant_acid_larva(&quot;mon_ant_acid_larva&quot;)</div></div>
<div class="ttc" id="anamespacecalendar_html_ae15fcbf1c971589eb49c1a657fb6a580"><div class="ttname"><a href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a></div><div class="ttdeci">time_point turn</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00036">calendar.cpp:36</a></div></div>
<div class="ttc" id="arng_8h_html_a12244355ee77108f1b08618e9962e4d1"><div class="ttname"><a href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a></div><div class="ttdeci">V random_entry(const C &amp;container, D default_value)</div><div class="ttdoc">Returns a random entry in the container.</div><div class="ttdef"><b>Definition:</b> <a href="rng_8h_source.html#l00088">rng.h:88</a></div></div>
<div class="ttc" id="astructmtype_html_a60dea81cdc4c627313e540831d311b5a"><div class="ttname"><a href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">mtype::id</a></div><div class="ttdeci">mtype_id id</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00240">mtype.h:240</a></div></div>
<div class="ttc" id="astructmtype_html_ac91d572a0dbdf7e6b24876b0d18535cb"><div class="ttname"><a href="structmtype.html#ac91d572a0dbdf7e6b24876b0d18535cb">mtype::upgrade_into</a></div><div class="ttdeci">mtype_id upgrade_into</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00326">mtype.h:326</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="item__stack_8cpp_source.html#l00028">item_stack::begin()</a>, <a class="el" href="item__stack_8cpp_source.html#l00033">item_stack::end()</a>, <a class="el" href="map_8cpp_source.html#l00147">map_stack::erase()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="mtype_8h_source.html#l00240">mtype::id</a>, <a class="el" href="monattack_8cpp.html#a3aba900e0b1a9abaa72549ed33ee144d">itype_ant_egg</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="monattack_8cpp.html#af2ac57cb3407e95b07df0be21990b6a1">mon_ant_acid_larva</a>, <a class="el" href="monattack_8cpp.html#a67004215d3b0b5a67cc34ccf30a87aac">mon_ant_acid_queen</a>, <a class="el" href="monattack_8cpp.html#a288c2ad1b212afcc095fa0c4f9a4a7a4">mon_ant_larva</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="monster_8cpp_source.html#l00260">monster::poly()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="rng_8h_source.html#l00088">random_entry()</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, and <a class="el" href="mtype_8h_source.html#l00326">mtype::upgrade_into</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a535178d1fac613ca6f87515de0b30d51" name="a535178d1fac613ca6f87515de0b30d51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a535178d1fac613ca6f87515de0b30d51">&#9670;&nbsp;</a></span>bio_op_disarm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::bio_op_disarm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
Strength increases chance to avoid disarm, primary stat Dexterity increases chance to avoid disarm, secondary stat Perception increases chance to avoid disarm, secondary stat Melee increases chance to avoid disarm 
<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l05275">5275</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05276" name="l05276"></a><span class="lineno"> 5276</span>{</div>
<div class="line"><a id="l05277" name="l05277"></a><span class="lineno"> 5277</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classmonster.html#a0f83a7ee7bd8d96efc80200c5a5caf5b">can_act</a>() ) {</div>
<div class="line"><a id="l05278" name="l05278"></a><span class="lineno"> 5278</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05279" name="l05279"></a><span class="lineno"> 5279</span>    }</div>
<div class="line"><a id="l05280" name="l05280"></a><span class="lineno"> 5280</span> </div>
<div class="line"><a id="l05281" name="l05281"></a><span class="lineno"> 5281</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l05282" name="l05282"></a><span class="lineno"> 5282</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ||</div>
<div class="line"><a id="l05283" name="l05283"></a><span class="lineno"> 5283</span>        !<a class="code hl_function" href="monattack_8cpp.html#abf0d71b531a799a8eb3fd58a846064db">is_adjacent</a>( z, target, <span class="keyword">false</span> ) ||</div>
<div class="line"><a id="l05284" name="l05284"></a><span class="lineno"> 5284</span>        !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l05285" name="l05285"></a><span class="lineno"> 5285</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05286" name="l05286"></a><span class="lineno"> 5286</span>    }</div>
<div class="line"><a id="l05287" name="l05287"></a><span class="lineno"> 5287</span> </div>
<div class="line"><a id="l05288" name="l05288"></a><span class="lineno"> 5288</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> seen = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z );</div>
<div class="line"><a id="l05289" name="l05289"></a><span class="lineno"> 5289</span>    <a class="code hl_class" href="classplayer.html">player</a> *foe = <span class="keyword">dynamic_cast&lt;</span> <a class="code hl_class" href="classplayer.html">player</a> * <span class="keyword">&gt;</span>( target );</div>
<div class="line"><a id="l05290" name="l05290"></a><span class="lineno"> 5290</span> </div>
<div class="line"><a id="l05291" name="l05291"></a><span class="lineno"> 5291</span>    <span class="comment">// disarm doesn&#39;t work on creatures or unarmed targets</span></div>
<div class="line"><a id="l05292" name="l05292"></a><span class="lineno"> 5292</span>    <span class="keywordflow">if</span>( foe == <span class="keyword">nullptr</span> || ( foe != <span class="keyword">nullptr</span> &amp;&amp; !foe-&gt;<a class="code hl_function" href="classCharacter.html#ad79464264cb8a2061f5888d092f5cd86">is_armed</a>() ) ) {</div>
<div class="line"><a id="l05293" name="l05293"></a><span class="lineno"> 5293</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05294" name="l05294"></a><span class="lineno"> 5294</span>    }</div>
<div class="line"><a id="l05295" name="l05295"></a><span class="lineno"> 5295</span> </div>
<div class="line"><a id="l05296" name="l05296"></a><span class="lineno"> 5296</span>    <span class="keywordflow">if</span>( seen ) {</div>
<div class="line"><a id="l05297" name="l05297"></a><span class="lineno"> 5297</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s mechanically reaches for %2$s!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l05298" name="l05298"></a><span class="lineno"> 5298</span>                 target-&gt;<a class="code hl_function" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">disp_name</a>() );</div>
<div class="line"><a id="l05299" name="l05299"></a><span class="lineno"> 5299</span>    }</div>
<div class="line"><a id="l05300" name="l05300"></a><span class="lineno"> 5300</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 100;</div>
<div class="line"><a id="l05301" name="l05301"></a><span class="lineno"> 5301</span> </div>
<div class="line"><a id="l05302" name="l05302"></a><span class="lineno"> 5302</span>    <span class="keywordflow">if</span>( target-&gt;<a class="code hl_function" href="classCreature.html#afd2f1b1e5bafdef20afddbb704b1d5a5">uncanny_dodge</a>() ) {</div>
<div class="line"><a id="l05303" name="l05303"></a><span class="lineno"> 5303</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05304" name="l05304"></a><span class="lineno"> 5304</span>    }</div>
<div class="line"><a id="l05305" name="l05305"></a><span class="lineno"> 5305</span> </div>
<div class="line"><a id="l05306" name="l05306"></a><span class="lineno"> 5306</span>    <span class="comment">// Can we dodge the attack? Uses player dodge function % chance (melee.cpp)</span></div>
<div class="line"><a id="l05307" name="l05307"></a><span class="lineno"> 5307</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacemattack.html#a4efb8be314551e35f69df8cf8d824174">dodge_check</a>( z, target ) ) {</div>
<div class="line"><a id="l05308" name="l05308"></a><span class="lineno"> 5308</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You dodge it!&quot;</span> ),</div>
<div class="line"><a id="l05309" name="l05309"></a><span class="lineno"> 5309</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; dodges it!&quot;</span> ) );</div>
<div class="line"><a id="l05310" name="l05310"></a><span class="lineno"> 5310</span>        target-&gt;<a class="code hl_function" href="classCreature.html#af56188882e3300853d18f166738ee37a">on_dodge</a>( z, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> * 2 );</div>
<div class="line"><a id="l05311" name="l05311"></a><span class="lineno"> 5311</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05312" name="l05312"></a><span class="lineno"> 5312</span>    }</div>
<div class="line"><a id="l05313" name="l05313"></a><span class="lineno"> 5313</span> </div>
<div class="line"><a id="l05314" name="l05314"></a><span class="lineno"> 5314</span>    <span class="keywordtype">int</span> mon_stat = z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a561d4830d7f7c613c177f5880c2e15fb">melee_dice</a> * z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#af346fa78fe3bff4e8e321e9046bc9717">melee_sides</a>;</div>
<div class="line"><a id="l05315" name="l05315"></a><span class="lineno"> 5315</span>    <span class="keywordtype">int</span> my_roll = <a class="code hl_function" href="rng_8cpp.html#a7ba03e7147e43d808dc29c54bce9e57f">dice</a>( 3, 2 * mon_stat );</div>
<div class="line"><a id="l05316" name="l05316"></a><span class="lineno"> 5316</span>    my_roll += <a class="code hl_function" href="rng_8cpp.html#a7ba03e7147e43d808dc29c54bce9e57f">dice</a>( 3, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> );</div>
<div class="line"><a id="l05317" name="l05317"></a><span class="lineno"> 5317</span><span class="comment"></span> </div>
<div class="line"><a id="l05318" name="l05318"></a><span class="lineno"> 5318</span><span class="comment">    /** @EFFECT_STR increases chance to avoid disarm, primary stat */</span><span class="comment"></span></div>
<div class="line"><a id="l05319" name="l05319"></a><span class="lineno"> 5319</span><span class="comment">    /** @EFFECT_DEX increases chance to avoid disarm, secondary stat */</span><span class="comment"></span></div>
<div class="line"><a id="l05320" name="l05320"></a><span class="lineno"> 5320</span><span class="comment">    /** @EFFECT_PER increases chance to avoid disarm, secondary stat */</span><span class="comment"></span></div>
<div class="line"><a id="l05321" name="l05321"></a><span class="lineno"> 5321</span><span class="comment">    /** @EFFECT_MELEE increases chance to avoid disarm */</span></div>
<div class="line"><a id="l05322" name="l05322"></a><span class="lineno"> 5322</span>    <span class="keywordtype">int</span> their_roll = <a class="code hl_function" href="rng_8cpp.html#a7ba03e7147e43d808dc29c54bce9e57f">dice</a>( 3, 2 * foe-&gt;<a class="code hl_function" href="classCharacter.html#a5aba683ccf77cb560a0a932308289bd9">get_str</a>() + foe-&gt;<a class="code hl_function" href="classCharacter.html#a34a927d0f161ac92ab0d462397828bd5">get_dex</a>() );</div>
<div class="line"><a id="l05323" name="l05323"></a><span class="lineno"> 5323</span>    their_roll += <a class="code hl_function" href="rng_8cpp.html#a7ba03e7147e43d808dc29c54bce9e57f">dice</a>( 3, foe-&gt;<a class="code hl_function" href="classCharacter.html#abb0a1847902e6db0bd3c923ee8187702">get_per</a>() );</div>
<div class="line"><a id="l05324" name="l05324"></a><span class="lineno"> 5324</span>    their_roll += <a class="code hl_function" href="rng_8cpp.html#a7ba03e7147e43d808dc29c54bce9e57f">dice</a>( 3, foe-&gt;<a class="code hl_function" href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">get_skill_level</a>( <a class="code hl_variable" href="monattack_8cpp.html#a917f093dcdc3861c86a6adf734a52641">skill_melee</a> ) );</div>
<div class="line"><a id="l05325" name="l05325"></a><span class="lineno"> 5325</span> </div>
<div class="line"><a id="l05326" name="l05326"></a><span class="lineno"> 5326</span>    <a class="code hl_class" href="classitem.html">item</a> &amp;it = foe-&gt;<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>;</div>
<div class="line"><a id="l05327" name="l05327"></a><span class="lineno"> 5327</span> </div>
<div class="line"><a id="l05328" name="l05328"></a><span class="lineno"> 5328</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The zombie grabs your %s…&quot;</span> ), it.<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>() );</div>
<div class="line"><a id="l05329" name="l05329"></a><span class="lineno"> 5329</span> </div>
<div class="line"><a id="l05330" name="l05330"></a><span class="lineno"> 5330</span>    <span class="keywordflow">if</span>( my_roll &gt;= their_roll &amp;&amp; !it.<a class="code hl_function" href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">has_flag</a>( <span class="stringliteral">&quot;NO_UNWIELD&quot;</span> ) ) {</div>
<div class="line"><a id="l05331" name="l05331"></a><span class="lineno"> 5331</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;and throws it to the ground!&quot;</span> ) );</div>
<div class="line"><a id="l05332" name="l05332"></a><span class="lineno"> 5332</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> tp = foe-&gt;<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() + <a class="code hl_struct" href="structtripoint.html">tripoint</a>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( -1, 1 ), <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( -1, 1 ), 0 );</div>
<div class="line"><a id="l05333" name="l05333"></a><span class="lineno"> 5333</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_item_or_charges( tp, foe-&gt;<a class="code hl_function" href="classCharacter.html#a35f89e2e6eb1144b623be5281f4f221b">i_rem</a>( &amp;it ) );</div>
<div class="line"><a id="l05334" name="l05334"></a><span class="lineno"> 5334</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05335" name="l05335"></a><span class="lineno"> 5335</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;but you break its grip!&quot;</span> ) );</div>
<div class="line"><a id="l05336" name="l05336"></a><span class="lineno"> 5336</span>    }</div>
<div class="line"><a id="l05337" name="l05337"></a><span class="lineno"> 5337</span> </div>
<div class="line"><a id="l05338" name="l05338"></a><span class="lineno"> 5338</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05339" name="l05339"></a><span class="lineno"> 5339</span>}</div>
<div class="ttc" id="aclassCharacter_html_a34a927d0f161ac92ab0d462397828bd5"><div class="ttname"><a href="classCharacter.html#a34a927d0f161ac92ab0d462397828bd5">Character::get_dex</a></div><div class="ttdeci">virtual int get_dex() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04052">character.cpp:4052</a></div></div>
<div class="ttc" id="aclassCharacter_html_a35f89e2e6eb1144b623be5281f4f221b"><div class="ttname"><a href="classCharacter.html#a35f89e2e6eb1144b623be5281f4f221b">Character::i_rem</a></div><div class="ttdeci">item i_rem(int pos)</div><div class="ttdoc">Remove a specific item from player possession.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02413">character.cpp:2413</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5aba683ccf77cb560a0a932308289bd9"><div class="ttname"><a href="classCharacter.html#a5aba683ccf77cb560a0a932308289bd9">Character::get_str</a></div><div class="ttdeci">virtual int get_str() const</div><div class="ttdoc">Getters for stats exclusive to characters.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04048">character.cpp:4048</a></div></div>
<div class="ttc" id="aclassCharacter_html_abb0a1847902e6db0bd3c923ee8187702"><div class="ttname"><a href="classCharacter.html#abb0a1847902e6db0bd3c923ee8187702">Character::get_per</a></div><div class="ttdeci">virtual int get_per() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04056">character.cpp:4056</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad24859164517ed6e392e21df69527199"><div class="ttname"><a href="classCharacter.html#ad24859164517ed6e392e21df69527199">Character::pos</a></div><div class="ttdeci">const tripoint &amp; pos() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00707">character.cpp:707</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad79464264cb8a2061f5888d092f5cd86"><div class="ttname"><a href="classCharacter.html#ad79464264cb8a2061f5888d092f5cd86">Character::is_armed</a></div><div class="ttdeci">bool is_armed() const</div><div class="ttdoc">Returns true if the character is wielding something.</div><div class="ttdef"><b>Definition:</b> <a href="melee_8cpp_source.html#l00145">melee.cpp:145</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae68b7a6565646ba662e448bded8b6599"><div class="ttname"><a href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">Character::weapon</a></div><div class="ttdeci">item weapon</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01585">character.h:1585</a></div></div>
<div class="ttc" id="aclassCharacter_html_afa95fe499ca6b55ab97f1b442a4c95c5"><div class="ttname"><a href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">Character::get_skill_level</a></div><div class="ttdeci">int get_skill_level(const skill_id &amp;ident) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03327">character.cpp:3327</a></div></div>
<div class="ttc" id="aclassCreature_html_a26b7c431f85f0b99b888db69318ebdc5"><div class="ttname"><a href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">Creature::disp_name</a></div><div class="ttdeci">virtual std::string disp_name(bool possessive=false, bool capitalize_first=false) const =0</div></div>
<div class="ttc" id="aclassCreature_html_a91dc4715c36eef7d116f944be9a4d435"><div class="ttname"><a href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">Creature::add_msg_if_player</a></div><div class="ttdeci">virtual void add_msg_if_player(const std::string &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00593">creature.h:593</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00175">item.h:176</a></div></div>
<div class="ttc" id="aclassitem_html_a7e78e26dcf9b357cda769c3ca2938eda"><div class="ttname"><a href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">item::tname</a></div><div class="ttdeci">std::string tname(unsigned int quantity=1, bool with_prefix=true, unsigned int truncate=0) const</div><div class="ttdoc">Return the (translated) item name.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04440">item.cpp:4440</a></div></div>
<div class="ttc" id="aclassitem_html_aaa5aeb6f838927babb10ede535cf2a73"><div class="ttname"><a href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">item::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05192">item.cpp:5192</a></div></div>
<div class="ttc" id="aclassplayer_html"><div class="ttname"><a href="classplayer.html">player</a></div><div class="ttdef"><b>Definition:</b> <a href="player_8h_source.html#l00098">player.h:99</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a></div><div class="ttdeci">@ m_good</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00253">enums.h:253</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a917f093dcdc3861c86a6adf734a52641"><div class="ttname"><a href="monattack_8cpp.html#a917f093dcdc3861c86a6adf734a52641">skill_melee</a></div><div class="ttdeci">static const skill_id skill_melee(&quot;melee&quot;)</div></div>
<div class="ttc" id="arng_8cpp_html_a7ba03e7147e43d808dc29c54bce9e57f"><div class="ttname"><a href="rng_8cpp.html#a7ba03e7147e43d808dc29c54bce9e57f">dice</a></div><div class="ttdeci">int dice(int number, int sides)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00085">rng.cpp:85</a></div></div>
<div class="ttc" id="astructmtype_html_a561d4830d7f7c613c177f5880c2e15fb"><div class="ttname"><a href="structmtype.html#a561d4830d7f7c613c177f5880c2e15fb">mtype::melee_dice</a></div><div class="ttdeci">int melee_dice</div><div class="ttdoc">melee hit skill, 20 is superhuman hitting abilities</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00286">mtype.h:286</a></div></div>
<div class="ttc" id="astructmtype_html_af346fa78fe3bff4e8e321e9046bc9717"><div class="ttname"><a href="structmtype.html#af346fa78fe3bff4e8e321e9046bc9717">mtype::melee_sides</a></div><div class="ttdeci">int melee_sides</div><div class="ttdoc">number of dice of bonus bashing damage on melee hit</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00287">mtype.h:287</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="creature_8h_source.html#l00593">Creature::add_msg_if_player()</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="monster_8cpp_source.html#l00931">monster::can_act()</a>, <a class="el" href="rng_8cpp_source.html#l00085">dice()</a>, <a class="el" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">Creature::disp_name()</a>, <a class="el" href="monattack_8cpp_source.html#l05764">dodge_check()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="character_8cpp_source.html#l04052">Character::get_dex()</a>, <a class="el" href="character_8cpp_source.html#l04056">Character::get_per()</a>, <a class="el" href="character_8cpp_source.html#l03327">Character::get_skill_level()</a>, <a class="el" href="character_8cpp_source.html#l04048">Character::get_str()</a>, <a class="el" href="item_8cpp_source.html#l05192">item::has_flag()</a>, <a class="el" href="character_8cpp_source.html#l02413">Character::i_rem()</a>, <a class="el" href="monattack_8cpp_source.html#l00275">is_adjacent()</a>, <a class="el" href="melee_8cpp_source.html#l00145">Character::is_armed()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00253">m_good</a>, <a class="el" href="mtype_8h_source.html#l00286">mtype::melee_dice</a>, <a class="el" href="mtype_8h_source.html#l00287">mtype::melee_sides</a>, <a class="el" href="mtype_8h_source.html#l00285">mtype::melee_skill</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="classCreature.html#af56188882e3300853d18f166738ee37a">Creature::on_dodge()</a>, <a class="el" href="character_8cpp_source.html#l00707">Character::pos()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, <a class="el" href="monattack_8cpp.html#a917f093dcdc3861c86a6adf734a52641">skill_melee</a>, <a class="el" href="item_8cpp_source.html#l04440">item::tname()</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, <a class="el" href="creature_8h_source.html#l00485">Creature::uncanny_dodge()</a>, and <a class="el" href="character_8h_source.html#l01585">Character::weapon</a>.</p>

<p class="reference">Referenced by <a class="el" href="monattack_8cpp_source.html#l05055">bio_op_random_biojutsu()</a>, and <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="af55104213ac374e4cad1babbf0d3a009" name="af55104213ac374e4cad1babbf0d3a009"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af55104213ac374e4cad1babbf0d3a009">&#9670;&nbsp;</a></span>bio_op_impale()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::bio_op_impale </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l05194">5194</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05195" name="l05195"></a><span class="lineno"> 5195</span>{</div>
<div class="line"><a id="l05196" name="l05196"></a><span class="lineno"> 5196</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classmonster.html#a0f83a7ee7bd8d96efc80200c5a5caf5b">can_act</a>() ) {</div>
<div class="line"><a id="l05197" name="l05197"></a><span class="lineno"> 5197</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05198" name="l05198"></a><span class="lineno"> 5198</span>    }</div>
<div class="line"><a id="l05199" name="l05199"></a><span class="lineno"> 5199</span> </div>
<div class="line"><a id="l05200" name="l05200"></a><span class="lineno"> 5200</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l05201" name="l05201"></a><span class="lineno"> 5201</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ||</div>
<div class="line"><a id="l05202" name="l05202"></a><span class="lineno"> 5202</span>        !<a class="code hl_function" href="monattack_8cpp.html#abf0d71b531a799a8eb3fd58a846064db">is_adjacent</a>( z, target, <span class="keyword">false</span> ) ||</div>
<div class="line"><a id="l05203" name="l05203"></a><span class="lineno"> 5203</span>        !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l05204" name="l05204"></a><span class="lineno"> 5204</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05205" name="l05205"></a><span class="lineno"> 5205</span>    }</div>
<div class="line"><a id="l05206" name="l05206"></a><span class="lineno"> 5206</span> </div>
<div class="line"><a id="l05207" name="l05207"></a><span class="lineno"> 5207</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> seen = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z );</div>
<div class="line"><a id="l05208" name="l05208"></a><span class="lineno"> 5208</span>    <a class="code hl_class" href="classplayer.html">player</a> *foe = <span class="keyword">dynamic_cast&lt;</span> <a class="code hl_class" href="classplayer.html">player</a> * <span class="keyword">&gt;</span>( target );</div>
<div class="line"><a id="l05209" name="l05209"></a><span class="lineno"> 5209</span>    <span class="keywordflow">if</span>( seen ) {</div>
<div class="line"><a id="l05210" name="l05210"></a><span class="lineno"> 5210</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s mechanically lunges at %2$s!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l05211" name="l05211"></a><span class="lineno"> 5211</span>                 target-&gt;<a class="code hl_function" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">disp_name</a>() );</div>
<div class="line"><a id="l05212" name="l05212"></a><span class="lineno"> 5212</span>    }</div>
<div class="line"><a id="l05213" name="l05213"></a><span class="lineno"> 5213</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 100;</div>
<div class="line"><a id="l05214" name="l05214"></a><span class="lineno"> 5214</span> </div>
<div class="line"><a id="l05215" name="l05215"></a><span class="lineno"> 5215</span>    <span class="keywordflow">if</span>( target-&gt;<a class="code hl_function" href="classCreature.html#afd2f1b1e5bafdef20afddbb704b1d5a5">uncanny_dodge</a>() ) {</div>
<div class="line"><a id="l05216" name="l05216"></a><span class="lineno"> 5216</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05217" name="l05217"></a><span class="lineno"> 5217</span>    }</div>
<div class="line"><a id="l05218" name="l05218"></a><span class="lineno"> 5218</span> </div>
<div class="line"><a id="l05219" name="l05219"></a><span class="lineno"> 5219</span>    <span class="comment">// Can we dodge the attack? Uses player dodge function % chance (melee.cpp)</span></div>
<div class="line"><a id="l05220" name="l05220"></a><span class="lineno"> 5220</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacemattack.html#a4efb8be314551e35f69df8cf8d824174">dodge_check</a>( z, target ) ) {</div>
<div class="line"><a id="l05221" name="l05221"></a><span class="lineno"> 5221</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You dodge it!&quot;</span> ),</div>
<div class="line"><a id="l05222" name="l05222"></a><span class="lineno"> 5222</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; dodges it!&quot;</span> ) );</div>
<div class="line"><a id="l05223" name="l05223"></a><span class="lineno"> 5223</span>        target-&gt;<a class="code hl_function" href="classCreature.html#af56188882e3300853d18f166738ee37a">on_dodge</a>( z, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> * 2 );</div>
<div class="line"><a id="l05224" name="l05224"></a><span class="lineno"> 5224</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05225" name="l05225"></a><span class="lineno"> 5225</span>    }</div>
<div class="line"><a id="l05226" name="l05226"></a><span class="lineno"> 5226</span> </div>
<div class="line"><a id="l05227" name="l05227"></a><span class="lineno"> 5227</span>    <span class="comment">// Yes, it has the CQC bionic.</span></div>
<div class="line"><a id="l05228" name="l05228"></a><span class="lineno"> 5228</span>    <span class="keywordtype">int</span> dam = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 8, 24 );</div>
<div class="line"><a id="l05229" name="l05229"></a><span class="lineno"> 5229</span>    <span class="keywordtype">bool</span> do_bleed = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05230" name="l05230"></a><span class="lineno"> 5230</span>    <span class="keywordtype">int</span> t_dam;</div>
<div class="line"><a id="l05231" name="l05231"></a><span class="lineno"> 5231</span> </div>
<div class="line"><a id="l05232" name="l05232"></a><span class="lineno"> 5232</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a id="l05233" name="l05233"></a><span class="lineno"> 5233</span>        dam = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 12, 36 ); <span class="comment">// 50% damage buff for the crit.</span></div>
<div class="line"><a id="l05234" name="l05234"></a><span class="lineno"> 5234</span>        do_bleed = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05235" name="l05235"></a><span class="lineno"> 5235</span>    }</div>
<div class="line"><a id="l05236" name="l05236"></a><span class="lineno"> 5236</span> </div>
<div class="line"><a id="l05237" name="l05237"></a><span class="lineno"> 5237</span>    <span class="keywordflow">if</span>( foe == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l05238" name="l05238"></a><span class="lineno"> 5238</span>        <span class="comment">// Handle mons earlier - less to check for</span></div>
<div class="line"><a id="l05239" name="l05239"></a><span class="lineno"> 5239</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a75ad96eb6ce27d3c1df250965b4de7b5">deal_damage</a>( z, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ), <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa12e559f29e023db673e9251b9337d8dd">DT_STAB</a>, dam ) );</div>
<div class="line"><a id="l05240" name="l05240"></a><span class="lineno"> 5240</span>        <span class="keywordflow">if</span>( do_bleed ) {</div>
<div class="line"><a id="l05241" name="l05241"></a><span class="lineno"> 5241</span>            target-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 75_turns, 125_turns ), <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a> );</div>
<div class="line"><a id="l05242" name="l05242"></a><span class="lineno"> 5242</span>        }</div>
<div class="line"><a id="l05243" name="l05243"></a><span class="lineno"> 5243</span>        <span class="keywordflow">if</span>( seen ) {</div>
<div class="line"><a id="l05244" name="l05244"></a><span class="lineno"> 5244</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s impales %2$s!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">disp_name</a>() );</div>
<div class="line"><a id="l05245" name="l05245"></a><span class="lineno"> 5245</span>        }</div>
<div class="line"><a id="l05246" name="l05246"></a><span class="lineno"> 5246</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a36dcf5a04ddc0cf9fa29c08b7b099158">check_dead_state</a>();</div>
<div class="line"><a id="l05247" name="l05247"></a><span class="lineno"> 5247</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05248" name="l05248"></a><span class="lineno"> 5248</span>    }</div>
<div class="line"><a id="l05249" name="l05249"></a><span class="lineno"> 5249</span> </div>
<div class="line"><a id="l05250" name="l05250"></a><span class="lineno"> 5250</span>    <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">bodypart_id</a> hit = target-&gt;<a class="code hl_function" href="classCreature.html#a51c96c81ae1ea766b5eead4a265c1492">get_random_body_part</a>();</div>
<div class="line"><a id="l05251" name="l05251"></a><span class="lineno"> 5251</span> </div>
<div class="line"><a id="l05252" name="l05252"></a><span class="lineno"> 5252</span>    t_dam = foe-&gt;<a class="code hl_function" href="classCharacter.html#a2c05090cba2078f9ebefd80e61564be3">deal_damage</a>( z, hit, <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa12e559f29e023db673e9251b9337d8dd">DT_STAB</a>, dam ) ).<a class="code hl_function" href="structdealt__damage__instance.html#a86b702070a1c313624abc78ff34eff48">total_damage</a>();</div>
<div class="line"><a id="l05253" name="l05253"></a><span class="lineno"> 5253</span> </div>
<div class="line"><a id="l05254" name="l05254"></a><span class="lineno"> 5254</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s tries to impale your %s…&quot;</span> ),</div>
<div class="line"><a id="l05255" name="l05255"></a><span class="lineno"> 5255</span>                                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s tries to impale &lt;npcname&gt;&#39;s %s…&quot;</span> ),</div>
<div class="line"><a id="l05256" name="l05256"></a><span class="lineno"> 5256</span>                                   z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(), <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( hit-&gt;token ) );</div>
<div class="line"><a id="l05257" name="l05257"></a><span class="lineno"> 5257</span> </div>
<div class="line"><a id="l05258" name="l05258"></a><span class="lineno"> 5258</span>    <span class="keywordflow">if</span>( t_dam &gt; 0 ) {</div>
<div class="line"><a id="l05259" name="l05259"></a><span class="lineno"> 5259</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;and deals %d damage!&quot;</span> ), t_dam );</div>
<div class="line"><a id="l05260" name="l05260"></a><span class="lineno"> 5260</span> </div>
<div class="line"><a id="l05261" name="l05261"></a><span class="lineno"> 5261</span>        <span class="keywordflow">if</span>( do_bleed ) {</div>
<div class="line"><a id="l05262" name="l05262"></a><span class="lineno"> 5262</span>            target-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 75_turns, 125_turns ), <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a> );</div>
<div class="line"><a id="l05263" name="l05263"></a><span class="lineno"> 5263</span>        }</div>
<div class="line"><a id="l05264" name="l05264"></a><span class="lineno"> 5264</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05265" name="l05265"></a><span class="lineno"> 5265</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;but fails to penetrate your armor!&quot;</span> ),</div>
<div class="line"><a id="l05266" name="l05266"></a><span class="lineno"> 5266</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;but fails to penetrate &lt;npcname&gt;&#39;s armor!&quot;</span> ) );</div>
<div class="line"><a id="l05267" name="l05267"></a><span class="lineno"> 5267</span>    }</div>
<div class="line"><a id="l05268" name="l05268"></a><span class="lineno"> 5268</span> </div>
<div class="line"><a id="l05269" name="l05269"></a><span class="lineno"> 5269</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">on_hit</a>( z, hit, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> );</div>
<div class="line"><a id="l05270" name="l05270"></a><span class="lineno"> 5270</span>    foe-&gt;<a class="code hl_function" href="classCreature.html#a36dcf5a04ddc0cf9fa29c08b7b099158">check_dead_state</a>();</div>
<div class="line"><a id="l05271" name="l05271"></a><span class="lineno"> 5271</span> </div>
<div class="line"><a id="l05272" name="l05272"></a><span class="lineno"> 5272</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05273" name="l05273"></a><span class="lineno"> 5273</span>}</div>
<div class="ttc" id="abodypart_8h_html_a426444e2d486ce1ee315d8b8acc86b40"><div class="ttname"><a href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a></div><div class="ttdeci">int_id&lt; body_part_type &gt; bodypart_id</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00023">bodypart.h:23</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a></div><div class="ttdeci">@ bp_torso</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00040">bodypart.h:40</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2c05090cba2078f9ebefd80e61564be3"><div class="ttname"><a href="classCharacter.html#a2c05090cba2078f9ebefd80e61564be3">Character::deal_damage</a></div><div class="ttdeci">dealt_damage_instance deal_damage(Creature *source, bodypart_id bp, const damage_instance &amp;d) override</div><div class="ttdoc">Calls Creature::deal_damage and handles damaged effects (waking up, etc.)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08437">character.cpp:8437</a></div></div>
<div class="ttc" id="aclassCreature_html_a36dcf5a04ddc0cf9fa29c08b7b099158"><div class="ttname"><a href="classCreature.html#a36dcf5a04ddc0cf9fa29c08b7b099158">Creature::check_dead_state</a></div><div class="ttdeci">void check_dead_state()</div><div class="ttdoc">This function checks the creatures is_dead_state and (if true) calls die.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01833">creature.cpp:1833</a></div></div>
<div class="ttc" id="aclassCreature_html_a666022fd3ed772fa109d273c20e8de55"><div class="ttname"><a href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">Creature::add_effect</a></div><div class="ttdeci">void add_effect(const effect &amp;eff, bool force=false, bool deferred=false)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00974">creature.cpp:974</a></div></div>
<div class="ttc" id="adamage_8h_html_ae63a2cf8429f9edf77b547d34ffe4e7aa12e559f29e023db673e9251b9337d8dd"><div class="ttname"><a href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa12e559f29e023db673e9251b9337d8dd">DT_STAB</a></div><div class="ttdeci">@ DT_STAB</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00027">damage.h:27</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a151e6b162a8a2cdbdb11c407013076eb"><div class="ttname"><a href="monattack_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a></div><div class="ttdeci">static const efftype_id effect_bleed(&quot;bleed&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8cpp_source.html#l00974">Creature::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="creature_8h_source.html#l00593">Creature::add_msg_if_player()</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="bodypart_8cpp_source.html#l00329">body_part_name_accusative()</a>, <a class="el" href="bodypart_8h_source.html#l00040">bp_torso</a>, <a class="el" href="monster_8cpp_source.html#l00931">monster::can_act()</a>, <a class="el" href="creature_8cpp_source.html#l01833">Creature::check_dead_state()</a>, <a class="el" href="character_8cpp_source.html#l08437">Character::deal_damage()</a>, <a class="el" href="creature_8cpp_source.html#l00873">Creature::deal_damage()</a>, <a class="el" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">Creature::disp_name()</a>, <a class="el" href="monattack_8cpp_source.html#l05764">dodge_check()</a>, <a class="el" href="damage_8h_source.html#l00027">DT_STAB</a>, <a class="el" href="monattack_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8cpp_source.html#l01614">Creature::get_random_body_part()</a>, <a class="el" href="monattack_8cpp_source.html#l00275">is_adjacent()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="mtype_8h_source.html#l00285">mtype::melee_skill</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="classCreature.html#af56188882e3300853d18f166738ee37a">Creature::on_dodge()</a>, <a class="el" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">Creature::on_hit()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, <a class="el" href="damage_8cpp_source.html#l00180">dealt_damage_instance::total_damage()</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, and <a class="el" href="creature_8h_source.html#l00485">Creature::uncanny_dodge()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monattack_8cpp_source.html#l05055">bio_op_random_biojutsu()</a>, and <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a467112691e63871c66a0c81b236f5f38" name="a467112691e63871c66a0c81b236f5f38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a467112691e63871c66a0c81b236f5f38">&#9670;&nbsp;</a></span>bio_op_random_biojutsu()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::bio_op_random_biojutsu </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l05055">5055</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05056" name="l05056"></a><span class="lineno"> 5056</span>{</div>
<div class="line"><a id="l05057" name="l05057"></a><span class="lineno"> 5057</span>    <span class="keywordtype">int</span> choice;</div>
<div class="line"><a id="l05058" name="l05058"></a><span class="lineno"> 5058</span>    <span class="keywordtype">int</span> redo;</div>
<div class="line"><a id="l05059" name="l05059"></a><span class="lineno"> 5059</span> </div>
<div class="line"><a id="l05060" name="l05060"></a><span class="lineno"> 5060</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classmonster.html#a0f83a7ee7bd8d96efc80200c5a5caf5b">can_act</a>() ) {</div>
<div class="line"><a id="l05061" name="l05061"></a><span class="lineno"> 5061</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05062" name="l05062"></a><span class="lineno"> 5062</span>    }</div>
<div class="line"><a id="l05063" name="l05063"></a><span class="lineno"> 5063</span> </div>
<div class="line"><a id="l05064" name="l05064"></a><span class="lineno"> 5064</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l05065" name="l05065"></a><span class="lineno"> 5065</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ||</div>
<div class="line"><a id="l05066" name="l05066"></a><span class="lineno"> 5066</span>        !<a class="code hl_function" href="monattack_8cpp.html#abf0d71b531a799a8eb3fd58a846064db">is_adjacent</a>( z, target, <span class="keyword">false</span> ) ||</div>
<div class="line"><a id="l05067" name="l05067"></a><span class="lineno"> 5067</span>        !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l05068" name="l05068"></a><span class="lineno"> 5068</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05069" name="l05069"></a><span class="lineno"> 5069</span>    }</div>
<div class="line"><a id="l05070" name="l05070"></a><span class="lineno"> 5070</span> </div>
<div class="line"><a id="l05071" name="l05071"></a><span class="lineno"> 5071</span>    <a class="code hl_class" href="classplayer.html">player</a> *foe = <span class="keyword">dynamic_cast&lt;</span> <a class="code hl_class" href="classplayer.html">player</a> * <span class="keyword">&gt;</span>( target );</div>
<div class="line"><a id="l05072" name="l05072"></a><span class="lineno"> 5072</span> </div>
<div class="line"><a id="l05073" name="l05073"></a><span class="lineno"> 5073</span>    <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l05074" name="l05074"></a><span class="lineno"> 5074</span>        choice = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 3 );</div>
<div class="line"><a id="l05075" name="l05075"></a><span class="lineno"> 5075</span>        redo = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05076" name="l05076"></a><span class="lineno"> 5076</span> </div>
<div class="line"><a id="l05077" name="l05077"></a><span class="lineno"> 5077</span>        <span class="comment">// ignore disarm if the target isn&#39;t a &quot;player&quot; or isn&#39;t armed</span></div>
<div class="line"><a id="l05078" name="l05078"></a><span class="lineno"> 5078</span>        <span class="keywordflow">if</span>( choice == 3 &amp;&amp; foe != <span class="keyword">nullptr</span> &amp;&amp; !foe-&gt;<a class="code hl_function" href="classCharacter.html#ad79464264cb8a2061f5888d092f5cd86">is_armed</a>() ) {</div>
<div class="line"><a id="l05079" name="l05079"></a><span class="lineno"> 5079</span>            redo = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05080" name="l05080"></a><span class="lineno"> 5080</span>        }</div>
<div class="line"><a id="l05081" name="l05081"></a><span class="lineno"> 5081</span> </div>
<div class="line"><a id="l05082" name="l05082"></a><span class="lineno"> 5082</span>    } <span class="keywordflow">while</span>( redo );</div>
<div class="line"><a id="l05083" name="l05083"></a><span class="lineno"> 5083</span> </div>
<div class="line"><a id="l05084" name="l05084"></a><span class="lineno"> 5084</span>    <span class="keywordflow">switch</span>( choice ) {</div>
<div class="line"><a id="l05085" name="l05085"></a><span class="lineno"> 5085</span>        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l05086" name="l05086"></a><span class="lineno"> 5086</span>            <a class="code hl_function" href="namespacemattack.html#a20b5458497cd2c33fa6dea4ec5adc202">bio_op_takedown</a>( z );</div>
<div class="line"><a id="l05087" name="l05087"></a><span class="lineno"> 5087</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05088" name="l05088"></a><span class="lineno"> 5088</span>        <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l05089" name="l05089"></a><span class="lineno"> 5089</span>            <a class="code hl_function" href="namespacemattack.html#af55104213ac374e4cad1babbf0d3a009">bio_op_impale</a>( z );</div>
<div class="line"><a id="l05090" name="l05090"></a><span class="lineno"> 5090</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05091" name="l05091"></a><span class="lineno"> 5091</span>        <span class="keywordflow">case</span> 3:</div>
<div class="line"><a id="l05092" name="l05092"></a><span class="lineno"> 5092</span>            <a class="code hl_function" href="namespacemattack.html#a535178d1fac613ca6f87515de0b30d51">bio_op_disarm</a>( z );</div>
<div class="line"><a id="l05093" name="l05093"></a><span class="lineno"> 5093</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05094" name="l05094"></a><span class="lineno"> 5094</span>    }</div>
<div class="line"><a id="l05095" name="l05095"></a><span class="lineno"> 5095</span> </div>
<div class="line"><a id="l05096" name="l05096"></a><span class="lineno"> 5096</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05097" name="l05097"></a><span class="lineno"> 5097</span>}</div>
<div class="ttc" id="anamespacemattack_html_a20b5458497cd2c33fa6dea4ec5adc202"><div class="ttname"><a href="namespacemattack.html#a20b5458497cd2c33fa6dea4ec5adc202">mattack::bio_op_takedown</a></div><div class="ttdeci">bool bio_op_takedown(monster *z)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l05099">monattack.cpp:5099</a></div></div>
<div class="ttc" id="anamespacemattack_html_a535178d1fac613ca6f87515de0b30d51"><div class="ttname"><a href="namespacemattack.html#a535178d1fac613ca6f87515de0b30d51">mattack::bio_op_disarm</a></div><div class="ttdeci">bool bio_op_disarm(monster *z)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l05275">monattack.cpp:5275</a></div></div>
<div class="ttc" id="anamespacemattack_html_af55104213ac374e4cad1babbf0d3a009"><div class="ttname"><a href="namespacemattack.html#af55104213ac374e4cad1babbf0d3a009">mattack::bio_op_impale</a></div><div class="ttdeci">bool bio_op_impale(monster *z)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l05194">monattack.cpp:5194</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="monattack_8cpp_source.html#l05275">bio_op_disarm()</a>, <a class="el" href="monattack_8cpp_source.html#l05194">bio_op_impale()</a>, <a class="el" href="monattack_8cpp_source.html#l05099">bio_op_takedown()</a>, <a class="el" href="monster_8cpp_source.html#l00931">monster::can_act()</a>, <a class="el" href="monattack_8cpp_source.html#l00275">is_adjacent()</a>, <a class="el" href="melee_8cpp_source.html#l00145">Character::is_armed()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, and <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a20b5458497cd2c33fa6dea4ec5adc202" name="a20b5458497cd2c33fa6dea4ec5adc202"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20b5458497cd2c33fa6dea4ec5adc202">&#9670;&nbsp;</a></span>bio_op_takedown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::bio_op_takedown </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l05099">5099</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05100" name="l05100"></a><span class="lineno"> 5100</span>{</div>
<div class="line"><a id="l05101" name="l05101"></a><span class="lineno"> 5101</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classmonster.html#a0f83a7ee7bd8d96efc80200c5a5caf5b">can_act</a>() ) {</div>
<div class="line"><a id="l05102" name="l05102"></a><span class="lineno"> 5102</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05103" name="l05103"></a><span class="lineno"> 5103</span>    }</div>
<div class="line"><a id="l05104" name="l05104"></a><span class="lineno"> 5104</span> </div>
<div class="line"><a id="l05105" name="l05105"></a><span class="lineno"> 5105</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l05106" name="l05106"></a><span class="lineno"> 5106</span>    <span class="comment">// TODO: Allow drop-takedown form above</span></div>
<div class="line"><a id="l05107" name="l05107"></a><span class="lineno"> 5107</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ||</div>
<div class="line"><a id="l05108" name="l05108"></a><span class="lineno"> 5108</span>        !<a class="code hl_function" href="monattack_8cpp.html#abf0d71b531a799a8eb3fd58a846064db">is_adjacent</a>( z, target, <span class="keyword">false</span> ) ||</div>
<div class="line"><a id="l05109" name="l05109"></a><span class="lineno"> 5109</span>        !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l05110" name="l05110"></a><span class="lineno"> 5110</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05111" name="l05111"></a><span class="lineno"> 5111</span>    }</div>
<div class="line"><a id="l05112" name="l05112"></a><span class="lineno"> 5112</span> </div>
<div class="line"><a id="l05113" name="l05113"></a><span class="lineno"> 5113</span>    <span class="keywordtype">bool</span> seen = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z );</div>
<div class="line"><a id="l05114" name="l05114"></a><span class="lineno"> 5114</span>    <a class="code hl_class" href="classplayer.html">player</a> *foe = <span class="keyword">dynamic_cast&lt;</span> <a class="code hl_class" href="classplayer.html">player</a> * <span class="keyword">&gt;</span>( target );</div>
<div class="line"><a id="l05115" name="l05115"></a><span class="lineno"> 5115</span>    <span class="keywordflow">if</span>( seen ) {</div>
<div class="line"><a id="l05116" name="l05116"></a><span class="lineno"> 5116</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s mechanically grabs at %2$s!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l05117" name="l05117"></a><span class="lineno"> 5117</span>                 target-&gt;<a class="code hl_function" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">disp_name</a>() );</div>
<div class="line"><a id="l05118" name="l05118"></a><span class="lineno"> 5118</span>    }</div>
<div class="line"><a id="l05119" name="l05119"></a><span class="lineno"> 5119</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 100;</div>
<div class="line"><a id="l05120" name="l05120"></a><span class="lineno"> 5120</span> </div>
<div class="line"><a id="l05121" name="l05121"></a><span class="lineno"> 5121</span>    <span class="keywordflow">if</span>( target-&gt;<a class="code hl_function" href="classCreature.html#afd2f1b1e5bafdef20afddbb704b1d5a5">uncanny_dodge</a>() ) {</div>
<div class="line"><a id="l05122" name="l05122"></a><span class="lineno"> 5122</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05123" name="l05123"></a><span class="lineno"> 5123</span>    }</div>
<div class="line"><a id="l05124" name="l05124"></a><span class="lineno"> 5124</span> </div>
<div class="line"><a id="l05125" name="l05125"></a><span class="lineno"> 5125</span>    <span class="comment">// Can we dodge the attack? Uses player dodge function % chance (melee.cpp)</span></div>
<div class="line"><a id="l05126" name="l05126"></a><span class="lineno"> 5126</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacemattack.html#a4efb8be314551e35f69df8cf8d824174">dodge_check</a>( z, target ) ) {</div>
<div class="line"><a id="l05127" name="l05127"></a><span class="lineno"> 5127</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You dodge it!&quot;</span> ),</div>
<div class="line"><a id="l05128" name="l05128"></a><span class="lineno"> 5128</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; dodges it!&quot;</span> ) );</div>
<div class="line"><a id="l05129" name="l05129"></a><span class="lineno"> 5129</span>        target-&gt;<a class="code hl_function" href="classCreature.html#af56188882e3300853d18f166738ee37a">on_dodge</a>( z, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> * 2 );</div>
<div class="line"><a id="l05130" name="l05130"></a><span class="lineno"> 5130</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05131" name="l05131"></a><span class="lineno"> 5131</span>    }</div>
<div class="line"><a id="l05132" name="l05132"></a><span class="lineno"> 5132</span>    <span class="keywordtype">int</span> dam = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 3, 9 );</div>
<div class="line"><a id="l05133" name="l05133"></a><span class="lineno"> 5133</span>    <span class="keywordflow">if</span>( foe == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l05134" name="l05134"></a><span class="lineno"> 5134</span>        <span class="comment">// Handle mons earlier - less to check for</span></div>
<div class="line"><a id="l05135" name="l05135"></a><span class="lineno"> 5135</span>        dam = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 6, 18 );</div>
<div class="line"><a id="l05136" name="l05136"></a><span class="lineno"> 5136</span>        <span class="comment">// Always aim for the torso</span></div>
<div class="line"><a id="l05137" name="l05137"></a><span class="lineno"> 5137</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a75ad96eb6ce27d3c1df250965b4de7b5">deal_damage</a>( z, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ), <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa5f8b46c6c239266403858fa2ae90ef23">DT_BASH</a>, dam ) );</div>
<div class="line"><a id="l05138" name="l05138"></a><span class="lineno"> 5138</span>        <span class="comment">// Two hits - &quot;leg&quot; and torso</span></div>
<div class="line"><a id="l05139" name="l05139"></a><span class="lineno"> 5139</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a75ad96eb6ce27d3c1df250965b4de7b5">deal_damage</a>( z, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ), <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa5f8b46c6c239266403858fa2ae90ef23">DT_BASH</a>, dam ) );</div>
<div class="line"><a id="l05140" name="l05140"></a><span class="lineno"> 5140</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a>, 3_turns );</div>
<div class="line"><a id="l05141" name="l05141"></a><span class="lineno"> 5141</span>        <span class="keywordflow">if</span>( seen ) {</div>
<div class="line"><a id="l05142" name="l05142"></a><span class="lineno"> 5142</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;%1$s slams %2$s to the ground!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">disp_name</a>() );</div>
<div class="line"><a id="l05143" name="l05143"></a><span class="lineno"> 5143</span>        }</div>
<div class="line"><a id="l05144" name="l05144"></a><span class="lineno"> 5144</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a36dcf5a04ddc0cf9fa29c08b7b099158">check_dead_state</a>();</div>
<div class="line"><a id="l05145" name="l05145"></a><span class="lineno"> 5145</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05146" name="l05146"></a><span class="lineno"> 5146</span>    }</div>
<div class="line"><a id="l05147" name="l05147"></a><span class="lineno"> 5147</span>    <span class="comment">// Yes, it has the CQC bionic.</span></div>
<div class="line"><a id="l05148" name="l05148"></a><span class="lineno"> 5148</span>    <a class="code hl_class" href="classint__id.html">bodypart_id</a> hit( <span class="stringliteral">&quot;num_bp&quot;</span> );</div>
<div class="line"><a id="l05149" name="l05149"></a><span class="lineno"> 5149</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) ) {</div>
<div class="line"><a id="l05150" name="l05150"></a><span class="lineno"> 5150</span>        hit = <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;leg_l&quot;</span> );</div>
<div class="line"><a id="l05151" name="l05151"></a><span class="lineno"> 5151</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05152" name="l05152"></a><span class="lineno"> 5152</span>        hit = <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;leg_r&quot;</span> );</div>
<div class="line"><a id="l05153" name="l05153"></a><span class="lineno"> 5153</span>    }</div>
<div class="line"><a id="l05154" name="l05154"></a><span class="lineno"> 5154</span>    <span class="comment">// Weak kick to start with, knocks you off your footing</span></div>
<div class="line"><a id="l05155" name="l05155"></a><span class="lineno"> 5155</span> </div>
<div class="line"><a id="l05156" name="l05156"></a><span class="lineno"> 5156</span>    <span class="comment">// TODO: Literally &quot;The zombie kicks&quot; vvvvv | Fix message or comment why Literally.</span></div>
<div class="line"><a id="l05157" name="l05157"></a><span class="lineno"> 5157</span>    <span class="comment">//~ 1$s is bodypart name in accusative, 2$d is damage value.</span></div>
<div class="line"><a id="l05158" name="l05158"></a><span class="lineno"> 5158</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The zombie kicks your %1$s for %2$d damage…&quot;</span> ),</div>
<div class="line"><a id="l05159" name="l05159"></a><span class="lineno"> 5159</span>                               <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( hit-&gt;token ), dam );</div>
<div class="line"><a id="l05160" name="l05160"></a><span class="lineno"> 5160</span>    foe-&gt;<a class="code hl_function" href="classCharacter.html#a2c05090cba2078f9ebefd80e61564be3">deal_damage</a>( z,  hit, <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa5f8b46c6c239266403858fa2ae90ef23">DT_BASH</a>, dam ) );</div>
<div class="line"><a id="l05161" name="l05161"></a><span class="lineno"> 5161</span>    <span class="comment">// At this point, Judo or Tentacle Bracing can make this much less painful</span></div>
<div class="line"><a id="l05162" name="l05162"></a><span class="lineno"> 5162</span>    <span class="keywordflow">if</span>( !foe-&gt;<a class="code hl_function" href="classCharacter.html#ab9612295236144e36e019fb74b04c309">is_throw_immune</a>() ) {</div>
<div class="line"><a id="l05163" name="l05163"></a><span class="lineno"> 5163</span>        <span class="keywordflow">if</span>( !target-&gt;<a class="code hl_function" href="classCreature.html#acfe4b827ccc042c7933e709fbca6476e">is_immune_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a> ) ) {</div>
<div class="line"><a id="l05164" name="l05164"></a><span class="lineno"> 5164</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a id="l05165" name="l05165"></a><span class="lineno"> 5165</span>                hit = <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;head&quot;</span> );</div>
<div class="line"><a id="l05166" name="l05166"></a><span class="lineno"> 5166</span>                <span class="comment">// 50% damage buff for the headshot.</span></div>
<div class="line"><a id="l05167" name="l05167"></a><span class="lineno"> 5167</span>                dam = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 9, 21 );</div>
<div class="line"><a id="l05168" name="l05168"></a><span class="lineno"> 5168</span>                target-&gt;<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;and slams you, face first, to the ground for %d damage!&quot;</span> ),</div>
<div class="line"><a id="l05169" name="l05169"></a><span class="lineno"> 5169</span>                                           dam );</div>
<div class="line"><a id="l05170" name="l05170"></a><span class="lineno"> 5170</span>                foe-&gt;<a class="code hl_function" href="classCharacter.html#a2c05090cba2078f9ebefd80e61564be3">deal_damage</a>( z, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;head&quot;</span> ), <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa5f8b46c6c239266403858fa2ae90ef23">DT_BASH</a>, dam ) );</div>
<div class="line"><a id="l05171" name="l05171"></a><span class="lineno"> 5171</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05172" name="l05172"></a><span class="lineno"> 5172</span>                hit = <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> );</div>
<div class="line"><a id="l05173" name="l05173"></a><span class="lineno"> 5173</span>                dam = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 6, 18 );</div>
<div class="line"><a id="l05174" name="l05174"></a><span class="lineno"> 5174</span>                target-&gt;<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;and slams you to the ground for %d damage!&quot;</span> ), dam );</div>
<div class="line"><a id="l05175" name="l05175"></a><span class="lineno"> 5175</span>                foe-&gt;<a class="code hl_function" href="classCharacter.html#a2c05090cba2078f9ebefd80e61564be3">deal_damage</a>( z, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ), <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa5f8b46c6c239266403858fa2ae90ef23">DT_BASH</a>, dam ) );</div>
<div class="line"><a id="l05176" name="l05176"></a><span class="lineno"> 5176</span>            }</div>
<div class="line"><a id="l05177" name="l05177"></a><span class="lineno"> 5177</span>            foe-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a>, 3_turns );</div>
<div class="line"><a id="l05178" name="l05178"></a><span class="lineno"> 5178</span>        }</div>
<div class="line"><a id="l05179" name="l05179"></a><span class="lineno"> 5179</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ( !foe-&gt;<a class="code hl_function" href="classCharacter.html#ad79464264cb8a2061f5888d092f5cd86">is_armed</a>() ||</div>
<div class="line"><a id="l05180" name="l05180"></a><span class="lineno"> 5180</span>                 foe-&gt;<a class="code hl_variable" href="classCharacter.html#a313797e99525bfd2a5ead68b7672f168">martial_arts_data</a>-&gt;selected_has_weapon( foe-&gt;<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>() ) ) &amp;&amp;</div>
<div class="line"><a id="l05181" name="l05181"></a><span class="lineno"> 5181</span>               !<a class="code hl_function" href="namespacemattack.html#a417df1f7014426b1736ddcfc68bed69f">thrown_by_judo</a>( z ) ) {</div>
<div class="line"><a id="l05182" name="l05182"></a><span class="lineno"> 5182</span>        <span class="comment">// Saved by the tentacle-bracing! :)</span></div>
<div class="line"><a id="l05183" name="l05183"></a><span class="lineno"> 5183</span>        hit = <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> );</div>
<div class="line"><a id="l05184" name="l05184"></a><span class="lineno"> 5184</span>        dam = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 3, 9 );</div>
<div class="line"><a id="l05185" name="l05185"></a><span class="lineno"> 5185</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;and slams you for %d damage!&quot;</span> ), dam );</div>
<div class="line"><a id="l05186" name="l05186"></a><span class="lineno"> 5186</span>        foe-&gt;<a class="code hl_function" href="classCharacter.html#a2c05090cba2078f9ebefd80e61564be3">deal_damage</a>( z, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ), <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa5f8b46c6c239266403858fa2ae90ef23">DT_BASH</a>, dam ) );</div>
<div class="line"><a id="l05187" name="l05187"></a><span class="lineno"> 5187</span>    }</div>
<div class="line"><a id="l05188" name="l05188"></a><span class="lineno"> 5188</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">on_hit</a>( z, hit,  z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> );</div>
<div class="line"><a id="l05189" name="l05189"></a><span class="lineno"> 5189</span>    foe-&gt;<a class="code hl_function" href="classCreature.html#a36dcf5a04ddc0cf9fa29c08b7b099158">check_dead_state</a>();</div>
<div class="line"><a id="l05190" name="l05190"></a><span class="lineno"> 5190</span> </div>
<div class="line"><a id="l05191" name="l05191"></a><span class="lineno"> 5191</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05192" name="l05192"></a><span class="lineno"> 5192</span>}</div>
<div class="ttc" id="aclassCharacter_html_a313797e99525bfd2a5ead68b7672f168"><div class="ttname"><a href="classCharacter.html#a313797e99525bfd2a5ead68b7672f168">Character::martial_arts_data</a></div><div class="ttdeci">pimpl&lt; character_martial_arts &gt; martial_arts_data</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01589">character.h:1589</a></div></div>
<div class="ttc" id="aclassCharacter_html_ab9612295236144e36e019fb74b04c309"><div class="ttname"><a href="classCharacter.html#ab9612295236144e36e019fb74b04c309">Character::is_throw_immune</a></div><div class="ttdeci">bool is_throw_immune() const</div><div class="ttdoc">Returns true if the player is immune to throws.</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8cpp_source.html#l01176">martialarts.cpp:1176</a></div></div>
<div class="ttc" id="aclassCreature_html_acfe4b827ccc042c7933e709fbca6476e"><div class="ttname"><a href="classCreature.html#acfe4b827ccc042c7933e709fbca6476e">Creature::is_immune_effect</a></div><div class="ttdeci">virtual bool is_immune_effect(const efftype_id &amp;type) const =0</div></div>
<div class="ttc" id="aclassitem_html_aa79dad64e1ef6347219be2f8666e2752"><div class="ttname"><a href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">item::typeId</a></div><div class="ttdeci">const itype_id &amp; typeId() const</div><div class="ttdoc">return the unique identifier of the items underlying type</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08196">item.cpp:8196</a></div></div>
<div class="ttc" id="adamage_8h_html_ae63a2cf8429f9edf77b547d34ffe4e7aa5f8b46c6c239266403858fa2ae90ef23"><div class="ttname"><a href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa5f8b46c6c239266403858fa2ae90ef23">DT_BASH</a></div><div class="ttdeci">@ DT_BASH</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00024">damage.h:24</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a08481f62adb6937636ea44b855311037"><div class="ttname"><a href="monattack_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a></div><div class="ttdeci">static const efftype_id effect_downed(&quot;downed&quot;)</div></div>
<div class="ttc" id="anamespacemattack_html_a417df1f7014426b1736ddcfc68bed69f"><div class="ttname"><a href="namespacemattack.html#a417df1f7014426b1736ddcfc68bed69f">mattack::thrown_by_judo</a></div><div class="ttdeci">bool thrown_by_judo(monster *z)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l04581">monattack.cpp:4581</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8cpp_source.html#l00974">Creature::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="creature_8h_source.html#l00593">Creature::add_msg_if_player()</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="bodypart_8cpp_source.html#l00329">body_part_name_accusative()</a>, <a class="el" href="monster_8cpp_source.html#l00931">monster::can_act()</a>, <a class="el" href="creature_8cpp_source.html#l01833">Creature::check_dead_state()</a>, <a class="el" href="character_8cpp_source.html#l08437">Character::deal_damage()</a>, <a class="el" href="creature_8cpp_source.html#l00873">Creature::deal_damage()</a>, <a class="el" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">Creature::disp_name()</a>, <a class="el" href="monattack_8cpp_source.html#l05764">dodge_check()</a>, <a class="el" href="damage_8h_source.html#l00024">DT_BASH</a>, <a class="el" href="monattack_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="monattack_8cpp_source.html#l00275">is_adjacent()</a>, <a class="el" href="melee_8cpp_source.html#l00145">Character::is_armed()</a>, <a class="el" href="classCreature.html#acfe4b827ccc042c7933e709fbca6476e">Creature::is_immune_effect()</a>, <a class="el" href="martialarts_8cpp_source.html#l01176">Character::is_throw_immune()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="character_8h_source.html#l01589">Character::martial_arts_data</a>, <a class="el" href="mtype_8h_source.html#l00285">mtype::melee_skill</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="classCreature.html#af56188882e3300853d18f166738ee37a">Creature::on_dodge()</a>, <a class="el" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">Creature::on_hit()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, <a class="el" href="monattack_8cpp_source.html#l04581">thrown_by_judo()</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, <a class="el" href="item_8cpp_source.html#l08196">item::typeId()</a>, <a class="el" href="creature_8h_source.html#l00485">Creature::uncanny_dodge()</a>, and <a class="el" href="character_8h_source.html#l01585">Character::weapon</a>.</p>

<p class="reference">Referenced by <a class="el" href="monattack_8cpp_source.html#l05055">bio_op_random_biojutsu()</a>, and <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a84f4ef33fc59157b5c558a8ed61e7528" name="a84f4ef33fc59157b5c558a8ed61e7528"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84f4ef33fc59157b5c558a8ed61e7528">&#9670;&nbsp;</a></span>boomer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::boomer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
Dodge increases chance to avoid boomer effect 
<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l00841">841</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>{</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classmonster.html#a0f83a7ee7bd8d96efc80200c5a5caf5b">can_act</a>() ) {</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>    }</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span> </div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> || <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() ) &gt; 3 || !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>    }</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span> </div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>    std::vector&lt;tripoint&gt; <a class="code hl_function" href="mapgen_8cpp.html#a90f1f53dc044e93e7f7f9314cef1bd45">line</a> = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.find_clear_path( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() );</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>    <span class="comment">// It takes a while</span></div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 250;</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>    <span class="keywordtype">bool</span> u_see = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z );</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>    <span class="keywordflow">if</span>( u_see ) {</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s spews bile!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>    }</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;i : <a class="code hl_function" href="mapgen_8cpp.html#a90f1f53dc044e93e7f7f9314cef1bd45">line</a> ) {</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_field( i, <a class="code hl_variable" href="field__type_8cpp.html#a22bb00476a16e7d9d5a0de4454a7e7ae">fd_bile</a>, 1 );</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>        <span class="comment">// If bile hit a solid tile, return.</span></div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.impassable( i ) ) {</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_field( i, <a class="code hl_variable" href="field__type_8cpp.html#a22bb00476a16e7d9d5a0de4454a7e7ae">fd_bile</a>, 3 );</div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( i ) ) {</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Bile splatters on the %s!&quot;</span> ),</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>                         <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.tername( i ) );</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>            }</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>        }</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>    }</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>    <span class="keywordflow">if</span>( !target-&gt;<a class="code hl_function" href="classCreature.html#afd2f1b1e5bafdef20afddbb704b1d5a5">uncanny_dodge</a>() ) {<span class="comment"></span></div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span><span class="comment">        ///\EFFECT_DODGE increases chance to avoid boomer effect</span></div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span><span class="comment"></span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 10 ) &gt; target-&gt;<a class="code hl_function" href="classCreature.html#aaa501dbe3d1e90d47da43fb9ea57b3be">get_dodge</a>() || <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( target-&gt;<a class="code hl_function" href="classCreature.html#aaa501dbe3d1e90d47da43fb9ea57b3be">get_dodge</a>() ) ) {</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>            target-&gt;<a class="code hl_function" href="classCreature.html#aeb7869963d4c1060c4d928424511d2e0">add_env_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a468a4ea99d05230e46c7e014a68270a7">effect_boomered</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2055386ee220ee2ca3e61d13df65e868">bp_eyes</a>, 3, 12_turns );</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( u_see ) {</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>            target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You dodge it!&quot;</span> ),</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>                                           <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; dodges it!&quot;</span> ) );</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>        }</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>        target-&gt;<a class="code hl_function" href="classCreature.html#af56188882e3300853d18f166738ee37a">on_dodge</a>( z, 5 );</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>    }</div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span> </div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>}</div>
<div class="ttc" id="aclassCreature_html_aaa501dbe3d1e90d47da43fb9ea57b3be"><div class="ttname"><a href="classCreature.html#aaa501dbe3d1e90d47da43fb9ea57b3be">Creature::get_dodge</a></div><div class="ttdeci">virtual float get_dodge() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01502">creature.cpp:1502</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a22bb00476a16e7d9d5a0de4454a7e7ae"><div class="ttname"><a href="field__type_8cpp.html#a22bb00476a16e7d9d5a0de4454a7e7ae">fd_bile</a></div><div class="ttdeci">field_type_id fd_bile</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00337">field_type.cpp:337</a></div></div>
<div class="ttc" id="amapgen_8cpp_html_a90f1f53dc044e93e7f7f9314cef1bd45"><div class="ttname"><a href="mapgen_8cpp.html#a90f1f53dc044e93e7f7f9314cef1bd45">line</a></div><div class="ttdeci">void line(map *m, const ter_id &amp;type, const point &amp;p1, const point &amp;p2)</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l06454">mapgen.cpp:6454</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a468a4ea99d05230e46c7e014a68270a7"><div class="ttname"><a href="monattack_8cpp.html#a468a4ea99d05230e46c7e014a68270a7">effect_boomered</a></div><div class="ttdeci">static const efftype_id effect_boomered(&quot;boomered&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8cpp_source.html#l01106">Creature::add_env_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="bodypart_8h_source.html#l00042">bp_eyes</a>, <a class="el" href="monster_8cpp_source.html#l00931">monster::can_act()</a>, <a class="el" href="monattack_8cpp.html#a468a4ea99d05230e46c7e014a68270a7">effect_boomered</a>, <a class="el" href="field__type_8cpp_source.html#l00337">fd_bile</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8cpp_source.html#l01502">Creature::get_dodge()</a>, <a class="el" href="mapgen_8cpp_source.html#l06454">line()</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="classCreature.html#af56188882e3300853d18f166738ee37a">Creature::on_dodge()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, and <a class="el" href="creature_8h_source.html#l00485">Creature::uncanny_dodge()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="acb8bac93a0fbd0c44f4940e1cf0af121" name="acb8bac93a0fbd0c44f4940e1cf0af121"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb8bac93a0fbd0c44f4940e1cf0af121">&#9670;&nbsp;</a></span>boomer_glow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::boomer_glow </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
Dodge increases chance to avoid glowing boomer effect 
<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l00885">885</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>{</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classmonster.html#a0f83a7ee7bd8d96efc80200c5a5caf5b">can_act</a>() ) {</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>    }</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span> </div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> || <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() ) &gt; 3 || !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>    }</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span> </div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>    std::vector&lt;tripoint&gt; <a class="code hl_function" href="mapgen_8cpp.html#a90f1f53dc044e93e7f7f9314cef1bd45">line</a> = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.find_clear_path( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() );</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>    <span class="comment">// It takes a while</span></div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 250;</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>    <span class="keywordtype">bool</span> u_see = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z );</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>    <span class="keywordflow">if</span>( u_see ) {</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s spews bile!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>    }</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;i : <a class="code hl_function" href="mapgen_8cpp.html#a90f1f53dc044e93e7f7f9314cef1bd45">line</a> ) {</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_field( i, <a class="code hl_variable" href="field__type_8cpp.html#a22bb00476a16e7d9d5a0de4454a7e7ae">fd_bile</a>, 1 );</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.impassable( i ) ) {</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_field( i, <a class="code hl_variable" href="field__type_8cpp.html#a22bb00476a16e7d9d5a0de4454a7e7ae">fd_bile</a>, 3 );</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( i ) ) {</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Bile splatters on the %s!&quot;</span> ), <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.tername( i ) );</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>            }</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>        }</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>    }</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>    <span class="keywordflow">if</span>( !target-&gt;<a class="code hl_function" href="classCreature.html#afd2f1b1e5bafdef20afddbb704b1d5a5">uncanny_dodge</a>() ) {<span class="comment"></span></div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span><span class="comment">        ///\EFFECT_DODGE increases chance to avoid glowing boomer effect</span></div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span><span class="comment"></span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 10 ) &gt; target-&gt;<a class="code hl_function" href="classCreature.html#aaa501dbe3d1e90d47da43fb9ea57b3be">get_dodge</a>() || <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( target-&gt;<a class="code hl_function" href="classCreature.html#aaa501dbe3d1e90d47da43fb9ea57b3be">get_dodge</a>() ) ) {</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>            target-&gt;<a class="code hl_function" href="classCreature.html#aeb7869963d4c1060c4d928424511d2e0">add_env_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a468a4ea99d05230e46c7e014a68270a7">effect_boomered</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2055386ee220ee2ca3e61d13df65e868">bp_eyes</a>, 5, 25_turns );</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>            target-&gt;<a class="code hl_function" href="classCreature.html#af56188882e3300853d18f166738ee37a">on_dodge</a>( z, 5 );</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 2, 4 ); i++ ) {</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>                <a class="code hl_enumeration" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980">body_part</a> bp = <a class="code hl_function" href="bodypart_8cpp.html#ad5a2e69e812ef651c2fb33cdf830e50f">random_body_part</a>();</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>                target-&gt;<a class="code hl_function" href="classCreature.html#aeb7869963d4c1060c4d928424511d2e0">add_env_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a8f6887393d4085f03584ef53b2c63d2f">effect_glowing</a>, bp, 4, 4_minutes );</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>                <span class="keywordflow">if</span>( target-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a8f6887393d4085f03584ef53b2c63d2f">effect_glowing</a> ) ) {</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>                }</div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>            }</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>            target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You dodge it!&quot;</span> ),</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>                                           <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; dodges it!&quot;</span> ) );</div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>        }</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>    }</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span> </div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>}</div>
<div class="ttc" id="abodypart_8cpp_html_ad5a2e69e812ef651c2fb33cdf830e50f"><div class="ttname"><a href="bodypart_8cpp.html#ad5a2e69e812ef651c2fb33cdf830e50f">random_body_part</a></div><div class="ttdeci">body_part random_body_part(bool main_parts_only)</div><div class="ttdoc">Returns a random body_part token.</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8cpp_source.html#l00364">bodypart.cpp:364</a></div></div>
<div class="ttc" id="aclassCreature_html_a6fb79df9315dc2bed6f34d9a2e37da90"><div class="ttname"><a href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">Creature::has_effect</a></div><div class="ttdeci">bool has_effect(const efftype_id &amp;eff_id, body_part bp=num_bp) const</div><div class="ttdoc">Check if creature has the matching effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01173">creature.cpp:1173</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a8f6887393d4085f03584ef53b2c63d2f"><div class="ttname"><a href="monattack_8cpp.html#a8f6887393d4085f03584ef53b2c63d2f">effect_glowing</a></div><div class="ttdeci">static const efftype_id effect_glowing(&quot;glowing&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8cpp_source.html#l01106">Creature::add_env_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="bodypart_8h_source.html#l00042">bp_eyes</a>, <a class="el" href="monster_8cpp_source.html#l00931">monster::can_act()</a>, <a class="el" href="monattack_8cpp.html#a468a4ea99d05230e46c7e014a68270a7">effect_boomered</a>, <a class="el" href="monattack_8cpp.html#a8f6887393d4085f03584ef53b2c63d2f">effect_glowing</a>, <a class="el" href="field__type_8cpp_source.html#l00337">fd_bile</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8cpp_source.html#l01502">Creature::get_dodge()</a>, <a class="el" href="creature_8cpp_source.html#l01173">Creature::has_effect()</a>, <a class="el" href="mapgen_8cpp_source.html#l06454">line()</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="classCreature.html#af56188882e3300853d18f166738ee37a">Creature::on_dodge()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="bodypart_8cpp_source.html#l00364">random_body_part()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, and <a class="el" href="creature_8h_source.html#l00485">Creature::uncanny_dodge()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a6b060ca0e13788d28461dc56035cae2c" name="a6b060ca0e13788d28461dc56035cae2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b060ca0e13788d28461dc56035cae2c">&#9670;&nbsp;</a></span>brandish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::brandish </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l04125">4125</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04126" name="l04126"></a><span class="lineno"> 4126</span>{</div>
<div class="line"><a id="l04127" name="l04127"></a><span class="lineno"> 4127</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> ) {</div>
<div class="line"><a id="l04128" name="l04128"></a><span class="lineno"> 4128</span>        <span class="comment">// TODO: handle friendly monsters</span></div>
<div class="line"><a id="l04129" name="l04129"></a><span class="lineno"> 4129</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04130" name="l04130"></a><span class="lineno"> 4130</span>    }</div>
<div class="line"><a id="l04131" name="l04131"></a><span class="lineno"> 4131</span>    <span class="comment">// Only brandish if we can see you!</span></div>
<div class="line"><a id="l04132" name="l04132"></a><span class="lineno"> 4132</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ) ) {</div>
<div class="line"><a id="l04133" name="l04133"></a><span class="lineno"> 4133</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04134" name="l04134"></a><span class="lineno"> 4134</span>    }</div>
<div class="line"><a id="l04135" name="l04135"></a><span class="lineno"> 4135</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;He&#39;s brandishing a knife!&quot;</span> ) );</div>
<div class="line"><a id="l04136" name="l04136"></a><span class="lineno"> 4136</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Quiet, quiet&quot;</span> ) );</div>
<div class="line"><a id="l04137" name="l04137"></a><span class="lineno"> 4137</span> </div>
<div class="line"><a id="l04138" name="l04138"></a><span class="lineno"> 4138</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04139" name="l04139"></a><span class="lineno"> 4139</span>}</div>
<div class="ttc" id="aclassmonster_html_a4e17d0d504a12d9b2e4de3e7a7503fff"><div class="ttname"><a href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">monster::friendly</a></div><div class="ttdeci">int friendly</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00471">monster.h:471</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="monster_8h_source.html#l00471">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, and <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="aab5452c53a4f87a07d009d2715ec08b5" name="aab5452c53a4f87a07d009d2715ec08b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab5452c53a4f87a07d009d2715ec08b5">&#9670;&nbsp;</a></span>breathe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::breathe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l04021">4021</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04022" name="l04022"></a><span class="lineno"> 4022</span>{</div>
<div class="line"><a id="l04023" name="l04023"></a><span class="lineno"> 4023</span>    <span class="comment">// It takes a while</span></div>
<div class="line"><a id="l04024" name="l04024"></a><span class="lineno"> 4024</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 100;</div>
<div class="line"><a id="l04025" name="l04025"></a><span class="lineno"> 4025</span> </div>
<div class="line"><a id="l04026" name="l04026"></a><span class="lineno"> 4026</span>    <span class="keywordtype">bool</span> able = ( z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a> == <a class="code hl_variable" href="monattack_8cpp.html#a7490b3833a4ccde42b3dab6eadfb43d3">mon_breather_hub</a> );</div>
<div class="line"><a id="l04027" name="l04027"></a><span class="lineno"> 4027</span>    <span class="keywordflow">if</span>( !able ) {</div>
<div class="line"><a id="l04028" name="l04028"></a><span class="lineno"> 4028</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;dest : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 3 ) ) {</div>
<div class="line"><a id="l04029" name="l04029"></a><span class="lineno"> 4029</span>            <a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">const</span> mon = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at&lt;<a class="code hl_class" href="classmonster.html">monster</a>&gt;( dest );</div>
<div class="line"><a id="l04030" name="l04030"></a><span class="lineno"> 4030</span>            <span class="keywordflow">if</span>( mon &amp;&amp; mon-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a> == <a class="code hl_variable" href="monattack_8cpp.html#a7490b3833a4ccde42b3dab6eadfb43d3">mon_breather_hub</a> ) {</div>
<div class="line"><a id="l04031" name="l04031"></a><span class="lineno"> 4031</span>                able = <span class="keyword">true</span>;</div>
<div class="line"><a id="l04032" name="l04032"></a><span class="lineno"> 4032</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04033" name="l04033"></a><span class="lineno"> 4033</span>            }</div>
<div class="line"><a id="l04034" name="l04034"></a><span class="lineno"> 4034</span>        }</div>
<div class="line"><a id="l04035" name="l04035"></a><span class="lineno"> 4035</span>    }</div>
<div class="line"><a id="l04036" name="l04036"></a><span class="lineno"> 4036</span>    <span class="keywordflow">if</span>( !able ) {</div>
<div class="line"><a id="l04037" name="l04037"></a><span class="lineno"> 4037</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04038" name="l04038"></a><span class="lineno"> 4038</span>    }</div>
<div class="line"><a id="l04039" name="l04039"></a><span class="lineno"> 4039</span> </div>
<div class="line"><a id="l04040" name="l04040"></a><span class="lineno"> 4040</span>    <span class="keywordflow">if</span>( <a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">const</span> spawned = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_around( <a class="code hl_variable" href="monattack_8cpp.html#a3a701004a797f5511860423764151aa2">mon_breather</a>, z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 1 ) ) {</div>
<div class="line"><a id="l04041" name="l04041"></a><span class="lineno"> 4041</span>        spawned-&gt;<a class="code hl_function" href="classmonster.html#a60ae9c29710c56417f769dea8381becf">reset_special</a>( <span class="stringliteral">&quot;BREATHE&quot;</span> );</div>
<div class="line"><a id="l04042" name="l04042"></a><span class="lineno"> 4042</span>        spawned-&gt;make_ally( *z );</div>
<div class="line"><a id="l04043" name="l04043"></a><span class="lineno"> 4043</span>    }</div>
<div class="line"><a id="l04044" name="l04044"></a><span class="lineno"> 4044</span> </div>
<div class="line"><a id="l04045" name="l04045"></a><span class="lineno"> 4045</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04046" name="l04046"></a><span class="lineno"> 4046</span>}</div>
<div class="ttc" id="aclassmonster_html_a60ae9c29710c56417f769dea8381becf"><div class="ttname"><a href="classmonster.html#a60ae9c29710c56417f769dea8381becf">monster::reset_special</a></div><div class="ttdeci">void reset_special(const std::string &amp;special_name)</div><div class="ttdoc">Resets a given special to its monster type cooldown value.</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l02046">monster.cpp:2046</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a3a701004a797f5511860423764151aa2"><div class="ttname"><a href="monattack_8cpp.html#a3a701004a797f5511860423764151aa2">mon_breather</a></div><div class="ttdeci">static const mtype_id mon_breather(&quot;mon_breather&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a7490b3833a4ccde42b3dab6eadfb43d3"><div class="ttname"><a href="monattack_8cpp.html#a7490b3833a4ccde42b3dab6eadfb43d3">mon_breather_hub</a></div><div class="ttdeci">static const mtype_id mon_breather_hub(&quot;mon_breather_hub&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="mtype_8h_source.html#l00240">mtype::id</a>, <a class="el" href="monattack_8cpp.html#a3a701004a797f5511860423764151aa2">mon_breather</a>, <a class="el" href="monattack_8cpp.html#a7490b3833a4ccde42b3dab6eadfb43d3">mon_breather_hub</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="monster_8cpp_source.html#l02046">monster::reset_special()</a>, and <a class="el" href="monster_8h_source.html#l00478">monster::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a8b04f2daea8c9c614169ca1f38fc13f8" name="a8b04f2daea8c9c614169ca1f38fc13f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b04f2daea8c9c614169ca1f38fc13f8">&#9670;&nbsp;</a></span>callblobs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::callblobs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l02355">2355</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02356" name="l02356"></a><span class="lineno"> 2356</span>{</div>
<div class="line"><a id="l02357" name="l02357"></a><span class="lineno"> 2357</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> ) {</div>
<div class="line"><a id="l02358" name="l02358"></a><span class="lineno"> 2358</span>        <span class="comment">// TODO: handle friendly monsters</span></div>
<div class="line"><a id="l02359" name="l02359"></a><span class="lineno"> 2359</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02360" name="l02360"></a><span class="lineno"> 2360</span>    }</div>
<div class="line"><a id="l02361" name="l02361"></a><span class="lineno"> 2361</span>    <span class="comment">// The huge brain blob interposes other blobs between it and any threat.</span></div>
<div class="line"><a id="l02362" name="l02362"></a><span class="lineno"> 2362</span>    <span class="comment">// For the moment just target the player, this gets a bit more complicated</span></div>
<div class="line"><a id="l02363" name="l02363"></a><span class="lineno"> 2363</span>    <span class="comment">// if we want to deal with NPCS and friendly monsters as well.</span></div>
<div class="line"><a id="l02364" name="l02364"></a><span class="lineno"> 2364</span>    <span class="comment">// The strategy is to send about 1/3 of the available blobs after the player,</span></div>
<div class="line"><a id="l02365" name="l02365"></a><span class="lineno"> 2365</span>    <span class="comment">// and keep the rest near the brain blob for protection.</span></div>
<div class="line"><a id="l02366" name="l02366"></a><span class="lineno"> 2366</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> enemy = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos();</div>
<div class="line"><a id="l02367" name="l02367"></a><span class="lineno"> 2367</span>    std::list&lt;monster *&gt; allies;</div>
<div class="line"><a id="l02368" name="l02368"></a><span class="lineno"> 2368</span>    std::vector&lt;tripoint&gt; nearby_points = <a class="code hl_function" href="coordinates_8h.html#a13a12943d34d5f17e6c3b4e730659fc6">closest_points_first</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 3 );</div>
<div class="line"><a id="l02369" name="l02369"></a><span class="lineno"> 2369</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classmonster.html">monster</a> &amp;candidate : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;all_monsters() ) {</div>
<div class="line"><a id="l02370" name="l02370"></a><span class="lineno"> 2370</span>        <span class="keywordflow">if</span>( candidate.type-&gt;in_species( <a class="code hl_variable" href="monattack_8cpp.html#a1ce9db8f1e355ba884db835013d78b41">species_BLOB</a> ) &amp;&amp; candidate.type-&gt;id != <a class="code hl_variable" href="monattack_8cpp.html#a039c3acd23099e1631feefe7748f49ac">mon_blob_brain</a> ) {</div>
<div class="line"><a id="l02371" name="l02371"></a><span class="lineno"> 2371</span>            <span class="comment">// Just give the allies consistent assignments.</span></div>
<div class="line"><a id="l02372" name="l02372"></a><span class="lineno"> 2372</span>            <span class="comment">// Don&#39;t worry about trying to make the orders optimal.</span></div>
<div class="line"><a id="l02373" name="l02373"></a><span class="lineno"> 2373</span>            allies.push_back( &amp;candidate );</div>
<div class="line"><a id="l02374" name="l02374"></a><span class="lineno"> 2374</span>        }</div>
<div class="line"><a id="l02375" name="l02375"></a><span class="lineno"> 2375</span>    }</div>
<div class="line"><a id="l02376" name="l02376"></a><span class="lineno"> 2376</span>    <span class="comment">// 1/3 of the available blobs, unless they would fill the entire area near the brain.</span></div>
<div class="line"><a id="l02377" name="l02377"></a><span class="lineno"> 2377</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> num_guards = std::min( allies.size() / 3, nearby_points.size() );</div>
<div class="line"><a id="l02378" name="l02378"></a><span class="lineno"> 2378</span>    <span class="keywordtype">int</span> guards = 0;</div>
<div class="line"><a id="l02379" name="l02379"></a><span class="lineno"> 2379</span>    <span class="keywordflow">for</span>( std::list&lt;monster *&gt;::iterator ally = allies.begin();</div>
<div class="line"><a id="l02380" name="l02380"></a><span class="lineno"> 2380</span>         ally != allies.end(); ++ally, ++guards ) {</div>
<div class="line"><a id="l02381" name="l02381"></a><span class="lineno"> 2381</span>        <a class="code hl_struct" href="structtripoint.html">tripoint</a> post = enemy;</div>
<div class="line"><a id="l02382" name="l02382"></a><span class="lineno"> 2382</span>        <span class="keywordflow">if</span>( guards &lt; num_guards ) {</div>
<div class="line"><a id="l02383" name="l02383"></a><span class="lineno"> 2383</span>            <span class="comment">// Each guard is assigned a spot in the nearby_points vector based on their order.</span></div>
<div class="line"><a id="l02384" name="l02384"></a><span class="lineno"> 2384</span>            <span class="keywordtype">int</span> assigned_spot = ( nearby_points.size() * guards ) / num_guards;</div>
<div class="line"><a id="l02385" name="l02385"></a><span class="lineno"> 2385</span>            post = nearby_points[ assigned_spot ];</div>
<div class="line"><a id="l02386" name="l02386"></a><span class="lineno"> 2386</span>        }</div>
<div class="line"><a id="l02387" name="l02387"></a><span class="lineno"> 2387</span>        ( *ally )-&gt;set_dest( post );</div>
<div class="line"><a id="l02388" name="l02388"></a><span class="lineno"> 2388</span>        <span class="keywordflow">if</span>( !( *ally )-&gt;has_effect( <a class="code hl_variable" href="monattack_8cpp.html#aed84cc428d3176b893fe131e4eda45c3">effect_ai_controlled</a> ) ) {</div>
<div class="line"><a id="l02389" name="l02389"></a><span class="lineno"> 2389</span>            ( *ally )-&gt;add_effect( <a class="code hl_variable" href="monattack_8cpp.html#aed84cc428d3176b893fe131e4eda45c3">effect_ai_controlled</a>, 1_turns, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a> );</div>
<div class="line"><a id="l02390" name="l02390"></a><span class="lineno"> 2390</span>        }</div>
<div class="line"><a id="l02391" name="l02391"></a><span class="lineno"> 2391</span>    }</div>
<div class="line"><a id="l02392" name="l02392"></a><span class="lineno"> 2392</span>    <span class="comment">// This is telepathy, doesn&#39;t take any moves.</span></div>
<div class="line"><a id="l02393" name="l02393"></a><span class="lineno"> 2393</span> </div>
<div class="line"><a id="l02394" name="l02394"></a><span class="lineno"> 2394</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02395" name="l02395"></a><span class="lineno"> 2395</span>}</div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a></div><div class="ttdeci">@ num_bp</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00053">bodypart.h:52</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a13a12943d34d5f17e6c3b4e730659fc6"><div class="ttname"><a href="coordinates_8h.html#a13a12943d34d5f17e6c3b4e730659fc6">closest_points_first</a></div><div class="ttdeci">std::vector&lt; coords::coord_point&lt; Point, Origin, Scale &gt; &gt; closest_points_first(const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc, int min_dist, int max_dist)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00596">coordinates.h:596</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a039c3acd23099e1631feefe7748f49ac"><div class="ttname"><a href="monattack_8cpp.html#a039c3acd23099e1631feefe7748f49ac">mon_blob_brain</a></div><div class="ttdeci">static const mtype_id mon_blob_brain(&quot;mon_blob_brain&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a1ce9db8f1e355ba884db835013d78b41"><div class="ttname"><a href="monattack_8cpp.html#a1ce9db8f1e355ba884db835013d78b41">species_BLOB</a></div><div class="ttdeci">static const species_id species_BLOB(&quot;BLOB&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_aed84cc428d3176b893fe131e4eda45c3"><div class="ttname"><a href="monattack_8cpp.html#aed84cc428d3176b893fe131e4eda45c3">effect_ai_controlled</a></div><div class="ttdeci">static const efftype_id effect_ai_controlled(&quot;ai_controlled&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="coordinates_8h_source.html#l00596">closest_points_first()</a>, <a class="el" href="monattack_8cpp.html#aed84cc428d3176b893fe131e4eda45c3">effect_ai_controlled</a>, <a class="el" href="monster_8h_source.html#l00471">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="monattack_8cpp.html#a039c3acd23099e1631feefe7748f49ac">mon_blob_brain</a>, <a class="el" href="bodypart_8h_source.html#l00052">num_bp</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, and <a class="el" href="monattack_8cpp.html#a1ce9db8f1e355ba884db835013d78b41">species_BLOB</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a20749a9048978ab45aa38822d84fdd25" name="a20749a9048978ab45aa38822d84fdd25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20749a9048978ab45aa38822d84fdd25">&#9670;&nbsp;</a></span>check_money_left()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::check_money_left </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l03067">3067</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03068" name="l03068"></a><span class="lineno"> 3068</span>{</div>
<div class="line"><a id="l03069" name="l03069"></a><span class="lineno"> 3069</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a02a4844a7fb68c13a34dc40b0a9e94d8">effect_pet</a> ) ) {</div>
<div class="line"><a id="l03070" name="l03070"></a><span class="lineno"> 3070</span>        <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> == -1 &amp;&amp;</div>
<div class="line"><a id="l03071" name="l03071"></a><span class="lineno"> 3071</span>            z-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#aba65d2f107cd13ba885bc181e6d42b92">effect_paid</a> ) ) { <span class="comment">// if the pet effect runs out we&#39;re no longer friends</span></div>
<div class="line"><a id="l03072" name="l03072"></a><span class="lineno"> 3072</span>            z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> = 0;</div>
<div class="line"><a id="l03073" name="l03073"></a><span class="lineno"> 3073</span> </div>
<div class="line"><a id="l03074" name="l03074"></a><span class="lineno"> 3074</span>            <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_variable" href="classmonster.html#a275d73e1bf3d08e2ea1a0704ac898f7e">inv</a>.empty() ) {</div>
<div class="line"><a id="l03075" name="l03075"></a><span class="lineno"> 3075</span>                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp;it : z-&gt;<a class="code hl_variable" href="classmonster.html#a275d73e1bf3d08e2ea1a0704ac898f7e">inv</a> ) {</div>
<div class="line"><a id="l03076" name="l03076"></a><span class="lineno"> 3076</span>                    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_item_or_charges( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), it );</div>
<div class="line"><a id="l03077" name="l03077"></a><span class="lineno"> 3077</span>                }</div>
<div class="line"><a id="l03078" name="l03078"></a><span class="lineno"> 3078</span>                z-&gt;<a class="code hl_variable" href="classmonster.html#a275d73e1bf3d08e2ea1a0704ac898f7e">inv</a>.clear();</div>
<div class="line"><a id="l03079" name="l03079"></a><span class="lineno"> 3079</span>                z-&gt;<a class="code hl_function" href="classCreature.html#a730fb8be5a540edd31ed9d8126ea20de">remove_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a1d79314c1b7ffad5a2ff37a9fcad59b8">effect_has_bag</a> );</div>
<div class="line"><a id="l03080" name="l03080"></a><span class="lineno"> 3080</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a id="l03081" name="l03081"></a><span class="lineno"> 3081</span>                         <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s dumps the contents of its bag on the ground and drops the bag on top of it.&quot;</span> ),</div>
<div class="line"><a id="l03082" name="l03082"></a><span class="lineno"> 3082</span>                         z-&gt;<a class="code hl_function" href="classmonster.html#ad4fba0b9aea36097d8b972e05e66d914">get_name</a>() );</div>
<div class="line"><a id="l03083" name="l03083"></a><span class="lineno"> 3083</span>            }</div>
<div class="line"><a id="l03084" name="l03084"></a><span class="lineno"> 3084</span> </div>
<div class="line"><a id="l03085" name="l03085"></a><span class="lineno"> 3085</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structSpeechBubble.html">SpeechBubble</a> &amp;speech_no_time = <a class="code hl_function" href="speech_8cpp.html#a576ec6cec2f290b1c65170befdd4b66d">get_speech</a>( <span class="stringliteral">&quot;mon_grocerybot_friendship_done&quot;</span> );</div>
<div class="line"><a id="l03086" name="l03086"></a><span class="lineno"> 3086</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), speech_no_time.<a class="code hl_variable" href="structSpeechBubble.html#a72ece413ecfa11fdb12171b59a055a8f">volume</a>,</div>
<div class="line"><a id="l03087" name="l03087"></a><span class="lineno"> 3087</span>                           <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>, speech_no_time.<a class="code hl_variable" href="structSpeechBubble.html#a786df9aa02b07bfc6b971709dbadcf66">text</a> );</div>
<div class="line"><a id="l03088" name="l03088"></a><span class="lineno"> 3088</span>            z-&gt;<a class="code hl_function" href="classCreature.html#a730fb8be5a540edd31ed9d8126ea20de">remove_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#aba65d2f107cd13ba885bc181e6d42b92">effect_paid</a> );</div>
<div class="line"><a id="l03089" name="l03089"></a><span class="lineno"> 3089</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03090" name="l03090"></a><span class="lineno"> 3090</span>        }</div>
<div class="line"><a id="l03091" name="l03091"></a><span class="lineno"> 3091</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03092" name="l03092"></a><span class="lineno"> 3092</span>        <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> time_left = z-&gt;<a class="code hl_function" href="classCreature.html#a2bb3543ca955d69805e57e4e09d878ef">get_effect_dur</a>( <a class="code hl_variable" href="monattack_8cpp.html#a02a4844a7fb68c13a34dc40b0a9e94d8">effect_pet</a> );</div>
<div class="line"><a id="l03093" name="l03093"></a><span class="lineno"> 3093</span>        <span class="keywordflow">if</span>( time_left &lt; 1_minutes ) {</div>
<div class="line"><a id="l03094" name="l03094"></a><span class="lineno"> 3094</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( 20_seconds ) ) {</div>
<div class="line"><a id="l03095" name="l03095"></a><span class="lineno"> 3095</span>                <span class="keyword">const</span> <a class="code hl_struct" href="structSpeechBubble.html">SpeechBubble</a> &amp;speech_time_low = <a class="code hl_function" href="speech_8cpp.html#a576ec6cec2f290b1c65170befdd4b66d">get_speech</a>( <span class="stringliteral">&quot;mon_grocerybot_running_out_of_friendship&quot;</span> );</div>
<div class="line"><a id="l03096" name="l03096"></a><span class="lineno"> 3096</span>                <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), speech_time_low.<a class="code hl_variable" href="structSpeechBubble.html#a72ece413ecfa11fdb12171b59a055a8f">volume</a>,</div>
<div class="line"><a id="l03097" name="l03097"></a><span class="lineno"> 3097</span>                               <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>, speech_time_low.<a class="code hl_variable" href="structSpeechBubble.html#a786df9aa02b07bfc6b971709dbadcf66">text</a> );</div>
<div class="line"><a id="l03098" name="l03098"></a><span class="lineno"> 3098</span>            }</div>
<div class="line"><a id="l03099" name="l03099"></a><span class="lineno"> 3099</span>        }</div>
<div class="line"><a id="l03100" name="l03100"></a><span class="lineno"> 3100</span>    }</div>
<div class="line"><a id="l03101" name="l03101"></a><span class="lineno"> 3101</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> == -1 &amp;&amp; !z-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#aba65d2f107cd13ba885bc181e6d42b92">effect_paid</a> ) ) {</div>
<div class="line"><a id="l03102" name="l03102"></a><span class="lineno"> 3102</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( 3_hours ) ) {</div>
<div class="line"><a id="l03103" name="l03103"></a><span class="lineno"> 3103</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structSpeechBubble.html">SpeechBubble</a> &amp;speech_override_start = <a class="code hl_function" href="speech_8cpp.html#a576ec6cec2f290b1c65170befdd4b66d">get_speech</a>( <span class="stringliteral">&quot;mon_grocerybot_hacked&quot;</span> );</div>
<div class="line"><a id="l03104" name="l03104"></a><span class="lineno"> 3104</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), speech_override_start.<a class="code hl_variable" href="structSpeechBubble.html#a72ece413ecfa11fdb12171b59a055a8f">volume</a>,</div>
<div class="line"><a id="l03105" name="l03105"></a><span class="lineno"> 3105</span>                           <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>, speech_override_start.<a class="code hl_variable" href="structSpeechBubble.html#a786df9aa02b07bfc6b971709dbadcf66">text</a> );</div>
<div class="line"><a id="l03106" name="l03106"></a><span class="lineno"> 3106</span>        }</div>
<div class="line"><a id="l03107" name="l03107"></a><span class="lineno"> 3107</span>    }</div>
<div class="line"><a id="l03108" name="l03108"></a><span class="lineno"> 3108</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03109" name="l03109"></a><span class="lineno"> 3109</span>}</div>
<div class="ttc" id="aclassCreature_html_a2bb3543ca955d69805e57e4e09d878ef"><div class="ttname"><a href="classCreature.html#a2bb3543ca955d69805e57e4e09d878ef">Creature::get_effect_dur</a></div><div class="ttdeci">time_duration get_effect_dur(const efftype_id &amp;eff_id, body_part bp=num_bp) const</div><div class="ttdoc">Returns the duration of the matching effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01235">creature.cpp:1235</a></div></div>
<div class="ttc" id="aclassCreature_html_a730fb8be5a540edd31ed9d8126ea20de"><div class="ttname"><a href="classCreature.html#a730fb8be5a540edd31ed9d8126ea20de">Creature::remove_effect</a></div><div class="ttdeci">bool remove_effect(const efftype_id &amp;eff_id, body_part bp=num_bp)</div><div class="ttdoc">Removes a listed effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01130">creature.cpp:1130</a></div></div>
<div class="ttc" id="aclassmonster_html_a275d73e1bf3d08e2ea1a0704ac898f7e"><div class="ttname"><a href="classmonster.html#a275d73e1bf3d08e2ea1a0704ac898f7e">monster::inv</a></div><div class="ttdeci">std::vector&lt; item &gt; inv</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00456">monster.h:456</a></div></div>
<div class="ttc" id="aclassmonster_html_ad4fba0b9aea36097d8b972e05e66d914"><div class="ttname"><a href="classmonster.html#ad4fba0b9aea36097d8b972e05e66d914">monster::get_name</a></div><div class="ttdeci">std::string get_name() const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00487">monster.cpp:487</a></div></div>
<div class="ttc" id="aclasstime__duration_html"><div class="ttname"><a href="classtime__duration.html">time_duration</a></div><div class="ttdoc">A duration defined as a number of specific time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00179">calendar.h:180</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a02a4844a7fb68c13a34dc40b0a9e94d8"><div class="ttname"><a href="monattack_8cpp.html#a02a4844a7fb68c13a34dc40b0a9e94d8">effect_pet</a></div><div class="ttdeci">static const efftype_id effect_pet(&quot;pet&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a1d79314c1b7ffad5a2ff37a9fcad59b8"><div class="ttname"><a href="monattack_8cpp.html#a1d79314c1b7ffad5a2ff37a9fcad59b8">effect_has_bag</a></div><div class="ttdeci">static const efftype_id effect_has_bag(&quot;has_bag&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_aba65d2f107cd13ba885bc181e6d42b92"><div class="ttname"><a href="monattack_8cpp.html#aba65d2f107cd13ba885bc181e6d42b92">effect_paid</a></div><div class="ttdeci">static const efftype_id effect_paid(&quot;paid&quot;)</div></div>
<div class="ttc" id="anamespacecalendar_html_a356df28513f4d655ae35c312ab6e7d55"><div class="ttname"><a href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a></div><div class="ttdeci">bool once_every(const time_duration &amp;event_frequency)</div><div class="ttdoc">Predicate to handle rate-limiting.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00490">calendar.cpp:490</a></div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a></div><div class="ttdeci">@ electronic_speech</div></div>
<div class="ttc" id="aspeech_8cpp_html_a576ec6cec2f290b1c65170befdd4b66d"><div class="ttname"><a href="speech_8cpp.html#a576ec6cec2f290b1c65170befdd4b66d">get_speech</a></div><div class="ttdeci">const SpeechBubble &amp; get_speech(const std::string &amp;label)</div><div class="ttdef"><b>Definition:</b> <a href="speech_8cpp_source.html#l00031">speech.cpp:31</a></div></div>
<div class="ttc" id="astructSpeechBubble_html"><div class="ttname"><a href="structSpeechBubble.html">SpeechBubble</a></div><div class="ttdef"><b>Definition:</b> <a href="speech_8h_source.html#l00011">speech.h:11</a></div></div>
<div class="ttc" id="astructSpeechBubble_html_a72ece413ecfa11fdb12171b59a055a8f"><div class="ttname"><a href="structSpeechBubble.html#a72ece413ecfa11fdb12171b59a055a8f">SpeechBubble::volume</a></div><div class="ttdeci">int volume</div><div class="ttdef"><b>Definition:</b> <a href="speech_8h_source.html#l00013">speech.h:13</a></div></div>
<div class="ttc" id="astructSpeechBubble_html_a786df9aa02b07bfc6b971709dbadcf66"><div class="ttname"><a href="structSpeechBubble.html#a786df9aa02b07bfc6b971709dbadcf66">SpeechBubble::text</a></div><div class="ttdeci">translation text</div><div class="ttdef"><b>Definition:</b> <a href="speech_8h_source.html#l00012">speech.h:12</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="monattack_8cpp.html#a1d79314c1b7ffad5a2ff37a9fcad59b8">effect_has_bag</a>, <a class="el" href="monattack_8cpp.html#aba65d2f107cd13ba885bc181e6d42b92">effect_paid</a>, <a class="el" href="monattack_8cpp.html#a02a4844a7fb68c13a34dc40b0a9e94d8">effect_pet</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::electronic_speech</a>, <a class="el" href="monster_8h_source.html#l00471">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8cpp_source.html#l01235">Creature::get_effect_dur()</a>, <a class="el" href="monster_8cpp_source.html#l00487">monster::get_name()</a>, <a class="el" href="speech_8cpp_source.html#l00031">get_speech()</a>, <a class="el" href="creature_8cpp_source.html#l01173">Creature::has_effect()</a>, <a class="el" href="monster_8h_source.html#l00456">monster::inv</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="calendar_8cpp_source.html#l00490">calendar::once_every()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="creature_8cpp_source.html#l01130">Creature::remove_effect()</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, <a class="el" href="speech_8h_source.html#l00012">SpeechBubble::text</a>, and <a class="el" href="speech_8h_source.html#l00013">SpeechBubble::volume</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="ab5ec6f0185771a7f935da77aa4627f28" name="ab5ec6f0185771a7f935da77aa4627f28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5ec6f0185771a7f935da77aa4627f28">&#9670;&nbsp;</a></span>chickenbot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::chickenbot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l03761">3761</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03762" name="l03762"></a><span class="lineno"> 3762</span>{</div>
<div class="line"><a id="l03763" name="l03763"></a><span class="lineno"> 3763</span>    <span class="keywordtype">int</span> mode = 0;</div>
<div class="line"><a id="l03764" name="l03764"></a><span class="lineno"> 3764</span>    <span class="keywordtype">int</span> boo_hoo = 0;</div>
<div class="line"><a id="l03765" name="l03765"></a><span class="lineno"> 3765</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target;</div>
<div class="line"><a id="l03766" name="l03766"></a><span class="lineno"> 3766</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> == 0 ) {</div>
<div class="line"><a id="l03767" name="l03767"></a><span class="lineno"> 3767</span>        target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l03768" name="l03768"></a><span class="lineno"> 3768</span>        <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l03769" name="l03769"></a><span class="lineno"> 3769</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03770" name="l03770"></a><span class="lineno"> 3770</span>        }</div>
<div class="line"><a id="l03771" name="l03771"></a><span class="lineno"> 3771</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03772" name="l03772"></a><span class="lineno"> 3772</span>        target = z-&gt;<a class="code hl_function" href="classCreature.html#abb91e1cd5610658124d40623e7e4d698">auto_find_hostile_target</a>( 38, boo_hoo );</div>
<div class="line"><a id="l03773" name="l03773"></a><span class="lineno"> 3773</span>        <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l03774" name="l03774"></a><span class="lineno"> 3774</span>            <span class="keywordflow">if</span>( boo_hoo &gt; 0 &amp;&amp; <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) { <span class="comment">// because that stupid oaf was in the way!</span></div>
<div class="line"><a id="l03775" name="l03775"></a><span class="lineno"> 3775</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;Pointed in your direction, the %s emits an IFF warning beep.&quot;</span>,</div>
<div class="line"><a id="l03776" name="l03776"></a><span class="lineno"> 3776</span>                                              <span class="stringliteral">&quot;Pointed in your direction, the %s emits %d annoyed sounding beeps.&quot;</span>,</div>
<div class="line"><a id="l03777" name="l03777"></a><span class="lineno"> 3777</span>                                              boo_hoo ),</div>
<div class="line"><a id="l03778" name="l03778"></a><span class="lineno"> 3778</span>                         z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(), boo_hoo );</div>
<div class="line"><a id="l03779" name="l03779"></a><span class="lineno"> 3779</span>            }</div>
<div class="line"><a id="l03780" name="l03780"></a><span class="lineno"> 3780</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03781" name="l03781"></a><span class="lineno"> 3781</span>        }</div>
<div class="line"><a id="l03782" name="l03782"></a><span class="lineno"> 3782</span>    }</div>
<div class="line"><a id="l03783" name="l03783"></a><span class="lineno"> 3783</span> </div>
<div class="line"><a id="l03784" name="l03784"></a><span class="lineno"> 3784</span>    <span class="keywordtype">int</span> cap = target-&gt;<a class="code hl_function" href="classCreature.html#a02d2efea607ba8fd8ecc714e35413d32">power_rating</a>() - 1;</div>
<div class="line"><a id="l03785" name="l03785"></a><span class="lineno"> 3785</span>    <a class="code hl_class" href="classmonster.html">monster</a> *mon = <span class="keyword">dynamic_cast&lt;</span> <a class="code hl_class" href="classmonster.html">monster</a> * <span class="keyword">&gt;</span>( target );</div>
<div class="line"><a id="l03786" name="l03786"></a><span class="lineno"> 3786</span>    <span class="comment">// Their attitude to us and not ours to them, so that bobcats won&#39;t get gunned down</span></div>
<div class="line"><a id="l03787" name="l03787"></a><span class="lineno"> 3787</span>    <span class="comment">// Only monster-types for now - assuming humans are smart enough not to make it obvious</span></div>
<div class="line"><a id="l03788" name="l03788"></a><span class="lineno"> 3788</span>    <span class="comment">// Unless damaged - then everything is hostile</span></div>
<div class="line"><a id="l03789" name="l03789"></a><span class="lineno"> 3789</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_function" href="classmonster.html#a2d0e466b9d25796cd99402ddd5d3ce20">get_hp</a>() &lt;= z-&gt;<a class="code hl_function" href="classmonster.html#a551f4a380282f8ec082c74f410c397de">get_hp_max</a>() ||</div>
<div class="line"><a id="l03790" name="l03790"></a><span class="lineno"> 3790</span>        ( mon != <span class="keyword">nullptr</span> &amp;&amp; mon-&gt;<a class="code hl_function" href="classmonster.html#a125622587c2069dc4dbbe07943c81336">attitude_to</a>( *z ) == Creature::Attitude::A_HOSTILE ) ) {</div>
<div class="line"><a id="l03791" name="l03791"></a><span class="lineno"> 3791</span>        cap += 2;</div>
<div class="line"><a id="l03792" name="l03792"></a><span class="lineno"> 3792</span>    }</div>
<div class="line"><a id="l03793" name="l03793"></a><span class="lineno"> 3793</span> </div>
<div class="line"><a id="l03794" name="l03794"></a><span class="lineno"> 3794</span>    <span class="keywordtype">int</span> dist = <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() );</div>
<div class="line"><a id="l03795" name="l03795"></a><span class="lineno"> 3795</span>    <span class="keywordtype">int</span> player_dist = <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>(), <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() );</div>
<div class="line"><a id="l03796" name="l03796"></a><span class="lineno"> 3796</span>    <span class="keywordflow">if</span>( dist == 1 &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) ) {</div>
<div class="line"><a id="l03797" name="l03797"></a><span class="lineno"> 3797</span>        <span class="comment">// Use tazer at point-blank range, and even then, not continuously.</span></div>
<div class="line"><a id="l03798" name="l03798"></a><span class="lineno"> 3798</span>        mode = 1;</div>
<div class="line"><a id="l03799" name="l03799"></a><span class="lineno"> 3799</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ( z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> == 0 || player_dist &gt;= 6 ) &amp;&amp;</div>
<div class="line"><a id="l03800" name="l03800"></a><span class="lineno"> 3800</span>               <span class="comment">// Avoid shooting near player if we&#39;re friendly.</span></div>
<div class="line"><a id="l03801" name="l03801"></a><span class="lineno"> 3801</span>               ( dist &gt;= 12 || ( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.in_vehicle &amp;&amp; dist &gt;= 6 ) ) ) {</div>
<div class="line"><a id="l03802" name="l03802"></a><span class="lineno"> 3802</span>        <span class="comment">// Only use at long range, unless player is in a vehicle, then tolerate closer targeting.</span></div>
<div class="line"><a id="l03803" name="l03803"></a><span class="lineno"> 3803</span>        mode = 3;</div>
<div class="line"><a id="l03804" name="l03804"></a><span class="lineno"> 3804</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dist &gt;= 4 ) {</div>
<div class="line"><a id="l03805" name="l03805"></a><span class="lineno"> 3805</span>        <span class="comment">// Don&#39;t use machine gun at very close range, under the assumption that targets at that range can dodge?</span></div>
<div class="line"><a id="l03806" name="l03806"></a><span class="lineno"> 3806</span>        mode = 2;</div>
<div class="line"><a id="l03807" name="l03807"></a><span class="lineno"> 3807</span>    }</div>
<div class="line"><a id="l03808" name="l03808"></a><span class="lineno"> 3808</span> </div>
<div class="line"><a id="l03809" name="l03809"></a><span class="lineno"> 3809</span>    <span class="comment">// No attacks were valid!</span></div>
<div class="line"><a id="l03810" name="l03810"></a><span class="lineno"> 3810</span>    <span class="keywordflow">if</span>( mode == 0 ) {</div>
<div class="line"><a id="l03811" name="l03811"></a><span class="lineno"> 3811</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03812" name="l03812"></a><span class="lineno"> 3812</span>    }</div>
<div class="line"><a id="l03813" name="l03813"></a><span class="lineno"> 3813</span> </div>
<div class="line"><a id="l03814" name="l03814"></a><span class="lineno"> 3814</span>    <span class="keywordflow">if</span>( mode &gt; cap ) {</div>
<div class="line"><a id="l03815" name="l03815"></a><span class="lineno"> 3815</span>        mode = cap;</div>
<div class="line"><a id="l03816" name="l03816"></a><span class="lineno"> 3816</span>    }</div>
<div class="line"><a id="l03817" name="l03817"></a><span class="lineno"> 3817</span>    <span class="keywordflow">switch</span>( mode ) {</div>
<div class="line"><a id="l03818" name="l03818"></a><span class="lineno"> 3818</span>        <span class="keywordflow">case</span> 0:</div>
<div class="line"><a id="l03819" name="l03819"></a><span class="lineno"> 3819</span>        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l03820" name="l03820"></a><span class="lineno"> 3820</span>            <span class="comment">// If we downgraded to taze, but are out of range, don&#39;t act.</span></div>
<div class="line"><a id="l03821" name="l03821"></a><span class="lineno"> 3821</span>            <span class="keywordflow">if</span>( dist &lt;= 1 ) {</div>
<div class="line"><a id="l03822" name="l03822"></a><span class="lineno"> 3822</span>                <a class="code hl_function" href="namespacemattack.html#aa15cec367682f51a8071d832bd2371aa">taze</a>( z, target );</div>
<div class="line"><a id="l03823" name="l03823"></a><span class="lineno"> 3823</span>            }</div>
<div class="line"><a id="l03824" name="l03824"></a><span class="lineno"> 3824</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03825" name="l03825"></a><span class="lineno"> 3825</span>        <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l03826" name="l03826"></a><span class="lineno"> 3826</span>            <span class="keywordflow">if</span>( dist &lt;= 20 ) {</div>
<div class="line"><a id="l03827" name="l03827"></a><span class="lineno"> 3827</span>                <a class="code hl_function" href="namespacemattack.html#a2eb6221fccf307deab17f0240aaf4981">rifle</a>( z, target );</div>
<div class="line"><a id="l03828" name="l03828"></a><span class="lineno"> 3828</span>            }</div>
<div class="line"><a id="l03829" name="l03829"></a><span class="lineno"> 3829</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03830" name="l03830"></a><span class="lineno"> 3830</span>        <span class="keywordflow">case</span> 3:</div>
<div class="line"><a id="l03831" name="l03831"></a><span class="lineno"> 3831</span>            <span class="keywordflow">if</span>( dist &lt;= 38 ) {</div>
<div class="line"><a id="l03832" name="l03832"></a><span class="lineno"> 3832</span>                <a class="code hl_function" href="namespacemattack.html#a3d8357fbd677c0d10f4ad5500bc9455d">frag</a>( z, target );</div>
<div class="line"><a id="l03833" name="l03833"></a><span class="lineno"> 3833</span>            }</div>
<div class="line"><a id="l03834" name="l03834"></a><span class="lineno"> 3834</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03835" name="l03835"></a><span class="lineno"> 3835</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l03836" name="l03836"></a><span class="lineno"> 3836</span>            <span class="comment">// Weak stuff, shouldn&#39;t bother with</span></div>
<div class="line"><a id="l03837" name="l03837"></a><span class="lineno"> 3837</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03838" name="l03838"></a><span class="lineno"> 3838</span>    }</div>
<div class="line"><a id="l03839" name="l03839"></a><span class="lineno"> 3839</span> </div>
<div class="line"><a id="l03840" name="l03840"></a><span class="lineno"> 3840</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03841" name="l03841"></a><span class="lineno"> 3841</span>}</div>
<div class="ttc" id="aclassCreature_html_a02d2efea607ba8fd8ecc714e35413d32"><div class="ttname"><a href="classCreature.html#a02d2efea607ba8fd8ecc714e35413d32">Creature::power_rating</a></div><div class="ttdeci">virtual float power_rating() const =0</div><div class="ttdoc">Returns an approximation of the creature's strength.</div></div>
<div class="ttc" id="aclassCreature_html_abb91e1cd5610658124d40623e7e4d698"><div class="ttname"><a href="classCreature.html#abb91e1cd5610658124d40623e7e4d698">Creature::auto_find_hostile_target</a></div><div class="ttdeci">Creature * auto_find_hostile_target(int range, int &amp;boo_hoo, int area=0)</div><div class="ttdoc">For fake-players (turrets, mounted turrets) this functions chooses a target.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00330">creature.cpp:330</a></div></div>
<div class="ttc" id="aclassmonster_html_a125622587c2069dc4dbbe07943c81336"><div class="ttname"><a href="classmonster.html#a125622587c2069dc4dbbe07943c81336">monster::attitude_to</a></div><div class="ttdeci">Attitude attitude_to(const Creature &amp;other) const override</div><div class="ttdoc">Attitude (of this creature) towards another creature.</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l01020">monster.cpp:1020</a></div></div>
<div class="ttc" id="anamespacemattack_html_a2eb6221fccf307deab17f0240aaf4981"><div class="ttname"><a href="namespacemattack.html#a2eb6221fccf307deab17f0240aaf4981">mattack::rifle</a></div><div class="ttdeci">void rifle(monster *z, Creature *target)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l03272">monattack.cpp:3272</a></div></div>
<div class="ttc" id="anamespacemattack_html_a3d8357fbd677c0d10f4ad5500bc9455d"><div class="ttname"><a href="namespacemattack.html#a3d8357fbd677c0d10f4ad5500bc9455d">mattack::frag</a></div><div class="ttdeci">void frag(monster *z, Creature *target)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l03321">monattack.cpp:3321</a></div></div>
<div class="ttc" id="anamespacemattack_html_aa15cec367682f51a8071d832bd2371aa"><div class="ttname"><a href="namespacemattack.html#aa15cec367682f51a8071d832bd2371aa">mattack::taze</a></div><div class="ttdeci">void taze(monster *z, Creature *target)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l03247">monattack.cpp:3247</a></div></div>
<div class="ttc" id="atranslations_8cpp_html_a82b835742108b8d7f5f6a291b41e208e"><div class="ttname"><a href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a></div><div class="ttdeci">const char * vgettext(const char *msgid, const char *msgid_plural, size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8cpp_source.html#l00036">translations.cpp:36</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="monster_8cpp_source.html#l01020">monster::attitude_to()</a>, <a class="el" href="creature_8cpp_source.html#l00330">Creature::auto_find_hostile_target()</a>, <a class="el" href="monattack_8cpp_source.html#l03321">frag()</a>, <a class="el" href="monster_8h_source.html#l00471">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="monster_8cpp_source.html#l02894">monster::get_hp()</a>, <a class="el" href="monster_8cpp_source.html#l02884">monster::get_hp_max()</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="classCreature.html#a02d2efea607ba8fd8ecc714e35413d32">Creature::power_rating()</a>, <a class="el" href="monattack_8cpp_source.html#l03272">rifle()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="monattack_8cpp_source.html#l03247">taze()</a>, and <a class="el" href="translations_8cpp_source.html#l00036">vgettext()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a78ae42b818cb83cb572bfc7db3f4e86e" name="a78ae42b818cb83cb572bfc7db3f4e86e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78ae42b818cb83cb572bfc7db3f4e86e">&#9670;&nbsp;</a></span>copbot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::copbot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l03712">3712</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03713" name="l03713"></a><span class="lineno"> 3713</span>{</div>
<div class="line"><a id="l03714" name="l03714"></a><span class="lineno"> 3714</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l03715" name="l03715"></a><span class="lineno"> 3715</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l03716" name="l03716"></a><span class="lineno"> 3716</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03717" name="l03717"></a><span class="lineno"> 3717</span>    }</div>
<div class="line"><a id="l03718" name="l03718"></a><span class="lineno"> 3718</span> </div>
<div class="line"><a id="l03719" name="l03719"></a><span class="lineno"> 3719</span>    <span class="comment">// TODO: Make it recognize zeds as human, but ignore animals</span></div>
<div class="line"><a id="l03720" name="l03720"></a><span class="lineno"> 3720</span>    <a class="code hl_class" href="classplayer.html">player</a> *foe = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classplayer.html">player</a> *<span class="keyword">&gt;</span>( target );</div>
<div class="line"><a id="l03721" name="l03721"></a><span class="lineno"> 3721</span>    <span class="keywordtype">bool</span> sees_u = foe != <span class="keyword">nullptr</span> &amp;&amp; z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *foe );</div>
<div class="line"><a id="l03722" name="l03722"></a><span class="lineno"> 3722</span>    <span class="keywordtype">bool</span> cuffed = foe != <span class="keyword">nullptr</span> &amp;&amp; foe-&gt;<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>() == <a class="code hl_variable" href="monattack_8cpp.html#a8036e3cd7d05e67da5e6e9ddc4caec9b">itype_e_handcuffs</a>;</div>
<div class="line"><a id="l03723" name="l03723"></a><span class="lineno"> 3723</span>    <span class="comment">// Taze first, then ask questions (simplifies later checks for non-humans)</span></div>
<div class="line"><a id="l03724" name="l03724"></a><span class="lineno"> 3724</span>    <span class="keywordflow">if</span>( !cuffed &amp;&amp; <a class="code hl_function" href="monattack_8cpp.html#abf0d71b531a799a8eb3fd58a846064db">is_adjacent</a>( z, target, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l03725" name="l03725"></a><span class="lineno"> 3725</span>        <a class="code hl_function" href="namespacemattack.html#aa15cec367682f51a8071d832bd2371aa">taze</a>( z, target );</div>
<div class="line"><a id="l03726" name="l03726"></a><span class="lineno"> 3726</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03727" name="l03727"></a><span class="lineno"> 3727</span>    }</div>
<div class="line"><a id="l03728" name="l03728"></a><span class="lineno"> 3728</span> </div>
<div class="line"><a id="l03729" name="l03729"></a><span class="lineno"> 3729</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() ) &gt; 2 || foe == <span class="keyword">nullptr</span> || !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l03730" name="l03730"></a><span class="lineno"> 3730</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a id="l03731" name="l03731"></a><span class="lineno"> 3731</span>            <span class="keywordflow">if</span>( sees_u ) {</div>
<div class="line"><a id="l03732" name="l03732"></a><span class="lineno"> 3732</span>                <span class="keywordflow">if</span>( foe-&gt;<a class="code hl_function" href="classCharacter.html#adb0f054c128c0a8386c44e8d9ef0f108">unarmed_attack</a>() ) {</div>
<div class="line"><a id="l03733" name="l03733"></a><span class="lineno"> 3733</span>                    <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 18, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f">sounds::sound_t::alert</a>,</div>
<div class="line"><a id="l03734" name="l03734"></a><span class="lineno"> 3734</span>                                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;a robotic voice boom, \&quot;Citizen, Halt!\&quot;&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;speech&quot;</span>, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a>.<a class="code hl_function" href="classstring__id.html#aa7dabc565f0c067e1a237ea224b18f93">str</a>() );</div>
<div class="line"><a id="l03735" name="l03735"></a><span class="lineno"> 3735</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !cuffed ) {</div>
<div class="line"><a id="l03736" name="l03736"></a><span class="lineno"> 3736</span>                    <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 18, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f">sounds::sound_t::alert</a>,</div>
<div class="line"><a id="l03737" name="l03737"></a><span class="lineno"> 3737</span>                                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;a robotic voice boom, \&quot;Please put down your weapon.\&quot;&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;speech&quot;</span>, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a>.<a class="code hl_function" href="classstring__id.html#aa7dabc565f0c067e1a237ea224b18f93">str</a>() );</div>
<div class="line"><a id="l03738" name="l03738"></a><span class="lineno"> 3738</span>                }</div>
<div class="line"><a id="l03739" name="l03739"></a><span class="lineno"> 3739</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03740" name="l03740"></a><span class="lineno"> 3740</span>                <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 18, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f">sounds::sound_t::alert</a>,</div>
<div class="line"><a id="l03741" name="l03741"></a><span class="lineno"> 3741</span>                               <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;a robotic voice boom, \&quot;Come out with your hands up!\&quot;&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;speech&quot;</span>, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a>.<a class="code hl_function" href="classstring__id.html#aa7dabc565f0c067e1a237ea224b18f93">str</a>() );</div>
<div class="line"><a id="l03742" name="l03742"></a><span class="lineno"> 3742</span>            }</div>
<div class="line"><a id="l03743" name="l03743"></a><span class="lineno"> 3743</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03744" name="l03744"></a><span class="lineno"> 3744</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 18, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>,</div>
<div class="line"><a id="l03745" name="l03745"></a><span class="lineno"> 3745</span>                           <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;a police siren, whoop WHOOP&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;environment&quot;</span>, <span class="stringliteral">&quot;police_siren&quot;</span> );</div>
<div class="line"><a id="l03746" name="l03746"></a><span class="lineno"> 3746</span>        }</div>
<div class="line"><a id="l03747" name="l03747"></a><span class="lineno"> 3747</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03748" name="l03748"></a><span class="lineno"> 3748</span>    }</div>
<div class="line"><a id="l03749" name="l03749"></a><span class="lineno"> 3749</span> </div>
<div class="line"><a id="l03750" name="l03750"></a><span class="lineno"> 3750</span>    <span class="comment">// If cuffed don&#39;t attack the player, unless the bot is damaged</span></div>
<div class="line"><a id="l03751" name="l03751"></a><span class="lineno"> 3751</span>    <span class="comment">// presumably because of the player&#39;s actions</span></div>
<div class="line"><a id="l03752" name="l03752"></a><span class="lineno"> 3752</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_function" href="classmonster.html#a2d0e466b9d25796cd99402ddd5d3ce20">get_hp</a>() == z-&gt;<a class="code hl_function" href="classmonster.html#a551f4a380282f8ec082c74f410c397de">get_hp_max</a>() ) {</div>
<div class="line"><a id="l03753" name="l03753"></a><span class="lineno"> 3753</span>        z-&gt;<a class="code hl_variable" href="classmonster.html#a7b22fe8719e4783fe1896429cedefa8d">anger</a> = 1;</div>
<div class="line"><a id="l03754" name="l03754"></a><span class="lineno"> 3754</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03755" name="l03755"></a><span class="lineno"> 3755</span>        z-&gt;<a class="code hl_variable" href="classmonster.html#a7b22fe8719e4783fe1896429cedefa8d">anger</a> = z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a9a59bfdad7bfcd71c923ae8463630c95">agro</a>;</div>
<div class="line"><a id="l03756" name="l03756"></a><span class="lineno"> 3756</span>    }</div>
<div class="line"><a id="l03757" name="l03757"></a><span class="lineno"> 3757</span> </div>
<div class="line"><a id="l03758" name="l03758"></a><span class="lineno"> 3758</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03759" name="l03759"></a><span class="lineno"> 3759</span>}</div>
<div class="ttc" id="aclassCharacter_html_adb0f054c128c0a8386c44e8d9ef0f108"><div class="ttname"><a href="classCharacter.html#adb0f054c128c0a8386c44e8d9ef0f108">Character::unarmed_attack</a></div><div class="ttdeci">bool unarmed_attack() const</div><div class="ttdoc">True if unarmed or wielding a weapon with the UNARMED_WEAPON flag.</div><div class="ttdef"><b>Definition:</b> <a href="melee_8cpp_source.html#l00150">melee.cpp:150</a></div></div>
<div class="ttc" id="aclassmonster_html_a7b22fe8719e4783fe1896429cedefa8d"><div class="ttname"><a href="classmonster.html#a7b22fe8719e4783fe1896429cedefa8d">monster::anger</a></div><div class="ttdeci">int anger</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00472">monster.h:472</a></div></div>
<div class="ttc" id="aclassstring__id_html_aa7dabc565f0c067e1a237ea224b18f93"><div class="ttname"><a href="classstring__id.html#aa7dabc565f0c067e1a237ea224b18f93">string_id::str</a></div><div class="ttdeci">const std::string &amp; str() const</div><div class="ttdoc">Returns the identifier as plain std::string.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00255">string_id.h:255</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a8036e3cd7d05e67da5e6e9ddc4caec9b"><div class="ttname"><a href="monattack_8cpp.html#a8036e3cd7d05e67da5e6e9ddc4caec9b">itype_e_handcuffs</a></div><div class="ttdeci">static const itype_id itype_e_handcuffs(&quot;e_handcuffs&quot;)</div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a></div><div class="ttdeci">@ alarm</div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f">sounds::sound_t::alert</a></div><div class="ttdeci">@ alert</div></div>
<div class="ttc" id="astructmtype_html_a9a59bfdad7bfcd71c923ae8463630c95"><div class="ttname"><a href="structmtype.html#a9a59bfdad7bfcd71c923ae8463630c95">mtype::agro</a></div><div class="ttdeci">int agro</div><div class="ttdoc">e.g.</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00269">mtype.h:269</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="mtype_8h_source.html#l00269">mtype::agro</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::alarm</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f">sounds::alert</a>, <a class="el" href="monster_8h_source.html#l00472">monster::anger</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="monster_8cpp_source.html#l02894">monster::get_hp()</a>, <a class="el" href="monster_8cpp_source.html#l02884">monster::get_hp_max()</a>, <a class="el" href="mtype_8h_source.html#l00240">mtype::id</a>, <a class="el" href="monattack_8cpp_source.html#l00275">is_adjacent()</a>, <a class="el" href="monattack_8cpp.html#a8036e3cd7d05e67da5e6e9ddc4caec9b">itype_e_handcuffs</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, <a class="el" href="string__id_8h_source.html#l00255">string_id&lt; T &gt;::str()</a>, <a class="el" href="monattack_8cpp_source.html#l03247">taze()</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, <a class="el" href="item_8cpp_source.html#l08196">item::typeId()</a>, <a class="el" href="melee_8cpp_source.html#l00150">Character::unarmed_attack()</a>, and <a class="el" href="character_8h_source.html#l01585">Character::weapon</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="afdd93ef287e68dc77f88740411dcfb83" name="afdd93ef287e68dc77f88740411dcfb83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdd93ef287e68dc77f88740411dcfb83">&#9670;&nbsp;</a></span>dance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::dance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l02438">2438</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02439" name="l02439"></a><span class="lineno"> 2439</span>{</div>
<div class="line"><a id="l02440" name="l02440"></a><span class="lineno"> 2440</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l02441" name="l02441"></a><span class="lineno"> 2441</span>        <span class="keywordflow">switch</span>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 10 ) ) {</div>
<div class="line"><a id="l02442" name="l02442"></a><span class="lineno"> 2442</span>            <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l02443" name="l02443"></a><span class="lineno"> 2443</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s swings its arms from side to side!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02444" name="l02444"></a><span class="lineno"> 2444</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02445" name="l02445"></a><span class="lineno"> 2445</span>            <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l02446" name="l02446"></a><span class="lineno"> 2446</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s does some fancy footwork!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02447" name="l02447"></a><span class="lineno"> 2447</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02448" name="l02448"></a><span class="lineno"> 2448</span>            <span class="keywordflow">case</span> 3:</div>
<div class="line"><a id="l02449" name="l02449"></a><span class="lineno"> 2449</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s shrugs its shoulders!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02450" name="l02450"></a><span class="lineno"> 2450</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02451" name="l02451"></a><span class="lineno"> 2451</span>            <span class="keywordflow">case</span> 4:</div>
<div class="line"><a id="l02452" name="l02452"></a><span class="lineno"> 2452</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s spins in place!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02453" name="l02453"></a><span class="lineno"> 2453</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02454" name="l02454"></a><span class="lineno"> 2454</span>            <span class="keywordflow">case</span> 5:</div>
<div class="line"><a id="l02455" name="l02455"></a><span class="lineno"> 2455</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s crouches on the ground!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02456" name="l02456"></a><span class="lineno"> 2456</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02457" name="l02457"></a><span class="lineno"> 2457</span>            <span class="keywordflow">case</span> 6:</div>
<div class="line"><a id="l02458" name="l02458"></a><span class="lineno"> 2458</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s looks left and right!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02459" name="l02459"></a><span class="lineno"> 2459</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02460" name="l02460"></a><span class="lineno"> 2460</span>            <span class="keywordflow">case</span> 7:</div>
<div class="line"><a id="l02461" name="l02461"></a><span class="lineno"> 2461</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s jumps back and forth!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02462" name="l02462"></a><span class="lineno"> 2462</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02463" name="l02463"></a><span class="lineno"> 2463</span>            <span class="keywordflow">case</span> 8:</div>
<div class="line"><a id="l02464" name="l02464"></a><span class="lineno"> 2464</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s raises its arms in the air!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02465" name="l02465"></a><span class="lineno"> 2465</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02466" name="l02466"></a><span class="lineno"> 2466</span>            <span class="keywordflow">case</span> 9:</div>
<div class="line"><a id="l02467" name="l02467"></a><span class="lineno"> 2467</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s swings its hips!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02468" name="l02468"></a><span class="lineno"> 2468</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02469" name="l02469"></a><span class="lineno"> 2469</span>            <span class="keywordflow">case</span> 10:</div>
<div class="line"><a id="l02470" name="l02470"></a><span class="lineno"> 2470</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s claps!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02471" name="l02471"></a><span class="lineno"> 2471</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02472" name="l02472"></a><span class="lineno"> 2472</span>        }</div>
<div class="line"><a id="l02473" name="l02473"></a><span class="lineno"> 2473</span>    }</div>
<div class="line"><a id="l02474" name="l02474"></a><span class="lineno"> 2474</span> </div>
<div class="line"><a id="l02475" name="l02475"></a><span class="lineno"> 2475</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02476" name="l02476"></a><span class="lineno"> 2476</span>}</div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a></div><div class="ttdeci">@ m_neutral</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00260">enums.h:260</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="enums_8h_source.html#l00260">m_neutral</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, and <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="af09473a311230b57a93a4ef86655d764" name="af09473a311230b57a93a4ef86655d764"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af09473a311230b57a93a4ef86655d764">&#9670;&nbsp;</a></span>darkman()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::darkman </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l04475">4475</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04476" name="l04476"></a><span class="lineno"> 4476</span>{</div>
<div class="line"><a id="l04477" name="l04477"></a><span class="lineno"> 4477</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> ) {</div>
<div class="line"><a id="l04478" name="l04478"></a><span class="lineno"> 4478</span>        <span class="comment">// TODO: handle friendly monsters</span></div>
<div class="line"><a id="l04479" name="l04479"></a><span class="lineno"> 4479</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04480" name="l04480"></a><span class="lineno"> 4480</span>    }</div>
<div class="line"><a id="l04481" name="l04481"></a><span class="lineno"> 4481</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() ) &gt; 40 ) {</div>
<div class="line"><a id="l04482" name="l04482"></a><span class="lineno"> 4482</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04483" name="l04483"></a><span class="lineno"> 4483</span>    }</div>
<div class="line"><a id="l04484" name="l04484"></a><span class="lineno"> 4484</span>    <span class="keywordflow">if</span>( <a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">const</span> <a class="code hl_function" href="namespacetrapfunc.html#a80008798a29a293e768175bb1b6eec66">shadow</a> = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_around( <a class="code hl_variable" href="monattack_8cpp.html#a04ed540838134ee76f29b9135bd8efb8">mon_shadow</a>, z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 1 ) ) {</div>
<div class="line"><a id="l04485" name="l04485"></a><span class="lineno"> 4485</span>        z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 10;</div>
<div class="line"><a id="l04486" name="l04486"></a><span class="lineno"> 4486</span>        <a class="code hl_function" href="namespacetrapfunc.html#a80008798a29a293e768175bb1b6eec66">shadow</a>-&gt;make_ally( *z );</div>
<div class="line"><a id="l04487" name="l04487"></a><span class="lineno"> 4487</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l04488" name="l04488"></a><span class="lineno"> 4488</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A shadow splits from the %s!&quot;</span> ),</div>
<div class="line"><a id="l04489" name="l04489"></a><span class="lineno"> 4489</span>                     z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l04490" name="l04490"></a><span class="lineno"> 4490</span>        }</div>
<div class="line"><a id="l04491" name="l04491"></a><span class="lineno"> 4491</span>    }</div>
<div class="line"><a id="l04492" name="l04492"></a><span class="lineno"> 4492</span>    <span class="comment">// Wont do the combat stuff unless it can see you</span></div>
<div class="line"><a id="l04493" name="l04493"></a><span class="lineno"> 4493</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ) ) {</div>
<div class="line"><a id="l04494" name="l04494"></a><span class="lineno"> 4494</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04495" name="l04495"></a><span class="lineno"> 4495</span>    }</div>
<div class="line"><a id="l04496" name="l04496"></a><span class="lineno"> 4496</span>    <span class="comment">// What do we say?</span></div>
<div class="line"><a id="l04497" name="l04497"></a><span class="lineno"> 4497</span>    <span class="keywordflow">switch</span>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 7 ) ) {</div>
<div class="line"><a id="l04498" name="l04498"></a><span class="lineno"> 4498</span>        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l04499" name="l04499"></a><span class="lineno"> 4499</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;\&quot;Stop it please\&quot;&quot;</span> ) );</div>
<div class="line"><a id="l04500" name="l04500"></a><span class="lineno"> 4500</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04501" name="l04501"></a><span class="lineno"> 4501</span>        <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l04502" name="l04502"></a><span class="lineno"> 4502</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;\&quot;Let us help you\&quot;&quot;</span> ) );</div>
<div class="line"><a id="l04503" name="l04503"></a><span class="lineno"> 4503</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04504" name="l04504"></a><span class="lineno"> 4504</span>        <span class="keywordflow">case</span> 3:</div>
<div class="line"><a id="l04505" name="l04505"></a><span class="lineno"> 4505</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;\&quot;We wish you no harm\&quot;&quot;</span> ) );</div>
<div class="line"><a id="l04506" name="l04506"></a><span class="lineno"> 4506</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04507" name="l04507"></a><span class="lineno"> 4507</span>        <span class="keywordflow">case</span> 4:</div>
<div class="line"><a id="l04508" name="l04508"></a><span class="lineno"> 4508</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;\&quot;Do not fear\&quot;&quot;</span> ) );</div>
<div class="line"><a id="l04509" name="l04509"></a><span class="lineno"> 4509</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04510" name="l04510"></a><span class="lineno"> 4510</span>        <span class="keywordflow">case</span> 5:</div>
<div class="line"><a id="l04511" name="l04511"></a><span class="lineno"> 4511</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;\&quot;We can help you\&quot;&quot;</span> ) );</div>
<div class="line"><a id="l04512" name="l04512"></a><span class="lineno"> 4512</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04513" name="l04513"></a><span class="lineno"> 4513</span>        <span class="keywordflow">case</span> 6:</div>
<div class="line"><a id="l04514" name="l04514"></a><span class="lineno"> 4514</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;\&quot;We are friendly\&quot;&quot;</span> ) );</div>
<div class="line"><a id="l04515" name="l04515"></a><span class="lineno"> 4515</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04516" name="l04516"></a><span class="lineno"> 4516</span>        <span class="keywordflow">case</span> 7:</div>
<div class="line"><a id="l04517" name="l04517"></a><span class="lineno"> 4517</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;\&quot;Please dont\&quot;&quot;</span> ) );</div>
<div class="line"><a id="l04518" name="l04518"></a><span class="lineno"> 4518</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04519" name="l04519"></a><span class="lineno"> 4519</span>    }</div>
<div class="line"><a id="l04520" name="l04520"></a><span class="lineno"> 4520</span>    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.add_effect( <a class="code hl_variable" href="monattack_8cpp.html#a84bed2f340b7b3bf9a0ae0c95eabc6dc">effect_darkness</a>, 1_turns, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a> );</div>
<div class="line"><a id="l04521" name="l04521"></a><span class="lineno"> 4521</span> </div>
<div class="line"><a id="l04522" name="l04522"></a><span class="lineno"> 4522</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04523" name="l04523"></a><span class="lineno"> 4523</span>}</div>
<div class="ttc" id="amonattack_8cpp_html_a04ed540838134ee76f29b9135bd8efb8"><div class="ttname"><a href="monattack_8cpp.html#a04ed540838134ee76f29b9135bd8efb8">mon_shadow</a></div><div class="ttdeci">static const mtype_id mon_shadow(&quot;mon_shadow&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a84bed2f340b7b3bf9a0ae0c95eabc6dc"><div class="ttname"><a href="monattack_8cpp.html#a84bed2f340b7b3bf9a0ae0c95eabc6dc">effect_darkness</a></div><div class="ttdeci">static const efftype_id effect_darkness(&quot;darkness&quot;)</div></div>
<div class="ttc" id="anamespacetrapfunc_html_a80008798a29a293e768175bb1b6eec66"><div class="ttname"><a href="namespacetrapfunc.html#a80008798a29a293e768175bb1b6eec66">trapfunc::shadow</a></div><div class="ttdeci">bool shadow(const tripoint &amp;p, Creature *c, item *i)</div><div class="ttdef"><b>Definition:</b> <a href="trapfunc_8cpp_source.html#l01344">trapfunc.cpp:1344</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="monattack_8cpp.html#a84bed2f340b7b3bf9a0ae0c95eabc6dc">effect_darkness</a>, <a class="el" href="monster_8h_source.html#l00471">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="monattack_8cpp.html#a04ed540838134ee76f29b9135bd8efb8">mon_shadow</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="bodypart_8h_source.html#l00052">num_bp</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, and <a class="el" href="trapfunc_8cpp_source.html#l01344">trapfunc::shadow()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="aa52474914c65788e415d43c94d7fd471" name="aa52474914c65788e415d43c94d7fd471"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa52474914c65788e415d43c94d7fd471">&#9670;&nbsp;</a></span>dermatik()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::dermatik </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
Melee increases chance to deflect dermatik attack Unarmed increases chance to deflect dermatik attack Dexterity increases chance of deflecting dermatik attack with TAIL_CATTLE Unarmed increases chance of deflecting dermatik attack with TAIL_CATTLE 
<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l02104">2104</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02105" name="l02105"></a><span class="lineno"> 2105</span>{</div>
<div class="line"><a id="l02106" name="l02106"></a><span class="lineno"> 2106</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classmonster.html#a0f83a7ee7bd8d96efc80200c5a5caf5b">can_act</a>() ) {</div>
<div class="line"><a id="l02107" name="l02107"></a><span class="lineno"> 2107</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02108" name="l02108"></a><span class="lineno"> 2108</span>    }</div>
<div class="line"><a id="l02109" name="l02109"></a><span class="lineno"> 2109</span> </div>
<div class="line"><a id="l02110" name="l02110"></a><span class="lineno"> 2110</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l02111" name="l02111"></a><span class="lineno"> 2111</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ||</div>
<div class="line"><a id="l02112" name="l02112"></a><span class="lineno"> 2112</span>        !<a class="code hl_function" href="monattack_8cpp.html#abf0d71b531a799a8eb3fd58a846064db">is_adjacent</a>( z, target, <span class="keyword">true</span> ) ||</div>
<div class="line"><a id="l02113" name="l02113"></a><span class="lineno"> 2113</span>        !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l02114" name="l02114"></a><span class="lineno"> 2114</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02115" name="l02115"></a><span class="lineno"> 2115</span>    }</div>
<div class="line"><a id="l02116" name="l02116"></a><span class="lineno"> 2116</span> </div>
<div class="line"><a id="l02117" name="l02117"></a><span class="lineno"> 2117</span>    <span class="keywordflow">if</span>( target-&gt;<a class="code hl_function" href="classCreature.html#afd2f1b1e5bafdef20afddbb704b1d5a5">uncanny_dodge</a>() ) {</div>
<div class="line"><a id="l02118" name="l02118"></a><span class="lineno"> 2118</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02119" name="l02119"></a><span class="lineno"> 2119</span>    }</div>
<div class="line"><a id="l02120" name="l02120"></a><span class="lineno"> 2120</span>    <a class="code hl_class" href="classplayer.html">player</a> *foe = <span class="keyword">dynamic_cast&lt;</span> <a class="code hl_class" href="classplayer.html">player</a> * <span class="keyword">&gt;</span>( target );</div>
<div class="line"><a id="l02121" name="l02121"></a><span class="lineno"> 2121</span>    <span class="keywordflow">if</span>( foe == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l02122" name="l02122"></a><span class="lineno"> 2122</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// No implanting monsters for now</span></div>
<div class="line"><a id="l02123" name="l02123"></a><span class="lineno"> 2123</span>    }</div>
<div class="line"><a id="l02124" name="l02124"></a><span class="lineno"> 2124</span>    <span class="comment">// Can we dodge the attack? Uses player dodge function % chance (melee.cpp)</span></div>
<div class="line"><a id="l02125" name="l02125"></a><span class="lineno"> 2125</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacemattack.html#a4efb8be314551e35f69df8cf8d824174">dodge_check</a>( z, target ) ) {</div>
<div class="line"><a id="l02126" name="l02126"></a><span class="lineno"> 2126</span>        <span class="keywordflow">if</span>( target == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ) {</div>
<div class="line"><a id="l02127" name="l02127"></a><span class="lineno"> 2127</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s tries to land on you, but you dodge.&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02128" name="l02128"></a><span class="lineno"> 2128</span>        }</div>
<div class="line"><a id="l02129" name="l02129"></a><span class="lineno"> 2129</span>        z-&gt;<a class="code hl_function" href="classmonster.html#a6adba28c21a8b6e6cc1b81f2f31d1947">stumble</a>();</div>
<div class="line"><a id="l02130" name="l02130"></a><span class="lineno"> 2130</span>        target-&gt;<a class="code hl_function" href="classCreature.html#af56188882e3300853d18f166738ee37a">on_dodge</a>( z, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> * 2 );</div>
<div class="line"><a id="l02131" name="l02131"></a><span class="lineno"> 2131</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02132" name="l02132"></a><span class="lineno"> 2132</span>    }</div>
<div class="line"><a id="l02133" name="l02133"></a><span class="lineno"> 2133</span> </div>
<div class="line"><a id="l02134" name="l02134"></a><span class="lineno"> 2134</span>    <span class="comment">// Can we swat the bug away?</span></div>
<div class="line"><a id="l02135" name="l02135"></a><span class="lineno"> 2135</span>    <span class="keywordtype">int</span> dodge_roll = z-&gt;<a class="code hl_function" href="classmonster.html#ad5966a84a9b647d47379e133053e537f">dodge_roll</a>();<span class="comment"></span></div>
<div class="line"><a id="l02136" name="l02136"></a><span class="lineno"> 2136</span><span class="comment">    ///\EFFECT_MELEE increases chance to deflect dermatik attack</span></div>
<div class="line"><a id="l02137" name="l02137"></a><span class="lineno"> 2137</span><span class="comment"></span><span class="comment"></span> </div>
<div class="line"><a id="l02138" name="l02138"></a><span class="lineno"> 2138</span><span class="comment">    ///\EFFECT_UNARMED increases chance to deflect dermatik attack</span></div>
<div class="line"><a id="l02139" name="l02139"></a><span class="lineno"> 2139</span><span class="comment"></span>    <span class="keywordtype">int</span> swat_skill = ( foe-&gt;<a class="code hl_function" href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">get_skill_level</a>( <a class="code hl_variable" href="monattack_8cpp.html#a917f093dcdc3861c86a6adf734a52641">skill_melee</a> ) + foe-&gt;<a class="code hl_function" href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">get_skill_level</a>(</div>
<div class="line"><a id="l02140" name="l02140"></a><span class="lineno"> 2140</span>                           <a class="code hl_variable" href="monattack_8cpp.html#ad22b82ceedf236ed05df55e661444c76">skill_unarmed</a> ) * 2 ) / 3;</div>
<div class="line"><a id="l02141" name="l02141"></a><span class="lineno"> 2141</span>    <span class="keywordtype">int</span> player_swat = <a class="code hl_function" href="rng_8cpp.html#a7ba03e7147e43d808dc29c54bce9e57f">dice</a>( swat_skill, 10 );</div>
<div class="line"><a id="l02142" name="l02142"></a><span class="lineno"> 2142</span>    <span class="keywordflow">if</span>( foe-&gt;<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="monattack_8cpp.html#ab275b4446e82a6bd7e9763640c7f6395">trait_TAIL_CATTLE</a> ) ) {</div>
<div class="line"><a id="l02143" name="l02143"></a><span class="lineno"> 2143</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You swat at the %s with your tail!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );<span class="comment"></span></div>
<div class="line"><a id="l02144" name="l02144"></a><span class="lineno"> 2144</span><span class="comment">        ///\EFFECT_DEX increases chance of deflecting dermatik attack with TAIL_CATTLE</span></div>
<div class="line"><a id="l02145" name="l02145"></a><span class="lineno"> 2145</span><span class="comment"></span><span class="comment"></span> </div>
<div class="line"><a id="l02146" name="l02146"></a><span class="lineno"> 2146</span><span class="comment">        ///\EFFECT_UNARMED increases chance of deflecting dermatik attack with TAIL_CATTLE</span></div>
<div class="line"><a id="l02147" name="l02147"></a><span class="lineno"> 2147</span><span class="comment"></span>        player_swat += ( ( foe-&gt;<a class="code hl_variable" href="classCharacter.html#a4065ac02745befad248425d307b71849">dex_cur</a> + foe-&gt;<a class="code hl_function" href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">get_skill_level</a>( <a class="code hl_variable" href="monattack_8cpp.html#ad22b82ceedf236ed05df55e661444c76">skill_unarmed</a> ) ) / 2 );</div>
<div class="line"><a id="l02148" name="l02148"></a><span class="lineno"> 2148</span>    }</div>
<div class="line"><a id="l02149" name="l02149"></a><span class="lineno"> 2149</span>    <span class="keywordflow">if</span>( player_swat &gt; dodge_roll ) {</div>
<div class="line"><a id="l02150" name="l02150"></a><span class="lineno"> 2150</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s lands on you, but you swat it off.&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02151" name="l02151"></a><span class="lineno"> 2151</span>        <span class="keywordflow">if</span>( z-&gt;<a class="code hl_function" href="classmonster.html#a2d0e466b9d25796cd99402ddd5d3ce20">get_hp</a>() &gt;= z-&gt;<a class="code hl_function" href="classmonster.html#a551f4a380282f8ec082c74f410c397de">get_hp_max</a>() / 2 ) {</div>
<div class="line"><a id="l02152" name="l02152"></a><span class="lineno"> 2152</span>            z-&gt;<a class="code hl_function" href="classmonster.html#afc6e6f5443145732310dd4901a394b4f">apply_damage</a>( &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u, <a class="code hl_class" href="classint__id.html">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ), 1 );</div>
<div class="line"><a id="l02153" name="l02153"></a><span class="lineno"> 2153</span>            z-&gt;<a class="code hl_function" href="classCreature.html#a36dcf5a04ddc0cf9fa29c08b7b099158">check_dead_state</a>();</div>
<div class="line"><a id="l02154" name="l02154"></a><span class="lineno"> 2154</span>        }</div>
<div class="line"><a id="l02155" name="l02155"></a><span class="lineno"> 2155</span>        <span class="keywordflow">if</span>( player_swat &gt; dodge_roll * 1.5 ) {</div>
<div class="line"><a id="l02156" name="l02156"></a><span class="lineno"> 2156</span>            z-&gt;<a class="code hl_function" href="classmonster.html#a6adba28c21a8b6e6cc1b81f2f31d1947">stumble</a>();</div>
<div class="line"><a id="l02157" name="l02157"></a><span class="lineno"> 2157</span>        }</div>
<div class="line"><a id="l02158" name="l02158"></a><span class="lineno"> 2158</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02159" name="l02159"></a><span class="lineno"> 2159</span>    }</div>
<div class="line"><a id="l02160" name="l02160"></a><span class="lineno"> 2160</span> </div>
<div class="line"><a id="l02161" name="l02161"></a><span class="lineno"> 2161</span>    <span class="comment">// Can the bug penetrate our armor?</span></div>
<div class="line"><a id="l02162" name="l02162"></a><span class="lineno"> 2162</span>    <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">bodypart_id</a> targeted = target-&gt;<a class="code hl_function" href="classCreature.html#a51c96c81ae1ea766b5eead4a265c1492">get_random_body_part</a>();</div>
<div class="line"><a id="l02163" name="l02163"></a><span class="lineno"> 2163</span>    <span class="keywordflow">if</span>( 4 &lt; <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.get_armor_cut( targeted ) / 3 ) {</div>
<div class="line"><a id="l02164" name="l02164"></a><span class="lineno"> 2164</span>        <span class="comment">//~ 1$s monster name(dermatik), 2$s bodypart name in accusative.</span></div>
<div class="line"><a id="l02165" name="l02165"></a><span class="lineno"> 2165</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s lands on your %2$s, but can&#39;t penetrate your armor.&quot;</span> ),</div>
<div class="line"><a id="l02166" name="l02166"></a><span class="lineno"> 2166</span>                                   z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(), <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( targeted-&gt;token ) );</div>
<div class="line"><a id="l02167" name="l02167"></a><span class="lineno"> 2167</span>        z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 150; <span class="comment">// Attempted laying takes a while</span></div>
<div class="line"><a id="l02168" name="l02168"></a><span class="lineno"> 2168</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02169" name="l02169"></a><span class="lineno"> 2169</span>    }</div>
<div class="line"><a id="l02170" name="l02170"></a><span class="lineno"> 2170</span> </div>
<div class="line"><a id="l02171" name="l02171"></a><span class="lineno"> 2171</span>    <span class="comment">// Success!</span></div>
<div class="line"><a id="l02172" name="l02172"></a><span class="lineno"> 2172</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 500; <span class="comment">// Successful laying takes a long time</span></div>
<div class="line"><a id="l02173" name="l02173"></a><span class="lineno"> 2173</span>    <span class="comment">//~ 1$s monster name(dermatik), 2$s bodypart name in accusative.</span></div>
<div class="line"><a id="l02174" name="l02174"></a><span class="lineno"> 2174</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s sinks its ovipositor into your %2$s!&quot;</span> ),</div>
<div class="line"><a id="l02175" name="l02175"></a><span class="lineno"> 2175</span>                               z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l02176" name="l02176"></a><span class="lineno"> 2176</span>                               <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( targeted-&gt;token ) );</div>
<div class="line"><a id="l02177" name="l02177"></a><span class="lineno"> 2177</span>    <span class="keywordflow">if</span>( !foe-&gt;<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="monattack_8cpp.html#a6c2652eceffb663021aeae9d4b7d0429">trait_PARAIMMUNE</a> ) || !foe-&gt;<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="monattack_8cpp.html#af18c51d2a8f81b4d06912d40760e9691">trait_ACIDBLOOD</a> ) ) {</div>
<div class="line"><a id="l02178" name="l02178"></a><span class="lineno"> 2178</span>        foe-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a13af1ce0f1c5467c2718b3d683c13c28">effect_dermatik</a>, 1_turns, targeted-&gt;token );</div>
<div class="line"><a id="l02179" name="l02179"></a><span class="lineno"> 2179</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;events().send&lt;<a class="code hl_enumvalue" href="event_8h.html#a430b444c74dd3fd1472a31714ec5f1cea73bf12e46893348e69d06b00186f937d">event_type::dermatik_eggs_injected</a>&gt;( foe-&gt;<a class="code hl_function" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>() );</div>
<div class="line"><a id="l02180" name="l02180"></a><span class="lineno"> 2180</span>    }</div>
<div class="line"><a id="l02181" name="l02181"></a><span class="lineno"> 2181</span> </div>
<div class="line"><a id="l02182" name="l02182"></a><span class="lineno"> 2182</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02183" name="l02183"></a><span class="lineno"> 2183</span>}</div>
<div class="ttc" id="aclassCharacter_html_a4065ac02745befad248425d307b71849"><div class="ttname"><a href="classCharacter.html#a4065ac02745befad248425d307b71849">Character::dex_cur</a></div><div class="ttdeci">int dex_cur</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00305">character.h:305</a></div></div>
<div class="ttc" id="aclassCharacter_html_adb54bdcb284abb66b6be99c8ae225065"><div class="ttname"><a href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">Character::getID</a></div><div class="ttdeci">character_id getID() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00470">character.cpp:470</a></div></div>
<div class="ttc" id="aclassCharacter_html_af06dd97724f4f05df782e7a4b4f9cfe1"><div class="ttname"><a href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">Character::has_trait</a></div><div class="ttdeci">bool has_trait(const trait_id &amp;b) const override</div><div class="ttdoc">Returns true if the player has the entered trait.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00103">mutation.cpp:103</a></div></div>
<div class="ttc" id="aclassmonster_html_a6adba28c21a8b6e6cc1b81f2f31d1947"><div class="ttname"><a href="classmonster.html#a6adba28c21a8b6e6cc1b81f2f31d1947">monster::stumble</a></div><div class="ttdeci">void stumble()</div><div class="ttdoc">Stumble in a random direction, but with some caveats.</div><div class="ttdef"><b>Definition:</b> <a href="monmove_8cpp_source.html#l01834">monmove.cpp:1834</a></div></div>
<div class="ttc" id="aclassmonster_html_ad5966a84a9b647d47379e133053e537f"><div class="ttname"><a href="classmonster.html#ad5966a84a9b647d47379e133053e537f">monster::dodge_roll</a></div><div class="ttdeci">float dodge_roll() override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l01977">monster.cpp:1977</a></div></div>
<div class="ttc" id="aclassmonster_html_afc6e6f5443145732310dd4901a394b4f"><div class="ttname"><a href="classmonster.html#afc6e6f5443145732310dd4901a394b4f">monster::apply_damage</a></div><div class="ttdeci">void apply_damage(Creature *source, bodypart_id bp, int dam, bool bypass_med=false) override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l01636">monster.cpp:1636</a></div></div>
<div class="ttc" id="aevent_8h_html_a430b444c74dd3fd1472a31714ec5f1cea73bf12e46893348e69d06b00186f937d"><div class="ttname"><a href="event_8h.html#a430b444c74dd3fd1472a31714ec5f1cea73bf12e46893348e69d06b00186f937d">event_type::dermatik_eggs_injected</a></div><div class="ttdeci">@ dermatik_eggs_injected</div></div>
<div class="ttc" id="amonattack_8cpp_html_a13af1ce0f1c5467c2718b3d683c13c28"><div class="ttname"><a href="monattack_8cpp.html#a13af1ce0f1c5467c2718b3d683c13c28">effect_dermatik</a></div><div class="ttdeci">static const efftype_id effect_dermatik(&quot;dermatik&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a6c2652eceffb663021aeae9d4b7d0429"><div class="ttname"><a href="monattack_8cpp.html#a6c2652eceffb663021aeae9d4b7d0429">trait_PARAIMMUNE</a></div><div class="ttdeci">static const trait_id trait_PARAIMMUNE(&quot;PARAIMMUNE&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_ab275b4446e82a6bd7e9763640c7f6395"><div class="ttname"><a href="monattack_8cpp.html#ab275b4446e82a6bd7e9763640c7f6395">trait_TAIL_CATTLE</a></div><div class="ttdeci">static const trait_id trait_TAIL_CATTLE(&quot;TAIL_CATTLE&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_ad22b82ceedf236ed05df55e661444c76"><div class="ttname"><a href="monattack_8cpp.html#ad22b82ceedf236ed05df55e661444c76">skill_unarmed</a></div><div class="ttdeci">static const skill_id skill_unarmed(&quot;unarmed&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_af18c51d2a8f81b4d06912d40760e9691"><div class="ttname"><a href="monattack_8cpp.html#af18c51d2a8f81b4d06912d40760e9691">trait_ACIDBLOOD</a></div><div class="ttdeci">static const trait_id trait_ACIDBLOOD(&quot;ACIDBLOOD&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8cpp_source.html#l00974">Creature::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="creature_8h_source.html#l00593">Creature::add_msg_if_player()</a>, <a class="el" href="monster_8cpp_source.html#l01636">monster::apply_damage()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="bodypart_8cpp_source.html#l00329">body_part_name_accusative()</a>, <a class="el" href="monster_8cpp_source.html#l00931">monster::can_act()</a>, <a class="el" href="creature_8cpp_source.html#l01833">Creature::check_dead_state()</a>, <a class="el" href="event_8h.html#a430b444c74dd3fd1472a31714ec5f1cea73bf12e46893348e69d06b00186f937d">dermatik_eggs_injected</a>, <a class="el" href="character_8h_source.html#l00305">Character::dex_cur</a>, <a class="el" href="rng_8cpp_source.html#l00085">dice()</a>, <a class="el" href="monattack_8cpp_source.html#l05764">dodge_check()</a>, <a class="el" href="monster_8cpp_source.html#l01977">monster::dodge_roll()</a>, <a class="el" href="monattack_8cpp.html#a13af1ce0f1c5467c2718b3d683c13c28">effect_dermatik</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="monster_8cpp_source.html#l02894">monster::get_hp()</a>, <a class="el" href="monster_8cpp_source.html#l02884">monster::get_hp_max()</a>, <a class="el" href="creature_8cpp_source.html#l01614">Creature::get_random_body_part()</a>, <a class="el" href="character_8cpp_source.html#l03327">Character::get_skill_level()</a>, <a class="el" href="character_8cpp_source.html#l00470">Character::getID()</a>, <a class="el" href="mutation_8cpp_source.html#l00103">Character::has_trait()</a>, <a class="el" href="monattack_8cpp_source.html#l00275">is_adjacent()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="mtype_8h_source.html#l00285">mtype::melee_skill</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="classCreature.html#af56188882e3300853d18f166738ee37a">Creature::on_dodge()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, <a class="el" href="monattack_8cpp.html#a917f093dcdc3861c86a6adf734a52641">skill_melee</a>, <a class="el" href="monattack_8cpp.html#ad22b82ceedf236ed05df55e661444c76">skill_unarmed</a>, <a class="el" href="monmove_8cpp_source.html#l01834">monster::stumble()</a>, <a class="el" href="monattack_8cpp.html#af18c51d2a8f81b4d06912d40760e9691">trait_ACIDBLOOD</a>, <a class="el" href="monattack_8cpp.html#a6c2652eceffb663021aeae9d4b7d0429">trait_PARAIMMUNE</a>, <a class="el" href="monattack_8cpp.html#ab275b4446e82a6bd7e9763640c7f6395">trait_TAIL_CATTLE</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, and <a class="el" href="creature_8h_source.html#l00485">Creature::uncanny_dodge()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a87db827a981d171edb3a9ca626342baf" name="a87db827a981d171edb3a9ca626342baf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87db827a981d171edb3a9ca626342baf">&#9670;&nbsp;</a></span>dermatik_growth()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::dermatik_growth </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l02185">2185</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02186" name="l02186"></a><span class="lineno"> 2186</span>{</div>
<div class="line"><a id="l02187" name="l02187"></a><span class="lineno"> 2187</span>    <span class="comment">// Dermatik larva growing into an adult</span></div>
<div class="line"><a id="l02188" name="l02188"></a><span class="lineno"> 2188</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l02189" name="l02189"></a><span class="lineno"> 2189</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s dermatik larva grows into an adult!&quot;</span> ),</div>
<div class="line"><a id="l02190" name="l02190"></a><span class="lineno"> 2190</span>                 z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02191" name="l02191"></a><span class="lineno"> 2191</span>    }</div>
<div class="line"><a id="l02192" name="l02192"></a><span class="lineno"> 2192</span>    z-&gt;<a class="code hl_function" href="classmonster.html#a39d78be1e47deaf970439c3b9504e5d9">poly</a>( <a class="code hl_variable" href="monattack_8cpp.html#ae90987951893a9b86b44f59661541a69">mon_dermatik</a> );</div>
<div class="line"><a id="l02193" name="l02193"></a><span class="lineno"> 2193</span> </div>
<div class="line"><a id="l02194" name="l02194"></a><span class="lineno"> 2194</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02195" name="l02195"></a><span class="lineno"> 2195</span>}</div>
<div class="ttc" id="amonattack_8cpp_html_ae90987951893a9b86b44f59661541a69"><div class="ttname"><a href="monattack_8cpp.html#ae90987951893a9b86b44f59661541a69">mon_dermatik</a></div><div class="ttdeci">static const mtype_id mon_dermatik(&quot;mon_dermatik&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="monattack_8cpp.html#ae90987951893a9b86b44f59661541a69">mon_dermatik</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, and <a class="el" href="monster_8cpp_source.html#l00260">monster::poly()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="af898b53c59cc6e85f7f66010f6fd9634" name="af898b53c59cc6e85f7f66010f6fd9634"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af898b53c59cc6e85f7f66010f6fd9634">&#9670;&nbsp;</a></span>disappear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::disappear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l02222">2222</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02223" name="l02223"></a><span class="lineno"> 2223</span>{</div>
<div class="line"><a id="l02224" name="l02224"></a><span class="lineno"> 2224</span>    z-&gt;<a class="code hl_function" href="classmonster.html#a98c421c82c34706735f13afe25ea7f1f">set_hp</a>( 0 );</div>
<div class="line"><a id="l02225" name="l02225"></a><span class="lineno"> 2225</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02226" name="l02226"></a><span class="lineno"> 2226</span>}</div>
<div class="ttc" id="aclassmonster_html_a98c421c82c34706735f13afe25ea7f1f"><div class="ttname"><a href="classmonster.html#a98c421c82c34706735f13afe25ea7f1f">monster::set_hp</a></div><div class="ttdeci">void set_hp(int hp)</div><div class="ttdoc">Directly set the current hp of the monster (not capped at the maximal hp).</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l01631">monster.cpp:1631</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monster_8cpp_source.html#l01631">monster::set_hp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a4efb8be314551e35f69df8cf8d824174" name="a4efb8be314551e35f69df8cf8d824174"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4efb8be314551e35f69df8cf8d824174">&#9670;&nbsp;</a></span>dodge_check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::dodge_check </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCreature.html">Creature</a> *&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
Dodge increases chance of dodging, vs their melee skill 
<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l05764">5764</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05765" name="l05765"></a><span class="lineno"> 5765</span>{<span class="comment"></span></div>
<div class="line"><a id="l05766" name="l05766"></a><span class="lineno"> 5766</span><span class="comment">    ///\EFFECT_DODGE increases chance of dodging, vs their melee skill</span></div>
<div class="line"><a id="l05767" name="l05767"></a><span class="lineno"> 5767</span><span class="comment"></span>    <span class="keywordtype">float</span> dodge = std::max( target-&gt;<a class="code hl_function" href="classCreature.html#aaa501dbe3d1e90d47da43fb9ea57b3be">get_dodge</a>() - <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, z-&gt;<a class="code hl_function" href="classCreature.html#a88b81d1ff0359794554e81c7ae16f370">get_hit</a>() ), 0.0f );</div>
<div class="line"><a id="l05768" name="l05768"></a><span class="lineno"> 5768</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 10000 ) &lt; 10000 / ( 1 + 99 * std::exp( -.6 * dodge ) );</div>
<div class="line"><a id="l05769" name="l05769"></a><span class="lineno"> 5769</span>}</div>
<div class="ttc" id="aclassCreature_html_a88b81d1ff0359794554e81c7ae16f370"><div class="ttname"><a href="classCreature.html#a88b81d1ff0359794554e81c7ae16f370">Creature::get_hit</a></div><div class="ttdeci">virtual float get_hit() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01506">creature.cpp:1506</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature_8cpp_source.html#l01502">Creature::get_dodge()</a>, <a class="el" href="creature_8cpp_source.html#l01506">Creature::get_hit()</a>, and <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monattack_8cpp_source.html#l00634">acid_barf()</a>, <a class="el" href="monattack_8cpp_source.html#l05275">bio_op_disarm()</a>, <a class="el" href="monattack_8cpp_source.html#l05194">bio_op_impale()</a>, <a class="el" href="monattack_8cpp_source.html#l05099">bio_op_takedown()</a>, <a class="el" href="monattack_8cpp_source.html#l02104">dermatik()</a>, <a class="el" href="monattack_8cpp_source.html#l04831">evolve_kill_strike()</a>, <a class="el" href="monattack_8cpp_source.html#l04141">flesh_golem()</a>, <a class="el" href="monattack_8cpp_source.html#l01823">fungus_bristle()</a>, <a class="el" href="monattack_8cpp_source.html#l01916">fungus_fortify()</a>, <a class="el" href="monattack_8cpp_source.html#l01760">fungus_inject()</a>, <a class="el" href="monattack_8cpp_source.html#l02649">grab()</a>, <a class="el" href="monattack_8cpp_source.html#l02046">impale()</a>, <a class="el" href="monattack_8cpp_source.html#l04332">longswipe()</a>, <a class="el" href="monattack_8cpp_source.html#l04257">lunge()</a>, <a class="el" href="monattack_8cpp_source.html#l02555">ranged_pull()</a>, <a class="el" href="monattack_8cpp_source.html#l01080">smash()</a>, <a class="el" href="monattack_8cpp_source.html#l05641">stretch_attack()</a>, <a class="el" href="monattack_8cpp_source.html#l04048">stretch_bite()</a>, and <a class="el" href="monattack_8cpp_source.html#l02500">tentacle()</a>.</p>

</div>
</div>
<a id="a195e1aed3677a7c1372d15caf6323ef8" name="a195e1aed3677a7c1372d15caf6323ef8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a195e1aed3677a7c1372d15caf6323ef8">&#9670;&nbsp;</a></span>dogthing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::dogthing </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l02478">2478</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02479" name="l02479"></a><span class="lineno"> 2479</span>{</div>
<div class="line"><a id="l02480" name="l02480"></a><span class="lineno"> 2480</span>    <span class="keywordflow">if</span>( z == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l02481" name="l02481"></a><span class="lineno"> 2481</span>        <span class="comment">// TODO: replace pointers with references</span></div>
<div class="line"><a id="l02482" name="l02482"></a><span class="lineno"> 2482</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02483" name="l02483"></a><span class="lineno"> 2483</span>    }</div>
<div class="line"><a id="l02484" name="l02484"></a><span class="lineno"> 2484</span> </div>
<div class="line"><a id="l02485" name="l02485"></a><span class="lineno"> 2485</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) || !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l02486" name="l02486"></a><span class="lineno"> 2486</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02487" name="l02487"></a><span class="lineno"> 2487</span>    }</div>
<div class="line"><a id="l02488" name="l02488"></a><span class="lineno"> 2488</span> </div>
<div class="line"><a id="l02489" name="l02489"></a><span class="lineno"> 2489</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s&#39;s head explodes in a mass of roiling tentacles!&quot;</span> ),</div>
<div class="line"><a id="l02490" name="l02490"></a><span class="lineno"> 2490</span>             z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02491" name="l02491"></a><span class="lineno"> 2491</span> </div>
<div class="line"><a id="l02492" name="l02492"></a><span class="lineno"> 2492</span>    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_splash( z-&gt;<a class="code hl_function" href="classmonster.html#a19f8524caa7fa7b0156d4262fb33a341">bloodType</a>(), z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 2, 3 );</div>
<div class="line"><a id="l02493" name="l02493"></a><span class="lineno"> 2493</span> </div>
<div class="line"><a id="l02494" name="l02494"></a><span class="lineno"> 2494</span>    z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> = 0;</div>
<div class="line"><a id="l02495" name="l02495"></a><span class="lineno"> 2495</span>    z-&gt;<a class="code hl_function" href="classmonster.html#a39d78be1e47deaf970439c3b9504e5d9">poly</a>( <a class="code hl_variable" href="monattack_8cpp.html#a0b72b62e483cb20c4bbcfd034d22b4ed">mon_headless_dog_thing</a> );</div>
<div class="line"><a id="l02496" name="l02496"></a><span class="lineno"> 2496</span> </div>
<div class="line"><a id="l02497" name="l02497"></a><span class="lineno"> 2497</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02498" name="l02498"></a><span class="lineno"> 2498</span>}</div>
<div class="ttc" id="aclassmonster_html_a19f8524caa7fa7b0156d4262fb33a341"><div class="ttname"><a href="classmonster.html#a19f8524caa7fa7b0156d4262fb33a341">monster::bloodType</a></div><div class="ttdeci">field_type_id bloodType() const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l02653">monster.cpp:2653</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a0b72b62e483cb20c4bbcfd034d22b4ed"><div class="ttname"><a href="monattack_8cpp.html#a0b72b62e483cb20c4bbcfd034d22b4ed">mon_headless_dog_thing</a></div><div class="ttdeci">static const mtype_id mon_headless_dog_thing(&quot;mon_headless_dog_thing&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="monster_8cpp_source.html#l02653">monster::bloodType()</a>, <a class="el" href="monster_8h_source.html#l00471">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="monattack_8cpp.html#a0b72b62e483cb20c4bbcfd034d22b4ed">mon_headless_dog_thing</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="monster_8cpp_source.html#l00260">monster::poly()</a>, and <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a7da2dcc474c1415be2fff2af9e3da871" name="a7da2dcc474c1415be2fff2af9e3da871"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7da2dcc474c1415be2fff2af9e3da871">&#9670;&nbsp;</a></span>doot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::doot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l05738">5738</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05739" name="l05739"></a><span class="lineno"> 5739</span>{</div>
<div class="line"><a id="l05740" name="l05740"></a><span class="lineno"> 5740</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 300;</div>
<div class="line"><a id="l05741" name="l05741"></a><span class="lineno"> 5741</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l05742" name="l05742"></a><span class="lineno"> 5742</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s doots its trumpet!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l05743" name="l05743"></a><span class="lineno"> 5743</span>    }</div>
<div class="line"><a id="l05744" name="l05744"></a><span class="lineno"> 5744</span>    <span class="keywordtype">int</span> spooks = 0;</div>
<div class="line"><a id="l05745" name="l05745"></a><span class="lineno"> 5745</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;spookyscary : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 2 ) ) {</div>
<div class="line"><a id="l05746" name="l05746"></a><span class="lineno"> 5746</span>        <span class="keywordflow">if</span>( !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_empty( spookyscary ) ) {</div>
<div class="line"><a id="l05747" name="l05747"></a><span class="lineno"> 5747</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05748" name="l05748"></a><span class="lineno"> 5748</span>        }</div>
<div class="line"><a id="l05749" name="l05749"></a><span class="lineno"> 5749</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> dist = <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), spookyscary );</div>
<div class="line"><a id="l05750" name="l05750"></a><span class="lineno"> 5750</span>        <span class="keywordflow">if</span>( ( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( dist + 3 ) || spooks == 0 ) &amp;&amp; spooks &lt; 5 ) {</div>
<div class="line"><a id="l05751" name="l05751"></a><span class="lineno"> 5751</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l05752" name="l05752"></a><span class="lineno"> 5752</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A spooky skeleton rises from the ground!&quot;</span> ) );</div>
<div class="line"><a id="l05753" name="l05753"></a><span class="lineno"> 5753</span>            }</div>
<div class="line"><a id="l05754" name="l05754"></a><span class="lineno"> 5754</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_at( <a class="code hl_variable" href="monattack_8cpp.html#a627adac88da79dac625d05e35ca72c5a">mon_zombie_skeltal_minion</a>, spookyscary );</div>
<div class="line"><a id="l05755" name="l05755"></a><span class="lineno"> 5755</span>            spooks++;</div>
<div class="line"><a id="l05756" name="l05756"></a><span class="lineno"> 5756</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05757" name="l05757"></a><span class="lineno"> 5757</span>        }</div>
<div class="line"><a id="l05758" name="l05758"></a><span class="lineno"> 5758</span>    }</div>
<div class="line"><a id="l05759" name="l05759"></a><span class="lineno"> 5759</span>    <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 200, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a18d6769919266cd0bd6cd78aa405d5d0">sounds::sound_t::music</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;DOOT.&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;music_instrument&quot;</span>,</div>
<div class="line"><a id="l05760" name="l05760"></a><span class="lineno"> 5760</span>                   <span class="stringliteral">&quot;trumpet&quot;</span> );</div>
<div class="line"><a id="l05761" name="l05761"></a><span class="lineno"> 5761</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05762" name="l05762"></a><span class="lineno"> 5762</span>}</div>
<div class="ttc" id="amonattack_8cpp_html_a627adac88da79dac625d05e35ca72c5a"><div class="ttname"><a href="monattack_8cpp.html#a627adac88da79dac625d05e35ca72c5a">mon_zombie_skeltal_minion</a></div><div class="ttdeci">static const mtype_id mon_zombie_skeltal_minion(&quot;mon_zombie_skeltal_minion&quot;)</div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3a18d6769919266cd0bd6cd78aa405d5d0"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a18d6769919266cd0bd6cd78aa405d5d0">sounds::sound_t::music</a></div><div class="ttdeci">@ music</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="monattack_8cpp.html#a627adac88da79dac625d05e35ca72c5a">mon_zombie_skeltal_minion</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a18d6769919266cd0bd6cd78aa405d5d0">sounds::music</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, and <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a33846d02ea27a8463f9f85284b973ed1" name="a33846d02ea27a8463f9f85284b973ed1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33846d02ea27a8463f9f85284b973ed1">&#9670;&nbsp;</a></span>eat_crop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::eat_crop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l00325">325</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>{</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;p : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 1 ) ) {</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.has_flag( <span class="stringliteral">&quot;PLANT&quot;</span>, p ) &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.furn_set( p, <a class="code hl_typedef" href="type__id_8h.html#a13fd56b9ac506b2517d4889040e0ef66">furn_str_id</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.furn( p )-&gt;plant-&gt;base ) );</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.i_clear( p );</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>        }</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    }</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>}</div>
<div class="ttc" id="atype__id_8h_html_a13fd56b9ac506b2517d4889040e0ef66"><div class="ttname"><a href="type__id_8h.html#a13fd56b9ac506b2517d4889040e0ef66">furn_str_id</a></div><div class="ttdeci">string_id&lt; furn_t &gt; furn_str_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00058">type_id.h:58</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, and <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="ad077033f0300879f861859fead0ab3bf" name="ad077033f0300879f861859fead0ab3bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad077033f0300879f861859fead0ab3bf">&#9670;&nbsp;</a></span>eat_food()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::eat_food </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l00337">337</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>{</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;p : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 1 ) ) {</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>        <span class="comment">//Protect crop seeds from carnivores, give omnivores eat_crop special also</span></div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.has_flag( <span class="stringliteral">&quot;PLANT&quot;</span>, p ) ) {</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>        }</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>        <span class="comment">// Don&#39;t snap up food RIGHT under the player&#39;s nose.</span></div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>        <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> &amp;&amp; <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos(), p ) &lt;= 2 ) {</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>        }</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>        <span class="keyword">auto</span> items = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.i_at( p );</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;<a class="code hl_class" href="classitem.html">item</a> : items ) {</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>            <span class="comment">//Fun limit prevents scavengers from eating feces</span></div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>            <span class="keywordflow">if</span>( !<a class="code hl_class" href="classitem.html">item</a>.<a class="code hl_function" href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">is_food</a>() || <a class="code hl_class" href="classitem.html">item</a>.<a class="code hl_function" href="classitem.html#a66b0bbc211f6fb668781640c971d3acc">get_comestible_fun</a>() &lt; -20 ) {</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>            }</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>            <span class="comment">//Don&#39;t eat own eggs</span></div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>            <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a3a13c9cf426dc128a044ac158b505ccd">baby_egg</a> != <a class="code hl_class" href="classitem.html">item</a>.<a class="code hl_variable" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code hl_function" href="structitype.html#abc2596bacfc718fba56ab8076bab5d6b">get_id</a>() ) {</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>                <span class="keywordtype">int</span> consumed = 1;</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>                <span class="keywordflow">if</span>( <a class="code hl_class" href="classitem.html">item</a>.<a class="code hl_function" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() ) {</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>                    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.use_charges( p, 0, <a class="code hl_class" href="classitem.html">item</a>.<a class="code hl_variable" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code hl_function" href="structitype.html#abc2596bacfc718fba56ab8076bab5d6b">get_id</a>(), consumed );</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>                    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.use_amount( p, 0, <a class="code hl_class" href="classitem.html">item</a>.<a class="code hl_variable" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code hl_function" href="structitype.html#abc2596bacfc718fba56ab8076bab5d6b">get_id</a>(), consumed );</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>                }</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>            }</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>        }</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>    }</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>}</div>
<div class="ttc" id="aclassitem_html_a40963a016376016eb408bdb9dbb94388"><div class="ttname"><a href="classitem.html#a40963a016376016eb408bdb9dbb94388">item::count_by_charges</a></div><div class="ttdeci">bool count_by_charges() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05855">item.cpp:5855</a></div></div>
<div class="ttc" id="aclassitem_html_a66b0bbc211f6fb668781640c971d3acc"><div class="ttname"><a href="classitem.html#a66b0bbc211f6fb668781640c971d3acc">item::get_comestible_fun</a></div><div class="ttdeci">int get_comestible_fun() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05371">item.cpp:5371</a></div></div>
<div class="ttc" id="aclassitem_html_aad45569fa1fdd99d602eabbbbca04f75"><div class="ttname"><a href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">item::is_food</a></div><div class="ttdeci">bool is_food() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06442">item.cpp:6442</a></div></div>
<div class="ttc" id="aclassitem_html_ac1d2c4c33b8a499812f3437cb2fad742"><div class="ttname"><a href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">item::type</a></div><div class="ttdeci">const itype * type</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02156">item.h:2156</a></div></div>
<div class="ttc" id="astructitype_html_abc2596bacfc718fba56ab8076bab5d6b"><div class="ttname"><a href="structitype.html#abc2596bacfc718fba56ab8076bab5d6b">itype::get_id</a></div><div class="ttdeci">const itype_id &amp; get_id() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01070">itype.h:1070</a></div></div>
<div class="ttc" id="astructmtype_html_a3a13c9cf426dc128a044ac158b505ccd"><div class="ttname"><a href="structmtype.html#a3a13c9cf426dc128a044ac158b505ccd">mtype::baby_egg</a></div><div class="ttdeci">itype_id baby_egg</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00336">mtype.h:336</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mtype_8h_source.html#l00336">mtype::baby_egg</a>, <a class="el" href="item_8cpp_source.html#l05855">item::count_by_charges()</a>, <a class="el" href="monster_8h_source.html#l00471">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="item_8cpp_source.html#l05371">item::get_comestible_fun()</a>, <a class="el" href="itype_8h_source.html#l01070">itype::get_id()</a>, <a class="el" href="item_8cpp_source.html#l06442">item::is_food()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="item_8h_source.html#l02156">item::type</a>, and <a class="el" href="monster_8h_source.html#l00478">monster::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="aa7c417b9b8dd8c4da03e25e28fd5761a" name="aa7c417b9b8dd8c4da03e25e28fd5761a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7c417b9b8dd8c4da03e25e28fd5761a">&#9670;&nbsp;</a></span>evolve_kill_strike()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::evolve_kill_strike </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l04831">4831</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04832" name="l04832"></a><span class="lineno"> 4832</span>{</div>
<div class="line"><a id="l04833" name="l04833"></a><span class="lineno"> 4833</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l04834" name="l04834"></a><span class="lineno"> 4834</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ||</div>
<div class="line"><a id="l04835" name="l04835"></a><span class="lineno"> 4835</span>        !<a class="code hl_function" href="monattack_8cpp.html#abf0d71b531a799a8eb3fd58a846064db">is_adjacent</a>( z, target, <span class="keyword">false</span> ) ||</div>
<div class="line"><a id="l04836" name="l04836"></a><span class="lineno"> 4836</span>        !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l04837" name="l04837"></a><span class="lineno"> 4837</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04838" name="l04838"></a><span class="lineno"> 4838</span>    }</div>
<div class="line"><a id="l04839" name="l04839"></a><span class="lineno"> 4839</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classmonster.html#a0f83a7ee7bd8d96efc80200c5a5caf5b">can_act</a>() ) {</div>
<div class="line"><a id="l04840" name="l04840"></a><span class="lineno"> 4840</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04841" name="l04841"></a><span class="lineno"> 4841</span>    }</div>
<div class="line"><a id="l04842" name="l04842"></a><span class="lineno"> 4842</span> </div>
<div class="line"><a id="l04843" name="l04843"></a><span class="lineno"> 4843</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 100;</div>
<div class="line"><a id="l04844" name="l04844"></a><span class="lineno"> 4844</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> uncanny = target-&gt;<a class="code hl_function" href="classCreature.html#afd2f1b1e5bafdef20afddbb704b1d5a5">uncanny_dodge</a>();</div>
<div class="line"><a id="l04845" name="l04845"></a><span class="lineno"> 4845</span>    <span class="keywordflow">if</span>( uncanny || <a class="code hl_function" href="namespacemattack.html#a4efb8be314551e35f69df8cf8d824174">dodge_check</a>( z, target ) ) {</div>
<div class="line"><a id="l04846" name="l04846"></a><span class="lineno"> 4846</span>        <span class="keyword">auto</span> msg_type = target == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ? <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a> : <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>;</div>
<div class="line"><a id="l04847" name="l04847"></a><span class="lineno"> 4847</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( msg_type, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s lunges at you, but you dodge!&quot;</span> ),</div>
<div class="line"><a id="l04848" name="l04848"></a><span class="lineno"> 4848</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s lunges at &lt;npcname&gt;, but they dodge!&quot;</span> ),</div>
<div class="line"><a id="l04849" name="l04849"></a><span class="lineno"> 4849</span>                                       z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l04850" name="l04850"></a><span class="lineno"> 4850</span>        <span class="keywordflow">if</span>( !uncanny ) {</div>
<div class="line"><a id="l04851" name="l04851"></a><span class="lineno"> 4851</span>            target-&gt;<a class="code hl_function" href="classCreature.html#af56188882e3300853d18f166738ee37a">on_dodge</a>( z, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> * 2 );</div>
<div class="line"><a id="l04852" name="l04852"></a><span class="lineno"> 4852</span>            target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( msg_type, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s lunges at you, but you dodge!&quot;</span> ),</div>
<div class="line"><a id="l04853" name="l04853"></a><span class="lineno"> 4853</span>                                           <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s lunges at &lt;npcname&gt;, but they dodge!&quot;</span> ),</div>
<div class="line"><a id="l04854" name="l04854"></a><span class="lineno"> 4854</span>                                           z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l04855" name="l04855"></a><span class="lineno"> 4855</span>        }</div>
<div class="line"><a id="l04856" name="l04856"></a><span class="lineno"> 4856</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04857" name="l04857"></a><span class="lineno"> 4857</span>    }</div>
<div class="line"><a id="l04858" name="l04858"></a><span class="lineno"> 4858</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> <span class="keyword">const</span> target_pos = target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>();</div>
<div class="line"><a id="l04859" name="l04859"></a><span class="lineno"> 4859</span>    <span class="keyword">const</span> std::string target_name = target-&gt;<a class="code hl_function" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">disp_name</a>();</div>
<div class="line"><a id="l04860" name="l04860"></a><span class="lineno"> 4860</span>    <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a> damage( z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a0ac5f04d4b2bfeec1ef9db873629f96a">melee_damage</a> );</div>
<div class="line"><a id="l04861" name="l04861"></a><span class="lineno"> 4861</span>    damage.mult_damage( 1.33f );</div>
<div class="line"><a id="l04862" name="l04862"></a><span class="lineno"> 4862</span>    damage.add( <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa12e559f29e023db673e9251b9337d8dd">DT_STAB</a>, <a class="code hl_function" href="rng_8cpp.html#a7ba03e7147e43d808dc29c54bce9e57f">dice</a>( z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a561d4830d7f7c613c177f5880c2e15fb">melee_dice</a>, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#af346fa78fe3bff4e8e321e9046bc9717">melee_sides</a> ), <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 5,</div>
<div class="line"><a id="l04863" name="l04863"></a><span class="lineno"> 4863</span>                                 15 ), 1.0, 0.5 ) );</div>
<div class="line"><a id="l04864" name="l04864"></a><span class="lineno"> 4864</span>    <span class="keywordtype">int</span> damage_dealt = target-&gt;<a class="code hl_function" href="classCreature.html#a75ad96eb6ce27d3c1df250965b4de7b5">deal_damage</a>( z, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ), damage ).<a class="code hl_function" href="structdealt__damage__instance.html#a86b702070a1c313624abc78ff34eff48">total_damage</a>();</div>
<div class="line"><a id="l04865" name="l04865"></a><span class="lineno"> 4865</span>    <span class="keywordflow">if</span>( damage_dealt &gt; 0 ) {</div>
<div class="line"><a id="l04866" name="l04866"></a><span class="lineno"> 4866</span>        <span class="keyword">auto</span> msg_type = target == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ? <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a> : <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>;</div>
<div class="line"><a id="l04867" name="l04867"></a><span class="lineno"> 4867</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( msg_type,</div>
<div class="line"><a id="l04868" name="l04868"></a><span class="lineno"> 4868</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s impales yor chest for %2$d damage!&quot;</span> ),</div>
<div class="line"><a id="l04869" name="l04869"></a><span class="lineno"> 4869</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s impales &lt;npcname&gt;&#39;s chest for %2$d damage!&quot;</span> ),</div>
<div class="line"><a id="l04870" name="l04870"></a><span class="lineno"> 4870</span>                                       z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(), damage_dealt );</div>
<div class="line"><a id="l04871" name="l04871"></a><span class="lineno"> 4871</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04872" name="l04872"></a><span class="lineno"> 4872</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>(</div>
<div class="line"><a id="l04873" name="l04873"></a><span class="lineno"> 4873</span>            <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s attempts to burrow itself into you, but is stopped by your armor!&quot;</span> ),</div>
<div class="line"><a id="l04874" name="l04874"></a><span class="lineno"> 4874</span>            <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s slashes at &lt;npcname&gt;&#39;s torso, but is stopped by their armor!&quot;</span> ),</div>
<div class="line"><a id="l04875" name="l04875"></a><span class="lineno"> 4875</span>            z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l04876" name="l04876"></a><span class="lineno"> 4876</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04877" name="l04877"></a><span class="lineno"> 4877</span>    }</div>
<div class="line"><a id="l04878" name="l04878"></a><span class="lineno"> 4878</span>    <span class="keywordflow">if</span>( target-&gt;<a class="code hl_function" href="classCreature.html#ab4c318885f6b9947a7c85d3328d25ffe">is_dead_state</a>() &amp;&amp; <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_empty( target_pos ) &amp;&amp;</div>
<div class="line"><a id="l04879" name="l04879"></a><span class="lineno"> 4879</span>        target-&gt;<a class="code hl_function" href="classCreature.html#ad0d456dd94dedc99904380699582135b">made_of_any</a>( <a class="code hl_variable" href="classCreature.html#a81c28d7d1cb83a47794dbf879dede400">Creature::cmat_flesh</a> ) ) {</div>
<div class="line"><a id="l04880" name="l04880"></a><span class="lineno"> 4880</span>        <span class="keyword">const</span> std::string old_name = z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>();</div>
<div class="line"><a id="l04881" name="l04881"></a><span class="lineno"> 4881</span>        <span class="keyword">const</span> <span class="keywordtype">bool</span> could_see_z = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z );</div>
<div class="line"><a id="l04882" name="l04882"></a><span class="lineno"> 4882</span>        z-&gt;<a class="code hl_function" href="classmonster.html#aca57bd31eec87f957ca9854e5cfed768">allow_upgrade</a>();</div>
<div class="line"><a id="l04883" name="l04883"></a><span class="lineno"> 4883</span>        z-&gt;<a class="code hl_function" href="classmonster.html#a63cfaab5c6126ecc3f3c3e966f4bf574">try_upgrade</a>( <span class="keyword">false</span> );</div>
<div class="line"><a id="l04884" name="l04884"></a><span class="lineno"> 4884</span>        z-&gt;<a class="code hl_function" href="classmonster.html#a4871f8fa2b4ba7577c80db7c5e88f291">setpos</a>( target_pos );</div>
<div class="line"><a id="l04885" name="l04885"></a><span class="lineno"> 4885</span>        <span class="keyword">const</span> std::string upgrade_name = z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>();</div>
<div class="line"><a id="l04886" name="l04886"></a><span class="lineno"> 4886</span>        <span class="keyword">const</span> <span class="keywordtype">bool</span> can_see_z_upgrade = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z );</div>
<div class="line"><a id="l04887" name="l04887"></a><span class="lineno"> 4887</span>        <span class="keywordflow">if</span>( could_see_z &amp;&amp; can_see_z_upgrade ) {</div>
<div class="line"><a id="l04888" name="l04888"></a><span class="lineno"> 4888</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s burrows within %2$s corpse and a %3$s emerges from the remains!&quot;</span> ),</div>
<div class="line"><a id="l04889" name="l04889"></a><span class="lineno"> 4889</span>                     old_name,</div>
<div class="line"><a id="l04890" name="l04890"></a><span class="lineno"> 4890</span>                     target_name, upgrade_name );</div>
<div class="line"><a id="l04891" name="l04891"></a><span class="lineno"> 4891</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( could_see_z ) {</div>
<div class="line"><a id="l04892" name="l04892"></a><span class="lineno"> 4892</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s burrows within %2$s corpse!&quot;</span> ), old_name, target_name );</div>
<div class="line"><a id="l04893" name="l04893"></a><span class="lineno"> 4893</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( can_see_z_upgrade ) {</div>
<div class="line"><a id="l04894" name="l04894"></a><span class="lineno"> 4894</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A %1$s emerges from %2$s corpse!&quot;</span> ), upgrade_name, target_name );</div>
<div class="line"><a id="l04895" name="l04895"></a><span class="lineno"> 4895</span>        }</div>
<div class="line"><a id="l04896" name="l04896"></a><span class="lineno"> 4896</span>    }</div>
<div class="line"><a id="l04897" name="l04897"></a><span class="lineno"> 4897</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04898" name="l04898"></a><span class="lineno"> 4898</span>}</div>
<div class="ttc" id="aclassCreature_html_a81c28d7d1cb83a47794dbf879dede400"><div class="ttname"><a href="classCreature.html#a81c28d7d1cb83a47794dbf879dede400">Creature::cmat_flesh</a></div><div class="ttdeci">static const std::set&lt; material_id &gt; cmat_flesh</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00475">creature.h:475</a></div></div>
<div class="ttc" id="aclassCreature_html_ab4c318885f6b9947a7c85d3328d25ffe"><div class="ttname"><a href="classCreature.html#ab4c318885f6b9947a7c85d3328d25ffe">Creature::is_dead_state</a></div><div class="ttdeci">virtual bool is_dead_state() const =0</div></div>
<div class="ttc" id="aclassCreature_html_ad0d456dd94dedc99904380699582135b"><div class="ttname"><a href="classCreature.html#ad0d456dd94dedc99904380699582135b">Creature::made_of_any</a></div><div class="ttdeci">virtual bool made_of_any(const std::set&lt; material_id &gt; &amp;ms) const =0</div></div>
<div class="ttc" id="aclassmonster_html_a4871f8fa2b4ba7577c80db7c5e88f291"><div class="ttname"><a href="classmonster.html#a4871f8fa2b4ba7577c80db7c5e88f291">monster::setpos</a></div><div class="ttdeci">void setpos(const tripoint &amp;p) override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00237">monster.cpp:237</a></div></div>
<div class="ttc" id="aclassmonster_html_a63cfaab5c6126ecc3f3c3e966f4bf574"><div class="ttname"><a href="classmonster.html#a63cfaab5c6126ecc3f3c3e966f4bf574">monster::try_upgrade</a></div><div class="ttdeci">void try_upgrade(bool pin_time)</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00331">monster.cpp:331</a></div></div>
<div class="ttc" id="aclassmonster_html_aca57bd31eec87f957ca9854e5cfed768"><div class="ttname"><a href="classmonster.html#aca57bd31eec87f957ca9854e5cfed768">monster::allow_upgrade</a></div><div class="ttdeci">void allow_upgrade()</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00304">monster.cpp:304</a></div></div>
<div class="ttc" id="astructmtype_html_a0ac5f04d4b2bfeec1ef9db873629f96a"><div class="ttname"><a href="structmtype.html#a0ac5f04d4b2bfeec1ef9db873629f96a">mtype::melee_damage</a></div><div class="ttdeci">damage_instance melee_damage</div><div class="ttdoc">vision range in total darkness</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00308">mtype.h:308</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="damage_8cpp_source.html#l00093">damage_instance::add()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="monster_8cpp_source.html#l00304">monster::allow_upgrade()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="monster_8cpp_source.html#l00931">monster::can_act()</a>, <a class="el" href="creature_8h_source.html#l00475">Creature::cmat_flesh</a>, <a class="el" href="creature_8cpp_source.html#l00873">Creature::deal_damage()</a>, <a class="el" href="rng_8cpp_source.html#l00085">dice()</a>, <a class="el" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">Creature::disp_name()</a>, <a class="el" href="monattack_8cpp_source.html#l05764">dodge_check()</a>, <a class="el" href="damage_8h_source.html#l00027">DT_STAB</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="monattack_8cpp_source.html#l00275">is_adjacent()</a>, <a class="el" href="classCreature.html#ab4c318885f6b9947a7c85d3328d25ffe">Creature::is_dead_state()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="classCreature.html#ad0d456dd94dedc99904380699582135b">Creature::made_of_any()</a>, <a class="el" href="mtype_8h_source.html#l00308">mtype::melee_damage</a>, <a class="el" href="mtype_8h_source.html#l00286">mtype::melee_dice</a>, <a class="el" href="mtype_8h_source.html#l00287">mtype::melee_sides</a>, <a class="el" href="mtype_8h_source.html#l00285">mtype::melee_skill</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="damage_8cpp_source.html#l00048">damage_instance::mult_damage()</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="classCreature.html#af56188882e3300853d18f166738ee37a">Creature::on_dodge()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, <a class="el" href="monster_8cpp_source.html#l00237">monster::setpos()</a>, <a class="el" href="damage_8cpp_source.html#l00180">dealt_damage_instance::total_damage()</a>, <a class="el" href="monster_8cpp_source.html#l00331">monster::try_upgrade()</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, and <a class="el" href="creature_8h_source.html#l00485">Creature::uncanny_dodge()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a95d5fab8088d3f53d21282823a9e3ea7" name="a95d5fab8088d3f53d21282823a9e3ea7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95d5fab8088d3f53d21282823a9e3ea7">&#9670;&nbsp;</a></span>fear_paralyze()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::fear_paralyze </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
Intelligence decreases chance of being paralyzed by fear attack 
<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l02854">2854</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02855" name="l02855"></a><span class="lineno"> 2855</span>{</div>
<div class="line"><a id="l02856" name="l02856"></a><span class="lineno"> 2856</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> ) {</div>
<div class="line"><a id="l02857" name="l02857"></a><span class="lineno"> 2857</span>        <span class="comment">// TODO: handle friendly monsters</span></div>
<div class="line"><a id="l02858" name="l02858"></a><span class="lineno"> 2858</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02859" name="l02859"></a><span class="lineno"> 2859</span>    }</div>
<div class="line"><a id="l02860" name="l02860"></a><span class="lineno"> 2860</span> </div>
<div class="line"><a id="l02861" name="l02861"></a><span class="lineno"> 2861</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="monattack_8cpp.html#a34c6e57d4263c7f17f18497bf390808c">within_visual_range</a>( z, 10 ) ) {</div>
<div class="line"><a id="l02862" name="l02862"></a><span class="lineno"> 2862</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02863" name="l02863"></a><span class="lineno"> 2863</span>    }</div>
<div class="line"><a id="l02864" name="l02864"></a><span class="lineno"> 2864</span> </div>
<div class="line"><a id="l02865" name="l02865"></a><span class="lineno"> 2865</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) &amp;&amp; !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_effect( <a class="code hl_variable" href="monattack_8cpp.html#ab48b01479f9dab19e8cec9c443c378d5">effect_fearparalyze</a> ) ) {</div>
<div class="line"><a id="l02866" name="l02866"></a><span class="lineno"> 2866</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_artifact_with( <a class="code hl_enumvalue" href="enums_8h.html#abbe6432d5446acdbb3c80999ba5a4621a13b47bda414a8f80cf669e3c07d867b7">AEP_PSYSHIELD</a> ) || ( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.worn_with_flag( <span class="stringliteral">&quot;PSYSHIELD_PARTIAL&quot;</span> ) &amp;&amp;</div>
<div class="line"><a id="l02867" name="l02867"></a><span class="lineno"> 2867</span>                <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) ) {</div>
<div class="line"><a id="l02868" name="l02868"></a><span class="lineno"> 2868</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s probes your mind, but is rebuffed!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );<span class="comment"></span></div>
<div class="line"><a id="l02869" name="l02869"></a><span class="lineno"> 2869</span><span class="comment">            ///\EFFECT_INT decreases chance of being paralyzed by fear attack</span></div>
<div class="line"><a id="l02870" name="l02870"></a><span class="lineno"> 2870</span><span class="comment"></span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 20 ) &gt; <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.get_int() ) {</div>
<div class="line"><a id="l02871" name="l02871"></a><span class="lineno"> 2871</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The terrifying visage of the %s paralyzes you.&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02872" name="l02872"></a><span class="lineno"> 2872</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.add_effect( <a class="code hl_variable" href="monattack_8cpp.html#ab48b01479f9dab19e8cec9c443c378d5">effect_fearparalyze</a>, 5_turns );</div>
<div class="line"><a id="l02873" name="l02873"></a><span class="lineno"> 2873</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.moves -= 4 * <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.get_speed();</div>
<div class="line"><a id="l02874" name="l02874"></a><span class="lineno"> 2874</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02875" name="l02875"></a><span class="lineno"> 2875</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You manage to avoid staring at the horrendous %s.&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02876" name="l02876"></a><span class="lineno"> 2876</span>        }</div>
<div class="line"><a id="l02877" name="l02877"></a><span class="lineno"> 2877</span>    }</div>
<div class="line"><a id="l02878" name="l02878"></a><span class="lineno"> 2878</span> </div>
<div class="line"><a id="l02879" name="l02879"></a><span class="lineno"> 2879</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02880" name="l02880"></a><span class="lineno"> 2880</span>}</div>
<div class="ttc" id="aenums_8h_html_abbe6432d5446acdbb3c80999ba5a4621a13b47bda414a8f80cf669e3c07d867b7"><div class="ttname"><a href="enums_8h.html#abbe6432d5446acdbb3c80999ba5a4621a13b47bda414a8f80cf669e3c07d867b7">AEP_PSYSHIELD</a></div><div class="ttdeci">@ AEP_PSYSHIELD</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00116">enums.h:116</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a34c6e57d4263c7f17f18497bf390808c"><div class="ttname"><a href="monattack_8cpp.html#a34c6e57d4263c7f17f18497bf390808c">within_visual_range</a></div><div class="ttdeci">static bool within_visual_range(monster *z, int max_range)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l00209">monattack.cpp:209</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_ab48b01479f9dab19e8cec9c443c378d5"><div class="ttname"><a href="monattack_8cpp.html#ab48b01479f9dab19e8cec9c443c378d5">effect_fearparalyze</a></div><div class="ttdeci">static const efftype_id effect_fearparalyze(&quot;fearparalyze&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="enums_8h_source.html#l00116">AEP_PSYSHIELD</a>, <a class="el" href="monattack_8cpp.html#ab48b01479f9dab19e8cec9c443c378d5">effect_fearparalyze</a>, <a class="el" href="monster_8h_source.html#l00471">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, and <a class="el" href="monattack_8cpp_source.html#l00209">within_visual_range()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a74c5bd8b75ec90d4af94f3fc218b3eba" name="a74c5bd8b75ec90d4af94f3fc218b3eba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74c5bd8b75ec90d4af94f3fc218b3eba">&#9670;&nbsp;</a></span>flame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mattack::flame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCreature.html">Creature</a> *&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l03658">3658</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03659" name="l03659"></a><span class="lineno"> 3659</span>{</div>
<div class="line"><a id="l03660" name="l03660"></a><span class="lineno"> 3660</span>    <span class="keywordtype">int</span> dist = <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() );</div>
<div class="line"><a id="l03661" name="l03661"></a><span class="lineno"> 3661</span>    <span class="keywordflow">if</span>( target != &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ) {</div>
<div class="line"><a id="l03662" name="l03662"></a><span class="lineno"> 3662</span>        <span class="comment">// friendly</span></div>
<div class="line"><a id="l03663" name="l03663"></a><span class="lineno"> 3663</span>        <span class="comment">// It takes a while</span></div>
<div class="line"><a id="l03664" name="l03664"></a><span class="lineno"> 3664</span>        z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 500;</div>
<div class="line"><a id="l03665" name="l03665"></a><span class="lineno"> 3665</span>        <span class="keywordflow">if</span>( !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.sees( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>(), dist ) ) {</div>
<div class="line"><a id="l03666" name="l03666"></a><span class="lineno"> 3666</span>            <span class="comment">// shouldn&#39;t happen</span></div>
<div class="line"><a id="l03667" name="l03667"></a><span class="lineno"> 3667</span>            <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;mattack::flame invoked on invisible target&quot;</span> );</div>
<div class="line"><a id="l03668" name="l03668"></a><span class="lineno"> 3668</span>        }</div>
<div class="line"><a id="l03669" name="l03669"></a><span class="lineno"> 3669</span>        std::vector&lt;tripoint&gt; traj = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.find_clear_path( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() );</div>
<div class="line"><a id="l03670" name="l03670"></a><span class="lineno"> 3670</span> </div>
<div class="line"><a id="l03671" name="l03671"></a><span class="lineno"> 3671</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;i : traj ) {</div>
<div class="line"><a id="l03672" name="l03672"></a><span class="lineno"> 3672</span>            <span class="comment">// break out of attack if flame hits a wall</span></div>
<div class="line"><a id="l03673" name="l03673"></a><span class="lineno"> 3673</span>            <span class="comment">// TODO: Z</span></div>
<div class="line"><a id="l03674" name="l03674"></a><span class="lineno"> 3674</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.hit_with_fire( <a class="code hl_struct" href="structtripoint.html">tripoint</a>( i.xy(), z-&gt;<a class="code hl_function" href="classmonster.html#a3690c104bd71bffc25153a86229f2a97">posz</a>() ) ) ) {</div>
<div class="line"><a id="l03675" name="l03675"></a><span class="lineno"> 3675</span>                <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( i ) ) {</div>
<div class="line"><a id="l03676" name="l03676"></a><span class="lineno"> 3676</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The tongue of flame hits the %s!&quot;</span> ),</div>
<div class="line"><a id="l03677" name="l03677"></a><span class="lineno"> 3677</span>                             <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.tername( i.xy() ) );</div>
<div class="line"><a id="l03678" name="l03678"></a><span class="lineno"> 3678</span>                }</div>
<div class="line"><a id="l03679" name="l03679"></a><span class="lineno"> 3679</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03680" name="l03680"></a><span class="lineno"> 3680</span>            }</div>
<div class="line"><a id="l03681" name="l03681"></a><span class="lineno"> 3681</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_field( i, <a class="code hl_variable" href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a>, 1 );</div>
<div class="line"><a id="l03682" name="l03682"></a><span class="lineno"> 3682</span>        }</div>
<div class="line"><a id="l03683" name="l03683"></a><span class="lineno"> 3683</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a>, 8_turns, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a> );</div>
<div class="line"><a id="l03684" name="l03684"></a><span class="lineno"> 3684</span> </div>
<div class="line"><a id="l03685" name="l03685"></a><span class="lineno"> 3685</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03686" name="l03686"></a><span class="lineno"> 3686</span>    }</div>
<div class="line"><a id="l03687" name="l03687"></a><span class="lineno"> 3687</span> </div>
<div class="line"><a id="l03688" name="l03688"></a><span class="lineno"> 3688</span>    <span class="comment">// It takes a while</span></div>
<div class="line"><a id="l03689" name="l03689"></a><span class="lineno"> 3689</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 500;</div>
<div class="line"><a id="l03690" name="l03690"></a><span class="lineno"> 3690</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.sees( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>(), dist + 1 ) ) {</div>
<div class="line"><a id="l03691" name="l03691"></a><span class="lineno"> 3691</span>        <span class="comment">// shouldn&#39;t happen</span></div>
<div class="line"><a id="l03692" name="l03692"></a><span class="lineno"> 3692</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;mattack::flame invoked on invisible target&quot;</span> );</div>
<div class="line"><a id="l03693" name="l03693"></a><span class="lineno"> 3693</span>    }</div>
<div class="line"><a id="l03694" name="l03694"></a><span class="lineno"> 3694</span>    std::vector&lt;tripoint&gt; traj = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.find_clear_path( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() );</div>
<div class="line"><a id="l03695" name="l03695"></a><span class="lineno"> 3695</span> </div>
<div class="line"><a id="l03696" name="l03696"></a><span class="lineno"> 3696</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;i : traj ) {</div>
<div class="line"><a id="l03697" name="l03697"></a><span class="lineno"> 3697</span>        <span class="comment">// break out of attack if flame hits a wall</span></div>
<div class="line"><a id="l03698" name="l03698"></a><span class="lineno"> 3698</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.hit_with_fire( <a class="code hl_struct" href="structtripoint.html">tripoint</a>( i.xy(), z-&gt;<a class="code hl_function" href="classmonster.html#a3690c104bd71bffc25153a86229f2a97">posz</a>() ) ) ) {</div>
<div class="line"><a id="l03699" name="l03699"></a><span class="lineno"> 3699</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( i ) ) {</div>
<div class="line"><a id="l03700" name="l03700"></a><span class="lineno"> 3700</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The tongue of flame hits the %s!&quot;</span> ),</div>
<div class="line"><a id="l03701" name="l03701"></a><span class="lineno"> 3701</span>                         <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.tername( i.xy() ) );</div>
<div class="line"><a id="l03702" name="l03702"></a><span class="lineno"> 3702</span>            }</div>
<div class="line"><a id="l03703" name="l03703"></a><span class="lineno"> 3703</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03704" name="l03704"></a><span class="lineno"> 3704</span>        }</div>
<div class="line"><a id="l03705" name="l03705"></a><span class="lineno"> 3705</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_field( i, <a class="code hl_variable" href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a>, 1 );</div>
<div class="line"><a id="l03706" name="l03706"></a><span class="lineno"> 3706</span>    }</div>
<div class="line"><a id="l03707" name="l03707"></a><span class="lineno"> 3707</span>    <span class="keywordflow">if</span>( !target-&gt;<a class="code hl_function" href="classCreature.html#afd2f1b1e5bafdef20afddbb704b1d5a5">uncanny_dodge</a>() ) {</div>
<div class="line"><a id="l03708" name="l03708"></a><span class="lineno"> 3708</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a>, 8_turns, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a> );</div>
<div class="line"><a id="l03709" name="l03709"></a><span class="lineno"> 3709</span>    }</div>
<div class="line"><a id="l03710" name="l03710"></a><span class="lineno"> 3710</span>}</div>
<div class="ttc" id="aclassmonster_html_a3690c104bd71bffc25153a86229f2a97"><div class="ttname"><a href="classmonster.html#a3690c104bd71bffc25153a86229f2a97">monster::posz</a></div><div class="ttdeci">int posz() const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00501">monster.h:501</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level DL::Error and class DC::DebugMsg, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00074">debug.h:74</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a261d438c14892c55153e1b615c548164"><div class="ttname"><a href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a></div><div class="ttdeci">field_type_id fd_fire</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00345">field_type.cpp:345</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_afcfa82c36c0dc2d76cd19d622c2b6ab4"><div class="ttname"><a href="monattack_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a></div><div class="ttdeci">static const efftype_id effect_onfire(&quot;onfire&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8cpp_source.html#l00974">Creature::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="bodypart_8h_source.html#l00040">bp_torso</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="monattack_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a>, <a class="el" href="field__type_8cpp_source.html#l00345">fd_fire</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="monster_8h_source.html#l00501">monster::posz()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, and <a class="el" href="creature_8h_source.html#l00485">Creature::uncanny_dodge()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monattack_8cpp_source.html#l03622">flamethrower()</a>, and <a class="el" href="iuse_8cpp_source.html#l03741">iuse::grenade_inc_act()</a>.</p>

</div>
</div>
<a id="a41b5ef9dd12a09c64c12e8e327443543" name="a41b5ef9dd12a09c64c12e8e327443543"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41b5ef9dd12a09c64c12e8e327443543">&#9670;&nbsp;</a></span>flamethrower()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::flamethrower </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l03622">3622</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03623" name="l03623"></a><span class="lineno"> 3623</span>{</div>
<div class="line"><a id="l03624" name="l03624"></a><span class="lineno"> 3624</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> ) {</div>
<div class="line"><a id="l03625" name="l03625"></a><span class="lineno"> 3625</span>        <span class="comment">// TODO: handle friendly monsters</span></div>
<div class="line"><a id="l03626" name="l03626"></a><span class="lineno"> 3626</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03627" name="l03627"></a><span class="lineno"> 3627</span>    }</div>
<div class="line"><a id="l03628" name="l03628"></a><span class="lineno"> 3628</span>    <span class="comment">// TODO: that is always false!</span></div>
<div class="line"><a id="l03629" name="l03629"></a><span class="lineno"> 3629</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> != 0 ) {</div>
<div class="line"><a id="l03630" name="l03630"></a><span class="lineno"> 3630</span>        <span class="comment">// Attacking monsters, not the player!</span></div>
<div class="line"><a id="l03631" name="l03631"></a><span class="lineno"> 3631</span>        <span class="keywordtype">int</span> boo_hoo;</div>
<div class="line"><a id="l03632" name="l03632"></a><span class="lineno"> 3632</span>        <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classCreature.html#abb91e1cd5610658124d40623e7e4d698">auto_find_hostile_target</a>( 5, boo_hoo );</div>
<div class="line"><a id="l03633" name="l03633"></a><span class="lineno"> 3633</span>        <span class="comment">// Couldn&#39;t find any targets!</span></div>
<div class="line"><a id="l03634" name="l03634"></a><span class="lineno"> 3634</span>        <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l03635" name="l03635"></a><span class="lineno"> 3635</span>            <span class="comment">// Because that stupid oaf was in the way!</span></div>
<div class="line"><a id="l03636" name="l03636"></a><span class="lineno"> 3636</span>            <span class="keywordflow">if</span>( boo_hoo &gt; 0 &amp;&amp; <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l03637" name="l03637"></a><span class="lineno"> 3637</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;Pointed in your direction, the %s emits an IFF warning beep.&quot;</span>,</div>
<div class="line"><a id="l03638" name="l03638"></a><span class="lineno"> 3638</span>                                              <span class="stringliteral">&quot;Pointed in your direction, the %s emits %d annoyed sounding beeps.&quot;</span>,</div>
<div class="line"><a id="l03639" name="l03639"></a><span class="lineno"> 3639</span>                                              boo_hoo ),</div>
<div class="line"><a id="l03640" name="l03640"></a><span class="lineno"> 3640</span>                         z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(), boo_hoo );</div>
<div class="line"><a id="l03641" name="l03641"></a><span class="lineno"> 3641</span>            }</div>
<div class="line"><a id="l03642" name="l03642"></a><span class="lineno"> 3642</span>            <span class="comment">// Did reset before refactor, changed to match other turret behaviors</span></div>
<div class="line"><a id="l03643" name="l03643"></a><span class="lineno"> 3643</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03644" name="l03644"></a><span class="lineno"> 3644</span>        }</div>
<div class="line"><a id="l03645" name="l03645"></a><span class="lineno"> 3645</span>        <a class="code hl_function" href="namespacemattack.html#a74c5bd8b75ec90d4af94f3fc218b3eba">flame</a>( z, target );</div>
<div class="line"><a id="l03646" name="l03646"></a><span class="lineno"> 3646</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03647" name="l03647"></a><span class="lineno"> 3647</span>    }</div>
<div class="line"><a id="l03648" name="l03648"></a><span class="lineno"> 3648</span> </div>
<div class="line"><a id="l03649" name="l03649"></a><span class="lineno"> 3649</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="monattack_8cpp.html#a34c6e57d4263c7f17f18497bf390808c">within_visual_range</a>( z, 5 ) ) {</div>
<div class="line"><a id="l03650" name="l03650"></a><span class="lineno"> 3650</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03651" name="l03651"></a><span class="lineno"> 3651</span>    }</div>
<div class="line"><a id="l03652" name="l03652"></a><span class="lineno"> 3652</span> </div>
<div class="line"><a id="l03653" name="l03653"></a><span class="lineno"> 3653</span>    <a class="code hl_function" href="namespacemattack.html#a74c5bd8b75ec90d4af94f3fc218b3eba">flame</a>( z, &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u );</div>
<div class="line"><a id="l03654" name="l03654"></a><span class="lineno"> 3654</span> </div>
<div class="line"><a id="l03655" name="l03655"></a><span class="lineno"> 3655</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03656" name="l03656"></a><span class="lineno"> 3656</span>}</div>
<div class="ttc" id="anamespacemattack_html_a74c5bd8b75ec90d4af94f3fc218b3eba"><div class="ttname"><a href="namespacemattack.html#a74c5bd8b75ec90d4af94f3fc218b3eba">mattack::flame</a></div><div class="ttdeci">void flame(monster *z, Creature *target)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l03658">monattack.cpp:3658</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="creature_8cpp_source.html#l00330">Creature::auto_find_hostile_target()</a>, <a class="el" href="monattack_8cpp_source.html#l03658">flame()</a>, <a class="el" href="monster_8h_source.html#l00471">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="translations_8cpp_source.html#l00036">vgettext()</a>, and <a class="el" href="monattack_8cpp_source.html#l00209">within_visual_range()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="ae1ac5174919232955b012d2ee0647b1a" name="ae1ac5174919232955b012d2ee0647b1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1ac5174919232955b012d2ee0647b1a">&#9670;&nbsp;</a></span>flesh_golem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::flesh_golem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l04141">4141</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04142" name="l04142"></a><span class="lineno"> 4142</span>{</div>
<div class="line"><a id="l04143" name="l04143"></a><span class="lineno"> 4143</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classmonster.html#a0f83a7ee7bd8d96efc80200c5a5caf5b">can_act</a>() ) {</div>
<div class="line"><a id="l04144" name="l04144"></a><span class="lineno"> 4144</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04145" name="l04145"></a><span class="lineno"> 4145</span>    }</div>
<div class="line"><a id="l04146" name="l04146"></a><span class="lineno"> 4146</span> </div>
<div class="line"><a id="l04147" name="l04147"></a><span class="lineno"> 4147</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l04148" name="l04148"></a><span class="lineno"> 4148</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l04149" name="l04149"></a><span class="lineno"> 4149</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04150" name="l04150"></a><span class="lineno"> 4150</span>    }</div>
<div class="line"><a id="l04151" name="l04151"></a><span class="lineno"> 4151</span> </div>
<div class="line"><a id="l04152" name="l04152"></a><span class="lineno"> 4152</span>    <span class="keywordtype">int</span> dist = <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() );</div>
<div class="line"><a id="l04153" name="l04153"></a><span class="lineno"> 4153</span>    <span class="keywordflow">if</span>( dist &gt; 20 ||</div>
<div class="line"><a id="l04154" name="l04154"></a><span class="lineno"> 4154</span>        !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l04155" name="l04155"></a><span class="lineno"> 4155</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04156" name="l04156"></a><span class="lineno"> 4156</span>    }</div>
<div class="line"><a id="l04157" name="l04157"></a><span class="lineno"> 4157</span> </div>
<div class="line"><a id="l04158" name="l04158"></a><span class="lineno"> 4158</span>    <span class="keywordflow">if</span>( dist &gt; 1 ) {</div>
<div class="line"><a id="l04159" name="l04159"></a><span class="lineno"> 4159</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 12 ) ) {</div>
<div class="line"><a id="l04160" name="l04160"></a><span class="lineno"> 4160</span>            z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 200;</div>
<div class="line"><a id="l04161" name="l04161"></a><span class="lineno"> 4161</span>            <span class="comment">// It doesn&#39;t &quot;nearly deafen you&quot; when it roars from the other side of bubble</span></div>
<div class="line"><a id="l04162" name="l04162"></a><span class="lineno"> 4162</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 80, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f">sounds::sound_t::alert</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;a terrifying roar!&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;shout&quot;</span>,</div>
<div class="line"><a id="l04163" name="l04163"></a><span class="lineno"> 4163</span>                           <span class="stringliteral">&quot;roar&quot;</span> );</div>
<div class="line"><a id="l04164" name="l04164"></a><span class="lineno"> 4164</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04165" name="l04165"></a><span class="lineno"> 4165</span>        }</div>
<div class="line"><a id="l04166" name="l04166"></a><span class="lineno"> 4166</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04167" name="l04167"></a><span class="lineno"> 4167</span>    }</div>
<div class="line"><a id="l04168" name="l04168"></a><span class="lineno"> 4168</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="monattack_8cpp.html#abf0d71b531a799a8eb3fd58a846064db">is_adjacent</a>( z, target, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l04169" name="l04169"></a><span class="lineno"> 4169</span>        <span class="comment">// No attacking through floor, even if we can see the target somehow</span></div>
<div class="line"><a id="l04170" name="l04170"></a><span class="lineno"> 4170</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04171" name="l04171"></a><span class="lineno"> 4171</span>    }</div>
<div class="line"><a id="l04172" name="l04172"></a><span class="lineno"> 4172</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l04173" name="l04173"></a><span class="lineno"> 4173</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s swings a massive claw at %2$s!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l04174" name="l04174"></a><span class="lineno"> 4174</span>                 target-&gt;<a class="code hl_function" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">disp_name</a>() );</div>
<div class="line"><a id="l04175" name="l04175"></a><span class="lineno"> 4175</span>    }</div>
<div class="line"><a id="l04176" name="l04176"></a><span class="lineno"> 4176</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 100;</div>
<div class="line"><a id="l04177" name="l04177"></a><span class="lineno"> 4177</span> </div>
<div class="line"><a id="l04178" name="l04178"></a><span class="lineno"> 4178</span>    <span class="keywordflow">if</span>( target-&gt;<a class="code hl_function" href="classCreature.html#afd2f1b1e5bafdef20afddbb704b1d5a5">uncanny_dodge</a>() ) {</div>
<div class="line"><a id="l04179" name="l04179"></a><span class="lineno"> 4179</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04180" name="l04180"></a><span class="lineno"> 4180</span>    }</div>
<div class="line"><a id="l04181" name="l04181"></a><span class="lineno"> 4181</span> </div>
<div class="line"><a id="l04182" name="l04182"></a><span class="lineno"> 4182</span>    <span class="comment">// Can we dodge the attack? Uses player dodge function % chance (melee.cpp)</span></div>
<div class="line"><a id="l04183" name="l04183"></a><span class="lineno"> 4183</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacemattack.html#a4efb8be314551e35f69df8cf8d824174">dodge_check</a>( z, target ) ) {</div>
<div class="line"><a id="l04184" name="l04184"></a><span class="lineno"> 4184</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You dodge it!&quot;</span> ),</div>
<div class="line"><a id="l04185" name="l04185"></a><span class="lineno"> 4185</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; dodges it!&quot;</span> ) );</div>
<div class="line"><a id="l04186" name="l04186"></a><span class="lineno"> 4186</span>        target-&gt;<a class="code hl_function" href="classCreature.html#af56188882e3300853d18f166738ee37a">on_dodge</a>( z, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> * 2 );</div>
<div class="line"><a id="l04187" name="l04187"></a><span class="lineno"> 4187</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04188" name="l04188"></a><span class="lineno"> 4188</span>    }</div>
<div class="line"><a id="l04189" name="l04189"></a><span class="lineno"> 4189</span>    <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">bodypart_id</a> hit = target-&gt;<a class="code hl_function" href="classCreature.html#a51c96c81ae1ea766b5eead4a265c1492">get_random_body_part</a>();</div>
<div class="line"><a id="l04190" name="l04190"></a><span class="lineno"> 4190</span>    <span class="comment">// TODO: 10 bashing damage doesn&#39;t sound like a &quot;massive claw&quot; but a mediocre punch</span></div>
<div class="line"><a id="l04191" name="l04191"></a><span class="lineno"> 4191</span>    <span class="keywordtype">int</span> dam = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 5, 10 );</div>
<div class="line"><a id="l04192" name="l04192"></a><span class="lineno"> 4192</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a75ad96eb6ce27d3c1df250965b4de7b5">deal_damage</a>( z, hit, <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa5f8b46c6c239266403858fa2ae90ef23">DT_BASH</a>, dam ) );</div>
<div class="line"><a id="l04193" name="l04193"></a><span class="lineno"> 4193</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 6 ) ) {</div>
<div class="line"><a id="l04194" name="l04194"></a><span class="lineno"> 4194</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a>, 3_minutes );</div>
<div class="line"><a id="l04195" name="l04195"></a><span class="lineno"> 4195</span>    }</div>
<div class="line"><a id="l04196" name="l04196"></a><span class="lineno"> 4196</span> </div>
<div class="line"><a id="l04197" name="l04197"></a><span class="lineno"> 4197</span>    <span class="comment">//~ 1$s is bodypart name, 2$d is damage value.</span></div>
<div class="line"><a id="l04198" name="l04198"></a><span class="lineno"> 4198</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your %1$s is battered for %2$d damage!&quot;</span> ),</div>
<div class="line"><a id="l04199" name="l04199"></a><span class="lineno"> 4199</span>                               <a class="code hl_function" href="bodypart_8cpp.html#a6c9ef5f15f73c82d39d205d56a560672">body_part_name</a>( hit-&gt;token ), dam );</div>
<div class="line"><a id="l04200" name="l04200"></a><span class="lineno"> 4200</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">on_hit</a>( z, hit,  z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> );</div>
<div class="line"><a id="l04201" name="l04201"></a><span class="lineno"> 4201</span> </div>
<div class="line"><a id="l04202" name="l04202"></a><span class="lineno"> 4202</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04203" name="l04203"></a><span class="lineno"> 4203</span>}</div>
<div class="ttc" id="abodypart_8cpp_html_a6c9ef5f15f73c82d39d205d56a560672"><div class="ttname"><a href="bodypart_8cpp.html#a6c9ef5f15f73c82d39d205d56a560672">body_part_name</a></div><div class="ttdeci">std::string body_part_name(body_part bp, int number)</div><div class="ttdoc">Returns the matching name of the body_part token.</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8cpp_source.html#l00317">bodypart.cpp:317</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8cpp_source.html#l00974">Creature::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="creature_8h_source.html#l00593">Creature::add_msg_if_player()</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f">sounds::alert</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="bodypart_8cpp_source.html#l00317">body_part_name()</a>, <a class="el" href="monster_8cpp_source.html#l00931">monster::can_act()</a>, <a class="el" href="creature_8cpp_source.html#l00873">Creature::deal_damage()</a>, <a class="el" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">Creature::disp_name()</a>, <a class="el" href="monattack_8cpp_source.html#l05764">dodge_check()</a>, <a class="el" href="damage_8h_source.html#l00024">DT_BASH</a>, <a class="el" href="monattack_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8cpp_source.html#l01614">Creature::get_random_body_part()</a>, <a class="el" href="monattack_8cpp_source.html#l00275">is_adjacent()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="mtype_8h_source.html#l00285">mtype::melee_skill</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="classCreature.html#af56188882e3300853d18f166738ee37a">Creature::on_dodge()</a>, <a class="el" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">Creature::on_hit()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, and <a class="el" href="creature_8h_source.html#l00485">Creature::uncanny_dodge()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="af642e98f1e7accbbf605a5d6b082f293" name="af642e98f1e7accbbf605a5d6b082f293"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af642e98f1e7accbbf605a5d6b082f293">&#9670;&nbsp;</a></span>flesh_tendril()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::flesh_tendril </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l04999">4999</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05000" name="l05000"></a><span class="lineno"> 5000</span>{</div>
<div class="line"><a id="l05001" name="l05001"></a><span class="lineno"> 5001</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l05002" name="l05002"></a><span class="lineno"> 5002</span> </div>
<div class="line"><a id="l05003" name="l05003"></a><span class="lineno"> 5003</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> || !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l05004" name="l05004"></a><span class="lineno"> 5004</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 70 ) ) {</div>
<div class="line"><a id="l05005" name="l05005"></a><span class="lineno"> 5005</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The floor trembles underneath your feet.&quot;</span> ) );</div>
<div class="line"><a id="l05006" name="l05006"></a><span class="lineno"> 5006</span>            z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 200;</div>
<div class="line"><a id="l05007" name="l05007"></a><span class="lineno"> 5007</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 60, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f">sounds::sound_t::alert</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;a deafening roar!&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;shout&quot;</span>,</div>
<div class="line"><a id="l05008" name="l05008"></a><span class="lineno"> 5008</span>                           <span class="stringliteral">&quot;roar&quot;</span> );</div>
<div class="line"><a id="l05009" name="l05009"></a><span class="lineno"> 5009</span>        }</div>
<div class="line"><a id="l05010" name="l05010"></a><span class="lineno"> 5010</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05011" name="l05011"></a><span class="lineno"> 5011</span>    }</div>
<div class="line"><a id="l05012" name="l05012"></a><span class="lineno"> 5012</span> </div>
<div class="line"><a id="l05013" name="l05013"></a><span class="lineno"> 5013</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> distance_to_target = <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() );</div>
<div class="line"><a id="l05014" name="l05014"></a><span class="lineno"> 5014</span> </div>
<div class="line"><a id="l05015" name="l05015"></a><span class="lineno"> 5015</span>    <span class="comment">// the monster summons stuff to fight you</span></div>
<div class="line"><a id="l05016" name="l05016"></a><span class="lineno"> 5016</span>    <span class="keywordflow">if</span>( distance_to_target &gt; 3 &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 12 ) ) {</div>
<div class="line"><a id="l05017" name="l05017"></a><span class="lineno"> 5017</span>        <a class="code hl_class" href="classstring__id.html">mtype_id</a> spawned = <a class="code hl_variable" href="monattack_8cpp.html#a1c35e5b87ce0e02549f861b6554995ba">mon_zombie_gasbag_crawler</a>;</div>
<div class="line"><a id="l05018" name="l05018"></a><span class="lineno"> 5018</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) ) {</div>
<div class="line"><a id="l05019" name="l05019"></a><span class="lineno"> 5019</span>            spawned = <a class="code hl_variable" href="monattack_8cpp.html#adc257fa0675d5651184a423eed6b8b51">mon_zombie_gasbag_impaler</a>;</div>
<div class="line"><a id="l05020" name="l05020"></a><span class="lineno"> 5020</span>        }</div>
<div class="line"><a id="l05021" name="l05021"></a><span class="lineno"> 5021</span>        <span class="keywordflow">if</span>( <a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">const</span> summoned = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_around( spawned, z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 1 ) ) {</div>
<div class="line"><a id="l05022" name="l05022"></a><span class="lineno"> 5022</span>            z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 100;</div>
<div class="line"><a id="l05023" name="l05023"></a><span class="lineno"> 5023</span>            summoned-&gt;make_ally( *z );</div>
<div class="line"><a id="l05024" name="l05024"></a><span class="lineno"> 5024</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.propagate_field( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), <a class="code hl_variable" href="field__type_8cpp.html#af4968b2ecec49cf31e31fe19392a1713">fd_gibs_flesh</a>, 75, 1 );</div>
<div class="line"><a id="l05025" name="l05025"></a><span class="lineno"> 5025</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l05026" name="l05026"></a><span class="lineno"> 5026</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A %s struggles to pull itself free from the %s!&quot;</span> ), summoned-&gt;name(),</div>
<div class="line"><a id="l05027" name="l05027"></a><span class="lineno"> 5027</span>                         z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l05028" name="l05028"></a><span class="lineno"> 5028</span>            }</div>
<div class="line"><a id="l05029" name="l05029"></a><span class="lineno"> 5029</span>        }</div>
<div class="line"><a id="l05030" name="l05030"></a><span class="lineno"> 5030</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05031" name="l05031"></a><span class="lineno"> 5031</span>    }</div>
<div class="line"><a id="l05032" name="l05032"></a><span class="lineno"> 5032</span> </div>
<div class="line"><a id="l05033" name="l05033"></a><span class="lineno"> 5033</span>    <span class="keywordflow">if</span>( ( distance_to_target == 2 || distance_to_target == 3 ) &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a id="l05034" name="l05034"></a><span class="lineno"> 5034</span>        <span class="comment">//it pulls you towards itself and then knocks you away</span></div>
<div class="line"><a id="l05035" name="l05035"></a><span class="lineno"> 5035</span>        <span class="keywordtype">bool</span> pulled = <a class="code hl_function" href="namespacemattack.html#abb65fd810cb5537ece604f93e297950b">ranged_pull</a>( z );</div>
<div class="line"><a id="l05036" name="l05036"></a><span class="lineno"> 5036</span>        <span class="keywordflow">if</span>( pulled &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a id="l05037" name="l05037"></a><span class="lineno"> 5037</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 60, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;a deafening roar!&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;shout&quot;</span>,</div>
<div class="line"><a id="l05038" name="l05038"></a><span class="lineno"> 5038</span>                           <span class="stringliteral">&quot;roar&quot;</span> );</div>
<div class="line"><a id="l05039" name="l05039"></a><span class="lineno"> 5039</span>        }</div>
<div class="line"><a id="l05040" name="l05040"></a><span class="lineno"> 5040</span>        <span class="keywordflow">return</span> pulled;</div>
<div class="line"><a id="l05041" name="l05041"></a><span class="lineno"> 5041</span>    }</div>
<div class="line"><a id="l05042" name="l05042"></a><span class="lineno"> 5042</span> </div>
<div class="line"><a id="l05043" name="l05043"></a><span class="lineno"> 5043</span>    <span class="keywordflow">if</span>( distance_to_target &lt;= 1 ) {</div>
<div class="line"><a id="l05044" name="l05044"></a><span class="lineno"> 5044</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 8 ) ) {</div>
<div class="line"><a id="l05045" name="l05045"></a><span class="lineno"> 5045</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;fling_creature( target, <a class="code hl_function" href="line_8cpp.html#a22f984836636053038f43340f9c50149">coord_to_angle</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() ),</div>
<div class="line"><a id="l05046" name="l05046"></a><span class="lineno"> 5046</span>                               z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#af346fa78fe3bff4e8e321e9046bc9717">melee_sides</a> * z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a561d4830d7f7c613c177f5880c2e15fb">melee_dice</a> * 3 );</div>
<div class="line"><a id="l05047" name="l05047"></a><span class="lineno"> 5047</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05048" name="l05048"></a><span class="lineno"> 5048</span>            <a class="code hl_function" href="handle__action_8cpp.html#adad5435d6c5b95d6e491750b1abead4e">grab</a>( z );</div>
<div class="line"><a id="l05049" name="l05049"></a><span class="lineno"> 5049</span>        }</div>
<div class="line"><a id="l05050" name="l05050"></a><span class="lineno"> 5050</span>    }</div>
<div class="line"><a id="l05051" name="l05051"></a><span class="lineno"> 5051</span> </div>
<div class="line"><a id="l05052" name="l05052"></a><span class="lineno"> 5052</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05053" name="l05053"></a><span class="lineno"> 5053</span>}</div>
<div class="ttc" id="afield__type_8cpp_html_af4968b2ecec49cf31e31fe19392a1713"><div class="ttname"><a href="field__type_8cpp.html#af4968b2ecec49cf31e31fe19392a1713">fd_gibs_flesh</a></div><div class="ttdeci">field_type_id fd_gibs_flesh</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00338">field_type.cpp:338</a></div></div>
<div class="ttc" id="ahandle__action_8cpp_html_adad5435d6c5b95d6e491750b1abead4e"><div class="ttname"><a href="handle__action_8cpp.html#adad5435d6c5b95d6e491750b1abead4e">grab</a></div><div class="ttdeci">static void grab()</div><div class="ttdef"><b>Definition:</b> <a href="handle__action_8cpp_source.html#l00599">handle_action.cpp:599</a></div></div>
<div class="ttc" id="aline_8cpp_html_a22f984836636053038f43340f9c50149"><div class="ttname"><a href="line_8cpp.html#a22f984836636053038f43340f9c50149">coord_to_angle</a></div><div class="ttdeci">units::angle coord_to_angle(const tripoint &amp;a, const tripoint &amp;b)</div><div class="ttdoc">Calculates the horizontal angle between the lines from (0,0,0) to a and the line from (0,...</div><div class="ttdef"><b>Definition:</b> <a href="line_8cpp_source.html#l00781">line.cpp:781</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a1c35e5b87ce0e02549f861b6554995ba"><div class="ttname"><a href="monattack_8cpp.html#a1c35e5b87ce0e02549f861b6554995ba">mon_zombie_gasbag_crawler</a></div><div class="ttdeci">static const mtype_id mon_zombie_gasbag_crawler(&quot;mon_zombie_gasbag_crawler&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_adc257fa0675d5651184a423eed6b8b51"><div class="ttname"><a href="monattack_8cpp.html#adc257fa0675d5651184a423eed6b8b51">mon_zombie_gasbag_impaler</a></div><div class="ttdeci">static const mtype_id mon_zombie_gasbag_impaler(&quot;mon_zombie_gasbag_impaler&quot;)</div></div>
<div class="ttc" id="anamespacemattack_html_abb65fd810cb5537ece604f93e297950b"><div class="ttname"><a href="namespacemattack.html#abb65fd810cb5537ece604f93e297950b">mattack::ranged_pull</a></div><div class="ttdeci">bool ranged_pull(monster *z)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l02555">monattack.cpp:2555</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::alarm</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f">sounds::alert</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="line_8cpp_source.html#l00781">coord_to_angle()</a>, <a class="el" href="field__type_8cpp_source.html#l00338">fd_gibs_flesh</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="handle__action_8cpp_source.html#l00599">grab()</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="mtype_8h_source.html#l00286">mtype::melee_dice</a>, <a class="el" href="mtype_8h_source.html#l00287">mtype::melee_sides</a>, <a class="el" href="monattack_8cpp.html#a1c35e5b87ce0e02549f861b6554995ba">mon_zombie_gasbag_crawler</a>, <a class="el" href="monattack_8cpp.html#adc257fa0675d5651184a423eed6b8b51">mon_zombie_gasbag_impaler</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="monattack_8cpp_source.html#l02555">ranged_pull()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, and <a class="el" href="monster_8h_source.html#l00478">monster::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a001511fcd78df459a0e8bd32315f017f" name="a001511fcd78df459a0e8bd32315f017f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a001511fcd78df459a0e8bd32315f017f">&#9670;&nbsp;</a></span>formblob()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::formblob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l02274">2274</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02275" name="l02275"></a><span class="lineno"> 2275</span>{</div>
<div class="line"><a id="l02276" name="l02276"></a><span class="lineno"> 2276</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> ) {</div>
<div class="line"><a id="l02277" name="l02277"></a><span class="lineno"> 2277</span>        <span class="comment">// TODO: handle friendly monsters</span></div>
<div class="line"><a id="l02278" name="l02278"></a><span class="lineno"> 2278</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02279" name="l02279"></a><span class="lineno"> 2279</span>    }</div>
<div class="line"><a id="l02280" name="l02280"></a><span class="lineno"> 2280</span> </div>
<div class="line"><a id="l02281" name="l02281"></a><span class="lineno"> 2281</span>    <span class="keywordtype">bool</span> didit = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02282" name="l02282"></a><span class="lineno"> 2282</span>    std::vector&lt;tripoint&gt; pts = <a class="code hl_function" href="coordinates_8h.html#a13a12943d34d5f17e6c3b4e730659fc6">closest_points_first</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 1 );</div>
<div class="line"><a id="l02283" name="l02283"></a><span class="lineno"> 2283</span>    <span class="comment">// Don&#39;t check own tile</span></div>
<div class="line"><a id="l02284" name="l02284"></a><span class="lineno"> 2284</span>    pts.erase( pts.begin() );</div>
<div class="line"><a id="l02285" name="l02285"></a><span class="lineno"> 2285</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;dest : pts ) {</div>
<div class="line"><a id="l02286" name="l02286"></a><span class="lineno"> 2286</span>        <a class="code hl_class" href="classCreature.html">Creature</a> *critter = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at( dest );</div>
<div class="line"><a id="l02287" name="l02287"></a><span class="lineno"> 2287</span>        <span class="keywordflow">if</span>( critter == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l02288" name="l02288"></a><span class="lineno"> 2288</span>            <span class="keywordflow">if</span>( z-&gt;<a class="code hl_function" href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">get_speed_base</a>() &gt; 85 &amp;&amp; <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 250 ) &lt; z-&gt;<a class="code hl_function" href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">get_speed_base</a>() ) {</div>
<div class="line"><a id="l02289" name="l02289"></a><span class="lineno"> 2289</span>                <span class="comment">// If we&#39;re big enough, spawn a baby blob.</span></div>
<div class="line"><a id="l02290" name="l02290"></a><span class="lineno"> 2290</span>                didit = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02291" name="l02291"></a><span class="lineno"> 2291</span>                z-&gt;<a class="code hl_function" href="classCreature.html#afedb5874d4d3438d3c82cb2104ec49fa">set_speed_base</a>( z-&gt;<a class="code hl_function" href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">get_speed_base</a>() - 15 );</div>
<div class="line"><a id="l02292" name="l02292"></a><span class="lineno"> 2292</span>                <span class="keywordflow">if</span>( <a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">const</span> blob = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_at( <a class="code hl_variable" href="monattack_8cpp.html#a96b8333a5c99eec3461bf502b864204b">mon_blob_small</a>, dest ) ) {</div>
<div class="line"><a id="l02293" name="l02293"></a><span class="lineno"> 2293</span>                    blob-&gt;make_ally( *z );</div>
<div class="line"><a id="l02294" name="l02294"></a><span class="lineno"> 2294</span>                }</div>
<div class="line"><a id="l02295" name="l02295"></a><span class="lineno"> 2295</span> </div>
<div class="line"><a id="l02296" name="l02296"></a><span class="lineno"> 2296</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02297" name="l02297"></a><span class="lineno"> 2297</span>            }</div>
<div class="line"><a id="l02298" name="l02298"></a><span class="lineno"> 2298</span> </div>
<div class="line"><a id="l02299" name="l02299"></a><span class="lineno"> 2299</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02300" name="l02300"></a><span class="lineno"> 2300</span>        }</div>
<div class="line"><a id="l02301" name="l02301"></a><span class="lineno"> 2301</span> </div>
<div class="line"><a id="l02302" name="l02302"></a><span class="lineno"> 2302</span>        <span class="keywordflow">if</span>( critter-&gt;<a class="code hl_function" href="classCreature.html#a1217a190a2e561227e831a72d4a6d390">is_player</a>() || critter-&gt;<a class="code hl_function" href="classCreature.html#aed84fe52e1335d48d53f482f8a278c87">is_npc</a>() ) {</div>
<div class="line"><a id="l02303" name="l02303"></a><span class="lineno"> 2303</span>            <span class="comment">// If we hit the player or some NPC, cover them with slime</span></div>
<div class="line"><a id="l02304" name="l02304"></a><span class="lineno"> 2304</span>            didit = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02305" name="l02305"></a><span class="lineno"> 2305</span>            <span class="comment">// TODO: Add some sort of a resistance/dodge roll</span></div>
<div class="line"><a id="l02306" name="l02306"></a><span class="lineno"> 2306</span>            critter-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#af021f5736261db03cad28a0d64c9ec2b">effect_slimed</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0_turns, 1_turns * z-&gt;<a class="code hl_function" href="classmonster.html#a2d0e466b9d25796cd99402ddd5d3ce20">get_hp</a>() ) );</div>
<div class="line"><a id="l02307" name="l02307"></a><span class="lineno"> 2307</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02308" name="l02308"></a><span class="lineno"> 2308</span>        }</div>
<div class="line"><a id="l02309" name="l02309"></a><span class="lineno"> 2309</span> </div>
<div class="line"><a id="l02310" name="l02310"></a><span class="lineno"> 2310</span>        <a class="code hl_class" href="classmonster.html">monster</a> &amp;othermon = *( <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">&gt;</span>( critter ) );</div>
<div class="line"><a id="l02311" name="l02311"></a><span class="lineno"> 2311</span>        <span class="comment">// Hit a monster.  If it&#39;s a blob, give it our speed.  Otherwise, blobify it?</span></div>
<div class="line"><a id="l02312" name="l02312"></a><span class="lineno"> 2312</span>        <span class="keywordflow">if</span>( z-&gt;<a class="code hl_function" href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">get_speed_base</a>() &gt; 40 &amp;&amp; othermon.<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_function" href="structmtype.html#a51ec342d71717bb513f0158198b12840">in_species</a>( <a class="code hl_variable" href="monattack_8cpp.html#a1ce9db8f1e355ba884db835013d78b41">species_BLOB</a> ) ) {</div>
<div class="line"><a id="l02313" name="l02313"></a><span class="lineno"> 2313</span>            <span class="keywordflow">if</span>( othermon.<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a> == <a class="code hl_variable" href="monattack_8cpp.html#a039c3acd23099e1631feefe7748f49ac">mon_blob_brain</a> ) {</div>
<div class="line"><a id="l02314" name="l02314"></a><span class="lineno"> 2314</span>                <span class="comment">// Brain blobs don&#39;t get sped up, they heal at the cost of the other blob.</span></div>
<div class="line"><a id="l02315" name="l02315"></a><span class="lineno"> 2315</span>                <span class="comment">// But only if they are hurt badly.</span></div>
<div class="line"><a id="l02316" name="l02316"></a><span class="lineno"> 2316</span>                <span class="keywordflow">if</span>( othermon.<a class="code hl_function" href="classmonster.html#a2d0e466b9d25796cd99402ddd5d3ce20">get_hp</a>() &lt; othermon.<a class="code hl_function" href="classmonster.html#a551f4a380282f8ec082c74f410c397de">get_hp_max</a>() / 2 ) {</div>
<div class="line"><a id="l02317" name="l02317"></a><span class="lineno"> 2317</span>                    othermon.<a class="code hl_function" href="classmonster.html#af7763c0da8025aea231a29272f25d5fc">heal</a>( z-&gt;<a class="code hl_function" href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">get_speed_base</a>(), true );</div>
<div class="line"><a id="l02318" name="l02318"></a><span class="lineno"> 2318</span>                    z-&gt;<a class="code hl_function" href="classmonster.html#a98c421c82c34706735f13afe25ea7f1f">set_hp</a>( 0 );</div>
<div class="line"><a id="l02319" name="l02319"></a><span class="lineno"> 2319</span>                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02320" name="l02320"></a><span class="lineno"> 2320</span>                }</div>
<div class="line"><a id="l02321" name="l02321"></a><span class="lineno"> 2321</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02322" name="l02322"></a><span class="lineno"> 2322</span>            }</div>
<div class="line"><a id="l02323" name="l02323"></a><span class="lineno"> 2323</span>            didit = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02324" name="l02324"></a><span class="lineno"> 2324</span>            othermon.<a class="code hl_function" href="classCreature.html#afedb5874d4d3438d3c82cb2104ec49fa">set_speed_base</a>( othermon.<a class="code hl_function" href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">get_speed_base</a>() + 5 );</div>
<div class="line"><a id="l02325" name="l02325"></a><span class="lineno"> 2325</span>            z-&gt;<a class="code hl_function" href="classCreature.html#afedb5874d4d3438d3c82cb2104ec49fa">set_speed_base</a>( z-&gt;<a class="code hl_function" href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">get_speed_base</a>() - 5 );</div>
<div class="line"><a id="l02326" name="l02326"></a><span class="lineno"> 2326</span>            <span class="keywordflow">if</span>( othermon.<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a> == <a class="code hl_variable" href="monattack_8cpp.html#a96b8333a5c99eec3461bf502b864204b">mon_blob_small</a> &amp;&amp; othermon.<a class="code hl_function" href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">get_speed_base</a>() &gt;= 60 ) {</div>
<div class="line"><a id="l02327" name="l02327"></a><span class="lineno"> 2327</span>                <a class="code hl_function" href="monattack_8cpp.html#a56f18a86263588ccac54657fd6d404a4">poly_keep_speed</a>( othermon, <a class="code hl_variable" href="monattack_8cpp.html#aa38c932036191fc88554990d16a891a2">mon_blob</a> );</div>
<div class="line"><a id="l02328" name="l02328"></a><span class="lineno"> 2328</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( othermon.<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a> == <a class="code hl_variable" href="monattack_8cpp.html#aa38c932036191fc88554990d16a891a2">mon_blob</a> &amp;&amp; othermon.<a class="code hl_function" href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">get_speed_base</a>() &gt;= 80 ) {</div>
<div class="line"><a id="l02329" name="l02329"></a><span class="lineno"> 2329</span>                <a class="code hl_function" href="monattack_8cpp.html#a56f18a86263588ccac54657fd6d404a4">poly_keep_speed</a>( othermon, <a class="code hl_variable" href="monattack_8cpp.html#ae9a6c4625d63003c1d0964079059efa1">mon_blob_large</a> );</div>
<div class="line"><a id="l02330" name="l02330"></a><span class="lineno"> 2330</span>            }</div>
<div class="line"><a id="l02331" name="l02331"></a><span class="lineno"> 2331</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ( othermon.<a class="code hl_function" href="classmonster.html#a6e03e18c6ea5e5adb496634b2bbaea52">made_of</a>( <a class="code hl_class" href="classstring__id.html">material_id</a>( <span class="stringliteral">&quot;flesh&quot;</span> ) ) ||</div>
<div class="line"><a id="l02332" name="l02332"></a><span class="lineno"> 2332</span>                     othermon.<a class="code hl_function" href="classmonster.html#a6e03e18c6ea5e5adb496634b2bbaea52">made_of</a>( <a class="code hl_class" href="classstring__id.html">material_id</a>( <span class="stringliteral">&quot;veggy&quot;</span> ) ) ||</div>
<div class="line"><a id="l02333" name="l02333"></a><span class="lineno"> 2333</span>                     othermon.<a class="code hl_function" href="classmonster.html#a6e03e18c6ea5e5adb496634b2bbaea52">made_of</a>( <a class="code hl_class" href="classstring__id.html">material_id</a>( <span class="stringliteral">&quot;iflesh&quot;</span> ) ) ) &amp;&amp;</div>
<div class="line"><a id="l02334" name="l02334"></a><span class="lineno"> 2334</span>                   <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, z-&gt;<a class="code hl_function" href="classmonster.html#a2d0e466b9d25796cd99402ddd5d3ce20">get_hp</a>() ) &gt; <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( othermon.<a class="code hl_function" href="classmonster.html#a2d0e466b9d25796cd99402ddd5d3ce20">get_hp</a>() / 2, othermon.<a class="code hl_function" href="classmonster.html#a2d0e466b9d25796cd99402ddd5d3ce20">get_hp</a>() ) ) {</div>
<div class="line"><a id="l02335" name="l02335"></a><span class="lineno"> 2335</span>            didit = <a class="code hl_function" href="monattack_8cpp.html#a8cf6770a8414cda450c55b1d640084c4">blobify</a>( *z, othermon );</div>
<div class="line"><a id="l02336" name="l02336"></a><span class="lineno"> 2336</span>        }</div>
<div class="line"><a id="l02337" name="l02337"></a><span class="lineno"> 2337</span>    }</div>
<div class="line"><a id="l02338" name="l02338"></a><span class="lineno"> 2338</span> </div>
<div class="line"><a id="l02339" name="l02339"></a><span class="lineno"> 2339</span>    <span class="keywordflow">if</span>( didit ) { <span class="comment">// We did SOMEthing.</span></div>
<div class="line"><a id="l02340" name="l02340"></a><span class="lineno"> 2340</span>        <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a> == <a class="code hl_variable" href="monattack_8cpp.html#aa38c932036191fc88554990d16a891a2">mon_blob</a> &amp;&amp; z-&gt;<a class="code hl_function" href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">get_speed_base</a>() &lt;= 50 ) {</div>
<div class="line"><a id="l02341" name="l02341"></a><span class="lineno"> 2341</span>            <span class="comment">// We shrank!</span></div>
<div class="line"><a id="l02342" name="l02342"></a><span class="lineno"> 2342</span>            <a class="code hl_function" href="monattack_8cpp.html#a56f18a86263588ccac54657fd6d404a4">poly_keep_speed</a>( *z, <a class="code hl_variable" href="monattack_8cpp.html#a96b8333a5c99eec3461bf502b864204b">mon_blob_small</a> );</div>
<div class="line"><a id="l02343" name="l02343"></a><span class="lineno"> 2343</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a> == <a class="code hl_variable" href="monattack_8cpp.html#ae9a6c4625d63003c1d0964079059efa1">mon_blob_large</a> &amp;&amp; z-&gt;<a class="code hl_function" href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">get_speed_base</a>() &lt;= 70 ) {</div>
<div class="line"><a id="l02344" name="l02344"></a><span class="lineno"> 2344</span>            <span class="comment">// We shrank!</span></div>
<div class="line"><a id="l02345" name="l02345"></a><span class="lineno"> 2345</span>            <a class="code hl_function" href="monattack_8cpp.html#a56f18a86263588ccac54657fd6d404a4">poly_keep_speed</a>( *z, <a class="code hl_variable" href="monattack_8cpp.html#aa38c932036191fc88554990d16a891a2">mon_blob</a> );</div>
<div class="line"><a id="l02346" name="l02346"></a><span class="lineno"> 2346</span>        }</div>
<div class="line"><a id="l02347" name="l02347"></a><span class="lineno"> 2347</span> </div>
<div class="line"><a id="l02348" name="l02348"></a><span class="lineno"> 2348</span>        z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> = 0;</div>
<div class="line"><a id="l02349" name="l02349"></a><span class="lineno"> 2349</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02350" name="l02350"></a><span class="lineno"> 2350</span>    }</div>
<div class="line"><a id="l02351" name="l02351"></a><span class="lineno"> 2351</span> </div>
<div class="line"><a id="l02352" name="l02352"></a><span class="lineno"> 2352</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// consider returning false to try again immediately if nothing happened?</span></div>
<div class="line"><a id="l02353" name="l02353"></a><span class="lineno"> 2353</span>}</div>
<div class="ttc" id="aclassCreature_html_a1217a190a2e561227e831a72d4a6d390"><div class="ttname"><a href="classCreature.html#a1217a190a2e561227e831a72d4a6d390">Creature::is_player</a></div><div class="ttdeci">virtual bool is_player() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00092">creature.h:92</a></div></div>
<div class="ttc" id="aclassCreature_html_acfac03f5782f8ea53e1efcb5321ead1b"><div class="ttname"><a href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">Creature::get_speed_base</a></div><div class="ttdeci">virtual int get_speed_base() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01668">creature.cpp:1668</a></div></div>
<div class="ttc" id="aclassCreature_html_aed84fe52e1335d48d53f482f8a278c87"><div class="ttname"><a href="classCreature.html#aed84fe52e1335d48d53f482f8a278c87">Creature::is_npc</a></div><div class="ttdeci">virtual bool is_npc() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00098">creature.h:98</a></div></div>
<div class="ttc" id="aclassCreature_html_afedb5874d4d3438d3c82cb2104ec49fa"><div class="ttname"><a href="classCreature.html#afedb5874d4d3438d3c82cb2104ec49fa">Creature::set_speed_base</a></div><div class="ttdeci">virtual void set_speed_base(int nspeed)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01730">creature.cpp:1730</a></div></div>
<div class="ttc" id="aclassmonster_html_a6e03e18c6ea5e5adb496634b2bbaea52"><div class="ttname"><a href="classmonster.html#a6e03e18c6ea5e5adb496634b2bbaea52">monster::made_of</a></div><div class="ttdeci">bool made_of(const material_id &amp;m) const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00958">monster.cpp:958</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a56f18a86263588ccac54657fd6d404a4"><div class="ttname"><a href="monattack_8cpp.html#a56f18a86263588ccac54657fd6d404a4">poly_keep_speed</a></div><div class="ttdeci">static void poly_keep_speed(monster &amp;mon, const mtype_id &amp;id)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l02228">monattack.cpp:2228</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a8cf6770a8414cda450c55b1d640084c4"><div class="ttname"><a href="monattack_8cpp.html#a8cf6770a8414cda450c55b1d640084c4">blobify</a></div><div class="ttdeci">static bool blobify(monster &amp;blob, monster &amp;target)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l02238">monattack.cpp:2238</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a96b8333a5c99eec3461bf502b864204b"><div class="ttname"><a href="monattack_8cpp.html#a96b8333a5c99eec3461bf502b864204b">mon_blob_small</a></div><div class="ttdeci">static const mtype_id mon_blob_small(&quot;mon_blob_small&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_aa38c932036191fc88554990d16a891a2"><div class="ttname"><a href="monattack_8cpp.html#aa38c932036191fc88554990d16a891a2">mon_blob</a></div><div class="ttdeci">static const mtype_id mon_blob(&quot;mon_blob&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_ae9a6c4625d63003c1d0964079059efa1"><div class="ttname"><a href="monattack_8cpp.html#ae9a6c4625d63003c1d0964079059efa1">mon_blob_large</a></div><div class="ttdeci">static const mtype_id mon_blob_large(&quot;mon_blob_large&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_af021f5736261db03cad28a0d64c9ec2b"><div class="ttname"><a href="monattack_8cpp.html#af021f5736261db03cad28a0d64c9ec2b">effect_slimed</a></div><div class="ttdeci">static const efftype_id effect_slimed(&quot;slimed&quot;)</div></div>
<div class="ttc" id="astructmtype_html_a51ec342d71717bb513f0158198b12840"><div class="ttname"><a href="structmtype.html#a51ec342d71717bb513f0158198b12840">mtype::in_species</a></div><div class="ttdeci">bool in_species(const species_id &amp;spec) const</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8cpp_source.html#l00122">mtype.cpp:122</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature_8cpp_source.html#l00974">Creature::add_effect()</a>, <a class="el" href="monattack_8cpp_source.html#l02238">blobify()</a>, <a class="el" href="coordinates_8h_source.html#l00596">closest_points_first()</a>, <a class="el" href="monattack_8cpp.html#af021f5736261db03cad28a0d64c9ec2b">effect_slimed</a>, <a class="el" href="monster_8h_source.html#l00471">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="monster_8cpp_source.html#l02894">monster::get_hp()</a>, <a class="el" href="monster_8cpp_source.html#l02884">monster::get_hp_max()</a>, <a class="el" href="creature_8cpp_source.html#l01668">Creature::get_speed_base()</a>, <a class="el" href="monster_8cpp_source.html#l01616">monster::heal()</a>, <a class="el" href="mtype_8h_source.html#l00240">mtype::id</a>, <a class="el" href="mtype_8cpp_source.html#l00122">mtype::in_species()</a>, <a class="el" href="creature_8h_source.html#l00098">Creature::is_npc()</a>, <a class="el" href="creature_8h_source.html#l00092">Creature::is_player()</a>, <a class="el" href="monster_8cpp_source.html#l00958">monster::made_of()</a>, <a class="el" href="monattack_8cpp.html#aa38c932036191fc88554990d16a891a2">mon_blob</a>, <a class="el" href="monattack_8cpp.html#a039c3acd23099e1631feefe7748f49ac">mon_blob_brain</a>, <a class="el" href="monattack_8cpp.html#ae9a6c4625d63003c1d0964079059efa1">mon_blob_large</a>, <a class="el" href="monattack_8cpp.html#a96b8333a5c99eec3461bf502b864204b">mon_blob_small</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monattack_8cpp_source.html#l02228">poly_keep_speed()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="monster_8cpp_source.html#l01631">monster::set_hp()</a>, <a class="el" href="creature_8cpp_source.html#l01730">Creature::set_speed_base()</a>, <a class="el" href="monattack_8cpp.html#a1ce9db8f1e355ba884db835013d78b41">species_BLOB</a>, and <a class="el" href="monster_8h_source.html#l00478">monster::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a3d8357fbd677c0d10f4ad5500bc9455d" name="a3d8357fbd677c0d10f4ad5500bc9455d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d8357fbd677c0d10f4ad5500bc9455d">&#9670;&nbsp;</a></span>frag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mattack::frag </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCreature.html">Creature</a> *&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l03321">3321</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03322" name="l03322"></a><span class="lineno"> 3322</span>{</div>
<div class="line"><a id="l03323" name="l03323"></a><span class="lineno"> 3323</span>    <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> ammo_type( <span class="stringliteral">&quot;40x46mm_m433&quot;</span> );</div>
<div class="line"><a id="l03324" name="l03324"></a><span class="lineno"> 3324</span>    <span class="comment">// Make sure our ammo isn&#39;t weird.</span></div>
<div class="line"><a id="l03325" name="l03325"></a><span class="lineno"> 3325</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">ammo</a>[ammo_type] &gt; 200 ) {</div>
<div class="line"><a id="l03326" name="l03326"></a><span class="lineno"> 3326</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Generated too much ammo (%d) for %s in mattack::frag&quot;</span>, z-&gt;<a class="code hl_variable" href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">ammo</a>[ammo_type],</div>
<div class="line"><a id="l03327" name="l03327"></a><span class="lineno"> 3327</span>                  z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l03328" name="l03328"></a><span class="lineno"> 3328</span>        z-&gt;<a class="code hl_variable" href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">ammo</a>[ammo_type] = 200;</div>
<div class="line"><a id="l03329" name="l03329"></a><span class="lineno"> 3329</span>    }</div>
<div class="line"><a id="l03330" name="l03330"></a><span class="lineno"> 3330</span> </div>
<div class="line"><a id="l03331" name="l03331"></a><span class="lineno"> 3331</span>    <span class="keywordflow">if</span>( target == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ) {</div>
<div class="line"><a id="l03332" name="l03332"></a><span class="lineno"> 3332</span>        <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a90a259f4c1b37d66fbc8c485ea1ccaba">effect_targeted</a> ) ) {</div>
<div class="line"><a id="l03333" name="l03333"></a><span class="lineno"> 3333</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_trait( <a class="code hl_variable" href="monattack_8cpp.html#a9a647a2dbecb7b90acbdbe6fba9a0256">trait_PROF_CHURL</a> ) ) {</div>
<div class="line"><a id="l03334" name="l03334"></a><span class="lineno"> 3334</span>                <span class="comment">//~ Potential grenading detected.</span></div>
<div class="line"><a id="l03335" name="l03335"></a><span class="lineno"> 3335</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Thee eye o dat divil be upon me!&quot;</span> ) );</div>
<div class="line"><a id="l03336" name="l03336"></a><span class="lineno"> 3336</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03337" name="l03337"></a><span class="lineno"> 3337</span>                <span class="comment">//~ Potential grenading detected.</span></div>
<div class="line"><a id="l03338" name="l03338"></a><span class="lineno"> 3338</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Those laser dots don&#39;t seem very friendly…&quot;</span> ) );</div>
<div class="line"><a id="l03339" name="l03339"></a><span class="lineno"> 3339</span>            }</div>
<div class="line"><a id="l03340" name="l03340"></a><span class="lineno"> 3340</span>            <span class="comment">// Effect removed in game.cpp, duration doesn&#39;t much matter</span></div>
<div class="line"><a id="l03341" name="l03341"></a><span class="lineno"> 3341</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.add_effect( <a class="code hl_variable" href="monattack_8cpp.html#a6bf1394e103efe8661fc75163e3482c3">effect_laserlocked</a>, 3_turns );</div>
<div class="line"><a id="l03342" name="l03342"></a><span class="lineno"> 3342</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 10, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Targeting.&quot;</span> ),</div>
<div class="line"><a id="l03343" name="l03343"></a><span class="lineno"> 3343</span>                           <span class="keyword">false</span>, <span class="stringliteral">&quot;speech&quot;</span>, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a>.<a class="code hl_function" href="classstring__id.html#aa7dabc565f0c067e1a237ea224b18f93">str</a>() );</div>
<div class="line"><a id="l03344" name="l03344"></a><span class="lineno"> 3344</span>            z-&gt;<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a90a259f4c1b37d66fbc8c485ea1ccaba">effect_targeted</a>, 5_turns );</div>
<div class="line"><a id="l03345" name="l03345"></a><span class="lineno"> 3345</span>            z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 150;</div>
<div class="line"><a id="l03346" name="l03346"></a><span class="lineno"> 3346</span>            <span class="comment">// Should give some ability to get behind cover,</span></div>
<div class="line"><a id="l03347" name="l03347"></a><span class="lineno"> 3347</span>            <span class="comment">// even though it&#39;s patently unrealistic.</span></div>
<div class="line"><a id="l03348" name="l03348"></a><span class="lineno"> 3348</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03349" name="l03349"></a><span class="lineno"> 3349</span>        }</div>
<div class="line"><a id="l03350" name="l03350"></a><span class="lineno"> 3350</span>    }</div>
<div class="line"><a id="l03351" name="l03351"></a><span class="lineno"> 3351</span>    <a class="code hl_class" href="classnpc.html">npc</a> tmp = <a class="code hl_function" href="monattack_8cpp.html#a869db8713f4b9684575dee5358311b48">make_fake_npc</a>( z, 16, 10, 8, 12 );</div>
<div class="line"><a id="l03352" name="l03352"></a><span class="lineno"> 3352</span>    tmp.<a class="code hl_function" href="classCharacter.html#aac28618b387cf4ce36252e47699938d5">set_skill_level</a>( <a class="code hl_variable" href="monattack_8cpp.html#a0c6f7a1d7eeb2c38d69b568d85eb9f0d">skill_launcher</a>, 8 );</div>
<div class="line"><a id="l03353" name="l03353"></a><span class="lineno"> 3353</span>    tmp.<a class="code hl_function" href="classCharacter.html#aac28618b387cf4ce36252e47699938d5">set_skill_level</a>( <a class="code hl_variable" href="monattack_8cpp.html#a3eadead4a9aa7fee079c0b1acce7965e">skill_gun</a>, 6 );</div>
<div class="line"><a id="l03354" name="l03354"></a><span class="lineno"> 3354</span>    <span class="comment">// No need to aim</span></div>
<div class="line"><a id="l03355" name="l03355"></a><span class="lineno"> 3355</span>    tmp.<a class="code hl_variable" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> = 0;</div>
<div class="line"><a id="l03356" name="l03356"></a><span class="lineno"> 3356</span>    <span class="comment">// It takes a while</span></div>
<div class="line"><a id="l03357" name="l03357"></a><span class="lineno"> 3357</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 150;</div>
<div class="line"><a id="l03358" name="l03358"></a><span class="lineno"> 3358</span> </div>
<div class="line"><a id="l03359" name="l03359"></a><span class="lineno"> 3359</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">ammo</a>[ammo_type] &lt;= 0 ) {</div>
<div class="line"><a id="l03360" name="l03360"></a><span class="lineno"> 3360</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a id="l03361" name="l03361"></a><span class="lineno"> 3361</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 2, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;a chk!&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;fire_gun&quot;</span>, <span class="stringliteral">&quot;empty&quot;</span> );</div>
<div class="line"><a id="l03362" name="l03362"></a><span class="lineno"> 3362</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a id="l03363" name="l03363"></a><span class="lineno"> 3363</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 6, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;boop!&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;fire_gun&quot;</span>, <span class="stringliteral">&quot;empty&quot;</span> );</div>
<div class="line"><a id="l03364" name="l03364"></a><span class="lineno"> 3364</span>        }</div>
<div class="line"><a id="l03365" name="l03365"></a><span class="lineno"> 3365</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03366" name="l03366"></a><span class="lineno"> 3366</span>    }</div>
<div class="line"><a id="l03367" name="l03367"></a><span class="lineno"> 3367</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l03368" name="l03368"></a><span class="lineno"> 3368</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s&#39;s grenade launcher fires!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l03369" name="l03369"></a><span class="lineno"> 3369</span>    }</div>
<div class="line"><a id="l03370" name="l03370"></a><span class="lineno"> 3370</span> </div>
<div class="line"><a id="l03371" name="l03371"></a><span class="lineno"> 3371</span>    tmp.<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a> = <a class="code hl_class" href="classitem.html">item</a>( <span class="stringliteral">&quot;mgl&quot;</span> ).<a class="code hl_function" href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">ammo_set</a>( ammo_type, z-&gt;<a class="code hl_variable" href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">ammo</a>[ ammo_type ] );</div>
<div class="line"><a id="l03372" name="l03372"></a><span class="lineno"> 3372</span>    <span class="keywordtype">int</span> burst = std::max( tmp.<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_function" href="classitem.html#af128df748a75405ab738424bff725de5">gun_get_mode</a>( <a class="code hl_class" href="classstring__id.html">gun_mode_id</a>( <span class="stringliteral">&quot;AUTO&quot;</span> ) ).qty, 1 );</div>
<div class="line"><a id="l03373" name="l03373"></a><span class="lineno"> 3373</span> </div>
<div class="line"><a id="l03374" name="l03374"></a><span class="lineno"> 3374</span>    z-&gt;<a class="code hl_variable" href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">ammo</a>[ ammo_type ] -= tmp.<a class="code hl_function" href="classplayer.html#a44202fda7322e9ba557a37a7081e249c">fire_gun</a>( target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>(), burst ) * tmp.<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_function" href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">ammo_required</a>();</div>
<div class="line"><a id="l03375" name="l03375"></a><span class="lineno"> 3375</span> </div>
<div class="line"><a id="l03376" name="l03376"></a><span class="lineno"> 3376</span>    <span class="keywordflow">if</span>( target == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ) {</div>
<div class="line"><a id="l03377" name="l03377"></a><span class="lineno"> 3377</span>        z-&gt;<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a90a259f4c1b37d66fbc8c485ea1ccaba">effect_targeted</a>, 3_turns );</div>
<div class="line"><a id="l03378" name="l03378"></a><span class="lineno"> 3378</span>    }</div>
<div class="line"><a id="l03379" name="l03379"></a><span class="lineno"> 3379</span>}</div>
<div class="ttc" id="aclassCharacter_html_a057d68671b298012a18f4e289b39935d"><div class="ttname"><a href="classCharacter.html#a057d68671b298012a18f4e289b39935d">Character::recoil</a></div><div class="ttdeci">double recoil</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00618">character.h:618</a></div></div>
<div class="ttc" id="aclassCharacter_html_aac28618b387cf4ce36252e47699938d5"><div class="ttname"><a href="classCharacter.html#aac28618b387cf4ce36252e47699938d5">Character::set_skill_level</a></div><div class="ttdeci">void set_skill_level(const skill_id &amp;ident, int level)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03337">character.cpp:3337</a></div></div>
<div class="ttc" id="aclassitem_html_a6a3f16444c412bce4b75a7d600d6a3fe"><div class="ttname"><a href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">item::ammo_set</a></div><div class="ttdeci">item &amp; ammo_set(const itype_id &amp;ammo, int qty=-1)</div><div class="ttdoc">Filter setting the ammo for this instance Any existing ammo is removed.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00587">item.cpp:587</a></div></div>
<div class="ttc" id="aclassitem_html_a7dc5d9ccf5638ae80cebe1864050fa26"><div class="ttname"><a href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">item::ammo_required</a></div><div class="ttdeci">int ammo_required() const</div><div class="ttdoc">Quantity of ammunition consumed per usage of tool or with each shot of gun.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07296">item.cpp:7296</a></div></div>
<div class="ttc" id="aclassitem_html_af128df748a75405ab738424bff725de5"><div class="ttname"><a href="classitem.html#af128df748a75405ab738424bff725de5">item::gun_get_mode</a></div><div class="ttdeci">gun_mode gun_get_mode(const gun_mode_id &amp;mode) const</div><div class="ttdoc">Check if gun supports a specific mode returning an invalid/empty mode if not.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07724">item.cpp:7724</a></div></div>
<div class="ttc" id="aclassmonster_html_a45462fba4c37679c66ecde2f9000c22c"><div class="ttname"><a href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">monster::add_effect</a></div><div class="ttdeci">void add_effect(const efftype_id &amp;eff_id, const time_duration &amp;dur, const bodypart_str_id &amp;bp, int intensity=0, bool force=false, bool deferred=false) override</div><div class="ttdoc">Performs any monster-specific modifications to the arguments before passing to Creature::add_effect()...</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l01807">monster.cpp:1807</a></div></div>
<div class="ttc" id="aclassmonster_html_aa5740a03294bcab8ef209151af709c4c"><div class="ttname"><a href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">monster::ammo</a></div><div class="ttdeci">std::map&lt; itype_id, int &gt; ammo</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00512">monster.h:512</a></div></div>
<div class="ttc" id="aclassnpc_html"><div class="ttname"><a href="classnpc.html">npc</a></div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l00780">npc.h:781</a></div></div>
<div class="ttc" id="aclassplayer_html_a44202fda7322e9ba557a37a7081e249c"><div class="ttname"><a href="classplayer.html#a44202fda7322e9ba557a37a7081e249c">player::fire_gun</a></div><div class="ttdeci">int fire_gun(const tripoint &amp;target, int shots=1)</div><div class="ttdoc">Fires a gun or auxiliary gunmod (ignoring any current mode)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00804">ranged.cpp:804</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a0c6f7a1d7eeb2c38d69b568d85eb9f0d"><div class="ttname"><a href="monattack_8cpp.html#a0c6f7a1d7eeb2c38d69b568d85eb9f0d">skill_launcher</a></div><div class="ttdeci">static const skill_id skill_launcher(&quot;launcher&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a3eadead4a9aa7fee079c0b1acce7965e"><div class="ttname"><a href="monattack_8cpp.html#a3eadead4a9aa7fee079c0b1acce7965e">skill_gun</a></div><div class="ttdeci">static const skill_id skill_gun(&quot;gun&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a6bf1394e103efe8661fc75163e3482c3"><div class="ttname"><a href="monattack_8cpp.html#a6bf1394e103efe8661fc75163e3482c3">effect_laserlocked</a></div><div class="ttdeci">static const efftype_id effect_laserlocked(&quot;laserlocked&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a869db8713f4b9684575dee5358311b48"><div class="ttname"><a href="monattack_8cpp.html#a869db8713f4b9684575dee5358311b48">make_fake_npc</a></div><div class="ttdeci">static npc make_fake_npc(monster *z, int str, int dex, int inte, int per)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l00301">monattack.cpp:301</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a90a259f4c1b37d66fbc8c485ea1ccaba"><div class="ttname"><a href="monattack_8cpp.html#a90a259f4c1b37d66fbc8c485ea1ccaba">effect_targeted</a></div><div class="ttdeci">static const efftype_id effect_targeted(&quot;targeted&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a9a647a2dbecb7b90acbdbe6fba9a0256"><div class="ttname"><a href="monattack_8cpp.html#a9a647a2dbecb7b90acbdbe6fba9a0256">trait_PROF_CHURL</a></div><div class="ttdeci">static const trait_id trait_PROF_CHURL(&quot;PROF_CHURL&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="monster_8cpp_source.html#l01807">monster::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="monster_8h_source.html#l00512">monster::ammo</a>, <a class="el" href="item_8cpp_source.html#l07296">item::ammo_required()</a>, <a class="el" href="item_8cpp_source.html#l00587">item::ammo_set()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::combat</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="monattack_8cpp.html#a6bf1394e103efe8661fc75163e3482c3">effect_laserlocked</a>, <a class="el" href="monattack_8cpp.html#a90a259f4c1b37d66fbc8c485ea1ccaba">effect_targeted</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::electronic_speech</a>, <a class="el" href="ranged_8cpp_source.html#l00804">player::fire_gun()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="item_8cpp_source.html#l07724">item::gun_get_mode()</a>, <a class="el" href="creature_8cpp_source.html#l01173">Creature::has_effect()</a>, <a class="el" href="mtype_8h_source.html#l00240">mtype::id</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="monattack_8cpp_source.html#l00301">make_fake_npc()</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="character_8h_source.html#l00618">Character::recoil</a>, <a class="el" href="character_8cpp_source.html#l03337">Character::set_skill_level()</a>, <a class="el" href="monattack_8cpp.html#a3eadead4a9aa7fee079c0b1acce7965e">skill_gun</a>, <a class="el" href="monattack_8cpp.html#a0c6f7a1d7eeb2c38d69b568d85eb9f0d">skill_launcher</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, <a class="el" href="string__id_8h_source.html#l00255">string_id&lt; T &gt;::str()</a>, <a class="el" href="monattack_8cpp.html#a9a647a2dbecb7b90acbdbe6fba9a0256">trait_PROF_CHURL</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, and <a class="el" href="character_8h_source.html#l01585">Character::weapon</a>.</p>

<p class="reference">Referenced by <a class="el" href="monattack_8cpp_source.html#l03761">chickenbot()</a>, and <a class="el" href="monattack_8cpp_source.html#l03843">multi_robot()</a>.</p>

</div>
</div>
<a id="a41571ddd47eff0c37ad293c9da7d2925" name="a41571ddd47eff0c37ad293c9da7d2925"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41571ddd47eff0c37ad293c9da7d2925">&#9670;&nbsp;</a></span>fungal_trail()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::fungal_trail </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l02197">2197</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02198" name="l02198"></a><span class="lineno"> 2198</span>{</div>
<div class="line"><a id="l02199" name="l02199"></a><span class="lineno"> 2199</span>    <a class="code hl_class" href="classfungal__effects.html">fungal_effects</a> fe( *<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>, <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m );</div>
<div class="line"><a id="l02200" name="l02200"></a><span class="lineno"> 2200</span>    fe.spread_fungus( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>() );</div>
<div class="line"><a id="l02201" name="l02201"></a><span class="lineno"> 2201</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02202" name="l02202"></a><span class="lineno"> 2202</span>}</div>
<div class="ttc" id="aclassfungal__effects_html"><div class="ttname"><a href="classfungal__effects.html">fungal_effects</a></div><div class="ttdef"><b>Definition:</b> <a href="fungal__effects_8h_source.html#l00010">fungal_effects.h:11</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, and <a class="el" href="fungal__effects_8cpp_source.html#l00242">fungal_effects::spread_fungus()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="ae08a0dfd17920eaa57b2f97936eab747" name="ae08a0dfd17920eaa57b2f97936eab747"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae08a0dfd17920eaa57b2f97936eab747">&#9670;&nbsp;</a></span>fungus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::fungus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l01661">1661</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01662" name="l01662"></a><span class="lineno"> 1662</span>{</div>
<div class="line"><a id="l01663" name="l01663"></a><span class="lineno"> 1663</span>    <span class="comment">// TODO: Infect NPCs?</span></div>
<div class="line"><a id="l01664" name="l01664"></a><span class="lineno"> 1664</span>    <span class="comment">// It takes a while</span></div>
<div class="line"><a id="l01665" name="l01665"></a><span class="lineno"> 1665</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 200;</div>
<div class="line"><a id="l01666" name="l01666"></a><span class="lineno"> 1666</span> </div>
<div class="line"><a id="l01667" name="l01667"></a><span class="lineno"> 1667</span>    <span class="comment">//~ the sound of a fungus releasing spores</span></div>
<div class="line"><a id="l01668" name="l01668"></a><span class="lineno"> 1668</span>    <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 10, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Pouf!&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;misc&quot;</span>, <span class="stringliteral">&quot;puff&quot;</span> );</div>
<div class="line"><a id="l01669" name="l01669"></a><span class="lineno"> 1669</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l01670" name="l01670"></a><span class="lineno"> 1670</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Spores are released from the %s!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l01671" name="l01671"></a><span class="lineno"> 1671</span>    }</div>
<div class="line"><a id="l01672" name="l01672"></a><span class="lineno"> 1672</span> </div>
<div class="line"><a id="l01673" name="l01673"></a><span class="lineno"> 1673</span>    <span class="keywordtype">bool</span> on_fungus = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.has_flag_ter( <span class="stringliteral">&quot;FUNGUS&quot;</span>, z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>() );</div>
<div class="line"><a id="l01674" name="l01674"></a><span class="lineno"> 1674</span>    <span class="keywordtype">int</span> radius = <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ? 2 : 1;</div>
<div class="line"><a id="l01675" name="l01675"></a><span class="lineno"> 1675</span>    <span class="keywordtype">double</span> spore_chance = ( on_fungus ? 0.5f : 0.2f ) / ( ( radius + 1 ) * ( radius + 1 ) );</div>
<div class="line"><a id="l01676" name="l01676"></a><span class="lineno"> 1676</span>    <a class="code hl_class" href="classfungal__effects.html">fungal_effects</a> fe( *<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>, <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m );</div>
<div class="line"><a id="l01677" name="l01677"></a><span class="lineno"> 1677</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;sporep : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), radius ) ) {</div>
<div class="line"><a id="l01678" name="l01678"></a><span class="lineno"> 1678</span>        <span class="keywordflow">if</span>( sporep == z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>() ) {</div>
<div class="line"><a id="l01679" name="l01679"></a><span class="lineno"> 1679</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01680" name="l01680"></a><span class="lineno"> 1680</span>        }</div>
<div class="line"><a id="l01681" name="l01681"></a><span class="lineno"> 1681</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> dist = <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), sporep );</div>
<div class="line"><a id="l01682" name="l01682"></a><span class="lineno"> 1682</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( dist ) ||</div>
<div class="line"><a id="l01683" name="l01683"></a><span class="lineno"> 1683</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.impassable( sporep ) ||</div>
<div class="line"><a id="l01684" name="l01684"></a><span class="lineno"> 1684</span>            ( dist &gt; 1 &amp;&amp; !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.clear_path( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), sporep, 2, 1, 10 ) ) ) {</div>
<div class="line"><a id="l01685" name="l01685"></a><span class="lineno"> 1685</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01686" name="l01686"></a><span class="lineno"> 1686</span>        }</div>
<div class="line"><a id="l01687" name="l01687"></a><span class="lineno"> 1687</span> </div>
<div class="line"><a id="l01688" name="l01688"></a><span class="lineno"> 1688</span>        fe.fungalize( sporep, z, spore_chance );</div>
<div class="line"><a id="l01689" name="l01689"></a><span class="lineno"> 1689</span>    }</div>
<div class="line"><a id="l01690" name="l01690"></a><span class="lineno"> 1690</span> </div>
<div class="line"><a id="l01691" name="l01691"></a><span class="lineno"> 1691</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01692" name="l01692"></a><span class="lineno"> 1692</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::combat</a>, <a class="el" href="fungal__effects_8cpp_source.html#l00065">fungal_effects::fungalize()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, and <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a62e8c4fbc29f9a03ebc2837bd0455323" name="a62e8c4fbc29f9a03ebc2837bd0455323"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62e8c4fbc29f9a03ebc2837bd0455323">&#9670;&nbsp;</a></span>fungus_big_blossom()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::fungus_big_blossom </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l01714">1714</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01715" name="l01715"></a><span class="lineno"> 1715</span>{</div>
<div class="line"><a id="l01716" name="l01716"></a><span class="lineno"> 1716</span>    <span class="keywordtype">bool</span> firealarm = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01717" name="l01717"></a><span class="lineno"> 1717</span>    <span class="keyword">const</span> <span class="keyword">auto</span> u_see = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z );</div>
<div class="line"><a id="l01718" name="l01718"></a><span class="lineno"> 1718</span>    <span class="comment">// Fungal fire-suppressor! &gt;:D</span></div>
<div class="line"><a id="l01719" name="l01719"></a><span class="lineno"> 1719</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;dest : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 6 ) ) {</div>
<div class="line"><a id="l01720" name="l01720"></a><span class="lineno"> 1720</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.get_field_intensity( dest, <a class="code hl_variable" href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a> ) != 0 ) {</div>
<div class="line"><a id="l01721" name="l01721"></a><span class="lineno"> 1721</span>            firealarm = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01722" name="l01722"></a><span class="lineno"> 1722</span>        }</div>
<div class="line"><a id="l01723" name="l01723"></a><span class="lineno"> 1723</span>        <span class="keywordflow">if</span>( firealarm ) {</div>
<div class="line"><a id="l01724" name="l01724"></a><span class="lineno"> 1724</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.remove_field( dest, <a class="code hl_variable" href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a> );</div>
<div class="line"><a id="l01725" name="l01725"></a><span class="lineno"> 1725</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.remove_field( dest, <a class="code hl_variable" href="field__type_8cpp.html#a742b7a3f2bec99838055a58c542ecddf">fd_smoke</a> );</div>
<div class="line"><a id="l01726" name="l01726"></a><span class="lineno"> 1726</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_field( dest, <a class="code hl_variable" href="field__type_8cpp.html#a68f6e17053fde556f8a2cfce44287997">fd_fungal_haze</a>, 3 );</div>
<div class="line"><a id="l01727" name="l01727"></a><span class="lineno"> 1727</span>        }</div>
<div class="line"><a id="l01728" name="l01728"></a><span class="lineno"> 1728</span>    }</div>
<div class="line"><a id="l01729" name="l01729"></a><span class="lineno"> 1729</span>    <span class="comment">// Special effects handled outside the loop</span></div>
<div class="line"><a id="l01730" name="l01730"></a><span class="lineno"> 1730</span>    <span class="keywordflow">if</span>( firealarm ) {</div>
<div class="line"><a id="l01731" name="l01731"></a><span class="lineno"> 1731</span>        <span class="keywordflow">if</span>( u_see ) {</div>
<div class="line"><a id="l01732" name="l01732"></a><span class="lineno"> 1732</span>            <span class="comment">// Sucks up all the smoke</span></div>
<div class="line"><a id="l01733" name="l01733"></a><span class="lineno"> 1733</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s suddenly inhales!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l01734" name="l01734"></a><span class="lineno"> 1734</span>        }</div>
<div class="line"><a id="l01735" name="l01735"></a><span class="lineno"> 1735</span>        <span class="comment">//~Sound of a giant fungal blossom inhaling</span></div>
<div class="line"><a id="l01736" name="l01736"></a><span class="lineno"> 1736</span>        <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 20, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;WOOOSH!&quot;</span> ), <span class="keyword">true</span>, <span class="stringliteral">&quot;misc&quot;</span>, <span class="stringliteral">&quot;inhale&quot;</span> );</div>
<div class="line"><a id="l01737" name="l01737"></a><span class="lineno"> 1737</span>        <span class="keywordflow">if</span>( u_see ) {</div>
<div class="line"><a id="l01738" name="l01738"></a><span class="lineno"> 1738</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s discharges an immense flow of spores, smothering the flames!&quot;</span> ),</div>
<div class="line"><a id="l01739" name="l01739"></a><span class="lineno"> 1739</span>                     z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l01740" name="l01740"></a><span class="lineno"> 1740</span>        }</div>
<div class="line"><a id="l01741" name="l01741"></a><span class="lineno"> 1741</span>        <span class="comment">//~Sound of a giant fungal blossom blowing out the dangerous fire!</span></div>
<div class="line"><a id="l01742" name="l01742"></a><span class="lineno"> 1742</span>        <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 20, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;POUFF!&quot;</span> ), <span class="keyword">true</span>, <span class="stringliteral">&quot;misc&quot;</span>, <span class="stringliteral">&quot;exhale&quot;</span> );</div>
<div class="line"><a id="l01743" name="l01743"></a><span class="lineno"> 1743</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01744" name="l01744"></a><span class="lineno"> 1744</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01745" name="l01745"></a><span class="lineno"> 1745</span>        <span class="comment">// No fire detected, routine haze-emission</span></div>
<div class="line"><a id="l01746" name="l01746"></a><span class="lineno"> 1746</span>        <span class="comment">//~ That spore sound, much louder</span></div>
<div class="line"><a id="l01747" name="l01747"></a><span class="lineno"> 1747</span>        <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 15, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;POUF.&quot;</span> ), <span class="keyword">true</span>, <span class="stringliteral">&quot;misc&quot;</span>, <span class="stringliteral">&quot;puff&quot;</span> );</div>
<div class="line"><a id="l01748" name="l01748"></a><span class="lineno"> 1748</span>        <span class="keywordflow">if</span>( u_see ) {</div>
<div class="line"><a id="l01749" name="l01749"></a><span class="lineno"> 1749</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s pulses, and fresh fungal material bursts forth!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l01750" name="l01750"></a><span class="lineno"> 1750</span>        }</div>
<div class="line"><a id="l01751" name="l01751"></a><span class="lineno"> 1751</span>        z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 150;</div>
<div class="line"><a id="l01752" name="l01752"></a><span class="lineno"> 1752</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;dest : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 12 ) ) {</div>
<div class="line"><a id="l01753" name="l01753"></a><span class="lineno"> 1753</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_field( dest, <a class="code hl_variable" href="field__type_8cpp.html#a68f6e17053fde556f8a2cfce44287997">fd_fungal_haze</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 2 ) );</div>
<div class="line"><a id="l01754" name="l01754"></a><span class="lineno"> 1754</span>        }</div>
<div class="line"><a id="l01755" name="l01755"></a><span class="lineno"> 1755</span>    }</div>
<div class="line"><a id="l01756" name="l01756"></a><span class="lineno"> 1756</span> </div>
<div class="line"><a id="l01757" name="l01757"></a><span class="lineno"> 1757</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01758" name="l01758"></a><span class="lineno"> 1758</span>}</div>
<div class="ttc" id="afield__type_8cpp_html_a68f6e17053fde556f8a2cfce44287997"><div class="ttname"><a href="field__type_8cpp.html#a68f6e17053fde556f8a2cfce44287997">fd_fungal_haze</a></div><div class="ttdeci">field_type_id fd_fungal_haze</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00374">field_type.cpp:374</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a742b7a3f2bec99838055a58c542ecddf"><div class="ttname"><a href="field__type_8cpp.html#a742b7a3f2bec99838055a58c542ecddf">fd_smoke</a></div><div class="ttdeci">field_type_id fd_smoke</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00346">field_type.cpp:346</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::combat</a>, <a class="el" href="field__type_8cpp_source.html#l00345">fd_fire</a>, <a class="el" href="field__type_8cpp_source.html#l00374">fd_fungal_haze</a>, <a class="el" href="field__type_8cpp_source.html#l00346">fd_smoke</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, and <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a07e7a3e862e11a5c5992b3c3d1e78280" name="a07e7a3e862e11a5c5992b3c3d1e78280"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07e7a3e862e11a5c5992b3c3d1e78280">&#9670;&nbsp;</a></span>fungus_bristle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::fungus_bristle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l01823">1823</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01824" name="l01824"></a><span class="lineno"> 1824</span>{</div>
<div class="line"><a id="l01825" name="l01825"></a><span class="lineno"> 1825</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_trait( <a class="code hl_variable" href="monattack_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">trait_THRESH_MARLOSS</a> ) || <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_trait( <a class="code hl_variable" href="monattack_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a> ) ) {</div>
<div class="line"><a id="l01826" name="l01826"></a><span class="lineno"> 1826</span>        z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> = 1;</div>
<div class="line"><a id="l01827" name="l01827"></a><span class="lineno"> 1827</span>    }</div>
<div class="line"><a id="l01828" name="l01828"></a><span class="lineno"> 1828</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l01829" name="l01829"></a><span class="lineno"> 1829</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ||</div>
<div class="line"><a id="l01830" name="l01830"></a><span class="lineno"> 1830</span>        !<a class="code hl_function" href="monattack_8cpp.html#abf0d71b531a799a8eb3fd58a846064db">is_adjacent</a>( z, target, <span class="keyword">true</span> ) ||</div>
<div class="line"><a id="l01831" name="l01831"></a><span class="lineno"> 1831</span>        !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l01832" name="l01832"></a><span class="lineno"> 1832</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01833" name="l01833"></a><span class="lineno"> 1833</span>    }</div>
<div class="line"><a id="l01834" name="l01834"></a><span class="lineno"> 1834</span> </div>
<div class="line"><a id="l01835" name="l01835"></a><span class="lineno"> 1835</span>    <span class="keyword">auto</span> msg_type = target == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ? <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a> : <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>;</div>
<div class="line"><a id="l01836" name="l01836"></a><span class="lineno"> 1836</span> </div>
<div class="line"><a id="l01837" name="l01837"></a><span class="lineno"> 1837</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( msg_type, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s swipes at %2$s with a barbed tendril!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l01838" name="l01838"></a><span class="lineno"> 1838</span>             target-&gt;<a class="code hl_function" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">disp_name</a>() );</div>
<div class="line"><a id="l01839" name="l01839"></a><span class="lineno"> 1839</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 150;</div>
<div class="line"><a id="l01840" name="l01840"></a><span class="lineno"> 1840</span> </div>
<div class="line"><a id="l01841" name="l01841"></a><span class="lineno"> 1841</span>    <span class="keywordflow">if</span>( target-&gt;<a class="code hl_function" href="classCreature.html#afd2f1b1e5bafdef20afddbb704b1d5a5">uncanny_dodge</a>() ) {</div>
<div class="line"><a id="l01842" name="l01842"></a><span class="lineno"> 1842</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01843" name="l01843"></a><span class="lineno"> 1843</span>    }</div>
<div class="line"><a id="l01844" name="l01844"></a><span class="lineno"> 1844</span> </div>
<div class="line"><a id="l01845" name="l01845"></a><span class="lineno"> 1845</span>    <span class="comment">// Can we dodge the attack? Uses player dodge function % chance (melee.cpp)</span></div>
<div class="line"><a id="l01846" name="l01846"></a><span class="lineno"> 1846</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacemattack.html#a4efb8be314551e35f69df8cf8d824174">dodge_check</a>( z, target ) ) {</div>
<div class="line"><a id="l01847" name="l01847"></a><span class="lineno"> 1847</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You dodge it!&quot;</span> ),</div>
<div class="line"><a id="l01848" name="l01848"></a><span class="lineno"> 1848</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; dodges it!&quot;</span> ) );</div>
<div class="line"><a id="l01849" name="l01849"></a><span class="lineno"> 1849</span>        target-&gt;<a class="code hl_function" href="classCreature.html#af56188882e3300853d18f166738ee37a">on_dodge</a>( z, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> * 2 );</div>
<div class="line"><a id="l01850" name="l01850"></a><span class="lineno"> 1850</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01851" name="l01851"></a><span class="lineno"> 1851</span>    }</div>
<div class="line"><a id="l01852" name="l01852"></a><span class="lineno"> 1852</span> </div>
<div class="line"><a id="l01853" name="l01853"></a><span class="lineno"> 1853</span>    <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">bodypart_id</a> hit = target-&gt;<a class="code hl_function" href="classCreature.html#a51c96c81ae1ea766b5eead4a265c1492">get_random_body_part</a>();</div>
<div class="line"><a id="l01854" name="l01854"></a><span class="lineno"> 1854</span>    <span class="keywordtype">int</span> dam = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 7, 16 );</div>
<div class="line"><a id="l01855" name="l01855"></a><span class="lineno"> 1855</span>    dam = target-&gt;<a class="code hl_function" href="classCreature.html#a75ad96eb6ce27d3c1df250965b4de7b5">deal_damage</a>( z, hit, <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa8ff698c0509e78ff65c7c7ec899b4f51">DT_CUT</a>, dam ) ).<a class="code hl_function" href="structdealt__damage__instance.html#a86b702070a1c313624abc78ff34eff48">total_damage</a>();</div>
<div class="line"><a id="l01856" name="l01856"></a><span class="lineno"> 1856</span> </div>
<div class="line"><a id="l01857" name="l01857"></a><span class="lineno"> 1857</span>    <span class="keywordflow">if</span>( dam &gt; 0 ) {</div>
<div class="line"><a id="l01858" name="l01858"></a><span class="lineno"> 1858</span>        <span class="comment">//~ 1$s is monster name, 2$s bodypart in accusative</span></div>
<div class="line"><a id="l01859" name="l01859"></a><span class="lineno"> 1859</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s sinks several needlelike barbs into your %2$s!&quot;</span> ),</div>
<div class="line"><a id="l01860" name="l01860"></a><span class="lineno"> 1860</span>                                   z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l01861" name="l01861"></a><span class="lineno"> 1861</span>                                   <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( hit-&gt;token ) );</div>
<div class="line"><a id="l01862" name="l01862"></a><span class="lineno"> 1862</span> </div>
<div class="line"><a id="l01863" name="l01863"></a><span class="lineno"> 1863</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 15 - dam ) ) {</div>
<div class="line"><a id="l01864" name="l01864"></a><span class="lineno"> 1864</span>            target-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a>, 20_minutes, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a> );</div>
<div class="line"><a id="l01865" name="l01865"></a><span class="lineno"> 1865</span>            target-&gt;<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>,</div>
<div class="line"><a id="l01866" name="l01866"></a><span class="lineno"> 1866</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You feel thousands of live spores pumping into you…&quot;</span> ) );</div>
<div class="line"><a id="l01867" name="l01867"></a><span class="lineno"> 1867</span>        }</div>
<div class="line"><a id="l01868" name="l01868"></a><span class="lineno"> 1868</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01869" name="l01869"></a><span class="lineno"> 1869</span>        <span class="comment">//~ 1$s is monster name, 2$s bodypart in accusative</span></div>
<div class="line"><a id="l01870" name="l01870"></a><span class="lineno"> 1870</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s slashes your %2$s, but your armor protects you.&quot;</span> ),</div>
<div class="line"><a id="l01871" name="l01871"></a><span class="lineno"> 1871</span>                                   z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l01872" name="l01872"></a><span class="lineno"> 1872</span>                                   <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( hit-&gt;token ) );</div>
<div class="line"><a id="l01873" name="l01873"></a><span class="lineno"> 1873</span>    }</div>
<div class="line"><a id="l01874" name="l01874"></a><span class="lineno"> 1874</span> </div>
<div class="line"><a id="l01875" name="l01875"></a><span class="lineno"> 1875</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">on_hit</a>( z, hit,  z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> );</div>
<div class="line"><a id="l01876" name="l01876"></a><span class="lineno"> 1876</span> </div>
<div class="line"><a id="l01877" name="l01877"></a><span class="lineno"> 1877</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01878" name="l01878"></a><span class="lineno"> 1878</span>}</div>
<div class="ttc" id="adamage_8h_html_ae63a2cf8429f9edf77b547d34ffe4e7aa8ff698c0509e78ff65c7c7ec899b4f51"><div class="ttname"><a href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa8ff698c0509e78ff65c7c7ec899b4f51">DT_CUT</a></div><div class="ttdeci">@ DT_CUT</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00025">damage.h:25</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a08ed8f8240259a6a457502b0db459e08"><div class="ttname"><a href="monattack_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a></div><div class="ttdeci">static const efftype_id effect_fungus(&quot;fungus&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a0d7873e243723a1ba7390f11e934f61f"><div class="ttname"><a href="monattack_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">trait_THRESH_MARLOSS</a></div><div class="ttdeci">static const trait_id trait_THRESH_MARLOSS(&quot;THRESH_MARLOSS&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a40331e22a139e13b3b70f387c9fdd390"><div class="ttname"><a href="monattack_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a></div><div class="ttdeci">static const trait_id trait_THRESH_MYCUS(&quot;THRESH_MYCUS&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8cpp_source.html#l00974">Creature::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="creature_8h_source.html#l00593">Creature::add_msg_if_player()</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="bodypart_8cpp_source.html#l00329">body_part_name_accusative()</a>, <a class="el" href="creature_8cpp_source.html#l00873">Creature::deal_damage()</a>, <a class="el" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">Creature::disp_name()</a>, <a class="el" href="monattack_8cpp_source.html#l05764">dodge_check()</a>, <a class="el" href="damage_8h_source.html#l00025">DT_CUT</a>, <a class="el" href="monattack_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a>, <a class="el" href="monster_8h_source.html#l00471">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8cpp_source.html#l01614">Creature::get_random_body_part()</a>, <a class="el" href="monattack_8cpp_source.html#l00275">is_adjacent()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00260">m_neutral</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="mtype_8h_source.html#l00285">mtype::melee_skill</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="bodypart_8h_source.html#l00052">num_bp</a>, <a class="el" href="classCreature.html#af56188882e3300853d18f166738ee37a">Creature::on_dodge()</a>, <a class="el" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">Creature::on_hit()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, <a class="el" href="damage_8cpp_source.html#l00180">dealt_damage_instance::total_damage()</a>, <a class="el" href="monattack_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">trait_THRESH_MARLOSS</a>, <a class="el" href="monattack_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, and <a class="el" href="creature_8h_source.html#l00485">Creature::uncanny_dodge()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="ab78843bfc3956dcfebf4d0a9faae65d3" name="ab78843bfc3956dcfebf4d0a9faae65d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab78843bfc3956dcfebf4d0a9faae65d3">&#9670;&nbsp;</a></span>fungus_corporate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::fungus_corporate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l01694">1694</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01695" name="l01695"></a><span class="lineno"> 1695</span>{</div>
<div class="line"><a id="l01696" name="l01696"></a><span class="lineno"> 1696</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespaceiexamine.html#abb0c2d8b376175c6d36c01540095c652">fungus</a>( z );</div>
<div class="line"><a id="l01697" name="l01697"></a><span class="lineno"> 1697</span>}</div>
<div class="ttc" id="anamespaceiexamine_html_abb0c2d8b376175c6d36c01540095c652"><div class="ttname"><a href="namespaceiexamine.html#abb0c2d8b376175c6d36c01540095c652">iexamine::fungus</a></div><div class="ttdeci">void fungus(player &amp;p, const tripoint &amp;examp)</div><div class="ttdoc">Remove furniture.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02124">iexamine.cpp:2124</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="iexamine_8cpp_source.html#l02124">iexamine::fungus()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="ac4e5d51fdc2d3078ddadb72a9eda18c7" name="ac4e5d51fdc2d3078ddadb72a9eda18c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4e5d51fdc2d3078ddadb72a9eda18c7">&#9670;&nbsp;</a></span>fungus_fortify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::fungus_fortify </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l01916">1916</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01917" name="l01917"></a><span class="lineno"> 1917</span>{</div>
<div class="line"><a id="l01918" name="l01918"></a><span class="lineno"> 1918</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> ) {</div>
<div class="line"><a id="l01919" name="l01919"></a><span class="lineno"> 1919</span>        <span class="comment">// TODO: handle friendly monsters</span></div>
<div class="line"><a id="l01920" name="l01920"></a><span class="lineno"> 1920</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01921" name="l01921"></a><span class="lineno"> 1921</span>    }</div>
<div class="line"><a id="l01922" name="l01922"></a><span class="lineno"> 1922</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u;</div>
<div class="line"><a id="l01923" name="l01923"></a><span class="lineno"> 1923</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="namespaceiuse.html#a2a7f7b04683cbec09580da469a10ccb0">mycus</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01924" name="l01924"></a><span class="lineno"> 1924</span>    <span class="keywordtype">bool</span> peaceful = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01925" name="l01925"></a><span class="lineno"> 1925</span>    <span class="comment">//No nifty support effects.  Yet.  This lets it rebuild hedges.</span></div>
<div class="line"><a id="l01926" name="l01926"></a><span class="lineno"> 1926</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_trait( <a class="code hl_variable" href="monattack_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">trait_THRESH_MARLOSS</a> ) || <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_trait( <a class="code hl_variable" href="monattack_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a> ) ) {</div>
<div class="line"><a id="l01927" name="l01927"></a><span class="lineno"> 1927</span>        <a class="code hl_function" href="namespaceiuse.html#a2a7f7b04683cbec09580da469a10ccb0">mycus</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01928" name="l01928"></a><span class="lineno"> 1928</span>    }</div>
<div class="line"><a id="l01929" name="l01929"></a><span class="lineno"> 1929</span>    <span class="keywordflow">if</span>( ( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_trait( <a class="code hl_variable" href="monattack_8cpp.html#a9ed97178aef2274e9fdb82feeda84b3a">trait_MARLOSS</a> ) ) &amp;&amp; ( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_trait( <a class="code hl_variable" href="monattack_8cpp.html#ace9d1890ec80f6dd15d66b99f6d30d2e">trait_MARLOSS_BLUE</a> ) ) &amp;&amp;</div>
<div class="line"><a id="l01930" name="l01930"></a><span class="lineno"> 1930</span>        !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.crossed_threshold() &amp;&amp; !<a class="code hl_function" href="namespaceiuse.html#a2a7f7b04683cbec09580da469a10ccb0">mycus</a> ) {</div>
<div class="line"><a id="l01931" name="l01931"></a><span class="lineno"> 1931</span>        <span class="comment">// You have the other two.  Is it really necessary for us to fight?</span></div>
<div class="line"><a id="l01932" name="l01932"></a><span class="lineno"> 1932</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s spreads its tendrils.  It seems as though it&#39;s expecting you…&quot;</span> ),</div>
<div class="line"><a id="l01933" name="l01933"></a><span class="lineno"> 1933</span>                 z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l01934" name="l01934"></a><span class="lineno"> 1934</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() ) &lt; 3 ) {</div>
<div class="line"><a id="l01935" name="l01935"></a><span class="lineno"> 1935</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The tower extends and aims several tendrils from its depths.  Hold still?&quot;</span> ) ) ) {</div>
<div class="line"><a id="l01936" name="l01936"></a><span class="lineno"> 1936</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>,</div>
<div class="line"><a id="l01937" name="l01937"></a><span class="lineno"> 1937</span>                         <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s works several tendrils into your arms, legs, torso, and even neck…&quot;</span> ),</div>
<div class="line"><a id="l01938" name="l01938"></a><span class="lineno"> 1938</span>                         z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l01939" name="l01939"></a><span class="lineno"> 1939</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.hurtall( 1, z );</div>
<div class="line"><a id="l01940" name="l01940"></a><span class="lineno"> 1940</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>,</div>
<div class="line"><a id="l01941" name="l01941"></a><span class="lineno"> 1941</span>                         <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You see a clear golden liquid pump through the tendrils--and then lose consciousness.&quot;</span> ) );</div>
<div class="line"><a id="l01942" name="l01942"></a><span class="lineno"> 1942</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.unset_mutation( <a class="code hl_variable" href="monattack_8cpp.html#a9ed97178aef2274e9fdb82feeda84b3a">trait_MARLOSS</a> );</div>
<div class="line"><a id="l01943" name="l01943"></a><span class="lineno"> 1943</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.unset_mutation( <a class="code hl_variable" href="monattack_8cpp.html#ace9d1890ec80f6dd15d66b99f6d30d2e">trait_MARLOSS_BLUE</a> );</div>
<div class="line"><a id="l01944" name="l01944"></a><span class="lineno"> 1944</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.set_mutation( <a class="code hl_variable" href="monattack_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">trait_THRESH_MARLOSS</a> );</div>
<div class="line"><a id="l01945" name="l01945"></a><span class="lineno"> 1945</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.ter_set( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos(),</div>
<div class="line"><a id="l01946" name="l01946"></a><span class="lineno"> 1946</span>                              <a class="code hl_variable" href="mapdata_8cpp.html#ad5fdc2a50afac29f86454e5080aaa836">t_marloss</a> ); <span class="comment">// We only show you the door.  You walk through it on your own.</span></div>
<div class="line"><a id="l01947" name="l01947"></a><span class="lineno"> 1947</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;memorial().add(</div>
<div class="line"><a id="l01948" name="l01948"></a><span class="lineno"> 1948</span>                    <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;memorial_male&quot;</span>, <span class="stringliteral">&quot;Was shown to the Marloss Gateway.&quot;</span> ),</div>
<div class="line"><a id="l01949" name="l01949"></a><span class="lineno"> 1949</span>                    <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;memorial_female&quot;</span>, <span class="stringliteral">&quot;Was shown to the Marloss Gateway.&quot;</span> ) );</div>
<div class="line"><a id="l01950" name="l01950"></a><span class="lineno"> 1950</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.add_msg_if_player( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a id="l01951" name="l01951"></a><span class="lineno"> 1951</span>                                        <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You wake up in a marloss bush.  Almost *cradled* in it, actually, as though it grew there for you.&quot;</span> ) );</div>
<div class="line"><a id="l01952" name="l01952"></a><span class="lineno"> 1952</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.add_msg_if_player( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a id="l01953" name="l01953"></a><span class="lineno"> 1953</span>                                        <span class="comment">//~ Beginning to hear the Mycus while conscious: this is it speaking</span></div>
<div class="line"><a id="l01954" name="l01954"></a><span class="lineno"> 1954</span>                                        <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;assistance, on an arduous quest.  unity.  together we have reached the door.  now to pass through…&quot;</span> ) );</div>
<div class="line"><a id="l01955" name="l01955"></a><span class="lineno"> 1955</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01956" name="l01956"></a><span class="lineno"> 1956</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01957" name="l01957"></a><span class="lineno"> 1957</span>                peaceful = <span class="keyword">false</span>; <span class="comment">// You declined the offer.  Fight!</span></div>
<div class="line"><a id="l01958" name="l01958"></a><span class="lineno"> 1958</span>            }</div>
<div class="line"><a id="l01959" name="l01959"></a><span class="lineno"> 1959</span>        }</div>
<div class="line"><a id="l01960" name="l01960"></a><span class="lineno"> 1960</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01961" name="l01961"></a><span class="lineno"> 1961</span>        peaceful = <span class="keyword">false</span>; <span class="comment">// You weren&#39;t eligible.  Fight!</span></div>
<div class="line"><a id="l01962" name="l01962"></a><span class="lineno"> 1962</span>    }</div>
<div class="line"><a id="l01963" name="l01963"></a><span class="lineno"> 1963</span> </div>
<div class="line"><a id="l01964" name="l01964"></a><span class="lineno"> 1964</span>    <span class="keywordtype">bool</span> fortified = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01965" name="l01965"></a><span class="lineno"> 1965</span>    <span class="keywordtype">bool</span> push_player = <span class="keyword">false</span>; <span class="comment">// To avoid map shift weirdness</span></div>
<div class="line"><a id="l01966" name="l01966"></a><span class="lineno"> 1966</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;dest : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 1 ) ) {</div>
<div class="line"><a id="l01967" name="l01967"></a><span class="lineno"> 1967</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() == dest ) {</div>
<div class="line"><a id="l01968" name="l01968"></a><span class="lineno"> 1968</span>            push_player = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01969" name="l01969"></a><span class="lineno"> 1969</span>        }</div>
<div class="line"><a id="l01970" name="l01970"></a><span class="lineno"> 1970</span>        <span class="keywordflow">if</span>( <a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">const</span> wall = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_at( <a class="code hl_variable" href="monattack_8cpp.html#af7600a9c58d67c2d31a44253953568b5">mon_fungal_hedgerow</a>, dest ) ) {</div>
<div class="line"><a id="l01971" name="l01971"></a><span class="lineno"> 1971</span>            wall-&gt;make_ally( *z );</div>
<div class="line"><a id="l01972" name="l01972"></a><span class="lineno"> 1972</span>            fortified = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01973" name="l01973"></a><span class="lineno"> 1973</span>        }</div>
<div class="line"><a id="l01974" name="l01974"></a><span class="lineno"> 1974</span>    }</div>
<div class="line"><a id="l01975" name="l01975"></a><span class="lineno"> 1975</span>    <span class="keywordflow">if</span>( push_player ) {</div>
<div class="line"><a id="l01976" name="l01976"></a><span class="lineno"> 1976</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You&#39;re shoved away as a fungal hedgerow grows!&quot;</span> ) );</div>
<div class="line"><a id="l01977" name="l01977"></a><span class="lineno"> 1977</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;fling_creature( &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u, <a class="code hl_function" href="line_8cpp.html#a22f984836636053038f43340f9c50149">coord_to_angle</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() ), <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 10, 50 ) );</div>
<div class="line"><a id="l01978" name="l01978"></a><span class="lineno"> 1978</span>    }</div>
<div class="line"><a id="l01979" name="l01979"></a><span class="lineno"> 1979</span>    <span class="keywordflow">if</span>( fortified || <a class="code hl_function" href="namespaceiuse.html#a2a7f7b04683cbec09580da469a10ccb0">mycus</a> || peaceful ) {</div>
<div class="line"><a id="l01980" name="l01980"></a><span class="lineno"> 1980</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01981" name="l01981"></a><span class="lineno"> 1981</span>    }</div>
<div class="line"><a id="l01982" name="l01982"></a><span class="lineno"> 1982</span> </div>
<div class="line"><a id="l01983" name="l01983"></a><span class="lineno"> 1983</span>    <span class="comment">// TODO: De-playerize the whole block</span></div>
<div class="line"><a id="l01984" name="l01984"></a><span class="lineno"> 1984</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> dist = <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() );</div>
<div class="line"><a id="l01985" name="l01985"></a><span class="lineno"> 1985</span>    <span class="keywordflow">if</span>( dist &gt;= 12 ) {</div>
<div class="line"><a id="l01986" name="l01986"></a><span class="lineno"> 1986</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01987" name="l01987"></a><span class="lineno"> 1987</span>    }</div>
<div class="line"><a id="l01988" name="l01988"></a><span class="lineno"> 1988</span> </div>
<div class="line"><a id="l01989" name="l01989"></a><span class="lineno"> 1989</span>    <span class="keywordflow">if</span>( dist &gt; 3 ) {</div>
<div class="line"><a id="l01990" name="l01990"></a><span class="lineno"> 1990</span>        <span class="comment">// Oops, can&#39;t reach. ):</span></div>
<div class="line"><a id="l01991" name="l01991"></a><span class="lineno"> 1991</span>        <span class="comment">// How&#39;s about we spawn more tendrils? :)</span></div>
<div class="line"><a id="l01992" name="l01992"></a><span class="lineno"> 1992</span>        <span class="comment">// Aimed at the player, too?  Sure!</span></div>
<div class="line"><a id="l01993" name="l01993"></a><span class="lineno"> 1993</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> hit_pos = target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() + <a class="code hl_struct" href="structpoint.html">point</a>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( -1, 1 ), <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( -1, 1 ) );</div>
<div class="line"><a id="l01994" name="l01994"></a><span class="lineno"> 1994</span>        <span class="keywordflow">if</span>( hit_pos == target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() &amp;&amp; !target-&gt;<a class="code hl_function" href="classCreature.html#afd2f1b1e5bafdef20afddbb704b1d5a5">uncanny_dodge</a>() ) {</div>
<div class="line"><a id="l01995" name="l01995"></a><span class="lineno"> 1995</span>            <span class="keyword">const</span> <a class="code hl_enumeration" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980">body_part</a> hit = <a class="code hl_function" href="monattack_8cpp.html#a8f0b88c954254f70e976bb0fabe2287f">body_part_hit_by_plant</a>();</div>
<div class="line"><a id="l01996" name="l01996"></a><span class="lineno"> 1996</span>            <span class="comment">//~ %s is bodypart name in accusative.</span></div>
<div class="line"><a id="l01997" name="l01997"></a><span class="lineno"> 1997</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A fungal tendril bursts forth from the earth and pierces your %s!&quot;</span> ),</div>
<div class="line"><a id="l01998" name="l01998"></a><span class="lineno"> 1998</span>                     <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( hit ) );</div>
<div class="line"><a id="l01999" name="l01999"></a><span class="lineno"> 1999</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.deal_damage( z, <a class="code hl_function" href="bodypart_8cpp.html#ae34a481a7c686b233f2d8c48e43b723a">convert_bp</a>( hit ).<span class="keywordtype">id</span>(), <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa8ff698c0509e78ff65c7c7ec899b4f51">DT_CUT</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 5, 11 ) ) );</div>
<div class="line"><a id="l02000" name="l02000"></a><span class="lineno"> 2000</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.check_dead_state();</div>
<div class="line"><a id="l02001" name="l02001"></a><span class="lineno"> 2001</span>            <span class="comment">// Probably doesn&#39;t have spores available *just* yet.  Let&#39;s be nice.</span></div>
<div class="line"><a id="l02002" name="l02002"></a><span class="lineno"> 2002</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">const</span> tendril = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_at( <a class="code hl_variable" href="monattack_8cpp.html#a81e2d7b247f13b42f448d596de641a0e">mon_fungal_tendril</a>, hit_pos ) ) {</div>
<div class="line"><a id="l02003" name="l02003"></a><span class="lineno"> 2003</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A fungal tendril bursts forth from the earth!&quot;</span> ) );</div>
<div class="line"><a id="l02004" name="l02004"></a><span class="lineno"> 2004</span>            tendril-&gt;make_ally( *z );</div>
<div class="line"><a id="l02005" name="l02005"></a><span class="lineno"> 2005</span>        }</div>
<div class="line"><a id="l02006" name="l02006"></a><span class="lineno"> 2006</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02007" name="l02007"></a><span class="lineno"> 2007</span>    }</div>
<div class="line"><a id="l02008" name="l02008"></a><span class="lineno"> 2008</span> </div>
<div class="line"><a id="l02009" name="l02009"></a><span class="lineno"> 2009</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s takes aim, and spears at you with a massive tendril!&quot;</span> ),</div>
<div class="line"><a id="l02010" name="l02010"></a><span class="lineno"> 2010</span>             z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02011" name="l02011"></a><span class="lineno"> 2011</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 150;</div>
<div class="line"><a id="l02012" name="l02012"></a><span class="lineno"> 2012</span> </div>
<div class="line"><a id="l02013" name="l02013"></a><span class="lineno"> 2013</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.uncanny_dodge() ) {</div>
<div class="line"><a id="l02014" name="l02014"></a><span class="lineno"> 2014</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02015" name="l02015"></a><span class="lineno"> 2015</span>    }</div>
<div class="line"><a id="l02016" name="l02016"></a><span class="lineno"> 2016</span>    <span class="comment">// Can we dodge the attack? Uses player dodge function % chance (melee.cpp)</span></div>
<div class="line"><a id="l02017" name="l02017"></a><span class="lineno"> 2017</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacemattack.html#a4efb8be314551e35f69df8cf8d824174">dodge_check</a>( z, target ) ) {</div>
<div class="line"><a id="l02018" name="l02018"></a><span class="lineno"> 2018</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You dodge it!&quot;</span> ),</div>
<div class="line"><a id="l02019" name="l02019"></a><span class="lineno"> 2019</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; dodges it!&quot;</span> ) );</div>
<div class="line"><a id="l02020" name="l02020"></a><span class="lineno"> 2020</span>        target-&gt;<a class="code hl_function" href="classCreature.html#af56188882e3300853d18f166738ee37a">on_dodge</a>( z, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> * 2 );</div>
<div class="line"><a id="l02021" name="l02021"></a><span class="lineno"> 2021</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02022" name="l02022"></a><span class="lineno"> 2022</span>    }</div>
<div class="line"><a id="l02023" name="l02023"></a><span class="lineno"> 2023</span> </div>
<div class="line"><a id="l02024" name="l02024"></a><span class="lineno"> 2024</span>    <span class="comment">// TODO: 21 damage with no chance to critical isn&#39;t scary</span></div>
<div class="line"><a id="l02025" name="l02025"></a><span class="lineno"> 2025</span>    <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">bodypart_id</a> hit = target-&gt;<a class="code hl_function" href="classCreature.html#a51c96c81ae1ea766b5eead4a265c1492">get_random_body_part</a>();</div>
<div class="line"><a id="l02026" name="l02026"></a><span class="lineno"> 2026</span>    <span class="keywordtype">int</span> dam = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 15, 21 );</div>
<div class="line"><a id="l02027" name="l02027"></a><span class="lineno"> 2027</span>    dam = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.deal_damage( z, hit, <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa12e559f29e023db673e9251b9337d8dd">DT_STAB</a>, dam ) ).total_damage();</div>
<div class="line"><a id="l02028" name="l02028"></a><span class="lineno"> 2028</span> </div>
<div class="line"><a id="l02029" name="l02029"></a><span class="lineno"> 2029</span>    <span class="keywordflow">if</span>( dam &gt; 0 ) {</div>
<div class="line"><a id="l02030" name="l02030"></a><span class="lineno"> 2030</span>        <span class="comment">//~ 1$s is monster name, 2$s bodypart in accusative</span></div>
<div class="line"><a id="l02031" name="l02031"></a><span class="lineno"> 2031</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s sinks its point into your %2$s!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l02032" name="l02032"></a><span class="lineno"> 2032</span>                 <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( hit-&gt;token ) );</div>
<div class="line"><a id="l02033" name="l02033"></a><span class="lineno"> 2033</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.add_effect( <a class="code hl_variable" href="monattack_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a>, 40_minutes, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a> );</div>
<div class="line"><a id="l02034" name="l02034"></a><span class="lineno"> 2034</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You feel millions of live spores pumping into you…&quot;</span> ) );</div>
<div class="line"><a id="l02035" name="l02035"></a><span class="lineno"> 2035</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02036" name="l02036"></a><span class="lineno"> 2036</span>        <span class="comment">//~ 1$s is monster name, 2$s bodypart in accusative</span></div>
<div class="line"><a id="l02037" name="l02037"></a><span class="lineno"> 2037</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s strikes your %2$s, but your armor protects you.&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l02038" name="l02038"></a><span class="lineno"> 2038</span>                 <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( hit-&gt;token ) );</div>
<div class="line"><a id="l02039" name="l02039"></a><span class="lineno"> 2039</span>    }</div>
<div class="line"><a id="l02040" name="l02040"></a><span class="lineno"> 2040</span> </div>
<div class="line"><a id="l02041" name="l02041"></a><span class="lineno"> 2041</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">on_hit</a>( z, hit,  z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> );</div>
<div class="line"><a id="l02042" name="l02042"></a><span class="lineno"> 2042</span>    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.check_dead_state();</div>
<div class="line"><a id="l02043" name="l02043"></a><span class="lineno"> 2043</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02044" name="l02044"></a><span class="lineno"> 2044</span>}</div>
<div class="ttc" id="amapdata_8cpp_html_ad5fdc2a50afac29f86454e5080aaa836"><div class="ttname"><a href="mapdata_8cpp.html#ad5fdc2a50afac29f86454e5080aaa836">t_marloss</a></div><div class="ttdeci">ter_id t_marloss</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00690">mapdata.cpp:690</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a81e2d7b247f13b42f448d596de641a0e"><div class="ttname"><a href="monattack_8cpp.html#a81e2d7b247f13b42f448d596de641a0e">mon_fungal_tendril</a></div><div class="ttdeci">static const mtype_id mon_fungal_tendril(&quot;mon_fungal_tendril&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a8f0b88c954254f70e976bb0fabe2287f"><div class="ttname"><a href="monattack_8cpp.html#a8f0b88c954254f70e976bb0fabe2287f">body_part_hit_by_plant</a></div><div class="ttdeci">static body_part body_part_hit_by_plant()</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l01387">monattack.cpp:1387</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a9ed97178aef2274e9fdb82feeda84b3a"><div class="ttname"><a href="monattack_8cpp.html#a9ed97178aef2274e9fdb82feeda84b3a">trait_MARLOSS</a></div><div class="ttdeci">static const trait_id trait_MARLOSS(&quot;MARLOSS&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_ace9d1890ec80f6dd15d66b99f6d30d2e"><div class="ttname"><a href="monattack_8cpp.html#ace9d1890ec80f6dd15d66b99f6d30d2e">trait_MARLOSS_BLUE</a></div><div class="ttdeci">static const trait_id trait_MARLOSS_BLUE(&quot;MARLOSS_BLUE&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_af7600a9c58d67c2d31a44253953568b5"><div class="ttname"><a href="monattack_8cpp.html#af7600a9c58d67c2d31a44253953568b5">mon_fungal_hedgerow</a></div><div class="ttdeci">static const mtype_id mon_fungal_hedgerow(&quot;mon_fungal_hedgerow&quot;)</div></div>
<div class="ttc" id="anamespaceiuse_html_a2a7f7b04683cbec09580da469a10ccb0"><div class="ttname"><a href="namespaceiuse.html#a2a7f7b04683cbec09580da469a10ccb0">iuse::mycus</a></div><div class="ttdeci">int mycus(player *, item *, bool, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01436">iuse.cpp:1436</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ab62599a77867b8f416669b92f60f4900"><div class="ttname"><a href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a></div><div class="ttdeci">bool query_yn(const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00698">output.cpp:698</a></div></div>
<div class="ttc" id="astructpoint_html"><div class="ttname"><a href="structpoint.html">point</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00035">point.h:35</a></div></div>
<div class="ttc" id="atranslations_8cpp_html_af0c79b5c75a7cf2df78663485b03ed9a"><div class="ttname"><a href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a></div><div class="ttdeci">const char * pgettext(const char *context, const char *msgid)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8cpp_source.html#l00041">translations.cpp:41</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="monattack_8cpp_source.html#l01387">body_part_hit_by_plant()</a>, <a class="el" href="bodypart_8cpp_source.html#l00329">body_part_name_accusative()</a>, <a class="el" href="bodypart_8cpp_source.html#l00185">convert_bp()</a>, <a class="el" href="line_8cpp_source.html#l00781">coord_to_angle()</a>, <a class="el" href="monattack_8cpp_source.html#l05764">dodge_check()</a>, <a class="el" href="damage_8h_source.html#l00025">DT_CUT</a>, <a class="el" href="damage_8h_source.html#l00027">DT_STAB</a>, <a class="el" href="monattack_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a>, <a class="el" href="monster_8h_source.html#l00471">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8cpp_source.html#l01614">Creature::get_random_body_part()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00253">m_good</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="mtype_8h_source.html#l00285">mtype::melee_skill</a>, <a class="el" href="monattack_8cpp.html#af7600a9c58d67c2d31a44253953568b5">mon_fungal_hedgerow</a>, <a class="el" href="monattack_8cpp.html#a81e2d7b247f13b42f448d596de641a0e">mon_fungal_tendril</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="iuse_8cpp_source.html#l01436">iuse::mycus()</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="bodypart_8h_source.html#l00052">num_bp</a>, <a class="el" href="classCreature.html#af56188882e3300853d18f166738ee37a">Creature::on_dodge()</a>, <a class="el" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">Creature::on_hit()</a>, <a class="el" href="translations_8cpp_source.html#l00041">pgettext()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="mapdata_8cpp_source.html#l00690">t_marloss</a>, <a class="el" href="monattack_8cpp.html#a9ed97178aef2274e9fdb82feeda84b3a">trait_MARLOSS</a>, <a class="el" href="monattack_8cpp.html#ace9d1890ec80f6dd15d66b99f6d30d2e">trait_MARLOSS_BLUE</a>, <a class="el" href="monattack_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">trait_THRESH_MARLOSS</a>, <a class="el" href="monattack_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, and <a class="el" href="creature_8h_source.html#l00485">Creature::uncanny_dodge()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a124e905e0cd85a68773c0e09adefdfbf" name="a124e905e0cd85a68773c0e09adefdfbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a124e905e0cd85a68773c0e09adefdfbf">&#9670;&nbsp;</a></span>fungus_growth()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::fungus_growth </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l01880">1880</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01881" name="l01881"></a><span class="lineno"> 1881</span>{</div>
<div class="line"><a id="l01882" name="l01882"></a><span class="lineno"> 1882</span>    <span class="comment">// Young fungaloid growing into an adult</span></div>
<div class="line"><a id="l01883" name="l01883"></a><span class="lineno"> 1883</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l01884" name="l01884"></a><span class="lineno"> 1884</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s grows into an adult!&quot;</span> ),</div>
<div class="line"><a id="l01885" name="l01885"></a><span class="lineno"> 1885</span>                 z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l01886" name="l01886"></a><span class="lineno"> 1886</span>    }</div>
<div class="line"><a id="l01887" name="l01887"></a><span class="lineno"> 1887</span> </div>
<div class="line"><a id="l01888" name="l01888"></a><span class="lineno"> 1888</span>    z-&gt;<a class="code hl_function" href="classmonster.html#a39d78be1e47deaf970439c3b9504e5d9">poly</a>( <a class="code hl_variable" href="monattack_8cpp.html#a1e01207b59e0022ea10e86f616cf4b24">mon_fungaloid</a> );</div>
<div class="line"><a id="l01889" name="l01889"></a><span class="lineno"> 1889</span> </div>
<div class="line"><a id="l01890" name="l01890"></a><span class="lineno"> 1890</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01891" name="l01891"></a><span class="lineno"> 1891</span>}</div>
<div class="ttc" id="amonattack_8cpp_html_a1e01207b59e0022ea10e86f616cf4b24"><div class="ttname"><a href="monattack_8cpp.html#a1e01207b59e0022ea10e86f616cf4b24">mon_fungaloid</a></div><div class="ttdeci">static const mtype_id mon_fungaloid(&quot;mon_fungaloid&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="monattack_8cpp.html#a1e01207b59e0022ea10e86f616cf4b24">mon_fungaloid</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, and <a class="el" href="monster_8cpp_source.html#l00260">monster::poly()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="ae177db37f394ecc7a1e55efa671b39ff" name="ae177db37f394ecc7a1e55efa671b39ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae177db37f394ecc7a1e55efa671b39ff">&#9670;&nbsp;</a></span>fungus_haze()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::fungus_haze </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l01699">1699</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01700" name="l01700"></a><span class="lineno"> 1700</span>{</div>
<div class="line"><a id="l01701" name="l01701"></a><span class="lineno"> 1701</span>    <span class="comment">//~ That spore sound again</span></div>
<div class="line"><a id="l01702" name="l01702"></a><span class="lineno"> 1702</span>    <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 10, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Pouf!&quot;</span> ), <span class="keyword">true</span>, <span class="stringliteral">&quot;misc&quot;</span>, <span class="stringliteral">&quot;puff&quot;</span> );</div>
<div class="line"><a id="l01703" name="l01703"></a><span class="lineno"> 1703</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l01704" name="l01704"></a><span class="lineno"> 1704</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s pulses, and fresh fungal material bursts forth.&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l01705" name="l01705"></a><span class="lineno"> 1705</span>    }</div>
<div class="line"><a id="l01706" name="l01706"></a><span class="lineno"> 1706</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 150;</div>
<div class="line"><a id="l01707" name="l01707"></a><span class="lineno"> 1707</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;dest : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 3 ) ) {</div>
<div class="line"><a id="l01708" name="l01708"></a><span class="lineno"> 1708</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_field( dest, <a class="code hl_variable" href="field__type_8cpp.html#a68f6e17053fde556f8a2cfce44287997">fd_fungal_haze</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 2 ) );</div>
<div class="line"><a id="l01709" name="l01709"></a><span class="lineno"> 1709</span>    }</div>
<div class="line"><a id="l01710" name="l01710"></a><span class="lineno"> 1710</span> </div>
<div class="line"><a id="l01711" name="l01711"></a><span class="lineno"> 1711</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01712" name="l01712"></a><span class="lineno"> 1712</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::combat</a>, <a class="el" href="field__type_8cpp_source.html#l00374">fd_fungal_haze</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, and <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a7337d81c74b581c18bd4a1cedb0fb9c1" name="a7337d81c74b581c18bd4a1cedb0fb9c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7337d81c74b581c18bd4a1cedb0fb9c1">&#9670;&nbsp;</a></span>fungus_inject()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::fungus_inject </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l01760">1760</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01761" name="l01761"></a><span class="lineno"> 1761</span>{</div>
<div class="line"><a id="l01762" name="l01762"></a><span class="lineno"> 1762</span>    <span class="comment">// For faster copy+paste</span></div>
<div class="line"><a id="l01763" name="l01763"></a><span class="lineno"> 1763</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u;</div>
<div class="line"><a id="l01764" name="l01764"></a><span class="lineno"> 1764</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() ) &gt; 1 ) {</div>
<div class="line"><a id="l01765" name="l01765"></a><span class="lineno"> 1765</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01766" name="l01766"></a><span class="lineno"> 1766</span>    }</div>
<div class="line"><a id="l01767" name="l01767"></a><span class="lineno"> 1767</span> </div>
<div class="line"><a id="l01768" name="l01768"></a><span class="lineno"> 1768</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_trait( <a class="code hl_variable" href="monattack_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">trait_THRESH_MARLOSS</a> ) || <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_trait( <a class="code hl_variable" href="monattack_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a> ) ) {</div>
<div class="line"><a id="l01769" name="l01769"></a><span class="lineno"> 1769</span>        z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> = 1;</div>
<div class="line"><a id="l01770" name="l01770"></a><span class="lineno"> 1770</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01771" name="l01771"></a><span class="lineno"> 1771</span>    }</div>
<div class="line"><a id="l01772" name="l01772"></a><span class="lineno"> 1772</span>    <span class="keywordflow">if</span>( ( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_trait( <a class="code hl_variable" href="monattack_8cpp.html#a9ed97178aef2274e9fdb82feeda84b3a">trait_MARLOSS</a> ) ) &amp;&amp; ( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_trait( <a class="code hl_variable" href="monattack_8cpp.html#ace9d1890ec80f6dd15d66b99f6d30d2e">trait_MARLOSS_BLUE</a> ) ) &amp;&amp;</div>
<div class="line"><a id="l01773" name="l01773"></a><span class="lineno"> 1773</span>        !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.crossed_threshold() ) {</div>
<div class="line"><a id="l01774" name="l01774"></a><span class="lineno"> 1774</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s seems to wave you toward the tower…&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l01775" name="l01775"></a><span class="lineno"> 1775</span>        z-&gt;<a class="code hl_variable" href="classmonster.html#a7b22fe8719e4783fe1896429cedefa8d">anger</a> = 0;</div>
<div class="line"><a id="l01776" name="l01776"></a><span class="lineno"> 1776</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01777" name="l01777"></a><span class="lineno"> 1777</span>    }</div>
<div class="line"><a id="l01778" name="l01778"></a><span class="lineno"> 1778</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> ) {</div>
<div class="line"><a id="l01779" name="l01779"></a><span class="lineno"> 1779</span>        <span class="comment">// TODO: attack other creatures, not just g-&gt;u, for now just skip the code below as it</span></div>
<div class="line"><a id="l01780" name="l01780"></a><span class="lineno"> 1780</span>        <span class="comment">// only attacks g-&gt;u but the monster is friendly.</span></div>
<div class="line"><a id="l01781" name="l01781"></a><span class="lineno"> 1781</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01782" name="l01782"></a><span class="lineno"> 1782</span>    }</div>
<div class="line"><a id="l01783" name="l01783"></a><span class="lineno"> 1783</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s jabs at you with a needlelike point!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l01784" name="l01784"></a><span class="lineno"> 1784</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 150;</div>
<div class="line"><a id="l01785" name="l01785"></a><span class="lineno"> 1785</span> </div>
<div class="line"><a id="l01786" name="l01786"></a><span class="lineno"> 1786</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.uncanny_dodge() ) {</div>
<div class="line"><a id="l01787" name="l01787"></a><span class="lineno"> 1787</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01788" name="l01788"></a><span class="lineno"> 1788</span>    }</div>
<div class="line"><a id="l01789" name="l01789"></a><span class="lineno"> 1789</span> </div>
<div class="line"><a id="l01790" name="l01790"></a><span class="lineno"> 1790</span>    <span class="comment">// Can we dodge the attack? Uses player dodge function % chance (melee.cpp)</span></div>
<div class="line"><a id="l01791" name="l01791"></a><span class="lineno"> 1791</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacemattack.html#a4efb8be314551e35f69df8cf8d824174">dodge_check</a>( z, target ) ) {</div>
<div class="line"><a id="l01792" name="l01792"></a><span class="lineno"> 1792</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You dodge it!&quot;</span> ),</div>
<div class="line"><a id="l01793" name="l01793"></a><span class="lineno"> 1793</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; dodges it!&quot;</span> ) );</div>
<div class="line"><a id="l01794" name="l01794"></a><span class="lineno"> 1794</span>        target-&gt;<a class="code hl_function" href="classCreature.html#af56188882e3300853d18f166738ee37a">on_dodge</a>( z, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> * 2 );</div>
<div class="line"><a id="l01795" name="l01795"></a><span class="lineno"> 1795</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01796" name="l01796"></a><span class="lineno"> 1796</span>    }</div>
<div class="line"><a id="l01797" name="l01797"></a><span class="lineno"> 1797</span> </div>
<div class="line"><a id="l01798" name="l01798"></a><span class="lineno"> 1798</span>    <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">bodypart_id</a> hit = target-&gt;<a class="code hl_function" href="classCreature.html#a51c96c81ae1ea766b5eead4a265c1492">get_random_body_part</a>();</div>
<div class="line"><a id="l01799" name="l01799"></a><span class="lineno"> 1799</span>    <span class="keywordtype">int</span> dam = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 5, 11 );</div>
<div class="line"><a id="l01800" name="l01800"></a><span class="lineno"> 1800</span>    dam = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.deal_damage( z, hit, <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa8ff698c0509e78ff65c7c7ec899b4f51">DT_CUT</a>, dam ) ).total_damage();</div>
<div class="line"><a id="l01801" name="l01801"></a><span class="lineno"> 1801</span> </div>
<div class="line"><a id="l01802" name="l01802"></a><span class="lineno"> 1802</span>    <span class="keywordflow">if</span>( dam &gt; 0 ) {</div>
<div class="line"><a id="l01803" name="l01803"></a><span class="lineno"> 1803</span>        <span class="comment">//~ 1$s is monster name, 2$s bodypart in accusative</span></div>
<div class="line"><a id="l01804" name="l01804"></a><span class="lineno"> 1804</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s sinks its point into your %2$s!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l01805" name="l01805"></a><span class="lineno"> 1805</span>                 <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( hit-&gt;token ) );</div>
<div class="line"><a id="l01806" name="l01806"></a><span class="lineno"> 1806</span> </div>
<div class="line"><a id="l01807" name="l01807"></a><span class="lineno"> 1807</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 10 - dam ) ) {</div>
<div class="line"><a id="l01808" name="l01808"></a><span class="lineno"> 1808</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.add_effect( <a class="code hl_variable" href="monattack_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a>, 10_minutes, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a> );</div>
<div class="line"><a id="l01809" name="l01809"></a><span class="lineno"> 1809</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You feel thousands of live spores pumping into you…&quot;</span> ) );</div>
<div class="line"><a id="l01810" name="l01810"></a><span class="lineno"> 1810</span>        }</div>
<div class="line"><a id="l01811" name="l01811"></a><span class="lineno"> 1811</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01812" name="l01812"></a><span class="lineno"> 1812</span>        <span class="comment">//~ 1$s is monster name, 2$s bodypart in accusative</span></div>
<div class="line"><a id="l01813" name="l01813"></a><span class="lineno"> 1813</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s strikes your %2$s, but your armor protects you.&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l01814" name="l01814"></a><span class="lineno"> 1814</span>                 <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( hit-&gt;token ) );</div>
<div class="line"><a id="l01815" name="l01815"></a><span class="lineno"> 1815</span>    }</div>
<div class="line"><a id="l01816" name="l01816"></a><span class="lineno"> 1816</span> </div>
<div class="line"><a id="l01817" name="l01817"></a><span class="lineno"> 1817</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">on_hit</a>( z, hit,  z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> );</div>
<div class="line"><a id="l01818" name="l01818"></a><span class="lineno"> 1818</span>    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.check_dead_state();</div>
<div class="line"><a id="l01819" name="l01819"></a><span class="lineno"> 1819</span> </div>
<div class="line"><a id="l01820" name="l01820"></a><span class="lineno"> 1820</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01821" name="l01821"></a><span class="lineno"> 1821</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="monster_8h_source.html#l00472">monster::anger</a>, <a class="el" href="bodypart_8cpp_source.html#l00329">body_part_name_accusative()</a>, <a class="el" href="monattack_8cpp_source.html#l05764">dodge_check()</a>, <a class="el" href="damage_8h_source.html#l00025">DT_CUT</a>, <a class="el" href="monattack_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a>, <a class="el" href="monster_8h_source.html#l00471">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8cpp_source.html#l01614">Creature::get_random_body_part()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="mtype_8h_source.html#l00285">mtype::melee_skill</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="bodypart_8h_source.html#l00052">num_bp</a>, <a class="el" href="classCreature.html#af56188882e3300853d18f166738ee37a">Creature::on_dodge()</a>, <a class="el" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">Creature::on_hit()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="monattack_8cpp.html#a9ed97178aef2274e9fdb82feeda84b3a">trait_MARLOSS</a>, <a class="el" href="monattack_8cpp.html#ace9d1890ec80f6dd15d66b99f6d30d2e">trait_MARLOSS_BLUE</a>, <a class="el" href="monattack_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">trait_THRESH_MARLOSS</a>, <a class="el" href="monattack_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a>, and <a class="el" href="monster_8h_source.html#l00478">monster::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a5c9e9b3034ba4b0fd002a7131c5609bf" name="a5c9e9b3034ba4b0fd002a7131c5609bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c9e9b3034ba4b0fd002a7131c5609bf">&#9670;&nbsp;</a></span>fungus_sprout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::fungus_sprout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l01893">1893</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01894" name="l01894"></a><span class="lineno"> 1894</span>{</div>
<div class="line"><a id="l01895" name="l01895"></a><span class="lineno"> 1895</span>    <a class="code hl_class" href="classCharacter.html">Character</a> &amp;player_character = <a class="code hl_function" href="character_8cpp.html#a2fcb25d686f4a35fca374c6f71280311">get_player_character</a>();</div>
<div class="line"><a id="l01896" name="l01896"></a><span class="lineno"> 1896</span>    <span class="comment">// To avoid map shift weirdness</span></div>
<div class="line"><a id="l01897" name="l01897"></a><span class="lineno"> 1897</span>    <span class="keywordtype">bool</span> push_player = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01898" name="l01898"></a><span class="lineno"> 1898</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;dest : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 1 ) ) {</div>
<div class="line"><a id="l01899" name="l01899"></a><span class="lineno"> 1899</span>        <span class="keywordflow">if</span>( player_character.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() == dest ) {</div>
<div class="line"><a id="l01900" name="l01900"></a><span class="lineno"> 1900</span>            push_player = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01901" name="l01901"></a><span class="lineno"> 1901</span>        }</div>
<div class="line"><a id="l01902" name="l01902"></a><span class="lineno"> 1902</span>        <span class="keywordflow">if</span>( <a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">const</span> wall = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_at( <a class="code hl_variable" href="monattack_8cpp.html#a043e3cf8774f88c9521a646119178b65">mon_fungal_wall</a>, dest ) ) {</div>
<div class="line"><a id="l01903" name="l01903"></a><span class="lineno"> 1903</span>            wall-&gt;make_ally( *z );</div>
<div class="line"><a id="l01904" name="l01904"></a><span class="lineno"> 1904</span>        }</div>
<div class="line"><a id="l01905" name="l01905"></a><span class="lineno"> 1905</span>    }</div>
<div class="line"><a id="l01906" name="l01906"></a><span class="lineno"> 1906</span> </div>
<div class="line"><a id="l01907" name="l01907"></a><span class="lineno"> 1907</span>    <span class="keywordflow">if</span>( push_player ) {</div>
<div class="line"><a id="l01908" name="l01908"></a><span class="lineno"> 1908</span>        <span class="keyword">const</span> <a class="code hl_class" href="classunits_1_1quantity.html">units::angle</a> <a class="code hl_typedef" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">angle</a> = <a class="code hl_function" href="line_8cpp.html#a22f984836636053038f43340f9c50149">coord_to_angle</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), player_character.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() );</div>
<div class="line"><a id="l01909" name="l01909"></a><span class="lineno"> 1909</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You&#39;re shoved away as a fungal wall grows!&quot;</span> ) );</div>
<div class="line"><a id="l01910" name="l01910"></a><span class="lineno"> 1910</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;fling_creature( &amp;player_character, <a class="code hl_typedef" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">angle</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 10, 50 ) );</div>
<div class="line"><a id="l01911" name="l01911"></a><span class="lineno"> 1911</span>    }</div>
<div class="line"><a id="l01912" name="l01912"></a><span class="lineno"> 1912</span> </div>
<div class="line"><a id="l01913" name="l01913"></a><span class="lineno"> 1913</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01914" name="l01914"></a><span class="lineno"> 1914</span>}</div>
<div class="ttc" id="acharacter_8cpp_html_a2fcb25d686f4a35fca374c6f71280311"><div class="ttname"><a href="character_8cpp.html#a2fcb25d686f4a35fca374c6f71280311">get_player_character</a></div><div class="ttdeci">Character &amp; get_player_character()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00381">character.cpp:381</a></div></div>
<div class="ttc" id="aclassCharacter_html"><div class="ttname"><a href="classCharacter.html">Character</a></div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00259">character.h:260</a></div></div>
<div class="ttc" id="aclassunits_1_1quantity_html"><div class="ttname"><a href="classunits_1_1quantity.html">units::quantity</a></div><div class="ttdef"><b>Definition:</b> <a href="units__def_8h_source.html#l00014">units_def.h:15</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a043e3cf8774f88c9521a646119178b65"><div class="ttname"><a href="monattack_8cpp.html#a043e3cf8774f88c9521a646119178b65">mon_fungal_wall</a></div><div class="ttdeci">static const mtype_id mon_fungal_wall(&quot;mon_fungal_wall&quot;)</div></div>
<div class="ttc" id="anamespaceunits_html_a2c7fe916bf04655f9fb4f2abdc5d28ed"><div class="ttname"><a href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">units::angle</a></div><div class="ttdeci">quantity&lt; double, angle_in_radians_tag &gt; angle</div><div class="ttdef"><b>Definition:</b> <a href="units__angle_8h_source.html#l00017">units_angle.h:17</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="line_8cpp_source.html#l00781">coord_to_angle()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="character_8cpp_source.html#l00381">get_player_character()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="monattack_8cpp.html#a043e3cf8774f88c9521a646119178b65">mon_fungal_wall</a>, <a class="el" href="character_8cpp_source.html#l00707">Character::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, and <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="aaa5607dbeec11e77053fd8a80ce34ff1" name="aaa5607dbeec11e77053fd8a80ce34ff1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa5607dbeec11e77053fd8a80ce34ff1">&#9670;&nbsp;</a></span>gene_sting()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::gene_sting </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l02775">2775</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02776" name="l02776"></a><span class="lineno"> 2776</span>{</div>
<div class="line"><a id="l02777" name="l02777"></a><span class="lineno"> 2777</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> range = 7.0f;</div>
<div class="line"><a id="l02778" name="l02778"></a><span class="lineno"> 2778</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = <a class="code hl_function" href="monattack_8cpp.html#aaf60dff9863e93c2ff058ac3d17bf715">sting_get_target</a>( z, range );</div>
<div class="line"><a id="l02779" name="l02779"></a><span class="lineno"> 2779</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> || !( target-&gt;<a class="code hl_function" href="classCreature.html#a1217a190a2e561227e831a72d4a6d390">is_player</a>() || target-&gt;<a class="code hl_function" href="classCreature.html#aed84fe52e1335d48d53f482f8a278c87">is_npc</a>() ) ) {</div>
<div class="line"><a id="l02780" name="l02780"></a><span class="lineno"> 2780</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02781" name="l02781"></a><span class="lineno"> 2781</span>    }</div>
<div class="line"><a id="l02782" name="l02782"></a><span class="lineno"> 2782</span> </div>
<div class="line"><a id="l02783" name="l02783"></a><span class="lineno"> 2783</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 150;</div>
<div class="line"><a id="l02784" name="l02784"></a><span class="lineno"> 2784</span> </div>
<div class="line"><a id="l02785" name="l02785"></a><span class="lineno"> 2785</span>    <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a> dam = <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>();</div>
<div class="line"><a id="l02786" name="l02786"></a><span class="lineno"> 2786</span>    dam.<a class="code hl_function" href="structdamage__instance.html#a36067fd68baf04345d0c3626c67b8cac">add_damage</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa12e559f29e023db673e9251b9337d8dd">DT_STAB</a>, 6, 10, 0.6, 1 );</div>
<div class="line"><a id="l02787" name="l02787"></a><span class="lineno"> 2787</span>    <span class="keywordtype">bool</span> hit = <a class="code hl_function" href="monattack_8cpp.html#a7123ec8fe05b2572b4d1907ef501a552">sting_shoot</a>( z, target, dam, range );</div>
<div class="line"><a id="l02788" name="l02788"></a><span class="lineno"> 2788</span>    <span class="keywordflow">if</span>( hit ) {</div>
<div class="line"><a id="l02789" name="l02789"></a><span class="lineno"> 2789</span>        <span class="comment">//Add checks if previous NPC/player conditions are removed</span></div>
<div class="line"><a id="l02790" name="l02790"></a><span class="lineno"> 2790</span>        <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classplayer.html">player</a> *<span class="keyword">&gt;</span>( target )-&gt;<a class="code hl_function" href="namespacespell__effect.html#a7976cd373a1186fe53d107be623cd327">mutate</a>();</div>
<div class="line"><a id="l02791" name="l02791"></a><span class="lineno"> 2791</span>    }</div>
<div class="line"><a id="l02792" name="l02792"></a><span class="lineno"> 2792</span> </div>
<div class="line"><a id="l02793" name="l02793"></a><span class="lineno"> 2793</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02794" name="l02794"></a><span class="lineno"> 2794</span>}</div>
<div class="ttc" id="amonattack_8cpp_html_a7123ec8fe05b2572b4d1907ef501a552"><div class="ttname"><a href="monattack_8cpp.html#a7123ec8fe05b2572b4d1907ef501a552">sting_shoot</a></div><div class="ttdeci">static bool sting_shoot(monster *z, Creature *target, damage_instance &amp;dam, float range)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l00238">monattack.cpp:238</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_aaf60dff9863e93c2ff058ac3d17bf715"><div class="ttname"><a href="monattack_8cpp.html#aaf60dff9863e93c2ff058ac3d17bf715">sting_get_target</a></div><div class="ttdeci">static Creature * sting_get_target(monster *z, float range=5.0f)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l00221">monattack.cpp:221</a></div></div>
<div class="ttc" id="anamespacespell__effect_html_a7976cd373a1186fe53d107be623cd327"><div class="ttname"><a href="namespacespell__effect.html#a7976cd373a1186fe53d107be623cd327">spell_effect::mutate</a></div><div class="ttdeci">void mutate(const spell &amp;sp, Creature &amp;caster, const tripoint &amp;target)</div><div class="ttdef"><b>Definition:</b> <a href="magic__spell__effect_8cpp_source.html#l00996">magic_spell_effect.cpp:996</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="damage_8cpp_source.html#l00041">damage_instance::add_damage()</a>, <a class="el" href="damage_8h_source.html#l00027">DT_STAB</a>, <a class="el" href="creature_8h_source.html#l00098">Creature::is_npc()</a>, <a class="el" href="creature_8h_source.html#l00092">Creature::is_player()</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00996">spell_effect::mutate()</a>, <a class="el" href="monattack_8cpp_source.html#l00221">sting_get_target()</a>, and <a class="el" href="monattack_8cpp_source.html#l00238">sting_shoot()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="acd587bdbaf562c2ce7521301d277afc7" name="acd587bdbaf562c2ce7521301d277afc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd587bdbaf562c2ce7521301d277afc7">&#9670;&nbsp;</a></span>generator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::generator </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l03955">3955</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03956" name="l03956"></a><span class="lineno"> 3956</span>{</div>
<div class="line"><a id="l03957" name="l03957"></a><span class="lineno"> 3957</span>    <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 100, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a69a256025f66e4ce5d15c9dd7225d357">sounds::sound_t::activity</a>, <span class="stringliteral">&quot;hmmmm&quot;</span> );</div>
<div class="line"><a id="l03958" name="l03958"></a><span class="lineno"> 3958</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( 1_minutes ) &amp;&amp; z-&gt;<a class="code hl_function" href="classmonster.html#a2d0e466b9d25796cd99402ddd5d3ce20">get_hp</a>() &lt; z-&gt;<a class="code hl_function" href="classmonster.html#a551f4a380282f8ec082c74f410c397de">get_hp_max</a>() ) {</div>
<div class="line"><a id="l03959" name="l03959"></a><span class="lineno"> 3959</span>        z-&gt;<a class="code hl_function" href="classmonster.html#af7763c0da8025aea231a29272f25d5fc">heal</a>( 1 );</div>
<div class="line"><a id="l03960" name="l03960"></a><span class="lineno"> 3960</span>    }</div>
<div class="line"><a id="l03961" name="l03961"></a><span class="lineno"> 3961</span> </div>
<div class="line"><a id="l03962" name="l03962"></a><span class="lineno"> 3962</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03963" name="l03963"></a><span class="lineno"> 3963</span>}</div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3a69a256025f66e4ce5d15c9dd7225d357"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a69a256025f66e4ce5d15c9dd7225d357">sounds::sound_t::activity</a></div><div class="ttdeci">@ activity</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a69a256025f66e4ce5d15c9dd7225d357">sounds::activity</a>, <a class="el" href="monster_8cpp_source.html#l02894">monster::get_hp()</a>, <a class="el" href="monster_8cpp_source.html#l02884">monster::get_hp_max()</a>, <a class="el" href="monster_8cpp_source.html#l01616">monster::heal()</a>, <a class="el" href="calendar_8cpp_source.html#l00490">calendar::once_every()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, and <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>, <a class="el" href="gamemode__defense_8cpp_source.html#l00222">defense_game::init_map()</a>, and <a class="el" href="text__snippets_8cpp_source.html#l00150">snippet_library::random_from_category()</a>.</p>

</div>
</div>
<a id="af6d98508623397f01a9d5ffeebfd460b" name="af6d98508623397f01a9d5ffeebfd460b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6d98508623397f01a9d5ffeebfd460b">&#9670;&nbsp;</a></span>grab()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::grab </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
Dexterity increases chance to avoid being grabbed 
<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l02649">2649</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02650" name="l02650"></a><span class="lineno"> 2650</span>{</div>
<div class="line"><a id="l02651" name="l02651"></a><span class="lineno"> 2651</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classmonster.html#a0f83a7ee7bd8d96efc80200c5a5caf5b">can_act</a>() ) {</div>
<div class="line"><a id="l02652" name="l02652"></a><span class="lineno"> 2652</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02653" name="l02653"></a><span class="lineno"> 2653</span>    }</div>
<div class="line"><a id="l02654" name="l02654"></a><span class="lineno"> 2654</span>    <span class="comment">// Grabbing non-Characters not supported yet</span></div>
<div class="line"><a id="l02655" name="l02655"></a><span class="lineno"> 2655</span>    <a class="code hl_class" href="classplayer.html">player</a> *target = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classplayer.html">player</a> *<span class="keyword">&gt;</span>( z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>() );</div>
<div class="line"><a id="l02656" name="l02656"></a><span class="lineno"> 2656</span>    <a class="code hl_class" href="classplayer.html">player</a> *pl = target;</div>
<div class="line"><a id="l02657" name="l02657"></a><span class="lineno"> 2657</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> || !<a class="code hl_function" href="monattack_8cpp.html#abf0d71b531a799a8eb3fd58a846064db">is_adjacent</a>( z, target, <span class="keyword">false</span> ) ) {</div>
<div class="line"><a id="l02658" name="l02658"></a><span class="lineno"> 2658</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02659" name="l02659"></a><span class="lineno"> 2659</span>    }</div>
<div class="line"><a id="l02660" name="l02660"></a><span class="lineno"> 2660</span> </div>
<div class="line"><a id="l02661" name="l02661"></a><span class="lineno"> 2661</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> uncanny = target-&gt;<a class="code hl_function" href="classplayer.html#a8ef167aef3a35a062b56c8905f59b133">uncanny_dodge</a>();</div>
<div class="line"><a id="l02662" name="l02662"></a><span class="lineno"> 2662</span>    <span class="keyword">const</span> <span class="keyword">auto</span> msg_type = target == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ? <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a> : <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>;</div>
<div class="line"><a id="l02663" name="l02663"></a><span class="lineno"> 2663</span>    <span class="keywordflow">if</span>( uncanny || <a class="code hl_function" href="namespacemattack.html#a4efb8be314551e35f69df8cf8d824174">dodge_check</a>( z, target ) ) {</div>
<div class="line"><a id="l02664" name="l02664"></a><span class="lineno"> 2664</span>        z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 40;</div>
<div class="line"><a id="l02665" name="l02665"></a><span class="lineno"> 2665</span>        target-&gt;<a class="code hl_function" href="classplayer.html#a07108565639fa6fe5b6776b4e8674fb6">add_msg_player_or_npc</a>( msg_type, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s gropes at you, but you dodge!&quot;</span> ),</div>
<div class="line"><a id="l02666" name="l02666"></a><span class="lineno"> 2666</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s gropes at &lt;npcname&gt;, but they dodge!&quot;</span> ),</div>
<div class="line"><a id="l02667" name="l02667"></a><span class="lineno"> 2667</span>                                       z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02668" name="l02668"></a><span class="lineno"> 2668</span> </div>
<div class="line"><a id="l02669" name="l02669"></a><span class="lineno"> 2669</span>        <span class="keywordflow">if</span>( !uncanny ) {</div>
<div class="line"><a id="l02670" name="l02670"></a><span class="lineno"> 2670</span>            target-&gt;<a class="code hl_function" href="classplayer.html#a9d84938529a732fabf035ac2e9d6189a">on_dodge</a>( z, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> * 2 );</div>
<div class="line"><a id="l02671" name="l02671"></a><span class="lineno"> 2671</span>        }</div>
<div class="line"><a id="l02672" name="l02672"></a><span class="lineno"> 2672</span> </div>
<div class="line"><a id="l02673" name="l02673"></a><span class="lineno"> 2673</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02674" name="l02674"></a><span class="lineno"> 2674</span>    }</div>
<div class="line"><a id="l02675" name="l02675"></a><span class="lineno"> 2675</span> </div>
<div class="line"><a id="l02676" name="l02676"></a><span class="lineno"> 2676</span>    <a class="code hl_class" href="classitem.html">item</a> &amp;cur_weapon = pl-&gt;<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>;<span class="comment"></span></div>
<div class="line"><a id="l02677" name="l02677"></a><span class="lineno"> 2677</span><span class="comment">    ///\EFFECT_DEX increases chance to avoid being grabbed</span></div>
<div class="line"><a id="l02678" name="l02678"></a><span class="lineno"> 2678</span><span class="comment"></span>    <span class="keywordflow">if</span>( pl-&gt;<a class="code hl_function" href="classplayer.html#af7ae0d0b0d45994a073f37862cbf6d3b">can_grab_break</a>( cur_weapon ) &amp;&amp;</div>
<div class="line"><a id="l02679" name="l02679"></a><span class="lineno"> 2679</span>        <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, pl-&gt;<a class="code hl_function" href="classCharacter.html#a34a927d0f161ac92ab0d462397828bd5">get_dex</a>() ) &gt; <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#af346fa78fe3bff4e8e321e9046bc9717">melee_sides</a> + z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a561d4830d7f7c613c177f5880c2e15fb">melee_dice</a> ) ) {</div>
<div class="line"><a id="l02680" name="l02680"></a><span class="lineno"> 2680</span>        <span class="keywordflow">if</span>( target-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#ae326c5e4da7f23bc429d04d215dd7c9d">effect_grabbed</a> ) ) {</div>
<div class="line"><a id="l02681" name="l02681"></a><span class="lineno"> 2681</span>            target-&gt;<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s tries to grab you as well, but you bat it away!&quot;</span> ),</div>
<div class="line"><a id="l02682" name="l02682"></a><span class="lineno"> 2682</span>                                       z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02683" name="l02683"></a><span class="lineno"> 2683</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( pl-&gt;<a class="code hl_function" href="classCharacter.html#ab9612295236144e36e019fb74b04c309">is_throw_immune</a>() &amp;&amp; ( !pl-&gt;<a class="code hl_function" href="classCharacter.html#ad79464264cb8a2061f5888d092f5cd86">is_armed</a>() ||</div>
<div class="line"><a id="l02684" name="l02684"></a><span class="lineno"> 2684</span>                                              pl-&gt;<a class="code hl_variable" href="classCharacter.html#a313797e99525bfd2a5ead68b7672f168">martial_arts_data</a>-&gt;selected_has_weapon( pl-&gt;<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>() ) ) ) {</div>
<div class="line"><a id="l02685" name="l02685"></a><span class="lineno"> 2685</span>            target-&gt;<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s tries to grab you…&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02686" name="l02686"></a><span class="lineno"> 2686</span>            <a class="code hl_function" href="namespacemattack.html#a417df1f7014426b1736ddcfc68bed69f">thrown_by_judo</a>( z );</div>
<div class="line"><a id="l02687" name="l02687"></a><span class="lineno"> 2687</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( pl-&gt;<a class="code hl_function" href="classCharacter.html#a951d934cb1eaf57e53e7aca48012d17a">has_grab_break_tec</a>() ) {</div>
<div class="line"><a id="l02688" name="l02688"></a><span class="lineno"> 2688</span>            <a class="code hl_class" href="classma__technique.html">ma_technique</a> tech = pl-&gt;<a class="code hl_variable" href="classCharacter.html#a313797e99525bfd2a5ead68b7672f168">martial_arts_data</a>-&gt;get_grab_break_tec( cur_weapon );</div>
<div class="line"><a id="l02689" name="l02689"></a><span class="lineno"> 2689</span>            target-&gt;<a class="code hl_function" href="classplayer.html#a07108565639fa6fe5b6776b4e8674fb6">add_msg_player_or_npc</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( tech.<a class="code hl_variable" href="classma__technique.html#afa2af258091a77f769ba8dea06f4e450">avatar_message</a> ), <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( tech.<a class="code hl_variable" href="classma__technique.html#a038e515a0272f6969e5293ca60352dea">npc_message</a> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02690" name="l02690"></a><span class="lineno"> 2690</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02691" name="l02691"></a><span class="lineno"> 2691</span>            target-&gt;<a class="code hl_function" href="classplayer.html#a07108565639fa6fe5b6776b4e8674fb6">add_msg_player_or_npc</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s tries to grab you, but you break its grab!&quot;</span> ),</div>
<div class="line"><a id="l02692" name="l02692"></a><span class="lineno"> 2692</span>                                           <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s tries to grab &lt;npcname&gt;, but they break its grab!&quot;</span> ),</div>
<div class="line"><a id="l02693" name="l02693"></a><span class="lineno"> 2693</span>                                           z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02694" name="l02694"></a><span class="lineno"> 2694</span>        }</div>
<div class="line"><a id="l02695" name="l02695"></a><span class="lineno"> 2695</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02696" name="l02696"></a><span class="lineno"> 2696</span>    }</div>
<div class="line"><a id="l02697" name="l02697"></a><span class="lineno"> 2697</span> </div>
<div class="line"><a id="l02698" name="l02698"></a><span class="lineno"> 2698</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> prev_effect = target-&gt;<a class="code hl_function" href="classCreature.html#a70ba05a0184ff83095f639eac18f24fe">get_effect_int</a>( <a class="code hl_variable" href="monattack_8cpp.html#ae326c5e4da7f23bc429d04d215dd7c9d">effect_grabbed</a> );</div>
<div class="line"><a id="l02699" name="l02699"></a><span class="lineno"> 2699</span>    z-&gt;<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a66f79823ab25161f7aabf43445a580a4">effect_grabbing</a>, 2_turns );</div>
<div class="line"><a id="l02700" name="l02700"></a><span class="lineno"> 2700</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#ae326c5e4da7f23bc429d04d215dd7c9d">effect_grabbed</a>, 2_turns, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a>,</div>
<div class="line"><a id="l02701" name="l02701"></a><span class="lineno"> 2701</span>                        prev_effect + z-&gt;<a class="code hl_function" href="classmonster.html#a1d58ee8d254387dacfd4a497957e4afa">get_grab_strength</a>() );</div>
<div class="line"><a id="l02702" name="l02702"></a><span class="lineno"> 2702</span>    target-&gt;<a class="code hl_function" href="classplayer.html#a07108565639fa6fe5b6776b4e8674fb6">add_msg_player_or_npc</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s grabs you!&quot;</span> ), <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s grabs &lt;npcname&gt;!&quot;</span> ),</div>
<div class="line"><a id="l02703" name="l02703"></a><span class="lineno"> 2703</span>                                   z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02704" name="l02704"></a><span class="lineno"> 2704</span> </div>
<div class="line"><a id="l02705" name="l02705"></a><span class="lineno"> 2705</span>    <span class="comment">// A hit to use up our moves</span></div>
<div class="line"><a id="l02706" name="l02706"></a><span class="lineno"> 2706</span>    z-&gt;<a class="code hl_function" href="classmonster.html#a6809ebca592efa37c3ade652ed74b5e0">melee_attack</a>( *target );</div>
<div class="line"><a id="l02707" name="l02707"></a><span class="lineno"> 2707</span>    <span class="comment">// Set up a bite on the next turn</span></div>
<div class="line"><a id="l02708" name="l02708"></a><span class="lineno"> 2708</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#ad3d8be7cacb7cd0a19b2c187c9e1ac26">special_attacks</a>.count( <span class="stringliteral">&quot;BITE&quot;</span> ) != 0 ) {</div>
<div class="line"><a id="l02709" name="l02709"></a><span class="lineno"> 2709</span>        z-&gt;<a class="code hl_function" href="classmonster.html#a82a2a2617c817a34c892e793c3b6a407">set_special</a>( <span class="stringliteral">&quot;BITE&quot;</span>, 1 );</div>
<div class="line"><a id="l02710" name="l02710"></a><span class="lineno"> 2710</span>    }</div>
<div class="line"><a id="l02711" name="l02711"></a><span class="lineno"> 2711</span> </div>
<div class="line"><a id="l02712" name="l02712"></a><span class="lineno"> 2712</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02713" name="l02713"></a><span class="lineno"> 2713</span>}</div>
<div class="ttc" id="aclassCharacter_html_a951d934cb1eaf57e53e7aca48012d17a"><div class="ttname"><a href="classCharacter.html#a951d934cb1eaf57e53e7aca48012d17a">Character::has_grab_break_tec</a></div><div class="ttdeci">bool has_grab_break_tec() const override</div><div class="ttdoc">Returns true if the player has a grab breaking technique available.</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8cpp_source.html#l01209">martialarts.cpp:1209</a></div></div>
<div class="ttc" id="aclassCreature_html_a70ba05a0184ff83095f639eac18f24fe"><div class="ttname"><a href="classCreature.html#a70ba05a0184ff83095f639eac18f24fe">Creature::get_effect_int</a></div><div class="ttdeci">int get_effect_int(const efftype_id &amp;eff_id, body_part bp=num_bp) const</div><div class="ttdoc">Returns the intensity of the matching effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01244">creature.cpp:1244</a></div></div>
<div class="ttc" id="aclassma__technique_html"><div class="ttname"><a href="classma__technique.html">ma_technique</a></div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8h_source.html#l00063">martialarts.h:64</a></div></div>
<div class="ttc" id="aclassma__technique_html_a038e515a0272f6969e5293ca60352dea"><div class="ttname"><a href="classma__technique.html#a038e515a0272f6969e5293ca60352dea">ma_technique::npc_message</a></div><div class="ttdeci">std::string npc_message</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8h_source.html#l00086">martialarts.h:86</a></div></div>
<div class="ttc" id="aclassma__technique_html_afa2af258091a77f769ba8dea06f4e450"><div class="ttname"><a href="classma__technique.html#afa2af258091a77f769ba8dea06f4e450">ma_technique::avatar_message</a></div><div class="ttdeci">std::string avatar_message</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8h_source.html#l00085">martialarts.h:85</a></div></div>
<div class="ttc" id="aclassmonster_html_a1d58ee8d254387dacfd4a497957e4afa"><div class="ttname"><a href="classmonster.html#a1d58ee8d254387dacfd4a497957e4afa">monster::get_grab_strength</a></div><div class="ttdeci">int get_grab_strength() const</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l01982">monster.cpp:1982</a></div></div>
<div class="ttc" id="aclassmonster_html_a6809ebca592efa37c3ade652ed74b5e0"><div class="ttname"><a href="classmonster.html#a6809ebca592efa37c3ade652ed74b5e0">monster::melee_attack</a></div><div class="ttdeci">void melee_attack(Creature &amp;target)</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l01370">monster.cpp:1370</a></div></div>
<div class="ttc" id="aclassmonster_html_a82a2a2617c817a34c892e793c3b6a407"><div class="ttname"><a href="classmonster.html#a82a2a2617c817a34c892e793c3b6a407">monster::set_special</a></div><div class="ttdeci">void set_special(const std::string &amp;special_name, int time)</div><div class="ttdoc">Sets a given special to the given value.</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l02062">monster.cpp:2062</a></div></div>
<div class="ttc" id="aclassplayer_html_a07108565639fa6fe5b6776b4e8674fb6"><div class="ttname"><a href="classplayer.html#a07108565639fa6fe5b6776b4e8674fb6">player::add_msg_player_or_npc</a></div><div class="ttdeci">void add_msg_player_or_npc(const std::string &amp;player_msg, const std::string &amp;npc_str) const override</div><div class="ttdef"><b>Definition:</b> <a href="player_8cpp_source.html#l04373">player.cpp:4373</a></div></div>
<div class="ttc" id="aclassplayer_html_a8ef167aef3a35a062b56c8905f59b133"><div class="ttname"><a href="classplayer.html#a8ef167aef3a35a062b56c8905f59b133">player::uncanny_dodge</a></div><div class="ttdeci">bool uncanny_dodge() override</div><div class="ttdoc">Handles the uncanny dodge bionic and effects, returns true if the player successfully dodges.</div><div class="ttdef"><b>Definition:</b> <a href="player_8cpp_source.html#l04302">player.cpp:4302</a></div></div>
<div class="ttc" id="aclassplayer_html_a9d84938529a732fabf035ac2e9d6189a"><div class="ttname"><a href="classplayer.html#a9d84938529a732fabf035ac2e9d6189a">player::on_dodge</a></div><div class="ttdeci">void on_dodge(Creature *source, float difficulty) override</div><div class="ttdoc">Called after the player has successfully dodged an attack.</div><div class="ttdef"><b>Definition:</b> <a href="player_8cpp_source.html#l00930">player.cpp:930</a></div></div>
<div class="ttc" id="aclassplayer_html_ae7009d849f19a4f5ebe877cbe463c459"><div class="ttname"><a href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">player::add_msg_if_player</a></div><div class="ttdeci">void add_msg_if_player(const std::string &amp;msg) const override</div><div class="ttdef"><b>Definition:</b> <a href="player_8cpp_source.html#l04368">player.cpp:4368</a></div></div>
<div class="ttc" id="aclassplayer_html_af7ae0d0b0d45994a073f37862cbf6d3b"><div class="ttname"><a href="classplayer.html#af7ae0d0b0d45994a073f37862cbf6d3b">player::can_grab_break</a></div><div class="ttdeci">bool can_grab_break(const item &amp;weap) const</div><div class="ttdoc">Returns true if the player is able to use a grab breaking technique.</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8cpp_source.html#l00937">martialarts.cpp:937</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a66f79823ab25161f7aabf43445a580a4"><div class="ttname"><a href="monattack_8cpp.html#a66f79823ab25161f7aabf43445a580a4">effect_grabbing</a></div><div class="ttdeci">static const efftype_id effect_grabbing(&quot;grabbing&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_ae326c5e4da7f23bc429d04d215dd7c9d"><div class="ttname"><a href="monattack_8cpp.html#ae326c5e4da7f23bc429d04d215dd7c9d">effect_grabbed</a></div><div class="ttdeci">static const efftype_id effect_grabbed(&quot;grabbed&quot;)</div></div>
<div class="ttc" id="astructmtype_html_ad3d8be7cacb7cd0a19b2c187c9e1ac26"><div class="ttname"><a href="structmtype.html#ad3d8be7cacb7cd0a19b2c187c9e1ac26">mtype::special_attacks</a></div><div class="ttdeci">std::map&lt; std::string, mtype_special_attack &gt; special_attacks</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00314">mtype.h:314</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8cpp_source.html#l00974">Creature::add_effect()</a>, <a class="el" href="monster_8cpp_source.html#l01807">monster::add_effect()</a>, <a class="el" href="player_8cpp_source.html#l04368">player::add_msg_if_player()</a>, <a class="el" href="player_8cpp_source.html#l04373">player::add_msg_player_or_npc()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="martialarts_8h_source.html#l00085">ma_technique::avatar_message</a>, <a class="el" href="bodypart_8h_source.html#l00040">bp_torso</a>, <a class="el" href="monster_8cpp_source.html#l00931">monster::can_act()</a>, <a class="el" href="martialarts_8cpp_source.html#l00937">player::can_grab_break()</a>, <a class="el" href="monattack_8cpp_source.html#l05764">dodge_check()</a>, <a class="el" href="monattack_8cpp.html#ae326c5e4da7f23bc429d04d215dd7c9d">effect_grabbed</a>, <a class="el" href="monattack_8cpp.html#a66f79823ab25161f7aabf43445a580a4">effect_grabbing</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="character_8cpp_source.html#l04052">Character::get_dex()</a>, <a class="el" href="creature_8cpp_source.html#l01244">Creature::get_effect_int()</a>, <a class="el" href="monster_8cpp_source.html#l01982">monster::get_grab_strength()</a>, <a class="el" href="creature_8cpp_source.html#l01173">Creature::has_effect()</a>, <a class="el" href="martialarts_8cpp_source.html#l01209">Character::has_grab_break_tec()</a>, <a class="el" href="monattack_8cpp_source.html#l00275">is_adjacent()</a>, <a class="el" href="melee_8cpp_source.html#l00145">Character::is_armed()</a>, <a class="el" href="martialarts_8cpp_source.html#l01176">Character::is_throw_immune()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="character_8h_source.html#l01589">Character::martial_arts_data</a>, <a class="el" href="monster_8cpp_source.html#l01370">monster::melee_attack()</a>, <a class="el" href="mtype_8h_source.html#l00286">mtype::melee_dice</a>, <a class="el" href="mtype_8h_source.html#l00287">mtype::melee_sides</a>, <a class="el" href="mtype_8h_source.html#l00285">mtype::melee_skill</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="martialarts_8h_source.html#l00086">ma_technique::npc_message</a>, <a class="el" href="player_8cpp_source.html#l00930">player::on_dodge()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="monster_8cpp_source.html#l02062">monster::set_special()</a>, <a class="el" href="mtype_8h_source.html#l00314">mtype::special_attacks</a>, <a class="el" href="monattack_8cpp_source.html#l04581">thrown_by_judo()</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, <a class="el" href="item_8cpp_source.html#l08196">item::typeId()</a>, <a class="el" href="player_8cpp_source.html#l04302">player::uncanny_dodge()</a>, and <a class="el" href="character_8h_source.html#l01585">Character::weapon</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a9e5a3f260d767eb958cf1cab89bba139" name="a9e5a3f260d767eb958cf1cab89bba139"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e5a3f260d767eb958cf1cab89bba139">&#9670;&nbsp;</a></span>grab_drag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::grab_drag </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l02715">2715</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02716" name="l02716"></a><span class="lineno"> 2716</span>{</div>
<div class="line"><a id="l02717" name="l02717"></a><span class="lineno"> 2717</span>    <span class="keywordflow">if</span>( !z || !z-&gt;<a class="code hl_function" href="classmonster.html#a0f83a7ee7bd8d96efc80200c5a5caf5b">can_act</a>() ) {</div>
<div class="line"><a id="l02718" name="l02718"></a><span class="lineno"> 2718</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02719" name="l02719"></a><span class="lineno"> 2719</span>    }</div>
<div class="line"><a id="l02720" name="l02720"></a><span class="lineno"> 2720</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l02721" name="l02721"></a><span class="lineno"> 2721</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> || <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() ) &gt; 1 ) {</div>
<div class="line"><a id="l02722" name="l02722"></a><span class="lineno"> 2722</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02723" name="l02723"></a><span class="lineno"> 2723</span>    }</div>
<div class="line"><a id="l02724" name="l02724"></a><span class="lineno"> 2724</span> </div>
<div class="line"><a id="l02725" name="l02725"></a><span class="lineno"> 2725</span>    <span class="keywordflow">if</span>( target-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a02ed1ef06d6f12fde82b64232c55a749">effect_under_op</a> ) ) {</div>
<div class="line"><a id="l02726" name="l02726"></a><span class="lineno"> 2726</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a id="l02727" name="l02727"></a><span class="lineno"> 2727</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s tries to drag you, but you&#39;re securely fastened in the autodoc.&quot;</span> ),</div>
<div class="line"><a id="l02728" name="l02728"></a><span class="lineno"> 2728</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s tries to drag &lt;npcname&gt;, but they&#39;re securely fastened in the autodoc.&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02729" name="l02729"></a><span class="lineno"> 2729</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02730" name="l02730"></a><span class="lineno"> 2730</span>    }</div>
<div class="line"><a id="l02731" name="l02731"></a><span class="lineno"> 2731</span> </div>
<div class="line"><a id="l02732" name="l02732"></a><span class="lineno"> 2732</span>    <span class="comment">// First, grab the target</span></div>
<div class="line"><a id="l02733" name="l02733"></a><span class="lineno"> 2733</span>    <a class="code hl_function" href="handle__action_8cpp.html#adad5435d6c5b95d6e491750b1abead4e">grab</a>( z );</div>
<div class="line"><a id="l02734" name="l02734"></a><span class="lineno"> 2734</span> </div>
<div class="line"><a id="l02735" name="l02735"></a><span class="lineno"> 2735</span>    <span class="keywordflow">if</span>( !target-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#ae326c5e4da7f23bc429d04d215dd7c9d">effect_grabbed</a> ) ) { <span class="comment">//Can&#39;t drag if isn&#39;t grabbed, otherwise try and move</span></div>
<div class="line"><a id="l02736" name="l02736"></a><span class="lineno"> 2736</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02737" name="l02737"></a><span class="lineno"> 2737</span>    }</div>
<div class="line"><a id="l02738" name="l02738"></a><span class="lineno"> 2738</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> target_square = z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>() - ( target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() - z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>() );</div>
<div class="line"><a id="l02739" name="l02739"></a><span class="lineno"> 2739</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_function" href="classmonster.html#a241bdfccd5d6b2200c0bfd5eca9ce8ab">can_move_to</a>( target_square ) &amp;&amp;</div>
<div class="line"><a id="l02740" name="l02740"></a><span class="lineno"> 2740</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a5410043563487884142ddc5b6706f8ae">stability_roll</a>() &lt; <a class="code hl_function" href="rng_8cpp.html#a7ba03e7147e43d808dc29c54bce9e57f">dice</a>( z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#af346fa78fe3bff4e8e321e9046bc9717">melee_sides</a>, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a561d4830d7f7c613c177f5880c2e15fb">melee_dice</a> ) ) {</div>
<div class="line"><a id="l02741" name="l02741"></a><span class="lineno"> 2741</span>        <a class="code hl_class" href="classplayer.html">player</a> *foe = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classplayer.html">player</a> *<span class="keyword">&gt;</span>( target );</div>
<div class="line"><a id="l02742" name="l02742"></a><span class="lineno"> 2742</span>        <a class="code hl_class" href="classmonster.html">monster</a> *zz = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">&gt;</span>( target );</div>
<div class="line"><a id="l02743" name="l02743"></a><span class="lineno"> 2743</span>        <a class="code hl_struct" href="structtripoint.html">tripoint</a> zpt = z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>();</div>
<div class="line"><a id="l02744" name="l02744"></a><span class="lineno"> 2744</span>        z-&gt;<a class="code hl_function" href="classmonster.html#ab3c07bd4cb325287741fa2e561168e56">move_to</a>( target_square );</div>
<div class="line"><a id="l02745" name="l02745"></a><span class="lineno"> 2745</span>        <span class="keywordflow">if</span>( !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_empty( zpt ) ) { <span class="comment">//Cancel the grab if the space is occupied by something</span></div>
<div class="line"><a id="l02746" name="l02746"></a><span class="lineno"> 2746</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02747" name="l02747"></a><span class="lineno"> 2747</span>        }</div>
<div class="line"><a id="l02748" name="l02748"></a><span class="lineno"> 2748</span>        <span class="keywordflow">if</span>( target-&gt;<a class="code hl_function" href="classCreature.html#a1217a190a2e561227e831a72d4a6d390">is_player</a>() &amp;&amp; ( zpt.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> &lt; <a class="code hl_variable" href="game__constants_8h.html#adf7bb33c88c44d0c1da57b5948ead4ac">HALF_MAPSIZE_X</a> ||</div>
<div class="line"><a id="l02749" name="l02749"></a><span class="lineno"> 2749</span>                                     zpt.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> &lt; <a class="code hl_variable" href="game__constants_8h.html#acf60bb2d3beb1625a9344e3291dda674">HALF_MAPSIZE_Y</a> ||</div>
<div class="line"><a id="l02750" name="l02750"></a><span class="lineno"> 2750</span>                                     zpt.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> &gt;= <a class="code hl_variable" href="game__constants_8h.html#adf7bb33c88c44d0c1da57b5948ead4ac">HALF_MAPSIZE_X</a> + <a class="code hl_variable" href="game__constants_8h.html#a39fd8a829e3dc412646663066dbdb54c">SEEX</a> || zpt.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> &gt;= <a class="code hl_variable" href="game__constants_8h.html#acf60bb2d3beb1625a9344e3291dda674">HALF_MAPSIZE_Y</a> + <a class="code hl_variable" href="game__constants_8h.html#a4cfa35de359af17f7bc6c2a424339eb5">SEEY</a> ) ) {</div>
<div class="line"><a id="l02751" name="l02751"></a><span class="lineno"> 2751</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;update_map( zpt.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a>, zpt.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> );</div>
<div class="line"><a id="l02752" name="l02752"></a><span class="lineno"> 2752</span>        }</div>
<div class="line"><a id="l02753" name="l02753"></a><span class="lineno"> 2753</span>        <span class="keywordflow">if</span>( foe != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l02754" name="l02754"></a><span class="lineno"> 2754</span>            <span class="keywordflow">if</span>( foe-&gt;<a class="code hl_variable" href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">in_vehicle</a> ) {</div>
<div class="line"><a id="l02755" name="l02755"></a><span class="lineno"> 2755</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.unboard_vehicle( foe-&gt;<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() );</div>
<div class="line"><a id="l02756" name="l02756"></a><span class="lineno"> 2756</span>            }</div>
<div class="line"><a id="l02757" name="l02757"></a><span class="lineno"> 2757</span>            foe-&gt;<a class="code hl_function" href="classCharacter.html#a81bb9016c05d558713f6bce2512cd9e5">setpos</a>( zpt );</div>
<div class="line"><a id="l02758" name="l02758"></a><span class="lineno"> 2758</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02759" name="l02759"></a><span class="lineno"> 2759</span>            zz-&gt;<a class="code hl_function" href="classmonster.html#a4871f8fa2b4ba7577c80db7c5e88f291">setpos</a>( zpt );</div>
<div class="line"><a id="l02760" name="l02760"></a><span class="lineno"> 2760</span>        }</div>
<div class="line"><a id="l02761" name="l02761"></a><span class="lineno"> 2761</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You are dragged behind the %s!&quot;</span> ),</div>
<div class="line"><a id="l02762" name="l02762"></a><span class="lineno"> 2762</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; gets dragged behind the %s!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02763" name="l02763"></a><span class="lineno"> 2763</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02764" name="l02764"></a><span class="lineno"> 2764</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You resist the %s as it tries to drag you!&quot;</span> ),</div>
<div class="line"><a id="l02765" name="l02765"></a><span class="lineno"> 2765</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; resist the %s as it tries to drag them!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02766" name="l02766"></a><span class="lineno"> 2766</span>    }</div>
<div class="line"><a id="l02767" name="l02767"></a><span class="lineno"> 2767</span>    <span class="keywordtype">int</span> prev_effect = target-&gt;<a class="code hl_function" href="classCreature.html#a70ba05a0184ff83095f639eac18f24fe">get_effect_int</a>( <a class="code hl_variable" href="monattack_8cpp.html#ae326c5e4da7f23bc429d04d215dd7c9d">effect_grabbed</a> );</div>
<div class="line"><a id="l02768" name="l02768"></a><span class="lineno"> 2768</span>    z-&gt;<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a66f79823ab25161f7aabf43445a580a4">effect_grabbing</a>, 2_turns );</div>
<div class="line"><a id="l02769" name="l02769"></a><span class="lineno"> 2769</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#ae326c5e4da7f23bc429d04d215dd7c9d">effect_grabbed</a>, 2_turns, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a>, prev_effect + 3 );</div>
<div class="line"><a id="l02770" name="l02770"></a><span class="lineno"> 2770</span> </div>
<div class="line"><a id="l02771" name="l02771"></a><span class="lineno"> 2771</span>    <span class="comment">// cooldown was not reset prior to refactor here</span></div>
<div class="line"><a id="l02772" name="l02772"></a><span class="lineno"> 2772</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02773" name="l02773"></a><span class="lineno"> 2773</span>}</div>
<div class="ttc" id="aclassCharacter_html_a61bc9422c35b63128532af268e52cb71"><div class="ttname"><a href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">Character::in_vehicle</a></div><div class="ttdeci">bool in_vehicle</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01575">character.h:1575</a></div></div>
<div class="ttc" id="aclassCharacter_html_a81bb9016c05d558713f6bce2512cd9e5"><div class="ttname"><a href="classCharacter.html#a81bb9016c05d558713f6bce2512cd9e5">Character::setpos</a></div><div class="ttdeci">void setpos(const tripoint &amp;p) override</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00856">character.h:856</a></div></div>
<div class="ttc" id="aclassCreature_html_a5410043563487884142ddc5b6706f8ae"><div class="ttname"><a href="classCreature.html#a5410043563487884142ddc5b6706f8ae">Creature::stability_roll</a></div><div class="ttdeci">virtual float stability_roll() const =0</div></div>
<div class="ttc" id="aclassmonster_html_a241bdfccd5d6b2200c0bfd5eca9ce8ab"><div class="ttname"><a href="classmonster.html#a241bdfccd5d6b2200c0bfd5eca9ce8ab">monster::can_move_to</a></div><div class="ttdeci">bool can_move_to(const tripoint &amp;p) const</div><div class="ttdoc">Checks whether we can move to/through p.</div><div class="ttdef"><b>Definition:</b> <a href="monmove_8cpp_source.html#l00249">monmove.cpp:249</a></div></div>
<div class="ttc" id="aclassmonster_html_ab3c07bd4cb325287741fa2e561168e56"><div class="ttname"><a href="classmonster.html#ab3c07bd4cb325287741fa2e561168e56">monster::move_to</a></div><div class="ttdeci">bool move_to(const tripoint &amp;p, bool force=false, bool step_on_critter=false, float stagger_adjustment=1.0)</div><div class="ttdoc">Attempt to move to p.</div><div class="ttdef"><b>Definition:</b> <a href="monmove_8cpp_source.html#l01493">monmove.cpp:1493</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a39fd8a829e3dc412646663066dbdb54c"><div class="ttname"><a href="game__constants_8h.html#a39fd8a829e3dc412646663066dbdb54c">SEEX</a></div><div class="ttdeci">static constexpr int SEEX</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00036">game_constants.h:36</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a4cfa35de359af17f7bc6c2a424339eb5"><div class="ttname"><a href="game__constants_8h.html#a4cfa35de359af17f7bc6c2a424339eb5">SEEY</a></div><div class="ttdeci">static constexpr int SEEY</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00037">game_constants.h:37</a></div></div>
<div class="ttc" id="agame__constants_8h_html_acf60bb2d3beb1625a9344e3291dda674"><div class="ttname"><a href="game__constants_8h.html#acf60bb2d3beb1625a9344e3291dda674">HALF_MAPSIZE_Y</a></div><div class="ttdeci">static constexpr int HALF_MAPSIZE_Y</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00043">game_constants.h:43</a></div></div>
<div class="ttc" id="agame__constants_8h_html_adf7bb33c88c44d0c1da57b5948ead4ac"><div class="ttname"><a href="game__constants_8h.html#adf7bb33c88c44d0c1da57b5948ead4ac">HALF_MAPSIZE_X</a></div><div class="ttdeci">static constexpr int HALF_MAPSIZE_X</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00042">game_constants.h:42</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a02ed1ef06d6f12fde82b64232c55a749"><div class="ttname"><a href="monattack_8cpp.html#a02ed1ef06d6f12fde82b64232c55a749">effect_under_op</a></div><div class="ttdeci">static const efftype_id effect_under_op(&quot;under_operation&quot;)</div></div>
<div class="ttc" id="astructtripoint_html_a89f6c0a16e2bfd7ce4f1f1d20404c4d7"><div class="ttname"><a href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">tripoint::y</a></div><div class="ttdeci">int y</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00151">point.h:151</a></div></div>
<div class="ttc" id="astructtripoint_html_affdc0d5b75024cbfacd208a495def3dc"><div class="ttname"><a href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">tripoint::x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00150">point.h:150</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8cpp_source.html#l00974">Creature::add_effect()</a>, <a class="el" href="monster_8cpp_source.html#l01807">monster::add_effect()</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="bodypart_8h_source.html#l00040">bp_torso</a>, <a class="el" href="monster_8cpp_source.html#l00931">monster::can_act()</a>, <a class="el" href="monmove_8cpp_source.html#l00249">monster::can_move_to()</a>, <a class="el" href="rng_8cpp_source.html#l00085">dice()</a>, <a class="el" href="monattack_8cpp.html#ae326c5e4da7f23bc429d04d215dd7c9d">effect_grabbed</a>, <a class="el" href="monattack_8cpp.html#a66f79823ab25161f7aabf43445a580a4">effect_grabbing</a>, <a class="el" href="monattack_8cpp.html#a02ed1ef06d6f12fde82b64232c55a749">effect_under_op</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8cpp_source.html#l01244">Creature::get_effect_int()</a>, <a class="el" href="handle__action_8cpp_source.html#l00599">grab()</a>, <a class="el" href="game__constants_8h_source.html#l00042">HALF_MAPSIZE_X</a>, <a class="el" href="game__constants_8h_source.html#l00043">HALF_MAPSIZE_Y</a>, <a class="el" href="creature_8cpp_source.html#l01173">Creature::has_effect()</a>, <a class="el" href="character_8h_source.html#l01575">Character::in_vehicle</a>, <a class="el" href="creature_8h_source.html#l00092">Creature::is_player()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00253">m_good</a>, <a class="el" href="mtype_8h_source.html#l00286">mtype::melee_dice</a>, <a class="el" href="mtype_8h_source.html#l00287">mtype::melee_sides</a>, <a class="el" href="monmove_8cpp_source.html#l01493">monster::move_to()</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="character_8cpp_source.html#l00707">Character::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="game__constants_8h_source.html#l00036">SEEX</a>, <a class="el" href="game__constants_8h_source.html#l00037">SEEY</a>, <a class="el" href="character_8h_source.html#l00856">Character::setpos()</a>, <a class="el" href="monster_8cpp_source.html#l00237">monster::setpos()</a>, <a class="el" href="classCreature.html#a5410043563487884142ddc5b6706f8ae">Creature::stability_roll()</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, <a class="el" href="point_8h_source.html#l00150">tripoint::x</a>, and <a class="el" href="point_8h_source.html#l00151">tripoint::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="ab4ff21dc47a7f9253c8c2d7ce0064d45" name="ab4ff21dc47a7f9253c8c2d7ce0064d45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4ff21dc47a7f9253c8c2d7ce0064d45">&#9670;&nbsp;</a></span>grenadier()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::grenadier </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l05574">5574</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05575" name="l05575"></a><span class="lineno"> 5575</span>{</div>
<div class="line"><a id="l05576" name="l05576"></a><span class="lineno"> 5576</span>    <span class="comment">// Build our grenade map</span></div>
<div class="line"><a id="l05577" name="l05577"></a><span class="lineno"> 5577</span>    std::map&lt;itype_id, grenade_helper_struct&gt; grenades;</div>
<div class="line"><a id="l05578" name="l05578"></a><span class="lineno"> 5578</span>    <span class="comment">// Grenades</span></div>
<div class="line"><a id="l05579" name="l05579"></a><span class="lineno"> 5579</span>    grenades[<a class="code hl_variable" href="monattack_8cpp.html#a0bb64404c074dc831e191fc2880ca54c">itype_bot_pacification_hack</a>].message =</div>
<div class="line"><a id="l05580" name="l05580"></a><span class="lineno"> 5580</span>        <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s deploys a pacification hack!&quot;</span> );</div>
<div class="line"><a id="l05581" name="l05581"></a><span class="lineno"> 5581</span>    <span class="comment">// Flashbangs</span></div>
<div class="line"><a id="l05582" name="l05582"></a><span class="lineno"> 5582</span>    grenades[<a class="code hl_variable" href="monattack_8cpp.html#a6f41a7272b7fc8abde644c27a79aa815">itype_bot_flashbang_hack</a>].message =</div>
<div class="line"><a id="l05583" name="l05583"></a><span class="lineno"> 5583</span>        <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s deploys a flashbang hack!&quot;</span> );</div>
<div class="line"><a id="l05584" name="l05584"></a><span class="lineno"> 5584</span>    <span class="comment">// Gasbombs</span></div>
<div class="line"><a id="l05585" name="l05585"></a><span class="lineno"> 5585</span>    grenades[<a class="code hl_variable" href="monattack_8cpp.html#a9df4a13e527a4e8a491fb283261fb052">itype_bot_gasbomb_hack</a>].message =</div>
<div class="line"><a id="l05586" name="l05586"></a><span class="lineno"> 5586</span>        <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s deploys a tear gas hack!&quot;</span> );</div>
<div class="line"><a id="l05587" name="l05587"></a><span class="lineno"> 5587</span>    <span class="comment">// C-4</span></div>
<div class="line"><a id="l05588" name="l05588"></a><span class="lineno"> 5588</span>    grenades[<a class="code hl_variable" href="monattack_8cpp.html#ae6f9b357342dfd9d5269bb2bb3e4c51b">itype_bot_c4_hack</a>].message = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s buzzes and deploys a C-4 hack!&quot;</span> );</div>
<div class="line"><a id="l05589" name="l05589"></a><span class="lineno"> 5589</span>    grenades[<a class="code hl_variable" href="monattack_8cpp.html#ae6f9b357342dfd9d5269bb2bb3e4c51b">itype_bot_c4_hack</a>].chance = 8;</div>
<div class="line"><a id="l05590" name="l05590"></a><span class="lineno"> 5590</span> </div>
<div class="line"><a id="l05591" name="l05591"></a><span class="lineno"> 5591</span>    <span class="comment">// Only can actively target the player right now. Once we have the ability to grab targets that we aren&#39;t</span></div>
<div class="line"><a id="l05592" name="l05592"></a><span class="lineno"> 5592</span>    <span class="comment">// actively attacking change this to use that instead.</span></div>
<div class="line"><a id="l05593" name="l05593"></a><span class="lineno"> 5593</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *<span class="keyword">const</span> target = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classCreature.html">Creature</a> *<span class="keyword">&gt;</span>( &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u );</div>
<div class="line"><a id="l05594" name="l05594"></a><span class="lineno"> 5594</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_function" href="classmonster.html#a125622587c2069dc4dbbe07943c81336">attitude_to</a>( *target ) == <a class="code hl_enumvalue" href="classCreature.html#a8a475630b3289c468bd06cf114008217ac45ee12dee5d3dc56de7fe86e4484bea">Creature::A_FRIENDLY</a> ) {</div>
<div class="line"><a id="l05595" name="l05595"></a><span class="lineno"> 5595</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05596" name="l05596"></a><span class="lineno"> 5596</span>    }</div>
<div class="line"><a id="l05597" name="l05597"></a><span class="lineno"> 5597</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code hl_function" href="monattack_8cpp.html#a903a3d70acbd6b4366f69c4d1dda31de">grenade_helper</a>( z, target, 30, 60, grenades );</div>
<div class="line"><a id="l05598" name="l05598"></a><span class="lineno"> 5598</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> == -1 ) {</div>
<div class="line"><a id="l05599" name="l05599"></a><span class="lineno"> 5599</span>        <span class="comment">// Something broke badly, disable our special</span></div>
<div class="line"><a id="l05600" name="l05600"></a><span class="lineno"> 5600</span>        z-&gt;<a class="code hl_function" href="classmonster.html#a68ac3a1fd2a1ecf8b80470af3d3d0433">disable_special</a>( <span class="stringliteral">&quot;GRENADIER&quot;</span> );</div>
<div class="line"><a id="l05601" name="l05601"></a><span class="lineno"> 5601</span>    }</div>
<div class="line"><a id="l05602" name="l05602"></a><span class="lineno"> 5602</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05603" name="l05603"></a><span class="lineno"> 5603</span>}</div>
<div class="ttc" id="aclassCreature_html_a8a475630b3289c468bd06cf114008217ac45ee12dee5d3dc56de7fe86e4484bea"><div class="ttname"><a href="classCreature.html#a8a475630b3289c468bd06cf114008217ac45ee12dee5d3dc56de7fe86e4484bea">Creature::A_FRIENDLY</a></div><div class="ttdeci">@ A_FRIENDLY</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00171">creature.h:171</a></div></div>
<div class="ttc" id="aclassmonster_html_a68ac3a1fd2a1ecf8b80470af3d3d0433"><div class="ttname"><a href="classmonster.html#a68ac3a1fd2a1ecf8b80470af3d3d0433">monster::disable_special</a></div><div class="ttdeci">void disable_special(const std::string &amp;special_name)</div><div class="ttdoc">Sets the enabled flag for the given special to false.</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l02072">monster.cpp:2072</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a0bb64404c074dc831e191fc2880ca54c"><div class="ttname"><a href="monattack_8cpp.html#a0bb64404c074dc831e191fc2880ca54c">itype_bot_pacification_hack</a></div><div class="ttdeci">static const itype_id itype_bot_pacification_hack(&quot;bot_pacification_hack&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a6f41a7272b7fc8abde644c27a79aa815"><div class="ttname"><a href="monattack_8cpp.html#a6f41a7272b7fc8abde644c27a79aa815">itype_bot_flashbang_hack</a></div><div class="ttdeci">static const itype_id itype_bot_flashbang_hack(&quot;bot_flashbang_hack&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a903a3d70acbd6b4366f69c4d1dda31de"><div class="ttname"><a href="monattack_8cpp.html#a903a3d70acbd6b4366f69c4d1dda31de">grenade_helper</a></div><div class="ttdeci">static int grenade_helper(monster *const z, Creature *const target, const int dist, const int moves, std::map&lt; itype_id, grenade_helper_struct &gt; data)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l05489">monattack.cpp:5489</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a9df4a13e527a4e8a491fb283261fb052"><div class="ttname"><a href="monattack_8cpp.html#a9df4a13e527a4e8a491fb283261fb052">itype_bot_gasbomb_hack</a></div><div class="ttdeci">static const itype_id itype_bot_gasbomb_hack(&quot;bot_gasbomb_hack&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_ae6f9b357342dfd9d5269bb2bb3e4c51b"><div class="ttname"><a href="monattack_8cpp.html#ae6f9b357342dfd9d5269bb2bb3e4c51b">itype_bot_c4_hack</a></div><div class="ttdeci">static const itype_id itype_bot_c4_hack(&quot;bot_c4_hack&quot;)</div></div>
<div class="ttc" id="anamespacecata_1_1hash64__detail_html_a5ca825db6fd06946302c60daa97333e4"><div class="ttname"><a href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">cata::hash64_detail::ret</a></div><div class="ttdeci">T ret</div><div class="ttdef"><b>Definition:</b> <a href="hash__utils_8h_source.html#l00097">hash_utils.h:97</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8h_source.html#l00171">Creature::A_FRIENDLY</a>, <a class="el" href="monster_8cpp_source.html#l01020">monster::attitude_to()</a>, <a class="el" href="monster_8cpp_source.html#l02072">monster::disable_special()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="monattack_8cpp_source.html#l05489">grenade_helper()</a>, <a class="el" href="monattack_8cpp.html#ae6f9b357342dfd9d5269bb2bb3e4c51b">itype_bot_c4_hack</a>, <a class="el" href="monattack_8cpp.html#a6f41a7272b7fc8abde644c27a79aa815">itype_bot_flashbang_hack</a>, <a class="el" href="monattack_8cpp.html#a9df4a13e527a4e8a491fb283261fb052">itype_bot_gasbomb_hack</a>, <a class="el" href="monattack_8cpp.html#a0bb64404c074dc831e191fc2880ca54c">itype_bot_pacification_hack</a>, and <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="aea82e34532936a984dc3eede6c1aff37" name="aea82e34532936a984dc3eede6c1aff37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea82e34532936a984dc3eede6c1aff37">&#9670;&nbsp;</a></span>grenadier_elite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::grenadier_elite </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l05605">5605</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05606" name="l05606"></a><span class="lineno"> 5606</span>{</div>
<div class="line"><a id="l05607" name="l05607"></a><span class="lineno"> 5607</span>    <span class="comment">// Build our grenade map</span></div>
<div class="line"><a id="l05608" name="l05608"></a><span class="lineno"> 5608</span>    std::map&lt;itype_id, grenade_helper_struct&gt; grenades;</div>
<div class="line"><a id="l05609" name="l05609"></a><span class="lineno"> 5609</span>    <span class="comment">// Grenades</span></div>
<div class="line"><a id="l05610" name="l05610"></a><span class="lineno"> 5610</span>    grenades[<a class="code hl_variable" href="monattack_8cpp.html#aec3e9b84b1cc3e510ca55d47c7e2bbc6">itype_bot_grenade_hack</a>].message = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s deploys a grenade hack!&quot;</span> );</div>
<div class="line"><a id="l05611" name="l05611"></a><span class="lineno"> 5611</span>    <span class="comment">// Flashbangs</span></div>
<div class="line"><a id="l05612" name="l05612"></a><span class="lineno"> 5612</span>    grenades[<a class="code hl_variable" href="monattack_8cpp.html#a6f41a7272b7fc8abde644c27a79aa815">itype_bot_flashbang_hack</a>].message =</div>
<div class="line"><a id="l05613" name="l05613"></a><span class="lineno"> 5613</span>        <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s deploys a flashbang hack!&quot;</span> );</div>
<div class="line"><a id="l05614" name="l05614"></a><span class="lineno"> 5614</span>    <span class="comment">// Gasbombs</span></div>
<div class="line"><a id="l05615" name="l05615"></a><span class="lineno"> 5615</span>    grenades[<a class="code hl_variable" href="monattack_8cpp.html#a9df4a13e527a4e8a491fb283261fb052">itype_bot_gasbomb_hack</a>].message = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s deploys a tear gas hack!&quot;</span> );</div>
<div class="line"><a id="l05616" name="l05616"></a><span class="lineno"> 5616</span>    <span class="comment">// C-4</span></div>
<div class="line"><a id="l05617" name="l05617"></a><span class="lineno"> 5617</span>    grenades[<a class="code hl_variable" href="monattack_8cpp.html#ae6f9b357342dfd9d5269bb2bb3e4c51b">itype_bot_c4_hack</a>].message = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s buzzes and deploys a C-4 hack!&quot;</span> );</div>
<div class="line"><a id="l05618" name="l05618"></a><span class="lineno"> 5618</span>    grenades[<a class="code hl_variable" href="monattack_8cpp.html#ae6f9b357342dfd9d5269bb2bb3e4c51b">itype_bot_c4_hack</a>].chance = 8;</div>
<div class="line"><a id="l05619" name="l05619"></a><span class="lineno"> 5619</span>    grenades[<a class="code hl_variable" href="monattack_8cpp.html#ae6f9b357342dfd9d5269bb2bb3e4c51b">itype_bot_c4_hack</a>].ammo_percentage = .75;</div>
<div class="line"><a id="l05620" name="l05620"></a><span class="lineno"> 5620</span>    <span class="comment">// Mininuke</span></div>
<div class="line"><a id="l05621" name="l05621"></a><span class="lineno"> 5621</span>    grenades[<a class="code hl_variable" href="monattack_8cpp.html#ac1ee58b381895a6d36ec18b2f17ff347">itype_bot_mininuke_hack</a>].message =</div>
<div class="line"><a id="l05622" name="l05622"></a><span class="lineno"> 5622</span>        <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A klaxon blares from %s as it deploys a mininuke hack!&quot;</span> );</div>
<div class="line"><a id="l05623" name="l05623"></a><span class="lineno"> 5623</span>    grenades[<a class="code hl_variable" href="monattack_8cpp.html#ac1ee58b381895a6d36ec18b2f17ff347">itype_bot_mininuke_hack</a>].chance = 50;</div>
<div class="line"><a id="l05624" name="l05624"></a><span class="lineno"> 5624</span>    grenades[<a class="code hl_variable" href="monattack_8cpp.html#ac1ee58b381895a6d36ec18b2f17ff347">itype_bot_mininuke_hack</a>].ammo_percentage = .75;</div>
<div class="line"><a id="l05625" name="l05625"></a><span class="lineno"> 5625</span> </div>
<div class="line"><a id="l05626" name="l05626"></a><span class="lineno"> 5626</span>    <span class="comment">// Only can actively target the player right now. Once we have the ability to grab targets that we aren&#39;t</span></div>
<div class="line"><a id="l05627" name="l05627"></a><span class="lineno"> 5627</span>    <span class="comment">// actively attacking change this to use that instead.</span></div>
<div class="line"><a id="l05628" name="l05628"></a><span class="lineno"> 5628</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *<span class="keyword">const</span> target = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classCreature.html">Creature</a> *<span class="keyword">&gt;</span>( &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u );</div>
<div class="line"><a id="l05629" name="l05629"></a><span class="lineno"> 5629</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_function" href="classmonster.html#a125622587c2069dc4dbbe07943c81336">attitude_to</a>( *target ) == <a class="code hl_enumvalue" href="classCreature.html#a8a475630b3289c468bd06cf114008217ac45ee12dee5d3dc56de7fe86e4484bea">Creature::A_FRIENDLY</a> ) {</div>
<div class="line"><a id="l05630" name="l05630"></a><span class="lineno"> 5630</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05631" name="l05631"></a><span class="lineno"> 5631</span>    }</div>
<div class="line"><a id="l05632" name="l05632"></a><span class="lineno"> 5632</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code hl_function" href="monattack_8cpp.html#a903a3d70acbd6b4366f69c4d1dda31de">grenade_helper</a>( z, target, 30, 60, grenades );</div>
<div class="line"><a id="l05633" name="l05633"></a><span class="lineno"> 5633</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> == -1 ) {</div>
<div class="line"><a id="l05634" name="l05634"></a><span class="lineno"> 5634</span>        <span class="comment">// Something broke badly, disable our special</span></div>
<div class="line"><a id="l05635" name="l05635"></a><span class="lineno"> 5635</span>        z-&gt;<a class="code hl_function" href="classmonster.html#a68ac3a1fd2a1ecf8b80470af3d3d0433">disable_special</a>( <span class="stringliteral">&quot;GRENADIER_ELITE&quot;</span> );</div>
<div class="line"><a id="l05636" name="l05636"></a><span class="lineno"> 5636</span>    }</div>
<div class="line"><a id="l05637" name="l05637"></a><span class="lineno"> 5637</span> </div>
<div class="line"><a id="l05638" name="l05638"></a><span class="lineno"> 5638</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05639" name="l05639"></a><span class="lineno"> 5639</span>}</div>
<div class="ttc" id="amonattack_8cpp_html_ac1ee58b381895a6d36ec18b2f17ff347"><div class="ttname"><a href="monattack_8cpp.html#ac1ee58b381895a6d36ec18b2f17ff347">itype_bot_mininuke_hack</a></div><div class="ttdeci">static const itype_id itype_bot_mininuke_hack(&quot;bot_mininuke_hack&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_aec3e9b84b1cc3e510ca55d47c7e2bbc6"><div class="ttname"><a href="monattack_8cpp.html#aec3e9b84b1cc3e510ca55d47c7e2bbc6">itype_bot_grenade_hack</a></div><div class="ttdeci">static const itype_id itype_bot_grenade_hack(&quot;bot_grenade_hack&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8h_source.html#l00171">Creature::A_FRIENDLY</a>, <a class="el" href="monster_8cpp_source.html#l01020">monster::attitude_to()</a>, <a class="el" href="monster_8cpp_source.html#l02072">monster::disable_special()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="monattack_8cpp_source.html#l05489">grenade_helper()</a>, <a class="el" href="monattack_8cpp.html#ae6f9b357342dfd9d5269bb2bb3e4c51b">itype_bot_c4_hack</a>, <a class="el" href="monattack_8cpp.html#a6f41a7272b7fc8abde644c27a79aa815">itype_bot_flashbang_hack</a>, <a class="el" href="monattack_8cpp.html#a9df4a13e527a4e8a491fb283261fb052">itype_bot_gasbomb_hack</a>, <a class="el" href="monattack_8cpp.html#aec3e9b84b1cc3e510ca55d47c7e2bbc6">itype_bot_grenade_hack</a>, <a class="el" href="monattack_8cpp.html#ac1ee58b381895a6d36ec18b2f17ff347">itype_bot_mininuke_hack</a>, and <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a2aea907b3ca1d1d7decf877176d28bb9" name="a2aea907b3ca1d1d7decf877176d28bb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2aea907b3ca1d1d7decf877176d28bb9">&#9670;&nbsp;</a></span>grow_vine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::grow_vine </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l01500">1500</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01501" name="l01501"></a><span class="lineno"> 1501</span>{</div>
<div class="line"><a id="l01502" name="l01502"></a><span class="lineno"> 1502</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> ) {</div>
<div class="line"><a id="l01503" name="l01503"></a><span class="lineno"> 1503</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos(), z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>() ) &lt;= 3 ) {</div>
<div class="line"><a id="l01504" name="l01504"></a><span class="lineno"> 1504</span>            <span class="comment">// Friendly vines keep the area around you free, so you can move.</span></div>
<div class="line"><a id="l01505" name="l01505"></a><span class="lineno"> 1505</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01506" name="l01506"></a><span class="lineno"> 1506</span>        }</div>
<div class="line"><a id="l01507" name="l01507"></a><span class="lineno"> 1507</span>    }</div>
<div class="line"><a id="l01508" name="l01508"></a><span class="lineno"> 1508</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 100;</div>
<div class="line"><a id="l01509" name="l01509"></a><span class="lineno"> 1509</span>    <span class="comment">// Attempt to fill up to 8 surrounding tiles.</span></div>
<div class="line"><a id="l01510" name="l01510"></a><span class="lineno"> 1510</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 8 ); ++i ) {</div>
<div class="line"><a id="l01511" name="l01511"></a><span class="lineno"> 1511</span>        <span class="keywordflow">if</span>( <a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">const</span> <a class="code hl_function" href="namespacemattack.html#af2676be6738b2b9622d33c48e7c664c6">vine</a> = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_around( <a class="code hl_variable" href="monattack_8cpp.html#a041e74f49f2eab98904a956d5d5e473a">mon_creeper_vine</a>, z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 1 ) ) {</div>
<div class="line"><a id="l01512" name="l01512"></a><span class="lineno"> 1512</span>            <a class="code hl_function" href="namespacemattack.html#af2676be6738b2b9622d33c48e7c664c6">vine</a>-&gt;make_ally( *z );</div>
<div class="line"><a id="l01513" name="l01513"></a><span class="lineno"> 1513</span>            <span class="comment">// Store position of parent hub in vine goal point.</span></div>
<div class="line"><a id="l01514" name="l01514"></a><span class="lineno"> 1514</span>            <a class="code hl_function" href="namespacemattack.html#af2676be6738b2b9622d33c48e7c664c6">vine</a>-&gt;set_goal( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>() );</div>
<div class="line"><a id="l01515" name="l01515"></a><span class="lineno"> 1515</span>        }</div>
<div class="line"><a id="l01516" name="l01516"></a><span class="lineno"> 1516</span>    }</div>
<div class="line"><a id="l01517" name="l01517"></a><span class="lineno"> 1517</span> </div>
<div class="line"><a id="l01518" name="l01518"></a><span class="lineno"> 1518</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01519" name="l01519"></a><span class="lineno"> 1519</span>}</div>
<div class="ttc" id="amonattack_8cpp_html_a041e74f49f2eab98904a956d5d5e473a"><div class="ttname"><a href="monattack_8cpp.html#a041e74f49f2eab98904a956d5d5e473a">mon_creeper_vine</a></div><div class="ttdeci">static const mtype_id mon_creeper_vine(&quot;mon_creeper_vine&quot;)</div></div>
<div class="ttc" id="anamespacemattack_html_af2676be6738b2b9622d33c48e7c664c6"><div class="ttname"><a href="namespacemattack.html#af2676be6738b2b9622d33c48e7c664c6">mattack::vine</a></div><div class="ttdeci">bool vine(monster *z)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l01521">monattack.cpp:1521</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monster_8h_source.html#l00471">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="monattack_8cpp.html#a041e74f49f2eab98904a956d5d5e473a">mon_creeper_vine</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, and <a class="el" href="monattack_8cpp_source.html#l01521">vine()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a07af5ccfe3022a9bb301db9b8bccae57" name="a07af5ccfe3022a9bb301db9b8bccae57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07af5ccfe3022a9bb301db9b8bccae57">&#9670;&nbsp;</a></span>growplants()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::growplants </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l01407">1407</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01408" name="l01408"></a><span class="lineno"> 1408</span>{</div>
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"> 1409</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;p : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 3 ) ) {</div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"> 1410</span> </div>
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"> 1411</span>        <span class="comment">// Only affect natural, dirtlike terrain or trees.</span></div>
<div class="line"><a id="l01412" name="l01412"></a><span class="lineno"> 1412</span>        <span class="keywordflow">if</span>( !( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.has_flag_ter( <span class="stringliteral">&quot;DIGGABLE&quot;</span>, p ) ||</div>
<div class="line"><a id="l01413" name="l01413"></a><span class="lineno"> 1413</span>               <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.has_flag_ter( <span class="stringliteral">&quot;TREE&quot;</span>, p ) ||</div>
<div class="line"><a id="l01414" name="l01414"></a><span class="lineno"> 1414</span>               <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.ter( p ) == <a class="code hl_variable" href="mapdata_8cpp.html#ab84dbeb498d31f58852e42da352fff41">t_tree_young</a> ) ) {</div>
<div class="line"><a id="l01415" name="l01415"></a><span class="lineno"> 1415</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01416" name="l01416"></a><span class="lineno"> 1416</span>        }</div>
<div class="line"><a id="l01417" name="l01417"></a><span class="lineno"> 1417</span> </div>
<div class="line"><a id="l01418" name="l01418"></a><span class="lineno"> 1418</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.is_bashable( p ) &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a id="l01419" name="l01419"></a><span class="lineno"> 1419</span>            <span class="comment">// Destroy everything</span></div>
<div class="line"><a id="l01420" name="l01420"></a><span class="lineno"> 1420</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.destroy( p );</div>
<div class="line"><a id="l01421" name="l01421"></a><span class="lineno"> 1421</span>            <span class="comment">// And then make the ground fertile</span></div>
<div class="line"><a id="l01422" name="l01422"></a><span class="lineno"> 1422</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.ter_set( p, <a class="code hl_variable" href="mapdata_8cpp.html#af636f3d89f77cfd0ebb47c3d4ecac0c1">t_dirtmound</a> );</div>
<div class="line"><a id="l01423" name="l01423"></a><span class="lineno"> 1423</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01424" name="l01424"></a><span class="lineno"> 1424</span>        }</div>
<div class="line"><a id="l01425" name="l01425"></a><span class="lineno"> 1425</span> </div>
<div class="line"><a id="l01426" name="l01426"></a><span class="lineno"> 1426</span>        <span class="comment">// 1 in 4 chance to grow a tree</span></div>
<div class="line"><a id="l01427" name="l01427"></a><span class="lineno"> 1427</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"> 1429</span>                <span class="comment">// If no tree, perhaps underbrush</span></div>
<div class="line"><a id="l01430" name="l01430"></a><span class="lineno"> 1430</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.ter_set( p, <a class="code hl_variable" href="mapdata_8cpp.html#a1cc10dceb38eb6612f3907e03a490a97">t_underbrush</a> );</div>
<div class="line"><a id="l01431" name="l01431"></a><span class="lineno"> 1431</span>            }</div>
<div class="line"><a id="l01432" name="l01432"></a><span class="lineno"> 1432</span> </div>
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"> 1433</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01434" name="l01434"></a><span class="lineno"> 1434</span>        }</div>
<div class="line"><a id="l01435" name="l01435"></a><span class="lineno"> 1435</span> </div>
<div class="line"><a id="l01436" name="l01436"></a><span class="lineno"> 1436</span>        <span class="comment">// Grow a tree and pierce stuff with it</span></div>
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"> 1437</span>        <a class="code hl_class" href="classCreature.html">Creature</a> *critter = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at( p );</div>
<div class="line"><a id="l01438" name="l01438"></a><span class="lineno"> 1438</span>        <span class="comment">// Don&#39;t grow under friends (and self)</span></div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span>        <span class="keywordflow">if</span>( critter != <span class="keyword">nullptr</span> &amp;&amp;</div>
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"> 1440</span>            z-&gt;<a class="code hl_function" href="classmonster.html#a125622587c2069dc4dbbe07943c81336">attitude_to</a>( *critter ) == <a class="code hl_enumvalue" href="classCreature.html#a8a475630b3289c468bd06cf114008217ac45ee12dee5d3dc56de7fe86e4484bea">Creature::A_FRIENDLY</a> ) {</div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"> 1441</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"> 1442</span>        }</div>
<div class="line"><a id="l01443" name="l01443"></a><span class="lineno"> 1443</span> </div>
<div class="line"><a id="l01444" name="l01444"></a><span class="lineno"> 1444</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.ter_set( p, <a class="code hl_variable" href="mapdata_8cpp.html#ab84dbeb498d31f58852e42da352fff41">t_tree_young</a> );</div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span>        <span class="keywordflow">if</span>( critter == <span class="keyword">nullptr</span> || critter-&gt;<a class="code hl_function" href="classCreature.html#afd2f1b1e5bafdef20afddbb704b1d5a5">uncanny_dodge</a>() ) {</div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01447" name="l01447"></a><span class="lineno"> 1447</span>        }</div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"> 1448</span> </div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span>        <span class="keyword">const</span> <a class="code hl_enumeration" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980">body_part</a> hit = <a class="code hl_function" href="monattack_8cpp.html#a8f0b88c954254f70e976bb0fabe2287f">body_part_hit_by_plant</a>();</div>
<div class="line"><a id="l01450" name="l01450"></a><span class="lineno"> 1450</span>        critter-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"> 1451</span>                                        <span class="comment">//~ %s is bodypart name in accusative.</span></div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"> 1452</span>                                        <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A tree bursts forth from the earth and pierces your %s!&quot;</span> ),</div>
<div class="line"><a id="l01453" name="l01453"></a><span class="lineno"> 1453</span>                                        <span class="comment">//~ %s is bodypart name in accusative.</span></div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span>                                        <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A tree bursts forth from the earth and pierces &lt;npcname&gt;&#39;s %s!&quot;</span> ),</div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"> 1455</span>                                        <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( hit ) );</div>
<div class="line"><a id="l01456" name="l01456"></a><span class="lineno"> 1456</span>        critter-&gt;<a class="code hl_function" href="classCreature.html#a75ad96eb6ce27d3c1df250965b4de7b5">deal_damage</a>( z, <a class="code hl_function" href="bodypart_8cpp.html#ae34a481a7c686b233f2d8c48e43b723a">convert_bp</a>( hit ).<span class="keywordtype">id</span>(), <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa12e559f29e023db673e9251b9337d8dd">DT_STAB</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 10, 30 ) ) );</div>
<div class="line"><a id="l01457" name="l01457"></a><span class="lineno"> 1457</span>    }</div>
<div class="line"><a id="l01458" name="l01458"></a><span class="lineno"> 1458</span> </div>
<div class="line"><a id="l01459" name="l01459"></a><span class="lineno"> 1459</span>    <span class="comment">// 1 in 5 chance of making existing vegetation grow larger</span></div>
<div class="line"><a id="l01460" name="l01460"></a><span class="lineno"> 1460</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 5 ) ) {</div>
<div class="line"><a id="l01461" name="l01461"></a><span class="lineno"> 1461</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01462" name="l01462"></a><span class="lineno"> 1462</span>    }</div>
<div class="line"><a id="l01463" name="l01463"></a><span class="lineno"> 1463</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;p : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 5 ) ) {</div>
<div class="line"><a id="l01464" name="l01464"></a><span class="lineno"> 1464</span>        <span class="keyword">const</span> <span class="keyword">auto</span> ter = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.ter( p );</div>
<div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span>        <span class="keywordflow">if</span>( ter != <a class="code hl_variable" href="mapdata_8cpp.html#ab84dbeb498d31f58852e42da352fff41">t_tree_young</a> &amp;&amp; ter != <a class="code hl_variable" href="mapdata_8cpp.html#a1cc10dceb38eb6612f3907e03a490a97">t_underbrush</a> ) {</div>
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"> 1466</span>            <span class="comment">// Skip as soon as possible to avoid all the checks</span></div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span>        }</div>
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"> 1469</span> </div>
<div class="line"><a id="l01470" name="l01470"></a><span class="lineno"> 1470</span>        <a class="code hl_class" href="classCreature.html">Creature</a> *critter = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at( p );</div>
<div class="line"><a id="l01471" name="l01471"></a><span class="lineno"> 1471</span>        <span class="keywordflow">if</span>( critter != <span class="keyword">nullptr</span> &amp;&amp; z-&gt;<a class="code hl_function" href="classmonster.html#a125622587c2069dc4dbbe07943c81336">attitude_to</a>( *critter ) == <a class="code hl_enumvalue" href="classCreature.html#a8a475630b3289c468bd06cf114008217ac45ee12dee5d3dc56de7fe86e4484bea">Creature::A_FRIENDLY</a> ) {</div>
<div class="line"><a id="l01472" name="l01472"></a><span class="lineno"> 1472</span>            <span class="comment">// Don&#39;t buff terrain below friends (and self)</span></div>
<div class="line"><a id="l01473" name="l01473"></a><span class="lineno"> 1473</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01474" name="l01474"></a><span class="lineno"> 1474</span>        }</div>
<div class="line"><a id="l01475" name="l01475"></a><span class="lineno"> 1475</span> </div>
<div class="line"><a id="l01476" name="l01476"></a><span class="lineno"> 1476</span>        <span class="keywordflow">if</span>( ter == <a class="code hl_variable" href="mapdata_8cpp.html#ab84dbeb498d31f58852e42da352fff41">t_tree_young</a> ) {</div>
<div class="line"><a id="l01477" name="l01477"></a><span class="lineno"> 1477</span>            <span class="comment">// Young tree =&gt; tree</span></div>
<div class="line"><a id="l01478" name="l01478"></a><span class="lineno"> 1478</span>            <span class="comment">// TODO: Make this deal damage too - young tree can be walked on, tree can&#39;t</span></div>
<div class="line"><a id="l01479" name="l01479"></a><span class="lineno"> 1479</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.ter_set( p, <a class="code hl_variable" href="mapdata_8cpp.html#ae1a1500cc266951a5baea17ce1e753d3">t_tree</a> );</div>
<div class="line"><a id="l01480" name="l01480"></a><span class="lineno"> 1480</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ter == <a class="code hl_variable" href="mapdata_8cpp.html#a1cc10dceb38eb6612f3907e03a490a97">t_underbrush</a> ) {</div>
<div class="line"><a id="l01481" name="l01481"></a><span class="lineno"> 1481</span>            <span class="comment">// Underbrush =&gt; young tree</span></div>
<div class="line"><a id="l01482" name="l01482"></a><span class="lineno"> 1482</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.ter_set( p, <a class="code hl_variable" href="mapdata_8cpp.html#ab84dbeb498d31f58852e42da352fff41">t_tree_young</a> );</div>
<div class="line"><a id="l01483" name="l01483"></a><span class="lineno"> 1483</span>            <span class="keywordflow">if</span>( critter != <span class="keyword">nullptr</span> &amp;&amp; !critter-&gt;<a class="code hl_function" href="classCreature.html#afd2f1b1e5bafdef20afddbb704b1d5a5">uncanny_dodge</a>() ) {</div>
<div class="line"><a id="l01484" name="l01484"></a><span class="lineno"> 1484</span>                <span class="keyword">const</span> <a class="code hl_enumeration" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980">body_part</a> hit = <a class="code hl_function" href="monattack_8cpp.html#a8f0b88c954254f70e976bb0fabe2287f">body_part_hit_by_plant</a>();</div>
<div class="line"><a id="l01485" name="l01485"></a><span class="lineno"> 1485</span>                critter-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a id="l01486" name="l01486"></a><span class="lineno"> 1486</span>                                                <span class="comment">//~ %s is bodypart name in accusative.</span></div>
<div class="line"><a id="l01487" name="l01487"></a><span class="lineno"> 1487</span>                                                <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The underbrush beneath your feet grows and pierces your %s!&quot;</span> ),</div>
<div class="line"><a id="l01488" name="l01488"></a><span class="lineno"> 1488</span>                                                <span class="comment">//~ %s is bodypart name in accusative.</span></div>
<div class="line"><a id="l01489" name="l01489"></a><span class="lineno"> 1489</span>                                                <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Underbrush grows into a tree, and it pierces &lt;npcname&gt;&#39;s %s!&quot;</span> ),</div>
<div class="line"><a id="l01490" name="l01490"></a><span class="lineno"> 1490</span>                                                <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( hit ) );</div>
<div class="line"><a id="l01491" name="l01491"></a><span class="lineno"> 1491</span>                critter-&gt;<a class="code hl_function" href="classCreature.html#a75ad96eb6ce27d3c1df250965b4de7b5">deal_damage</a>( z, <a class="code hl_function" href="bodypart_8cpp.html#ae34a481a7c686b233f2d8c48e43b723a">convert_bp</a>( hit ).<span class="keywordtype">id</span>(), <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa12e559f29e023db673e9251b9337d8dd">DT_STAB</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 10, 30 ) ) );</div>
<div class="line"><a id="l01492" name="l01492"></a><span class="lineno"> 1492</span>            }</div>
<div class="line"><a id="l01493" name="l01493"></a><span class="lineno"> 1493</span>        }</div>
<div class="line"><a id="l01494" name="l01494"></a><span class="lineno"> 1494</span>    }</div>
<div class="line"><a id="l01495" name="l01495"></a><span class="lineno"> 1495</span> </div>
<div class="line"><a id="l01496" name="l01496"></a><span class="lineno"> 1496</span>    <span class="comment">// added during refactor, previously had no cooldown reset</span></div>
<div class="line"><a id="l01497" name="l01497"></a><span class="lineno"> 1497</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01498" name="l01498"></a><span class="lineno"> 1498</span>}</div>
<div class="ttc" id="amapdata_8cpp_html_a1cc10dceb38eb6612f3907e03a490a97"><div class="ttname"><a href="mapdata_8cpp.html#a1cc10dceb38eb6612f3907e03a490a97">t_underbrush</a></div><div class="ttdeci">ter_id t_underbrush</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00682">mapdata.cpp:682</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_ab84dbeb498d31f58852e42da352fff41"><div class="ttname"><a href="mapdata_8cpp.html#ab84dbeb498d31f58852e42da352fff41">t_tree_young</a></div><div class="ttdeci">ter_id t_tree_young</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00677">mapdata.cpp:677</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_ae1a1500cc266951a5baea17ce1e753d3"><div class="ttname"><a href="mapdata_8cpp.html#ae1a1500cc266951a5baea17ce1e753d3">t_tree</a></div><div class="ttdeci">ter_id t_tree</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00677">mapdata.cpp:677</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_af636f3d89f77cfd0ebb47c3d4ecac0c1"><div class="ttname"><a href="mapdata_8cpp.html#af636f3d89f77cfd0ebb47c3d4ecac0c1">t_dirtmound</a></div><div class="ttdeci">ter_id t_dirtmound</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00625">mapdata.cpp:625</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8h_source.html#l00171">Creature::A_FRIENDLY</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="monster_8cpp_source.html#l01020">monster::attitude_to()</a>, <a class="el" href="monattack_8cpp_source.html#l01387">body_part_hit_by_plant()</a>, <a class="el" href="bodypart_8cpp_source.html#l00329">body_part_name_accusative()</a>, <a class="el" href="bodypart_8cpp_source.html#l00185">convert_bp()</a>, <a class="el" href="creature_8cpp_source.html#l00873">Creature::deal_damage()</a>, <a class="el" href="damage_8h_source.html#l00027">DT_STAB</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="mapdata_8cpp_source.html#l00625">t_dirtmound</a>, <a class="el" href="mapdata_8cpp_source.html#l00677">t_tree</a>, <a class="el" href="mapdata_8cpp_source.html#l00677">t_tree_young</a>, <a class="el" href="mapdata_8cpp_source.html#l00682">t_underbrush</a>, and <a class="el" href="creature_8h_source.html#l00485">Creature::uncanny_dodge()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse_8cpp_source.html#l05178">iuse::artifact()</a>, and <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="ae1408c6404a5086676f125077c742472" name="ae1408c6404a5086676f125077c742472"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1408c6404a5086676f125077c742472">&#9670;&nbsp;</a></span>howl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::howl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l00530">530</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>{</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ||</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>        <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() ) &gt; 4 ||</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>        !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>    }</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span> </div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>    <span class="comment">// It takes a while</span></div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 200;</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>    <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 35, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f">sounds::sound_t::alert</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;an ear-piercing howl!&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;shout&quot;</span>,</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>                   <span class="stringliteral">&quot;howl&quot;</span> );</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span> </div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>    <span class="comment">// TODO: Make this use mon&#39;s faction when those are in</span></div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> != 0 ) {</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>        <span class="keywordflow">for</span>( <a class="code hl_class" href="classmonster.html">monster</a> &amp;other : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;all_monsters() ) {</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>            <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="character_8h.html#a70a4eaaf64bcd7658f91bfb500492f5aa795f3202b17cb6bc3d4b771d8c6c9eaf">other</a>.type != z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a> ) {</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>            }</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>            <span class="comment">// Quote KA101: Chance of friendlying other howlers in the area, I&#39;d imagine:</span></div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>            <span class="comment">// wolves use howls for communication and can convey that the ape is on Team Wolf.</span></div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>                <a class="code hl_enumvalue" href="character_8h.html#a70a4eaaf64bcd7658f91bfb500492f5aa795f3202b17cb6bc3d4b771d8c6c9eaf">other</a>.friendly = z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a>;</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>            }</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>        }</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>    }</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span> </div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>}</div>
<div class="ttc" id="acharacter_8h_html_a70a4eaaf64bcd7658f91bfb500492f5aa795f3202b17cb6bc3d4b771d8c6c9eaf"><div class="ttname"><a href="character_8h.html#a70a4eaaf64bcd7658f91bfb500492f5aa795f3202b17cb6bc3d4b771d8c6c9eaf">rechargeable_cbm::other</a></div><div class="ttdeci">@ other</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f">sounds::alert</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="monster_8h_source.html#l00471">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="character_8h.html#a70a4eaaf64bcd7658f91bfb500492f5aa795f3202b17cb6bc3d4b771d8c6c9eaf">other</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, and <a class="el" href="monster_8h_source.html#l00478">monster::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="ae75ebfe5b3989553e7954228218df203" name="ae75ebfe5b3989553e7954228218df203"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae75ebfe5b3989553e7954228218df203">&#9670;&nbsp;</a></span>impale()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::impale </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l02046">2046</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02047" name="l02047"></a><span class="lineno"> 2047</span>{</div>
<div class="line"><a id="l02048" name="l02048"></a><span class="lineno"> 2048</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classmonster.html#a0f83a7ee7bd8d96efc80200c5a5caf5b">can_act</a>() ) {</div>
<div class="line"><a id="l02049" name="l02049"></a><span class="lineno"> 2049</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02050" name="l02050"></a><span class="lineno"> 2050</span>    }</div>
<div class="line"><a id="l02051" name="l02051"></a><span class="lineno"> 2051</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l02052" name="l02052"></a><span class="lineno"> 2052</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> || !<a class="code hl_function" href="monattack_8cpp.html#abf0d71b531a799a8eb3fd58a846064db">is_adjacent</a>( z, target, <span class="keyword">false</span> ) ) {</div>
<div class="line"><a id="l02053" name="l02053"></a><span class="lineno"> 2053</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02054" name="l02054"></a><span class="lineno"> 2054</span>    }</div>
<div class="line"><a id="l02055" name="l02055"></a><span class="lineno"> 2055</span> </div>
<div class="line"><a id="l02056" name="l02056"></a><span class="lineno"> 2056</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 80;</div>
<div class="line"><a id="l02057" name="l02057"></a><span class="lineno"> 2057</span>    <span class="keywordtype">bool</span> uncanny = target-&gt;<a class="code hl_function" href="classCreature.html#afd2f1b1e5bafdef20afddbb704b1d5a5">uncanny_dodge</a>();</div>
<div class="line"><a id="l02058" name="l02058"></a><span class="lineno"> 2058</span>    <span class="keywordflow">if</span>( uncanny || <a class="code hl_function" href="namespacemattack.html#a4efb8be314551e35f69df8cf8d824174">dodge_check</a>( z, target ) ) {</div>
<div class="line"><a id="l02059" name="l02059"></a><span class="lineno"> 2059</span>        <span class="keyword">auto</span> msg_type = target == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ? <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a> : <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>;</div>
<div class="line"><a id="l02060" name="l02060"></a><span class="lineno"> 2060</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( msg_type, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s lunges at you, but you dodge!&quot;</span> ),</div>
<div class="line"><a id="l02061" name="l02061"></a><span class="lineno"> 2061</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s lunges at &lt;npcname&gt;, but they dodge!&quot;</span> ),</div>
<div class="line"><a id="l02062" name="l02062"></a><span class="lineno"> 2062</span>                                       z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02063" name="l02063"></a><span class="lineno"> 2063</span>        <span class="keywordflow">if</span>( !uncanny ) {</div>
<div class="line"><a id="l02064" name="l02064"></a><span class="lineno"> 2064</span>            target-&gt;<a class="code hl_function" href="classCreature.html#af56188882e3300853d18f166738ee37a">on_dodge</a>( z, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> * 2 );</div>
<div class="line"><a id="l02065" name="l02065"></a><span class="lineno"> 2065</span>        }</div>
<div class="line"><a id="l02066" name="l02066"></a><span class="lineno"> 2066</span> </div>
<div class="line"><a id="l02067" name="l02067"></a><span class="lineno"> 2067</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02068" name="l02068"></a><span class="lineno"> 2068</span>    }</div>
<div class="line"><a id="l02069" name="l02069"></a><span class="lineno"> 2069</span> </div>
<div class="line"><a id="l02070" name="l02070"></a><span class="lineno"> 2070</span>    <span class="keywordtype">int</span> dam = target-&gt;<a class="code hl_function" href="classCreature.html#a75ad96eb6ce27d3c1df250965b4de7b5">deal_damage</a>( z, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ), <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa12e559f29e023db673e9251b9337d8dd">DT_STAB</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 10, 20 ),</div>
<div class="line"><a id="l02071" name="l02071"></a><span class="lineno"> 2071</span>                                   <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 5, 15 ),</div>
<div class="line"><a id="l02072" name="l02072"></a><span class="lineno"> 2072</span>                                   .5 ) ).<a class="code hl_function" href="structdealt__damage__instance.html#a86b702070a1c313624abc78ff34eff48">total_damage</a>();</div>
<div class="line"><a id="l02073" name="l02073"></a><span class="lineno"> 2073</span>    <span class="keywordflow">if</span>( dam &gt; 0 ) {</div>
<div class="line"><a id="l02074" name="l02074"></a><span class="lineno"> 2074</span>        <span class="keyword">auto</span> msg_type = target == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ? <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a> : <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>;</div>
<div class="line"><a id="l02075" name="l02075"></a><span class="lineno"> 2075</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( msg_type,</div>
<div class="line"><a id="l02076" name="l02076"></a><span class="lineno"> 2076</span>                                       <span class="comment">//~ 1$s is monster name, 2$s bodypart in accusative</span></div>
<div class="line"><a id="l02077" name="l02077"></a><span class="lineno"> 2077</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s impales your torso!&quot;</span> ),</div>
<div class="line"><a id="l02078" name="l02078"></a><span class="lineno"> 2078</span>                                       <span class="comment">//~ 1$s is monster name, 2$s bodypart in accusative</span></div>
<div class="line"><a id="l02079" name="l02079"></a><span class="lineno"> 2079</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s impales &lt;npcname&gt;&#39;s torso!&quot;</span> ),</div>
<div class="line"><a id="l02080" name="l02080"></a><span class="lineno"> 2080</span>                                       z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02081" name="l02081"></a><span class="lineno"> 2081</span> </div>
<div class="line"><a id="l02082" name="l02082"></a><span class="lineno"> 2082</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">on_hit</a>( z, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ),  z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> );</div>
<div class="line"><a id="l02083" name="l02083"></a><span class="lineno"> 2083</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 60 / ( dam + 20 ) ) ) {</div>
<div class="line"><a id="l02084" name="l02084"></a><span class="lineno"> 2084</span>            target-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 75_turns, 125_turns ), <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a> );</div>
<div class="line"><a id="l02085" name="l02085"></a><span class="lineno"> 2085</span> </div>
<div class="line"><a id="l02086" name="l02086"></a><span class="lineno"> 2086</span>        }</div>
<div class="line"><a id="l02087" name="l02087"></a><span class="lineno"> 2087</span> </div>
<div class="line"><a id="l02088" name="l02088"></a><span class="lineno"> 2088</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 200 + dam ) &gt; 100 ) {</div>
<div class="line"><a id="l02089" name="l02089"></a><span class="lineno"> 2089</span>            target-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a>, 3_turns );</div>
<div class="line"><a id="l02090" name="l02090"></a><span class="lineno"> 2090</span>        }</div>
<div class="line"><a id="l02091" name="l02091"></a><span class="lineno"> 2091</span>        z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 80; <span class="comment">//Takes extra time for the creature to pull out the protrusion</span></div>
<div class="line"><a id="l02092" name="l02092"></a><span class="lineno"> 2092</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02093" name="l02093"></a><span class="lineno"> 2093</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>(</div>
<div class="line"><a id="l02094" name="l02094"></a><span class="lineno"> 2094</span>            <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s tries to impale your torso, but fails to penetrate your armor!&quot;</span> ),</div>
<div class="line"><a id="l02095" name="l02095"></a><span class="lineno"> 2095</span>            <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s tries to impale &lt;npcname&gt;&#39;s torso, but fails to penetrate their armor!&quot;</span> ),</div>
<div class="line"><a id="l02096" name="l02096"></a><span class="lineno"> 2096</span>            z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02097" name="l02097"></a><span class="lineno"> 2097</span>    }</div>
<div class="line"><a id="l02098" name="l02098"></a><span class="lineno"> 2098</span> </div>
<div class="line"><a id="l02099" name="l02099"></a><span class="lineno"> 2099</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a36dcf5a04ddc0cf9fa29c08b7b099158">check_dead_state</a>();</div>
<div class="line"><a id="l02100" name="l02100"></a><span class="lineno"> 2100</span> </div>
<div class="line"><a id="l02101" name="l02101"></a><span class="lineno"> 2101</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02102" name="l02102"></a><span class="lineno"> 2102</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8cpp_source.html#l00974">Creature::add_effect()</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="bodypart_8h_source.html#l00040">bp_torso</a>, <a class="el" href="monster_8cpp_source.html#l00931">monster::can_act()</a>, <a class="el" href="creature_8cpp_source.html#l01833">Creature::check_dead_state()</a>, <a class="el" href="creature_8cpp_source.html#l00873">Creature::deal_damage()</a>, <a class="el" href="monattack_8cpp_source.html#l05764">dodge_check()</a>, <a class="el" href="damage_8h_source.html#l00027">DT_STAB</a>, <a class="el" href="monattack_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a>, <a class="el" href="monattack_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="monattack_8cpp_source.html#l00275">is_adjacent()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="mtype_8h_source.html#l00285">mtype::melee_skill</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="classCreature.html#af56188882e3300853d18f166738ee37a">Creature::on_dodge()</a>, <a class="el" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">Creature::on_hit()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="damage_8cpp_source.html#l00180">dealt_damage_instance::total_damage()</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, and <a class="el" href="creature_8h_source.html#l00485">Creature::uncanny_dodge()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a6deb1c5d25f7d3ff5970dc90fa122322" name="a6deb1c5d25f7d3ff5970dc90fa122322"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6deb1c5d25f7d3ff5970dc90fa122322">&#9670;&nbsp;</a></span>jackson()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::jackson </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l02397">2397</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02398" name="l02398"></a><span class="lineno"> 2398</span>{</div>
<div class="line"><a id="l02399" name="l02399"></a><span class="lineno"> 2399</span>    <span class="comment">// Jackson draws nearby zombies into the dance.</span></div>
<div class="line"><a id="l02400" name="l02400"></a><span class="lineno"> 2400</span>    std::list&lt;monster *&gt; allies;</div>
<div class="line"><a id="l02401" name="l02401"></a><span class="lineno"> 2401</span>    std::vector&lt;tripoint&gt; nearby_points = <a class="code hl_function" href="coordinates_8h.html#a13a12943d34d5f17e6c3b4e730659fc6">closest_points_first</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 3 );</div>
<div class="line"><a id="l02402" name="l02402"></a><span class="lineno"> 2402</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classmonster.html">monster</a> &amp;candidate : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;all_monsters() ) {</div>
<div class="line"><a id="l02403" name="l02403"></a><span class="lineno"> 2403</span>        <span class="keywordflow">if</span>( candidate.type-&gt;in_species( <a class="code hl_variable" href="monattack_8cpp.html#a4e2730248c54d4d07fa7e215efb35d1a">ZOMBIE</a> ) &amp;&amp; candidate.type-&gt;id != <a class="code hl_variable" href="monattack_8cpp.html#a5cb2b347df12e43876e2f0f44afdf102">mon_zombie_jackson</a> ) {</div>
<div class="line"><a id="l02404" name="l02404"></a><span class="lineno"> 2404</span>            <span class="comment">// Just give the allies consistent assignments.</span></div>
<div class="line"><a id="l02405" name="l02405"></a><span class="lineno"> 2405</span>            <span class="comment">// Don&#39;t worry about trying to make the orders optimal.</span></div>
<div class="line"><a id="l02406" name="l02406"></a><span class="lineno"> 2406</span>            allies.push_back( &amp;candidate );</div>
<div class="line"><a id="l02407" name="l02407"></a><span class="lineno"> 2407</span>        }</div>
<div class="line"><a id="l02408" name="l02408"></a><span class="lineno"> 2408</span>    }</div>
<div class="line"><a id="l02409" name="l02409"></a><span class="lineno"> 2409</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> num_dancers = std::min( allies.size(), nearby_points.size() );</div>
<div class="line"><a id="l02410" name="l02410"></a><span class="lineno"> 2410</span>    <span class="keywordtype">int</span> dancers = 0;</div>
<div class="line"><a id="l02411" name="l02411"></a><span class="lineno"> 2411</span>    <span class="keywordtype">bool</span> converted = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02412" name="l02412"></a><span class="lineno"> 2412</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> ally = allies.begin(); ally != allies.end(); ++ally, ++dancers ) {</div>
<div class="line"><a id="l02413" name="l02413"></a><span class="lineno"> 2413</span>        <a class="code hl_struct" href="structtripoint.html">tripoint</a> post = z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>();</div>
<div class="line"><a id="l02414" name="l02414"></a><span class="lineno"> 2414</span>        <span class="keywordflow">if</span>( dancers &lt; num_dancers ) {</div>
<div class="line"><a id="l02415" name="l02415"></a><span class="lineno"> 2415</span>            <span class="comment">// Each dancer is assigned a spot in the nearby_points vector based on their order.</span></div>
<div class="line"><a id="l02416" name="l02416"></a><span class="lineno"> 2416</span>            <span class="keywordtype">int</span> assigned_spot = ( nearby_points.size() * dancers ) / num_dancers;</div>
<div class="line"><a id="l02417" name="l02417"></a><span class="lineno"> 2417</span>            post = nearby_points[ assigned_spot ];</div>
<div class="line"><a id="l02418" name="l02418"></a><span class="lineno"> 2418</span>        }</div>
<div class="line"><a id="l02419" name="l02419"></a><span class="lineno"> 2419</span>        <span class="keywordflow">if</span>( ( *ally )-&gt;type-&gt;id != <a class="code hl_variable" href="monattack_8cpp.html#a0781c8bcbb6f6f615b022a1b308a21f7">mon_zombie_dancer</a> ) {</div>
<div class="line"><a id="l02420" name="l02420"></a><span class="lineno"> 2420</span>            ( *ally )-&gt;poly( <a class="code hl_variable" href="monattack_8cpp.html#a0781c8bcbb6f6f615b022a1b308a21f7">mon_zombie_dancer</a> );</div>
<div class="line"><a id="l02421" name="l02421"></a><span class="lineno"> 2421</span>            converted = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02422" name="l02422"></a><span class="lineno"> 2422</span>        }</div>
<div class="line"><a id="l02423" name="l02423"></a><span class="lineno"> 2423</span>        ( *ally )-&gt;set_dest( post );</div>
<div class="line"><a id="l02424" name="l02424"></a><span class="lineno"> 2424</span>        <span class="keywordflow">if</span>( !( *ally )-&gt;has_effect( <a class="code hl_variable" href="monattack_8cpp.html#aed84cc428d3176b893fe131e4eda45c3">effect_ai_controlled</a> ) ) {</div>
<div class="line"><a id="l02425" name="l02425"></a><span class="lineno"> 2425</span>            ( *ally )-&gt;add_effect( <a class="code hl_variable" href="monattack_8cpp.html#aed84cc428d3176b893fe131e4eda45c3">effect_ai_controlled</a>, 1_turns, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a> );</div>
<div class="line"><a id="l02426" name="l02426"></a><span class="lineno"> 2426</span>        }</div>
<div class="line"><a id="l02427" name="l02427"></a><span class="lineno"> 2427</span>    }</div>
<div class="line"><a id="l02428" name="l02428"></a><span class="lineno"> 2428</span>    <span class="comment">// Did we convert anybody?</span></div>
<div class="line"><a id="l02429" name="l02429"></a><span class="lineno"> 2429</span>    <span class="keywordflow">if</span>( converted ) {</div>
<div class="line"><a id="l02430" name="l02430"></a><span class="lineno"> 2430</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l02431" name="l02431"></a><span class="lineno"> 2431</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s lets out a high-pitched cry!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02432" name="l02432"></a><span class="lineno"> 2432</span>        }</div>
<div class="line"><a id="l02433" name="l02433"></a><span class="lineno"> 2433</span>    }</div>
<div class="line"><a id="l02434" name="l02434"></a><span class="lineno"> 2434</span>    <span class="comment">// This is telepathy, doesn&#39;t take any moves.</span></div>
<div class="line"><a id="l02435" name="l02435"></a><span class="lineno"> 2435</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02436" name="l02436"></a><span class="lineno"> 2436</span>}</div>
<div class="ttc" id="amonattack_8cpp_html_a0781c8bcbb6f6f615b022a1b308a21f7"><div class="ttname"><a href="monattack_8cpp.html#a0781c8bcbb6f6f615b022a1b308a21f7">mon_zombie_dancer</a></div><div class="ttdeci">static const mtype_id mon_zombie_dancer(&quot;mon_zombie_dancer&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a4e2730248c54d4d07fa7e215efb35d1a"><div class="ttname"><a href="monattack_8cpp.html#a4e2730248c54d4d07fa7e215efb35d1a">ZOMBIE</a></div><div class="ttdeci">static const species_id ZOMBIE(&quot;ZOMBIE&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a5cb2b347df12e43876e2f0f44afdf102"><div class="ttname"><a href="monattack_8cpp.html#a5cb2b347df12e43876e2f0f44afdf102">mon_zombie_jackson</a></div><div class="ttdeci">static const mtype_id mon_zombie_jackson(&quot;mon_zombie_jackson&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="coordinates_8h_source.html#l00596">closest_points_first()</a>, <a class="el" href="monattack_8cpp.html#aed84cc428d3176b893fe131e4eda45c3">effect_ai_controlled</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="monattack_8cpp.html#a0781c8bcbb6f6f615b022a1b308a21f7">mon_zombie_dancer</a>, <a class="el" href="monattack_8cpp.html#a5cb2b347df12e43876e2f0f44afdf102">mon_zombie_jackson</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="bodypart_8h_source.html#l00052">num_bp</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, and <a class="el" href="monattack_8cpp.html#a4e2730248c54d4d07fa7e215efb35d1a">ZOMBIE</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="abb3d9ed769522eeacb7a59ef29870f3c" name="abb3d9ed769522eeacb7a59ef29870f3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb3d9ed769522eeacb7a59ef29870f3c">&#9670;&nbsp;</a></span>kamikaze()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::kamikaze </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l05352">5352</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05353" name="l05353"></a><span class="lineno"> 5353</span>{</div>
<div class="line"><a id="l05354" name="l05354"></a><span class="lineno"> 5354</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">ammo</a>.empty() ) {</div>
<div class="line"><a id="l05355" name="l05355"></a><span class="lineno"> 5355</span>        <span class="comment">// We somehow lost our ammo! Toggle this special off so we stop processing</span></div>
<div class="line"><a id="l05356" name="l05356"></a><span class="lineno"> 5356</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;Missing ammo in kamikaze special for %s.&quot;</span>, z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l05357" name="l05357"></a><span class="lineno"> 5357</span>        z-&gt;<a class="code hl_function" href="classmonster.html#a68ac3a1fd2a1ecf8b80470af3d3d0433">disable_special</a>( <span class="stringliteral">&quot;KAMIKAZE&quot;</span> );</div>
<div class="line"><a id="l05358" name="l05358"></a><span class="lineno"> 5358</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05359" name="l05359"></a><span class="lineno"> 5359</span>    }</div>
<div class="line"><a id="l05360" name="l05360"></a><span class="lineno"> 5360</span> </div>
<div class="line"><a id="l05361" name="l05361"></a><span class="lineno"> 5361</span>    <span class="comment">// Get the bomb type and it&#39;s data</span></div>
<div class="line"><a id="l05362" name="l05362"></a><span class="lineno"> 5362</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structitype.html">itype</a> *bomb_type = &amp;*z-&gt;<a class="code hl_variable" href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">ammo</a>.begin()-&gt;first;</div>
<div class="line"><a id="l05363" name="l05363"></a><span class="lineno"> 5363</span>    <a class="code hl_class" href="classstring__id.html">itype_id</a> act_bomb_type;</div>
<div class="line"><a id="l05364" name="l05364"></a><span class="lineno"> 5364</span>    <span class="keywordtype">int</span> charges;</div>
<div class="line"><a id="l05365" name="l05365"></a><span class="lineno"> 5365</span>    <span class="comment">// Hardcoded data for charge variant items</span></div>
<div class="line"><a id="l05366" name="l05366"></a><span class="lineno"> 5366</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">ammo</a>.begin()-&gt;first == <a class="code hl_variable" href="monattack_8cpp.html#a3dd73e8ddad50a259d15e208eaaea05b">itype_mininuke</a> ) {</div>
<div class="line"><a id="l05367" name="l05367"></a><span class="lineno"> 5367</span>        act_bomb_type = <a class="code hl_variable" href="monattack_8cpp.html#af15dda390fbc6ecaba6fa78540d00487">itype_mininuke_act</a>;</div>
<div class="line"><a id="l05368" name="l05368"></a><span class="lineno"> 5368</span>        charges = 20;</div>
<div class="line"><a id="l05369" name="l05369"></a><span class="lineno"> 5369</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">ammo</a>.begin()-&gt;first == <a class="code hl_variable" href="monattack_8cpp.html#a773387153aa321b309ab9fa130289b5b">itype_c4</a> ) {</div>
<div class="line"><a id="l05370" name="l05370"></a><span class="lineno"> 5370</span>        act_bomb_type = <a class="code hl_variable" href="monattack_8cpp.html#a55a9a6f265b455727ff04b5bd5671587">itype_c4armed</a>;</div>
<div class="line"><a id="l05371" name="l05371"></a><span class="lineno"> 5371</span>        charges = 10;</div>
<div class="line"><a id="l05372" name="l05372"></a><span class="lineno"> 5372</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05373" name="l05373"></a><span class="lineno"> 5373</span>        <span class="keyword">auto</span> <a class="code hl_enumeration" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726">usage</a> = bomb_type-&gt;<a class="code hl_function" href="structitype.html#a304367633fdfe6c63a53bdce0caced92">get_use</a>( <span class="stringliteral">&quot;transform&quot;</span> );</div>
<div class="line"><a id="l05374" name="l05374"></a><span class="lineno"> 5374</span>        <span class="keywordflow">if</span>( <a class="code hl_enumeration" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726">usage</a> == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l05375" name="l05375"></a><span class="lineno"> 5375</span>            <span class="comment">// Invalid item usage, Toggle this special off so we stop processing</span></div>
<div class="line"><a id="l05376" name="l05376"></a><span class="lineno"> 5376</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;Invalid bomb transform use in kamikaze special for %s.&quot;</span>, z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l05377" name="l05377"></a><span class="lineno"> 5377</span>            z-&gt;<a class="code hl_function" href="classmonster.html#a68ac3a1fd2a1ecf8b80470af3d3d0433">disable_special</a>( <span class="stringliteral">&quot;KAMIKAZE&quot;</span> );</div>
<div class="line"><a id="l05378" name="l05378"></a><span class="lineno"> 5378</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05379" name="l05379"></a><span class="lineno"> 5379</span>        }</div>
<div class="line"><a id="l05380" name="l05380"></a><span class="lineno"> 5380</span>        <span class="keyword">const</span> <a class="code hl_class" href="classiuse__transform.html">iuse_transform</a> *actor = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code hl_class" href="classiuse__transform.html">iuse_transform</a> *<span class="keyword">&gt;</span>( <a class="code hl_enumeration" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726">usage</a>-&gt;get_actor_ptr() );</div>
<div class="line"><a id="l05381" name="l05381"></a><span class="lineno"> 5381</span>        <span class="keywordflow">if</span>( actor == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l05382" name="l05382"></a><span class="lineno"> 5382</span>            <span class="comment">// Invalid bomb item, Toggle this special off so we stop processing</span></div>
<div class="line"><a id="l05383" name="l05383"></a><span class="lineno"> 5383</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;Invalid bomb type in kamikaze special for %s.&quot;</span>, z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l05384" name="l05384"></a><span class="lineno"> 5384</span>            z-&gt;<a class="code hl_function" href="classmonster.html#a68ac3a1fd2a1ecf8b80470af3d3d0433">disable_special</a>( <span class="stringliteral">&quot;KAMIKAZE&quot;</span> );</div>
<div class="line"><a id="l05385" name="l05385"></a><span class="lineno"> 5385</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05386" name="l05386"></a><span class="lineno"> 5386</span>        }</div>
<div class="line"><a id="l05387" name="l05387"></a><span class="lineno"> 5387</span>        act_bomb_type = actor-&gt;<a class="code hl_variable" href="classiuse__transform.html#a34d5287f0d8ce495cdd4baff1901e5ce">target</a>;</div>
<div class="line"><a id="l05388" name="l05388"></a><span class="lineno"> 5388</span>        charges = actor-&gt;<a class="code hl_variable" href="classiuse__transform.html#a2e48b0898e1f626447cd426b4f511e23">ammo_qty</a>;</div>
<div class="line"><a id="l05389" name="l05389"></a><span class="lineno"> 5389</span>    }</div>
<div class="line"><a id="l05390" name="l05390"></a><span class="lineno"> 5390</span> </div>
<div class="line"><a id="l05391" name="l05391"></a><span class="lineno"> 5391</span>    <span class="comment">// HACK: HORRIBLE HACK ALERT! Remove the following code completely once we have working monster inventory processing</span></div>
<div class="line"><a id="l05392" name="l05392"></a><span class="lineno"> 5392</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a8bbfe91713ddfaa4c647fa68f9734e34">effect_countdown</a> ) ) {</div>
<div class="line"><a id="l05393" name="l05393"></a><span class="lineno"> 5393</span>        <span class="keywordflow">if</span>( z-&gt;<a class="code hl_function" href="classCreature.html#a89f56544cdbf34297b4c0e62f3350817">get_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a8bbfe91713ddfaa4c647fa68f9734e34">effect_countdown</a> ).<a class="code hl_function" href="classeffect.html#a34c766f51dc0f89ebdab09c344bb506b">get_duration</a>() == 1_turns ) {</div>
<div class="line"><a id="l05394" name="l05394"></a><span class="lineno"> 5394</span>            z-&gt;<a class="code hl_function" href="classmonster.html#a82ae41773b05af94d4b678cb33bfb329">die</a>( <span class="keyword">nullptr</span> );</div>
<div class="line"><a id="l05395" name="l05395"></a><span class="lineno"> 5395</span>            <span class="comment">// Timer is out, detonate</span></div>
<div class="line"><a id="l05396" name="l05396"></a><span class="lineno"> 5396</span>            <a class="code hl_class" href="classitem.html">item</a> i_explodes( act_bomb_type, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, 0 );</div>
<div class="line"><a id="l05397" name="l05397"></a><span class="lineno"> 5397</span>            i_explodes.active = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05398" name="l05398"></a><span class="lineno"> 5398</span>            i_explodes.process( <span class="keyword">nullptr</span>, z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), <span class="keyword">false</span> );</div>
<div class="line"><a id="l05399" name="l05399"></a><span class="lineno"> 5399</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05400" name="l05400"></a><span class="lineno"> 5400</span>        }</div>
<div class="line"><a id="l05401" name="l05401"></a><span class="lineno"> 5401</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05402" name="l05402"></a><span class="lineno"> 5402</span>    }</div>
<div class="line"><a id="l05403" name="l05403"></a><span class="lineno"> 5403</span>    <span class="comment">// END HORRIBLE HACK</span></div>
<div class="line"><a id="l05404" name="l05404"></a><span class="lineno"> 5404</span> </div>
<div class="line"><a id="l05405" name="l05405"></a><span class="lineno"> 5405</span>    <span class="keyword">auto</span> <a class="code hl_function" href="namespacegame__menus_1_1inv.html#a233578a2d65d51f06b773ae57531fb3b">use</a> = act_bomb_type-&gt;<a class="code hl_function" href="structitype.html#a304367633fdfe6c63a53bdce0caced92">get_use</a>( <span class="stringliteral">&quot;explosion&quot;</span> );</div>
<div class="line"><a id="l05406" name="l05406"></a><span class="lineno"> 5406</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacegame__menus_1_1inv.html#a233578a2d65d51f06b773ae57531fb3b">use</a> == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l05407" name="l05407"></a><span class="lineno"> 5407</span>        <span class="comment">// Invalid active bomb item usage, Toggle this special off so we stop processing</span></div>
<div class="line"><a id="l05408" name="l05408"></a><span class="lineno"> 5408</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;Invalid active bomb explosion use in kamikaze special for %s.&quot;</span>,</div>
<div class="line"><a id="l05409" name="l05409"></a><span class="lineno"> 5409</span>                 z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l05410" name="l05410"></a><span class="lineno"> 5410</span>        z-&gt;<a class="code hl_function" href="classmonster.html#a68ac3a1fd2a1ecf8b80470af3d3d0433">disable_special</a>( <span class="stringliteral">&quot;KAMIKAZE&quot;</span> );</div>
<div class="line"><a id="l05411" name="l05411"></a><span class="lineno"> 5411</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05412" name="l05412"></a><span class="lineno"> 5412</span>    }</div>
<div class="line"><a id="l05413" name="l05413"></a><span class="lineno"> 5413</span>    <span class="keyword">const</span> <a class="code hl_class" href="classexplosion__iuse.html">explosion_iuse</a> *exp_actor = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code hl_class" href="classexplosion__iuse.html">explosion_iuse</a> *<span class="keyword">&gt;</span>( <a class="code hl_function" href="namespacegame__menus_1_1inv.html#a233578a2d65d51f06b773ae57531fb3b">use</a>-&gt;get_actor_ptr() );</div>
<div class="line"><a id="l05414" name="l05414"></a><span class="lineno"> 5414</span>    <span class="keywordflow">if</span>( exp_actor == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l05415" name="l05415"></a><span class="lineno"> 5415</span>        <span class="comment">// Invalid active bomb item, Toggle this special off so we stop processing</span></div>
<div class="line"><a id="l05416" name="l05416"></a><span class="lineno"> 5416</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;Invalid active bomb type in kamikaze special for %s.&quot;</span>, z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l05417" name="l05417"></a><span class="lineno"> 5417</span>        z-&gt;<a class="code hl_function" href="classmonster.html#a68ac3a1fd2a1ecf8b80470af3d3d0433">disable_special</a>( <span class="stringliteral">&quot;KAMIKAZE&quot;</span> );</div>
<div class="line"><a id="l05418" name="l05418"></a><span class="lineno"> 5418</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05419" name="l05419"></a><span class="lineno"> 5419</span>    }</div>
<div class="line"><a id="l05420" name="l05420"></a><span class="lineno"> 5420</span> </div>
<div class="line"><a id="l05421" name="l05421"></a><span class="lineno"> 5421</span>    <span class="comment">// Get our blast radius</span></div>
<div class="line"><a id="l05422" name="l05422"></a><span class="lineno"> 5422</span>    <span class="keywordtype">int</span> radius = -1;</div>
<div class="line"><a id="l05423" name="l05423"></a><span class="lineno"> 5423</span>    <span class="keywordflow">if</span>( exp_actor-&gt;<a class="code hl_variable" href="classexplosion__iuse.html#a905b0f3e3847d42405947c176914a9ff">fields_radius</a> &gt; radius ) {</div>
<div class="line"><a id="l05424" name="l05424"></a><span class="lineno"> 5424</span>        radius = exp_actor-&gt;<a class="code hl_variable" href="classexplosion__iuse.html#a905b0f3e3847d42405947c176914a9ff">fields_radius</a>;</div>
<div class="line"><a id="l05425" name="l05425"></a><span class="lineno"> 5425</span>    }</div>
<div class="line"><a id="l05426" name="l05426"></a><span class="lineno"> 5426</span>    <span class="keywordflow">if</span>( exp_actor-&gt;<a class="code hl_variable" href="classexplosion__iuse.html#a153b4346eee201f1691ddd3f2c4eb09d">emp_blast_radius</a> &gt; radius ) {</div>
<div class="line"><a id="l05427" name="l05427"></a><span class="lineno"> 5427</span>        radius = exp_actor-&gt;<a class="code hl_variable" href="classexplosion__iuse.html#a153b4346eee201f1691ddd3f2c4eb09d">emp_blast_radius</a>;</div>
<div class="line"><a id="l05428" name="l05428"></a><span class="lineno"> 5428</span>    }</div>
<div class="line"><a id="l05429" name="l05429"></a><span class="lineno"> 5429</span>    <span class="comment">// Extra check here to avoid sqrt if not needed</span></div>
<div class="line"><a id="l05430" name="l05430"></a><span class="lineno"> 5430</span>    <span class="keywordflow">if</span>( exp_actor-&gt;<a class="code hl_variable" href="classexplosion__iuse.html#acd5385d9ee934784e54f651f697ac53b">explosion</a> ) {</div>
<div class="line"><a id="l05431" name="l05431"></a><span class="lineno"> 5431</span>        <span class="keywordtype">int</span> tmp = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( exp_actor-&gt;<a class="code hl_variable" href="classexplosion__iuse.html#acd5385d9ee934784e54f651f697ac53b">explosion</a>.<a class="code hl_function" href="structexplosion__data.html#a467512e7e34c64ddb98ec737368b81cb">safe_range</a>() / 2 );</div>
<div class="line"><a id="l05432" name="l05432"></a><span class="lineno"> 5432</span>        <span class="keywordflow">if</span>( tmp &gt; radius ) {</div>
<div class="line"><a id="l05433" name="l05433"></a><span class="lineno"> 5433</span>            radius = tmp;</div>
<div class="line"><a id="l05434" name="l05434"></a><span class="lineno"> 5434</span>        }</div>
<div class="line"><a id="l05435" name="l05435"></a><span class="lineno"> 5435</span>    }</div>
<div class="line"><a id="l05436" name="l05436"></a><span class="lineno"> 5436</span>    <span class="comment">// Flashbangs have a max range of 8</span></div>
<div class="line"><a id="l05437" name="l05437"></a><span class="lineno"> 5437</span>    <span class="keywordflow">if</span>( exp_actor-&gt;<a class="code hl_variable" href="classexplosion__iuse.html#af3f56d26e534151ed9964ea7c574e06c">do_flashbang</a> &amp;&amp; radius &lt; 8 ) {</div>
<div class="line"><a id="l05438" name="l05438"></a><span class="lineno"> 5438</span>        radius = 8;</div>
<div class="line"><a id="l05439" name="l05439"></a><span class="lineno"> 5439</span>    }</div>
<div class="line"><a id="l05440" name="l05440"></a><span class="lineno"> 5440</span>    <span class="keywordflow">if</span>( radius &lt;= -1 ) {</div>
<div class="line"><a id="l05441" name="l05441"></a><span class="lineno"> 5441</span>        <span class="comment">// Not a valid explosion size, toggle this special off to stop processing</span></div>
<div class="line"><a id="l05442" name="l05442"></a><span class="lineno"> 5442</span>        z-&gt;<a class="code hl_function" href="classmonster.html#a68ac3a1fd2a1ecf8b80470af3d3d0433">disable_special</a>( <span class="stringliteral">&quot;KAMIKAZE&quot;</span> );</div>
<div class="line"><a id="l05443" name="l05443"></a><span class="lineno"> 5443</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05444" name="l05444"></a><span class="lineno"> 5444</span>    }</div>
<div class="line"><a id="l05445" name="l05445"></a><span class="lineno"> 5445</span> </div>
<div class="line"><a id="l05446" name="l05446"></a><span class="lineno"> 5446</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l05447" name="l05447"></a><span class="lineno"> 5447</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l05448" name="l05448"></a><span class="lineno"> 5448</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05449" name="l05449"></a><span class="lineno"> 5449</span>    }</div>
<div class="line"><a id="l05450" name="l05450"></a><span class="lineno"> 5450</span>    <span class="comment">// Range is (radius + distance they expect to gain on you during the countdown)</span></div>
<div class="line"><a id="l05451" name="l05451"></a><span class="lineno"> 5451</span>    <span class="comment">// We double target speed because if the player is walking and then start to run their effective speed doubles</span></div>
<div class="line"><a id="l05452" name="l05452"></a><span class="lineno"> 5452</span>    <span class="comment">// .65 factor was determined experimentally to be about the factor required for players to be able to *just barely*</span></div>
<div class="line"><a id="l05453" name="l05453"></a><span class="lineno"> 5453</span>    <span class="comment">// outrun the explosion if they drop everything and run.</span></div>
<div class="line"><a id="l05454" name="l05454"></a><span class="lineno"> 5454</span>    <span class="keywordtype">float</span> factor = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( z-&gt;<a class="code hl_function" href="classCreature.html#a261dff3caa6aabe255ae9d3eaa94d3de">get_speed</a>() ) / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( target-&gt;<a class="code hl_function" href="classCreature.html#a261dff3caa6aabe255ae9d3eaa94d3de">get_speed</a>() * 2 );</div>
<div class="line"><a id="l05455" name="l05455"></a><span class="lineno"> 5455</span>    <span class="keywordtype">int</span> range = std::max( 1, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( .65 * ( radius + 1 + factor * charges ) ) );</div>
<div class="line"><a id="l05456" name="l05456"></a><span class="lineno"> 5456</span> </div>
<div class="line"><a id="l05457" name="l05457"></a><span class="lineno"> 5457</span>    <span class="comment">// Check if we are in range to begin the countdown</span></div>
<div class="line"><a id="l05458" name="l05458"></a><span class="lineno"> 5458</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="monattack_8cpp.html#a2239aa1914a4ff939b923ada5faf247d">within_target_range</a>( z, target, range ) ) {</div>
<div class="line"><a id="l05459" name="l05459"></a><span class="lineno"> 5459</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05460" name="l05460"></a><span class="lineno"> 5460</span>    }</div>
<div class="line"><a id="l05461" name="l05461"></a><span class="lineno"> 5461</span> </div>
<div class="line"><a id="l05462" name="l05462"></a><span class="lineno"> 5462</span>    <span class="comment">// HACK: HORRIBLE HACK ALERT! Currently uses the amount of ammo as a pseudo-timer.</span></div>
<div class="line"><a id="l05463" name="l05463"></a><span class="lineno"> 5463</span>    <span class="comment">// Once we have proper monster inventory item processing replace the following</span></div>
<div class="line"><a id="l05464" name="l05464"></a><span class="lineno"> 5464</span>    <span class="comment">// line with the code below.</span></div>
<div class="line"><a id="l05465" name="l05465"></a><span class="lineno"> 5465</span>    z-&gt;<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a8bbfe91713ddfaa4c647fa68f9734e34">effect_countdown</a>, 1_turns * charges + 1_turns );</div>
<div class="line"><a id="l05466" name="l05466"></a><span class="lineno"> 5466</span>    <span class="comment">/* Replacement code here for once we have working monster inventories</span></div>
<div class="line"><a id="l05467" name="l05467"></a><span class="lineno"> 5467</span><span class="comment"></span> </div>
<div class="line"><a id="l05468" name="l05468"></a><span class="lineno"> 5468</span><span class="comment">    item i_explodes(act_bomb_type-&gt;id, 0);</span></div>
<div class="line"><a id="l05469" name="l05469"></a><span class="lineno"> 5469</span><span class="comment">    i_explodes.charges = charges;</span></div>
<div class="line"><a id="l05470" name="l05470"></a><span class="lineno"> 5470</span><span class="comment">    z-&gt;add_item(i_explodes);</span></div>
<div class="line"><a id="l05471" name="l05471"></a><span class="lineno"> 5471</span><span class="comment">    z-&gt;disable_special(&quot;KAMIKAZE&quot;);</span></div>
<div class="line"><a id="l05472" name="l05472"></a><span class="lineno"> 5472</span><span class="comment">    */</span></div>
<div class="line"><a id="l05473" name="l05473"></a><span class="lineno"> 5473</span>    <span class="comment">// END HORRIBLE HACK</span></div>
<div class="line"><a id="l05474" name="l05474"></a><span class="lineno"> 5474</span> </div>
<div class="line"><a id="l05475" name="l05475"></a><span class="lineno"> 5475</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>() ) ) {</div>
<div class="line"><a id="l05476" name="l05476"></a><span class="lineno"> 5476</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s lights up menacingly.&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l05477" name="l05477"></a><span class="lineno"> 5477</span>    }</div>
<div class="line"><a id="l05478" name="l05478"></a><span class="lineno"> 5478</span> </div>
<div class="line"><a id="l05479" name="l05479"></a><span class="lineno"> 5479</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05480" name="l05480"></a><span class="lineno"> 5480</span>}</div>
<div class="ttc" id="aclassCreature_html_a261dff3caa6aabe255ae9d3eaa94d3de"><div class="ttname"><a href="classCreature.html#a261dff3caa6aabe255ae9d3eaa94d3de">Creature::get_speed</a></div><div class="ttdeci">virtual int get_speed() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01498">creature.cpp:1498</a></div></div>
<div class="ttc" id="aclassCreature_html_a89f56544cdbf34297b4c0e62f3350817"><div class="ttname"><a href="classCreature.html#a89f56544cdbf34297b4c0e62f3350817">Creature::get_effect</a></div><div class="ttdeci">const effect &amp; get_effect(const efftype_id &amp;eff_id, body_part bp=num_bp) const</div><div class="ttdoc">Return the effect that matches the given arguments exactly.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01213">creature.cpp:1213</a></div></div>
<div class="ttc" id="aclasseffect_html_a34c766f51dc0f89ebdab09c344bb506b"><div class="ttname"><a href="classeffect.html#a34c766f51dc0f89ebdab09c344bb506b">effect::get_duration</a></div><div class="ttdeci">time_duration get_duration() const</div><div class="ttdoc">Returns the remaining duration of an effect.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l00797">effect.cpp:797</a></div></div>
<div class="ttc" id="aclassexplosion__iuse_html"><div class="ttname"><a href="classexplosion__iuse.html">explosion_iuse</a></div><div class="ttdoc">This is a iuse_actor for active items that explode when their charges reaches 0.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00168">iuse_actor.h:169</a></div></div>
<div class="ttc" id="aclassexplosion__iuse_html_a153b4346eee201f1691ddd3f2c4eb09d"><div class="ttname"><a href="classexplosion__iuse.html#a153b4346eee201f1691ddd3f2c4eb09d">explosion_iuse::emp_blast_radius</a></div><div class="ttdeci">int emp_blast_radius</div><div class="ttdoc">Calls game::emp_blast if &gt;= 0.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00188">iuse_actor.h:188</a></div></div>
<div class="ttc" id="aclassexplosion__iuse_html_a905b0f3e3847d42405947c176914a9ff"><div class="ttname"><a href="classexplosion__iuse.html#a905b0f3e3847d42405947c176914a9ff">explosion_iuse::fields_radius</a></div><div class="ttdeci">int fields_radius</div><div class="ttdoc">Create fields of this type around the center of the explosion.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00183">iuse_actor.h:183</a></div></div>
<div class="ttc" id="aclassexplosion__iuse_html_acd5385d9ee934784e54f651f697ac53b"><div class="ttname"><a href="classexplosion__iuse.html#acd5385d9ee934784e54f651f697ac53b">explosion_iuse::explosion</a></div><div class="ttdeci">explosion_data explosion</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00173">iuse_actor.h:173</a></div></div>
<div class="ttc" id="aclassexplosion__iuse_html_af3f56d26e534151ed9964ea7c574e06c"><div class="ttname"><a href="classexplosion__iuse.html#af3f56d26e534151ed9964ea7c574e06c">explosion_iuse::do_flashbang</a></div><div class="ttdeci">bool do_flashbang</div><div class="ttdoc">Call game::flashbang?</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00180">iuse_actor.h:180</a></div></div>
<div class="ttc" id="aclassiuse__transform_html"><div class="ttname"><a href="classiuse__transform.html">iuse_transform</a></div><div class="ttdoc">Transform an item into a specific type.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00051">iuse_actor.h:52</a></div></div>
<div class="ttc" id="aclassiuse__transform_html_a2e48b0898e1f626447cd426b4f511e23"><div class="ttname"><a href="classiuse__transform.html#a2e48b0898e1f626447cd426b4f511e23">iuse_transform::ammo_qty</a></div><div class="ttdeci">int ammo_qty</div><div class="ttdoc">if zero or positive set remaining ammo of target to this (after transformation)</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00064">iuse_actor.h:64</a></div></div>
<div class="ttc" id="aclassiuse__transform_html_a34d5287f0d8ce495cdd4baff1901e5ce"><div class="ttname"><a href="classiuse__transform.html#a34d5287f0d8ce495cdd4baff1901e5ce">iuse_transform::target</a></div><div class="ttdeci">itype_id target</div><div class="ttdoc">type of the resulting item</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00058">iuse_actor.h:58</a></div></div>
<div class="ttc" id="aclassmonster_html_a82ae41773b05af94d4b678cb33bfb329"><div class="ttname"><a href="classmonster.html#a82ae41773b05af94d4b678cb33bfb329">monster::die</a></div><div class="ttdeci">void die(Creature *killer) override</div><div class="ttdoc">Empty function.</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l02243">monster.cpp:2243</a></div></div>
<div class="ttc" id="acraft__command_8h_html_a5684f219761d78b4f98e7b2869dd1726"><div class="ttname"><a href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726">usage</a></div><div class="ttdeci">usage</div><div class="ttdoc">enum used by comp_selection to indicate where a component should be consumed from.</div><div class="ttdef"><b>Definition:</b> <a href="craft__command_8h_source.html#l00023">craft_command.h:23</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a2239aa1914a4ff939b923ada5faf247d"><div class="ttname"><a href="monattack_8cpp.html#a2239aa1914a4ff939b923ada5faf247d">within_target_range</a></div><div class="ttdeci">static bool within_target_range(const monster *const z, const Creature *const target, int range)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l00214">monattack.cpp:214</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a3dd73e8ddad50a259d15e208eaaea05b"><div class="ttname"><a href="monattack_8cpp.html#a3dd73e8ddad50a259d15e208eaaea05b">itype_mininuke</a></div><div class="ttdeci">static const itype_id itype_mininuke(&quot;mininuke&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a55a9a6f265b455727ff04b5bd5671587"><div class="ttname"><a href="monattack_8cpp.html#a55a9a6f265b455727ff04b5bd5671587">itype_c4armed</a></div><div class="ttdeci">static const itype_id itype_c4armed(&quot;c4armed&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a773387153aa321b309ab9fa130289b5b"><div class="ttname"><a href="monattack_8cpp.html#a773387153aa321b309ab9fa130289b5b">itype_c4</a></div><div class="ttdeci">static const itype_id itype_c4(&quot;c4&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a8bbfe91713ddfaa4c647fa68f9734e34"><div class="ttname"><a href="monattack_8cpp.html#a8bbfe91713ddfaa4c647fa68f9734e34">effect_countdown</a></div><div class="ttdeci">static const efftype_id effect_countdown(&quot;countdown&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_af15dda390fbc6ecaba6fa78540d00487"><div class="ttname"><a href="monattack_8cpp.html#af15dda390fbc6ecaba6fa78540d00487">itype_mininuke_act</a></div><div class="ttdeci">static const itype_id itype_mininuke_act(&quot;mininuke_act&quot;)</div></div>
<div class="ttc" id="anamespacegame__menus_1_1inv_html_a233578a2d65d51f06b773ae57531fb3b"><div class="ttname"><a href="namespacegame__menus_1_1inv.html#a233578a2d65d51f06b773ae57531fb3b">game_menus::inv::use</a></div><div class="ttdeci">item_location use(avatar &amp;you)</div><div class="ttdoc">Item activation menu.</div><div class="ttdef"><b>Definition:</b> <a href="game__inventory_8cpp_source.html#l00888">game_inventory.cpp:888</a></div></div>
<div class="ttc" id="astructexplosion__data_html_a467512e7e34c64ddb98ec737368b81cb"><div class="ttname"><a href="structexplosion__data.html#a467512e7e34c64ddb98ec737368b81cb">explosion_data::safe_range</a></div><div class="ttdeci">int safe_range() const</div><div class="ttdoc">Returns the range at which blast damage is 0 and shrapnel is out of range.</div><div class="ttdef"><b>Definition:</b> <a href="explosion_8cpp_source.html#l01209">explosion.cpp:1209</a></div></div>
<div class="ttc" id="astructitype_html"><div class="ttname"><a href="structitype.html">itype</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00836">itype.h:836</a></div></div>
<div class="ttc" id="astructitype_html_a304367633fdfe6c63a53bdce0caced92"><div class="ttname"><a href="structitype.html#a304367633fdfe6c63a53bdce0caced92">itype::get_use</a></div><div class="ttdeci">const use_function * get_use(const std::string &amp;iuse_name) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00091">itype.cpp:91</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="item_8h_source.html#l02233">item::active</a>, <a class="el" href="monster_8cpp_source.html#l01807">monster::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="monster_8h_source.html#l00512">monster::ammo</a>, <a class="el" href="iuse__actor_8h_source.html#l00064">iuse_transform::ammo_qty</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="monster_8cpp_source.html#l02243">monster::die()</a>, <a class="el" href="monster_8cpp_source.html#l02072">monster::disable_special()</a>, <a class="el" href="iuse__actor_8h_source.html#l00180">explosion_iuse::do_flashbang</a>, <a class="el" href="monattack_8cpp.html#a8bbfe91713ddfaa4c647fa68f9734e34">effect_countdown</a>, <a class="el" href="iuse__actor_8h_source.html#l00188">explosion_iuse::emp_blast_radius</a>, <a class="el" href="iuse__actor_8h_source.html#l00173">explosion_iuse::explosion</a>, <a class="el" href="iuse__actor_8h_source.html#l00183">explosion_iuse::fields_radius</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="effect_8cpp_source.html#l00797">effect::get_duration()</a>, <a class="el" href="creature_8cpp_source.html#l01213">Creature::get_effect()</a>, <a class="el" href="creature_8cpp_source.html#l01498">Creature::get_speed()</a>, <a class="el" href="itype_8cpp_source.html#l00091">itype::get_use()</a>, <a class="el" href="creature_8cpp_source.html#l01173">Creature::has_effect()</a>, <a class="el" href="monattack_8cpp.html#a773387153aa321b309ab9fa130289b5b">itype_c4</a>, <a class="el" href="monattack_8cpp.html#a55a9a6f265b455727ff04b5bd5671587">itype_c4armed</a>, <a class="el" href="monattack_8cpp.html#a3dd73e8ddad50a259d15e208eaaea05b">itype_mininuke</a>, <a class="el" href="monattack_8cpp.html#af15dda390fbc6ecaba6fa78540d00487">itype_mininuke_act</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00264">m_debug</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="item_8cpp_source.html#l09426">item::process()</a>, <a class="el" href="explosion_8cpp_source.html#l01209">explosion_data::safe_range()</a>, <a class="el" href="iuse__actor_8h_source.html#l00058">iuse_transform::target</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, <a class="el" href="game__inventory_8cpp_source.html#l00888">game_menus::inv::use()</a>, and <a class="el" href="monattack_8cpp_source.html#l00214">within_target_range()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a53e82f6aeaef748f9378754a9ff8803b" name="a53e82f6aeaef748f9378754a9ff8803b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53e82f6aeaef748f9378754a9ff8803b">&#9670;&nbsp;</a></span>leech_spawner()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::leech_spawner </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l04900">4900</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04901" name="l04901"></a><span class="lineno"> 4901</span>{</div>
<div class="line"><a id="l04902" name="l04902"></a><span class="lineno"> 4902</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> u_see = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z );</div>
<div class="line"><a id="l04903" name="l04903"></a><span class="lineno"> 4903</span>    std::list&lt;monster *&gt; allies;</div>
<div class="line"><a id="l04904" name="l04904"></a><span class="lineno"> 4904</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classmonster.html">monster</a> &amp;candidate : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;all_monsters() ) {</div>
<div class="line"><a id="l04905" name="l04905"></a><span class="lineno"> 4905</span>        <span class="keywordflow">if</span>( candidate.in_species( <a class="code hl_variable" href="monattack_8cpp.html#a8096ac4f98749770688cf8fd2b7de265">LEECH_PLANT</a> ) &amp;&amp; !candidate.has_flag( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842ab8381921cabe58625339ccac27dc3cd9">MF_IMMOBILE</a> ) ) {</div>
<div class="line"><a id="l04906" name="l04906"></a><span class="lineno"> 4906</span>            allies.push_back( &amp;candidate );</div>
<div class="line"><a id="l04907" name="l04907"></a><span class="lineno"> 4907</span>        }</div>
<div class="line"><a id="l04908" name="l04908"></a><span class="lineno"> 4908</span>    }</div>
<div class="line"><a id="l04909" name="l04909"></a><span class="lineno"> 4909</span>    <span class="keywordflow">if</span>( allies.size() &gt; 45 ) {</div>
<div class="line"><a id="l04910" name="l04910"></a><span class="lineno"> 4910</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04911" name="l04911"></a><span class="lineno"> 4911</span>    }</div>
<div class="line"><a id="l04912" name="l04912"></a><span class="lineno"> 4912</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> monsters_spawned = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 4 );</div>
<div class="line"><a id="l04913" name="l04913"></a><span class="lineno"> 4913</span>    <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">mtype_id</a> monster_type = <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ? <a class="code hl_variable" href="monattack_8cpp.html#ade10fe42b3e13e92c0bb9f8f9fa1c4d9">mon_leech_root_runner</a> : <a class="code hl_variable" href="monattack_8cpp.html#a778a0a5ecf75a3a523c02ef999231985">mon_leech_root_drone</a>;</div>
<div class="line"><a id="l04914" name="l04914"></a><span class="lineno"> 4914</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; monsters_spawned; i++ ) {</div>
<div class="line"><a id="l04915" name="l04915"></a><span class="lineno"> 4915</span>        <span class="keywordflow">if</span>( <a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">const</span> new_mon = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_around( monster_type, z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 1 ) ) {</div>
<div class="line"><a id="l04916" name="l04916"></a><span class="lineno"> 4916</span>            <span class="keywordflow">if</span>( u_see ) {</div>
<div class="line"><a id="l04917" name="l04917"></a><span class="lineno"> 4917</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>,</div>
<div class="line"><a id="l04918" name="l04918"></a><span class="lineno"> 4918</span>                         <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;An egg pod ruptures and a %s crawls out from the remains!&quot;</span> ), new_mon-&gt;name() );</div>
<div class="line"><a id="l04919" name="l04919"></a><span class="lineno"> 4919</span>            }</div>
<div class="line"><a id="l04920" name="l04920"></a><span class="lineno"> 4920</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 25 ) ) {</div>
<div class="line"><a id="l04921" name="l04921"></a><span class="lineno"> 4921</span>                z-&gt;<a class="code hl_function" href="classmonster.html#a39d78be1e47deaf970439c3b9504e5d9">poly</a>( <a class="code hl_variable" href="monattack_8cpp.html#acb26b0b14ec40c39a6a997bfdae66d76">mon_leech_stalk</a> );</div>
<div class="line"><a id="l04922" name="l04922"></a><span class="lineno"> 4922</span>                <span class="keywordflow">if</span>( u_see ) {</div>
<div class="line"><a id="l04923" name="l04923"></a><span class="lineno"> 4923</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>,</div>
<div class="line"><a id="l04924" name="l04924"></a><span class="lineno"> 4924</span>                             <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Resplendent fronds emerge from the still intact pods!&quot;</span> ) );</div>
<div class="line"><a id="l04925" name="l04925"></a><span class="lineno"> 4925</span>                }</div>
<div class="line"><a id="l04926" name="l04926"></a><span class="lineno"> 4926</span>            }</div>
<div class="line"><a id="l04927" name="l04927"></a><span class="lineno"> 4927</span>        }</div>
<div class="line"><a id="l04928" name="l04928"></a><span class="lineno"> 4928</span>    }</div>
<div class="line"><a id="l04929" name="l04929"></a><span class="lineno"> 4929</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04930" name="l04930"></a><span class="lineno"> 4930</span>}</div>
<div class="ttc" id="amonattack_8cpp_html_a778a0a5ecf75a3a523c02ef999231985"><div class="ttname"><a href="monattack_8cpp.html#a778a0a5ecf75a3a523c02ef999231985">mon_leech_root_drone</a></div><div class="ttdeci">static const mtype_id mon_leech_root_drone(&quot;mon_leech_root_drone&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a8096ac4f98749770688cf8fd2b7de265"><div class="ttname"><a href="monattack_8cpp.html#a8096ac4f98749770688cf8fd2b7de265">LEECH_PLANT</a></div><div class="ttdeci">static const species_id LEECH_PLANT(&quot;LEECH_PLANT&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_acb26b0b14ec40c39a6a997bfdae66d76"><div class="ttname"><a href="monattack_8cpp.html#acb26b0b14ec40c39a6a997bfdae66d76">mon_leech_stalk</a></div><div class="ttdeci">static const mtype_id mon_leech_stalk(&quot;mon_leech_stalk&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_ade10fe42b3e13e92c0bb9f8f9fa1c4d9"><div class="ttname"><a href="monattack_8cpp.html#ade10fe42b3e13e92c0bb9f8f9fa1c4d9">mon_leech_root_runner</a></div><div class="ttdeci">static const mtype_id mon_leech_root_runner(&quot;mon_leech_root_runner&quot;)</div></div>
<div class="ttc" id="amtype_8h_html_afa4c966d04d2ddb261a7cde725eca842ab8381921cabe58625339ccac27dc3cd9"><div class="ttname"><a href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842ab8381921cabe58625339ccac27dc3cd9">MF_IMMOBILE</a></div><div class="ttdeci">@ MF_IMMOBILE</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00113">mtype.h:113</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="monattack_8cpp.html#a8096ac4f98749770688cf8fd2b7de265">LEECH_PLANT</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="mtype_8h_source.html#l00113">MF_IMMOBILE</a>, <a class="el" href="monattack_8cpp.html#a778a0a5ecf75a3a523c02ef999231985">mon_leech_root_drone</a>, <a class="el" href="monattack_8cpp.html#ade10fe42b3e13e92c0bb9f8f9fa1c4d9">mon_leech_root_runner</a>, <a class="el" href="monattack_8cpp.html#acb26b0b14ec40c39a6a997bfdae66d76">mon_leech_stalk</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="monster_8cpp_source.html#l00260">monster::poly()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, and <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a62e06457ee6c394b981b749bc58ea5f7" name="a62e06457ee6c394b981b749bc58ea5f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62e06457ee6c394b981b749bc58ea5f7">&#9670;&nbsp;</a></span>longswipe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::longswipe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l04332">4332</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04333" name="l04333"></a><span class="lineno"> 4333</span>{</div>
<div class="line"><a id="l04334" name="l04334"></a><span class="lineno"> 4334</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> ) {</div>
<div class="line"><a id="l04335" name="l04335"></a><span class="lineno"> 4335</span>        <span class="comment">// TODO: handle friendly monsters</span></div>
<div class="line"><a id="l04336" name="l04336"></a><span class="lineno"> 4336</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04337" name="l04337"></a><span class="lineno"> 4337</span>    }</div>
<div class="line"><a id="l04338" name="l04338"></a><span class="lineno"> 4338</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l04339" name="l04339"></a><span class="lineno"> 4339</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l04340" name="l04340"></a><span class="lineno"> 4340</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04341" name="l04341"></a><span class="lineno"> 4341</span>    }</div>
<div class="line"><a id="l04342" name="l04342"></a><span class="lineno"> 4342</span>    <span class="comment">// Out of range</span></div>
<div class="line"><a id="l04343" name="l04343"></a><span class="lineno"> 4343</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() ) &gt; 3 || !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l04344" name="l04344"></a><span class="lineno"> 4344</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04345" name="l04345"></a><span class="lineno"> 4345</span>    }</div>
<div class="line"><a id="l04346" name="l04346"></a><span class="lineno"> 4346</span>    <span class="comment">//Is there something impassable blocking the claw?</span></div>
<div class="line"><a id="l04347" name="l04347"></a><span class="lineno"> 4347</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;pnt : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.find_clear_path( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() ) ) {</div>
<div class="line"><a id="l04348" name="l04348"></a><span class="lineno"> 4348</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.impassable( pnt ) ) {</div>
<div class="line"><a id="l04349" name="l04349"></a><span class="lineno"> 4349</span>            <span class="comment">//If we&#39;re here, it&#39;s an nonadjacent attack, which is only attempted 1/5 of the time.</span></div>
<div class="line"><a id="l04350" name="l04350"></a><span class="lineno"> 4350</span>            <span class="keywordflow">if</span>( !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 5 ) ) {</div>
<div class="line"><a id="l04351" name="l04351"></a><span class="lineno"> 4351</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04352" name="l04352"></a><span class="lineno"> 4352</span>            }</div>
<div class="line"><a id="l04353" name="l04353"></a><span class="lineno"> 4353</span>            target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s thrusts a claw at you, but it bounces off the %2$s!&quot;</span> ),</div>
<div class="line"><a id="l04354" name="l04354"></a><span class="lineno"> 4354</span>                                           <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s thrusts a claw at &lt;npcname&gt;, but it bounces off the %2$s!&quot;</span> ),</div>
<div class="line"><a id="l04355" name="l04355"></a><span class="lineno"> 4355</span>                                           z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(), <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.obstacle_name( pnt ) );</div>
<div class="line"><a id="l04356" name="l04356"></a><span class="lineno"> 4356</span>            z-&gt;<a class="code hl_function" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -150 );</div>
<div class="line"><a id="l04357" name="l04357"></a><span class="lineno"> 4357</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04358" name="l04358"></a><span class="lineno"> 4358</span>        }</div>
<div class="line"><a id="l04359" name="l04359"></a><span class="lineno"> 4359</span>    }</div>
<div class="line"><a id="l04360" name="l04360"></a><span class="lineno"> 4360</span> </div>
<div class="line"><a id="l04361" name="l04361"></a><span class="lineno"> 4361</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="monattack_8cpp.html#abf0d71b531a799a8eb3fd58a846064db">is_adjacent</a>( z, target, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l04362" name="l04362"></a><span class="lineno"> 4362</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 5 ) ) {</div>
<div class="line"><a id="l04363" name="l04363"></a><span class="lineno"> 4363</span> </div>
<div class="line"><a id="l04364" name="l04364"></a><span class="lineno"> 4364</span>            z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 150;</div>
<div class="line"><a id="l04365" name="l04365"></a><span class="lineno"> 4365</span> </div>
<div class="line"><a id="l04366" name="l04366"></a><span class="lineno"> 4366</span>            <span class="keywordflow">if</span>( target-&gt;<a class="code hl_function" href="classCreature.html#afd2f1b1e5bafdef20afddbb704b1d5a5">uncanny_dodge</a>() ) {</div>
<div class="line"><a id="l04367" name="l04367"></a><span class="lineno"> 4367</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04368" name="l04368"></a><span class="lineno"> 4368</span>            }</div>
<div class="line"><a id="l04369" name="l04369"></a><span class="lineno"> 4369</span>            <span class="comment">// Can we dodge the attack? Uses player dodge function % chance (melee.cpp)</span></div>
<div class="line"><a id="l04370" name="l04370"></a><span class="lineno"> 4370</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacemattack.html#a4efb8be314551e35f69df8cf8d824174">dodge_check</a>( z, target ) ) {</div>
<div class="line"><a id="l04371" name="l04371"></a><span class="lineno"> 4371</span>                target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s thrusts a claw at you, but you evade it!&quot;</span> ),</div>
<div class="line"><a id="l04372" name="l04372"></a><span class="lineno"> 4372</span>                                               <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s thrusts a claw at &lt;npcname&gt;, but they evade it!&quot;</span> ),</div>
<div class="line"><a id="l04373" name="l04373"></a><span class="lineno"> 4373</span>                                               z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l04374" name="l04374"></a><span class="lineno"> 4374</span>                target-&gt;<a class="code hl_function" href="classCreature.html#af56188882e3300853d18f166738ee37a">on_dodge</a>( z, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> * 2 );</div>
<div class="line"><a id="l04375" name="l04375"></a><span class="lineno"> 4375</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04376" name="l04376"></a><span class="lineno"> 4376</span>            }</div>
<div class="line"><a id="l04377" name="l04377"></a><span class="lineno"> 4377</span>            <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">bodypart_id</a> hit = target-&gt;<a class="code hl_function" href="classCreature.html#a51c96c81ae1ea766b5eead4a265c1492">get_random_body_part</a>();</div>
<div class="line"><a id="l04378" name="l04378"></a><span class="lineno"> 4378</span>            <span class="keywordtype">int</span> dam = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 3, 7 );</div>
<div class="line"><a id="l04379" name="l04379"></a><span class="lineno"> 4379</span>            dam = target-&gt;<a class="code hl_function" href="classCreature.html#a75ad96eb6ce27d3c1df250965b4de7b5">deal_damage</a>( z, hit, <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa8ff698c0509e78ff65c7c7ec899b4f51">DT_CUT</a>, dam ) ).<a class="code hl_function" href="structdealt__damage__instance.html#a86b702070a1c313624abc78ff34eff48">total_damage</a>();</div>
<div class="line"><a id="l04380" name="l04380"></a><span class="lineno"> 4380</span>            <span class="keywordflow">if</span>( dam &gt; 0 ) {</div>
<div class="line"><a id="l04381" name="l04381"></a><span class="lineno"> 4381</span>                <span class="keyword">auto</span> msg_type = target == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ? <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a> : <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>;</div>
<div class="line"><a id="l04382" name="l04382"></a><span class="lineno"> 4382</span>                target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( msg_type,</div>
<div class="line"><a id="l04383" name="l04383"></a><span class="lineno"> 4383</span>                                               <span class="comment">//~ 1$s is bodypart name, 2$d is damage value.</span></div>
<div class="line"><a id="l04384" name="l04384"></a><span class="lineno"> 4384</span>                                               <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s thrusts a claw at your %2$s, slashing it for %3$d damage!&quot;</span> ),</div>
<div class="line"><a id="l04385" name="l04385"></a><span class="lineno"> 4385</span>                                               <span class="comment">//~ 1$s is bodypart name, 2$d is damage value.</span></div>
<div class="line"><a id="l04386" name="l04386"></a><span class="lineno"> 4386</span>                                               <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s thrusts a claw at &lt;npcname&gt;&#39;s %2$s, slashing it for %3$d damage!&quot;</span> ),</div>
<div class="line"><a id="l04387" name="l04387"></a><span class="lineno"> 4387</span>                                               z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(), <a class="code hl_function" href="bodypart_8cpp.html#a6c9ef5f15f73c82d39d205d56a560672">body_part_name</a>( hit-&gt;token ), dam );</div>
<div class="line"><a id="l04388" name="l04388"></a><span class="lineno"> 4388</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04389" name="l04389"></a><span class="lineno"> 4389</span>                target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>(</div>
<div class="line"><a id="l04390" name="l04390"></a><span class="lineno"> 4390</span>                    <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s thrusts a claw at your %2$s, but glances off your armor!&quot;</span> ),</div>
<div class="line"><a id="l04391" name="l04391"></a><span class="lineno"> 4391</span>                    <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s thrusts a claw at &lt;npcname&gt;&#39;s %2$s, but glances off armor!&quot;</span> ),</div>
<div class="line"><a id="l04392" name="l04392"></a><span class="lineno"> 4392</span>                    z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l04393" name="l04393"></a><span class="lineno"> 4393</span>                    <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( hit-&gt;token ) );</div>
<div class="line"><a id="l04394" name="l04394"></a><span class="lineno"> 4394</span>            }</div>
<div class="line"><a id="l04395" name="l04395"></a><span class="lineno"> 4395</span>            target-&gt;<a class="code hl_function" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">on_hit</a>( z, hit,  z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> );</div>
<div class="line"><a id="l04396" name="l04396"></a><span class="lineno"> 4396</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04397" name="l04397"></a><span class="lineno"> 4397</span>        }</div>
<div class="line"><a id="l04398" name="l04398"></a><span class="lineno"> 4398</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04399" name="l04399"></a><span class="lineno"> 4399</span>    }</div>
<div class="line"><a id="l04400" name="l04400"></a><span class="lineno"> 4400</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 100;</div>
<div class="line"><a id="l04401" name="l04401"></a><span class="lineno"> 4401</span> </div>
<div class="line"><a id="l04402" name="l04402"></a><span class="lineno"> 4402</span>    <span class="keywordflow">if</span>( target-&gt;<a class="code hl_function" href="classCreature.html#afd2f1b1e5bafdef20afddbb704b1d5a5">uncanny_dodge</a>() ) {</div>
<div class="line"><a id="l04403" name="l04403"></a><span class="lineno"> 4403</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04404" name="l04404"></a><span class="lineno"> 4404</span>    }</div>
<div class="line"><a id="l04405" name="l04405"></a><span class="lineno"> 4405</span> </div>
<div class="line"><a id="l04406" name="l04406"></a><span class="lineno"> 4406</span>    <span class="comment">// Can we dodge the attack? Uses player dodge function % chance (melee.cpp)</span></div>
<div class="line"><a id="l04407" name="l04407"></a><span class="lineno"> 4407</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacemattack.html#a4efb8be314551e35f69df8cf8d824174">dodge_check</a>( z, target ) ) {</div>
<div class="line"><a id="l04408" name="l04408"></a><span class="lineno"> 4408</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s slashes at your neck!  You duck!&quot;</span> ),</div>
<div class="line"><a id="l04409" name="l04409"></a><span class="lineno"> 4409</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s slashes at &lt;npcname&gt;&#39;s neck!  They duck!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l04410" name="l04410"></a><span class="lineno"> 4410</span>        target-&gt;<a class="code hl_function" href="classCreature.html#af56188882e3300853d18f166738ee37a">on_dodge</a>( z, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> * 2 );</div>
<div class="line"><a id="l04411" name="l04411"></a><span class="lineno"> 4411</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04412" name="l04412"></a><span class="lineno"> 4412</span>    }</div>
<div class="line"><a id="l04413" name="l04413"></a><span class="lineno"> 4413</span> </div>
<div class="line"><a id="l04414" name="l04414"></a><span class="lineno"> 4414</span>    <span class="keywordtype">int</span> dam = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 6, 10 );</div>
<div class="line"><a id="l04415" name="l04415"></a><span class="lineno"> 4415</span>    dam = target-&gt;<a class="code hl_function" href="classCreature.html#a75ad96eb6ce27d3c1df250965b4de7b5">deal_damage</a>( z, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;head&quot;</span> ), <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa8ff698c0509e78ff65c7c7ec899b4f51">DT_CUT</a>,</div>
<div class="line"><a id="l04416" name="l04416"></a><span class="lineno"> 4416</span>                               dam ) ).<a class="code hl_function" href="structdealt__damage__instance.html#a86b702070a1c313624abc78ff34eff48">total_damage</a>();</div>
<div class="line"><a id="l04417" name="l04417"></a><span class="lineno"> 4417</span>    <span class="keywordflow">if</span>( dam &gt; 0 ) {</div>
<div class="line"><a id="l04418" name="l04418"></a><span class="lineno"> 4418</span>        <span class="keyword">auto</span> msg_type = target == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ? <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a> : <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>;</div>
<div class="line"><a id="l04419" name="l04419"></a><span class="lineno"> 4419</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( msg_type,</div>
<div class="line"><a id="l04420" name="l04420"></a><span class="lineno"> 4420</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s slashes at your neck, cutting your throat for %2$d damage!&quot;</span> ),</div>
<div class="line"><a id="l04421" name="l04421"></a><span class="lineno"> 4421</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s slashes at &lt;npcname&gt;&#39;s neck, cutting their throat for %2$d damage!&quot;</span> ),</div>
<div class="line"><a id="l04422" name="l04422"></a><span class="lineno"> 4422</span>                                       z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(), dam );</div>
<div class="line"><a id="l04423" name="l04423"></a><span class="lineno"> 4423</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a>, 10_minutes, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab1635a97e6cc33a051cd378b60e48698">bp_head</a> );</div>
<div class="line"><a id="l04424" name="l04424"></a><span class="lineno"> 4424</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04425" name="l04425"></a><span class="lineno"> 4425</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s slashes at your %2$s, but glances off your armor!&quot;</span> ),</div>
<div class="line"><a id="l04426" name="l04426"></a><span class="lineno"> 4426</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s slashes at &lt;npcname&gt;&#39;s %2$s, but glances off armor!&quot;</span> ),</div>
<div class="line"><a id="l04427" name="l04427"></a><span class="lineno"> 4427</span>                                       z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l04428" name="l04428"></a><span class="lineno"> 4428</span>                                       <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab1635a97e6cc33a051cd378b60e48698">bp_head</a> ) );</div>
<div class="line"><a id="l04429" name="l04429"></a><span class="lineno"> 4429</span>    }</div>
<div class="line"><a id="l04430" name="l04430"></a><span class="lineno"> 4430</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">on_hit</a>( z, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;head&quot;</span> ),  z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> );</div>
<div class="line"><a id="l04431" name="l04431"></a><span class="lineno"> 4431</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a36dcf5a04ddc0cf9fa29c08b7b099158">check_dead_state</a>();</div>
<div class="line"><a id="l04432" name="l04432"></a><span class="lineno"> 4432</span> </div>
<div class="line"><a id="l04433" name="l04433"></a><span class="lineno"> 4433</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04434" name="l04434"></a><span class="lineno"> 4434</span>}</div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ab1635a97e6cc33a051cd378b60e48698"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab1635a97e6cc33a051cd378b60e48698">bp_head</a></div><div class="ttdeci">@ bp_head</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00041">bodypart.h:41</a></div></div>
<div class="ttc" id="aclassCreature_html_a891bc2d0c564449cb462178317819254"><div class="ttname"><a href="classCreature.html#a891bc2d0c564449cb462178317819254">Creature::mod_moves</a></div><div class="ttdeci">void mod_moves(int nmoves)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01402">creature.cpp:1402</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8cpp_source.html#l00974">Creature::add_effect()</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="bodypart_8cpp_source.html#l00317">body_part_name()</a>, <a class="el" href="bodypart_8cpp_source.html#l00329">body_part_name_accusative()</a>, <a class="el" href="bodypart_8h_source.html#l00041">bp_head</a>, <a class="el" href="creature_8cpp_source.html#l01833">Creature::check_dead_state()</a>, <a class="el" href="creature_8cpp_source.html#l00873">Creature::deal_damage()</a>, <a class="el" href="monattack_8cpp_source.html#l05764">dodge_check()</a>, <a class="el" href="damage_8h_source.html#l00025">DT_CUT</a>, <a class="el" href="monattack_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a>, <a class="el" href="monster_8h_source.html#l00471">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8cpp_source.html#l01614">Creature::get_random_body_part()</a>, <a class="el" href="monattack_8cpp_source.html#l00275">is_adjacent()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="mtype_8h_source.html#l00285">mtype::melee_skill</a>, <a class="el" href="creature_8cpp_source.html#l01402">Creature::mod_moves()</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="classCreature.html#af56188882e3300853d18f166738ee37a">Creature::on_dodge()</a>, <a class="el" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">Creature::on_hit()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, <a class="el" href="damage_8cpp_source.html#l00180">dealt_damage_instance::total_damage()</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, and <a class="el" href="creature_8h_source.html#l00485">Creature::uncanny_dodge()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a55bb4dfcc05769af381e14b472432e55" name="a55bb4dfcc05769af381e14b472432e55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55bb4dfcc05769af381e14b472432e55">&#9670;&nbsp;</a></span>lunge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::lunge </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l04257">4257</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04258" name="l04258"></a><span class="lineno"> 4258</span>{</div>
<div class="line"><a id="l04259" name="l04259"></a><span class="lineno"> 4259</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classmonster.html#a0f83a7ee7bd8d96efc80200c5a5caf5b">can_act</a>() ) {</div>
<div class="line"><a id="l04260" name="l04260"></a><span class="lineno"> 4260</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04261" name="l04261"></a><span class="lineno"> 4261</span>    }</div>
<div class="line"><a id="l04262" name="l04262"></a><span class="lineno"> 4262</span> </div>
<div class="line"><a id="l04263" name="l04263"></a><span class="lineno"> 4263</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l04264" name="l04264"></a><span class="lineno"> 4264</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l04265" name="l04265"></a><span class="lineno"> 4265</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04266" name="l04266"></a><span class="lineno"> 4266</span>    }</div>
<div class="line"><a id="l04267" name="l04267"></a><span class="lineno"> 4267</span> </div>
<div class="line"><a id="l04268" name="l04268"></a><span class="lineno"> 4268</span>    <span class="keywordtype">int</span> dist = <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() );</div>
<div class="line"><a id="l04269" name="l04269"></a><span class="lineno"> 4269</span>    <span class="keywordflow">if</span>( dist &gt; 20 ||</div>
<div class="line"><a id="l04270" name="l04270"></a><span class="lineno"> 4270</span>        !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l04271" name="l04271"></a><span class="lineno"> 4271</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04272" name="l04272"></a><span class="lineno"> 4272</span>    }</div>
<div class="line"><a id="l04273" name="l04273"></a><span class="lineno"> 4273</span> </div>
<div class="line"><a id="l04274" name="l04274"></a><span class="lineno"> 4274</span>    <span class="keywordtype">bool</span> seen = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z );</div>
<div class="line"><a id="l04275" name="l04275"></a><span class="lineno"> 4275</span>    <span class="keywordflow">if</span>( dist &gt; 1 ) {</div>
<div class="line"><a id="l04276" name="l04276"></a><span class="lineno"> 4276</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 5 ) ) {</div>
<div class="line"><a id="l04277" name="l04277"></a><span class="lineno"> 4277</span>            <span class="comment">// Out of range</span></div>
<div class="line"><a id="l04278" name="l04278"></a><span class="lineno"> 4278</span>            <span class="keywordflow">if</span>( dist &gt; 4 || !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l04279" name="l04279"></a><span class="lineno"> 4279</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04280" name="l04280"></a><span class="lineno"> 4280</span>            }</div>
<div class="line"><a id="l04281" name="l04281"></a><span class="lineno"> 4281</span>            z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> += 200;</div>
<div class="line"><a id="l04282" name="l04282"></a><span class="lineno"> 4282</span>            <span class="keywordflow">if</span>( seen ) {</div>
<div class="line"><a id="l04283" name="l04283"></a><span class="lineno"> 4283</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s lunges for %2$s!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">disp_name</a>() );</div>
<div class="line"><a id="l04284" name="l04284"></a><span class="lineno"> 4284</span>            }</div>
<div class="line"><a id="l04285" name="l04285"></a><span class="lineno"> 4285</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04286" name="l04286"></a><span class="lineno"> 4286</span>        }</div>
<div class="line"><a id="l04287" name="l04287"></a><span class="lineno"> 4287</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04288" name="l04288"></a><span class="lineno"> 4288</span>    }</div>
<div class="line"><a id="l04289" name="l04289"></a><span class="lineno"> 4289</span> </div>
<div class="line"><a id="l04290" name="l04290"></a><span class="lineno"> 4290</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="monattack_8cpp.html#abf0d71b531a799a8eb3fd58a846064db">is_adjacent</a>( z, target, <span class="keyword">false</span> ) ) {</div>
<div class="line"><a id="l04291" name="l04291"></a><span class="lineno"> 4291</span>        <span class="comment">// No attacking up or down - lunging requires contact</span></div>
<div class="line"><a id="l04292" name="l04292"></a><span class="lineno"> 4292</span>        <span class="comment">// There could be a lunge down attack, though</span></div>
<div class="line"><a id="l04293" name="l04293"></a><span class="lineno"> 4293</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04294" name="l04294"></a><span class="lineno"> 4294</span>    }</div>
<div class="line"><a id="l04295" name="l04295"></a><span class="lineno"> 4295</span> </div>
<div class="line"><a id="l04296" name="l04296"></a><span class="lineno"> 4296</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 100;</div>
<div class="line"><a id="l04297" name="l04297"></a><span class="lineno"> 4297</span> </div>
<div class="line"><a id="l04298" name="l04298"></a><span class="lineno"> 4298</span>    <span class="keywordflow">if</span>( target-&gt;<a class="code hl_function" href="classCreature.html#afd2f1b1e5bafdef20afddbb704b1d5a5">uncanny_dodge</a>() ) {</div>
<div class="line"><a id="l04299" name="l04299"></a><span class="lineno"> 4299</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04300" name="l04300"></a><span class="lineno"> 4300</span>    }</div>
<div class="line"><a id="l04301" name="l04301"></a><span class="lineno"> 4301</span> </div>
<div class="line"><a id="l04302" name="l04302"></a><span class="lineno"> 4302</span>    <span class="comment">// Can we dodge the attack? Uses player dodge function % chance (melee.cpp)</span></div>
<div class="line"><a id="l04303" name="l04303"></a><span class="lineno"> 4303</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacemattack.html#a4efb8be314551e35f69df8cf8d824174">dodge_check</a>( z, target ) ) {</div>
<div class="line"><a id="l04304" name="l04304"></a><span class="lineno"> 4304</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s lunges at you, but you sidestep it!&quot;</span> ),</div>
<div class="line"><a id="l04305" name="l04305"></a><span class="lineno"> 4305</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s lunges at &lt;npcname&gt;, but they sidestep it!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l04306" name="l04306"></a><span class="lineno"> 4306</span>        target-&gt;<a class="code hl_function" href="classCreature.html#af56188882e3300853d18f166738ee37a">on_dodge</a>( z, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> * 2 );</div>
<div class="line"><a id="l04307" name="l04307"></a><span class="lineno"> 4307</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04308" name="l04308"></a><span class="lineno"> 4308</span>    }</div>
<div class="line"><a id="l04309" name="l04309"></a><span class="lineno"> 4309</span>    <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">bodypart_id</a> hit = target-&gt;<a class="code hl_function" href="classCreature.html#a51c96c81ae1ea766b5eead4a265c1492">get_random_body_part</a>();</div>
<div class="line"><a id="l04310" name="l04310"></a><span class="lineno"> 4310</span>    <span class="keywordtype">int</span> dam = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 3, 7 );</div>
<div class="line"><a id="l04311" name="l04311"></a><span class="lineno"> 4311</span>    dam = target-&gt;<a class="code hl_function" href="classCreature.html#a75ad96eb6ce27d3c1df250965b4de7b5">deal_damage</a>( z, hit, <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa5f8b46c6c239266403858fa2ae90ef23">DT_BASH</a>, dam ) ).<a class="code hl_function" href="structdealt__damage__instance.html#a86b702070a1c313624abc78ff34eff48">total_damage</a>();</div>
<div class="line"><a id="l04312" name="l04312"></a><span class="lineno"> 4312</span>    <span class="keywordflow">if</span>( dam &gt; 0 ) {</div>
<div class="line"><a id="l04313" name="l04313"></a><span class="lineno"> 4313</span>        <span class="keyword">auto</span> msg_type = target == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ? <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a> : <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>;</div>
<div class="line"><a id="l04314" name="l04314"></a><span class="lineno"> 4314</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( msg_type,</div>
<div class="line"><a id="l04315" name="l04315"></a><span class="lineno"> 4315</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s lunges at your %2$s, battering it for %3$d damage!&quot;</span> ),</div>
<div class="line"><a id="l04316" name="l04316"></a><span class="lineno"> 4316</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s lunges at &lt;npcname&gt;&#39;s %2$s, battering it for %3$d damage!&quot;</span> ),</div>
<div class="line"><a id="l04317" name="l04317"></a><span class="lineno"> 4317</span>                                       z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(), <a class="code hl_function" href="bodypart_8cpp.html#a6c9ef5f15f73c82d39d205d56a560672">body_part_name</a>( hit-&gt;token ), dam );</div>
<div class="line"><a id="l04318" name="l04318"></a><span class="lineno"> 4318</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04319" name="l04319"></a><span class="lineno"> 4319</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s lunges at your %2$s, but your armor prevents injury!&quot;</span> ),</div>
<div class="line"><a id="l04320" name="l04320"></a><span class="lineno"> 4320</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s lunges at &lt;npcname&gt;&#39;s %2$s, but their armor prevents injury!&quot;</span> ),</div>
<div class="line"><a id="l04321" name="l04321"></a><span class="lineno"> 4321</span>                                       z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l04322" name="l04322"></a><span class="lineno"> 4322</span>                                       <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( hit-&gt;token ) );</div>
<div class="line"><a id="l04323" name="l04323"></a><span class="lineno"> 4323</span>    }</div>
<div class="line"><a id="l04324" name="l04324"></a><span class="lineno"> 4324</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 6 ) ) {</div>
<div class="line"><a id="l04325" name="l04325"></a><span class="lineno"> 4325</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a>, 3_turns );</div>
<div class="line"><a id="l04326" name="l04326"></a><span class="lineno"> 4326</span>    }</div>
<div class="line"><a id="l04327" name="l04327"></a><span class="lineno"> 4327</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">on_hit</a>( z, hit,  z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> );</div>
<div class="line"><a id="l04328" name="l04328"></a><span class="lineno"> 4328</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a36dcf5a04ddc0cf9fa29c08b7b099158">check_dead_state</a>();</div>
<div class="line"><a id="l04329" name="l04329"></a><span class="lineno"> 4329</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04330" name="l04330"></a><span class="lineno"> 4330</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8cpp_source.html#l00974">Creature::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="bodypart_8cpp_source.html#l00317">body_part_name()</a>, <a class="el" href="bodypart_8cpp_source.html#l00329">body_part_name_accusative()</a>, <a class="el" href="monster_8cpp_source.html#l00931">monster::can_act()</a>, <a class="el" href="creature_8cpp_source.html#l01833">Creature::check_dead_state()</a>, <a class="el" href="creature_8cpp_source.html#l00873">Creature::deal_damage()</a>, <a class="el" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">Creature::disp_name()</a>, <a class="el" href="monattack_8cpp_source.html#l05764">dodge_check()</a>, <a class="el" href="damage_8h_source.html#l00024">DT_BASH</a>, <a class="el" href="monattack_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8cpp_source.html#l01614">Creature::get_random_body_part()</a>, <a class="el" href="monattack_8cpp_source.html#l00275">is_adjacent()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="mtype_8h_source.html#l00285">mtype::melee_skill</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="classCreature.html#af56188882e3300853d18f166738ee37a">Creature::on_dodge()</a>, <a class="el" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">Creature::on_hit()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, <a class="el" href="damage_8cpp_source.html#l00180">dealt_damage_instance::total_damage()</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, and <a class="el" href="creature_8h_source.html#l00485">Creature::uncanny_dodge()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a65739d5a70d035190c2891c9591fee54" name="a65739d5a70d035190c2891c9591fee54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65739d5a70d035190c2891c9591fee54">&#9670;&nbsp;</a></span>mon_leech_evolution()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::mon_leech_evolution </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l04932">4932</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04933" name="l04933"></a><span class="lineno"> 4933</span>{</div>
<div class="line"><a id="l04934" name="l04934"></a><span class="lineno"> 4934</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> u_see = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z );</div>
<div class="line"><a id="l04935" name="l04935"></a><span class="lineno"> 4935</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> is_queen = z-&gt;<a class="code hl_function" href="classmonster.html#a0315651e596e69f0626b30e081726596">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a38327b1e6178aa474714c9ae4e842834">MF_QUEEN</a> );</div>
<div class="line"><a id="l04936" name="l04936"></a><span class="lineno"> 4936</span>    std::list&lt;monster *&gt; queens;</div>
<div class="line"><a id="l04937" name="l04937"></a><span class="lineno"> 4937</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classmonster.html">monster</a> &amp;candidate : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;all_monsters() ) {</div>
<div class="line"><a id="l04938" name="l04938"></a><span class="lineno"> 4938</span>        <span class="keywordflow">if</span>( candidate.in_species( <a class="code hl_variable" href="monattack_8cpp.html#a8096ac4f98749770688cf8fd2b7de265">LEECH_PLANT</a> ) &amp;&amp; candidate.has_flag( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a38327b1e6178aa474714c9ae4e842834">MF_QUEEN</a> ) &amp;&amp;</div>
<div class="line"><a id="l04939" name="l04939"></a><span class="lineno"> 4939</span>            <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), candidate.pos() ) &lt; 35 ) {</div>
<div class="line"><a id="l04940" name="l04940"></a><span class="lineno"> 4940</span>            queens.push_back( &amp;candidate );</div>
<div class="line"><a id="l04941" name="l04941"></a><span class="lineno"> 4941</span>        }</div>
<div class="line"><a id="l04942" name="l04942"></a><span class="lineno"> 4942</span>    }</div>
<div class="line"><a id="l04943" name="l04943"></a><span class="lineno"> 4943</span>    <span class="keywordflow">if</span>( !is_queen ) {</div>
<div class="line"><a id="l04944" name="l04944"></a><span class="lineno"> 4944</span>        <span class="keywordflow">if</span>( queens.empty() ) {</div>
<div class="line"><a id="l04945" name="l04945"></a><span class="lineno"> 4945</span>            z-&gt;<a class="code hl_function" href="classmonster.html#a39d78be1e47deaf970439c3b9504e5d9">poly</a>( <a class="code hl_variable" href="monattack_8cpp.html#a11c5687a344059674cae63df42e9f4f6">mon_leech_blossom</a> );</div>
<div class="line"><a id="l04946" name="l04946"></a><span class="lineno"> 4946</span>            z-&gt;<a class="code hl_function" href="classmonster.html#a98c421c82c34706735f13afe25ea7f1f">set_hp</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a551f4a380282f8ec082c74f410c397de">get_hp_max</a>() );</div>
<div class="line"><a id="l04947" name="l04947"></a><span class="lineno"> 4947</span>            <span class="keywordflow">if</span>( u_see ) {</div>
<div class="line"><a id="l04948" name="l04948"></a><span class="lineno"> 4948</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>,</div>
<div class="line"><a id="l04949" name="l04949"></a><span class="lineno"> 4949</span>                         <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s blooms into flowers!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l04950" name="l04950"></a><span class="lineno"> 4950</span>            }</div>
<div class="line"><a id="l04951" name="l04951"></a><span class="lineno"> 4951</span>        }</div>
<div class="line"><a id="l04952" name="l04952"></a><span class="lineno"> 4952</span>    }</div>
<div class="line"><a id="l04953" name="l04953"></a><span class="lineno"> 4953</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04954" name="l04954"></a><span class="lineno"> 4954</span>}</div>
<div class="ttc" id="aclassmonster_html_a0315651e596e69f0626b30e081726596"><div class="ttname"><a href="classmonster.html#a0315651e596e69f0626b30e081726596">monster::has_flag</a></div><div class="ttdeci">bool has_flag(m_flag f) const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00869">monster.cpp:869</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a11c5687a344059674cae63df42e9f4f6"><div class="ttname"><a href="monattack_8cpp.html#a11c5687a344059674cae63df42e9f4f6">mon_leech_blossom</a></div><div class="ttdeci">static const mtype_id mon_leech_blossom(&quot;mon_leech_blossom&quot;)</div></div>
<div class="ttc" id="amtype_8h_html_afa4c966d04d2ddb261a7cde725eca842a38327b1e6178aa474714c9ae4e842834"><div class="ttname"><a href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a38327b1e6178aa474714c9ae4e842834">MF_QUEEN</a></div><div class="ttdeci">@ MF_QUEEN</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00104">mtype.h:104</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="monster_8cpp_source.html#l02884">monster::get_hp_max()</a>, <a class="el" href="monster_8cpp_source.html#l00869">monster::has_flag()</a>, <a class="el" href="monattack_8cpp.html#a8096ac4f98749770688cf8fd2b7de265">LEECH_PLANT</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="mtype_8h_source.html#l00104">MF_QUEEN</a>, <a class="el" href="monattack_8cpp.html#a11c5687a344059674cae63df42e9f4f6">mon_leech_blossom</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="monster_8cpp_source.html#l00260">monster::poly()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, and <a class="el" href="monster_8cpp_source.html#l01631">monster::set_hp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="aad12ac03a658f88f0e1259d69072d3a3" name="aad12ac03a658f88f0e1259d69072d3a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad12ac03a658f88f0e1259d69072d3a3">&#9670;&nbsp;</a></span>multi_robot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::multi_robot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l03843">3843</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03844" name="l03844"></a><span class="lineno"> 3844</span>{</div>
<div class="line"><a id="l03845" name="l03845"></a><span class="lineno"> 3845</span>    <span class="keywordtype">int</span> mode = 0;</div>
<div class="line"><a id="l03846" name="l03846"></a><span class="lineno"> 3846</span>    <span class="keywordtype">int</span> boo_hoo = 0;</div>
<div class="line"><a id="l03847" name="l03847"></a><span class="lineno"> 3847</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target;</div>
<div class="line"><a id="l03848" name="l03848"></a><span class="lineno"> 3848</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> == 0 ) {</div>
<div class="line"><a id="l03849" name="l03849"></a><span class="lineno"> 3849</span>        target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l03850" name="l03850"></a><span class="lineno"> 3850</span>        <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l03851" name="l03851"></a><span class="lineno"> 3851</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03852" name="l03852"></a><span class="lineno"> 3852</span>        }</div>
<div class="line"><a id="l03853" name="l03853"></a><span class="lineno"> 3853</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03854" name="l03854"></a><span class="lineno"> 3854</span>        target = z-&gt;<a class="code hl_function" href="classCreature.html#abb91e1cd5610658124d40623e7e4d698">auto_find_hostile_target</a>( 48, boo_hoo );</div>
<div class="line"><a id="l03855" name="l03855"></a><span class="lineno"> 3855</span>        <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l03856" name="l03856"></a><span class="lineno"> 3856</span>            <span class="keywordflow">if</span>( boo_hoo &gt; 0 &amp;&amp; <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) { <span class="comment">// because that stupid oaf was in the way!</span></div>
<div class="line"><a id="l03857" name="l03857"></a><span class="lineno"> 3857</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;Pointed in your direction, the %s emits an IFF warning beep.&quot;</span>,</div>
<div class="line"><a id="l03858" name="l03858"></a><span class="lineno"> 3858</span>                                              <span class="stringliteral">&quot;Pointed in your direction, the %s emits %d annoyed sounding beeps.&quot;</span>,</div>
<div class="line"><a id="l03859" name="l03859"></a><span class="lineno"> 3859</span>                                              boo_hoo ),</div>
<div class="line"><a id="l03860" name="l03860"></a><span class="lineno"> 3860</span>                         z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(), boo_hoo );</div>
<div class="line"><a id="l03861" name="l03861"></a><span class="lineno"> 3861</span>            }</div>
<div class="line"><a id="l03862" name="l03862"></a><span class="lineno"> 3862</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03863" name="l03863"></a><span class="lineno"> 3863</span>        }</div>
<div class="line"><a id="l03864" name="l03864"></a><span class="lineno"> 3864</span>    }</div>
<div class="line"><a id="l03865" name="l03865"></a><span class="lineno"> 3865</span> </div>
<div class="line"><a id="l03866" name="l03866"></a><span class="lineno"> 3866</span>    <span class="keywordtype">int</span> cap = target-&gt;<a class="code hl_function" href="classCreature.html#a02d2efea607ba8fd8ecc714e35413d32">power_rating</a>();</div>
<div class="line"><a id="l03867" name="l03867"></a><span class="lineno"> 3867</span>    <a class="code hl_class" href="classmonster.html">monster</a> *mon = <span class="keyword">dynamic_cast&lt;</span> <a class="code hl_class" href="classmonster.html">monster</a> * <span class="keyword">&gt;</span>( target );</div>
<div class="line"><a id="l03868" name="l03868"></a><span class="lineno"> 3868</span>    <span class="comment">// Their attitude to us and not ours to them, so that bobcats won&#39;t get gunned down</span></div>
<div class="line"><a id="l03869" name="l03869"></a><span class="lineno"> 3869</span>    <span class="comment">// Only monster-types for now - assuming humans are smart enough not to make it obvious</span></div>
<div class="line"><a id="l03870" name="l03870"></a><span class="lineno"> 3870</span>    <span class="comment">// Unless damaged - then everything is hostile</span></div>
<div class="line"><a id="l03871" name="l03871"></a><span class="lineno"> 3871</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_function" href="classmonster.html#a2d0e466b9d25796cd99402ddd5d3ce20">get_hp</a>() &lt;= z-&gt;<a class="code hl_function" href="classmonster.html#a551f4a380282f8ec082c74f410c397de">get_hp_max</a>() ||</div>
<div class="line"><a id="l03872" name="l03872"></a><span class="lineno"> 3872</span>        ( mon != <span class="keyword">nullptr</span> &amp;&amp; mon-&gt;<a class="code hl_function" href="classmonster.html#a125622587c2069dc4dbbe07943c81336">attitude_to</a>( *z ) == Creature::Attitude::A_HOSTILE ) ) {</div>
<div class="line"><a id="l03873" name="l03873"></a><span class="lineno"> 3873</span>        cap += 2;</div>
<div class="line"><a id="l03874" name="l03874"></a><span class="lineno"> 3874</span>    }</div>
<div class="line"><a id="l03875" name="l03875"></a><span class="lineno"> 3875</span> </div>
<div class="line"><a id="l03876" name="l03876"></a><span class="lineno"> 3876</span>    <span class="keywordtype">int</span> dist = <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() );</div>
<div class="line"><a id="l03877" name="l03877"></a><span class="lineno"> 3877</span>    <span class="keywordflow">if</span>( dist &lt;= 15 ) {</div>
<div class="line"><a id="l03878" name="l03878"></a><span class="lineno"> 3878</span>        mode = 1;</div>
<div class="line"><a id="l03879" name="l03879"></a><span class="lineno"> 3879</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dist &lt;= 30 ) {</div>
<div class="line"><a id="l03880" name="l03880"></a><span class="lineno"> 3880</span>        mode = 2;</div>
<div class="line"><a id="l03881" name="l03881"></a><span class="lineno"> 3881</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ( target == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u &amp;&amp; <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.in_vehicle ) ||</div>
<div class="line"><a id="l03882" name="l03882"></a><span class="lineno"> 3882</span>               z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> != 0 ||</div>
<div class="line"><a id="l03883" name="l03883"></a><span class="lineno"> 3883</span>               cap &gt; 4 ) {</div>
<div class="line"><a id="l03884" name="l03884"></a><span class="lineno"> 3884</span>        <span class="comment">// Primary only kicks in if you&#39;re in a vehicle or are big enough to be mistaken for one.</span></div>
<div class="line"><a id="l03885" name="l03885"></a><span class="lineno"> 3885</span>        <span class="comment">// Or if you&#39;ve hacked it so the turret&#39;s on your side.  ;-)</span></div>
<div class="line"><a id="l03886" name="l03886"></a><span class="lineno"> 3886</span>        <span class="keywordflow">if</span>( dist &lt; 50 ) {</div>
<div class="line"><a id="l03887" name="l03887"></a><span class="lineno"> 3887</span>            <span class="comment">// Enforced max-range of 50.</span></div>
<div class="line"><a id="l03888" name="l03888"></a><span class="lineno"> 3888</span>            mode = 5;</div>
<div class="line"><a id="l03889" name="l03889"></a><span class="lineno"> 3889</span>            cap = 5;</div>
<div class="line"><a id="l03890" name="l03890"></a><span class="lineno"> 3890</span>        }</div>
<div class="line"><a id="l03891" name="l03891"></a><span class="lineno"> 3891</span>    }</div>
<div class="line"><a id="l03892" name="l03892"></a><span class="lineno"> 3892</span> </div>
<div class="line"><a id="l03893" name="l03893"></a><span class="lineno"> 3893</span>    <span class="comment">// No attacks were valid!</span></div>
<div class="line"><a id="l03894" name="l03894"></a><span class="lineno"> 3894</span>    <span class="keywordflow">if</span>( mode == 0 ) {</div>
<div class="line"><a id="l03895" name="l03895"></a><span class="lineno"> 3895</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03896" name="l03896"></a><span class="lineno"> 3896</span>    }</div>
<div class="line"><a id="l03897" name="l03897"></a><span class="lineno"> 3897</span> </div>
<div class="line"><a id="l03898" name="l03898"></a><span class="lineno"> 3898</span>    <span class="keywordflow">if</span>( mode &gt; cap ) {</div>
<div class="line"><a id="l03899" name="l03899"></a><span class="lineno"> 3899</span>        mode = cap;</div>
<div class="line"><a id="l03900" name="l03900"></a><span class="lineno"> 3900</span>    }</div>
<div class="line"><a id="l03901" name="l03901"></a><span class="lineno"> 3901</span>    <span class="keywordflow">switch</span>( mode ) {</div>
<div class="line"><a id="l03902" name="l03902"></a><span class="lineno"> 3902</span>        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l03903" name="l03903"></a><span class="lineno"> 3903</span>            <span class="keywordflow">if</span>( dist &lt;= 15 ) {</div>
<div class="line"><a id="l03904" name="l03904"></a><span class="lineno"> 3904</span>                <a class="code hl_function" href="namespacemattack.html#a2eb6221fccf307deab17f0240aaf4981">rifle</a>( z, target );</div>
<div class="line"><a id="l03905" name="l03905"></a><span class="lineno"> 3905</span>            }</div>
<div class="line"><a id="l03906" name="l03906"></a><span class="lineno"> 3906</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03907" name="l03907"></a><span class="lineno"> 3907</span>        <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l03908" name="l03908"></a><span class="lineno"> 3908</span>            <span class="keywordflow">if</span>( dist &lt;= 30 ) {</div>
<div class="line"><a id="l03909" name="l03909"></a><span class="lineno"> 3909</span>                <a class="code hl_function" href="namespacemattack.html#a3d8357fbd677c0d10f4ad5500bc9455d">frag</a>( z, target );</div>
<div class="line"><a id="l03910" name="l03910"></a><span class="lineno"> 3910</span>            }</div>
<div class="line"><a id="l03911" name="l03911"></a><span class="lineno"> 3911</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03912" name="l03912"></a><span class="lineno"> 3912</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l03913" name="l03913"></a><span class="lineno"> 3913</span>            <span class="comment">// Weak stuff, shouldn&#39;t bother with</span></div>
<div class="line"><a id="l03914" name="l03914"></a><span class="lineno"> 3914</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03915" name="l03915"></a><span class="lineno"> 3915</span>    }</div>
<div class="line"><a id="l03916" name="l03916"></a><span class="lineno"> 3916</span> </div>
<div class="line"><a id="l03917" name="l03917"></a><span class="lineno"> 3917</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03918" name="l03918"></a><span class="lineno"> 3918</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="monster_8cpp_source.html#l01020">monster::attitude_to()</a>, <a class="el" href="creature_8cpp_source.html#l00330">Creature::auto_find_hostile_target()</a>, <a class="el" href="monattack_8cpp_source.html#l03321">frag()</a>, <a class="el" href="monster_8h_source.html#l00471">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="monster_8cpp_source.html#l02894">monster::get_hp()</a>, <a class="el" href="monster_8cpp_source.html#l02884">monster::get_hp_max()</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="classCreature.html#a02d2efea607ba8fd8ecc714e35413d32">Creature::power_rating()</a>, <a class="el" href="monattack_8cpp_source.html#l03272">rifle()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, and <a class="el" href="translations_8cpp_source.html#l00036">vgettext()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a1f0e47669aab3ecd87f94a38309d515a" name="a1f0e47669aab3ecd87f94a38309d515a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f0e47669aab3ecd87f94a38309d515a">&#9670;&nbsp;</a></span>none()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::none </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l00320">320</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>{</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a298448a06b033b766a1cd8674d296c64" name="a298448a06b033b766a1cd8674d296c64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a298448a06b033b766a1cd8674d296c64">&#9670;&nbsp;</a></span>nurse_assist()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::nurse_assist </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l02925">2925</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02926" name="l02926"></a><span class="lineno"> 2926</span>{</div>
<div class="line"><a id="l02927" name="l02927"></a><span class="lineno"> 2927</span> </div>
<div class="line"><a id="l02928" name="l02928"></a><span class="lineno"> 2928</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> u_see = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z );</div>
<div class="line"><a id="l02929" name="l02929"></a><span class="lineno"> 2929</span> </div>
<div class="line"><a id="l02930" name="l02930"></a><span class="lineno"> 2930</span>    <span class="keywordflow">if</span>( u_see &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 100 ) ) {</div>
<div class="line"><a id="l02931" name="l02931"></a><span class="lineno"> 2931</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s is scanning its surroundings.&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02932" name="l02932"></a><span class="lineno"> 2932</span>    }</div>
<div class="line"><a id="l02933" name="l02933"></a><span class="lineno"> 2933</span> </div>
<div class="line"><a id="l02934" name="l02934"></a><span class="lineno"> 2934</span>    <span class="keywordtype">bool</span> found_target = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02935" name="l02935"></a><span class="lineno"> 2935</span>    <a class="code hl_class" href="classplayer.html">player</a> *target = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02936" name="l02936"></a><span class="lineno"> 2936</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> tmp_pos( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>() + <a class="code hl_struct" href="structpoint.html">point</a>( 12, 12 ) );</div>
<div class="line"><a id="l02937" name="l02937"></a><span class="lineno"> 2937</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> critter : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.get_creatures_in_radius( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 6 ) ) {</div>
<div class="line"><a id="l02938" name="l02938"></a><span class="lineno"> 2938</span>        <a class="code hl_class" href="classplayer.html">player</a> *tmp_player = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classplayer.html">player</a> *<span class="keyword">&gt;</span>( critter );</div>
<div class="line"><a id="l02939" name="l02939"></a><span class="lineno"> 2939</span>        <span class="comment">// No need to scan players we can&#39;t reach</span></div>
<div class="line"><a id="l02940" name="l02940"></a><span class="lineno"> 2940</span>        <span class="keywordflow">if</span>( tmp_player != <span class="keyword">nullptr</span> &amp;&amp; z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *tmp_player ) &amp;&amp;</div>
<div class="line"><a id="l02941" name="l02941"></a><span class="lineno"> 2941</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.clear_path( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), tmp_player-&gt;<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), 10, 0, 100 ) ) {</div>
<div class="line"><a id="l02942" name="l02942"></a><span class="lineno"> 2942</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), tmp_player-&gt;<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() ) &lt; <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), tmp_pos ) ) {</div>
<div class="line"><a id="l02943" name="l02943"></a><span class="lineno"> 2943</span>                tmp_pos = tmp_player-&gt;<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>();</div>
<div class="line"><a id="l02944" name="l02944"></a><span class="lineno"> 2944</span>                target = tmp_player;</div>
<div class="line"><a id="l02945" name="l02945"></a><span class="lineno"> 2945</span>                found_target = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02946" name="l02946"></a><span class="lineno"> 2946</span>            }</div>
<div class="line"><a id="l02947" name="l02947"></a><span class="lineno"> 2947</span>        }</div>
<div class="line"><a id="l02948" name="l02948"></a><span class="lineno"> 2948</span>    }</div>
<div class="line"><a id="l02949" name="l02949"></a><span class="lineno"> 2949</span> </div>
<div class="line"><a id="l02950" name="l02950"></a><span class="lineno"> 2950</span>    <span class="keywordflow">if</span>( found_target ) {</div>
<div class="line"><a id="l02951" name="l02951"></a><span class="lineno"> 2951</span>        <span class="keywordflow">if</span>( target-&gt;<a class="code hl_function" href="classCharacter.html#a6028587ccee9855c6ba900042188eec3">is_wearing</a>( <a class="code hl_variable" href="monattack_8cpp.html#a718c7fdd30ad771cc8218c4500cf6f10">itype_badge_doctor</a> ) ||</div>
<div class="line"><a id="l02952" name="l02952"></a><span class="lineno"> 2952</span>            z-&gt;<a class="code hl_function" href="classmonster.html#a125622587c2069dc4dbbe07943c81336">attitude_to</a>( *target ) == Creature::Attitude::A_FRIENDLY ) {</div>
<div class="line"><a id="l02953" name="l02953"></a><span class="lineno"> 2953</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 8, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>,</div>
<div class="line"><a id="l02954" name="l02954"></a><span class="lineno"> 2954</span>                           <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>(</div>
<div class="line"><a id="l02955" name="l02955"></a><span class="lineno"> 2955</span>                               <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;a soft robotic voice say, \&quot;Welcome doctor %s.  I&#39;ll be your assistant today.\&quot;&quot;</span> ),</div>
<div class="line"><a id="l02956" name="l02956"></a><span class="lineno"> 2956</span>                               <a class="code hl_function" href="namespaceName.html#aee8234c627357de0efa0dd608a45c970">Name::generate</a>( target-&gt;<a class="code hl_variable" href="classCharacter.html#a8e6a78e6c4497a9aa7b8cc127dcdd4e3">male</a> ) ) );</div>
<div class="line"><a id="l02957" name="l02957"></a><span class="lineno"> 2957</span>            target-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#aa332b3f725b2894fa8e2e290a261a731">effect_assisted</a>, 20_turns, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a>, 12 );</div>
<div class="line"><a id="l02958" name="l02958"></a><span class="lineno"> 2958</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02959" name="l02959"></a><span class="lineno"> 2959</span>        }</div>
<div class="line"><a id="l02960" name="l02960"></a><span class="lineno"> 2960</span>    }</div>
<div class="line"><a id="l02961" name="l02961"></a><span class="lineno"> 2961</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02962" name="l02962"></a><span class="lineno"> 2962</span>}</div>
<div class="ttc" id="aclassCharacter_html_a6028587ccee9855c6ba900042188eec3"><div class="ttname"><a href="classCharacter.html#a6028587ccee9855c6ba900042188eec3">Character::is_wearing</a></div><div class="ttdeci">bool is_wearing(const itype_id &amp;it) const</div><div class="ttdoc">Returns true if the player is wearing the item.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03221">character.cpp:3221</a></div></div>
<div class="ttc" id="aclassCharacter_html_a8e6a78e6c4497a9aa7b8cc127dcdd4e3"><div class="ttname"><a href="classCharacter.html#a8e6a78e6c4497a9aa7b8cc127dcdd4e3">Character::male</a></div><div class="ttdeci">bool male</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01569">character.h:1569</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a718c7fdd30ad771cc8218c4500cf6f10"><div class="ttname"><a href="monattack_8cpp.html#a718c7fdd30ad771cc8218c4500cf6f10">itype_badge_doctor</a></div><div class="ttdeci">static const itype_id itype_badge_doctor(&quot;badge_doctor&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_aa332b3f725b2894fa8e2e290a261a731"><div class="ttname"><a href="monattack_8cpp.html#aa332b3f725b2894fa8e2e290a261a731">effect_assisted</a></div><div class="ttdeci">static const efftype_id effect_assisted(&quot;assisted&quot;)</div></div>
<div class="ttc" id="anamespaceName_html_aee8234c627357de0efa0dd608a45c970"><div class="ttname"><a href="namespaceName.html#aee8234c627357de0efa0dd608a45c970">Name::generate</a></div><div class="ttdeci">std::string generate(bool is_male)</div><div class="ttdoc">Return a random full name given gender.</div><div class="ttdef"><b>Definition:</b> <a href="name_8cpp_source.html#l00128">name.cpp:128</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a9b089d0b697443b096063219dab08ef5"><div class="ttname"><a href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a></div><div class="ttdeci">std::string string_format(std::string format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00418">string_formatter.h:418</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8cpp_source.html#l00974">Creature::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="monster_8cpp_source.html#l01020">monster::attitude_to()</a>, <a class="el" href="monattack_8cpp.html#aa332b3f725b2894fa8e2e290a261a731">effect_assisted</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::electronic_speech</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="name_8cpp_source.html#l00128">Name::generate()</a>, <a class="el" href="character_8cpp_source.html#l03221">Character::is_wearing()</a>, <a class="el" href="monattack_8cpp.html#a718c7fdd30ad771cc8218c4500cf6f10">itype_badge_doctor</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="character_8h_source.html#l01569">Character::male</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="bodypart_8h_source.html#l00052">num_bp</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="character_8cpp_source.html#l00707">Character::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, and <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a5aeefe00f20c767bcdc374eedd168581" name="a5aeefe00f20c767bcdc374eedd168581"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5aeefe00f20c767bcdc374eedd168581">&#9670;&nbsp;</a></span>nurse_check_up()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::nurse_check_up </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l02881">2881</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02882" name="l02882"></a><span class="lineno"> 2882</span>{</div>
<div class="line"><a id="l02883" name="l02883"></a><span class="lineno"> 2883</span>    <span class="keywordtype">bool</span> found_target = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02884" name="l02884"></a><span class="lineno"> 2884</span>    <a class="code hl_class" href="classplayer.html">player</a> *target = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02885" name="l02885"></a><span class="lineno"> 2885</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> tmp_pos( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>() + <a class="code hl_struct" href="structpoint.html">point</a>( 12, 12 ) );</div>
<div class="line"><a id="l02886" name="l02886"></a><span class="lineno"> 2886</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> critter : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.get_creatures_in_radius( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 6 ) ) {</div>
<div class="line"><a id="l02887" name="l02887"></a><span class="lineno"> 2887</span>        <a class="code hl_class" href="classplayer.html">player</a> *tmp_player = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classplayer.html">player</a> *<span class="keyword">&gt;</span>( critter );</div>
<div class="line"><a id="l02888" name="l02888"></a><span class="lineno"> 2888</span>        <span class="keywordflow">if</span>( tmp_player != <span class="keyword">nullptr</span> &amp;&amp; z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *tmp_player ) &amp;&amp;</div>
<div class="line"><a id="l02889" name="l02889"></a><span class="lineno"> 2889</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.clear_path( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), tmp_player-&gt;<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), 10, 0,</div>
<div class="line"><a id="l02890" name="l02890"></a><span class="lineno"> 2890</span>                             100 ) ) { <span class="comment">// no need to scan players we can&#39;t reach</span></div>
<div class="line"><a id="l02891" name="l02891"></a><span class="lineno"> 2891</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), tmp_player-&gt;<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() ) &lt; <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), tmp_pos ) ) {</div>
<div class="line"><a id="l02892" name="l02892"></a><span class="lineno"> 2892</span>                tmp_pos = tmp_player-&gt;<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>();</div>
<div class="line"><a id="l02893" name="l02893"></a><span class="lineno"> 2893</span>                target = tmp_player;</div>
<div class="line"><a id="l02894" name="l02894"></a><span class="lineno"> 2894</span>                found_target = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02895" name="l02895"></a><span class="lineno"> 2895</span>            }</div>
<div class="line"><a id="l02896" name="l02896"></a><span class="lineno"> 2896</span>        }</div>
<div class="line"><a id="l02897" name="l02897"></a><span class="lineno"> 2897</span>    }</div>
<div class="line"><a id="l02898" name="l02898"></a><span class="lineno"> 2898</span>    <span class="keywordflow">if</span>( found_target ) {</div>
<div class="line"><a id="l02899" name="l02899"></a><span class="lineno"> 2899</span> </div>
<div class="line"><a id="l02900" name="l02900"></a><span class="lineno"> 2900</span>        <span class="comment">// First we offer the check up then we wait to the player to come close</span></div>
<div class="line"><a id="l02901" name="l02901"></a><span class="lineno"> 2901</span>        <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a8bbfe91713ddfaa4c647fa68f9734e34">effect_countdown</a> ) ) {</div>
<div class="line"><a id="l02902" name="l02902"></a><span class="lineno"> 2902</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 8, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>,</div>
<div class="line"><a id="l02903" name="l02903"></a><span class="lineno"> 2903</span>                           <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>(</div>
<div class="line"><a id="l02904" name="l02904"></a><span class="lineno"> 2904</span>                               <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;a soft robotic voice say, \&quot;Come here and stand still for a few minutes, I&#39;ll give you a check-up.\&quot;&quot;</span> ) ) );</div>
<div class="line"><a id="l02905" name="l02905"></a><span class="lineno"> 2905</span>            z-&gt;<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a8bbfe91713ddfaa4c647fa68f9734e34">effect_countdown</a>, 30_minutes );</div>
<div class="line"><a id="l02906" name="l02906"></a><span class="lineno"> 2906</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( target-&gt;<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>() ) &gt; 1 ) {</div>
<div class="line"><a id="l02907" name="l02907"></a><span class="lineno"> 2907</span>            <span class="comment">// Giving them some encouragement</span></div>
<div class="line"><a id="l02908" name="l02908"></a><span class="lineno"> 2908</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 8, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>,</div>
<div class="line"><a id="l02909" name="l02909"></a><span class="lineno"> 2909</span>                           <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>(</div>
<div class="line"><a id="l02910" name="l02910"></a><span class="lineno"> 2910</span>                               <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;a soft robotic voice say, \&quot;Come on.  I don&#39;t bite, I promise it won&#39;t hurt one bit.\&quot;&quot;</span> ) ) );</div>
<div class="line"><a id="l02911" name="l02911"></a><span class="lineno"> 2911</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02912" name="l02912"></a><span class="lineno"> 2912</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 8, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>,</div>
<div class="line"><a id="l02913" name="l02913"></a><span class="lineno"> 2913</span>                           <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>(</div>
<div class="line"><a id="l02914" name="l02914"></a><span class="lineno"> 2914</span>                               <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;a soft robotic voice say, \&quot;Here we go.  Just hold still.\&quot;&quot;</span> ) ) );</div>
<div class="line"><a id="l02915" name="l02915"></a><span class="lineno"> 2915</span>            <span class="keywordflow">if</span>( target == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ) {</div>
<div class="line"><a id="l02916" name="l02916"></a><span class="lineno"> 2916</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You get a medical check-up.&quot;</span> ) );</div>
<div class="line"><a id="l02917" name="l02917"></a><span class="lineno"> 2917</span>            }</div>
<div class="line"><a id="l02918" name="l02918"></a><span class="lineno"> 2918</span>            target-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#abdb57f24c121c40d3ece30fec08e1881">effect_got_checked</a>, 10_turns );</div>
<div class="line"><a id="l02919" name="l02919"></a><span class="lineno"> 2919</span>            z-&gt;<a class="code hl_function" href="classCreature.html#a730fb8be5a540edd31ed9d8126ea20de">remove_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a8bbfe91713ddfaa4c647fa68f9734e34">effect_countdown</a> );</div>
<div class="line"><a id="l02920" name="l02920"></a><span class="lineno"> 2920</span>        }</div>
<div class="line"><a id="l02921" name="l02921"></a><span class="lineno"> 2921</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02922" name="l02922"></a><span class="lineno"> 2922</span>    }</div>
<div class="line"><a id="l02923" name="l02923"></a><span class="lineno"> 2923</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02924" name="l02924"></a><span class="lineno"> 2924</span>}</div>
<div class="ttc" id="amonattack_8cpp_html_abdb57f24c121c40d3ece30fec08e1881"><div class="ttname"><a href="monattack_8cpp.html#abdb57f24c121c40d3ece30fec08e1881">effect_got_checked</a></div><div class="ttdeci">static const efftype_id effect_got_checked(&quot;got_checked&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8cpp_source.html#l00974">Creature::add_effect()</a>, <a class="el" href="monster_8cpp_source.html#l01807">monster::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="monattack_8cpp.html#a8bbfe91713ddfaa4c647fa68f9734e34">effect_countdown</a>, <a class="el" href="monattack_8cpp.html#abdb57f24c121c40d3ece30fec08e1881">effect_got_checked</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::electronic_speech</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8cpp_source.html#l01173">Creature::has_effect()</a>, <a class="el" href="enums_8h_source.html#l00253">m_good</a>, <a class="el" href="character_8cpp_source.html#l00707">Character::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="creature_8cpp_source.html#l01130">Creature::remove_effect()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, and <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a1fdfb991ce804ef4da42a10244f77ca3" name="a1fdfb991ce804ef4da42a10244f77ca3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fdfb991ce804ef4da42a10244f77ca3">&#9670;&nbsp;</a></span>nurse_operate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::nurse_operate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l02963">2963</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02964" name="l02964"></a><span class="lineno"> 2964</span>{</div>
<div class="line"><a id="l02965" name="l02965"></a><span class="lineno"> 2965</span>    <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> ammo_type( <span class="stringliteral">&quot;anesthetic&quot;</span> );</div>
<div class="line"><a id="l02966" name="l02966"></a><span class="lineno"> 2966</span> </div>
<div class="line"><a id="l02967" name="l02967"></a><span class="lineno"> 2967</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a692b3825de327022efb956655bf5e441">effect_dragging</a> ) || z-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#ab8dd6142a7131d3af944e532002ac9e3">effect_operating</a> ) ) {</div>
<div class="line"><a id="l02968" name="l02968"></a><span class="lineno"> 2968</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02969" name="l02969"></a><span class="lineno"> 2969</span>    }</div>
<div class="line"><a id="l02970" name="l02970"></a><span class="lineno"> 2970</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> u_see = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z );</div>
<div class="line"><a id="l02971" name="l02971"></a><span class="lineno"> 2971</span> </div>
<div class="line"><a id="l02972" name="l02972"></a><span class="lineno"> 2972</span>    <span class="keywordflow">if</span>( u_see &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 100 ) ) {</div>
<div class="line"><a id="l02973" name="l02973"></a><span class="lineno"> 2973</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s is scanning its surroundings.&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02974" name="l02974"></a><span class="lineno"> 2974</span>    }</div>
<div class="line"><a id="l02975" name="l02975"></a><span class="lineno"> 2975</span> </div>
<div class="line"><a id="l02976" name="l02976"></a><span class="lineno"> 2976</span>    <span class="keywordflow">if</span>( ( ( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.is_wearing( <a class="code hl_variable" href="monattack_8cpp.html#a718c7fdd30ad771cc8218c4500cf6f10">itype_badge_doctor</a> ) ||</div>
<div class="line"><a id="l02977" name="l02977"></a><span class="lineno"> 2977</span>            z-&gt;<a class="code hl_function" href="classmonster.html#a125622587c2069dc4dbbe07943c81336">attitude_to</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ) == Creature::Attitude::A_FRIENDLY ) &amp;&amp; u_see ) &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 100 ) ) {</div>
<div class="line"><a id="l02978" name="l02978"></a><span class="lineno"> 2978</span> </div>
<div class="line"><a id="l02979" name="l02979"></a><span class="lineno"> 2979</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s doesn&#39;t seem to register you as a doctor.&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02980" name="l02980"></a><span class="lineno"> 2980</span>    }</div>
<div class="line"><a id="l02981" name="l02981"></a><span class="lineno"> 2981</span> </div>
<div class="line"><a id="l02982" name="l02982"></a><span class="lineno"> 2982</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">ammo</a>[ammo_type] == 0 &amp;&amp; u_see ) {</div>
<div class="line"><a id="l02983" name="l02983"></a><span class="lineno"> 2983</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 100 ) ) {</div>
<div class="line"><a id="l02984" name="l02984"></a><span class="lineno"> 2984</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s looks at its empty anesthesia kit with a dejected look.&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02985" name="l02985"></a><span class="lineno"> 2985</span>        }</div>
<div class="line"><a id="l02986" name="l02986"></a><span class="lineno"> 2986</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02987" name="l02987"></a><span class="lineno"> 2987</span>    }</div>
<div class="line"><a id="l02988" name="l02988"></a><span class="lineno"> 2988</span> </div>
<div class="line"><a id="l02989" name="l02989"></a><span class="lineno"> 2989</span>    <span class="keywordtype">bool</span> found_target = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02990" name="l02990"></a><span class="lineno"> 2990</span>    <a class="code hl_class" href="classplayer.html">player</a> *target = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02991" name="l02991"></a><span class="lineno"> 2991</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> tmp_pos( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>() + <a class="code hl_struct" href="structpoint.html">point</a>( 12, 12 ) );</div>
<div class="line"><a id="l02992" name="l02992"></a><span class="lineno"> 2992</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> critter : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.get_creatures_in_radius( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 6 ) ) {</div>
<div class="line"><a id="l02993" name="l02993"></a><span class="lineno"> 2993</span>        <a class="code hl_class" href="classplayer.html">player</a> *tmp_player = <span class="keyword">dynamic_cast&lt;</span> <a class="code hl_class" href="classplayer.html">player</a> *<span class="keyword">&gt;</span>( critter );</div>
<div class="line"><a id="l02994" name="l02994"></a><span class="lineno"> 2994</span>        <span class="comment">// No need to scan players we can&#39;t reach</span></div>
<div class="line"><a id="l02995" name="l02995"></a><span class="lineno"> 2995</span>        <span class="keywordflow">if</span>( tmp_player != <span class="keyword">nullptr</span> &amp;&amp; z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *tmp_player ) &amp;&amp;</div>
<div class="line"><a id="l02996" name="l02996"></a><span class="lineno"> 2996</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.clear_path( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), tmp_player-&gt;<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), 10, 0, 100 ) ) {</div>
<div class="line"><a id="l02997" name="l02997"></a><span class="lineno"> 2997</span>            <span class="keywordflow">if</span>( tmp_player-&gt;<a class="code hl_function" href="classCharacter.html#a683fe237dea8057351da3bdb775699b3">has_any_bionic</a>() ) {</div>
<div class="line"><a id="l02998" name="l02998"></a><span class="lineno"> 2998</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), tmp_player-&gt;<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() ) &lt; <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), tmp_pos ) ) {</div>
<div class="line"><a id="l02999" name="l02999"></a><span class="lineno"> 2999</span>                    tmp_pos = tmp_player-&gt;<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>();</div>
<div class="line"><a id="l03000" name="l03000"></a><span class="lineno"> 3000</span>                    target = tmp_player;</div>
<div class="line"><a id="l03001" name="l03001"></a><span class="lineno"> 3001</span>                    found_target = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03002" name="l03002"></a><span class="lineno"> 3002</span>                }</div>
<div class="line"><a id="l03003" name="l03003"></a><span class="lineno"> 3003</span>            }</div>
<div class="line"><a id="l03004" name="l03004"></a><span class="lineno"> 3004</span>        }</div>
<div class="line"><a id="l03005" name="l03005"></a><span class="lineno"> 3005</span>    }</div>
<div class="line"><a id="l03006" name="l03006"></a><span class="lineno"> 3006</span>    <span class="keywordflow">if</span>( found_target &amp;&amp; z-&gt;<a class="code hl_function" href="classmonster.html#a125622587c2069dc4dbbe07943c81336">attitude_to</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ) == Creature::Attitude::A_FRIENDLY ) {</div>
<div class="line"><a id="l03007" name="l03007"></a><span class="lineno"> 3007</span>        <span class="comment">// 50% chance to not turn hostile again</span></div>
<div class="line"><a id="l03008" name="l03008"></a><span class="lineno"> 3008</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) ) {</div>
<div class="line"><a id="l03009" name="l03009"></a><span class="lineno"> 3009</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03010" name="l03010"></a><span class="lineno"> 3010</span>        }</div>
<div class="line"><a id="l03011" name="l03011"></a><span class="lineno"> 3011</span>    }</div>
<div class="line"><a id="l03012" name="l03012"></a><span class="lineno"> 3012</span>    <span class="keywordflow">if</span>( found_target &amp;&amp; u_see ) {</div>
<div class="line"><a id="l03013" name="l03013"></a><span class="lineno"> 3013</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s scans %2$s and seems to detect something.&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l03014" name="l03014"></a><span class="lineno"> 3014</span>                 target-&gt;<a class="code hl_function" href="classCharacter.html#a1e1996b6d6fc0a86d917cd155e1656d8">disp_name</a>() );</div>
<div class="line"><a id="l03015" name="l03015"></a><span class="lineno"> 3015</span>    }</div>
<div class="line"><a id="l03016" name="l03016"></a><span class="lineno"> 3016</span> </div>
<div class="line"><a id="l03017" name="l03017"></a><span class="lineno"> 3017</span>    <span class="keywordflow">if</span>( found_target ) {</div>
<div class="line"><a id="l03018" name="l03018"></a><span class="lineno"> 3018</span> </div>
<div class="line"><a id="l03019" name="l03019"></a><span class="lineno"> 3019</span>        z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> = 0;</div>
<div class="line"><a id="l03020" name="l03020"></a><span class="lineno"> 3020</span>        z-&gt;<a class="code hl_variable" href="classmonster.html#a7b22fe8719e4783fe1896429cedefa8d">anger</a> = 100;</div>
<div class="line"><a id="l03021" name="l03021"></a><span class="lineno"> 3021</span>        std::list&lt;tripoint&gt; couch_pos = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.find_furnitures_with_flag_in_radius( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 10,</div>
<div class="line"><a id="l03022" name="l03022"></a><span class="lineno"> 3022</span>                                        <a class="code hl_function" href="monattack_8cpp.html#a8f09f88f12d06451c8aa83b57011a685">flag_AUTODOC_COUCH</a> );</div>
<div class="line"><a id="l03023" name="l03023"></a><span class="lineno"> 3023</span> </div>
<div class="line"><a id="l03024" name="l03024"></a><span class="lineno"> 3024</span>        <span class="keywordflow">if</span>( couch_pos.empty() ) {</div>
<div class="line"><a id="l03025" name="l03025"></a><span class="lineno"> 3025</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s looks for something but doesn&#39;t seem to find it.&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l03026" name="l03026"></a><span class="lineno"> 3026</span>            z-&gt;<a class="code hl_variable" href="classmonster.html#a7b22fe8719e4783fe1896429cedefa8d">anger</a> = 0;</div>
<div class="line"><a id="l03027" name="l03027"></a><span class="lineno"> 3027</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03028" name="l03028"></a><span class="lineno"> 3028</span>        }</div>
<div class="line"><a id="l03029" name="l03029"></a><span class="lineno"> 3029</span>        <span class="comment">// Should designate target as the attack_target</span></div>
<div class="line"><a id="l03030" name="l03030"></a><span class="lineno"> 3030</span>        z-&gt;<a class="code hl_function" href="classmonster.html#a1da2080d28447c922d5a537e54794051">set_dest</a>( target-&gt;<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() );</div>
<div class="line"><a id="l03031" name="l03031"></a><span class="lineno"> 3031</span> </div>
<div class="line"><a id="l03032" name="l03032"></a><span class="lineno"> 3032</span>        <span class="comment">// Check if target is already grabbed by something else</span></div>
<div class="line"><a id="l03033" name="l03033"></a><span class="lineno"> 3033</span>        <span class="keywordflow">if</span>( target-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#ae326c5e4da7f23bc429d04d215dd7c9d">effect_grabbed</a> ) ) {</div>
<div class="line"><a id="l03034" name="l03034"></a><span class="lineno"> 3034</span>            <span class="keywordflow">for</span>( <span class="keyword">auto</span> critter : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.get_creatures_in_radius( target-&gt;<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), 1 ) ) {</div>
<div class="line"><a id="l03035" name="l03035"></a><span class="lineno"> 3035</span>                <a class="code hl_class" href="classmonster.html">monster</a> *mon = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">&gt;</span>( critter );</div>
<div class="line"><a id="l03036" name="l03036"></a><span class="lineno"> 3036</span>                <span class="keywordflow">if</span>( mon != <span class="keyword">nullptr</span> &amp;&amp; mon != z ) {</div>
<div class="line"><a id="l03037" name="l03037"></a><span class="lineno"> 3037</span>                    <span class="keywordflow">if</span>( mon-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a> != <a class="code hl_variable" href="monattack_8cpp.html#a736b14680354a67047903a2b7cf78d55">mon_defective_robot_nurse</a> ) {</div>
<div class="line"><a id="l03038" name="l03038"></a><span class="lineno"> 3038</span>                        <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 8, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>,</div>
<div class="line"><a id="l03039" name="l03039"></a><span class="lineno"> 3039</span>                                       <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>(</div>
<div class="line"><a id="l03040" name="l03040"></a><span class="lineno"> 3040</span>                                           <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;a soft robotic voice say, \&quot;Unhand this patient immediately!  If you keep interfering with the procedure I&#39;ll be forced to call law enforcement.\&quot;&quot;</span> ) ) );</div>
<div class="line"><a id="l03041" name="l03041"></a><span class="lineno"> 3041</span>                        <span class="comment">// Try to push the perpetrator away</span></div>
<div class="line"><a id="l03042" name="l03042"></a><span class="lineno"> 3042</span>                        z-&gt;<a class="code hl_function" href="classmonster.html#a1a829284017aa69618d25208a53061d1">push_to</a>( mon-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 6, 0 );</div>
<div class="line"><a id="l03043" name="l03043"></a><span class="lineno"> 3043</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03044" name="l03044"></a><span class="lineno"> 3044</span>                        <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 8, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>,</div>
<div class="line"><a id="l03045" name="l03045"></a><span class="lineno"> 3045</span>                                       <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>(</div>
<div class="line"><a id="l03046" name="l03046"></a><span class="lineno"> 3046</span>                                           <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;a soft robotic voice say, \&quot;Greetings kinbot.  Please take good care of this patient.\&quot;&quot;</span> ) ) );</div>
<div class="line"><a id="l03047" name="l03047"></a><span class="lineno"> 3047</span>                        z-&gt;<a class="code hl_variable" href="classmonster.html#a7b22fe8719e4783fe1896429cedefa8d">anger</a> = 0;</div>
<div class="line"><a id="l03048" name="l03048"></a><span class="lineno"> 3048</span>                        <span class="comment">// Situation is under control no need to intervene;</span></div>
<div class="line"><a id="l03049" name="l03049"></a><span class="lineno"> 3049</span>                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03050" name="l03050"></a><span class="lineno"> 3050</span>                    }</div>
<div class="line"><a id="l03051" name="l03051"></a><span class="lineno"> 3051</span>                }</div>
<div class="line"><a id="l03052" name="l03052"></a><span class="lineno"> 3052</span>            }</div>
<div class="line"><a id="l03053" name="l03053"></a><span class="lineno"> 3053</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03054" name="l03054"></a><span class="lineno"> 3054</span>            <a class="code hl_function" href="handle__action_8cpp.html#adad5435d6c5b95d6e491750b1abead4e">grab</a>( z );</div>
<div class="line"><a id="l03055" name="l03055"></a><span class="lineno"> 3055</span>            <span class="comment">// Check if we successfully grabbed the target</span></div>
<div class="line"><a id="l03056" name="l03056"></a><span class="lineno"> 3056</span>            <span class="keywordflow">if</span>( target-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#ae326c5e4da7f23bc429d04d215dd7c9d">effect_grabbed</a> ) ) {</div>
<div class="line"><a id="l03057" name="l03057"></a><span class="lineno"> 3057</span>                z-&gt;<a class="code hl_variable" href="classmonster.html#ab00d759ebe29170bf2a166dd155bfeb2">dragged_foe_id</a> = target-&gt;<a class="code hl_function" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>();</div>
<div class="line"><a id="l03058" name="l03058"></a><span class="lineno"> 3058</span>                z-&gt;<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a692b3825de327022efb956655bf5e441">effect_dragging</a>, 1_turns, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a> );</div>
<div class="line"><a id="l03059" name="l03059"></a><span class="lineno"> 3059</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03060" name="l03060"></a><span class="lineno"> 3060</span>            }</div>
<div class="line"><a id="l03061" name="l03061"></a><span class="lineno"> 3061</span>        }</div>
<div class="line"><a id="l03062" name="l03062"></a><span class="lineno"> 3062</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03063" name="l03063"></a><span class="lineno"> 3063</span>    }</div>
<div class="line"><a id="l03064" name="l03064"></a><span class="lineno"> 3064</span>    z-&gt;<a class="code hl_variable" href="classmonster.html#a7b22fe8719e4783fe1896429cedefa8d">anger</a> = 0;</div>
<div class="line"><a id="l03065" name="l03065"></a><span class="lineno"> 3065</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03066" name="l03066"></a><span class="lineno"> 3066</span>}</div>
<div class="ttc" id="aclassCharacter_html_a1e1996b6d6fc0a86d917cd155e1656d8"><div class="ttname"><a href="classCharacter.html#a1e1996b6d6fc0a86d917cd155e1656d8">Character::disp_name</a></div><div class="ttdeci">std::string disp_name(bool possessive=false, bool capitalize_first=false) const override</div><div class="ttdoc">Returns either &quot;you&quot; or the player's name.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00539">character.cpp:539</a></div></div>
<div class="ttc" id="aclassCharacter_html_a683fe237dea8057351da3bdb775699b3"><div class="ttname"><a href="classCharacter.html#a683fe237dea8057351da3bdb775699b3">Character::has_any_bionic</a></div><div class="ttdeci">bool has_any_bionic() const</div><div class="ttdoc">Returns true if the player has any bionic.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01886">character.cpp:1886</a></div></div>
<div class="ttc" id="aclassmonster_html_a1a829284017aa69618d25208a53061d1"><div class="ttname"><a href="classmonster.html#a1a829284017aa69618d25208a53061d1">monster::push_to</a></div><div class="ttdeci">bool push_to(const tripoint &amp;p, int boost, size_t depth)</div><div class="ttdoc">Try to push away whatever occupies p, then step in.</div><div class="ttdef"><b>Definition:</b> <a href="monmove_8cpp_source.html#l01698">monmove.cpp:1698</a></div></div>
<div class="ttc" id="aclassmonster_html_a1da2080d28447c922d5a537e54794051"><div class="ttname"><a href="classmonster.html#a1da2080d28447c922d5a537e54794051">monster::set_dest</a></div><div class="ttdeci">void set_dest(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="monmove_8cpp_source.html#l00254">monmove.cpp:254</a></div></div>
<div class="ttc" id="aclassmonster_html_ab00d759ebe29170bf2a166dd155bfeb2"><div class="ttname"><a href="classmonster.html#ab00d759ebe29170bf2a166dd155bfeb2">monster::dragged_foe_id</a></div><div class="ttdeci">character_id dragged_foe_id</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00460">monster.h:460</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a692b3825de327022efb956655bf5e441"><div class="ttname"><a href="monattack_8cpp.html#a692b3825de327022efb956655bf5e441">effect_dragging</a></div><div class="ttdeci">static const efftype_id effect_dragging(&quot;dragging&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a736b14680354a67047903a2b7cf78d55"><div class="ttname"><a href="monattack_8cpp.html#a736b14680354a67047903a2b7cf78d55">mon_defective_robot_nurse</a></div><div class="ttdeci">static const mtype_id mon_defective_robot_nurse(&quot;mon_nursebot_defective&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a8f09f88f12d06451c8aa83b57011a685"><div class="ttname"><a href="monattack_8cpp.html#a8f09f88f12d06451c8aa83b57011a685">flag_AUTODOC_COUCH</a></div><div class="ttdeci">static const std::string flag_AUTODOC_COUCH(&quot;AUTODOC_COUCH&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_ab8dd6142a7131d3af944e532002ac9e3"><div class="ttname"><a href="monattack_8cpp.html#ab8dd6142a7131d3af944e532002ac9e3">effect_operating</a></div><div class="ttdeci">static const efftype_id effect_operating(&quot;operating&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="monster_8cpp_source.html#l01807">monster::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="monster_8h_source.html#l00512">monster::ammo</a>, <a class="el" href="monster_8h_source.html#l00472">monster::anger</a>, <a class="el" href="monster_8cpp_source.html#l01020">monster::attitude_to()</a>, <a class="el" href="character_8cpp_source.html#l00539">Character::disp_name()</a>, <a class="el" href="monster_8h_source.html#l00460">monster::dragged_foe_id</a>, <a class="el" href="monattack_8cpp.html#a692b3825de327022efb956655bf5e441">effect_dragging</a>, <a class="el" href="monattack_8cpp.html#ae326c5e4da7f23bc429d04d215dd7c9d">effect_grabbed</a>, <a class="el" href="monattack_8cpp.html#ab8dd6142a7131d3af944e532002ac9e3">effect_operating</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::electronic_speech</a>, <a class="el" href="monattack_8cpp.html#a8f09f88f12d06451c8aa83b57011a685">flag_AUTODOC_COUCH()</a>, <a class="el" href="monster_8h_source.html#l00471">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="character_8cpp_source.html#l00470">Character::getID()</a>, <a class="el" href="handle__action_8cpp_source.html#l00599">grab()</a>, <a class="el" href="character_8cpp_source.html#l01886">Character::has_any_bionic()</a>, <a class="el" href="creature_8cpp_source.html#l01173">Creature::has_effect()</a>, <a class="el" href="mtype_8h_source.html#l00240">mtype::id</a>, <a class="el" href="monattack_8cpp.html#a718c7fdd30ad771cc8218c4500cf6f10">itype_badge_doctor</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="monattack_8cpp.html#a736b14680354a67047903a2b7cf78d55">mon_defective_robot_nurse</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="bodypart_8h_source.html#l00052">num_bp</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="character_8cpp_source.html#l00707">Character::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="monmove_8cpp_source.html#l01698">monster::push_to()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, <a class="el" href="monmove_8cpp_source.html#l00254">monster::set_dest()</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>, and <a class="el" href="monster_8h_source.html#l00478">monster::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a3498ecb900e919d9525e8f51aec49711" name="a3498ecb900e919d9525e8f51aec49711"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3498ecb900e919d9525e8f51aec49711">&#9670;&nbsp;</a></span>para_sting()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::para_sting </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l02796">2796</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02797" name="l02797"></a><span class="lineno"> 2797</span>{</div>
<div class="line"><a id="l02798" name="l02798"></a><span class="lineno"> 2798</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> range = 4.0f;</div>
<div class="line"><a id="l02799" name="l02799"></a><span class="lineno"> 2799</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = <a class="code hl_function" href="monattack_8cpp.html#aaf60dff9863e93c2ff058ac3d17bf715">sting_get_target</a>( z, range );</div>
<div class="line"><a id="l02800" name="l02800"></a><span class="lineno"> 2800</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l02801" name="l02801"></a><span class="lineno"> 2801</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02802" name="l02802"></a><span class="lineno"> 2802</span>    }</div>
<div class="line"><a id="l02803" name="l02803"></a><span class="lineno"> 2803</span> </div>
<div class="line"><a id="l02804" name="l02804"></a><span class="lineno"> 2804</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 150;</div>
<div class="line"><a id="l02805" name="l02805"></a><span class="lineno"> 2805</span> </div>
<div class="line"><a id="l02806" name="l02806"></a><span class="lineno"> 2806</span>    <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a> dam = <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>();</div>
<div class="line"><a id="l02807" name="l02807"></a><span class="lineno"> 2807</span>    dam.<a class="code hl_function" href="structdamage__instance.html#a36067fd68baf04345d0c3626c67b8cac">add_damage</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa12e559f29e023db673e9251b9337d8dd">DT_STAB</a>, 6, 8, 0.8, 1 );</div>
<div class="line"><a id="l02808" name="l02808"></a><span class="lineno"> 2808</span>    <span class="keywordtype">bool</span> hit = <a class="code hl_function" href="monattack_8cpp.html#a7123ec8fe05b2572b4d1907ef501a552">sting_shoot</a>( z, target, dam, range );</div>
<div class="line"><a id="l02809" name="l02809"></a><span class="lineno"> 2809</span>    <span class="keywordflow">if</span>( hit ) {</div>
<div class="line"><a id="l02810" name="l02810"></a><span class="lineno"> 2810</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You feel poison enter your body!&quot;</span> ) );</div>
<div class="line"><a id="l02811" name="l02811"></a><span class="lineno"> 2811</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a04a9c5a38c56dac485cb30d93ee38658">effect_paralyzepoison</a>, 5_minutes );</div>
<div class="line"><a id="l02812" name="l02812"></a><span class="lineno"> 2812</span>    }</div>
<div class="line"><a id="l02813" name="l02813"></a><span class="lineno"> 2813</span> </div>
<div class="line"><a id="l02814" name="l02814"></a><span class="lineno"> 2814</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02815" name="l02815"></a><span class="lineno"> 2815</span>}</div>
<div class="ttc" id="amonattack_8cpp_html_a04a9c5a38c56dac485cb30d93ee38658"><div class="ttname"><a href="monattack_8cpp.html#a04a9c5a38c56dac485cb30d93ee38658">effect_paralyzepoison</a></div><div class="ttdeci">static const efftype_id effect_paralyzepoison(&quot;paralyzepoison&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="damage_8cpp_source.html#l00041">damage_instance::add_damage()</a>, <a class="el" href="creature_8cpp_source.html#l00974">Creature::add_effect()</a>, <a class="el" href="creature_8h_source.html#l00593">Creature::add_msg_if_player()</a>, <a class="el" href="damage_8h_source.html#l00027">DT_STAB</a>, <a class="el" href="monattack_8cpp.html#a04a9c5a38c56dac485cb30d93ee38658">effect_paralyzepoison</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monattack_8cpp_source.html#l00221">sting_get_target()</a>, and <a class="el" href="monattack_8cpp_source.html#l00238">sting_shoot()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="aacb645c1d5704bc277f2b0b568862950" name="aacb645c1d5704bc277f2b0b568862950"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacb645c1d5704bc277f2b0b568862950">&#9670;&nbsp;</a></span>parrot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::parrot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l04445">4445</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04446" name="l04446"></a><span class="lineno"> 4446</span>{</div>
<div class="line"><a id="l04447" name="l04447"></a><span class="lineno"> 4447</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#aaa9df9ef85dde81ec2db2f3997f4f458">effect_shrieking</a> ) ) {</div>
<div class="line"><a id="l04448" name="l04448"></a><span class="lineno"> 4448</span>        <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 120, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f">sounds::sound_t::alert</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;a piercing wail!&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;shout&quot;</span>,</div>
<div class="line"><a id="l04449" name="l04449"></a><span class="lineno"> 4449</span>                       <span class="stringliteral">&quot;wail&quot;</span> );</div>
<div class="line"><a id="l04450" name="l04450"></a><span class="lineno"> 4450</span>        z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 40;</div>
<div class="line"><a id="l04451" name="l04451"></a><span class="lineno"> 4451</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04452" name="l04452"></a><span class="lineno"> 4452</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 20 ) ) {</div>
<div class="line"><a id="l04453" name="l04453"></a><span class="lineno"> 4453</span>        <a class="code hl_function" href="monattack_8cpp.html#a2ad0cc238fa2fe0693fec4c9ec60e186">parrot_common</a>( z );</div>
<div class="line"><a id="l04454" name="l04454"></a><span class="lineno"> 4454</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04455" name="l04455"></a><span class="lineno"> 4455</span>    }</div>
<div class="line"><a id="l04456" name="l04456"></a><span class="lineno"> 4456</span> </div>
<div class="line"><a id="l04457" name="l04457"></a><span class="lineno"> 4457</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04458" name="l04458"></a><span class="lineno"> 4458</span>}</div>
<div class="ttc" id="amonattack_8cpp_html_a2ad0cc238fa2fe0693fec4c9ec60e186"><div class="ttname"><a href="monattack_8cpp.html#a2ad0cc238fa2fe0693fec4c9ec60e186">parrot_common</a></div><div class="ttdeci">static void parrot_common(monster *parrot)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l04436">monattack.cpp:4436</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_aaa9df9ef85dde81ec2db2f3997f4f458"><div class="ttname"><a href="monattack_8cpp.html#aaa9df9ef85dde81ec2db2f3997f4f458">effect_shrieking</a></div><div class="ttdeci">static const efftype_id effect_shrieking(&quot;shrieking&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f">sounds::alert</a>, <a class="el" href="monattack_8cpp.html#aaa9df9ef85dde81ec2db2f3997f4f458">effect_shrieking</a>, <a class="el" href="creature_8cpp_source.html#l01173">Creature::has_effect()</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="monattack_8cpp_source.html#l04436">parrot_common()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, and <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>, <a class="el" href="monattack_8cpp_source.html#l04460">parrot_at_danger()</a>, and <a class="el" href="monattack_8cpp_source.html#l04436">parrot_common()</a>.</p>

</div>
</div>
<a id="a83af85e4b61fd7722274848c33012bd6" name="a83af85e4b61fd7722274848c33012bd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83af85e4b61fd7722274848c33012bd6">&#9670;&nbsp;</a></span>parrot_at_danger()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::parrot_at_danger </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>parrot</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l04460">4460</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04461" name="l04461"></a><span class="lineno"> 4461</span>{</div>
<div class="line"><a id="l04462" name="l04462"></a><span class="lineno"> 4462</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classmonster.html">monster</a> &amp;<a class="code hl_class" href="classmonster.html">monster</a> : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;all_monsters() ) {</div>
<div class="line"><a id="l04463" name="l04463"></a><span class="lineno"> 4463</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 20 ) &amp;&amp; ( <a class="code hl_class" href="classmonster.html">monster</a>.<a class="code hl_variable" href="classmonster.html#a8e30fdb59bcecd8ecb8a609431cb6caf">faction</a>-&gt;<a class="code hl_function" href="classmonfaction.html#ad48af5228028d52c07f480e5d7c2bf93">attitude</a>( <a class="code hl_function" href="namespacemattack.html#aacb645c1d5704bc277f2b0b568862950">parrot</a>-&gt;faction ) == <a class="code hl_enumvalue" href="monfaction_8h.html#ac5f72a9f6d69d1d5c271af54b16f9ab0a80fd3bb623381aa87ca80a3d035d3867">mf_attitude::MFA_HATE</a> ||</div>
<div class="line"><a id="l04464" name="l04464"></a><span class="lineno"> 4464</span>                              ( <a class="code hl_class" href="classmonster.html">monster</a>.<a class="code hl_variable" href="classmonster.html#a7b22fe8719e4783fe1896429cedefa8d">anger</a> &gt; 0 &amp;&amp;</div>
<div class="line"><a id="l04465" name="l04465"></a><span class="lineno"> 4465</span>                                <a class="code hl_class" href="classmonster.html">monster</a>.<a class="code hl_variable" href="classmonster.html#a8e30fdb59bcecd8ecb8a609431cb6caf">faction</a>-&gt;<a class="code hl_function" href="classmonfaction.html#ad48af5228028d52c07f480e5d7c2bf93">attitude</a>( <a class="code hl_function" href="namespacemattack.html#aacb645c1d5704bc277f2b0b568862950">parrot</a>-&gt;faction ) == <a class="code hl_enumvalue" href="monfaction_8h.html#ac5f72a9f6d69d1d5c271af54b16f9ab0adcca8fa22eea7cf08804958a71fb45a9">mf_attitude::MFA_BY_MOOD</a> ) ) &amp;&amp;</div>
<div class="line"><a id="l04466" name="l04466"></a><span class="lineno"> 4466</span>            <a class="code hl_function" href="namespacemattack.html#aacb645c1d5704bc277f2b0b568862950">parrot</a>-&gt;sees( <a class="code hl_class" href="classmonster.html">monster</a> ) ) {</div>
<div class="line"><a id="l04467" name="l04467"></a><span class="lineno"> 4467</span>            <a class="code hl_function" href="monattack_8cpp.html#a2ad0cc238fa2fe0693fec4c9ec60e186">parrot_common</a>( <a class="code hl_function" href="namespacemattack.html#aacb645c1d5704bc277f2b0b568862950">parrot</a> );</div>
<div class="line"><a id="l04468" name="l04468"></a><span class="lineno"> 4468</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04469" name="l04469"></a><span class="lineno"> 4469</span>        }</div>
<div class="line"><a id="l04470" name="l04470"></a><span class="lineno"> 4470</span>    }</div>
<div class="line"><a id="l04471" name="l04471"></a><span class="lineno"> 4471</span> </div>
<div class="line"><a id="l04472" name="l04472"></a><span class="lineno"> 4472</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04473" name="l04473"></a><span class="lineno"> 4473</span>}</div>
<div class="ttc" id="aclassmonfaction_html_ad48af5228028d52c07f480e5d7c2bf93"><div class="ttname"><a href="classmonfaction.html#ad48af5228028d52c07f480e5d7c2bf93">monfaction::attitude</a></div><div class="ttdeci">mf_attitude attitude(const mfaction_id &amp;other) const</div><div class="ttdef"><b>Definition:</b> <a href="monfaction_8cpp_source.html#l00106">monfaction.cpp:106</a></div></div>
<div class="ttc" id="aclassmonster_html_a8e30fdb59bcecd8ecb8a609431cb6caf"><div class="ttname"><a href="classmonster.html#a8e30fdb59bcecd8ecb8a609431cb6caf">monster::faction</a></div><div class="ttdeci">mfaction_id faction</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00475">monster.h:475</a></div></div>
<div class="ttc" id="amonfaction_8h_html_ac5f72a9f6d69d1d5c271af54b16f9ab0a80fd3bb623381aa87ca80a3d035d3867"><div class="ttname"><a href="monfaction_8h.html#ac5f72a9f6d69d1d5c271af54b16f9ab0a80fd3bb623381aa87ca80a3d035d3867">MFA_HATE</a></div><div class="ttdeci">@ MFA_HATE</div><div class="ttdef"><b>Definition:</b> <a href="monfaction_8h_source.html#l00016">monfaction.h:15</a></div></div>
<div class="ttc" id="amonfaction_8h_html_ac5f72a9f6d69d1d5c271af54b16f9ab0adcca8fa22eea7cf08804958a71fb45a9"><div class="ttname"><a href="monfaction_8h.html#ac5f72a9f6d69d1d5c271af54b16f9ab0adcca8fa22eea7cf08804958a71fb45a9">MFA_BY_MOOD</a></div><div class="ttdeci">@ MFA_BY_MOOD</div><div class="ttdef"><b>Definition:</b> <a href="monfaction_8h_source.html#l00012">monfaction.h:12</a></div></div>
<div class="ttc" id="anamespacemattack_html_aacb645c1d5704bc277f2b0b568862950"><div class="ttname"><a href="namespacemattack.html#aacb645c1d5704bc277f2b0b568862950">mattack::parrot</a></div><div class="ttdeci">bool parrot(monster *z)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l04445">monattack.cpp:4445</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monster_8h_source.html#l00472">monster::anger</a>, <a class="el" href="monfaction_8cpp_source.html#l00106">monfaction::attitude()</a>, <a class="el" href="monster_8h_source.html#l00475">monster::faction</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="monfaction_8h_source.html#l00012">MFA_BY_MOOD</a>, <a class="el" href="monfaction_8h_source.html#l00015">MFA_HATE</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="monattack_8cpp_source.html#l04445">parrot()</a>, and <a class="el" href="monattack_8cpp_source.html#l04436">parrot_common()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a84fbcd5aaae349e064e227b71ff7ddb2" name="a84fbcd5aaae349e064e227b71ff7ddb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84fbcd5aaae349e064e227b71ff7ddb2">&#9670;&nbsp;</a></span>photograph()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::photograph </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l03110">3110</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03111" name="l03111"></a><span class="lineno"> 3111</span>{</div>
<div class="line"><a id="l03112" name="l03112"></a><span class="lineno"> 3112</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="monattack_8cpp.html#a34c6e57d4263c7f17f18497bf390808c">within_visual_range</a>( z, 6 ) ) {</div>
<div class="line"><a id="l03113" name="l03113"></a><span class="lineno"> 3113</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03114" name="l03114"></a><span class="lineno"> 3114</span>    }</div>
<div class="line"><a id="l03115" name="l03115"></a><span class="lineno"> 3115</span> </div>
<div class="line"><a id="l03116" name="l03116"></a><span class="lineno"> 3116</span>    <span class="comment">// Badges should NOT be swappable between roles.</span></div>
<div class="line"><a id="l03117" name="l03117"></a><span class="lineno"> 3117</span>    <span class="comment">// Hence separate checking.</span></div>
<div class="line"><a id="l03118" name="l03118"></a><span class="lineno"> 3118</span>    <span class="comment">// If you are in fact listed as a police officer</span></div>
<div class="line"><a id="l03119" name="l03119"></a><span class="lineno"> 3119</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_trait( <a class="code hl_variable" href="monattack_8cpp.html#adecd2e943983e697e08cafe5115b8ef6">trait_PROF_POLICE</a> ) ) {</div>
<div class="line"><a id="l03120" name="l03120"></a><span class="lineno"> 3120</span>        <span class="comment">// And you&#39;re wearing your badge</span></div>
<div class="line"><a id="l03121" name="l03121"></a><span class="lineno"> 3121</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.is_wearing( <a class="code hl_variable" href="monattack_8cpp.html#a6105866e5af8c4856ec1ea9f9425ebe0">itype_badge_deputy</a> ) ) {</div>
<div class="line"><a id="l03122" name="l03122"></a><span class="lineno"> 3122</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a id="l03123" name="l03123"></a><span class="lineno"> 3123</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s flashes a LED and departs.  Human officer on scene.&quot;</span> ),</div>
<div class="line"><a id="l03124" name="l03124"></a><span class="lineno"> 3124</span>                         z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l03125" name="l03125"></a><span class="lineno"> 3125</span>                z-&gt;<a class="code hl_variable" href="classmonster.html#a55f85ad0bf2f4d114107820910a42c0a">no_corpse_quiet</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03126" name="l03126"></a><span class="lineno"> 3126</span>                z-&gt;<a class="code hl_variable" href="classmonster.html#a2f9d03ffee51f0193855490a75511596">no_extra_death_drops</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03127" name="l03127"></a><span class="lineno"> 3127</span>                z-&gt;<a class="code hl_function" href="classmonster.html#a82ae41773b05af94d4b678cb33bfb329">die</a>( <span class="keyword">nullptr</span> );</div>
<div class="line"><a id="l03128" name="l03128"></a><span class="lineno"> 3128</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03129" name="l03129"></a><span class="lineno"> 3129</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03130" name="l03130"></a><span class="lineno"> 3130</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a id="l03131" name="l03131"></a><span class="lineno"> 3131</span>                         <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s acknowledges you as an officer responding, but hangs around to watch.&quot;</span> ),</div>
<div class="line"><a id="l03132" name="l03132"></a><span class="lineno"> 3132</span>                         z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l03133" name="l03133"></a><span class="lineno"> 3133</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Probably some now-obsolete Internal Affairs subroutine…&quot;</span> ) );</div>
<div class="line"><a id="l03134" name="l03134"></a><span class="lineno"> 3134</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03135" name="l03135"></a><span class="lineno"> 3135</span>            }</div>
<div class="line"><a id="l03136" name="l03136"></a><span class="lineno"> 3136</span>        }</div>
<div class="line"><a id="l03137" name="l03137"></a><span class="lineno"> 3137</span>    }</div>
<div class="line"><a id="l03138" name="l03138"></a><span class="lineno"> 3138</span> </div>
<div class="line"><a id="l03139" name="l03139"></a><span class="lineno"> 3139</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_trait( <a class="code hl_variable" href="monattack_8cpp.html#a857db39dc5d2b93a4b62769c0309e809">trait_PROF_PD_DET</a> ) ) {</div>
<div class="line"><a id="l03140" name="l03140"></a><span class="lineno"> 3140</span>        <span class="comment">// And you have your shield on</span></div>
<div class="line"><a id="l03141" name="l03141"></a><span class="lineno"> 3141</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.is_wearing( <a class="code hl_variable" href="monattack_8cpp.html#ab1c024712f36765b7cebd4050c688518">itype_badge_detective</a> ) ) {</div>
<div class="line"><a id="l03142" name="l03142"></a><span class="lineno"> 3142</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a id="l03143" name="l03143"></a><span class="lineno"> 3143</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s flashes a LED and departs.  Human officer on scene.&quot;</span> ),</div>
<div class="line"><a id="l03144" name="l03144"></a><span class="lineno"> 3144</span>                         z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l03145" name="l03145"></a><span class="lineno"> 3145</span>                z-&gt;<a class="code hl_variable" href="classmonster.html#a55f85ad0bf2f4d114107820910a42c0a">no_corpse_quiet</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03146" name="l03146"></a><span class="lineno"> 3146</span>                z-&gt;<a class="code hl_variable" href="classmonster.html#a2f9d03ffee51f0193855490a75511596">no_extra_death_drops</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03147" name="l03147"></a><span class="lineno"> 3147</span>                z-&gt;<a class="code hl_function" href="classmonster.html#a82ae41773b05af94d4b678cb33bfb329">die</a>( <span class="keyword">nullptr</span> );</div>
<div class="line"><a id="l03148" name="l03148"></a><span class="lineno"> 3148</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03149" name="l03149"></a><span class="lineno"> 3149</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03150" name="l03150"></a><span class="lineno"> 3150</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a id="l03151" name="l03151"></a><span class="lineno"> 3151</span>                         <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s acknowledges you as an officer responding, but hangs around to watch.&quot;</span> ),</div>
<div class="line"><a id="l03152" name="l03152"></a><span class="lineno"> 3152</span>                         z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l03153" name="l03153"></a><span class="lineno"> 3153</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Ops used to do that in case you needed backup…&quot;</span> ) );</div>
<div class="line"><a id="l03154" name="l03154"></a><span class="lineno"> 3154</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03155" name="l03155"></a><span class="lineno"> 3155</span>            }</div>
<div class="line"><a id="l03156" name="l03156"></a><span class="lineno"> 3156</span>        }</div>
<div class="line"><a id="l03157" name="l03157"></a><span class="lineno"> 3157</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_trait( <a class="code hl_variable" href="monattack_8cpp.html#aabb2e335bb42d0f2b253b081a3ffe4b8">trait_PROF_SWAT</a> ) ) {</div>
<div class="line"><a id="l03158" name="l03158"></a><span class="lineno"> 3158</span>        <span class="comment">// And you&#39;re wearing your badge</span></div>
<div class="line"><a id="l03159" name="l03159"></a><span class="lineno"> 3159</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.is_wearing( <a class="code hl_variable" href="monattack_8cpp.html#add198eac2ed74cb6bdcbebddc0eb40d0">itype_badge_swat</a> ) ) {</div>
<div class="line"><a id="l03160" name="l03160"></a><span class="lineno"> 3160</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a id="l03161" name="l03161"></a><span class="lineno"> 3161</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s flashes a LED and departs.  SWAT&#39;s working the area.&quot;</span> ),</div>
<div class="line"><a id="l03162" name="l03162"></a><span class="lineno"> 3162</span>                         z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l03163" name="l03163"></a><span class="lineno"> 3163</span>                z-&gt;<a class="code hl_variable" href="classmonster.html#a55f85ad0bf2f4d114107820910a42c0a">no_corpse_quiet</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03164" name="l03164"></a><span class="lineno"> 3164</span>                z-&gt;<a class="code hl_variable" href="classmonster.html#a2f9d03ffee51f0193855490a75511596">no_extra_death_drops</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03165" name="l03165"></a><span class="lineno"> 3165</span>                z-&gt;<a class="code hl_function" href="classmonster.html#a82ae41773b05af94d4b678cb33bfb329">die</a>( <span class="keyword">nullptr</span> );</div>
<div class="line"><a id="l03166" name="l03166"></a><span class="lineno"> 3166</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03167" name="l03167"></a><span class="lineno"> 3167</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03168" name="l03168"></a><span class="lineno"> 3168</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s acknowledges you as SWAT onsite, but hangs around to watch.&quot;</span> ),</div>
<div class="line"><a id="l03169" name="l03169"></a><span class="lineno"> 3169</span>                         z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l03170" name="l03170"></a><span class="lineno"> 3170</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Probably some now-obsolete Internal Affairs subroutine…&quot;</span> ) );</div>
<div class="line"><a id="l03171" name="l03171"></a><span class="lineno"> 3171</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03172" name="l03172"></a><span class="lineno"> 3172</span>            }</div>
<div class="line"><a id="l03173" name="l03173"></a><span class="lineno"> 3173</span>        }</div>
<div class="line"><a id="l03174" name="l03174"></a><span class="lineno"> 3174</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_trait( <a class="code hl_variable" href="monattack_8cpp.html#ab21bb4345b299803f6e7a51c0841d4ff">trait_PROF_CYBERCO</a> ) ) {</div>
<div class="line"><a id="l03175" name="l03175"></a><span class="lineno"> 3175</span>        <span class="comment">// And you&#39;re wearing your badge</span></div>
<div class="line"><a id="l03176" name="l03176"></a><span class="lineno"> 3176</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.is_wearing( <a class="code hl_variable" href="monattack_8cpp.html#a7fdf58b49233f57637b45499a17cbfd7">itype_badge_cybercop</a> ) ) {</div>
<div class="line"><a id="l03177" name="l03177"></a><span class="lineno"> 3177</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a id="l03178" name="l03178"></a><span class="lineno"> 3178</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s winks a LED and departs.  One machine to another?&quot;</span> ),</div>
<div class="line"><a id="l03179" name="l03179"></a><span class="lineno"> 3179</span>                         z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l03180" name="l03180"></a><span class="lineno"> 3180</span>                z-&gt;<a class="code hl_variable" href="classmonster.html#a55f85ad0bf2f4d114107820910a42c0a">no_corpse_quiet</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03181" name="l03181"></a><span class="lineno"> 3181</span>                z-&gt;<a class="code hl_variable" href="classmonster.html#a2f9d03ffee51f0193855490a75511596">no_extra_death_drops</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03182" name="l03182"></a><span class="lineno"> 3182</span>                z-&gt;<a class="code hl_function" href="classmonster.html#a82ae41773b05af94d4b678cb33bfb329">die</a>( <span class="keyword">nullptr</span> );</div>
<div class="line"><a id="l03183" name="l03183"></a><span class="lineno"> 3183</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03184" name="l03184"></a><span class="lineno"> 3184</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03185" name="l03185"></a><span class="lineno"> 3185</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a id="l03186" name="l03186"></a><span class="lineno"> 3186</span>                         <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s acknowledges you as an officer responding, but hangs around to watch.&quot;</span> ),</div>
<div class="line"><a id="l03187" name="l03187"></a><span class="lineno"> 3187</span>                         z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l03188" name="l03188"></a><span class="lineno"> 3188</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Apparently yours aren&#39;t the only systems kept alive post-apocalypse.&quot;</span> ) );</div>
<div class="line"><a id="l03189" name="l03189"></a><span class="lineno"> 3189</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03190" name="l03190"></a><span class="lineno"> 3190</span>            }</div>
<div class="line"><a id="l03191" name="l03191"></a><span class="lineno"> 3191</span>        }</div>
<div class="line"><a id="l03192" name="l03192"></a><span class="lineno"> 3192</span>    }</div>
<div class="line"><a id="l03193" name="l03193"></a><span class="lineno"> 3193</span> </div>
<div class="line"><a id="l03194" name="l03194"></a><span class="lineno"> 3194</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_trait( <a class="code hl_variable" href="monattack_8cpp.html#a455a4d2f34cc87afe236aeefa379222c">trait_PROF_FED</a> ) ) {</div>
<div class="line"><a id="l03195" name="l03195"></a><span class="lineno"> 3195</span>        <span class="comment">// And you&#39;re wearing your badge</span></div>
<div class="line"><a id="l03196" name="l03196"></a><span class="lineno"> 3196</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.is_wearing( <a class="code hl_variable" href="monattack_8cpp.html#a05e5a15a0cd87b65590515b139e8abd2">itype_badge_marshal</a> ) ) {</div>
<div class="line"><a id="l03197" name="l03197"></a><span class="lineno"> 3197</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s flashes a LED and departs.  The Feds got this.&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l03198" name="l03198"></a><span class="lineno"> 3198</span>            z-&gt;<a class="code hl_variable" href="classmonster.html#a55f85ad0bf2f4d114107820910a42c0a">no_corpse_quiet</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03199" name="l03199"></a><span class="lineno"> 3199</span>            z-&gt;<a class="code hl_variable" href="classmonster.html#a2f9d03ffee51f0193855490a75511596">no_extra_death_drops</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03200" name="l03200"></a><span class="lineno"> 3200</span>            z-&gt;<a class="code hl_function" href="classmonster.html#a82ae41773b05af94d4b678cb33bfb329">die</a>( <span class="keyword">nullptr</span> );</div>
<div class="line"><a id="l03201" name="l03201"></a><span class="lineno"> 3201</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03202" name="l03202"></a><span class="lineno"> 3202</span>        }</div>
<div class="line"><a id="l03203" name="l03203"></a><span class="lineno"> 3203</span>    }</div>
<div class="line"><a id="l03204" name="l03204"></a><span class="lineno"> 3204</span> </div>
<div class="line"><a id="l03205" name="l03205"></a><span class="lineno"> 3205</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> || <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.weapon.typeId() == <a class="code hl_variable" href="monattack_8cpp.html#a8036e3cd7d05e67da5e6e9ddc4caec9b">itype_e_handcuffs</a> ) {</div>
<div class="line"><a id="l03206" name="l03206"></a><span class="lineno"> 3206</span>        <span class="comment">// Friendly (hacked?) bot ignore the player. Arrested suspect ignored too.</span></div>
<div class="line"><a id="l03207" name="l03207"></a><span class="lineno"> 3207</span>        <span class="comment">// TODO: might need to be revisited when it can target npcs.</span></div>
<div class="line"><a id="l03208" name="l03208"></a><span class="lineno"> 3208</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03209" name="l03209"></a><span class="lineno"> 3209</span>    }</div>
<div class="line"><a id="l03210" name="l03210"></a><span class="lineno"> 3210</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 150;</div>
<div class="line"><a id="l03211" name="l03211"></a><span class="lineno"> 3211</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s takes your picture!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l03212" name="l03212"></a><span class="lineno"> 3212</span>    <span class="comment">// TODO: Make the player known to the faction</span></div>
<div class="line"><a id="l03213" name="l03213"></a><span class="lineno"> 3213</span>    std::string cname = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;…database connection lost!&quot;</span> );</div>
<div class="line"><a id="l03214" name="l03214"></a><span class="lineno"> 3214</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 6 ) ) {</div>
<div class="line"><a id="l03215" name="l03215"></a><span class="lineno"> 3215</span>        cname = <a class="code hl_function" href="namespaceName.html#aee8234c627357de0efa0dd608a45c970">Name::generate</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.male );</div>
<div class="line"><a id="l03216" name="l03216"></a><span class="lineno"> 3216</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a id="l03217" name="l03217"></a><span class="lineno"> 3217</span>        cname = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.name;</div>
<div class="line"><a id="l03218" name="l03218"></a><span class="lineno"> 3218</span>    }</div>
<div class="line"><a id="l03219" name="l03219"></a><span class="lineno"> 3219</span>    <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 15, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f">sounds::sound_t::alert</a>,</div>
<div class="line"><a id="l03220" name="l03220"></a><span class="lineno"> 3220</span>                   <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;a robotic voice boom, \&quot;Citizen %s!\&quot;&quot;</span> ), cname ), <span class="keyword">false</span>, <span class="stringliteral">&quot;speech&quot;</span>,</div>
<div class="line"><a id="l03221" name="l03221"></a><span class="lineno"> 3221</span>                   z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a>.<a class="code hl_function" href="classstring__id.html#aa7dabc565f0c067e1a237ea224b18f93">str</a>() );</div>
<div class="line"><a id="l03222" name="l03222"></a><span class="lineno"> 3222</span> </div>
<div class="line"><a id="l03223" name="l03223"></a><span class="lineno"> 3223</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.weapon.is_gun() ) {</div>
<div class="line"><a id="l03224" name="l03224"></a><span class="lineno"> 3224</span>        <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 15, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f">sounds::sound_t::alert</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;\&quot;Drop your gun!  Now!\&quot;&quot;</span> ) );</div>
<div class="line"><a id="l03225" name="l03225"></a><span class="lineno"> 3225</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.is_armed() ) {</div>
<div class="line"><a id="l03226" name="l03226"></a><span class="lineno"> 3226</span>        <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 15, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f">sounds::sound_t::alert</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;\&quot;Drop your weapon!  Now!\&quot;&quot;</span> ) );</div>
<div class="line"><a id="l03227" name="l03227"></a><span class="lineno"> 3227</span>    }</div>
<div class="line"><a id="l03228" name="l03228"></a><span class="lineno"> 3228</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structSpeechBubble.html">SpeechBubble</a> &amp;<a class="code hl_variable" href="speech_8cpp.html#a67a91181969e507f1132304946b6360b">speech</a> = <a class="code hl_function" href="speech_8cpp.html#a576ec6cec2f290b1c65170befdd4b66d">get_speech</a>( z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a>.<a class="code hl_function" href="classstring__id.html#aa7dabc565f0c067e1a237ea224b18f93">str</a>() );</div>
<div class="line"><a id="l03229" name="l03229"></a><span class="lineno"> 3229</span>    <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), <a class="code hl_variable" href="speech_8cpp.html#a67a91181969e507f1132304946b6360b">speech</a>.volume, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f">sounds::sound_t::alert</a>, <a class="code hl_variable" href="speech_8cpp.html#a67a91181969e507f1132304946b6360b">speech</a>.text.translated() );</div>
<div class="line"><a id="l03230" name="l03230"></a><span class="lineno"> 3230</span>    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;timed_events.add( <a class="code hl_enumvalue" href="timed__event_8h.html#ad10eb56251f11e9a5694491529afbcc7af7283062a67bb80a56dcf3cc8bcb6ce8">TIMED_EVENT_ROBOT_ATTACK</a>, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> + <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 15_turns, 30_turns ), 0,</div>
<div class="line"><a id="l03231" name="l03231"></a><span class="lineno"> 3231</span>                         <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.global_sm_location() );</div>
<div class="line"><a id="l03232" name="l03232"></a><span class="lineno"> 3232</span> </div>
<div class="line"><a id="l03233" name="l03233"></a><span class="lineno"> 3233</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03234" name="l03234"></a><span class="lineno"> 3234</span>}</div>
<div class="ttc" id="aclassmonster_html_a2f9d03ffee51f0193855490a75511596"><div class="ttname"><a href="classmonster.html#a2f9d03ffee51f0193855490a75511596">monster::no_extra_death_drops</a></div><div class="ttdeci">bool no_extra_death_drops</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00480">monster.h:480</a></div></div>
<div class="ttc" id="aclassmonster_html_a55f85ad0bf2f4d114107820910a42c0a"><div class="ttname"><a href="classmonster.html#a55f85ad0bf2f4d114107820910a42c0a">monster::no_corpse_quiet</a></div><div class="ttdeci">bool no_corpse_quiet</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00482">monster.h:482</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a05e5a15a0cd87b65590515b139e8abd2"><div class="ttname"><a href="monattack_8cpp.html#a05e5a15a0cd87b65590515b139e8abd2">itype_badge_marshal</a></div><div class="ttdeci">static const itype_id itype_badge_marshal(&quot;badge_marshal&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a455a4d2f34cc87afe236aeefa379222c"><div class="ttname"><a href="monattack_8cpp.html#a455a4d2f34cc87afe236aeefa379222c">trait_PROF_FED</a></div><div class="ttdeci">static const trait_id trait_PROF_FED(&quot;PROF_FED&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a6105866e5af8c4856ec1ea9f9425ebe0"><div class="ttname"><a href="monattack_8cpp.html#a6105866e5af8c4856ec1ea9f9425ebe0">itype_badge_deputy</a></div><div class="ttdeci">static const itype_id itype_badge_deputy(&quot;badge_deputy&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a7fdf58b49233f57637b45499a17cbfd7"><div class="ttname"><a href="monattack_8cpp.html#a7fdf58b49233f57637b45499a17cbfd7">itype_badge_cybercop</a></div><div class="ttdeci">static const itype_id itype_badge_cybercop(&quot;badge_cybercop&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a857db39dc5d2b93a4b62769c0309e809"><div class="ttname"><a href="monattack_8cpp.html#a857db39dc5d2b93a4b62769c0309e809">trait_PROF_PD_DET</a></div><div class="ttdeci">static const trait_id trait_PROF_PD_DET(&quot;PROF_PD_DET&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_aabb2e335bb42d0f2b253b081a3ffe4b8"><div class="ttname"><a href="monattack_8cpp.html#aabb2e335bb42d0f2b253b081a3ffe4b8">trait_PROF_SWAT</a></div><div class="ttdeci">static const trait_id trait_PROF_SWAT(&quot;PROF_SWAT&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_ab1c024712f36765b7cebd4050c688518"><div class="ttname"><a href="monattack_8cpp.html#ab1c024712f36765b7cebd4050c688518">itype_badge_detective</a></div><div class="ttdeci">static const itype_id itype_badge_detective(&quot;badge_detective&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_ab21bb4345b299803f6e7a51c0841d4ff"><div class="ttname"><a href="monattack_8cpp.html#ab21bb4345b299803f6e7a51c0841d4ff">trait_PROF_CYBERCO</a></div><div class="ttdeci">static const trait_id trait_PROF_CYBERCO(&quot;PROF_CYBERCO&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_add198eac2ed74cb6bdcbebddc0eb40d0"><div class="ttname"><a href="monattack_8cpp.html#add198eac2ed74cb6bdcbebddc0eb40d0">itype_badge_swat</a></div><div class="ttdeci">static const itype_id itype_badge_swat(&quot;badge_swat&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_adecd2e943983e697e08cafe5115b8ef6"><div class="ttname"><a href="monattack_8cpp.html#adecd2e943983e697e08cafe5115b8ef6">trait_PROF_POLICE</a></div><div class="ttdeci">static const trait_id trait_PROF_POLICE(&quot;PROF_POLICE&quot;)</div></div>
<div class="ttc" id="aspeech_8cpp_html_a67a91181969e507f1132304946b6360b"><div class="ttname"><a href="speech_8cpp.html#a67a91181969e507f1132304946b6360b">speech</a></div><div class="ttdeci">static std::map&lt; std::string, std::vector&lt; SpeechBubble &gt; &gt; speech</div><div class="ttdef"><b>Definition:</b> <a href="speech_8cpp_source.html#l00012">speech.cpp:12</a></div></div>
<div class="ttc" id="atimed__event_8h_html_ad10eb56251f11e9a5694491529afbcc7af7283062a67bb80a56dcf3cc8bcb6ce8"><div class="ttname"><a href="timed__event_8h.html#ad10eb56251f11e9a5694491529afbcc7af7283062a67bb80a56dcf3cc8bcb6ce8">TIMED_EVENT_ROBOT_ATTACK</a></div><div class="ttdeci">@ TIMED_EVENT_ROBOT_ATTACK</div><div class="ttdef"><b>Definition:</b> <a href="timed__event_8h_source.html#l00014">timed_event.h:14</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f">sounds::alert</a>, <a class="el" href="monster_8cpp_source.html#l02243">monster::die()</a>, <a class="el" href="monster_8h_source.html#l00471">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="name_8cpp_source.html#l00128">Name::generate()</a>, <a class="el" href="speech_8cpp_source.html#l00031">get_speech()</a>, <a class="el" href="mtype_8h_source.html#l00240">mtype::id</a>, <a class="el" href="monattack_8cpp.html#a7fdf58b49233f57637b45499a17cbfd7">itype_badge_cybercop</a>, <a class="el" href="monattack_8cpp.html#a6105866e5af8c4856ec1ea9f9425ebe0">itype_badge_deputy</a>, <a class="el" href="monattack_8cpp.html#ab1c024712f36765b7cebd4050c688518">itype_badge_detective</a>, <a class="el" href="monattack_8cpp.html#a05e5a15a0cd87b65590515b139e8abd2">itype_badge_marshal</a>, <a class="el" href="monattack_8cpp.html#add198eac2ed74cb6bdcbebddc0eb40d0">itype_badge_swat</a>, <a class="el" href="monattack_8cpp.html#a8036e3cd7d05e67da5e6e9ddc4caec9b">itype_e_handcuffs</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="monster_8h_source.html#l00482">monster::no_corpse_quiet</a>, <a class="el" href="monster_8h_source.html#l00480">monster::no_extra_death_drops</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, <a class="el" href="speech_8cpp_source.html#l00012">speech</a>, <a class="el" href="string__id_8h_source.html#l00255">string_id&lt; T &gt;::str()</a>, <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>, <a class="el" href="timed__event_8h_source.html#l00014">TIMED_EVENT_ROBOT_ATTACK</a>, <a class="el" href="monattack_8cpp.html#ab21bb4345b299803f6e7a51c0841d4ff">trait_PROF_CYBERCO</a>, <a class="el" href="monattack_8cpp.html#a455a4d2f34cc87afe236aeefa379222c">trait_PROF_FED</a>, <a class="el" href="monattack_8cpp.html#a857db39dc5d2b93a4b62769c0309e809">trait_PROF_PD_DET</a>, <a class="el" href="monattack_8cpp.html#adecd2e943983e697e08cafe5115b8ef6">trait_PROF_POLICE</a>, <a class="el" href="monattack_8cpp.html#aabb2e335bb42d0f2b253b081a3ffe4b8">trait_PROF_SWAT</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, and <a class="el" href="monattack_8cpp_source.html#l00209">within_visual_range()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a7304ed99145452654c6e4ce3456f601e" name="a7304ed99145452654c6e4ce3456f601e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7304ed99145452654c6e4ce3456f601e">&#9670;&nbsp;</a></span>plant()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::plant </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l02204">2204</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02205" name="l02205"></a><span class="lineno"> 2205</span>{</div>
<div class="line"><a id="l02206" name="l02206"></a><span class="lineno"> 2206</span>    <a class="code hl_class" href="classfungal__effects.html">fungal_effects</a> fe( *<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>, <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m );</div>
<div class="line"><a id="l02207" name="l02207"></a><span class="lineno"> 2207</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l02208" name="l02208"></a><span class="lineno"> 2208</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s suddenly splits and bursts!&quot;</span> ),</div>
<div class="line"><a id="l02209" name="l02209"></a><span class="lineno"> 2209</span>                 z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02210" name="l02210"></a><span class="lineno"> 2210</span>    }</div>
<div class="line"><a id="l02211" name="l02211"></a><span class="lineno"> 2211</span>    z-&gt;<a class="code hl_function" href="classmonster.html#a98c421c82c34706735f13afe25ea7f1f">set_hp</a>( 0 );</div>
<div class="line"><a id="l02212" name="l02212"></a><span class="lineno"> 2212</span>    fe.spread_fungus( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>() );</div>
<div class="line"><a id="l02213" name="l02213"></a><span class="lineno"> 2213</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;p : <a class="code hl_function" href="coordinates_8h.html#a13a12943d34d5f17e6c3b4e730659fc6">closest_points_first</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 1 ) ) {</div>
<div class="line"><a id="l02214" name="l02214"></a><span class="lineno"> 2214</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a id="l02215" name="l02215"></a><span class="lineno"> 2215</span>            fe.fungalize( p, z );</div>
<div class="line"><a id="l02216" name="l02216"></a><span class="lineno"> 2216</span>        }</div>
<div class="line"><a id="l02217" name="l02217"></a><span class="lineno"> 2217</span>    }</div>
<div class="line"><a id="l02218" name="l02218"></a><span class="lineno"> 2218</span> </div>
<div class="line"><a id="l02219" name="l02219"></a><span class="lineno"> 2219</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02220" name="l02220"></a><span class="lineno"> 2220</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="coordinates_8h_source.html#l00596">closest_points_first()</a>, <a class="el" href="fungal__effects_8cpp_source.html#l00065">fungal_effects::fungalize()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="monster_8cpp_source.html#l01631">monster::set_hp()</a>, and <a class="el" href="fungal__effects_8cpp_source.html#l00242">fungal_effects::spread_fungus()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>, and <a class="el" href="monattack_8cpp_source.html#l01601">triffid_heartbeat()</a>.</p>

</div>
</div>
<a id="a4f1b44ab85e39bcf108530a2f77551b3" name="a4f1b44ab85e39bcf108530a2f77551b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f1b44ab85e39bcf108530a2f77551b3">&#9670;&nbsp;</a></span>pull_metal_weapon()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::pull_metal_weapon </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
Strength increases resistance to pull_metal_weapon special attack Melee increases resistance to pull_metal_weapon special attack 
<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l00781">781</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>{<span class="comment"></span></div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span><span class="comment">    ////////////////////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span><span class="comment"></span>    <span class="comment">// Constants and Configuration</span></div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span> </div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>    <span class="comment">// max distance that &quot;pull_metal_weapon&quot; can be applied to the target.</span></div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>    <span class="keyword">constexpr</span> <span class="keyword">auto</span> max_distance = 12;</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span> </div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>    <span class="comment">// attack movement costs</span></div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>    <span class="keyword">constexpr</span> <span class="keywordtype">int</span> att_cost_pull = 150;</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span> </div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>    <span class="comment">// minimum str to resist &quot;pull_metal_weapon&quot;</span></div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>    <span class="keyword">constexpr</span> <span class="keywordtype">int</span> min_str = 4;</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span> </div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>    }</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span> </div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>    <span class="comment">// Can&#39;t see/reach target, no attack</span></div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) || !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.clear_path( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>(),</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>            max_distance, 1, 100 ) ) {</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>    }</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>    <a class="code hl_class" href="classplayer.html">player</a> *foe = <span class="keyword">dynamic_cast&lt;</span> <a class="code hl_class" href="classplayer.html">player</a> * <span class="keyword">&gt;</span>( target );</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>    <span class="keywordflow">if</span>( foe != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>        <span class="comment">// Wielded steel or iron items except for built-in things like bionic claws or monomolecular blade</span></div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>        <span class="keywordflow">if</span>( !foe-&gt;<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_function" href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">has_flag</a>( <span class="stringliteral">&quot;NO_UNWIELD&quot;</span> ) &amp;&amp;</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>            ( foe-&gt;<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_function" href="classitem.html#a4326944ae95f4d265c8ca1c76ed89a03">made_of</a>( <a class="code hl_typedef" href="type__id_8h.html#a569ce0271cf4ab170e63bb05658be142">material_id</a>( <span class="stringliteral">&quot;iron&quot;</span> ) ) ||</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>              foe-&gt;<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_function" href="classitem.html#a4326944ae95f4d265c8ca1c76ed89a03">made_of</a>( <a class="code hl_typedef" href="type__id_8h.html#a569ce0271cf4ab170e63bb05658be142">material_id</a>( <span class="stringliteral">&quot;hardsteel&quot;</span> ) ) ||</div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>              foe-&gt;<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_function" href="classitem.html#a4326944ae95f4d265c8ca1c76ed89a03">made_of</a>( <a class="code hl_typedef" href="type__id_8h.html#a569ce0271cf4ab170e63bb05658be142">material_id</a>( <span class="stringliteral">&quot;steel&quot;</span> ) ) ||</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>              foe-&gt;<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_function" href="classitem.html#a4326944ae95f4d265c8ca1c76ed89a03">made_of</a>( <a class="code hl_typedef" href="type__id_8h.html#a569ce0271cf4ab170e63bb05658be142">material_id</a>( <span class="stringliteral">&quot;budget_steel&quot;</span> ) ) ) ) {</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>            <span class="keywordtype">int</span> wp_skill = foe-&gt;<a class="code hl_function" href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">get_skill_level</a>( <a class="code hl_variable" href="monattack_8cpp.html#a917f093dcdc3861c86a6adf734a52641">skill_melee</a> );</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>            <span class="comment">// It takes a while</span></div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>            z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= att_cost_pull;</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>            <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a6ece335eed53daba50d8caceed1b5c4b">success</a> = 100;<span class="comment"></span></div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span><span class="comment">            ///\EFFECT_STR increases resistance to pull_metal_weapon special attack</span></div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span><span class="comment"></span>            <span class="keywordflow">if</span>( foe-&gt;<a class="code hl_variable" href="classCharacter.html#a26369a0a81eef76cfe75214d22ed32b4">str_cur</a> &gt; min_str ) {<span class="comment"></span></div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span><span class="comment">                ///\EFFECT_MELEE increases resistance to pull_metal_weapon special attack</span></div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span><span class="comment"></span>                <a class="code hl_enumvalue" href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a6ece335eed53daba50d8caceed1b5c4b">success</a> = std::max( 100 - ( 6 * ( foe-&gt;<a class="code hl_variable" href="classCharacter.html#a26369a0a81eef76cfe75214d22ed32b4">str_cur</a> - 6 ) ) - ( 6 * wp_skill ), 0 );</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>            }</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>            <span class="keyword">auto</span> m_type = foe == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ? <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a> : <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>;</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 100 ) &lt;= <a class="code hl_enumvalue" href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a6ece335eed53daba50d8caceed1b5c4b">success</a> ) {</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>                target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( m_type, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;%s is pulled away from your hands!&quot;</span> ),</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>                                               <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;%s is pulled away from &lt;npcname&gt;&#39;s hands!&quot;</span> ), foe-&gt;<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>() );</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>                z-&gt;<a class="code hl_function" href="classmonster.html#a6a50c1ca1b7405a717c95bac530e9e07">add_item</a>( foe-&gt;<a class="code hl_function" href="classCharacter.html#a6a3141afedc8744a698f5f2a498b9b12">remove_weapon</a>() );</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>                <span class="keywordflow">if</span>( foe-&gt;<a class="code hl_function" href="classCharacter.html#a6186c819cc348b5a060e140b5bab8226">has_activity</a>( <a class="code hl_variable" href="monattack_8cpp.html#a475d61c972bace437e3341103ee5e17c">ACT_RELOAD</a> ) ) {</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>                    foe-&gt;<a class="code hl_function" href="classCharacter.html#a597968eba450c923b56a1c9cac1676dc">cancel_activity</a>();</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>                }</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>                target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( m_type,</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>                                               <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s unsuccessfully attempts to pull your weapon away.&quot;</span> ),</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>                                               <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s unsuccessfully attempts to pull &lt;npcname&gt;&#39;s weapon away.&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>            }</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>        }</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>    }</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span> </div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>}</div>
<div class="ttc" id="aclassCharacter_html_a26369a0a81eef76cfe75214d22ed32b4"><div class="ttname"><a href="classCharacter.html#a26369a0a81eef76cfe75214d22ed32b4">Character::str_cur</a></div><div class="ttdeci">int str_cur</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00304">character.h:304</a></div></div>
<div class="ttc" id="aclassCharacter_html_a597968eba450c923b56a1c9cac1676dc"><div class="ttname"><a href="classCharacter.html#a597968eba450c923b56a1c9cac1676dc">Character::cancel_activity</a></div><div class="ttdeci">void cancel_activity()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09208">character.cpp:9208</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6186c819cc348b5a060e140b5bab8226"><div class="ttname"><a href="classCharacter.html#a6186c819cc348b5a060e140b5bab8226">Character::has_activity</a></div><div class="ttdeci">bool has_activity(const activity_id &amp;type) const</div><div class="ttdoc">Check if player currently has a given activity.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09198">character.cpp:9198</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6a3141afedc8744a698f5f2a498b9b12"><div class="ttname"><a href="classCharacter.html#a6a3141afedc8744a698f5f2a498b9b12">Character::remove_weapon</a></div><div class="ttdeci">item remove_weapon()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02549">character.cpp:2549</a></div></div>
<div class="ttc" id="aclassitem_html_a4326944ae95f4d265c8ca1c76ed89a03"><div class="ttname"><a href="classitem.html#a4326944ae95f4d265c8ca1c76ed89a03">item::made_of</a></div><div class="ttdeci">const std::vector&lt; material_id &gt; &amp; made_of() const</div><div class="ttdoc">The ids of all the materials this is made of.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06263">item.cpp:6263</a></div></div>
<div class="ttc" id="aclassmonster_html_a6a50c1ca1b7405a717c95bac530e9e07"><div class="ttname"><a href="classmonster.html#a6a50c1ca1b7405a717c95bac530e9e07">monster::add_item</a></div><div class="ttdeci">void add_item(const item &amp;it)</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l02643">monster.cpp:2643</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a475d61c972bace437e3341103ee5e17c"><div class="ttname"><a href="monattack_8cpp.html#a475d61c972bace437e3341103ee5e17c">ACT_RELOAD</a></div><div class="ttdeci">static const activity_id ACT_RELOAD(&quot;ACT_RELOAD&quot;)</div></div>
<div class="ttc" id="anamespacebehavior_html_af83204dc0162740f1458e4bbea975a07a6ece335eed53daba50d8caceed1b5c4b"><div class="ttname"><a href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a6ece335eed53daba50d8caceed1b5c4b">behavior::success</a></div><div class="ttdeci">@ success</div><div class="ttdef"><b>Definition:</b> <a href="behavior_8h_source.html#l00020">behavior.h:20</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="monattack_8cpp.html#a475d61c972bace437e3341103ee5e17c">ACT_RELOAD</a>, <a class="el" href="monster_8cpp_source.html#l02643">monster::add_item()</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="character_8cpp_source.html#l09208">Character::cancel_activity()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="character_8cpp_source.html#l03327">Character::get_skill_level()</a>, <a class="el" href="character_8cpp_source.html#l09198">Character::has_activity()</a>, <a class="el" href="item_8cpp_source.html#l05192">item::has_flag()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00260">m_neutral</a>, <a class="el" href="item_8cpp_source.html#l06263">item::made_of()</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="character_8cpp_source.html#l02549">Character::remove_weapon()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, <a class="el" href="monattack_8cpp.html#a917f093dcdc3861c86a6adf734a52641">skill_melee</a>, <a class="el" href="character_8h_source.html#l00304">Character::str_cur</a>, <a class="el" href="behavior_8h_source.html#l00020">behavior::success</a>, <a class="el" href="item_8cpp_source.html#l04440">item::tname()</a>, and <a class="el" href="character_8h_source.html#l01585">Character::weapon</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="abb65fd810cb5537ece604f93e297950b" name="abb65fd810cb5537ece604f93e297950b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb65fd810cb5537ece604f93e297950b">&#9670;&nbsp;</a></span>ranged_pull()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::ranged_pull </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l02555">2555</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02556" name="l02556"></a><span class="lineno"> 2556</span>{</div>
<div class="line"><a id="l02557" name="l02557"></a><span class="lineno"> 2557</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l02558" name="l02558"></a><span class="lineno"> 2558</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> || <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() ) &gt; 3 ||</div>
<div class="line"><a id="l02559" name="l02559"></a><span class="lineno"> 2559</span>        <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() ) &lt;= 1 || !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ||</div>
<div class="line"><a id="l02560" name="l02560"></a><span class="lineno"> 2560</span>        z-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a66f79823ab25161f7aabf43445a580a4">effect_grabbing</a> ) ) {</div>
<div class="line"><a id="l02561" name="l02561"></a><span class="lineno"> 2561</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02562" name="l02562"></a><span class="lineno"> 2562</span>    }</div>
<div class="line"><a id="l02563" name="l02563"></a><span class="lineno"> 2563</span> </div>
<div class="line"><a id="l02564" name="l02564"></a><span class="lineno"> 2564</span>    <a class="code hl_class" href="classplayer.html">player</a> *foe = <span class="keyword">dynamic_cast&lt;</span> <a class="code hl_class" href="classplayer.html">player</a> * <span class="keyword">&gt;</span>( target );</div>
<div class="line"><a id="l02565" name="l02565"></a><span class="lineno"> 2565</span>    std::vector&lt;tripoint&gt; <a class="code hl_function" href="mapgen_8cpp.html#a90f1f53dc044e93e7f7f9314cef1bd45">line</a> = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.find_clear_path( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() );</div>
<div class="line"><a id="l02566" name="l02566"></a><span class="lineno"> 2566</span>    <span class="keywordtype">bool</span> seen = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z );</div>
<div class="line"><a id="l02567" name="l02567"></a><span class="lineno"> 2567</span> </div>
<div class="line"><a id="l02568" name="l02568"></a><span class="lineno"> 2568</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;i : <a class="code hl_function" href="mapgen_8cpp.html#a90f1f53dc044e93e7f7f9314cef1bd45">line</a> ) {</div>
<div class="line"><a id="l02569" name="l02569"></a><span class="lineno"> 2569</span>        <span class="comment">// Player can&#39;t be pulled though bars, furniture, cars or creatures</span></div>
<div class="line"><a id="l02570" name="l02570"></a><span class="lineno"> 2570</span>        <span class="comment">// TODO: Add bashing? Currently a window is enough to prevent grabbing</span></div>
<div class="line"><a id="l02571" name="l02571"></a><span class="lineno"> 2571</span>        <span class="keywordflow">if</span>( !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_empty( i ) &amp;&amp; i != z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>() &amp;&amp; i != target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() ) {</div>
<div class="line"><a id="l02572" name="l02572"></a><span class="lineno"> 2572</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02573" name="l02573"></a><span class="lineno"> 2573</span>        }</div>
<div class="line"><a id="l02574" name="l02574"></a><span class="lineno"> 2574</span>    }</div>
<div class="line"><a id="l02575" name="l02575"></a><span class="lineno"> 2575</span> </div>
<div class="line"><a id="l02576" name="l02576"></a><span class="lineno"> 2576</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 150;</div>
<div class="line"><a id="l02577" name="l02577"></a><span class="lineno"> 2577</span> </div>
<div class="line"><a id="l02578" name="l02578"></a><span class="lineno"> 2578</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> uncanny = target-&gt;<a class="code hl_function" href="classCreature.html#afd2f1b1e5bafdef20afddbb704b1d5a5">uncanny_dodge</a>();</div>
<div class="line"><a id="l02579" name="l02579"></a><span class="lineno"> 2579</span>    <span class="keywordflow">if</span>( uncanny || <a class="code hl_function" href="namespacemattack.html#a4efb8be314551e35f69df8cf8d824174">dodge_check</a>( z, target ) ) {</div>
<div class="line"><a id="l02580" name="l02580"></a><span class="lineno"> 2580</span>        z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 200;</div>
<div class="line"><a id="l02581" name="l02581"></a><span class="lineno"> 2581</span>        <span class="keyword">auto</span> msg_type = foe == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ? <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a> : <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>;</div>
<div class="line"><a id="l02582" name="l02582"></a><span class="lineno"> 2582</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( msg_type, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s&#39;s arms fly out at you, but you dodge!&quot;</span> ),</div>
<div class="line"><a id="l02583" name="l02583"></a><span class="lineno"> 2583</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s&#39;s arms fly out at &lt;npcname&gt;, but they dodge!&quot;</span> ),</div>
<div class="line"><a id="l02584" name="l02584"></a><span class="lineno"> 2584</span>                                       z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02585" name="l02585"></a><span class="lineno"> 2585</span> </div>
<div class="line"><a id="l02586" name="l02586"></a><span class="lineno"> 2586</span>        <span class="keywordflow">if</span>( !uncanny ) {</div>
<div class="line"><a id="l02587" name="l02587"></a><span class="lineno"> 2587</span>            target-&gt;<a class="code hl_function" href="classCreature.html#af56188882e3300853d18f166738ee37a">on_dodge</a>( z, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> * 2 );</div>
<div class="line"><a id="l02588" name="l02588"></a><span class="lineno"> 2588</span>        }</div>
<div class="line"><a id="l02589" name="l02589"></a><span class="lineno"> 2589</span> </div>
<div class="line"><a id="l02590" name="l02590"></a><span class="lineno"> 2590</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02591" name="l02591"></a><span class="lineno"> 2591</span>    }</div>
<div class="line"><a id="l02592" name="l02592"></a><span class="lineno"> 2592</span> </div>
<div class="line"><a id="l02593" name="l02593"></a><span class="lineno"> 2593</span>    <span class="comment">// Limit the range in case some weird math thing would cause the target to fly past us</span></div>
<div class="line"><a id="l02594" name="l02594"></a><span class="lineno"> 2594</span>    <span class="keywordtype">int</span> range = std::min( ( z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#af346fa78fe3bff4e8e321e9046bc9717">melee_sides</a> * z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a561d4830d7f7c613c177f5880c2e15fb">melee_dice</a> ) / 10,</div>
<div class="line"><a id="l02595" name="l02595"></a><span class="lineno"> 2595</span>                          <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() ) + 1 );</div>
<div class="line"><a id="l02596" name="l02596"></a><span class="lineno"> 2596</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> pt = target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>();</div>
<div class="line"><a id="l02597" name="l02597"></a><span class="lineno"> 2597</span>    <span class="keywordflow">while</span>( range &gt; 0 ) {</div>
<div class="line"><a id="l02598" name="l02598"></a><span class="lineno"> 2598</span>        <span class="comment">// Recalculate the ray each step</span></div>
<div class="line"><a id="l02599" name="l02599"></a><span class="lineno"> 2599</span>        <span class="comment">// We can&#39;t depend on either the target position being constant (obviously),</span></div>
<div class="line"><a id="l02600" name="l02600"></a><span class="lineno"> 2600</span>        <span class="comment">// but neither on z pos staying constant, because we may want to shift the map mid-pull</span></div>
<div class="line"><a id="l02601" name="l02601"></a><span class="lineno"> 2601</span>        <span class="keyword">const</span> <a class="code hl_class" href="classunits_1_1quantity.html">units::angle</a> dir = <a class="code hl_function" href="line_8cpp.html#a22f984836636053038f43340f9c50149">coord_to_angle</a>( target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>(), z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>() );</div>
<div class="line"><a id="l02602" name="l02602"></a><span class="lineno"> 2602</span>        <a class="code hl_class" href="classtileray.html">tileray</a> tdir( dir );</div>
<div class="line"><a id="l02603" name="l02603"></a><span class="lineno"> 2603</span>        tdir.advance();</div>
<div class="line"><a id="l02604" name="l02604"></a><span class="lineno"> 2604</span>        pt.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> = target-&gt;<a class="code hl_function" href="classCreature.html#af712029844aef7ebc7af88a9242e2df0">posx</a>() + tdir.dx();</div>
<div class="line"><a id="l02605" name="l02605"></a><span class="lineno"> 2605</span>        pt.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> = target-&gt;<a class="code hl_function" href="classCreature.html#a1be20ab434ada66748d5b62fcfdbd5e4">posy</a>() + tdir.dy();</div>
<div class="line"><a id="l02606" name="l02606"></a><span class="lineno"> 2606</span>        <span class="keywordflow">if</span>( !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_empty( pt ) ) { <span class="comment">//Cancel the grab if the space is occupied by something</span></div>
<div class="line"><a id="l02607" name="l02607"></a><span class="lineno"> 2607</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02608" name="l02608"></a><span class="lineno"> 2608</span>        }</div>
<div class="line"><a id="l02609" name="l02609"></a><span class="lineno"> 2609</span> </div>
<div class="line"><a id="l02610" name="l02610"></a><span class="lineno"> 2610</span>        <span class="keywordflow">if</span>( foe != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l02611" name="l02611"></a><span class="lineno"> 2611</span>            <span class="keywordflow">if</span>( foe-&gt;<a class="code hl_variable" href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">in_vehicle</a> ) {</div>
<div class="line"><a id="l02612" name="l02612"></a><span class="lineno"> 2612</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.unboard_vehicle( foe-&gt;<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() );</div>
<div class="line"><a id="l02613" name="l02613"></a><span class="lineno"> 2613</span>            }</div>
<div class="line"><a id="l02614" name="l02614"></a><span class="lineno"> 2614</span> </div>
<div class="line"><a id="l02615" name="l02615"></a><span class="lineno"> 2615</span>            <span class="keywordflow">if</span>( target-&gt;<a class="code hl_function" href="classCreature.html#a1217a190a2e561227e831a72d4a6d390">is_player</a>() &amp;&amp; ( pt.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> &lt; <a class="code hl_variable" href="game__constants_8h.html#adf7bb33c88c44d0c1da57b5948ead4ac">HALF_MAPSIZE_X</a> || pt.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> &lt; <a class="code hl_variable" href="game__constants_8h.html#acf60bb2d3beb1625a9344e3291dda674">HALF_MAPSIZE_Y</a> ||</div>
<div class="line"><a id="l02616" name="l02616"></a><span class="lineno"> 2616</span>                                         pt.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> &gt;= <a class="code hl_variable" href="game__constants_8h.html#adf7bb33c88c44d0c1da57b5948ead4ac">HALF_MAPSIZE_X</a> + <a class="code hl_variable" href="game__constants_8h.html#a39fd8a829e3dc412646663066dbdb54c">SEEX</a> || pt.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> &gt;= <a class="code hl_variable" href="game__constants_8h.html#acf60bb2d3beb1625a9344e3291dda674">HALF_MAPSIZE_Y</a> + <a class="code hl_variable" href="game__constants_8h.html#a4cfa35de359af17f7bc6c2a424339eb5">SEEY</a> ) ) {</div>
<div class="line"><a id="l02617" name="l02617"></a><span class="lineno"> 2617</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;update_map( pt.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a>, pt.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> );</div>
<div class="line"><a id="l02618" name="l02618"></a><span class="lineno"> 2618</span>            }</div>
<div class="line"><a id="l02619" name="l02619"></a><span class="lineno"> 2619</span>        }</div>
<div class="line"><a id="l02620" name="l02620"></a><span class="lineno"> 2620</span> </div>
<div class="line"><a id="l02621" name="l02621"></a><span class="lineno"> 2621</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7f9ce537b830a5f0474c001d295c0a77">setpos</a>( pt );</div>
<div class="line"><a id="l02622" name="l02622"></a><span class="lineno"> 2622</span>        range--;</div>
<div class="line"><a id="l02623" name="l02623"></a><span class="lineno"> 2623</span>        <span class="keywordflow">if</span>( target-&gt;<a class="code hl_function" href="classCreature.html#a1217a190a2e561227e831a72d4a6d390">is_player</a>() &amp;&amp; seen ) {</div>
<div class="line"><a id="l02624" name="l02624"></a><span class="lineno"> 2624</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;invalidate_main_ui_adaptor();</div>
<div class="line"><a id="l02625" name="l02625"></a><span class="lineno"> 2625</span>            <a class="code hl_function" href="namespaceui__manager.html#a5496220e43b7d5f1b3cbbebe6cf1f83d">ui_manager::redraw_invalidated</a>();</div>
<div class="line"><a id="l02626" name="l02626"></a><span class="lineno"> 2626</span>            <a class="code hl_function" href="ncurses__def_8cpp.html#a6fd55a287e038568d2304927ec8b2449">refresh_display</a>();</div>
<div class="line"><a id="l02627" name="l02627"></a><span class="lineno"> 2627</span>        }</div>
<div class="line"><a id="l02628" name="l02628"></a><span class="lineno"> 2628</span>    }</div>
<div class="line"><a id="l02629" name="l02629"></a><span class="lineno"> 2629</span>    <span class="comment">// The monster might drag a target that&#39;s not on it&#39;s z level</span></div>
<div class="line"><a id="l02630" name="l02630"></a><span class="lineno"> 2630</span>    <span class="comment">// So if they leave them on open air, make them fall</span></div>
<div class="line"><a id="l02631" name="l02631"></a><span class="lineno"> 2631</span>    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.creature_on_trap( *target );</div>
<div class="line"><a id="l02632" name="l02632"></a><span class="lineno"> 2632</span>    <span class="keywordflow">if</span>( seen ) {</div>
<div class="line"><a id="l02633" name="l02633"></a><span class="lineno"> 2633</span>        <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a541f9bf8c2e84856ea34db43f88991b3">bodytype</a> == <span class="stringliteral">&quot;human&quot;</span> || z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a541f9bf8c2e84856ea34db43f88991b3">bodytype</a> == <span class="stringliteral">&quot;angel&quot;</span> ) {</div>
<div class="line"><a id="l02634" name="l02634"></a><span class="lineno"> 2634</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s&#39;s arms fly out and pull and grab %2$s!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l02635" name="l02635"></a><span class="lineno"> 2635</span>                     target-&gt;<a class="code hl_function" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">disp_name</a>() );</div>
<div class="line"><a id="l02636" name="l02636"></a><span class="lineno"> 2636</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02637" name="l02637"></a><span class="lineno"> 2637</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s reaches out and pulls %2$s!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l02638" name="l02638"></a><span class="lineno"> 2638</span>                     target-&gt;<a class="code hl_function" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">disp_name</a>() );</div>
<div class="line"><a id="l02639" name="l02639"></a><span class="lineno"> 2639</span>        }</div>
<div class="line"><a id="l02640" name="l02640"></a><span class="lineno"> 2640</span>    }</div>
<div class="line"><a id="l02641" name="l02641"></a><span class="lineno"> 2641</span> </div>
<div class="line"><a id="l02642" name="l02642"></a><span class="lineno"> 2642</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> prev_effect = target-&gt;<a class="code hl_function" href="classCreature.html#a70ba05a0184ff83095f639eac18f24fe">get_effect_int</a>( <a class="code hl_variable" href="monattack_8cpp.html#ae326c5e4da7f23bc429d04d215dd7c9d">effect_grabbed</a> );</div>
<div class="line"><a id="l02643" name="l02643"></a><span class="lineno"> 2643</span>    <span class="comment">//Duration needs to be at least 2, or grab will immediately be removed</span></div>
<div class="line"><a id="l02644" name="l02644"></a><span class="lineno"> 2644</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#ae326c5e4da7f23bc429d04d215dd7c9d">effect_grabbed</a>, 2_turns, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a>, prev_effect + 4 );</div>
<div class="line"><a id="l02645" name="l02645"></a><span class="lineno"> 2645</span>    z-&gt;<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a66f79823ab25161f7aabf43445a580a4">effect_grabbing</a>, 2_turns );</div>
<div class="line"><a id="l02646" name="l02646"></a><span class="lineno"> 2646</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02647" name="l02647"></a><span class="lineno"> 2647</span>}</div>
<div class="ttc" id="aclassCreature_html_a1be20ab434ada66748d5b62fcfdbd5e4"><div class="ttname"><a href="classCreature.html#a1be20ab434ada66748d5b62fcfdbd5e4">Creature::posy</a></div><div class="ttdeci">virtual int posy() const =0</div></div>
<div class="ttc" id="aclassCreature_html_a7f9ce537b830a5f0474c001d295c0a77"><div class="ttname"><a href="classCreature.html#a7f9ce537b830a5f0474c001d295c0a77">Creature::setpos</a></div><div class="ttdeci">virtual void setpos(const tripoint &amp;pos)=0</div></div>
<div class="ttc" id="aclassCreature_html_af712029844aef7ebc7af88a9242e2df0"><div class="ttname"><a href="classCreature.html#af712029844aef7ebc7af88a9242e2df0">Creature::posx</a></div><div class="ttdeci">virtual int posx() const =0</div></div>
<div class="ttc" id="aclasstileray_html"><div class="ttname"><a href="classtileray.html">tileray</a></div><div class="ttdef"><b>Definition:</b> <a href="tileray_8h_source.html#l00026">tileray.h:27</a></div></div>
<div class="ttc" id="anamespaceui__manager_html_a5496220e43b7d5f1b3cbbebe6cf1f83d"><div class="ttname"><a href="namespaceui__manager.html#a5496220e43b7d5f1b3cbbebe6cf1f83d">ui_manager::redraw_invalidated</a></div><div class="ttdeci">void redraw_invalidated()</div><div class="ttdef"><b>Definition:</b> <a href="ui__manager_8cpp_source.html#l00290">ui_manager.cpp:290</a></div></div>
<div class="ttc" id="ancurses__def_8cpp_html_a6fd55a287e038568d2304927ec8b2449"><div class="ttname"><a href="ncurses__def_8cpp.html#a6fd55a287e038568d2304927ec8b2449">refresh_display</a></div><div class="ttdeci">void refresh_display()</div><div class="ttdoc">Make changes made to the display visible to the user immediately.</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00120">ncurses_def.cpp:120</a></div></div>
<div class="ttc" id="astructmtype_html_a541f9bf8c2e84856ea34db43f88991b3"><div class="ttname"><a href="structmtype.html#a541f9bf8c2e84856ea34db43f88991b3">mtype::bodytype</a></div><div class="ttdeci">bodytype_id bodytype</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00257">mtype.h:257</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8cpp_source.html#l00974">Creature::add_effect()</a>, <a class="el" href="monster_8cpp_source.html#l01807">monster::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="tileray_8cpp_source.html#l00194">tileray::advance()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="mtype_8h_source.html#l00257">mtype::bodytype</a>, <a class="el" href="bodypart_8h_source.html#l00040">bp_torso</a>, <a class="el" href="line_8cpp_source.html#l00781">coord_to_angle()</a>, <a class="el" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">Creature::disp_name()</a>, <a class="el" href="monattack_8cpp_source.html#l05764">dodge_check()</a>, <a class="el" href="tileray_8cpp_source.html#l00064">tileray::dx()</a>, <a class="el" href="tileray_8cpp_source.html#l00069">tileray::dy()</a>, <a class="el" href="monattack_8cpp.html#ae326c5e4da7f23bc429d04d215dd7c9d">effect_grabbed</a>, <a class="el" href="monattack_8cpp.html#a66f79823ab25161f7aabf43445a580a4">effect_grabbing</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8cpp_source.html#l01244">Creature::get_effect_int()</a>, <a class="el" href="game__constants_8h_source.html#l00042">HALF_MAPSIZE_X</a>, <a class="el" href="game__constants_8h_source.html#l00043">HALF_MAPSIZE_Y</a>, <a class="el" href="creature_8cpp_source.html#l01173">Creature::has_effect()</a>, <a class="el" href="character_8h_source.html#l01575">Character::in_vehicle</a>, <a class="el" href="creature_8h_source.html#l00092">Creature::is_player()</a>, <a class="el" href="mapgen_8cpp_source.html#l06454">line()</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="mtype_8h_source.html#l00286">mtype::melee_dice</a>, <a class="el" href="mtype_8h_source.html#l00287">mtype::melee_sides</a>, <a class="el" href="mtype_8h_source.html#l00285">mtype::melee_skill</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="classCreature.html#af56188882e3300853d18f166738ee37a">Creature::on_dodge()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="character_8cpp_source.html#l00707">Character::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="classCreature.html#af712029844aef7ebc7af88a9242e2df0">Creature::posx()</a>, <a class="el" href="classCreature.html#a1be20ab434ada66748d5b62fcfdbd5e4">Creature::posy()</a>, <a class="el" href="ui__manager_8cpp_source.html#l00290">ui_manager::redraw_invalidated()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00120">refresh_display()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, <a class="el" href="game__constants_8h_source.html#l00036">SEEX</a>, <a class="el" href="game__constants_8h_source.html#l00037">SEEY</a>, <a class="el" href="classCreature.html#a7f9ce537b830a5f0474c001d295c0a77">Creature::setpos()</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, <a class="el" href="creature_8h_source.html#l00485">Creature::uncanny_dodge()</a>, <a class="el" href="point_8h_source.html#l00150">tripoint::x</a>, and <a class="el" href="point_8h_source.html#l00151">tripoint::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="monattack_8cpp_source.html#l04999">flesh_tendril()</a>, and <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="aabedda435c56bb9f8fabc168ddbcc5e4" name="aabedda435c56bb9f8fabc168ddbcc5e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabedda435c56bb9f8fabc168ddbcc5e4">&#9670;&nbsp;</a></span>ratking()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::ratking </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l03920">3920</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03921" name="l03921"></a><span class="lineno"> 3921</span>{</div>
<div class="line"><a id="l03922" name="l03922"></a><span class="lineno"> 3922</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> ) {</div>
<div class="line"><a id="l03923" name="l03923"></a><span class="lineno"> 3923</span>        <span class="comment">// TODO: handle friendly monsters</span></div>
<div class="line"><a id="l03924" name="l03924"></a><span class="lineno"> 3924</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03925" name="l03925"></a><span class="lineno"> 3925</span>    }</div>
<div class="line"><a id="l03926" name="l03926"></a><span class="lineno"> 3926</span>    <span class="comment">// Disable z-level ratting or it can get silly</span></div>
<div class="line"><a id="l03927" name="l03927"></a><span class="lineno"> 3927</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() ) &gt; 50 || z-&gt;<a class="code hl_function" href="classmonster.html#a3690c104bd71bffc25153a86229f2a97">posz</a>() != <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.posz() ) {</div>
<div class="line"><a id="l03928" name="l03928"></a><span class="lineno"> 3928</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03929" name="l03929"></a><span class="lineno"> 3929</span>    }</div>
<div class="line"><a id="l03930" name="l03930"></a><span class="lineno"> 3930</span> </div>
<div class="line"><a id="l03931" name="l03931"></a><span class="lineno"> 3931</span>    <span class="keywordflow">switch</span>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 5 ) ) { <span class="comment">// What do we say?</span></div>
<div class="line"><a id="l03932" name="l03932"></a><span class="lineno"> 3932</span>        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l03933" name="l03933"></a><span class="lineno"> 3933</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;\&quot;YOU… ARE FILTH…\&quot;&quot;</span> ) );</div>
<div class="line"><a id="l03934" name="l03934"></a><span class="lineno"> 3934</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03935" name="l03935"></a><span class="lineno"> 3935</span>        <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l03936" name="l03936"></a><span class="lineno"> 3936</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;\&quot;VERMIN… YOU ARE VERMIN…\&quot;&quot;</span> ) );</div>
<div class="line"><a id="l03937" name="l03937"></a><span class="lineno"> 3937</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03938" name="l03938"></a><span class="lineno"> 3938</span>        <span class="keywordflow">case</span> 3:</div>
<div class="line"><a id="l03939" name="l03939"></a><span class="lineno"> 3939</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;\&quot;LEAVE NOW…\&quot;&quot;</span> ) );</div>
<div class="line"><a id="l03940" name="l03940"></a><span class="lineno"> 3940</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03941" name="l03941"></a><span class="lineno"> 3941</span>        <span class="keywordflow">case</span> 4:</div>
<div class="line"><a id="l03942" name="l03942"></a><span class="lineno"> 3942</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;\&quot;WE… WILL FEAST… UPON YOU…\&quot;&quot;</span> ) );</div>
<div class="line"><a id="l03943" name="l03943"></a><span class="lineno"> 3943</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03944" name="l03944"></a><span class="lineno"> 3944</span>        <span class="keywordflow">case</span> 5:</div>
<div class="line"><a id="l03945" name="l03945"></a><span class="lineno"> 3945</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;\&quot;FOUL INTERLOPER…\&quot;&quot;</span> ) );</div>
<div class="line"><a id="l03946" name="l03946"></a><span class="lineno"> 3946</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03947" name="l03947"></a><span class="lineno"> 3947</span>    }</div>
<div class="line"><a id="l03948" name="l03948"></a><span class="lineno"> 3948</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() ) &lt;= 10 ) {</div>
<div class="line"><a id="l03949" name="l03949"></a><span class="lineno"> 3949</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.add_effect( <a class="code hl_variable" href="monattack_8cpp.html#ac2aa877afbc90f2a8dccb91704af5973">effect_rat</a>, 3_minutes );</div>
<div class="line"><a id="l03950" name="l03950"></a><span class="lineno"> 3950</span>    }</div>
<div class="line"><a id="l03951" name="l03951"></a><span class="lineno"> 3951</span> </div>
<div class="line"><a id="l03952" name="l03952"></a><span class="lineno"> 3952</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03953" name="l03953"></a><span class="lineno"> 3953</span>}</div>
<div class="ttc" id="amonattack_8cpp_html_ac2aa877afbc90f2a8dccb91704af5973"><div class="ttname"><a href="monattack_8cpp.html#ac2aa877afbc90f2a8dccb91704af5973">effect_rat</a></div><div class="ttdeci">static const efftype_id effect_rat(&quot;rat&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="monattack_8cpp.html#ac2aa877afbc90f2a8dccb91704af5973">effect_rat</a>, <a class="el" href="monster_8h_source.html#l00471">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="monster_8h_source.html#l00501">monster::posz()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, and <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a797e909b5976a33fb522257a398fcb43" name="a797e909b5976a33fb522257a398fcb43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a797e909b5976a33fb522257a398fcb43">&#9670;&nbsp;</a></span>rattle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::rattle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l00562">562</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>{</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>    <span class="comment">// TODO: Let it rattle at non-player friendlies</span></div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> min_dist = z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> != 0 ? 1 : 4;</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u;</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>    <span class="comment">// Can&#39;t use attack_target - the snake has no target</span></div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() ) &gt; min_dist ||</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>        !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>    }</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span> </div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>    <span class="comment">// It takes a very short while</span></div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 20;</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>    <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 10, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;a sibilant rattling sound!&quot;</span> ), <span class="keyword">false</span>,</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>                   <span class="stringliteral">&quot;misc&quot;</span>, <span class="stringliteral">&quot;rattling&quot;</span> );</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span> </div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::alarm</a>, <a class="el" href="monster_8h_source.html#l00471">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, and <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="adb8e5e171700f1684e8c9b0ad762a0c9" name="adb8e5e171700f1684e8c9b0ad762a0c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb8e5e171700f1684e8c9b0ad762a0c9">&#9670;&nbsp;</a></span>resurrect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::resurrect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l00934">934</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>{</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>    <span class="comment">// Chance to recover some of our missing speed (yes this will regain</span></div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>    <span class="comment">// loses from being revived ourselves as well).</span></div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>    <span class="comment">// Multiplying by (current base speed / max speed) means that the</span></div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>    <span class="comment">// rate of speed regaining is unaffected by what our current speed is, i.e.</span></div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>    <span class="comment">// we will regain the same amount per minute at speed 50 as speed 200.</span></div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( 15 * <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( z-&gt;<a class="code hl_function" href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">get_speed_base</a>() ) / <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span></div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>                                  ( z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#addfa6852e581c8cebbd1bbf9c4ebbd9a">speed</a> ) ) ) ) {</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>        <span class="comment">// Restore 10% of our current speed, capping at our type maximum</span></div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>        z-&gt;<a class="code hl_function" href="classCreature.html#afedb5874d4d3438d3c82cb2104ec49fa">set_speed_base</a>( std::min( z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#addfa6852e581c8cebbd1bbf9c4ebbd9a">speed</a>,</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>                                     <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( z-&gt;<a class="code hl_function" href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">get_speed_base</a>() + .1 * z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#addfa6852e581c8cebbd1bbf9c4ebbd9a">speed</a> ) ) );</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>    }</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span> </div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>    <span class="keywordtype">int</span> raising_level = 0;</div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a90a0f4fbb902f8b115efe2cf32a9803f">effect_raising</a> ) ) {</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>        raising_level = z-&gt;<a class="code hl_function" href="classCreature.html#a70ba05a0184ff83095f639eac18f24fe">get_effect_int</a>( <a class="code hl_variable" href="monattack_8cpp.html#a90a0f4fbb902f8b115efe2cf32a9803f">effect_raising</a> ) * 40;</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>    }</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span> </div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>    <span class="keywordtype">bool</span> sees_necromancer = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z );</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>    std::vector&lt;std::pair&lt;tripoint, item *&gt;&gt; corpses;</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>    <span class="comment">// Find all corpses that we can see within 10 tiles.</span></div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>    <span class="keywordtype">int</span> range = 10;</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>    <span class="keywordtype">bool</span> found_eligible_corpse = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>    <span class="keywordtype">int</span> lowest_raise_score = INT_MAX;</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;p : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), range ) ) {</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>        <span class="keywordflow">if</span>( !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_empty( p ) || <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.get_field_intensity( p, <a class="code hl_variable" href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a> ) &gt; 1 ||</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>            !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.sees( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), p, -1 ) ) {</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>        }</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span> </div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;i : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.i_at( p ) ) {</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structmtype.html">mtype</a> *mt = i.get_mtype();</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>            <span class="keywordflow">if</span>( !( i.is_corpse() &amp;&amp; i.can_revive() &amp;&amp; i.active &amp;&amp; mt-&gt;<a class="code hl_function" href="structmtype.html#a208b05355d08ec7d628606f18e2d53be">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a1c04c34bfaa481269706728c7dc951a1">MF_REVIVES</a> ) &amp;&amp;</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>                   mt-&gt;<a class="code hl_function" href="structmtype.html#a51ec342d71717bb513f0158198b12840">in_species</a>( <a class="code hl_variable" href="monattack_8cpp.html#a4e2730248c54d4d07fa7e215efb35d1a">ZOMBIE</a> ) &amp;&amp; !mt-&gt;<a class="code hl_function" href="structmtype.html#a208b05355d08ec7d628606f18e2d53be">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a61d95471952d398b490e48271fb8095b">MF_NO_NECRO</a> ) ) ) {</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>            }</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span> </div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>            found_eligible_corpse = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>            <span class="keywordflow">if</span>( raising_level == 0 ) {</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>                <span class="comment">// Since we have a target, start charging to raise it.</span></div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>                <span class="keywordflow">if</span>( sees_necromancer ) {</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s throws its arms wide.&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>                }</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>                <span class="keywordflow">while</span>( z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> &gt;= 0 ) {</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>                    z-&gt;<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a90a0f4fbb902f8b115efe2cf32a9803f">effect_raising</a>, 1_minutes );</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>                    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 100;</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>                }</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>            }</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>            <span class="keywordtype">int</span> raise_score = ( i.damage_level( 4 ) + 1 ) * mt-&gt;<a class="code hl_variable" href="structmtype.html#af242ac55ae2896b040f91b3581e5fcbb">hp</a> + i.burnt;</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>            lowest_raise_score = std::min( lowest_raise_score, raise_score );</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>            <span class="keywordflow">if</span>( raise_score &lt;= raising_level ) {</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>                corpses.push_back( std::make_pair( p, &amp;i ) );</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>            }</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>        }</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>    }</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span> </div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>    <span class="keywordflow">if</span>( corpses.empty() ) { <span class="comment">// No nearby corpses</span></div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>        <span class="keywordflow">if</span>( found_eligible_corpse ) {</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>            <span class="comment">// There was a corpse, but we haven&#39;t charged enough.</span></div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>            <span class="keywordflow">if</span>( sees_necromancer &amp;&amp; <a class="code hl_function" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( 1, std::sqrt( lowest_raise_score / 30.0 ) ) ) {</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s gesticulates wildly.&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>            }</div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>            <span class="keywordflow">while</span>( z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> &gt;= 0 ) {</div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>                z-&gt;<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a90a0f4fbb902f8b115efe2cf32a9803f">effect_raising</a>, 1_minutes );</div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>                z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 100;</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>            }</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( raising_level != 0 ) {</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>            z-&gt;<a class="code hl_function" href="classCreature.html#a730fb8be5a540edd31ed9d8126ea20de">remove_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a90a0f4fbb902f8b115efe2cf32a9803f">effect_raising</a> );</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>        }</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>        <span class="comment">// Check to see if there are any nearby living zombies to see if we should get angry</span></div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>        <span class="keyword">const</span> <span class="keywordtype">bool</span> allies = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_creature_if( [&amp;]( <span class="keyword">const</span> <a class="code hl_class" href="classCreature.html">Creature</a> &amp; critter ) {</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>            <span class="keyword">const</span> <a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">const</span> zed = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">&gt;</span>( &amp;critter );</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>            <span class="keywordflow">return</span> zed &amp;&amp; zed != z &amp;&amp; zed-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_function" href="structmtype.html#a208b05355d08ec7d628606f18e2d53be">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a1c04c34bfaa481269706728c7dc951a1">MF_REVIVES</a> ) &amp;&amp; zed-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_function" href="structmtype.html#a51ec342d71717bb513f0158198b12840">in_species</a>( <a class="code hl_variable" href="monattack_8cpp.html#a4e2730248c54d4d07fa7e215efb35d1a">ZOMBIE</a> ) &amp;&amp;</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>                   z-&gt;<a class="code hl_function" href="classmonster.html#a125622587c2069dc4dbbe07943c81336">attitude_to</a>( *zed ) == Creature::Attitude::A_FRIENDLY  &amp;&amp;</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>                   <a class="code hl_function" href="monattack_8cpp.html#a2239aa1914a4ff939b923ada5faf247d">within_target_range</a>( z, zed, 10 );</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>        } );</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>        <span class="keywordflow">if</span>( !allies ) {</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>            <span class="comment">// Nobody around who we could revive, get angry</span></div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>            z-&gt;<a class="code hl_variable" href="classmonster.html#a7b22fe8719e4783fe1896429cedefa8d">anger</a> = 100;</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>            <span class="comment">// Someone is around who might die and we could revive,</span></div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>            <span class="comment">// calm down.</span></div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>            z-&gt;<a class="code hl_variable" href="classmonster.html#a7b22fe8719e4783fe1896429cedefa8d">anger</a> = 5;</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>        }</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>        <span class="comment">// We&#39;re reviving someone/could revive someone, calm down.</span></div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>        z-&gt;<a class="code hl_variable" href="classmonster.html#a7b22fe8719e4783fe1896429cedefa8d">anger</a> = 5;</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>    }</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span> </div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_function" href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">get_speed_base</a>() &lt;= z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#addfa6852e581c8cebbd1bbf9c4ebbd9a">speed</a> / 2 ) {</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>        <span class="comment">// We can only resurrect so many times in a time period</span></div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>        <span class="comment">// and we&#39;re currently out</span></div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>    }</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span> </div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>    std::pair&lt;tripoint, item *&gt; raised = <a class="code hl_function" href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a>( corpses );</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>    <span class="comment">// To appease static analysis</span></div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>    assert( raised.second );</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>    <span class="comment">// NOLINTNEXTLINE(clang-analyzer-core.CallAndMessage)</span></div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>    <span class="keywordtype">float</span> corpse_damage = raised.second-&gt;damage_level( 4 );</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>    <span class="comment">// Did we successfully raise something?</span></div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;revive_corpse( raised.first, *raised.second ) ) {</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.i_rem( raised.first, raised.second );</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>        <span class="keywordflow">if</span>( sees_necromancer ) {</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s gestures at a nearby corpse.&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>        }</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>        z-&gt;<a class="code hl_function" href="classCreature.html#a730fb8be5a540edd31ed9d8126ea20de">remove_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a90a0f4fbb902f8b115efe2cf32a9803f">effect_raising</a> );</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>        <span class="comment">// Takes one turn</span></div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>        z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#addfa6852e581c8cebbd1bbf9c4ebbd9a">speed</a>;</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>        <span class="comment">// Penalize speed by between 10% and 50% based on how damaged the corpse is.</span></div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>        <span class="keywordtype">float</span> speed_penalty = 0.1 + ( corpse_damage * 0.1 );</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>        z-&gt;<a class="code hl_function" href="classCreature.html#afedb5874d4d3438d3c82cb2104ec49fa">set_speed_base</a>( z-&gt;<a class="code hl_function" href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">get_speed_base</a>() - speed_penalty * z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#addfa6852e581c8cebbd1bbf9c4ebbd9a">speed</a> );</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>        <a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">const</span> zed = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at&lt;<a class="code hl_class" href="classmonster.html">monster</a>&gt;( raised.first );</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>        <span class="keywordflow">if</span>( !zed ) {</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>            <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Misplaced or failed to revive a zombie corpse&quot;</span> );</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>        }</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span> </div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>        zed-&gt;<a class="code hl_function" href="classmonster.html#aea6c3c57440f7456b8376d9750af4e4a">make_ally</a>( *z );</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *zed ) ) {</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A nearby %s rises from the dead!&quot;</span> ), zed-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( sees_necromancer ) {</div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>            <span class="comment">// We saw the necromancer but not the revival</span></div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;But nothing seems to happen.&quot;</span> ) );</div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>        }</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>    }</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span> </div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>}</div>
<div class="ttc" id="acalendar_8cpp_html_a359120c15f92d54a49fec9de7bcb571f"><div class="ttname"><a href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a></div><div class="ttdeci">bool x_in_y(const time_duration &amp;a, const time_duration &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00521">calendar.cpp:521</a></div></div>
<div class="ttc" id="aclassmonster_html_aea6c3c57440f7456b8376d9750af4e4a"><div class="ttname"><a href="classmonster.html#aea6c3c57440f7456b8376d9750af4e4a">monster::make_ally</a></div><div class="ttdeci">void make_ally(const monster &amp;z)</div><div class="ttdoc">Makes this monster an ally of the given monster.</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l02637">monster.cpp:2637</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a90a0f4fbb902f8b115efe2cf32a9803f"><div class="ttname"><a href="monattack_8cpp.html#a90a0f4fbb902f8b115efe2cf32a9803f">effect_raising</a></div><div class="ttdeci">static const efftype_id effect_raising(&quot;raising&quot;)</div></div>
<div class="ttc" id="amtype_8h_html_afa4c966d04d2ddb261a7cde725eca842a1c04c34bfaa481269706728c7dc951a1"><div class="ttname"><a href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a1c04c34bfaa481269706728c7dc951a1">MF_REVIVES</a></div><div class="ttdeci">@ MF_REVIVES</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00125">mtype.h:125</a></div></div>
<div class="ttc" id="amtype_8h_html_afa4c966d04d2ddb261a7cde725eca842a61d95471952d398b490e48271fb8095b"><div class="ttname"><a href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a61d95471952d398b490e48271fb8095b">MF_NO_NECRO</a></div><div class="ttdeci">@ MF_NO_NECRO</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00153">mtype.h:153</a></div></div>
<div class="ttc" id="astructmtype_html"><div class="ttname"><a href="structmtype.html">mtype</a></div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00208">mtype.h:208</a></div></div>
<div class="ttc" id="astructmtype_html_a208b05355d08ec7d628606f18e2d53be"><div class="ttname"><a href="structmtype.html#a208b05355d08ec7d628606f18e2d53be">mtype::has_flag</a></div><div class="ttdeci">bool has_flag(m_flag flag) const</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8cpp_source.html#l00075">mtype.cpp:75</a></div></div>
<div class="ttc" id="astructmtype_html_addfa6852e581c8cebbd1bbf9c4ebbd9a"><div class="ttname"><a href="structmtype.html#addfa6852e581c8cebbd1bbf9c4ebbd9a">mtype::speed</a></div><div class="ttdeci">int speed</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00268">mtype.h:268</a></div></div>
<div class="ttc" id="astructmtype_html_af242ac55ae2896b040f91b3581e5fcbb"><div class="ttname"><a href="structmtype.html#af242ac55ae2896b040f91b3581e5fcbb">mtype::hp</a></div><div class="ttdeci">int hp</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00267">mtype.h:267</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="monster_8cpp_source.html#l01807">monster::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="monster_8h_source.html#l00472">monster::anger</a>, <a class="el" href="monster_8cpp_source.html#l01020">monster::attitude_to()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="monattack_8cpp.html#a90a0f4fbb902f8b115efe2cf32a9803f">effect_raising</a>, <a class="el" href="field__type_8cpp_source.html#l00345">fd_fire</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8cpp_source.html#l01244">Creature::get_effect_int()</a>, <a class="el" href="creature_8cpp_source.html#l01668">Creature::get_speed_base()</a>, <a class="el" href="creature_8cpp_source.html#l01173">Creature::has_effect()</a>, <a class="el" href="mtype_8cpp_source.html#l00075">mtype::has_flag()</a>, <a class="el" href="mtype_8h_source.html#l00267">mtype::hp</a>, <a class="el" href="mtype_8cpp_source.html#l00122">mtype::in_species()</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="monster_8cpp_source.html#l02637">monster::make_ally()</a>, <a class="el" href="mtype_8h_source.html#l00153">MF_NO_NECRO</a>, <a class="el" href="mtype_8h_source.html#l00125">MF_REVIVES</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="rng_8h_source.html#l00088">random_entry()</a>, <a class="el" href="creature_8cpp_source.html#l01130">Creature::remove_effect()</a>, <a class="el" href="creature_8cpp_source.html#l01730">Creature::set_speed_base()</a>, <a class="el" href="mtype_8h_source.html#l00268">mtype::speed</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, <a class="el" href="monattack_8cpp_source.html#l00214">within_target_range()</a>, <a class="el" href="calendar_8cpp_source.html#l00521">x_in_y()</a>, and <a class="el" href="monattack_8cpp.html#a4e2730248c54d4d07fa7e215efb35d1a">ZOMBIE</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a2eb6221fccf307deab17f0240aaf4981" name="a2eb6221fccf307deab17f0240aaf4981"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2eb6221fccf307deab17f0240aaf4981">&#9670;&nbsp;</a></span>rifle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mattack::rifle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCreature.html">Creature</a> *&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l03272">3272</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03273" name="l03273"></a><span class="lineno"> 3273</span>{</div>
<div class="line"><a id="l03274" name="l03274"></a><span class="lineno"> 3274</span>    <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> ammo_type( <span class="stringliteral">&quot;556&quot;</span> );</div>
<div class="line"><a id="l03275" name="l03275"></a><span class="lineno"> 3275</span>    <span class="comment">// Make sure our ammo isn&#39;t weird.</span></div>
<div class="line"><a id="l03276" name="l03276"></a><span class="lineno"> 3276</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">ammo</a>[ammo_type] &gt; 3000 ) {</div>
<div class="line"><a id="l03277" name="l03277"></a><span class="lineno"> 3277</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Generated too much ammo (%d) for %s in mattack::rifle&quot;</span>, z-&gt;<a class="code hl_variable" href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">ammo</a>[ammo_type],</div>
<div class="line"><a id="l03278" name="l03278"></a><span class="lineno"> 3278</span>                  z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l03279" name="l03279"></a><span class="lineno"> 3279</span>        z-&gt;<a class="code hl_variable" href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">ammo</a>[ammo_type] = 3000;</div>
<div class="line"><a id="l03280" name="l03280"></a><span class="lineno"> 3280</span>    }</div>
<div class="line"><a id="l03281" name="l03281"></a><span class="lineno"> 3281</span> </div>
<div class="line"><a id="l03282" name="l03282"></a><span class="lineno"> 3282</span>    <a class="code hl_class" href="classnpc.html">npc</a> tmp = <a class="code hl_function" href="monattack_8cpp.html#a869db8713f4b9684575dee5358311b48">make_fake_npc</a>( z, 16, 10, 8, 12 );</div>
<div class="line"><a id="l03283" name="l03283"></a><span class="lineno"> 3283</span>    tmp.<a class="code hl_function" href="classCharacter.html#aac28618b387cf4ce36252e47699938d5">set_skill_level</a>( <a class="code hl_variable" href="monattack_8cpp.html#ab2508226b904e65441fcae52e0b2b998">skill_rifle</a>, 8 );</div>
<div class="line"><a id="l03284" name="l03284"></a><span class="lineno"> 3284</span>    tmp.<a class="code hl_function" href="classCharacter.html#aac28618b387cf4ce36252e47699938d5">set_skill_level</a>( <a class="code hl_variable" href="monattack_8cpp.html#a3eadead4a9aa7fee079c0b1acce7965e">skill_gun</a>, 6 );</div>
<div class="line"><a id="l03285" name="l03285"></a><span class="lineno"> 3285</span>    <span class="comment">// No need to aim</span></div>
<div class="line"><a id="l03286" name="l03286"></a><span class="lineno"> 3286</span>    tmp.<a class="code hl_variable" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> = 0;</div>
<div class="line"><a id="l03287" name="l03287"></a><span class="lineno"> 3287</span> </div>
<div class="line"><a id="l03288" name="l03288"></a><span class="lineno"> 3288</span>    <span class="keywordflow">if</span>( target == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ) {</div>
<div class="line"><a id="l03289" name="l03289"></a><span class="lineno"> 3289</span>        <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a90a259f4c1b37d66fbc8c485ea1ccaba">effect_targeted</a> ) ) {</div>
<div class="line"><a id="l03290" name="l03290"></a><span class="lineno"> 3290</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 8, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;beep-beep.&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;misc&quot;</span>, <span class="stringliteral">&quot;beep&quot;</span> );</div>
<div class="line"><a id="l03291" name="l03291"></a><span class="lineno"> 3291</span>            z-&gt;<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a90a259f4c1b37d66fbc8c485ea1ccaba">effect_targeted</a>, 8_turns );</div>
<div class="line"><a id="l03292" name="l03292"></a><span class="lineno"> 3292</span>            z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 100;</div>
<div class="line"><a id="l03293" name="l03293"></a><span class="lineno"> 3293</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03294" name="l03294"></a><span class="lineno"> 3294</span>        }</div>
<div class="line"><a id="l03295" name="l03295"></a><span class="lineno"> 3295</span>    }</div>
<div class="line"><a id="l03296" name="l03296"></a><span class="lineno"> 3296</span>    <span class="comment">// It takes a while</span></div>
<div class="line"><a id="l03297" name="l03297"></a><span class="lineno"> 3297</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 150;</div>
<div class="line"><a id="l03298" name="l03298"></a><span class="lineno"> 3298</span> </div>
<div class="line"><a id="l03299" name="l03299"></a><span class="lineno"> 3299</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">ammo</a>[ammo_type] &lt;= 0 ) {</div>
<div class="line"><a id="l03300" name="l03300"></a><span class="lineno"> 3300</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a id="l03301" name="l03301"></a><span class="lineno"> 3301</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 2, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;a chk!&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;fire_gun&quot;</span>, <span class="stringliteral">&quot;empty&quot;</span> );</div>
<div class="line"><a id="l03302" name="l03302"></a><span class="lineno"> 3302</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a id="l03303" name="l03303"></a><span class="lineno"> 3303</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 6, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>,  <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;boop!&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;fire_gun&quot;</span>, <span class="stringliteral">&quot;empty&quot;</span> );</div>
<div class="line"><a id="l03304" name="l03304"></a><span class="lineno"> 3304</span>        }</div>
<div class="line"><a id="l03305" name="l03305"></a><span class="lineno"> 3305</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03306" name="l03306"></a><span class="lineno"> 3306</span>    }</div>
<div class="line"><a id="l03307" name="l03307"></a><span class="lineno"> 3307</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l03308" name="l03308"></a><span class="lineno"> 3308</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s opens up with its rifle!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l03309" name="l03309"></a><span class="lineno"> 3309</span>    }</div>
<div class="line"><a id="l03310" name="l03310"></a><span class="lineno"> 3310</span> </div>
<div class="line"><a id="l03311" name="l03311"></a><span class="lineno"> 3311</span>    tmp.<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a> = <a class="code hl_class" href="classitem.html">item</a>( <span class="stringliteral">&quot;m4a1&quot;</span> ).<a class="code hl_function" href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">ammo_set</a>( ammo_type, z-&gt;<a class="code hl_variable" href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">ammo</a>[ ammo_type ] );</div>
<div class="line"><a id="l03312" name="l03312"></a><span class="lineno"> 3312</span>    <span class="keywordtype">int</span> burst = std::max( tmp.<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_function" href="classitem.html#af128df748a75405ab738424bff725de5">gun_get_mode</a>( <a class="code hl_class" href="classstring__id.html">gun_mode_id</a>( <span class="stringliteral">&quot;AUTO&quot;</span> ) ).qty, 1 );</div>
<div class="line"><a id="l03313" name="l03313"></a><span class="lineno"> 3313</span> </div>
<div class="line"><a id="l03314" name="l03314"></a><span class="lineno"> 3314</span>    z-&gt;<a class="code hl_variable" href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">ammo</a>[ ammo_type ] -= tmp.<a class="code hl_function" href="classplayer.html#a44202fda7322e9ba557a37a7081e249c">fire_gun</a>( target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>(), burst ) * tmp.<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_function" href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">ammo_required</a>();</div>
<div class="line"><a id="l03315" name="l03315"></a><span class="lineno"> 3315</span> </div>
<div class="line"><a id="l03316" name="l03316"></a><span class="lineno"> 3316</span>    <span class="keywordflow">if</span>( target == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ) {</div>
<div class="line"><a id="l03317" name="l03317"></a><span class="lineno"> 3317</span>        z-&gt;<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a90a259f4c1b37d66fbc8c485ea1ccaba">effect_targeted</a>, 3_turns );</div>
<div class="line"><a id="l03318" name="l03318"></a><span class="lineno"> 3318</span>    }</div>
<div class="line"><a id="l03319" name="l03319"></a><span class="lineno"> 3319</span>}</div>
<div class="ttc" id="amonattack_8cpp_html_ab2508226b904e65441fcae52e0b2b998"><div class="ttname"><a href="monattack_8cpp.html#ab2508226b904e65441fcae52e0b2b998">skill_rifle</a></div><div class="ttdeci">static const skill_id skill_rifle(&quot;rifle&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="monster_8cpp_source.html#l01807">monster::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::alarm</a>, <a class="el" href="monster_8h_source.html#l00512">monster::ammo</a>, <a class="el" href="item_8cpp_source.html#l07296">item::ammo_required()</a>, <a class="el" href="item_8cpp_source.html#l00587">item::ammo_set()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::combat</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="monattack_8cpp.html#a90a259f4c1b37d66fbc8c485ea1ccaba">effect_targeted</a>, <a class="el" href="ranged_8cpp_source.html#l00804">player::fire_gun()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="item_8cpp_source.html#l07724">item::gun_get_mode()</a>, <a class="el" href="creature_8cpp_source.html#l01173">Creature::has_effect()</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="monattack_8cpp_source.html#l00301">make_fake_npc()</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="character_8h_source.html#l00618">Character::recoil</a>, <a class="el" href="character_8cpp_source.html#l03337">Character::set_skill_level()</a>, <a class="el" href="monattack_8cpp.html#a3eadead4a9aa7fee079c0b1acce7965e">skill_gun</a>, <a class="el" href="monattack_8cpp.html#ab2508226b904e65441fcae52e0b2b998">skill_rifle</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, and <a class="el" href="character_8h_source.html#l01585">Character::weapon</a>.</p>

<p class="reference">Referenced by <a class="el" href="monattack_8cpp_source.html#l03761">chickenbot()</a>, and <a class="el" href="monattack_8cpp_source.html#l03843">multi_robot()</a>.</p>

</div>
</div>
<a id="a774768a261f323c61f26af3c063939a3" name="a774768a261f323c61f26af3c063939a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a774768a261f323c61f26af3c063939a3">&#9670;&nbsp;</a></span>riotbot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::riotbot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
Intelligence &gt;10 allows and increases chance whether you can feign death to avoid riot bot arrest Dexterity &gt;13 allows and increases chance to slip out of riot bot handcuffs Intelligence &gt;10 allows and increases chance of successful feign death against riot bot 
<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l04634">4634</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04635" name="l04635"></a><span class="lineno"> 4635</span>{</div>
<div class="line"><a id="l04636" name="l04636"></a><span class="lineno"> 4636</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l04637" name="l04637"></a><span class="lineno"> 4637</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l04638" name="l04638"></a><span class="lineno"> 4638</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04639" name="l04639"></a><span class="lineno"> 4639</span>    }</div>
<div class="line"><a id="l04640" name="l04640"></a><span class="lineno"> 4640</span> </div>
<div class="line"><a id="l04641" name="l04641"></a><span class="lineno"> 4641</span>    <a class="code hl_class" href="classplayer.html">player</a> *foe = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classplayer.html">player</a> *<span class="keyword">&gt;</span>( target );</div>
<div class="line"><a id="l04642" name="l04642"></a><span class="lineno"> 4642</span> </div>
<div class="line"><a id="l04643" name="l04643"></a><span class="lineno"> 4643</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( 1_minutes ) ) {</div>
<div class="line"><a id="l04644" name="l04644"></a><span class="lineno"> 4644</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;dest : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 4 ) ) {</div>
<div class="line"><a id="l04645" name="l04645"></a><span class="lineno"> 4645</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.passable( dest ) &amp;&amp;</div>
<div class="line"><a id="l04646" name="l04646"></a><span class="lineno"> 4646</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.clear_path( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), dest, 3, 1, 100 ) ) {</div>
<div class="line"><a id="l04647" name="l04647"></a><span class="lineno"> 4647</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_field( dest, <a class="code hl_variable" href="field__type_8cpp.html#ad86d7b9ff1a8fb05d7481abd08d0c375">fd_relax_gas</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 3 ) );</div>
<div class="line"><a id="l04648" name="l04648"></a><span class="lineno"> 4648</span>            }</div>
<div class="line"><a id="l04649" name="l04649"></a><span class="lineno"> 4649</span>        }</div>
<div class="line"><a id="l04650" name="l04650"></a><span class="lineno"> 4650</span>    }</div>
<div class="line"><a id="l04651" name="l04651"></a><span class="lineno"> 4651</span> </div>
<div class="line"><a id="l04652" name="l04652"></a><span class="lineno"> 4652</span>    <span class="comment">//already arrested?</span></div>
<div class="line"><a id="l04653" name="l04653"></a><span class="lineno"> 4653</span>    <span class="comment">//and yes, if the player has no hands, we are not going to arrest him.</span></div>
<div class="line"><a id="l04654" name="l04654"></a><span class="lineno"> 4654</span>    <span class="keywordflow">if</span>( foe != <span class="keyword">nullptr</span> &amp;&amp;</div>
<div class="line"><a id="l04655" name="l04655"></a><span class="lineno"> 4655</span>        ( foe-&gt;<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>() == <a class="code hl_variable" href="monattack_8cpp.html#a8036e3cd7d05e67da5e6e9ddc4caec9b">itype_e_handcuffs</a> || !foe-&gt;<a class="code hl_function" href="classCharacter.html#a8e2d2e1c01bfbb36401ae221300370f5">has_two_arms</a>() ) ) {</div>
<div class="line"><a id="l04656" name="l04656"></a><span class="lineno"> 4656</span>        z-&gt;<a class="code hl_variable" href="classmonster.html#a7b22fe8719e4783fe1896429cedefa8d">anger</a> = 0;</div>
<div class="line"><a id="l04657" name="l04657"></a><span class="lineno"> 4657</span> </div>
<div class="line"><a id="l04658" name="l04658"></a><span class="lineno"> 4658</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( 25_turns ) ) {</div>
<div class="line"><a id="l04659" name="l04659"></a><span class="lineno"> 4659</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 10, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>,</div>
<div class="line"><a id="l04660" name="l04660"></a><span class="lineno"> 4660</span>                           <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Halt and submit to arrest, citizen!  The police will be here any moment.&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;speech&quot;</span>,</div>
<div class="line"><a id="l04661" name="l04661"></a><span class="lineno"> 4661</span>                           z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a>.<a class="code hl_function" href="classstring__id.html#aa7dabc565f0c067e1a237ea224b18f93">str</a>() );</div>
<div class="line"><a id="l04662" name="l04662"></a><span class="lineno"> 4662</span>        }</div>
<div class="line"><a id="l04663" name="l04663"></a><span class="lineno"> 4663</span> </div>
<div class="line"><a id="l04664" name="l04664"></a><span class="lineno"> 4664</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04665" name="l04665"></a><span class="lineno"> 4665</span>    }</div>
<div class="line"><a id="l04666" name="l04666"></a><span class="lineno"> 4666</span> </div>
<div class="line"><a id="l04667" name="l04667"></a><span class="lineno"> 4667</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#a7b22fe8719e4783fe1896429cedefa8d">anger</a> &lt; z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a9a59bfdad7bfcd71c923ae8463630c95">agro</a> ) {</div>
<div class="line"><a id="l04668" name="l04668"></a><span class="lineno"> 4668</span>        z-&gt;<a class="code hl_variable" href="classmonster.html#a7b22fe8719e4783fe1896429cedefa8d">anger</a> += z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a9a59bfdad7bfcd71c923ae8463630c95">agro</a> / 20;</div>
<div class="line"><a id="l04669" name="l04669"></a><span class="lineno"> 4669</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04670" name="l04670"></a><span class="lineno"> 4670</span>    }</div>
<div class="line"><a id="l04671" name="l04671"></a><span class="lineno"> 4671</span> </div>
<div class="line"><a id="l04672" name="l04672"></a><span class="lineno"> 4672</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> dist = <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() );</div>
<div class="line"><a id="l04673" name="l04673"></a><span class="lineno"> 4673</span> </div>
<div class="line"><a id="l04674" name="l04674"></a><span class="lineno"> 4674</span>    <span class="comment">//we need empty hands to arrest</span></div>
<div class="line"><a id="l04675" name="l04675"></a><span class="lineno"> 4675</span>    <span class="keywordflow">if</span>( foe == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u &amp;&amp; !foe-&gt;<a class="code hl_function" href="classCharacter.html#ad79464264cb8a2061f5888d092f5cd86">is_armed</a>() ) {</div>
<div class="line"><a id="l04676" name="l04676"></a><span class="lineno"> 4676</span> </div>
<div class="line"><a id="l04677" name="l04677"></a><span class="lineno"> 4677</span>        <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 15, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>,</div>
<div class="line"><a id="l04678" name="l04678"></a><span class="lineno"> 4678</span>                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Please stay in place, citizen, do not make any movements!&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;speech&quot;</span>,</div>
<div class="line"><a id="l04679" name="l04679"></a><span class="lineno"> 4679</span>                       z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a>.<a class="code hl_function" href="classstring__id.html#aa7dabc565f0c067e1a237ea224b18f93">str</a>() );</div>
<div class="line"><a id="l04680" name="l04680"></a><span class="lineno"> 4680</span> </div>
<div class="line"><a id="l04681" name="l04681"></a><span class="lineno"> 4681</span>        <span class="comment">//we need to come closer and arrest</span></div>
<div class="line"><a id="l04682" name="l04682"></a><span class="lineno"> 4682</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="monattack_8cpp.html#abf0d71b531a799a8eb3fd58a846064db">is_adjacent</a>( z, foe, <span class="keyword">false</span> ) ) {</div>
<div class="line"><a id="l04683" name="l04683"></a><span class="lineno"> 4683</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04684" name="l04684"></a><span class="lineno"> 4684</span>        }</div>
<div class="line"><a id="l04685" name="l04685"></a><span class="lineno"> 4685</span> </div>
<div class="line"><a id="l04686" name="l04686"></a><span class="lineno"> 4686</span>        <span class="comment">//Strain the atmosphere, forcing the player to wait. Let him feel the power of law!</span></div>
<div class="line"><a id="l04687" name="l04687"></a><span class="lineno"> 4687</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 10 ) ) {</div>
<div class="line"><a id="l04688" name="l04688"></a><span class="lineno"> 4688</span>            foe-&gt;<a class="code hl_function" href="classplayer.html#a07108565639fa6fe5b6776b4e8674fb6">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The robot carefully scans you.&quot;</span> ),</div>
<div class="line"><a id="l04689" name="l04689"></a><span class="lineno"> 4689</span>                                        <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The robot carefully scans &lt;npcname&gt;.&quot;</span> ) );</div>
<div class="line"><a id="l04690" name="l04690"></a><span class="lineno"> 4690</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04691" name="l04691"></a><span class="lineno"> 4691</span>        }</div>
<div class="line"><a id="l04692" name="l04692"></a><span class="lineno"> 4692</span> </div>
<div class="line"><a id="l04693" name="l04693"></a><span class="lineno"> 4693</span>        <span class="keyword">enum</span> {ur_arrest, ur_resist, ur_trick};</div>
<div class="line"><a id="l04694" name="l04694"></a><span class="lineno"> 4694</span> </div>
<div class="line"><a id="l04695" name="l04695"></a><span class="lineno"> 4695</span>        <span class="comment">//arrest!</span></div>
<div class="line"><a id="l04696" name="l04696"></a><span class="lineno"> 4696</span>        <a class="code hl_class" href="classuilist.html">uilist</a> amenu;</div>
<div class="line"><a id="l04697" name="l04697"></a><span class="lineno"> 4697</span>        amenu.<a class="code hl_variable" href="classuilist.html#a55ee0f9e08269bd6e8116b67f4c39836">allow_cancel</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04698" name="l04698"></a><span class="lineno"> 4698</span>        amenu.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The riotbot orders you to present your hands and be cuffed.&quot;</span> );</div>
<div class="line"><a id="l04699" name="l04699"></a><span class="lineno"> 4699</span> </div>
<div class="line"><a id="l04700" name="l04700"></a><span class="lineno"> 4700</span>        amenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( ur_arrest, <span class="keyword">true</span>, <span class="charliteral">&#39;a&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Allow yourself to be arrested.&quot;</span> ) );</div>
<div class="line"><a id="l04701" name="l04701"></a><span class="lineno"> 4701</span>        amenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( ur_resist, <span class="keyword">true</span>, <span class="charliteral">&#39;r&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Resist arrest!&quot;</span> ) );<span class="comment"></span></div>
<div class="line"><a id="l04702" name="l04702"></a><span class="lineno"> 4702</span><span class="comment">        ///\EFFECT_INT &gt;10 allows and increases chance whether you can feign death to avoid riot bot arrest</span></div>
<div class="line"><a id="l04703" name="l04703"></a><span class="lineno"> 4703</span><span class="comment"></span>        <span class="keywordflow">if</span>( foe-&gt;<a class="code hl_variable" href="classCharacter.html#a994c83d61054215e81a6e87478d81203">int_cur</a> &gt; 12 || ( foe-&gt;<a class="code hl_variable" href="classCharacter.html#a994c83d61054215e81a6e87478d81203">int_cur</a> &gt; 10 &amp;&amp; !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( foe-&gt;<a class="code hl_variable" href="classCharacter.html#a994c83d61054215e81a6e87478d81203">int_cur</a> - 8 ) ) ) {</div>
<div class="line"><a id="l04704" name="l04704"></a><span class="lineno"> 4704</span>            amenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( ur_trick, <span class="keyword">true</span>, <span class="charliteral">&#39;t&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Feign death.&quot;</span> ) );</div>
<div class="line"><a id="l04705" name="l04705"></a><span class="lineno"> 4705</span>        }</div>
<div class="line"><a id="l04706" name="l04706"></a><span class="lineno"> 4706</span> </div>
<div class="line"><a id="l04707" name="l04707"></a><span class="lineno"> 4707</span>        amenu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l04708" name="l04708"></a><span class="lineno"> 4708</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> choice = amenu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a id="l04709" name="l04709"></a><span class="lineno"> 4709</span> </div>
<div class="line"><a id="l04710" name="l04710"></a><span class="lineno"> 4710</span>        <span class="keywordflow">if</span>( choice == ur_arrest ) {</div>
<div class="line"><a id="l04711" name="l04711"></a><span class="lineno"> 4711</span>            z-&gt;<a class="code hl_variable" href="classmonster.html#a7b22fe8719e4783fe1896429cedefa8d">anger</a> = 0;</div>
<div class="line"><a id="l04712" name="l04712"></a><span class="lineno"> 4712</span> </div>
<div class="line"><a id="l04713" name="l04713"></a><span class="lineno"> 4713</span>            <a class="code hl_class" href="classitem.html">item</a> handcuffs( <span class="stringliteral">&quot;e_handcuffs&quot;</span>, <a class="code hl_variable" href="namespacecalendar.html#ab01178b933b4f1c62bd75b2edfdbaf79">calendar::start_of_cataclysm</a> );</div>
<div class="line"><a id="l04714" name="l04714"></a><span class="lineno"> 4714</span>            handcuffs.charges = handcuffs.type-&gt;maximum_charges();</div>
<div class="line"><a id="l04715" name="l04715"></a><span class="lineno"> 4715</span>            handcuffs.active = <span class="keyword">true</span>;</div>
<div class="line"><a id="l04716" name="l04716"></a><span class="lineno"> 4716</span>            handcuffs.set_var( <span class="stringliteral">&quot;HANDCUFFS_X&quot;</span>, foe-&gt;<a class="code hl_function" href="classCharacter.html#a464e960411f87bd3be76d5142dc255cb">posx</a>() );</div>
<div class="line"><a id="l04717" name="l04717"></a><span class="lineno"> 4717</span>            handcuffs.set_var( <span class="stringliteral">&quot;HANDCUFFS_Y&quot;</span>, foe-&gt;<a class="code hl_function" href="classCharacter.html#a4b4d2e6bf4190c6470b282ce60183c0f">posy</a>() );</div>
<div class="line"><a id="l04718" name="l04718"></a><span class="lineno"> 4718</span> </div>
<div class="line"><a id="l04719" name="l04719"></a><span class="lineno"> 4719</span>            <span class="keyword">const</span> <span class="keywordtype">bool</span> is_uncanny = foe-&gt;<a class="code hl_function" href="classCharacter.html#af9c7419575e23d52745c94009929fafb">has_active_bionic</a>( <a class="code hl_variable" href="monattack_8cpp.html#a798aca7aaa95fcd49a98b52c7be9b3cc">bio_uncanny_dodge</a> ) &amp;&amp;</div>
<div class="line"><a id="l04720" name="l04720"></a><span class="lineno"> 4720</span>                                    foe-&gt;<a class="code hl_function" href="classCharacter.html#add22510ff2fa20a662868b4dd86e030e">get_power_level</a>() &gt; 74_kJ &amp;&amp;</div>
<div class="line"><a id="l04721" name="l04721"></a><span class="lineno"> 4721</span>                                    !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 );<span class="comment"></span></div>
<div class="line"><a id="l04722" name="l04722"></a><span class="lineno"> 4722</span><span class="comment">            ///\EFFECT_DEX &gt;13 allows and increases chance to slip out of riot bot handcuffs</span></div>
<div class="line"><a id="l04723" name="l04723"></a><span class="lineno"> 4723</span><span class="comment"></span>            <span class="keyword">const</span> <span class="keywordtype">bool</span> is_dex = foe-&gt;<a class="code hl_variable" href="classCharacter.html#a4065ac02745befad248425d307b71849">dex_cur</a> &gt; 13 &amp;&amp; !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( foe-&gt;<a class="code hl_variable" href="classCharacter.html#a4065ac02745befad248425d307b71849">dex_cur</a> - 11 );</div>
<div class="line"><a id="l04724" name="l04724"></a><span class="lineno"> 4724</span> </div>
<div class="line"><a id="l04725" name="l04725"></a><span class="lineno"> 4725</span>            <span class="keywordflow">if</span>( is_uncanny || is_dex ) {</div>
<div class="line"><a id="l04726" name="l04726"></a><span class="lineno"> 4726</span> </div>
<div class="line"><a id="l04727" name="l04727"></a><span class="lineno"> 4727</span>                <span class="keywordflow">if</span>( is_uncanny ) {</div>
<div class="line"><a id="l04728" name="l04728"></a><span class="lineno"> 4728</span>                    foe-&gt;<a class="code hl_function" href="classCharacter.html#a17446e14fd6046648a505c4aaec3d976">mod_power_level</a>( -75_kJ );</div>
<div class="line"><a id="l04729" name="l04729"></a><span class="lineno"> 4729</span>                }</div>
<div class="line"><a id="l04730" name="l04730"></a><span class="lineno"> 4730</span> </div>
<div class="line"><a id="l04731" name="l04731"></a><span class="lineno"> 4731</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a id="l04732" name="l04732"></a><span class="lineno"> 4732</span>                         <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You deftly slip out of the handcuffs just as the robot closes them.  The robot didn&#39;t seem to notice!&quot;</span> ) );</div>
<div class="line"><a id="l04733" name="l04733"></a><span class="lineno"> 4733</span>                foe-&gt;<a class="code hl_function" href="classCharacter.html#a611bd51d6d4fa9c119787f2fbc6bdd52">i_add</a>( handcuffs );</div>
<div class="line"><a id="l04734" name="l04734"></a><span class="lineno"> 4734</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04735" name="l04735"></a><span class="lineno"> 4735</span>                handcuffs.<a class="code hl_function" href="classitem.html#aaf0e79cb1bc190daa4804cfd62f279c4">set_flag</a>( <span class="stringliteral">&quot;NO_UNWIELD&quot;</span> );</div>
<div class="line"><a id="l04736" name="l04736"></a><span class="lineno"> 4736</span>                foe-&gt;<a class="code hl_function" href="classCharacter.html#abfefc2e9898fff84f1d6bf007a73a976">wield</a>( foe-&gt;<a class="code hl_function" href="classCharacter.html#a611bd51d6d4fa9c119787f2fbc6bdd52">i_add</a>( handcuffs ) );</div>
<div class="line"><a id="l04737" name="l04737"></a><span class="lineno"> 4737</span>                foe-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 300;</div>
<div class="line"><a id="l04738" name="l04738"></a><span class="lineno"> 4738</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The robot puts handcuffs on you.&quot;</span> ) );</div>
<div class="line"><a id="l04739" name="l04739"></a><span class="lineno"> 4739</span>            }</div>
<div class="line"><a id="l04740" name="l04740"></a><span class="lineno"> 4740</span> </div>
<div class="line"><a id="l04741" name="l04741"></a><span class="lineno"> 4741</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 5, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>,</div>
<div class="line"><a id="l04742" name="l04742"></a><span class="lineno"> 4742</span>                           <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You are under arrest, citizen.  You have the right to remain silent.  If you do not remain silent, anything you say may be used against you in a court of law.&quot;</span> ),</div>
<div class="line"><a id="l04743" name="l04743"></a><span class="lineno"> 4743</span>                           <span class="keyword">false</span>, <span class="stringliteral">&quot;speech&quot;</span>, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a>.<a class="code hl_function" href="classstring__id.html#aa7dabc565f0c067e1a237ea224b18f93">str</a>() );</div>
<div class="line"><a id="l04744" name="l04744"></a><span class="lineno"> 4744</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 5, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>,</div>
<div class="line"><a id="l04745" name="l04745"></a><span class="lineno"> 4745</span>                           <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You have the right to an attorney.  If you cannot afford an attorney, one will be provided at no cost to you.  You may have your attorney present during any questioning.&quot;</span> ) );</div>
<div class="line"><a id="l04746" name="l04746"></a><span class="lineno"> 4746</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 5, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>,</div>
<div class="line"><a id="l04747" name="l04747"></a><span class="lineno"> 4747</span>                           <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;If you do not understand these rights, an officer will explain them in greater detail when taking you into custody.&quot;</span> ) );</div>
<div class="line"><a id="l04748" name="l04748"></a><span class="lineno"> 4748</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 5, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>,</div>
<div class="line"><a id="l04749" name="l04749"></a><span class="lineno"> 4749</span>                           <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Do not attempt to flee or to remove the handcuffs, citizen.  That can be dangerous to your health.&quot;</span> ) );</div>
<div class="line"><a id="l04750" name="l04750"></a><span class="lineno"> 4750</span> </div>
<div class="line"><a id="l04751" name="l04751"></a><span class="lineno"> 4751</span>            z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 300;</div>
<div class="line"><a id="l04752" name="l04752"></a><span class="lineno"> 4752</span> </div>
<div class="line"><a id="l04753" name="l04753"></a><span class="lineno"> 4753</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04754" name="l04754"></a><span class="lineno"> 4754</span>        }</div>
<div class="line"><a id="l04755" name="l04755"></a><span class="lineno"> 4755</span> </div>
<div class="line"><a id="l04756" name="l04756"></a><span class="lineno"> 4756</span>        <span class="keywordtype">bool</span> bad_trick = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04757" name="l04757"></a><span class="lineno"> 4757</span> </div>
<div class="line"><a id="l04758" name="l04758"></a><span class="lineno"> 4758</span>        <span class="keywordflow">if</span>( choice == ur_trick ) {</div>
<div class="line"><a id="l04759" name="l04759"></a><span class="lineno"> 4759</span><span class="comment"></span> </div>
<div class="line"><a id="l04760" name="l04760"></a><span class="lineno"> 4760</span><span class="comment">            ///\EFFECT_INT &gt;10 allows and increases chance of successful feign death against riot bot</span></div>
<div class="line"><a id="l04761" name="l04761"></a><span class="lineno"> 4761</span><span class="comment"></span>            <span class="keywordflow">if</span>( !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( foe-&gt;<a class="code hl_variable" href="classCharacter.html#a994c83d61054215e81a6e87478d81203">int_cur</a> - 10 ) ) {</div>
<div class="line"><a id="l04762" name="l04762"></a><span class="lineno"> 4762</span> </div>
<div class="line"><a id="l04763" name="l04763"></a><span class="lineno"> 4763</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a id="l04764" name="l04764"></a><span class="lineno"> 4764</span>                         <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You fall to the ground and feign a sudden convulsive attack.  Though you&#39;re obviously still alive, the riotbot cannot tell the difference between your &#39;attack&#39; and a potentially fatal medical condition.  It backs off, signaling for medical help.&quot;</span> ) );</div>
<div class="line"><a id="l04765" name="l04765"></a><span class="lineno"> 4765</span> </div>
<div class="line"><a id="l04766" name="l04766"></a><span class="lineno"> 4766</span>                z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 300;</div>
<div class="line"><a id="l04767" name="l04767"></a><span class="lineno"> 4767</span>                z-&gt;<a class="code hl_variable" href="classmonster.html#a7b22fe8719e4783fe1896429cedefa8d">anger</a> = -<a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 50 );</div>
<div class="line"><a id="l04768" name="l04768"></a><span class="lineno"> 4768</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04769" name="l04769"></a><span class="lineno"> 4769</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04770" name="l04770"></a><span class="lineno"> 4770</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your awkward movements do not fool the riotbot.&quot;</span> ) );</div>
<div class="line"><a id="l04771" name="l04771"></a><span class="lineno"> 4771</span>                foe-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 100;</div>
<div class="line"><a id="l04772" name="l04772"></a><span class="lineno"> 4772</span>                bad_trick = <span class="keyword">true</span>;</div>
<div class="line"><a id="l04773" name="l04773"></a><span class="lineno"> 4773</span>            }</div>
<div class="line"><a id="l04774" name="l04774"></a><span class="lineno"> 4774</span>        }</div>
<div class="line"><a id="l04775" name="l04775"></a><span class="lineno"> 4775</span> </div>
<div class="line"><a id="l04776" name="l04776"></a><span class="lineno"> 4776</span>        <span class="keywordflow">if</span>( ( choice == ur_resist ) || bad_trick ) {</div>
<div class="line"><a id="l04777" name="l04777"></a><span class="lineno"> 4777</span> </div>
<div class="line"><a id="l04778" name="l04778"></a><span class="lineno"> 4778</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The robot sprays tear gas!&quot;</span> ) );</div>
<div class="line"><a id="l04779" name="l04779"></a><span class="lineno"> 4779</span>            z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 200;</div>
<div class="line"><a id="l04780" name="l04780"></a><span class="lineno"> 4780</span> </div>
<div class="line"><a id="l04781" name="l04781"></a><span class="lineno"> 4781</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;dest : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 2 ) ) {</div>
<div class="line"><a id="l04782" name="l04782"></a><span class="lineno"> 4782</span>                <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.passable( dest ) &amp;&amp;</div>
<div class="line"><a id="l04783" name="l04783"></a><span class="lineno"> 4783</span>                    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.clear_path( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), dest, 3, 1, 100 ) ) {</div>
<div class="line"><a id="l04784" name="l04784"></a><span class="lineno"> 4784</span>                    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_field( dest, <a class="code hl_variable" href="field__type_8cpp.html#a4bad315aa1dfb35f303b391abd786ae3">fd_tear_gas</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 3 ) );</div>
<div class="line"><a id="l04785" name="l04785"></a><span class="lineno"> 4785</span>                }</div>
<div class="line"><a id="l04786" name="l04786"></a><span class="lineno"> 4786</span>            }</div>
<div class="line"><a id="l04787" name="l04787"></a><span class="lineno"> 4787</span> </div>
<div class="line"><a id="l04788" name="l04788"></a><span class="lineno"> 4788</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04789" name="l04789"></a><span class="lineno"> 4789</span>        }</div>
<div class="line"><a id="l04790" name="l04790"></a><span class="lineno"> 4790</span> </div>
<div class="line"><a id="l04791" name="l04791"></a><span class="lineno"> 4791</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04792" name="l04792"></a><span class="lineno"> 4792</span>    }</div>
<div class="line"><a id="l04793" name="l04793"></a><span class="lineno"> 4793</span> </div>
<div class="line"><a id="l04794" name="l04794"></a><span class="lineno"> 4794</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( 5_turns ) ) {</div>
<div class="line"><a id="l04795" name="l04795"></a><span class="lineno"> 4795</span>        <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 25, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>,</div>
<div class="line"><a id="l04796" name="l04796"></a><span class="lineno"> 4796</span>                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Empty your hands and hold your position, citizen!&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;speech&quot;</span>, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a>.<a class="code hl_function" href="classstring__id.html#aa7dabc565f0c067e1a237ea224b18f93">str</a>() );</div>
<div class="line"><a id="l04797" name="l04797"></a><span class="lineno"> 4797</span>    }</div>
<div class="line"><a id="l04798" name="l04798"></a><span class="lineno"> 4798</span> </div>
<div class="line"><a id="l04799" name="l04799"></a><span class="lineno"> 4799</span>    <span class="keywordflow">if</span>( dist &gt; 5 &amp;&amp; dist &lt; 18 &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 10 ) ) {</div>
<div class="line"><a id="l04800" name="l04800"></a><span class="lineno"> 4800</span> </div>
<div class="line"><a id="l04801" name="l04801"></a><span class="lineno"> 4801</span>        z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 50;</div>
<div class="line"><a id="l04802" name="l04802"></a><span class="lineno"> 4802</span> </div>
<div class="line"><a id="l04803" name="l04803"></a><span class="lineno"> 4803</span>        <span class="comment">// Precautionary shot</span></div>
<div class="line"><a id="l04804" name="l04804"></a><span class="lineno"> 4804</span>        <span class="keywordtype">int</span> delta = dist / 4 + 1;</div>
<div class="line"><a id="l04805" name="l04805"></a><span class="lineno"> 4805</span>        <span class="comment">// Precision shot</span></div>
<div class="line"><a id="l04806" name="l04806"></a><span class="lineno"> 4806</span>        <span class="keywordflow">if</span>( z-&gt;<a class="code hl_function" href="classmonster.html#a2d0e466b9d25796cd99402ddd5d3ce20">get_hp</a>() &lt; z-&gt;<a class="code hl_function" href="classmonster.html#a551f4a380282f8ec082c74f410c397de">get_hp_max</a>() ) {</div>
<div class="line"><a id="l04807" name="l04807"></a><span class="lineno"> 4807</span>            delta = 1;</div>
<div class="line"><a id="l04808" name="l04808"></a><span class="lineno"> 4808</span>        }</div>
<div class="line"><a id="l04809" name="l04809"></a><span class="lineno"> 4809</span> </div>
<div class="line"><a id="l04810" name="l04810"></a><span class="lineno"> 4810</span>        <a class="code hl_struct" href="structtripoint.html">tripoint</a> dest( target-&gt;<a class="code hl_function" href="classCreature.html#af712029844aef7ebc7af88a9242e2df0">posx</a>() + <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, delta ) - <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, delta ),</div>
<div class="line"><a id="l04811" name="l04811"></a><span class="lineno"> 4811</span>                       target-&gt;<a class="code hl_function" href="classCreature.html#a1be20ab434ada66748d5b62fcfdbd5e4">posy</a>() + <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, delta ) - <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, delta ),</div>
<div class="line"><a id="l04812" name="l04812"></a><span class="lineno"> 4812</span>                       target-&gt;<a class="code hl_function" href="classCreature.html#a3a3ada596854cf8084b3a728b633a9db">posz</a>() );</div>
<div class="line"><a id="l04813" name="l04813"></a><span class="lineno"> 4813</span> </div>
<div class="line"><a id="l04814" name="l04814"></a><span class="lineno"> 4814</span>        <span class="comment">//~ Sound of a riotbot using its blinding flash</span></div>
<div class="line"><a id="l04815" name="l04815"></a><span class="lineno"> 4815</span>        <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 3, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;fzzzzzt&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;misc&quot;</span>, <span class="stringliteral">&quot;flash&quot;</span> );</div>
<div class="line"><a id="l04816" name="l04816"></a><span class="lineno"> 4816</span> </div>
<div class="line"><a id="l04817" name="l04817"></a><span class="lineno"> 4817</span>        std::vector&lt;tripoint&gt; traj = <a class="code hl_function" href="coordinates_8h.html#a4a34f7ffa4c18effba7f8239c68c8738">line_to</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), dest, 0, 0 );</div>
<div class="line"><a id="l04818" name="l04818"></a><span class="lineno"> 4818</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;elem : traj ) {</div>
<div class="line"><a id="l04819" name="l04819"></a><span class="lineno"> 4819</span>            <span class="keywordflow">if</span>( !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.is_transparent( elem ) ) {</div>
<div class="line"><a id="l04820" name="l04820"></a><span class="lineno"> 4820</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04821" name="l04821"></a><span class="lineno"> 4821</span>            }</div>
<div class="line"><a id="l04822" name="l04822"></a><span class="lineno"> 4822</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_field( elem, <a class="code hl_variable" href="field__type_8cpp.html#a67e1c2ea914225c5affdf6b847e61e26">fd_dazzling</a>, 1 );</div>
<div class="line"><a id="l04823" name="l04823"></a><span class="lineno"> 4823</span>        }</div>
<div class="line"><a id="l04824" name="l04824"></a><span class="lineno"> 4824</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04825" name="l04825"></a><span class="lineno"> 4825</span> </div>
<div class="line"><a id="l04826" name="l04826"></a><span class="lineno"> 4826</span>    }</div>
<div class="line"><a id="l04827" name="l04827"></a><span class="lineno"> 4827</span> </div>
<div class="line"><a id="l04828" name="l04828"></a><span class="lineno"> 4828</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04829" name="l04829"></a><span class="lineno"> 4829</span>}</div>
<div class="ttc" id="aclassCharacter_html_a17446e14fd6046648a505c4aaec3d976"><div class="ttname"><a href="classCharacter.html#a17446e14fd6046648a505c4aaec3d976">Character::mod_power_level</a></div><div class="ttdeci">void mod_power_level(const units::energy &amp;npower)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01976">character.cpp:1976</a></div></div>
<div class="ttc" id="aclassCharacter_html_a464e960411f87bd3be76d5142dc255cb"><div class="ttname"><a href="classCharacter.html#a464e960411f87bd3be76d5142dc255cb">Character::posx</a></div><div class="ttdeci">int posx() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00838">character.h:838</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4b4d2e6bf4190c6470b282ce60183c0f"><div class="ttname"><a href="classCharacter.html#a4b4d2e6bf4190c6470b282ce60183c0f">Character::posy</a></div><div class="ttdeci">int posy() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00841">character.h:841</a></div></div>
<div class="ttc" id="aclassCharacter_html_a611bd51d6d4fa9c119787f2fbc6bdd52"><div class="ttname"><a href="classCharacter.html#a611bd51d6d4fa9c119787f2fbc6bdd52">Character::i_add</a></div><div class="ttdeci">item &amp; i_add(item it, bool should_stack=true)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02310">character.cpp:2310</a></div></div>
<div class="ttc" id="aclassCharacter_html_a8e2d2e1c01bfbb36401ae221300370f5"><div class="ttname"><a href="classCharacter.html#a8e2d2e1c01bfbb36401ae221300370f5">Character::has_two_arms</a></div><div class="ttdeci">bool has_two_arms() const</div><div class="ttdoc">Returns true if the player has two functioning arms.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01270">character.cpp:1270</a></div></div>
<div class="ttc" id="aclassCharacter_html_a994c83d61054215e81a6e87478d81203"><div class="ttname"><a href="classCharacter.html#a994c83d61054215e81a6e87478d81203">Character::int_cur</a></div><div class="ttdeci">int int_cur</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00306">character.h:306</a></div></div>
<div class="ttc" id="aclassCharacter_html_abfefc2e9898fff84f1d6bf007a73a976"><div class="ttname"><a href="classCharacter.html#abfefc2e9898fff84f1d6bf007a73a976">Character::wield</a></div><div class="ttdeci">virtual bool wield(item &amp;target)=0</div><div class="ttdoc">Removes currently wielded item (if any) and replaces it with the target item.</div></div>
<div class="ttc" id="aclassCharacter_html_add22510ff2fa20a662868b4dd86e030e"><div class="ttname"><a href="classCharacter.html#add22510ff2fa20a662868b4dd86e030e">Character::get_power_level</a></div><div class="ttdeci">units::energy get_power_level() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01956">character.cpp:1956</a></div></div>
<div class="ttc" id="aclassCharacter_html_af9c7419575e23d52745c94009929fafb"><div class="ttname"><a href="classCharacter.html#af9c7419575e23d52745c94009929fafb">Character::has_active_bionic</a></div><div class="ttdeci">bool has_active_bionic(const bionic_id &amp;b) const</div><div class="ttdoc">Returns true if the player has the entered bionic id and it is powered on.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01876">character.cpp:1876</a></div></div>
<div class="ttc" id="aclassCreature_html_a3a3ada596854cf8084b3a728b633a9db"><div class="ttname"><a href="classCreature.html#a3a3ada596854cf8084b3a728b633a9db">Creature::posz</a></div><div class="ttdeci">virtual int posz() const =0</div></div>
<div class="ttc" id="aclassitem_html_aaf0e79cb1bc190daa4804cfd62f279c4"><div class="ttname"><a href="classitem.html#aaf0e79cb1bc190daa4804cfd62f279c4">item::set_flag</a></div><div class="ttdeci">item &amp; set_flag(const std::string &amp;flag)</div><div class="ttdoc">Idempotent filter setting an item specific flag.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05221">item.cpp:5221</a></div></div>
<div class="ttc" id="aclassuilist_html"><div class="ttname"><a href="classuilist.html">uilist</a></div><div class="ttdoc">uilist: scrolling vertical list menu</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00186">ui.h:187</a></div></div>
<div class="ttc" id="aclassuilist_html_a0baa34622db6972a59d47d478bfd21d6"><div class="ttname"><a href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">uilist::ret</a></div><div class="ttdeci">int ret</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00412">ui.h:412</a></div></div>
<div class="ttc" id="aclassuilist_html_a55ee0f9e08269bd6e8116b67f4c39836"><div class="ttname"><a href="classuilist.html#a55ee0f9e08269bd6e8116b67f4c39836">uilist::allow_cancel</a></div><div class="ttdeci">bool allow_cancel</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00362">ui.h:362</a></div></div>
<div class="ttc" id="aclassuilist_html_af59dd3fdde04746dbc5cb52b355577ce"><div class="ttname"><a href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">uilist::text</a></div><div class="ttdeci">std::string text</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00320">ui.h:320</a></div></div>
<div class="ttc" id="aclassuilist_html_af99f28334902af64487e2d0758df2ab9"><div class="ttname"><a href="classuilist.html#af99f28334902af64487e2d0758df2ab9">uilist::addentry</a></div><div class="ttdeci">void addentry(const std::string &amp;str)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l00932">ui.cpp:932</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a4a34f7ffa4c18effba7f8239c68c8738"><div class="ttname"><a href="coordinates_8h.html#a4a34f7ffa4c18effba7f8239c68c8738">line_to</a></div><div class="ttdeci">std::vector&lt; coords::coord_point&lt; Point, Origin, Scale &gt; &gt; line_to(const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00548">coordinates.h:548</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a4bad315aa1dfb35f303b391abd786ae3"><div class="ttname"><a href="field__type_8cpp.html#a4bad315aa1dfb35f303b391abd786ae3">fd_tear_gas</a></div><div class="ttdeci">field_type_id fd_tear_gas</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00348">field_type.cpp:348</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a67e1c2ea914225c5affdf6b847e61e26"><div class="ttname"><a href="field__type_8cpp.html#a67e1c2ea914225c5affdf6b847e61e26">fd_dazzling</a></div><div class="ttdeci">field_type_id fd_dazzling</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00361">field_type.cpp:361</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_ad86d7b9ff1a8fb05d7481abd08d0c375"><div class="ttname"><a href="field__type_8cpp.html#ad86d7b9ff1a8fb05d7481abd08d0c375">fd_relax_gas</a></div><div class="ttdeci">field_type_id fd_relax_gas</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00373">field_type.cpp:373</a></div></div>
<div class="ttc" id="agroup__UI_html_ga7604af7545244003f0a52ac87ce37979"><div class="ttname"><a href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">uilist::query</a></div><div class="ttdeci">void query(bool loop=true, int timeout=-1)</div><div class="ttdoc">Handle input and update display.</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l00828">ui.cpp:828</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a798aca7aaa95fcd49a98b52c7be9b3cc"><div class="ttname"><a href="monattack_8cpp.html#a798aca7aaa95fcd49a98b52c7be9b3cc">bio_uncanny_dodge</a></div><div class="ttdeci">static const bionic_id bio_uncanny_dodge(&quot;bio_uncanny_dodge&quot;)</div></div>
<div class="ttc" id="anamespacecalendar_html_ab01178b933b4f1c62bd75b2edfdbaf79"><div class="ttname"><a href="namespacecalendar.html#ab01178b933b4f1c62bd75b2edfdbaf79">calendar::start_of_cataclysm</a></div><div class="ttdeci">const time_point &amp; start_of_cataclysm</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00033">calendar.cpp:33</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="item_8h_source.html#l02233">item::active</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="player_8cpp_source.html#l04373">player::add_msg_player_or_npc()</a>, <a class="el" href="ui_8cpp_source.html#l00932">uilist::addentry()</a>, <a class="el" href="mtype_8h_source.html#l00269">mtype::agro</a>, <a class="el" href="ui_8h_source.html#l00362">uilist::allow_cancel</a>, <a class="el" href="monster_8h_source.html#l00472">monster::anger</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="monattack_8cpp.html#a798aca7aaa95fcd49a98b52c7be9b3cc">bio_uncanny_dodge</a>, <a class="el" href="item_8h_source.html#l02195">item::charges</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::combat</a>, <a class="el" href="character_8h_source.html#l00305">Character::dex_cur</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::electronic_speech</a>, <a class="el" href="field__type_8cpp_source.html#l00361">fd_dazzling</a>, <a class="el" href="field__type_8cpp_source.html#l00373">fd_relax_gas</a>, <a class="el" href="field__type_8cpp_source.html#l00348">fd_tear_gas</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="monster_8cpp_source.html#l02894">monster::get_hp()</a>, <a class="el" href="monster_8cpp_source.html#l02884">monster::get_hp_max()</a>, <a class="el" href="character_8cpp_source.html#l01956">Character::get_power_level()</a>, <a class="el" href="character_8cpp_source.html#l01876">Character::has_active_bionic()</a>, <a class="el" href="character_8cpp_source.html#l01270">Character::has_two_arms()</a>, <a class="el" href="character_8cpp_source.html#l02310">Character::i_add()</a>, <a class="el" href="mtype_8h_source.html#l00240">mtype::id</a>, <a class="el" href="character_8h_source.html#l00306">Character::int_cur</a>, <a class="el" href="monattack_8cpp_source.html#l00275">is_adjacent()</a>, <a class="el" href="melee_8cpp_source.html#l00145">Character::is_armed()</a>, <a class="el" href="monattack_8cpp.html#a8036e3cd7d05e67da5e6e9ddc4caec9b">itype_e_handcuffs</a>, <a class="el" href="coordinates_8h_source.html#l00548">line_to()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00253">m_good</a>, <a class="el" href="itype_8h_source.html#l01101">itype::maximum_charges()</a>, <a class="el" href="character_8cpp_source.html#l01976">Character::mod_power_level()</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="calendar_8cpp_source.html#l00490">calendar::once_every()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="classCreature.html#af712029844aef7ebc7af88a9242e2df0">Creature::posx()</a>, <a class="el" href="character_8h_source.html#l00838">Character::posx()</a>, <a class="el" href="classCreature.html#a1be20ab434ada66748d5b62fcfdbd5e4">Creature::posy()</a>, <a class="el" href="character_8h_source.html#l00841">Character::posy()</a>, <a class="el" href="classCreature.html#a3a3ada596854cf8084b3a728b633a9db">Creature::posz()</a>, <a class="el" href="ui_8cpp_source.html#l00828">uilist::query()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="item_8cpp_source.html#l05221">item::set_flag()</a>, <a class="el" href="item_8cpp_source.html#l00992">item::set_var()</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, <a class="el" href="calendar_8cpp_source.html#l00033">calendar::start_of_cataclysm</a>, <a class="el" href="string__id_8h_source.html#l00255">string_id&lt; T &gt;::str()</a>, <a class="el" href="ui_8h_source.html#l00320">uilist::text</a>, <a class="el" href="item_8h_source.html#l02156">item::type</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, <a class="el" href="item_8cpp_source.html#l08196">item::typeId()</a>, <a class="el" href="character_8h_source.html#l01585">Character::weapon</a>, and <a class="el" href="classCharacter.html#abfefc2e9898fff84f1d6bf007a73a976">Character::wield()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a69edf9ed7981f29303fa89ab10fba1a5" name="a69edf9ed7981f29303fa89ab10fba1a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69edf9ed7981f29303fa89ab10fba1a5">&#9670;&nbsp;</a></span>science()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::science </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
Dodge increases chance to avoid science effect 
<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l01182">1182</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>{<span class="comment"></span></div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span><span class="comment">    ////////////////////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span><span class="comment"></span>    <span class="comment">// Constants and Configuration</span></div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span> </div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>    <span class="comment">// attack types</span></div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span>    enum : <span class="keywordtype">int</span> {</div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>        att_shock,</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span>        att_radiation,</div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>        att_manhack,</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>        att_acid_pool,</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>        att_flavor,</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span>        att_enum_size</div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>    };</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span> </div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>    <span class="comment">// max distance that &quot;science&quot; can be applied to the target.</span></div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span>    <span class="keyword">constexpr</span> <span class="keyword">auto</span> max_distance = 5;</div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span> </div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>    <span class="comment">// attack movement costs</span></div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span>    <span class="keyword">constexpr</span> <span class="keywordtype">int</span> att_cost_shock   = 0;</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span>    <span class="keyword">constexpr</span> <span class="keywordtype">int</span> att_cost_rad     = 400;</div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>    <span class="keyword">constexpr</span> <span class="keywordtype">int</span> att_cost_manhack = 200;</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span>    <span class="keyword">constexpr</span> <span class="keywordtype">int</span> att_cost_acid    = 100;</div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span>    <span class="keyword">constexpr</span> <span class="keywordtype">int</span> att_cost_flavor  = 80;</div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span> </div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>    <span class="comment">// radiation attack behavior</span></div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span>    <span class="comment">// how hard it is to dodge</span></div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span>    <span class="keyword">constexpr</span> <span class="keywordtype">int</span> att_rad_dodge_diff    = 16;</div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span>    <span class="comment">// (1/x) inverse chance to cause mutation.</span></div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>    <span class="keyword">constexpr</span> <span class="keywordtype">int</span> att_rad_mutate_chance = 6;</div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span>    <span class="comment">// min radiation</span></div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span>    <span class="keyword">constexpr</span> <span class="keywordtype">int</span> att_rad_dose_min      = 20;</div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span>    <span class="comment">// max radiation</span></div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span>    <span class="keyword">constexpr</span> <span class="keywordtype">int</span> att_rad_dose_max      = 50;</div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span> </div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>    <span class="comment">// acid attack behavior</span></div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span>    <span class="keyword">constexpr</span> <span class="keywordtype">int</span> att_acid_intensity = 3;</div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span> </div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classmonster.html#a0f83a7ee7bd8d96efc80200c5a5caf5b">can_act</a>() ) {</div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span>    }</div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span><span class="comment"></span> </div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span><span class="comment">    ////////////////////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span><span class="comment"></span>    <span class="comment">// Look for a valid target...</span></div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *<span class="keyword">const</span> target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>    <span class="keywordflow">if</span>( !target ) {</div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span>    }</div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span> </div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span>    <span class="comment">// too far</span></div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> dist = <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() );</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>    <span class="keywordflow">if</span>( dist &gt; max_distance ) {</div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>    }</div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span> </div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>    <span class="comment">// can&#39;t attack what you can&#39;t see</span></div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>    }</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span><span class="comment"></span> </div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span><span class="comment">    ////////////////////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span><span class="comment"></span>    <span class="comment">// okay, we have a valid target; populate valid attack options...</span></div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>    std::array&lt;int, att_enum_size&gt; valid_attacks;</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>    <span class="keywordtype">size_t</span> valid_attack_count = 0;</div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span> </div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>    <span class="comment">// can only shock if adjacent</span></div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>    <span class="keywordflow">if</span>( dist == 1 ) {</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>        valid_attacks[valid_attack_count++] = att_shock;</div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>    }</div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span> </div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span>    <span class="comment">// TODO: mutate() doesn&#39;t like non-players right now</span></div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span>    <span class="comment">// It will mutate NPCs, but it will say it mutated the player</span></div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span>    <a class="code hl_class" href="classplayer.html">player</a> *<span class="keyword">const</span> foe = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classplayer.html">player</a> *<span class="keyword">&gt;</span>( target );</div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span>    <span class="keywordflow">if</span>( ( foe == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ) &amp;&amp; dist &lt;= 2 ) {</div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>        valid_attacks[valid_attack_count++] = att_radiation;</div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span>    }</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span> </div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>    <span class="comment">// need an open space for these attacks</span></div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>    <span class="keyword">const</span> <span class="keyword">auto</span> empty_neighbors = <a class="code hl_function" href="monattack_8cpp.html#afe0996fe2093499cd8a828c3f9e0a01e">find_empty_neighbors</a>( *z );</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span> empty_neighbor_count = empty_neighbors.second;</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span> </div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>    <span class="keywordflow">if</span>( empty_neighbor_count ) {</div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>        <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">ammo</a>[<a class="code hl_variable" href="monattack_8cpp.html#a7f6ed923373a1ec26ec1c6d1693ee8f7">itype_bot_manhack</a>] &gt; 0 ) {</div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>            valid_attacks[valid_attack_count++] = att_manhack;</div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>        }</div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span>        valid_attacks[valid_attack_count++] = att_acid_pool;</div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>    }</div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span> </div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span>    <span class="comment">// flavor is always okay</span></div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span>    valid_attacks[valid_attack_count++] = att_flavor;</div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span><span class="comment"></span> </div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span><span class="comment">    ////////////////////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span><span class="comment"></span>    <span class="comment">// choose and do a valid attack</span></div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> attack_index = <a class="code hl_function" href="monattack_8cpp.html#a249f9c28fb794544f38efa09455f524c">get_random_index</a>( valid_attack_count );</div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>    <span class="keywordflow">switch</span>( valid_attacks[attack_index] ) {</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>            <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Bad attack enum value %d&quot;</span>, valid_attacks[attack_index] );</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>        <span class="keywordflow">case</span> att_shock :</div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>            z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= att_cost_shock;</div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span> </div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>            <span class="comment">// Just reuse the taze - it&#39;s a bit different (shocks torso vs all),</span></div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>            <span class="comment">// but let&#39;s go for consistency here</span></div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>            <a class="code hl_function" href="namespacemattack.html#aa15cec367682f51a8071d832bd2371aa">taze</a>( z, target );</div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>        <span class="keywordflow">case</span> att_radiation : {</div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span>            z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= att_cost_rad;</div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span> </div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>            <span class="comment">// if the player can see it</span></div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span>                <span class="comment">// TODO: mutate() doesn&#39;t like non-players right now</span></div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s fires a shimmering beam towards %2$s!&quot;</span> ),</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>                         z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">disp_name</a>() );</div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>            }</div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span> </div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>            <span class="comment">// (1) Give the target a chance at an uncanny_dodge.</span></div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span>            <span class="comment">// (2) If that fails, always fail to dodge 1 in dodge_skill times.</span></div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span>            <span class="comment">// (3) If okay, dodge if dodge_skill &gt; att_rad_dodge_diff.</span></div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span>            <span class="comment">// (4) Otherwise, fail 1 in (att_rad_dodge_diff - dodge_skill) times.</span></div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span>            <span class="keywordflow">if</span>( foe-&gt;<a class="code hl_function" href="classplayer.html#a8ef167aef3a35a062b56c8905f59b133">uncanny_dodge</a>() ) {</div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>            }</div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span> </div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span>            <span class="keyword">const</span> <span class="keywordtype">int</span>  dodge_skill  = foe-&gt;<a class="code hl_function" href="classCharacter.html#aff7c6ea07bde0a44d9d08b1bacde9064">get_dodge</a>();</div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>            <span class="keyword">const</span> <span class="keywordtype">bool</span> critial_fail = <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( dodge_skill );</div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>            <span class="keyword">const</span> <span class="keywordtype">bool</span> is_trivial   = dodge_skill &gt; att_rad_dodge_diff;</div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span><span class="comment"></span> </div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span><span class="comment">            ///\EFFECT_DODGE increases chance to avoid science effect</span></div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span><span class="comment"></span>            <span class="keywordflow">if</span>( !critial_fail &amp;&amp; ( is_trivial || dodge_skill &gt; <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, att_rad_dodge_diff ) ) ) {</div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>                target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You dodge the beam!&quot;</span> ),</div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>                                               <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; dodges the beam!&quot;</span> ) );</div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span>                <span class="keywordtype">bool</span> rad_proof = !foe-&gt;<a class="code hl_function" href="classCharacter.html#af157e1fa623589a34b3c23a511dbc797">irradiate</a>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( att_rad_dose_min, att_rad_dose_max ) );</div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span>                <span class="keywordflow">if</span>( rad_proof ) {</div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span>                    target-&gt;<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your armor protects you from the radiation!&quot;</span> ) );</div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( att_rad_mutate_chance ) ) {</div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span>                    foe-&gt;<a class="code hl_function" href="classCharacter.html#a219dfd606ef95e169114487e61ba0ad7">mutate</a>();</div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span>                    target-&gt;<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You get pins and needles all over.&quot;</span> ) );</div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span>                }</div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span>            }</div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>        }</div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>        <span class="keywordflow">case</span> att_manhack : {</div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span>            z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= att_cost_manhack;</div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>            z-&gt;<a class="code hl_variable" href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">ammo</a>[<a class="code hl_variable" href="monattack_8cpp.html#a7f6ed923373a1ec26ec1c6d1693ee8f7">itype_bot_manhack</a>]--;</div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span> </div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>            <span class="comment">// if the player can see it</span></div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A manhack flies out of one of the holes on the %s!&quot;</span> ),</div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>                         z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>            }</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span> </div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> where = empty_neighbors.first[<a class="code hl_function" href="monattack_8cpp.html#a249f9c28fb794544f38efa09455f524c">get_random_index</a>( empty_neighbor_count )];</div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>            <span class="keywordflow">if</span>( <a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">const</span> manhack = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_at( <a class="code hl_variable" href="monattack_8cpp.html#ac12a5ecdcdc46ba58d3707dcfb6d27cf">mon_manhack</a>, where ) ) {</div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>                manhack-&gt;make_ally( *z );</div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>            }</div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span>        }</div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span>        <span class="keywordflow">case</span> att_acid_pool :</div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>            z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= att_cost_acid;</div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span> </div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span>            <span class="comment">// if the player can see it</span></div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>,</div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span>                         <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s shudders, and some sort of caustic fluid leaks from a its damaged shell!&quot;</span> ),</div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>                         z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span>            }</div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span> </div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span>            <span class="comment">// fill empty tiles with acid</span></div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span>            <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0; i &lt; empty_neighbor_count; ++i ) {</div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span>                <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;p = empty_neighbors.first[i];</div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_field( p, <a class="code hl_variable" href="field__type_8cpp.html#ab7a8a9cdb74831f6553f4abf5df22873">fd_acid</a>, att_acid_intensity );</div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>            }</div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span> </div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span>        <span class="keywordflow">case</span> att_flavor : {</div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span>            <span class="comment">// flavor messages</span></div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span>            <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;std::string, 4&gt; m_flavor = {{</div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span>                    <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;The %s shudders, letting out an eery metallic whining noise!&quot;</span> ),</div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span>                    <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;The %s scratches its long legs along the floor, shooting sparks.&quot;</span> ),</div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>                    <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;The %s bleeps inquiringly and focuses a red camera-eye on you.&quot;</span> ),</div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span>                    <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;The %s&#39;s combat arms crackle with electricity.&quot;</span> ),</div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>                    <span class="comment">//special case; leave the electricity last</span></div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>                }</div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>            };</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span> </div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>            <span class="keyword">const</span> <span class="keywordtype">size_t</span> i = <a class="code hl_function" href="monattack_8cpp.html#a249f9c28fb794544f38efa09455f524c">get_random_index</a>( m_flavor );</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span> </div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span>            <span class="comment">// the special case; see above</span></div>
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"> 1372</span>            <span class="keywordflow">if</span>( i == m_flavor.size() - 1 ) {</div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span>                z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= att_cost_flavor;</div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span>            }</div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span> </div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span>            <span class="comment">// if the player can see it, else forget about it</span></div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( m_flavor[i] ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span>            }</div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span>        }</div>
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"> 1381</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"> 1382</span>    }</div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span> </div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span>}</div>
<div class="ttc" id="aclassCharacter_html_a219dfd606ef95e169114487e61ba0ad7"><div class="ttname"><a href="classCharacter.html#a219dfd606ef95e169114487e61ba0ad7">Character::mutate</a></div><div class="ttdeci">void mutate()</div><div class="ttdoc">Picks a random valid mutation and gives it to the Character, possibly removing/changing others along ...</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00845">mutation.cpp:845</a></div></div>
<div class="ttc" id="aclassCharacter_html_af157e1fa623589a34b3c23a511dbc797"><div class="ttname"><a href="classCharacter.html#af157e1fa623589a34b3c23a511dbc797">Character::irradiate</a></div><div class="ttdeci">bool irradiate(float rads, bool bypass=false)</div><div class="ttdoc">Handles mitigation and application of radiation.</div><div class="ttdef"><b>Definition:</b> <a href="suffer_8cpp_source.html#l01532">suffer.cpp:1532</a></div></div>
<div class="ttc" id="aclassCharacter_html_aff7c6ea07bde0a44d9d08b1bacde9064"><div class="ttname"><a href="classCharacter.html#aff7c6ea07bde0a44d9d08b1bacde9064">Character::get_dodge</a></div><div class="ttdeci">float get_dodge() const override</div><div class="ttdef"><b>Definition:</b> <a href="melee_8cpp_source.html#l00782">melee.cpp:782</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a249f9c28fb794544f38efa09455f524c"><div class="ttname"><a href="monattack_8cpp.html#a249f9c28fb794544f38efa09455f524c">get_random_index</a></div><div class="ttdeci">static size_t get_random_index(const size_t size)</div><div class="ttdoc">Get a size_t value in the closed interval [0, size]; a convenience to avoid messy casting.</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l01167">monattack.cpp:1167</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a7f6ed923373a1ec26ec1c6d1693ee8f7"><div class="ttname"><a href="monattack_8cpp.html#a7f6ed923373a1ec26ec1c6d1693ee8f7">itype_bot_manhack</a></div><div class="ttdeci">static const itype_id itype_bot_manhack(&quot;bot_manhack&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_ac12a5ecdcdc46ba58d3707dcfb6d27cf"><div class="ttname"><a href="monattack_8cpp.html#ac12a5ecdcdc46ba58d3707dcfb6d27cf">mon_manhack</a></div><div class="ttdeci">static const mtype_id mon_manhack(&quot;mon_manhack&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_afe0996fe2093499cd8a828c3f9e0a01e"><div class="ttname"><a href="monattack_8cpp.html#afe0996fe2093499cd8a828c3f9e0a01e">find_empty_neighbors</a></div><div class="ttdeci">std::pair&lt; std::array&lt; tripoint,(2 *N+1) *(2 *N+1) &gt;, size_t &gt; find_empty_neighbors(const tripoint &amp;origin)</div><div class="ttdoc">Find empty spaces around origin within a radius of N.</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l01135">monattack.cpp:1135</a></div></div>
<div class="ttc" id="atranslations_8h_html_a0b3ab525ec6b450b2487e7644255fa7c"><div class="ttname"><a href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a></div><div class="ttdeci">#define translate_marker(x)</div><div class="ttdoc">Marks a string literal to be extracted for translation.</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00030">translations.h:30</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="creature_8h_source.html#l00593">Creature::add_msg_if_player()</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="monster_8h_source.html#l00512">monster::ammo</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="monster_8cpp_source.html#l00931">monster::can_act()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">Creature::disp_name()</a>, <a class="el" href="field__type_8cpp_source.html#l00342">fd_acid</a>, <a class="el" href="monattack_8cpp_source.html#l01135">find_empty_neighbors()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="melee_8cpp_source.html#l00782">Character::get_dodge()</a>, <a class="el" href="monattack_8cpp_source.html#l01167">get_random_index()</a>, <a class="el" href="suffer_8cpp_source.html#l01532">Character::irradiate()</a>, <a class="el" href="monattack_8cpp.html#a7f6ed923373a1ec26ec1c6d1693ee8f7">itype_bot_manhack</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00253">m_good</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="monattack_8cpp.html#ac12a5ecdcdc46ba58d3707dcfb6d27cf">mon_manhack</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="mutation_8cpp_source.html#l00845">Character::mutate()</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, <a class="el" href="monattack_8cpp_source.html#l03247">taze()</a>, <a class="el" href="translations_8h_source.html#l00030">translate_marker</a>, and <a class="el" href="player_8cpp_source.html#l04302">player::uncanny_dodge()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse_8cpp_source.html#l06206">einkpc_download_memory_card()</a>, and <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="ae2b2974c98c5ee48657f30170648279b" name="ae2b2974c98c5ee48657f30170648279b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2b2974c98c5ee48657f30170648279b">&#9670;&nbsp;</a></span>searchlight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::searchlight </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l03436">3436</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03437" name="l03437"></a><span class="lineno"> 3437</span>{</div>
<div class="line"><a id="l03438" name="l03438"></a><span class="lineno"> 3438</span> </div>
<div class="line"><a id="l03439" name="l03439"></a><span class="lineno"> 3439</span>    <span class="keywordtype">int</span> max_lamp_count = 3;</div>
<div class="line"><a id="l03440" name="l03440"></a><span class="lineno"> 3440</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_function" href="classmonster.html#a2d0e466b9d25796cd99402ddd5d3ce20">get_hp</a>() &lt; z-&gt;<a class="code hl_function" href="classmonster.html#a551f4a380282f8ec082c74f410c397de">get_hp_max</a>() ) {</div>
<div class="line"><a id="l03441" name="l03441"></a><span class="lineno"> 3441</span>        max_lamp_count--;</div>
<div class="line"><a id="l03442" name="l03442"></a><span class="lineno"> 3442</span>    }</div>
<div class="line"><a id="l03443" name="l03443"></a><span class="lineno"> 3443</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_function" href="classmonster.html#a2d0e466b9d25796cd99402ddd5d3ce20">get_hp</a>() &lt; z-&gt;<a class="code hl_function" href="classmonster.html#a551f4a380282f8ec082c74f410c397de">get_hp_max</a>() / 3 ) {</div>
<div class="line"><a id="l03444" name="l03444"></a><span class="lineno"> 3444</span>        max_lamp_count--;</div>
<div class="line"><a id="l03445" name="l03445"></a><span class="lineno"> 3445</span>    }</div>
<div class="line"><a id="l03446" name="l03446"></a><span class="lineno"> 3446</span> </div>
<div class="line"><a id="l03447" name="l03447"></a><span class="lineno"> 3447</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> zposx = z-&gt;<a class="code hl_function" href="classmonster.html#ae5824f6fba759aa296cd55b83d2ea60f">posx</a>();</div>
<div class="line"><a id="l03448" name="l03448"></a><span class="lineno"> 3448</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> zposy = z-&gt;<a class="code hl_function" href="classmonster.html#a34e7b9873ad1cf0901f6583895ee3af8">posy</a>();</div>
<div class="line"><a id="l03449" name="l03449"></a><span class="lineno"> 3449</span> </div>
<div class="line"><a id="l03450" name="l03450"></a><span class="lineno"> 3450</span>    <span class="comment">//this searchlight is not initialized</span></div>
<div class="line"><a id="l03451" name="l03451"></a><span class="lineno"> 3451</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#a275d73e1bf3d08e2ea1a0704ac898f7e">inv</a>.empty() ) {</div>
<div class="line"><a id="l03452" name="l03452"></a><span class="lineno"> 3452</span> </div>
<div class="line"><a id="l03453" name="l03453"></a><span class="lineno"> 3453</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; max_lamp_count; i++ ) {</div>
<div class="line"><a id="l03454" name="l03454"></a><span class="lineno"> 3454</span> </div>
<div class="line"><a id="l03455" name="l03455"></a><span class="lineno"> 3455</span>            <a class="code hl_class" href="classitem.html">item</a> settings( <span class="stringliteral">&quot;processor&quot;</span>, <a class="code hl_variable" href="namespacecalendar.html#ab01178b933b4f1c62bd75b2edfdbaf79">calendar::start_of_cataclysm</a> );</div>
<div class="line"><a id="l03456" name="l03456"></a><span class="lineno"> 3456</span> </div>
<div class="line"><a id="l03457" name="l03457"></a><span class="lineno"> 3457</span>            settings.set_var( <span class="stringliteral">&quot;SL_PREFER_UP&quot;</span>, <span class="stringliteral">&quot;TRUE&quot;</span> );</div>
<div class="line"><a id="l03458" name="l03458"></a><span class="lineno"> 3458</span>            settings.set_var( <span class="stringliteral">&quot;SL_PREFER_DOWN&quot;</span>, <span class="stringliteral">&quot;TRUE&quot;</span> );</div>
<div class="line"><a id="l03459" name="l03459"></a><span class="lineno"> 3459</span>            settings.set_var( <span class="stringliteral">&quot;SL_PREFER_RIGHT&quot;</span>, <span class="stringliteral">&quot;TRUE&quot;</span> );</div>
<div class="line"><a id="l03460" name="l03460"></a><span class="lineno"> 3460</span>            settings.set_var( <span class="stringliteral">&quot;SL_PREFER_LEFT&quot;</span>, <span class="stringliteral">&quot;TRUE&quot;</span> );</div>
<div class="line"><a id="l03461" name="l03461"></a><span class="lineno"> 3461</span> </div>
<div class="line"><a id="l03462" name="l03462"></a><span class="lineno"> 3462</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;dest : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 24 ) ) {</div>
<div class="line"><a id="l03463" name="l03463"></a><span class="lineno"> 3463</span>                <span class="keyword">const</span> <a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">const</span> mon = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at&lt;<a class="code hl_class" href="classmonster.html">monster</a>&gt;( dest );</div>
<div class="line"><a id="l03464" name="l03464"></a><span class="lineno"> 3464</span>                <span class="keywordflow">if</span>( mon &amp;&amp; mon-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a> == <a class="code hl_variable" href="monattack_8cpp.html#a6812a56090037286b62793cd746b7d61">mon_turret_searchlight</a> ) {</div>
<div class="line"><a id="l03465" name="l03465"></a><span class="lineno"> 3465</span>                    <span class="keywordflow">if</span>( dest.x &lt; zposx ) {</div>
<div class="line"><a id="l03466" name="l03466"></a><span class="lineno"> 3466</span>                        settings.set_var( <span class="stringliteral">&quot;SL_PREFER_LEFT&quot;</span>, <span class="stringliteral">&quot;FALSE&quot;</span> );</div>
<div class="line"><a id="l03467" name="l03467"></a><span class="lineno"> 3467</span>                    }</div>
<div class="line"><a id="l03468" name="l03468"></a><span class="lineno"> 3468</span>                    <span class="keywordflow">if</span>( dest.x &gt; zposx ) {</div>
<div class="line"><a id="l03469" name="l03469"></a><span class="lineno"> 3469</span>                        settings.set_var( <span class="stringliteral">&quot;SL_PREFER_RIGHT&quot;</span>, <span class="stringliteral">&quot;FALSE&quot;</span> );</div>
<div class="line"><a id="l03470" name="l03470"></a><span class="lineno"> 3470</span>                    }</div>
<div class="line"><a id="l03471" name="l03471"></a><span class="lineno"> 3471</span>                    <span class="keywordflow">if</span>( dest.y &lt; zposy ) {</div>
<div class="line"><a id="l03472" name="l03472"></a><span class="lineno"> 3472</span>                        settings.set_var( <span class="stringliteral">&quot;SL_PREFER_UP&quot;</span>, <span class="stringliteral">&quot;FALSE&quot;</span> );</div>
<div class="line"><a id="l03473" name="l03473"></a><span class="lineno"> 3473</span>                    }</div>
<div class="line"><a id="l03474" name="l03474"></a><span class="lineno"> 3474</span>                    <span class="keywordflow">if</span>( dest.y &gt; zposy ) {</div>
<div class="line"><a id="l03475" name="l03475"></a><span class="lineno"> 3475</span>                        settings.set_var( <span class="stringliteral">&quot;SL_PREFER_DOWN&quot;</span>, <span class="stringliteral">&quot;FALSE&quot;</span> );</div>
<div class="line"><a id="l03476" name="l03476"></a><span class="lineno"> 3476</span>                    }</div>
<div class="line"><a id="l03477" name="l03477"></a><span class="lineno"> 3477</span>                }</div>
<div class="line"><a id="l03478" name="l03478"></a><span class="lineno"> 3478</span>            }</div>
<div class="line"><a id="l03479" name="l03479"></a><span class="lineno"> 3479</span> </div>
<div class="line"><a id="l03480" name="l03480"></a><span class="lineno"> 3480</span>            settings.set_var( <span class="stringliteral">&quot;SL_SPOT_X&quot;</span>, 0 );</div>
<div class="line"><a id="l03481" name="l03481"></a><span class="lineno"> 3481</span>            settings.set_var( <span class="stringliteral">&quot;SL_SPOT_Y&quot;</span>, 0 );</div>
<div class="line"><a id="l03482" name="l03482"></a><span class="lineno"> 3482</span> </div>
<div class="line"><a id="l03483" name="l03483"></a><span class="lineno"> 3483</span>            z-&gt;<a class="code hl_function" href="classmonster.html#a6a50c1ca1b7405a717c95bac530e9e07">add_item</a>( settings );</div>
<div class="line"><a id="l03484" name="l03484"></a><span class="lineno"> 3484</span>        }</div>
<div class="line"><a id="l03485" name="l03485"></a><span class="lineno"> 3485</span>    }</div>
<div class="line"><a id="l03486" name="l03486"></a><span class="lineno"> 3486</span> </div>
<div class="line"><a id="l03487" name="l03487"></a><span class="lineno"> 3487</span>    <span class="comment">//battery charge from the generator is enough for some time of work</span></div>
<div class="line"><a id="l03488" name="l03488"></a><span class="lineno"> 3488</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( 10_minutes ) ) {</div>
<div class="line"><a id="l03489" name="l03489"></a><span class="lineno"> 3489</span> </div>
<div class="line"><a id="l03490" name="l03490"></a><span class="lineno"> 3490</span>        <span class="keywordtype">bool</span> generator_ok = <span class="keyword">false</span>;</div>
<div class="line"><a id="l03491" name="l03491"></a><span class="lineno"> 3491</span> </div>
<div class="line"><a id="l03492" name="l03492"></a><span class="lineno"> 3492</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> x = zposx - 24; x &lt; zposx + 24; x++ ) {</div>
<div class="line"><a id="l03493" name="l03493"></a><span class="lineno"> 3493</span>            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> y = zposy - 24; y &lt; zposy + 24; y++ ) {</div>
<div class="line"><a id="l03494" name="l03494"></a><span class="lineno"> 3494</span>                <a class="code hl_struct" href="structtripoint.html">tripoint</a> dest( x, y, z-&gt;<a class="code hl_function" href="classmonster.html#a3690c104bd71bffc25153a86229f2a97">posz</a>() );</div>
<div class="line"><a id="l03495" name="l03495"></a><span class="lineno"> 3495</span>                <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.ter( dest ) == <a class="code hl_class" href="classstring__id.html">ter_str_id</a>( <span class="stringliteral">&quot;t_plut_generator&quot;</span> ) ) {</div>
<div class="line"><a id="l03496" name="l03496"></a><span class="lineno"> 3496</span>                    generator_ok = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03497" name="l03497"></a><span class="lineno"> 3497</span>                }</div>
<div class="line"><a id="l03498" name="l03498"></a><span class="lineno"> 3498</span>            }</div>
<div class="line"><a id="l03499" name="l03499"></a><span class="lineno"> 3499</span>        }</div>
<div class="line"><a id="l03500" name="l03500"></a><span class="lineno"> 3500</span> </div>
<div class="line"><a id="l03501" name="l03501"></a><span class="lineno"> 3501</span>        <span class="keywordflow">if</span>( !generator_ok ) {</div>
<div class="line"><a id="l03502" name="l03502"></a><span class="lineno"> 3502</span>            <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;settings : z-&gt;<a class="code hl_variable" href="classmonster.html#a275d73e1bf3d08e2ea1a0704ac898f7e">inv</a> ) {</div>
<div class="line"><a id="l03503" name="l03503"></a><span class="lineno"> 3503</span>                settings.set_var( <span class="stringliteral">&quot;SL_POWER&quot;</span>, <span class="stringliteral">&quot;OFF&quot;</span> );</div>
<div class="line"><a id="l03504" name="l03504"></a><span class="lineno"> 3504</span>            }</div>
<div class="line"><a id="l03505" name="l03505"></a><span class="lineno"> 3505</span> </div>
<div class="line"><a id="l03506" name="l03506"></a><span class="lineno"> 3506</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03507" name="l03507"></a><span class="lineno"> 3507</span>        }</div>
<div class="line"><a id="l03508" name="l03508"></a><span class="lineno"> 3508</span>    }</div>
<div class="line"><a id="l03509" name="l03509"></a><span class="lineno"> 3509</span> </div>
<div class="line"><a id="l03510" name="l03510"></a><span class="lineno"> 3510</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; max_lamp_count; i++ ) {</div>
<div class="line"><a id="l03511" name="l03511"></a><span class="lineno"> 3511</span> </div>
<div class="line"><a id="l03512" name="l03512"></a><span class="lineno"> 3512</span>        <a class="code hl_class" href="classitem.html">item</a> &amp;settings = z-&gt;<a class="code hl_variable" href="classmonster.html#a275d73e1bf3d08e2ea1a0704ac898f7e">inv</a>[i];</div>
<div class="line"><a id="l03513" name="l03513"></a><span class="lineno"> 3513</span> </div>
<div class="line"><a id="l03514" name="l03514"></a><span class="lineno"> 3514</span>        <span class="keywordflow">if</span>( settings.<a class="code hl_function" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;SL_POWER&quot;</span> )  == <span class="stringliteral">&quot;OFF&quot;</span> ) {</div>
<div class="line"><a id="l03515" name="l03515"></a><span class="lineno"> 3515</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03516" name="l03516"></a><span class="lineno"> 3516</span>        }</div>
<div class="line"><a id="l03517" name="l03517"></a><span class="lineno"> 3517</span> </div>
<div class="line"><a id="l03518" name="l03518"></a><span class="lineno"> 3518</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> rng_dir = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 7 );</div>
<div class="line"><a id="l03519" name="l03519"></a><span class="lineno"> 3519</span> </div>
<div class="line"><a id="l03520" name="l03520"></a><span class="lineno"> 3520</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 5 ) ) {</div>
<div class="line"><a id="l03521" name="l03521"></a><span class="lineno"> 3521</span> </div>
<div class="line"><a id="l03522" name="l03522"></a><span class="lineno"> 3522</span>            <span class="keywordflow">if</span>( !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 5 ) ) {</div>
<div class="line"><a id="l03523" name="l03523"></a><span class="lineno"> 3523</span>                settings.<a class="code hl_function" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;SL_DIR&quot;</span>, rng_dir );</div>
<div class="line"><a id="l03524" name="l03524"></a><span class="lineno"> 3524</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03525" name="l03525"></a><span class="lineno"> 3525</span>                <span class="keyword">const</span> <span class="keywordtype">int</span> rng_pref = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 3 ) * 2;</div>
<div class="line"><a id="l03526" name="l03526"></a><span class="lineno"> 3526</span>                <span class="keywordflow">if</span>( rng_pref == 0 &amp;&amp; settings.<a class="code hl_function" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;SL_PREFER_UP&quot;</span> ) == <span class="stringliteral">&quot;TRUE&quot;</span> ) {</div>
<div class="line"><a id="l03527" name="l03527"></a><span class="lineno"> 3527</span>                    settings.<a class="code hl_function" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;SL_DIR&quot;</span>, rng_pref );</div>
<div class="line"><a id="l03528" name="l03528"></a><span class="lineno"> 3528</span>                } <span class="keywordflow">else</span>            <span class="keywordflow">if</span>( rng_pref == 2 &amp;&amp; settings.<a class="code hl_function" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;SL_PREFER_RIGHT&quot;</span> ) == <span class="stringliteral">&quot;TRUE&quot;</span> ) {</div>
<div class="line"><a id="l03529" name="l03529"></a><span class="lineno"> 3529</span>                    settings.<a class="code hl_function" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;SL_DIR&quot;</span>, rng_pref );</div>
<div class="line"><a id="l03530" name="l03530"></a><span class="lineno"> 3530</span>                } <span class="keywordflow">else</span>            <span class="keywordflow">if</span>( rng_pref == 4 &amp;&amp; settings.<a class="code hl_function" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;SL_PREFER_DOWN&quot;</span> ) == <span class="stringliteral">&quot;TRUE&quot;</span> ) {</div>
<div class="line"><a id="l03531" name="l03531"></a><span class="lineno"> 3531</span>                    settings.<a class="code hl_function" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;SL_DIR&quot;</span>, rng_pref );</div>
<div class="line"><a id="l03532" name="l03532"></a><span class="lineno"> 3532</span>                } <span class="keywordflow">else</span>            <span class="keywordflow">if</span>( rng_pref == 6 &amp;&amp; settings.<a class="code hl_function" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;SL_PREFER_LEFT&quot;</span> ) == <span class="stringliteral">&quot;TRUE&quot;</span> ) {</div>
<div class="line"><a id="l03533" name="l03533"></a><span class="lineno"> 3533</span>                    settings.<a class="code hl_function" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;SL_DIR&quot;</span>, rng_pref );</div>
<div class="line"><a id="l03534" name="l03534"></a><span class="lineno"> 3534</span>                }</div>
<div class="line"><a id="l03535" name="l03535"></a><span class="lineno"> 3535</span>            }</div>
<div class="line"><a id="l03536" name="l03536"></a><span class="lineno"> 3536</span>        }</div>
<div class="line"><a id="l03537" name="l03537"></a><span class="lineno"> 3537</span> </div>
<div class="line"><a id="l03538" name="l03538"></a><span class="lineno"> 3538</span>        <span class="keywordtype">int</span> x = zposx + settings.<a class="code hl_function" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;SL_SPOT_X&quot;</span>, 0 );</div>
<div class="line"><a id="l03539" name="l03539"></a><span class="lineno"> 3539</span>        <span class="keywordtype">int</span> y = zposy + settings.<a class="code hl_function" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;SL_SPOT_Y&quot;</span>, 0 );</div>
<div class="line"><a id="l03540" name="l03540"></a><span class="lineno"> 3540</span>        <span class="keywordtype">int</span> shift = 0;</div>
<div class="line"><a id="l03541" name="l03541"></a><span class="lineno"> 3541</span> </div>
<div class="line"><a id="l03542" name="l03542"></a><span class="lineno"> 3542</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 2 ); i++ ) {</div>
<div class="line"><a id="l03543" name="l03543"></a><span class="lineno"> 3543</span> </div>
<div class="line"><a id="l03544" name="l03544"></a><span class="lineno"> 3544</span>            <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ) ) {</div>
<div class="line"><a id="l03545" name="l03545"></a><span class="lineno"> 3545</span>                shift = settings.<a class="code hl_function" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;SL_DIR&quot;</span>, shift );</div>
<div class="line"><a id="l03546" name="l03546"></a><span class="lineno"> 3546</span> </div>
<div class="line"><a id="l03547" name="l03547"></a><span class="lineno"> 3547</span>                <span class="keywordflow">switch</span>( shift ) {</div>
<div class="line"><a id="l03548" name="l03548"></a><span class="lineno"> 3548</span>                    <span class="keywordflow">case</span> 0:</div>
<div class="line"><a id="l03549" name="l03549"></a><span class="lineno"> 3549</span>                        y--;</div>
<div class="line"><a id="l03550" name="l03550"></a><span class="lineno"> 3550</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03551" name="l03551"></a><span class="lineno"> 3551</span>                    <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l03552" name="l03552"></a><span class="lineno"> 3552</span>                        y--;</div>
<div class="line"><a id="l03553" name="l03553"></a><span class="lineno"> 3553</span>                        x++;</div>
<div class="line"><a id="l03554" name="l03554"></a><span class="lineno"> 3554</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03555" name="l03555"></a><span class="lineno"> 3555</span>                    <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l03556" name="l03556"></a><span class="lineno"> 3556</span>                        x++;</div>
<div class="line"><a id="l03557" name="l03557"></a><span class="lineno"> 3557</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03558" name="l03558"></a><span class="lineno"> 3558</span>                    <span class="keywordflow">case</span> 3:</div>
<div class="line"><a id="l03559" name="l03559"></a><span class="lineno"> 3559</span>                        x++;</div>
<div class="line"><a id="l03560" name="l03560"></a><span class="lineno"> 3560</span>                        y++;</div>
<div class="line"><a id="l03561" name="l03561"></a><span class="lineno"> 3561</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03562" name="l03562"></a><span class="lineno"> 3562</span>                    <span class="keywordflow">case</span> 4:</div>
<div class="line"><a id="l03563" name="l03563"></a><span class="lineno"> 3563</span>                        y++;</div>
<div class="line"><a id="l03564" name="l03564"></a><span class="lineno"> 3564</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03565" name="l03565"></a><span class="lineno"> 3565</span>                    <span class="keywordflow">case</span> 5:</div>
<div class="line"><a id="l03566" name="l03566"></a><span class="lineno"> 3566</span>                        y++;</div>
<div class="line"><a id="l03567" name="l03567"></a><span class="lineno"> 3567</span>                        x--;</div>
<div class="line"><a id="l03568" name="l03568"></a><span class="lineno"> 3568</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03569" name="l03569"></a><span class="lineno"> 3569</span>                    <span class="keywordflow">case</span> 6:</div>
<div class="line"><a id="l03570" name="l03570"></a><span class="lineno"> 3570</span>                        x--;</div>
<div class="line"><a id="l03571" name="l03571"></a><span class="lineno"> 3571</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03572" name="l03572"></a><span class="lineno"> 3572</span>                    <span class="keywordflow">case</span> 7:</div>
<div class="line"><a id="l03573" name="l03573"></a><span class="lineno"> 3573</span>                        x--;</div>
<div class="line"><a id="l03574" name="l03574"></a><span class="lineno"> 3574</span>                        y--;</div>
<div class="line"><a id="l03575" name="l03575"></a><span class="lineno"> 3575</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03576" name="l03576"></a><span class="lineno"> 3576</span> </div>
<div class="line"><a id="l03577" name="l03577"></a><span class="lineno"> 3577</span>                    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l03578" name="l03578"></a><span class="lineno"> 3578</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03579" name="l03579"></a><span class="lineno"> 3579</span>                }</div>
<div class="line"><a id="l03580" name="l03580"></a><span class="lineno"> 3580</span> </div>
<div class="line"><a id="l03581" name="l03581"></a><span class="lineno"> 3581</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03582" name="l03582"></a><span class="lineno"> 3582</span>                <span class="keywordflow">if</span>( x &lt; g-&gt;u.posx() ) {</div>
<div class="line"><a id="l03583" name="l03583"></a><span class="lineno"> 3583</span>                    x++;</div>
<div class="line"><a id="l03584" name="l03584"></a><span class="lineno"> 3584</span>                }</div>
<div class="line"><a id="l03585" name="l03585"></a><span class="lineno"> 3585</span>                <span class="keywordflow">if</span>( x &gt; <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.posx() ) {</div>
<div class="line"><a id="l03586" name="l03586"></a><span class="lineno"> 3586</span>                    x--;</div>
<div class="line"><a id="l03587" name="l03587"></a><span class="lineno"> 3587</span>                }</div>
<div class="line"><a id="l03588" name="l03588"></a><span class="lineno"> 3588</span>                <span class="keywordflow">if</span>( y &lt; g-&gt;u.posy() ) {</div>
<div class="line"><a id="l03589" name="l03589"></a><span class="lineno"> 3589</span>                    y++;</div>
<div class="line"><a id="l03590" name="l03590"></a><span class="lineno"> 3590</span>                }</div>
<div class="line"><a id="l03591" name="l03591"></a><span class="lineno"> 3591</span>                <span class="keywordflow">if</span>( y &gt; <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.posy() ) {</div>
<div class="line"><a id="l03592" name="l03592"></a><span class="lineno"> 3592</span>                    y--;</div>
<div class="line"><a id="l03593" name="l03593"></a><span class="lineno"> 3593</span>                }</div>
<div class="line"><a id="l03594" name="l03594"></a><span class="lineno"> 3594</span>            }</div>
<div class="line"><a id="l03595" name="l03595"></a><span class="lineno"> 3595</span> </div>
<div class="line"><a id="l03596" name="l03596"></a><span class="lineno"> 3596</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( <a class="code hl_struct" href="structpoint.html">point</a>( x, y ), <a class="code hl_struct" href="structpoint.html">point</a>( zposx, zposy ) ) &gt; 50 ) {</div>
<div class="line"><a id="l03597" name="l03597"></a><span class="lineno"> 3597</span>                <span class="keywordflow">if</span>( x &gt; zposx ) {</div>
<div class="line"><a id="l03598" name="l03598"></a><span class="lineno"> 3598</span>                    x--;</div>
<div class="line"><a id="l03599" name="l03599"></a><span class="lineno"> 3599</span>                }</div>
<div class="line"><a id="l03600" name="l03600"></a><span class="lineno"> 3600</span>                <span class="keywordflow">if</span>( x &lt; zposx ) {</div>
<div class="line"><a id="l03601" name="l03601"></a><span class="lineno"> 3601</span>                    x++;</div>
<div class="line"><a id="l03602" name="l03602"></a><span class="lineno"> 3602</span>                }</div>
<div class="line"><a id="l03603" name="l03603"></a><span class="lineno"> 3603</span>                <span class="keywordflow">if</span>( y &gt; zposy ) {</div>
<div class="line"><a id="l03604" name="l03604"></a><span class="lineno"> 3604</span>                    y--;</div>
<div class="line"><a id="l03605" name="l03605"></a><span class="lineno"> 3605</span>                }</div>
<div class="line"><a id="l03606" name="l03606"></a><span class="lineno"> 3606</span>                <span class="keywordflow">if</span>( y &lt; zposy ) {</div>
<div class="line"><a id="l03607" name="l03607"></a><span class="lineno"> 3607</span>                    y++;</div>
<div class="line"><a id="l03608" name="l03608"></a><span class="lineno"> 3608</span>                }</div>
<div class="line"><a id="l03609" name="l03609"></a><span class="lineno"> 3609</span>            }</div>
<div class="line"><a id="l03610" name="l03610"></a><span class="lineno"> 3610</span>        }</div>
<div class="line"><a id="l03611" name="l03611"></a><span class="lineno"> 3611</span> </div>
<div class="line"><a id="l03612" name="l03612"></a><span class="lineno"> 3612</span>        settings.<a class="code hl_function" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;SL_SPOT_X&quot;</span>, x - zposx );</div>
<div class="line"><a id="l03613" name="l03613"></a><span class="lineno"> 3613</span>        settings.<a class="code hl_function" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;SL_SPOT_Y&quot;</span>, y - zposy );</div>
<div class="line"><a id="l03614" name="l03614"></a><span class="lineno"> 3614</span> </div>
<div class="line"><a id="l03615" name="l03615"></a><span class="lineno"> 3615</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_field( <a class="code hl_struct" href="structtripoint.html">tripoint</a>( x, y, z-&gt;<a class="code hl_function" href="classmonster.html#a3690c104bd71bffc25153a86229f2a97">posz</a>() ), <a class="code hl_variable" href="field__type_8cpp.html#af2d4a627a742dd0ae0719f632bee785b">fd_spotlight</a>, 1 );</div>
<div class="line"><a id="l03616" name="l03616"></a><span class="lineno"> 3616</span> </div>
<div class="line"><a id="l03617" name="l03617"></a><span class="lineno"> 3617</span>    }</div>
<div class="line"><a id="l03618" name="l03618"></a><span class="lineno"> 3618</span> </div>
<div class="line"><a id="l03619" name="l03619"></a><span class="lineno"> 3619</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03620" name="l03620"></a><span class="lineno"> 3620</span>}</div>
<div class="ttc" id="aclassitem_html_a0b12108a604ac9d940716bb8f1368cf5"><div class="ttname"><a href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">item::get_var</a></div><div class="ttdeci">double get_var(const std::string &amp;name, double default_value) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01022">item.cpp:1022</a></div></div>
<div class="ttc" id="aclassitem_html_a4938361b8fe897c4e85d66020ef91aff"><div class="ttname"><a href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">item::set_var</a></div><div class="ttdeci">void set_var(const std::string &amp;name, int value)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00992">item.cpp:992</a></div></div>
<div class="ttc" id="aclassmonster_html_a34e7b9873ad1cf0901f6583895ee3af8"><div class="ttname"><a href="classmonster.html#a34e7b9873ad1cf0901f6583895ee3af8">monster::posy</a></div><div class="ttdeci">int posy() const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00498">monster.h:498</a></div></div>
<div class="ttc" id="aclassmonster_html_ae5824f6fba759aa296cd55b83d2ea60f"><div class="ttname"><a href="classmonster.html#ae5824f6fba759aa296cd55b83d2ea60f">monster::posx</a></div><div class="ttdeci">int posx() const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00495">monster.h:495</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_af2d4a627a742dd0ae0719f632bee785b"><div class="ttname"><a href="field__type_8cpp.html#af2d4a627a742dd0ae0719f632bee785b">fd_spotlight</a></div><div class="ttdeci">field_type_id fd_spotlight</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00360">field_type.cpp:360</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a6812a56090037286b62793cd746b7d61"><div class="ttname"><a href="monattack_8cpp.html#a6812a56090037286b62793cd746b7d61">mon_turret_searchlight</a></div><div class="ttdeci">static const mtype_id mon_turret_searchlight(&quot;mon_turret_searchlight&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monster_8cpp_source.html#l02643">monster::add_item()</a>, <a class="el" href="field__type_8cpp_source.html#l00360">fd_spotlight</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="monster_8cpp_source.html#l02894">monster::get_hp()</a>, <a class="el" href="monster_8cpp_source.html#l02884">monster::get_hp_max()</a>, <a class="el" href="item_8cpp_source.html#l01022">item::get_var()</a>, <a class="el" href="mtype_8h_source.html#l00240">mtype::id</a>, <a class="el" href="monster_8h_source.html#l00456">monster::inv</a>, <a class="el" href="monattack_8cpp.html#a6812a56090037286b62793cd746b7d61">mon_turret_searchlight</a>, <a class="el" href="calendar_8cpp_source.html#l00490">calendar::once_every()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="monster_8h_source.html#l00495">monster::posx()</a>, <a class="el" href="monster_8h_source.html#l00498">monster::posy()</a>, <a class="el" href="monster_8h_source.html#l00501">monster::posz()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, <a class="el" href="item_8cpp_source.html#l00992">item::set_var()</a>, <a class="el" href="calendar_8cpp_source.html#l00033">calendar::start_of_cataclysm</a>, and <a class="el" href="monster_8h_source.html#l00478">monster::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="ac25b9264f3624fabc007c0c372617df0" name="ac25b9264f3624fabc007c0c372617df0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac25b9264f3624fabc007c0c372617df0">&#9670;&nbsp;</a></span>shocking_reveal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::shocking_reveal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l00775">775</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>{</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>    <a class="code hl_function" href="namespacemattack.html#a0df2e46cfb1cdde166037df0d6a8c55c">shockstorm</a>( z );</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>}</div>
<div class="ttc" id="anamespacemattack_html_a0df2e46cfb1cdde166037df0d6a8c55c"><div class="ttname"><a href="namespacemattack.html#a0df2e46cfb1cdde166037df0d6a8c55c">mattack::shockstorm</a></div><div class="ttdeci">bool shockstorm(monster *z)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l00727">monattack.cpp:727</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monattack_8cpp_source.html#l00727">shockstorm()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a0df2e46cfb1cdde166037df0d6a8c55c" name="a0df2e46cfb1cdde166037df0d6a8c55c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0df2e46cfb1cdde166037df0d6a8c55c">&#9670;&nbsp;</a></span>shockstorm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::shockstorm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l00727">727</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>{</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classmonster.html#a0f83a7ee7bd8d96efc80200c5a5caf5b">can_act</a>() ) {</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>    }</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span> </div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>    }</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span> </div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>    <span class="keywordtype">bool</span> seen = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z );</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>    <span class="comment">// Can&#39;t see/reach target, no attack</span></div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ||</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>        !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.clear_path( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>(), 12, 1, 100 ) ) {</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>    }</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span> </div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>    <span class="comment">// It takes a while</span></div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 50;</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span> </div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>    <span class="keywordflow">if</span>( seen ) {</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>        <span class="keyword">auto</span> msg_type = target == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ? <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a> : <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>;</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( msg_type, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A bolt of electricity arcs towards %s!&quot;</span> ), target-&gt;<a class="code hl_function" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">disp_name</a>() );</div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>    }</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.is_deaf() ) {</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>        <a class="code hl_function" href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a>( <span class="stringliteral">&quot;fire_gun&quot;</span>, <span class="stringliteral">&quot;bio_lightning&quot;</span>, <a class="code hl_function" href="namespacesfx.html#a1f138eaa92db132e81ce591751c512cc">sfx::get_heard_volume</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>() ) );</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>    }</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> tarp( target-&gt;<a class="code hl_function" href="classCreature.html#af712029844aef7ebc7af88a9242e2df0">posx</a>() + <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( -1, 1 ) + <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( -1, 1 ),</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>                   target-&gt;<a class="code hl_function" href="classCreature.html#a1be20ab434ada66748d5b62fcfdbd5e4">posy</a>() + <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( -1, 1 ) + <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( -1, 1 ),</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>                   target-&gt;<a class="code hl_function" href="classCreature.html#a3a3ada596854cf8084b3a728b633a9db">posz</a>() );</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>    std::vector&lt;tripoint&gt; bolt = <a class="code hl_function" href="coordinates_8h.html#a4a34f7ffa4c18effba7f8239c68c8738">line_to</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), tarp, 0, 0 );</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>    <span class="comment">// Fill the LOS with electricity</span></div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;i : bolt ) {</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_field( i, <a class="code hl_variable" href="field__type_8cpp.html#a67f782decc0eca9e8e55696dfa89d13b">fd_electricity</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 3 ) );</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>        }</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>    }</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>    <span class="comment">// 5x5 cloud of electricity at the square hit</span></div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;dest : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( tarp, 2 ) ) {</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_field( dest, <a class="code hl_variable" href="field__type_8cpp.html#a67f782decc0eca9e8e55696dfa89d13b">fd_electricity</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 3 ) );</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>        }</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>    }</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span> </div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>}</div>
<div class="ttc" id="afield__type_8cpp_html_a67f782decc0eca9e8e55696dfa89d13b"><div class="ttname"><a href="field__type_8cpp.html#a67f782decc0eca9e8e55696dfa89d13b">fd_electricity</a></div><div class="ttdeci">field_type_id fd_electricity</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00353">field_type.cpp:353</a></div></div>
<div class="ttc" id="anamespacesfx_html_a1f138eaa92db132e81ce591751c512cc"><div class="ttname"><a href="namespacesfx.html#a1f138eaa92db132e81ce591751c512cc">sfx::get_heard_volume</a></div><div class="ttdeci">int get_heard_volume(const tripoint &amp;source)</div><div class="ttdoc">Functions from sfx that do not use the SDL_mixer API at all.</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l01634">sounds.cpp:1634</a></div></div>
<div class="ttc" id="anamespacesfx_html_a8fa2bb887ac81392fb686cc4079b5d5a"><div class="ttname"><a href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a></div><div class="ttdeci">void play_variant_sound(const std::string &amp;id, const std::string &amp;variant, int volume, units::angle angle, double pitch_min=-1.0, double pitch_max=-1.0)</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l01590">sounds.cpp:1590</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="monster_8cpp_source.html#l00931">monster::can_act()</a>, <a class="el" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">Creature::disp_name()</a>, <a class="el" href="field__type_8cpp_source.html#l00353">fd_electricity</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="sounds_8cpp_source.html#l01634">sfx::get_heard_volume()</a>, <a class="el" href="coordinates_8h_source.html#l00548">line_to()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00260">m_neutral</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="sounds_8cpp_source.html#l01590">sfx::play_variant_sound()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="classCreature.html#af712029844aef7ebc7af88a9242e2df0">Creature::posx()</a>, <a class="el" href="classCreature.html#a1be20ab434ada66748d5b62fcfdbd5e4">Creature::posy()</a>, <a class="el" href="classCreature.html#a3a3ada596854cf8084b3a728b633a9db">Creature::posz()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, and <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>, and <a class="el" href="monattack_8cpp_source.html#l00775">shocking_reveal()</a>.</p>

</div>
</div>
<a id="a6790ba4e09c2cc0b951be9bbd108f568" name="a6790ba4e09c2cc0b951be9bbd108f568"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6790ba4e09c2cc0b951be9bbd108f568">&#9670;&nbsp;</a></span>shriek()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::shriek </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l00441">441</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>{</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ||</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>        <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() ) &gt; 4 ||</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>        !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>    }</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span> </div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>    <span class="comment">// It takes a while</span></div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 240;</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>    <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 50, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f">sounds::sound_t::alert</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;a terrible shriek!&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;shout&quot;</span>,</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>                   <span class="stringliteral">&quot;shriek&quot;</span> );</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f">sounds::alert</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, and <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a13caf8928bf80f7b3621cd70bdc773ba" name="a13caf8928bf80f7b3621cd70bdc773ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13caf8928bf80f7b3621cd70bdc773ba">&#9670;&nbsp;</a></span>shriek_alert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::shriek_alert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l00457">457</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>{</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classmonster.html#a0f83a7ee7bd8d96efc80200c5a5caf5b">can_act</a>() || z-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#aaa9df9ef85dde81ec2db2f3997f4f458">effect_shrieking</a> ) ) {</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>    }</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span> </div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span> </div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> || <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() ) &gt; 15 ||</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>        !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>    }</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span> </div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s begins shrieking!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>    }</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span> </div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 150;</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>    <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 120, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f">sounds::sound_t::alert</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;a piercing wail!&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;shout&quot;</span>,</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>                   <span class="stringliteral">&quot;wail&quot;</span> );</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>    z-&gt;<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#aaa9df9ef85dde81ec2db2f3997f4f458">effect_shrieking</a>, 1_minutes );</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span> </div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="monster_8cpp_source.html#l01807">monster::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f">sounds::alert</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="monster_8cpp_source.html#l00931">monster::can_act()</a>, <a class="el" href="monattack_8cpp.html#aaa9df9ef85dde81ec2db2f3997f4f458">effect_shrieking</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8cpp_source.html#l01173">Creature::has_effect()</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, and <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a787768aa8a85e4a5b851e1e6ab20dbae" name="a787768aa8a85e4a5b851e1e6ab20dbae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a787768aa8a85e4a5b851e1e6ab20dbae">&#9670;&nbsp;</a></span>shriek_stun()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::shriek_stun </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l00482">482</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>{</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classmonster.html#a0f83a7ee7bd8d96efc80200c5a5caf5b">can_act</a>() || !z-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#aaa9df9ef85dde81ec2db2f3997f4f458">effect_shrieking</a> ) ) {</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>    }</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span> </div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>    }</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span> </div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>    <span class="keywordtype">int</span> dist = <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() );</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>    <span class="comment">// Currently the cone is 2D, so don&#39;t use it for 3D attacks</span></div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>    <span class="keywordflow">if</span>( dist &gt; 7 ||</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>        z-&gt;<a class="code hl_function" href="classmonster.html#a3690c104bd71bffc25153a86229f2a97">posz</a>() != target-&gt;<a class="code hl_function" href="classCreature.html#a3a3ada596854cf8084b3a728b633a9db">posz</a>() ||</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>        !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>    }</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span> </div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::angle</a> target_angle = <a class="code hl_function" href="line_8cpp.html#a22f984836636053038f43340f9c50149">coord_to_angle</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() );</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::angle</a> cone_angle = 20_degrees;</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;<a class="code hl_class" href="classcone.html">cone</a> : here.<a class="code hl_function" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 4 ) ) {</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>        <a class="code hl_class" href="classunits_1_1quantity.html">units::angle</a> tile_angle = <a class="code hl_function" href="line_8cpp.html#a22f984836636053038f43340f9c50149">coord_to_angle</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), <a class="code hl_class" href="classcone.html">cone</a> );</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>        <a class="code hl_class" href="classunits_1_1quantity.html">units::angle</a> diff = <a class="code hl_function" href="namespaceunits.html#a0b9218914b883c6c31f5af68deaafc2e">units::fabs</a>( target_angle - tile_angle );</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>        <span class="comment">// Skip the target, because it&#39;s outside cone or it&#39;s the source</span></div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>        <span class="keywordflow">if</span>( diff + cone_angle &gt; 360_degrees || diff &gt; cone_angle || <a class="code hl_class" href="classcone.html">cone</a> == z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>() ) {</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>        }</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>        <span class="comment">// Affect the target</span></div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>        <span class="comment">// Small bash to every square, silent to not flood message box</span></div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>        here.<a class="code hl_function" href="classmap.html#a2266f21420ae2a1b44e8df9a028764e4">bash</a>( <a class="code hl_class" href="classcone.html">cone</a>, 4, <span class="keyword">true</span> );</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span> </div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>        <span class="comment">// If a monster is there, chance for stun</span></div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>        <a class="code hl_class" href="classCreature.html">Creature</a> *target = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at( <a class="code hl_class" href="classcone.html">cone</a> );</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>        <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>        }</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( dist / 2 ) &amp;&amp; !( target-&gt;<a class="code hl_function" href="classCreature.html#acfe4b827ccc042c7933e709fbca6476e">is_immune_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a6a9276a38bc155b134a121b137073fb7">effect_deaf</a> ) ) ) {</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>            target-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a76e4bf39f0f08fd7904522981fda9a14">effect_dazed</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1_minutes, 2_minutes ), <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1,</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>                                ( 15 - dist ) / 3 ) );</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>        }</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span> </div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>    }</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span> </div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>}</div>
<div class="ttc" id="aclasscone_html"><div class="ttname"><a href="classcone.html">cone</a></div><div class="ttdoc">Cone centered along y axis.</div><div class="ttdef"><b>Definition:</b> <a href="shape__impl_8h_source.html#l00042">shape_impl.h:43</a></div></div>
<div class="ttc" id="aclassmap_html"><div class="ttname"><a href="classmap.html">map</a></div><div class="ttdoc">Manage and cache data about a part of the map.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00371">map.h:372</a></div></div>
<div class="ttc" id="aclassmap_html_a2266f21420ae2a1b44e8df9a028764e4"><div class="ttname"><a href="classmap.html#a2266f21420ae2a1b44e8df9a028764e4">map::bash</a></div><div class="ttdeci">bash_results bash(const tripoint &amp;p, int str, bool silent=false, bool destroy=false, bool bash_floor=false, const vehicle *bashing_vehicle=nullptr)</div><div class="ttdoc">Returns a pair where first is whether anything was smashed and second is if it was destroyed.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03520">map.cpp:3520</a></div></div>
<div class="ttc" id="aclassmap_html_a4f5f812d7e89a998429958573a4c340f"><div class="ttname"><a href="classmap.html#a4f5f812d7e89a998429958573a4c340f">map::points_in_radius</a></div><div class="ttdeci">tripoint_range&lt; tripoint &gt; points_in_radius(const tripoint &amp;center, size_t radius, size_t radiusz=0) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l08396">map.cpp:8396</a></div></div>
<div class="ttc" id="amap_8cpp_html_acb0b34be6e497bdd2f9f40ae6929d562"><div class="ttname"><a href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00141">map.cpp:141</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a6a9276a38bc155b134a121b137073fb7"><div class="ttname"><a href="monattack_8cpp.html#a6a9276a38bc155b134a121b137073fb7">effect_deaf</a></div><div class="ttdeci">static const efftype_id effect_deaf(&quot;deaf&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a76e4bf39f0f08fd7904522981fda9a14"><div class="ttname"><a href="monattack_8cpp.html#a76e4bf39f0f08fd7904522981fda9a14">effect_dazed</a></div><div class="ttdeci">static const efftype_id effect_dazed(&quot;dazed&quot;)</div></div>
<div class="ttc" id="anamespaceunits_html_a0b9218914b883c6c31f5af68deaafc2e"><div class="ttname"><a href="namespaceunits.html#a0b9218914b883c6c31f5af68deaafc2e">units::fabs</a></div><div class="ttdeci">quantity&lt; V, U &gt; fabs(quantity&lt; V, U &gt; q)</div><div class="ttdef"><b>Definition:</b> <a href="units__def_8h_source.html#l00136">units_def.h:136</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature_8cpp_source.html#l00974">Creature::add_effect()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="map_8cpp_source.html#l03520">map::bash()</a>, <a class="el" href="monster_8cpp_source.html#l00931">monster::can_act()</a>, <a class="el" href="line_8cpp_source.html#l00781">coord_to_angle()</a>, <a class="el" href="monattack_8cpp.html#a76e4bf39f0f08fd7904522981fda9a14">effect_dazed</a>, <a class="el" href="monattack_8cpp.html#a6a9276a38bc155b134a121b137073fb7">effect_deaf</a>, <a class="el" href="monattack_8cpp.html#aaa9df9ef85dde81ec2db2f3997f4f458">effect_shrieking</a>, <a class="el" href="units__def_8h_source.html#l00136">units::fabs()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="map_8cpp_source.html#l00141">get_map()</a>, <a class="el" href="creature_8cpp_source.html#l01173">Creature::has_effect()</a>, <a class="el" href="classCreature.html#acfe4b827ccc042c7933e709fbca6476e">Creature::is_immune_effect()</a>, <a class="el" href="bodypart_8h_source.html#l00052">num_bp</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="map_8cpp_source.html#l08396">map::points_in_radius()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="classCreature.html#a3a3ada596854cf8084b3a728b633a9db">Creature::posz()</a>, <a class="el" href="monster_8h_source.html#l00501">monster::posz()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, and <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="ac11209d95e5bbf6a86108ca860f9cfc5" name="ac11209d95e5bbf6a86108ca860f9cfc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac11209d95e5bbf6a86108ca860f9cfc5">&#9670;&nbsp;</a></span>slimespring()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::slimespring </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l04525">4525</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04526" name="l04526"></a><span class="lineno"> 4526</span>{</div>
<div class="line"><a id="l04527" name="l04527"></a><span class="lineno"> 4527</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() ) &gt; 30 ) {</div>
<div class="line"><a id="l04528" name="l04528"></a><span class="lineno"> 4528</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04529" name="l04529"></a><span class="lineno"> 4529</span>    }</div>
<div class="line"><a id="l04530" name="l04530"></a><span class="lineno"> 4530</span> </div>
<div class="line"><a id="l04531" name="l04531"></a><span class="lineno"> 4531</span>    <span class="comment">// This morale buff effect could get spammy</span></div>
<div class="line"><a id="l04532" name="l04532"></a><span class="lineno"> 4532</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.get_morale_level() &lt;= 1 ) {</div>
<div class="line"><a id="l04533" name="l04533"></a><span class="lineno"> 4533</span>        <span class="keywordflow">switch</span>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 3 ) ) {</div>
<div class="line"><a id="l04534" name="l04534"></a><span class="lineno"> 4534</span>            <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l04535" name="l04535"></a><span class="lineno"> 4535</span>                <span class="comment">//~ Your slimes try to cheer you up!</span></div>
<div class="line"><a id="l04536" name="l04536"></a><span class="lineno"> 4536</span>                <span class="comment">//~ Lowercase is intended: they&#39;re small voices.</span></div>
<div class="line"><a id="l04537" name="l04537"></a><span class="lineno"> 4537</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;\&quot;hey, it&#39;s gonna be all right!\&quot;&quot;</span> ) );</div>
<div class="line"><a id="l04538" name="l04538"></a><span class="lineno"> 4538</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.add_morale( <a class="code hl_variable" href="morale__types_8cpp.html#a730940702e7e89686ea388ab9402f60a">MORALE_SUPPORT</a>, 10, 50 );</div>
<div class="line"><a id="l04539" name="l04539"></a><span class="lineno"> 4539</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04540" name="l04540"></a><span class="lineno"> 4540</span>            <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l04541" name="l04541"></a><span class="lineno"> 4541</span>                <span class="comment">//~ Your slimes try to cheer you up!</span></div>
<div class="line"><a id="l04542" name="l04542"></a><span class="lineno"> 4542</span>                <span class="comment">//~ Lowercase is intended: they&#39;re small voices.</span></div>
<div class="line"><a id="l04543" name="l04543"></a><span class="lineno"> 4543</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;\&quot;we&#39;ll get through this!\&quot;&quot;</span> ) );</div>
<div class="line"><a id="l04544" name="l04544"></a><span class="lineno"> 4544</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.add_morale( <a class="code hl_variable" href="morale__types_8cpp.html#a730940702e7e89686ea388ab9402f60a">MORALE_SUPPORT</a>, 10, 50 );</div>
<div class="line"><a id="l04545" name="l04545"></a><span class="lineno"> 4545</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04546" name="l04546"></a><span class="lineno"> 4546</span>            <span class="keywordflow">case</span> 3:</div>
<div class="line"><a id="l04547" name="l04547"></a><span class="lineno"> 4547</span>                <span class="comment">//~ Your slimes try to cheer you up!</span></div>
<div class="line"><a id="l04548" name="l04548"></a><span class="lineno"> 4548</span>                <span class="comment">//~ Lowercase is intended: they&#39;re small voices.</span></div>
<div class="line"><a id="l04549" name="l04549"></a><span class="lineno"> 4549</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;\&quot;i&#39;m here for you!\&quot;&quot;</span> ) );</div>
<div class="line"><a id="l04550" name="l04550"></a><span class="lineno"> 4550</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.add_morale( <a class="code hl_variable" href="morale__types_8cpp.html#a730940702e7e89686ea388ab9402f60a">MORALE_SUPPORT</a>, 10, 50 );</div>
<div class="line"><a id="l04551" name="l04551"></a><span class="lineno"> 4551</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04552" name="l04552"></a><span class="lineno"> 4552</span>        }</div>
<div class="line"><a id="l04553" name="l04553"></a><span class="lineno"> 4553</span>    }</div>
<div class="line"><a id="l04554" name="l04554"></a><span class="lineno"> 4554</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() ) &lt;= 3 &amp;&amp; z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ) ) {</div>
<div class="line"><a id="l04555" name="l04555"></a><span class="lineno"> 4555</span>        <span class="keywordflow">if</span>( ( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_effect( <a class="code hl_variable" href="monattack_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a> ) ) || ( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_effect( <a class="code hl_variable" href="monattack_8cpp.html#a39b21fc30fecd7d4fb15047600d03522">effect_bite</a> ) ) ) {</div>
<div class="line"><a id="l04556" name="l04556"></a><span class="lineno"> 4556</span>            <span class="comment">//~ Lowercase is intended: they&#39;re small voices.</span></div>
<div class="line"><a id="l04557" name="l04557"></a><span class="lineno"> 4557</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;\&quot;let me help!\&quot;&quot;</span> ) );</div>
<div class="line"><a id="l04558" name="l04558"></a><span class="lineno"> 4558</span>            <span class="comment">// Yes, your slimespring(s) handle/don&#39;t all Bad Damage at the same time.</span></div>
<div class="line"><a id="l04559" name="l04559"></a><span class="lineno"> 4559</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_effect( <a class="code hl_variable" href="monattack_8cpp.html#a39b21fc30fecd7d4fb15047600d03522">effect_bite</a> ) ) {</div>
<div class="line"><a id="l04560" name="l04560"></a><span class="lineno"> 4560</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a id="l04561" name="l04561"></a><span class="lineno"> 4561</span>                    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.remove_effect( <a class="code hl_variable" href="monattack_8cpp.html#a39b21fc30fecd7d4fb15047600d03522">effect_bite</a> );</div>
<div class="line"><a id="l04562" name="l04562"></a><span class="lineno"> 4562</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The slime cleans you out!&quot;</span> ) );</div>
<div class="line"><a id="l04563" name="l04563"></a><span class="lineno"> 4563</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04564" name="l04564"></a><span class="lineno"> 4564</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The slime flows over you, but your gouges still ache.&quot;</span> ) );</div>
<div class="line"><a id="l04565" name="l04565"></a><span class="lineno"> 4565</span>                }</div>
<div class="line"><a id="l04566" name="l04566"></a><span class="lineno"> 4566</span>            }</div>
<div class="line"><a id="l04567" name="l04567"></a><span class="lineno"> 4567</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_effect( <a class="code hl_variable" href="monattack_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a> ) ) {</div>
<div class="line"><a id="l04568" name="l04568"></a><span class="lineno"> 4568</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) ) {</div>
<div class="line"><a id="l04569" name="l04569"></a><span class="lineno"> 4569</span>                    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.remove_effect( <a class="code hl_variable" href="monattack_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a> );</div>
<div class="line"><a id="l04570" name="l04570"></a><span class="lineno"> 4570</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The slime seals up your leaks!&quot;</span> ) );</div>
<div class="line"><a id="l04571" name="l04571"></a><span class="lineno"> 4571</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04572" name="l04572"></a><span class="lineno"> 4572</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The slime flows over you, but your fluids are still leaking.&quot;</span> ) );</div>
<div class="line"><a id="l04573" name="l04573"></a><span class="lineno"> 4573</span>                }</div>
<div class="line"><a id="l04574" name="l04574"></a><span class="lineno"> 4574</span>            }</div>
<div class="line"><a id="l04575" name="l04575"></a><span class="lineno"> 4575</span>        }</div>
<div class="line"><a id="l04576" name="l04576"></a><span class="lineno"> 4576</span>    }</div>
<div class="line"><a id="l04577" name="l04577"></a><span class="lineno"> 4577</span> </div>
<div class="line"><a id="l04578" name="l04578"></a><span class="lineno"> 4578</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04579" name="l04579"></a><span class="lineno"> 4579</span>}</div>
<div class="ttc" id="amonattack_8cpp_html_a39b21fc30fecd7d4fb15047600d03522"><div class="ttname"><a href="monattack_8cpp.html#a39b21fc30fecd7d4fb15047600d03522">effect_bite</a></div><div class="ttdeci">static const efftype_id effect_bite(&quot;bite&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_a730940702e7e89686ea388ab9402f60a"><div class="ttname"><a href="morale__types_8cpp.html#a730940702e7e89686ea388ab9402f60a">MORALE_SUPPORT</a></div><div class="ttdeci">const morale_type MORALE_SUPPORT(&quot;morale_support&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="monattack_8cpp.html#a39b21fc30fecd7d4fb15047600d03522">effect_bite</a>, <a class="el" href="monattack_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="enums_8h_source.html#l00253">m_good</a>, <a class="el" href="morale__types_8cpp.html#a730940702e7e89686ea388ab9402f60a">MORALE_SUPPORT</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, and <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a4b980e0f585bd899371c1378c665be1c" name="a4b980e0f585bd899371c1378c665be1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b980e0f585bd899371c1378c665be1c">&#9670;&nbsp;</a></span>smash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::smash </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l01080">1080</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>{</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classmonster.html#a0f83a7ee7bd8d96efc80200c5a5caf5b">can_act</a>() ) {</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>    }</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span> </div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> || !<a class="code hl_function" href="monattack_8cpp.html#abf0d71b531a799a8eb3fd58a846064db">is_adjacent</a>( z, target, <span class="keyword">false</span> ) ) {</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>    }</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span> </div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>    <span class="comment">//Don&#39;t try to smash immobile targets</span></div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>    <span class="keywordflow">if</span>( target-&gt;<a class="code hl_function" href="classCreature.html#a993e0edf9322ff4aba71a9a3a4f5485c">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842ab8381921cabe58625339ccac27dc3cd9">MF_IMMOBILE</a> ) ) {</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>    }</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span> </div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>    <span class="comment">// Costs lots of moves to give you a little bit of a chance to get away.</span></div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 400;</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span> </div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>    <span class="keywordflow">if</span>( target-&gt;<a class="code hl_function" href="classCreature.html#afd2f1b1e5bafdef20afddbb704b1d5a5">uncanny_dodge</a>() ) {</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>    }</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span> </div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>    <span class="comment">// Can we dodge the attack? Uses player dodge function % chance (melee.cpp)</span></div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacemattack.html#a4efb8be314551e35f69df8cf8d824174">dodge_check</a>( z, target ) ) {</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s takes a powerful swing at you, but you dodge it!&quot;</span> ),</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s takes a powerful swing at &lt;npcname&gt;, who dodges it!&quot;</span> ),</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>                                       z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>        target-&gt;<a class="code hl_function" href="classCreature.html#af56188882e3300853d18f166738ee37a">on_dodge</a>( z, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> * 2 );</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>    }</div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span> </div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A blow from the %1$s sends %2$s flying!&quot;</span> ),</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>                                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A blow from the %s sends &lt;npcname&gt; flying!&quot;</span> ),</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>                                   z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">disp_name</a>() );</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>    <span class="comment">// TODO: Make this parabolic</span></div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;fling_creature( target, <a class="code hl_function" href="line_8cpp.html#a22f984836636053038f43340f9c50149">coord_to_angle</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() ),</div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>                       z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#af346fa78fe3bff4e8e321e9046bc9717">melee_sides</a> * z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a561d4830d7f7c613c177f5880c2e15fb">melee_dice</a> * 3 );</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span> </div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>}</div>
<div class="ttc" id="aclassCreature_html_a993e0edf9322ff4aba71a9a3a4f5485c"><div class="ttname"><a href="classCreature.html#a993e0edf9322ff4aba71a9a3a4f5485c">Creature::has_flag</a></div><div class="ttdeci">virtual bool has_flag(const m_flag) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00482">creature.h:482</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="monster_8cpp_source.html#l00931">monster::can_act()</a>, <a class="el" href="line_8cpp_source.html#l00781">coord_to_angle()</a>, <a class="el" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">Creature::disp_name()</a>, <a class="el" href="monattack_8cpp_source.html#l05764">dodge_check()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8h_source.html#l00482">Creature::has_flag()</a>, <a class="el" href="monattack_8cpp_source.html#l00275">is_adjacent()</a>, <a class="el" href="mtype_8h_source.html#l00286">mtype::melee_dice</a>, <a class="el" href="mtype_8h_source.html#l00287">mtype::melee_sides</a>, <a class="el" href="mtype_8h_source.html#l00285">mtype::melee_skill</a>, <a class="el" href="mtype_8h_source.html#l00113">MF_IMMOBILE</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="classCreature.html#af56188882e3300853d18f166738ee37a">Creature::on_dodge()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, and <a class="el" href="creature_8h_source.html#l00485">Creature::uncanny_dodge()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a1026fc5bfb1c0cb203b284abb5ce71b6" name="a1026fc5bfb1c0cb203b284abb5ce71b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1026fc5bfb1c0cb203b284abb5ce71b6">&#9670;&nbsp;</a></span>smash_specific()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mattack::smash_specific </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCreature.html">Creature</a> *&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l01068">1068</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>{</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> || !<a class="code hl_function" href="monattack_8cpp.html#abf0d71b531a799a8eb3fd58a846064db">is_adjacent</a>( z, target, <span class="keyword">false</span> ) ) {</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>    }</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_function" href="classmonster.html#a0315651e596e69f0626b30e081726596">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a674d4fc8b69d5ad8a6a2154d471ba941">MF_RIDEABLE_MECH</a> ) ) {</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>        z-&gt;<a class="code hl_function" href="classmonster.html#a8ea6e76214228bc20ec1d69daebe5d72">use_mech_power</a>( -5 );</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>    }</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>    z-&gt;<a class="code hl_function" href="classmonster.html#ac846acd96a84195a63ba2f1c1aafc701">set_goal</a>( target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() );</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>    <a class="code hl_function" href="handle__action_8cpp.html#a17b30778e61bfe33a43b310621e3d0f1">smash</a>( z );</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>}</div>
<div class="ttc" id="aclassmonster_html_a8ea6e76214228bc20ec1d69daebe5d72"><div class="ttname"><a href="classmonster.html#a8ea6e76214228bc20ec1d69daebe5d72">monster::use_mech_power</a></div><div class="ttdeci">bool use_mech_power(int amt)</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l02368">monster.cpp:2368</a></div></div>
<div class="ttc" id="aclassmonster_html_ac846acd96a84195a63ba2f1c1aafc701"><div class="ttname"><a href="classmonster.html#ac846acd96a84195a63ba2f1c1aafc701">monster::set_goal</a></div><div class="ttdeci">void set_goal(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00973">monster.cpp:973</a></div></div>
<div class="ttc" id="ahandle__action_8cpp_html_a17b30778e61bfe33a43b310621e3d0f1"><div class="ttname"><a href="handle__action_8cpp.html#a17b30778e61bfe33a43b310621e3d0f1">smash</a></div><div class="ttdeci">static void smash()</div><div class="ttdef"><b>Definition:</b> <a href="handle__action_8cpp_source.html#l00671">handle_action.cpp:671</a></div></div>
<div class="ttc" id="amtype_8h_html_afa4c966d04d2ddb261a7cde725eca842a674d4fc8b69d5ad8a6a2154d471ba941"><div class="ttname"><a href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a674d4fc8b69d5ad8a6a2154d471ba941">MF_RIDEABLE_MECH</a></div><div class="ttdeci">@ MF_RIDEABLE_MECH</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00115">mtype.h:115</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monster_8cpp_source.html#l00869">monster::has_flag()</a>, <a class="el" href="monattack_8cpp_source.html#l00275">is_adjacent()</a>, <a class="el" href="mtype_8h_source.html#l00115">MF_RIDEABLE_MECH</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00973">monster::set_goal()</a>, <a class="el" href="handle__action_8cpp_source.html#l00671">smash()</a>, and <a class="el" href="monster_8cpp_source.html#l02368">monster::use_mech_power()</a>.</p>

<p class="reference">Referenced by <a class="el" href="melee_8cpp_source.html#l00390">Character::melee_attack()</a>.</p>

</div>
</div>
<a id="af894c802b6496faad6040c7eaf5a9607" name="af894c802b6496faad6040c7eaf5a9607"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af894c802b6496faad6040c7eaf5a9607">&#9670;&nbsp;</a></span>spit_sap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::spit_sap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l01576">1576</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01577" name="l01577"></a><span class="lineno"> 1577</span>{</div>
<div class="line"><a id="l01578" name="l01578"></a><span class="lineno"> 1578</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classmonster.html#a0f83a7ee7bd8d96efc80200c5a5caf5b">can_act</a>() ) {</div>
<div class="line"><a id="l01579" name="l01579"></a><span class="lineno"> 1579</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01580" name="l01580"></a><span class="lineno"> 1580</span>    }</div>
<div class="line"><a id="l01581" name="l01581"></a><span class="lineno"> 1581</span> </div>
<div class="line"><a id="l01582" name="l01582"></a><span class="lineno"> 1582</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l01583" name="l01583"></a><span class="lineno"> 1583</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ||</div>
<div class="line"><a id="l01584" name="l01584"></a><span class="lineno"> 1584</span>        <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() ) &gt; 12 ||</div>
<div class="line"><a id="l01585" name="l01585"></a><span class="lineno"> 1585</span>        !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l01586" name="l01586"></a><span class="lineno"> 1586</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01587" name="l01587"></a><span class="lineno"> 1587</span>    }</div>
<div class="line"><a id="l01588" name="l01588"></a><span class="lineno"> 1588</span> </div>
<div class="line"><a id="l01589" name="l01589"></a><span class="lineno"> 1589</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 150;</div>
<div class="line"><a id="l01590" name="l01590"></a><span class="lineno"> 1590</span> </div>
<div class="line"><a id="l01591" name="l01591"></a><span class="lineno"> 1591</span>    <a class="code hl_struct" href="structprojectile.html">projectile</a> proj;</div>
<div class="line"><a id="l01592" name="l01592"></a><span class="lineno"> 1592</span>    proj.<a class="code hl_variable" href="structprojectile.html#aa2af53bce63feecb719ef1edba54689e">speed</a> = 10;</div>
<div class="line"><a id="l01593" name="l01593"></a><span class="lineno"> 1593</span>    proj.<a class="code hl_variable" href="structprojectile.html#a312bc9a78fe7a5fdefb44e3755154db3">range</a> = 12;</div>
<div class="line"><a id="l01594" name="l01594"></a><span class="lineno"> 1594</span>    proj.<a class="code hl_function" href="structprojectile.html#a05d90cbb1c83669dd7c23477c8f35963">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a7efb873ae4e7b2dc1aa0179624e1ed89">ammo_effect_APPLY_SAP</a> );</div>
<div class="line"><a id="l01595" name="l01595"></a><span class="lineno"> 1595</span>    proj.<a class="code hl_variable" href="structprojectile.html#a82d8f657f8cfc4e180c15bfab8ca8a6e">impact</a>.<a class="code hl_function" href="structdamage__instance.html#a36067fd68baf04345d0c3626c67b8cac">add_damage</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa8fce673f2bfbb3fdb52be44a8e638c90">DT_ACID</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 5, 10 ) );</div>
<div class="line"><a id="l01596" name="l01596"></a><span class="lineno"> 1596</span>    <a class="code hl_function" href="ballistics_8cpp.html#aeded5f16540ef8f873a7d9eb5edca240">projectile_attack</a>( proj, z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>(), <a class="code hl_class" href="classdispersion__sources.html">dispersion_sources</a>{ 150 }, z );</div>
<div class="line"><a id="l01597" name="l01597"></a><span class="lineno"> 1597</span> </div>
<div class="line"><a id="l01598" name="l01598"></a><span class="lineno"> 1598</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01599" name="l01599"></a><span class="lineno"> 1599</span>}</div>
<div class="ttc" id="amonattack_8cpp_html_a7efb873ae4e7b2dc1aa0179624e1ed89"><div class="ttname"><a href="monattack_8cpp.html#a7efb873ae4e7b2dc1aa0179624e1ed89">ammo_effect_APPLY_SAP</a></div><div class="ttdeci">static const ammo_effect_str_id ammo_effect_APPLY_SAP(&quot;APPLY_SAP&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="damage_8cpp_source.html#l00041">damage_instance::add_damage()</a>, <a class="el" href="projectile_8h_source.html#l00058">projectile::add_effect()</a>, <a class="el" href="monattack_8cpp.html#a7efb873ae4e7b2dc1aa0179624e1ed89">ammo_effect_APPLY_SAP</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="monster_8cpp_source.html#l00931">monster::can_act()</a>, <a class="el" href="damage_8h_source.html#l00026">DT_ACID</a>, <a class="el" href="projectile_8h_source.html#l00021">projectile::impact</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="ballistics_8cpp_source.html#l00201">projectile_attack()</a>, <a class="el" href="projectile_8h_source.html#l00026">projectile::range</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, and <a class="el" href="projectile_8h_source.html#l00025">projectile::speed</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a4646f8ead76e5e7af2fec0bd3e7d20e7" name="a4646f8ead76e5e7af2fec0bd3e7d20e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4646f8ead76e5e7af2fec0bd3e7d20e7">&#9670;&nbsp;</a></span>stare()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::stare </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l02829">2829</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02830" name="l02830"></a><span class="lineno"> 2830</span>{</div>
<div class="line"><a id="l02831" name="l02831"></a><span class="lineno"> 2831</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> ) {</div>
<div class="line"><a id="l02832" name="l02832"></a><span class="lineno"> 2832</span>        <span class="comment">// TODO: handle friendly monsters</span></div>
<div class="line"><a id="l02833" name="l02833"></a><span class="lineno"> 2833</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02834" name="l02834"></a><span class="lineno"> 2834</span>    }</div>
<div class="line"><a id="l02835" name="l02835"></a><span class="lineno"> 2835</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 200;</div>
<div class="line"><a id="l02836" name="l02836"></a><span class="lineno"> 2836</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ) ) {</div>
<div class="line"><a id="l02837" name="l02837"></a><span class="lineno"> 2837</span>        <span class="comment">//dimensional effects don&#39;t take against dimensionally anchored foes.</span></div>
<div class="line"><a id="l02838" name="l02838"></a><span class="lineno"> 2838</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.worn_with_flag( <span class="stringliteral">&quot;DIMENSIONAL_ANCHOR&quot;</span> ) ||</div>
<div class="line"><a id="l02839" name="l02839"></a><span class="lineno"> 2839</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_effect_with_flag( <span class="stringliteral">&quot;DIMENSIONAL_ANCHOR&quot;</span> ) ) {</div>
<div class="line"><a id="l02840" name="l02840"></a><span class="lineno"> 2840</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You feel a strange reverberation across your body.&quot;</span> ) );</div>
<div class="line"><a id="l02841" name="l02841"></a><span class="lineno"> 2841</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02842" name="l02842"></a><span class="lineno"> 2842</span>        }</div>
<div class="line"><a id="l02843" name="l02843"></a><span class="lineno"> 2843</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l02844" name="l02844"></a><span class="lineno"> 2844</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s stares at you, and you shudder.&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02845" name="l02845"></a><span class="lineno"> 2845</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02846" name="l02846"></a><span class="lineno"> 2846</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You feel like you&#39;re being watched, it makes you sick.&quot;</span> ) );</div>
<div class="line"><a id="l02847" name="l02847"></a><span class="lineno"> 2847</span>        }</div>
<div class="line"><a id="l02848" name="l02848"></a><span class="lineno"> 2848</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.add_effect( <a class="code hl_variable" href="monattack_8cpp.html#a0c073c8608c88bb092d72f27944a7df1">effect_teleglow</a>, 80_minutes );</div>
<div class="line"><a id="l02849" name="l02849"></a><span class="lineno"> 2849</span>    }</div>
<div class="line"><a id="l02850" name="l02850"></a><span class="lineno"> 2850</span> </div>
<div class="line"><a id="l02851" name="l02851"></a><span class="lineno"> 2851</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02852" name="l02852"></a><span class="lineno"> 2852</span>}</div>
<div class="ttc" id="amonattack_8cpp_html_a0c073c8608c88bb092d72f27944a7df1"><div class="ttname"><a href="monattack_8cpp.html#a0c073c8608c88bb092d72f27944a7df1">effect_teleglow</a></div><div class="ttdeci">static const efftype_id effect_teleglow(&quot;teleglow&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="monattack_8cpp.html#a0c073c8608c88bb092d72f27944a7df1">effect_teleglow</a>, <a class="el" href="monster_8h_source.html#l00471">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, and <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="ab08b3a0dc079b5e5f0eca36b2d0fcb22" name="ab08b3a0dc079b5e5f0eca36b2d0fcb22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab08b3a0dc079b5e5f0eca36b2d0fcb22">&#9670;&nbsp;</a></span>stretch_attack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::stretch_attack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l05641">5641</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05642" name="l05642"></a><span class="lineno"> 5642</span>{</div>
<div class="line"><a id="l05643" name="l05643"></a><span class="lineno"> 5643</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classmonster.html#a0f83a7ee7bd8d96efc80200c5a5caf5b">can_act</a>() ) {</div>
<div class="line"><a id="l05644" name="l05644"></a><span class="lineno"> 5644</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05645" name="l05645"></a><span class="lineno"> 5645</span>    }</div>
<div class="line"><a id="l05646" name="l05646"></a><span class="lineno"> 5646</span> </div>
<div class="line"><a id="l05647" name="l05647"></a><span class="lineno"> 5647</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l05648" name="l05648"></a><span class="lineno"> 5648</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l05649" name="l05649"></a><span class="lineno"> 5649</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05650" name="l05650"></a><span class="lineno"> 5650</span>    }</div>
<div class="line"><a id="l05651" name="l05651"></a><span class="lineno"> 5651</span> </div>
<div class="line"><a id="l05652" name="l05652"></a><span class="lineno"> 5652</span>    <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="namespaceovermap__ui.html#a5cd0d32854b59999d3a728288bc7daaaaa74ec9c5b6882f79e32a8fbd8da90c1b">distance</a> = <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() );</div>
<div class="line"><a id="l05653" name="l05653"></a><span class="lineno"> 5653</span>    <span class="keywordflow">if</span>( distance &lt; 2 || distance &gt; 3 || !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l05654" name="l05654"></a><span class="lineno"> 5654</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05655" name="l05655"></a><span class="lineno"> 5655</span>    }</div>
<div class="line"><a id="l05656" name="l05656"></a><span class="lineno"> 5656</span> </div>
<div class="line"><a id="l05657" name="l05657"></a><span class="lineno"> 5657</span>    <span class="keywordtype">int</span> dam = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 5, 10 );</div>
<div class="line"><a id="l05658" name="l05658"></a><span class="lineno"> 5658</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 100;</div>
<div class="line"><a id="l05659" name="l05659"></a><span class="lineno"> 5659</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;pnt : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.find_clear_path( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() ) ) {</div>
<div class="line"><a id="l05660" name="l05660"></a><span class="lineno"> 5660</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.impassable( pnt ) ) {</div>
<div class="line"><a id="l05661" name="l05661"></a><span class="lineno"> 5661</span>            target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s thrusts its arm at you, but bounces off the %2$s.&quot;</span> ),</div>
<div class="line"><a id="l05662" name="l05662"></a><span class="lineno"> 5662</span>                                           <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s thrusts its arm at &lt;npcname&gt;, but bounces off the %2$s.&quot;</span> ),</div>
<div class="line"><a id="l05663" name="l05663"></a><span class="lineno"> 5663</span>                                           z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(), <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.obstacle_name( pnt ) );</div>
<div class="line"><a id="l05664" name="l05664"></a><span class="lineno"> 5664</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05665" name="l05665"></a><span class="lineno"> 5665</span>        }</div>
<div class="line"><a id="l05666" name="l05666"></a><span class="lineno"> 5666</span>    }</div>
<div class="line"><a id="l05667" name="l05667"></a><span class="lineno"> 5667</span> </div>
<div class="line"><a id="l05668" name="l05668"></a><span class="lineno"> 5668</span>    <span class="keyword">auto</span> msg_type = target == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ? <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a> : <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>;</div>
<div class="line"><a id="l05669" name="l05669"></a><span class="lineno"> 5669</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( msg_type,</div>
<div class="line"><a id="l05670" name="l05670"></a><span class="lineno"> 5670</span>                                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s thrusts its arm at you, stretching to reach you from afar.&quot;</span> ),</div>
<div class="line"><a id="l05671" name="l05671"></a><span class="lineno"> 5671</span>                                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s thrusts its arm at &lt;npcname&gt;.&quot;</span> ),</div>
<div class="line"><a id="l05672" name="l05672"></a><span class="lineno"> 5672</span>                                   z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l05673" name="l05673"></a><span class="lineno"> 5673</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacemattack.html#a4efb8be314551e35f69df8cf8d824174">dodge_check</a>( z, target ) || <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.uncanny_dodge() ) {</div>
<div class="line"><a id="l05674" name="l05674"></a><span class="lineno"> 5674</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( msg_type, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You evade the stretched arm and it sails past you!&quot;</span> ),</div>
<div class="line"><a id="l05675" name="l05675"></a><span class="lineno"> 5675</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; evades the stretched arm!&quot;</span> ) );</div>
<div class="line"><a id="l05676" name="l05676"></a><span class="lineno"> 5676</span>        target-&gt;<a class="code hl_function" href="classCreature.html#af56188882e3300853d18f166738ee37a">on_dodge</a>( z, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> * 2 );</div>
<div class="line"><a id="l05677" name="l05677"></a><span class="lineno"> 5677</span>        <span class="comment">//takes some time to retract the arm</span></div>
<div class="line"><a id="l05678" name="l05678"></a><span class="lineno"> 5678</span>        z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 150;</div>
<div class="line"><a id="l05679" name="l05679"></a><span class="lineno"> 5679</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05680" name="l05680"></a><span class="lineno"> 5680</span>    }</div>
<div class="line"><a id="l05681" name="l05681"></a><span class="lineno"> 5681</span> </div>
<div class="line"><a id="l05682" name="l05682"></a><span class="lineno"> 5682</span>    <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">bodypart_id</a> hit = target-&gt;<a class="code hl_function" href="classCreature.html#a51c96c81ae1ea766b5eead4a265c1492">get_random_body_part</a>();</div>
<div class="line"><a id="l05683" name="l05683"></a><span class="lineno"> 5683</span>    dam = target-&gt;<a class="code hl_function" href="classCreature.html#a75ad96eb6ce27d3c1df250965b4de7b5">deal_damage</a>( z, hit, <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa12e559f29e023db673e9251b9337d8dd">DT_STAB</a>, dam ) ).<a class="code hl_function" href="structdealt__damage__instance.html#a86b702070a1c313624abc78ff34eff48">total_damage</a>();</div>
<div class="line"><a id="l05684" name="l05684"></a><span class="lineno"> 5684</span> </div>
<div class="line"><a id="l05685" name="l05685"></a><span class="lineno"> 5685</span>    <span class="keywordflow">if</span>( dam &gt; 0 ) {</div>
<div class="line"><a id="l05686" name="l05686"></a><span class="lineno"> 5686</span>        <span class="keyword">auto</span> msg_type = target == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ? <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a> : <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>;</div>
<div class="line"><a id="l05687" name="l05687"></a><span class="lineno"> 5687</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( msg_type,</div>
<div class="line"><a id="l05688" name="l05688"></a><span class="lineno"> 5688</span>                                       <span class="comment">//~ 1$s is monster name, 2$s bodypart in accusative</span></div>
<div class="line"><a id="l05689" name="l05689"></a><span class="lineno"> 5689</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s&#39;s arm pierces your %2$s!&quot;</span> ),</div>
<div class="line"><a id="l05690" name="l05690"></a><span class="lineno"> 5690</span>                                       <span class="comment">//~ 1$s is monster name, 2$s bodypart in accusative</span></div>
<div class="line"><a id="l05691" name="l05691"></a><span class="lineno"> 5691</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s arm pierces &lt;npcname&gt;&#39;s %2$s!&quot;</span> ),</div>
<div class="line"><a id="l05692" name="l05692"></a><span class="lineno"> 5692</span>                                       z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l05693" name="l05693"></a><span class="lineno"> 5693</span>                                       <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( hit-&gt;token ) );</div>
<div class="line"><a id="l05694" name="l05694"></a><span class="lineno"> 5694</span> </div>
<div class="line"><a id="l05695" name="l05695"></a><span class="lineno"> 5695</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a36dcf5a04ddc0cf9fa29c08b7b099158">check_dead_state</a>();</div>
<div class="line"><a id="l05696" name="l05696"></a><span class="lineno"> 5696</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05697" name="l05697"></a><span class="lineno"> 5697</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s arm hits your %2$s, but glances off your armor!&quot;</span> ),</div>
<div class="line"><a id="l05698" name="l05698"></a><span class="lineno"> 5698</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s hits &lt;npcname&gt;&#39;s %2$s, but glances off armor!&quot;</span> ),</div>
<div class="line"><a id="l05699" name="l05699"></a><span class="lineno"> 5699</span>                                       z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l05700" name="l05700"></a><span class="lineno"> 5700</span>                                       <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( hit-&gt;token ) );</div>
<div class="line"><a id="l05701" name="l05701"></a><span class="lineno"> 5701</span>    }</div>
<div class="line"><a id="l05702" name="l05702"></a><span class="lineno"> 5702</span> </div>
<div class="line"><a id="l05703" name="l05703"></a><span class="lineno"> 5703</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">on_hit</a>( z, hit,  z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> );</div>
<div class="line"><a id="l05704" name="l05704"></a><span class="lineno"> 5704</span> </div>
<div class="line"><a id="l05705" name="l05705"></a><span class="lineno"> 5705</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05706" name="l05706"></a><span class="lineno"> 5706</span>}</div>
<div class="ttc" id="anamespaceovermap__ui_html_a5cd0d32854b59999d3a728288bc7daaaaa74ec9c5b6882f79e32a8fbd8da90c1b"><div class="ttname"><a href="namespaceovermap__ui.html#a5cd0d32854b59999d3a728288bc7daaaaa74ec9c5b6882f79e32a8fbd8da90c1b">overmap_ui::sort_mode_t::distance</a></div><div class="ttdeci">@ distance</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="bodypart_8cpp_source.html#l00329">body_part_name_accusative()</a>, <a class="el" href="monster_8cpp_source.html#l00931">monster::can_act()</a>, <a class="el" href="creature_8cpp_source.html#l01833">Creature::check_dead_state()</a>, <a class="el" href="creature_8cpp_source.html#l00873">Creature::deal_damage()</a>, <a class="el" href="monattack_8cpp_source.html#l05764">dodge_check()</a>, <a class="el" href="damage_8h_source.html#l00027">DT_STAB</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8cpp_source.html#l01614">Creature::get_random_body_part()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="mtype_8h_source.html#l00285">mtype::melee_skill</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="classCreature.html#af56188882e3300853d18f166738ee37a">Creature::on_dodge()</a>, <a class="el" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">Creature::on_hit()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, <a class="el" href="damage_8cpp_source.html#l00180">dealt_damage_instance::total_damage()</a>, and <a class="el" href="monster_8h_source.html#l00478">monster::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="ad7be87b7fe8fff0649de246bc155cf0b" name="ad7be87b7fe8fff0649de246bc155cf0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7be87b7fe8fff0649de246bc155cf0b">&#9670;&nbsp;</a></span>stretch_bite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::stretch_bite </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l04048">4048</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04049" name="l04049"></a><span class="lineno"> 4049</span>{</div>
<div class="line"><a id="l04050" name="l04050"></a><span class="lineno"> 4050</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classmonster.html#a0f83a7ee7bd8d96efc80200c5a5caf5b">can_act</a>() ) {</div>
<div class="line"><a id="l04051" name="l04051"></a><span class="lineno"> 4051</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04052" name="l04052"></a><span class="lineno"> 4052</span>    }</div>
<div class="line"><a id="l04053" name="l04053"></a><span class="lineno"> 4053</span> </div>
<div class="line"><a id="l04054" name="l04054"></a><span class="lineno"> 4054</span>    <span class="comment">// Let it be used on non-player creatures</span></div>
<div class="line"><a id="l04055" name="l04055"></a><span class="lineno"> 4055</span>    <span class="comment">// can be used at close range too!</span></div>
<div class="line"><a id="l04056" name="l04056"></a><span class="lineno"> 4056</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l04057" name="l04057"></a><span class="lineno"> 4057</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> || <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() ) &gt; 3 || !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l04058" name="l04058"></a><span class="lineno"> 4058</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04059" name="l04059"></a><span class="lineno"> 4059</span>    }</div>
<div class="line"><a id="l04060" name="l04060"></a><span class="lineno"> 4060</span> </div>
<div class="line"><a id="l04061" name="l04061"></a><span class="lineno"> 4061</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 150;</div>
<div class="line"><a id="l04062" name="l04062"></a><span class="lineno"> 4062</span> </div>
<div class="line"><a id="l04063" name="l04063"></a><span class="lineno"> 4063</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;pnt : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.find_clear_path( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() ) ) {</div>
<div class="line"><a id="l04064" name="l04064"></a><span class="lineno"> 4064</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.impassable( pnt ) ) {</div>
<div class="line"><a id="l04065" name="l04065"></a><span class="lineno"> 4065</span>            z-&gt;<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#ad1df0ca2944a94c3ad796e8baada33ae">effect_stunned</a>, 6_turns );</div>
<div class="line"><a id="l04066" name="l04066"></a><span class="lineno"> 4066</span>            target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s stretches its head at you, but bounces off the %2$s&quot;</span> ),</div>
<div class="line"><a id="l04067" name="l04067"></a><span class="lineno"> 4067</span>                                           <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s stretches its head at &lt;npcname&gt;, but bounces off the %2$s&quot;</span> ),</div>
<div class="line"><a id="l04068" name="l04068"></a><span class="lineno"> 4068</span>                                           z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(), <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.obstacle_name( pnt ) );</div>
<div class="line"><a id="l04069" name="l04069"></a><span class="lineno"> 4069</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04070" name="l04070"></a><span class="lineno"> 4070</span>        }</div>
<div class="line"><a id="l04071" name="l04071"></a><span class="lineno"> 4071</span>    }</div>
<div class="line"><a id="l04072" name="l04072"></a><span class="lineno"> 4072</span>    <span class="keywordtype">bool</span> uncanny = target-&gt;<a class="code hl_function" href="classCreature.html#afd2f1b1e5bafdef20afddbb704b1d5a5">uncanny_dodge</a>();</div>
<div class="line"><a id="l04073" name="l04073"></a><span class="lineno"> 4073</span>    <span class="comment">// Can we dodge the attack? Uses player dodge function % chance (melee.cpp)</span></div>
<div class="line"><a id="l04074" name="l04074"></a><span class="lineno"> 4074</span>    <span class="keywordflow">if</span>( uncanny || <a class="code hl_function" href="namespacemattack.html#a4efb8be314551e35f69df8cf8d824174">dodge_check</a>( z, target ) ) {</div>
<div class="line"><a id="l04075" name="l04075"></a><span class="lineno"> 4075</span>        z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 150;</div>
<div class="line"><a id="l04076" name="l04076"></a><span class="lineno"> 4076</span>        z-&gt;<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#ad1df0ca2944a94c3ad796e8baada33ae">effect_stunned</a>, 3_turns );</div>
<div class="line"><a id="l04077" name="l04077"></a><span class="lineno"> 4077</span>        <span class="keyword">auto</span> msg_type = target == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ? <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a> : <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>;</div>
<div class="line"><a id="l04078" name="l04078"></a><span class="lineno"> 4078</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( msg_type,</div>
<div class="line"><a id="l04079" name="l04079"></a><span class="lineno"> 4079</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s&#39;s head extends to bite you, but you dodge and the head sails past!&quot;</span> ),</div>
<div class="line"><a id="l04080" name="l04080"></a><span class="lineno"> 4080</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s&#39;s head extends to bite &lt;npcname&gt;, but they dodge and the head sails past!&quot;</span> ),</div>
<div class="line"><a id="l04081" name="l04081"></a><span class="lineno"> 4081</span>                                       z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l04082" name="l04082"></a><span class="lineno"> 4082</span>        <span class="keywordflow">if</span>( !uncanny ) {</div>
<div class="line"><a id="l04083" name="l04083"></a><span class="lineno"> 4083</span>            target-&gt;<a class="code hl_function" href="classCreature.html#af56188882e3300853d18f166738ee37a">on_dodge</a>( z, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> * 2 );</div>
<div class="line"><a id="l04084" name="l04084"></a><span class="lineno"> 4084</span>        }</div>
<div class="line"><a id="l04085" name="l04085"></a><span class="lineno"> 4085</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04086" name="l04086"></a><span class="lineno"> 4086</span>    }</div>
<div class="line"><a id="l04087" name="l04087"></a><span class="lineno"> 4087</span> </div>
<div class="line"><a id="l04088" name="l04088"></a><span class="lineno"> 4088</span>    <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">bodypart_id</a> hit = target-&gt;<a class="code hl_function" href="classCreature.html#a51c96c81ae1ea766b5eead4a265c1492">get_random_body_part</a>();</div>
<div class="line"><a id="l04089" name="l04089"></a><span class="lineno"> 4089</span>    <span class="keyword">const</span> <a class="code hl_enumeration" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980">body_part</a> hit_token = hit-&gt;token;</div>
<div class="line"><a id="l04090" name="l04090"></a><span class="lineno"> 4090</span>    <span class="comment">// More damage due to the speed of the moving head</span></div>
<div class="line"><a id="l04091" name="l04091"></a><span class="lineno"> 4091</span>    <span class="keywordtype">int</span> dam = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 5, 15 );</div>
<div class="line"><a id="l04092" name="l04092"></a><span class="lineno"> 4092</span>    dam = target-&gt;<a class="code hl_function" href="classCreature.html#a75ad96eb6ce27d3c1df250965b4de7b5">deal_damage</a>( z, hit, <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa12e559f29e023db673e9251b9337d8dd">DT_STAB</a>, dam ) ).<a class="code hl_function" href="structdealt__damage__instance.html#a86b702070a1c313624abc78ff34eff48">total_damage</a>();</div>
<div class="line"><a id="l04093" name="l04093"></a><span class="lineno"> 4093</span> </div>
<div class="line"><a id="l04094" name="l04094"></a><span class="lineno"> 4094</span>    <span class="keywordflow">if</span>( dam &gt; 0 ) {</div>
<div class="line"><a id="l04095" name="l04095"></a><span class="lineno"> 4095</span>        <span class="keyword">auto</span> msg_type = target == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ? <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a> : <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>;</div>
<div class="line"><a id="l04096" name="l04096"></a><span class="lineno"> 4096</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( msg_type,</div>
<div class="line"><a id="l04097" name="l04097"></a><span class="lineno"> 4097</span>                                       <span class="comment">//~ 1$s is monster name, 2$s bodypart in accusative</span></div>
<div class="line"><a id="l04098" name="l04098"></a><span class="lineno"> 4098</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s&#39;s teeth sink into your %2$s!&quot;</span> ),</div>
<div class="line"><a id="l04099" name="l04099"></a><span class="lineno"> 4099</span>                                       <span class="comment">//~ 1$s is monster name, 2$s bodypart in accusative</span></div>
<div class="line"><a id="l04100" name="l04100"></a><span class="lineno"> 4100</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s&#39;s teeth sink into &lt;npcname&gt;&#39;s %2$s!&quot;</span> ),</div>
<div class="line"><a id="l04101" name="l04101"></a><span class="lineno"> 4101</span>                                       z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l04102" name="l04102"></a><span class="lineno"> 4102</span>                                       <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( hit_token ) );</div>
<div class="line"><a id="l04103" name="l04103"></a><span class="lineno"> 4103</span> </div>
<div class="line"><a id="l04104" name="l04104"></a><span class="lineno"> 4104</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 16 - dam ) ) {</div>
<div class="line"><a id="l04105" name="l04105"></a><span class="lineno"> 4105</span>            <span class="keywordflow">if</span>( target-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a39b21fc30fecd7d4fb15047600d03522">effect_bite</a>, hit_token ) ) {</div>
<div class="line"><a id="l04106" name="l04106"></a><span class="lineno"> 4106</span>                target-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a39b21fc30fecd7d4fb15047600d03522">effect_bite</a>, 40_minutes, hit_token );</div>
<div class="line"><a id="l04107" name="l04107"></a><span class="lineno"> 4107</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( target-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a1de43fa1f6d16ce87ab7a3a49e47c463">effect_infected</a>, hit_token ) ) {</div>
<div class="line"><a id="l04108" name="l04108"></a><span class="lineno"> 4108</span>                target-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a1de43fa1f6d16ce87ab7a3a49e47c463">effect_infected</a>, 25_minutes, hit_token );</div>
<div class="line"><a id="l04109" name="l04109"></a><span class="lineno"> 4109</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04110" name="l04110"></a><span class="lineno"> 4110</span>                target-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a39b21fc30fecd7d4fb15047600d03522">effect_bite</a>, 1_turns, hit_token );</div>
<div class="line"><a id="l04111" name="l04111"></a><span class="lineno"> 4111</span>            }</div>
<div class="line"><a id="l04112" name="l04112"></a><span class="lineno"> 4112</span>        }</div>
<div class="line"><a id="l04113" name="l04113"></a><span class="lineno"> 4113</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04114" name="l04114"></a><span class="lineno"> 4114</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s&#39;s head hits your %2$s, but glances off your armor!&quot;</span> ),</div>
<div class="line"><a id="l04115" name="l04115"></a><span class="lineno"> 4115</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s&#39;s head hits &lt;npcname&gt;&#39;s %2$s, but glances off armor!&quot;</span> ),</div>
<div class="line"><a id="l04116" name="l04116"></a><span class="lineno"> 4116</span>                                       z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l04117" name="l04117"></a><span class="lineno"> 4117</span>                                       <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( hit_token ) );</div>
<div class="line"><a id="l04118" name="l04118"></a><span class="lineno"> 4118</span>    }</div>
<div class="line"><a id="l04119" name="l04119"></a><span class="lineno"> 4119</span> </div>
<div class="line"><a id="l04120" name="l04120"></a><span class="lineno"> 4120</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">on_hit</a>( z, hit,  z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> );</div>
<div class="line"><a id="l04121" name="l04121"></a><span class="lineno"> 4121</span> </div>
<div class="line"><a id="l04122" name="l04122"></a><span class="lineno"> 4122</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04123" name="l04123"></a><span class="lineno"> 4123</span>}</div>
<div class="ttc" id="amonattack_8cpp_html_a1de43fa1f6d16ce87ab7a3a49e47c463"><div class="ttname"><a href="monattack_8cpp.html#a1de43fa1f6d16ce87ab7a3a49e47c463">effect_infected</a></div><div class="ttdeci">static const efftype_id effect_infected(&quot;infected&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_ad1df0ca2944a94c3ad796e8baada33ae"><div class="ttname"><a href="monattack_8cpp.html#ad1df0ca2944a94c3ad796e8baada33ae">effect_stunned</a></div><div class="ttdeci">static const efftype_id effect_stunned(&quot;stunned&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8cpp_source.html#l00974">Creature::add_effect()</a>, <a class="el" href="monster_8cpp_source.html#l01807">monster::add_effect()</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="bodypart_8cpp_source.html#l00329">body_part_name_accusative()</a>, <a class="el" href="monster_8cpp_source.html#l00931">monster::can_act()</a>, <a class="el" href="creature_8cpp_source.html#l00873">Creature::deal_damage()</a>, <a class="el" href="monattack_8cpp_source.html#l05764">dodge_check()</a>, <a class="el" href="damage_8h_source.html#l00027">DT_STAB</a>, <a class="el" href="monattack_8cpp.html#a39b21fc30fecd7d4fb15047600d03522">effect_bite</a>, <a class="el" href="monattack_8cpp.html#a1de43fa1f6d16ce87ab7a3a49e47c463">effect_infected</a>, <a class="el" href="monattack_8cpp.html#ad1df0ca2944a94c3ad796e8baada33ae">effect_stunned</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8cpp_source.html#l01614">Creature::get_random_body_part()</a>, <a class="el" href="creature_8cpp_source.html#l01173">Creature::has_effect()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="mtype_8h_source.html#l00285">mtype::melee_skill</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="classCreature.html#af56188882e3300853d18f166738ee37a">Creature::on_dodge()</a>, <a class="el" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">Creature::on_hit()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, <a class="el" href="damage_8cpp_source.html#l00180">dealt_damage_instance::total_damage()</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, and <a class="el" href="creature_8h_source.html#l00485">Creature::uncanny_dodge()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a5669c48fecab9c36d9ded49280de7899" name="a5669c48fecab9c36d9ded49280de7899"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5669c48fecab9c36d9ded49280de7899">&#9670;&nbsp;</a></span>suicide()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::suicide </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l05341">5341</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05342" name="l05342"></a><span class="lineno"> 5342</span>{</div>
<div class="line"><a id="l05343" name="l05343"></a><span class="lineno"> 5343</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l05344" name="l05344"></a><span class="lineno"> 5344</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="monattack_8cpp.html#a2239aa1914a4ff939b923ada5faf247d">within_target_range</a>( z, target, 2 ) ) {</div>
<div class="line"><a id="l05345" name="l05345"></a><span class="lineno"> 5345</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05346" name="l05346"></a><span class="lineno"> 5346</span>    }</div>
<div class="line"><a id="l05347" name="l05347"></a><span class="lineno"> 5347</span>    z-&gt;<a class="code hl_function" href="classmonster.html#a82ae41773b05af94d4b678cb33bfb329">die</a>( z );</div>
<div class="line"><a id="l05348" name="l05348"></a><span class="lineno"> 5348</span> </div>
<div class="line"><a id="l05349" name="l05349"></a><span class="lineno"> 5349</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05350" name="l05350"></a><span class="lineno"> 5350</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="monster_8cpp_source.html#l02243">monster::die()</a>, and <a class="el" href="monattack_8cpp_source.html#l00214">within_target_range()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>, and <a class="el" href="memorial__logger_8cpp_source.html#l00367">memorial_logger::notify()</a>.</p>

</div>
</div>
<a id="ae0681575d21218f143a0d1022654ead3" name="ae0681575d21218f143a0d1022654ead3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0681575d21218f143a0d1022654ead3">&#9670;&nbsp;</a></span>tankgun()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mattack::tankgun </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCreature.html">Creature</a> *&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l03381">3381</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03382" name="l03382"></a><span class="lineno"> 3382</span>{</div>
<div class="line"><a id="l03383" name="l03383"></a><span class="lineno"> 3383</span>    <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> ammo_type( <span class="stringliteral">&quot;120mm_HEAT&quot;</span> );</div>
<div class="line"><a id="l03384" name="l03384"></a><span class="lineno"> 3384</span>    <span class="comment">// Make sure our ammo isn&#39;t weird.</span></div>
<div class="line"><a id="l03385" name="l03385"></a><span class="lineno"> 3385</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">ammo</a>[ammo_type] &gt; 40 ) {</div>
<div class="line"><a id="l03386" name="l03386"></a><span class="lineno"> 3386</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Generated too much ammo (%d) for %s in mattack::tankgun&quot;</span>, z-&gt;<a class="code hl_variable" href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">ammo</a>[ammo_type],</div>
<div class="line"><a id="l03387" name="l03387"></a><span class="lineno"> 3387</span>                  z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l03388" name="l03388"></a><span class="lineno"> 3388</span>        z-&gt;<a class="code hl_variable" href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">ammo</a>[ammo_type] = 40;</div>
<div class="line"><a id="l03389" name="l03389"></a><span class="lineno"> 3389</span>    }</div>
<div class="line"><a id="l03390" name="l03390"></a><span class="lineno"> 3390</span> </div>
<div class="line"><a id="l03391" name="l03391"></a><span class="lineno"> 3391</span>    <span class="keywordtype">int</span> dist = <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() );</div>
<div class="line"><a id="l03392" name="l03392"></a><span class="lineno"> 3392</span>    <span class="keywordflow">if</span>( dist &gt; 50 ) {</div>
<div class="line"><a id="l03393" name="l03393"></a><span class="lineno"> 3393</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03394" name="l03394"></a><span class="lineno"> 3394</span>    }</div>
<div class="line"><a id="l03395" name="l03395"></a><span class="lineno"> 3395</span> </div>
<div class="line"><a id="l03396" name="l03396"></a><span class="lineno"> 3396</span>    <span class="keywordflow">if</span>( !z-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a90a259f4c1b37d66fbc8c485ea1ccaba">effect_targeted</a> ) ) {</div>
<div class="line"><a id="l03397" name="l03397"></a><span class="lineno"> 3397</span>        <span class="comment">//~ There will be a 120mm HEAT shell sent at high speed to your location next turn.</span></div>
<div class="line"><a id="l03398" name="l03398"></a><span class="lineno"> 3398</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You&#39;re not sure why you&#39;ve got a laser dot on you…&quot;</span> ) );</div>
<div class="line"><a id="l03399" name="l03399"></a><span class="lineno"> 3399</span>        <span class="comment">//~ Sound of a tank turret swiveling into place</span></div>
<div class="line"><a id="l03400" name="l03400"></a><span class="lineno"> 3400</span>        <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 10, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;whirrrrrclick.&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;misc&quot;</span>,</div>
<div class="line"><a id="l03401" name="l03401"></a><span class="lineno"> 3401</span>                       <span class="stringliteral">&quot;servomotor&quot;</span> );</div>
<div class="line"><a id="l03402" name="l03402"></a><span class="lineno"> 3402</span>        z-&gt;<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a90a259f4c1b37d66fbc8c485ea1ccaba">effect_targeted</a>, 1_minutes );</div>
<div class="line"><a id="l03403" name="l03403"></a><span class="lineno"> 3403</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a6bf1394e103efe8661fc75163e3482c3">effect_laserlocked</a>, 1_minutes );</div>
<div class="line"><a id="l03404" name="l03404"></a><span class="lineno"> 3404</span>        z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 200;</div>
<div class="line"><a id="l03405" name="l03405"></a><span class="lineno"> 3405</span>        <span class="comment">// Should give some ability to get behind cover,</span></div>
<div class="line"><a id="l03406" name="l03406"></a><span class="lineno"> 3406</span>        <span class="comment">// even though it&#39;s patently unrealistic.</span></div>
<div class="line"><a id="l03407" name="l03407"></a><span class="lineno"> 3407</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03408" name="l03408"></a><span class="lineno"> 3408</span>    }</div>
<div class="line"><a id="l03409" name="l03409"></a><span class="lineno"> 3409</span>    <span class="comment">// kevingranade KA101: yes, but make it really inaccurate</span></div>
<div class="line"><a id="l03410" name="l03410"></a><span class="lineno"> 3410</span>    <span class="comment">// Sure thing.</span></div>
<div class="line"><a id="l03411" name="l03411"></a><span class="lineno"> 3411</span>    <a class="code hl_class" href="classnpc.html">npc</a> tmp = <a class="code hl_function" href="monattack_8cpp.html#a869db8713f4b9684575dee5358311b48">make_fake_npc</a>( z, 12, 8, 8, 8 );</div>
<div class="line"><a id="l03412" name="l03412"></a><span class="lineno"> 3412</span>    tmp.<a class="code hl_function" href="classCharacter.html#aac28618b387cf4ce36252e47699938d5">set_skill_level</a>( <a class="code hl_variable" href="monattack_8cpp.html#a0c6f7a1d7eeb2c38d69b568d85eb9f0d">skill_launcher</a>, 1 );</div>
<div class="line"><a id="l03413" name="l03413"></a><span class="lineno"> 3413</span>    tmp.<a class="code hl_function" href="classCharacter.html#aac28618b387cf4ce36252e47699938d5">set_skill_level</a>( <a class="code hl_variable" href="monattack_8cpp.html#a3eadead4a9aa7fee079c0b1acce7965e">skill_gun</a>, 1 );</div>
<div class="line"><a id="l03414" name="l03414"></a><span class="lineno"> 3414</span>    <span class="comment">// No need to aim</span></div>
<div class="line"><a id="l03415" name="l03415"></a><span class="lineno"> 3415</span>    tmp.<a class="code hl_variable" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> = 0;</div>
<div class="line"><a id="l03416" name="l03416"></a><span class="lineno"> 3416</span>    <span class="comment">// It takes a while</span></div>
<div class="line"><a id="l03417" name="l03417"></a><span class="lineno"> 3417</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 150;</div>
<div class="line"><a id="l03418" name="l03418"></a><span class="lineno"> 3418</span> </div>
<div class="line"><a id="l03419" name="l03419"></a><span class="lineno"> 3419</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">ammo</a>[ammo_type] &lt;= 0 ) {</div>
<div class="line"><a id="l03420" name="l03420"></a><span class="lineno"> 3420</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a id="l03421" name="l03421"></a><span class="lineno"> 3421</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 2, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;a chk!&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;fire_gun&quot;</span>, <span class="stringliteral">&quot;empty&quot;</span> );</div>
<div class="line"><a id="l03422" name="l03422"></a><span class="lineno"> 3422</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a id="l03423" name="l03423"></a><span class="lineno"> 3423</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 6, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;clank!&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;fire_gun&quot;</span>, <span class="stringliteral">&quot;empty&quot;</span> );</div>
<div class="line"><a id="l03424" name="l03424"></a><span class="lineno"> 3424</span>        }</div>
<div class="line"><a id="l03425" name="l03425"></a><span class="lineno"> 3425</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03426" name="l03426"></a><span class="lineno"> 3426</span>    }</div>
<div class="line"><a id="l03427" name="l03427"></a><span class="lineno"> 3427</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l03428" name="l03428"></a><span class="lineno"> 3428</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s&#39;s 120mm cannon fires!&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l03429" name="l03429"></a><span class="lineno"> 3429</span>    }</div>
<div class="line"><a id="l03430" name="l03430"></a><span class="lineno"> 3430</span>    tmp.<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a> = <a class="code hl_class" href="classitem.html">item</a>( <span class="stringliteral">&quot;TANK&quot;</span> ).<a class="code hl_function" href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">ammo_set</a>( ammo_type, z-&gt;<a class="code hl_variable" href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">ammo</a>[ ammo_type ] );</div>
<div class="line"><a id="l03431" name="l03431"></a><span class="lineno"> 3431</span>    <span class="keywordtype">int</span> burst = std::max( tmp.<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_function" href="classitem.html#af128df748a75405ab738424bff725de5">gun_get_mode</a>( <a class="code hl_class" href="classstring__id.html">gun_mode_id</a>( <span class="stringliteral">&quot;AUTO&quot;</span> ) ).qty, 1 );</div>
<div class="line"><a id="l03432" name="l03432"></a><span class="lineno"> 3432</span> </div>
<div class="line"><a id="l03433" name="l03433"></a><span class="lineno"> 3433</span>    z-&gt;<a class="code hl_variable" href="classmonster.html#aa5740a03294bcab8ef209151af709c4c">ammo</a>[ ammo_type ] -= tmp.<a class="code hl_function" href="classplayer.html#a44202fda7322e9ba557a37a7081e249c">fire_gun</a>( target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>(), burst ) * tmp.<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_function" href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">ammo_required</a>();</div>
<div class="line"><a id="l03434" name="l03434"></a><span class="lineno"> 3434</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8cpp_source.html#l00974">Creature::add_effect()</a>, <a class="el" href="monster_8cpp_source.html#l01807">monster::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="creature_8h_source.html#l00593">Creature::add_msg_if_player()</a>, <a class="el" href="monster_8h_source.html#l00512">monster::ammo</a>, <a class="el" href="item_8cpp_source.html#l07296">item::ammo_required()</a>, <a class="el" href="item_8cpp_source.html#l00587">item::ammo_set()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::combat</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="monattack_8cpp.html#a6bf1394e103efe8661fc75163e3482c3">effect_laserlocked</a>, <a class="el" href="monattack_8cpp.html#a90a259f4c1b37d66fbc8c485ea1ccaba">effect_targeted</a>, <a class="el" href="ranged_8cpp_source.html#l00804">player::fire_gun()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="item_8cpp_source.html#l07724">item::gun_get_mode()</a>, <a class="el" href="creature_8cpp_source.html#l01173">Creature::has_effect()</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="monattack_8cpp_source.html#l00301">make_fake_npc()</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="character_8h_source.html#l00618">Character::recoil</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="character_8cpp_source.html#l03337">Character::set_skill_level()</a>, <a class="el" href="monattack_8cpp.html#a3eadead4a9aa7fee079c0b1acce7965e">skill_gun</a>, <a class="el" href="monattack_8cpp.html#a0c6f7a1d7eeb2c38d69b568d85eb9f0d">skill_launcher</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, and <a class="el" href="character_8h_source.html#l01585">Character::weapon</a>.</p>

</div>
</div>
<a id="aa15cec367682f51a8071d832bd2371aa" name="aa15cec367682f51a8071d832bd2371aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa15cec367682f51a8071d832bd2371aa">&#9670;&nbsp;</a></span>taze()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mattack::taze </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCreature.html">Creature</a> *&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l03247">3247</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03248" name="l03248"></a><span class="lineno"> 3248</span>{</div>
<div class="line"><a id="l03249" name="l03249"></a><span class="lineno"> 3249</span>    <span class="comment">// It takes a while</span></div>
<div class="line"><a id="l03250" name="l03250"></a><span class="lineno"> 3250</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 200;</div>
<div class="line"><a id="l03251" name="l03251"></a><span class="lineno"> 3251</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> || target-&gt;<a class="code hl_function" href="classCreature.html#afd2f1b1e5bafdef20afddbb704b1d5a5">uncanny_dodge</a>() ) {</div>
<div class="line"><a id="l03252" name="l03252"></a><span class="lineno"> 3252</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03253" name="l03253"></a><span class="lineno"> 3253</span>    }</div>
<div class="line"><a id="l03254" name="l03254"></a><span class="lineno"> 3254</span> </div>
<div class="line"><a id="l03255" name="l03255"></a><span class="lineno"> 3255</span>    <span class="keywordtype">int</span> dam = target-&gt;<a class="code hl_function" href="classCreature.html#a75ad96eb6ce27d3c1df250965b4de7b5">deal_damage</a>( z, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ), <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa31df3b2996d2d10b2ca3e275899fdddb">DT_ELECTRIC</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1,</div>
<div class="line"><a id="l03256" name="l03256"></a><span class="lineno"> 3256</span>                                   5 ) ) ).<a class="code hl_function" href="structdealt__damage__instance.html#a86b702070a1c313624abc78ff34eff48">total_damage</a>();</div>
<div class="line"><a id="l03257" name="l03257"></a><span class="lineno"> 3257</span>    <span class="keywordflow">if</span>( dam == 0 ) {</div>
<div class="line"><a id="l03258" name="l03258"></a><span class="lineno"> 3258</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s unsuccessfully attempts to shock you.&quot;</span> ),</div>
<div class="line"><a id="l03259" name="l03259"></a><span class="lineno"> 3259</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s unsuccessfully attempts to shock &lt;npcname&gt;.&quot;</span> ),</div>
<div class="line"><a id="l03260" name="l03260"></a><span class="lineno"> 3260</span>                                       z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l03261" name="l03261"></a><span class="lineno"> 3261</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03262" name="l03262"></a><span class="lineno"> 3262</span>    }</div>
<div class="line"><a id="l03263" name="l03263"></a><span class="lineno"> 3263</span> </div>
<div class="line"><a id="l03264" name="l03264"></a><span class="lineno"> 3264</span>    <span class="keyword">auto</span> m_type = target-&gt;<a class="code hl_function" href="classCreature.html#a5698402eb4d7bbb013213f11f5768c92">attitude_to</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ) == <a class="code hl_enumvalue" href="classCreature.html#a8a475630b3289c468bd06cf114008217ac45ee12dee5d3dc56de7fe86e4484bea">Creature::A_FRIENDLY</a> ? <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a> : <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>;</div>
<div class="line"><a id="l03265" name="l03265"></a><span class="lineno"> 3265</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( m_type,</div>
<div class="line"><a id="l03266" name="l03266"></a><span class="lineno"> 3266</span>                                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s shocks you!&quot;</span> ),</div>
<div class="line"><a id="l03267" name="l03267"></a><span class="lineno"> 3267</span>                                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s shocks &lt;npcname&gt;!&quot;</span> ),</div>
<div class="line"><a id="l03268" name="l03268"></a><span class="lineno"> 3268</span>                                   z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l03269" name="l03269"></a><span class="lineno"> 3269</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a36dcf5a04ddc0cf9fa29c08b7b099158">check_dead_state</a>();</div>
<div class="line"><a id="l03270" name="l03270"></a><span class="lineno"> 3270</span>}</div>
<div class="ttc" id="aclassCreature_html_a5698402eb4d7bbb013213f11f5768c92"><div class="ttname"><a href="classCreature.html#a5698402eb4d7bbb013213f11f5768c92">Creature::attitude_to</a></div><div class="ttdeci">virtual Attitude attitude_to(const Creature &amp;other) const =0</div><div class="ttdoc">Attitude (of this creature) towards another creature.</div></div>
<div class="ttc" id="adamage_8h_html_ae63a2cf8429f9edf77b547d34ffe4e7aa31df3b2996d2d10b2ca3e275899fdddb"><div class="ttname"><a href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa31df3b2996d2d10b2ca3e275899fdddb">DT_ELECTRIC</a></div><div class="ttdeci">@ DT_ELECTRIC</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00030">damage.h:30</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8h_source.html#l00171">Creature::A_FRIENDLY</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="classCreature.html#a5698402eb4d7bbb013213f11f5768c92">Creature::attitude_to()</a>, <a class="el" href="creature_8cpp_source.html#l01833">Creature::check_dead_state()</a>, <a class="el" href="creature_8cpp_source.html#l00873">Creature::deal_damage()</a>, <a class="el" href="damage_8h_source.html#l00030">DT_ELECTRIC</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00260">m_neutral</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="damage_8cpp_source.html#l00180">dealt_damage_instance::total_damage()</a>, and <a class="el" href="creature_8h_source.html#l00485">Creature::uncanny_dodge()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monattack_8cpp_source.html#l03761">chickenbot()</a>, <a class="el" href="monattack_8cpp_source.html#l03712">copbot()</a>, <a class="el" href="monattack_8cpp_source.html#l01182">science()</a>, and <a class="el" href="monattack_8cpp_source.html#l03236">tazer()</a>.</p>

</div>
</div>
<a id="afb8251435c3c334d088110546b95400c" name="afb8251435c3c334d088110546b95400c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb8251435c3c334d088110546b95400c">&#9670;&nbsp;</a></span>tazer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::tazer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l03236">3236</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03237" name="l03237"></a><span class="lineno"> 3237</span>{</div>
<div class="line"><a id="l03238" name="l03238"></a><span class="lineno"> 3238</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l03239" name="l03239"></a><span class="lineno"> 3239</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> || !<a class="code hl_function" href="monattack_8cpp.html#abf0d71b531a799a8eb3fd58a846064db">is_adjacent</a>( z, target, <span class="keyword">false</span> ) ) {</div>
<div class="line"><a id="l03240" name="l03240"></a><span class="lineno"> 3240</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03241" name="l03241"></a><span class="lineno"> 3241</span>    }</div>
<div class="line"><a id="l03242" name="l03242"></a><span class="lineno"> 3242</span> </div>
<div class="line"><a id="l03243" name="l03243"></a><span class="lineno"> 3243</span>    <a class="code hl_function" href="namespacemattack.html#aa15cec367682f51a8071d832bd2371aa">taze</a>( z, target );</div>
<div class="line"><a id="l03244" name="l03244"></a><span class="lineno"> 3244</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03245" name="l03245"></a><span class="lineno"> 3245</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="monattack_8cpp_source.html#l00275">is_adjacent()</a>, and <a class="el" href="monattack_8cpp_source.html#l03247">taze()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="ab27c61424df0d5a41c90c11442bed61a" name="ab27c61424df0d5a41c90c11442bed61a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab27c61424df0d5a41c90c11442bed61a">&#9670;&nbsp;</a></span>tentacle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::tentacle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l02500">2500</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02501" name="l02501"></a><span class="lineno"> 2501</span>{</div>
<div class="line"><a id="l02502" name="l02502"></a><span class="lineno"> 2502</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> ) {</div>
<div class="line"><a id="l02503" name="l02503"></a><span class="lineno"> 2503</span>        <span class="comment">// TODO: handle friendly monsters</span></div>
<div class="line"><a id="l02504" name="l02504"></a><span class="lineno"> 2504</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02505" name="l02505"></a><span class="lineno"> 2505</span>    }</div>
<div class="line"><a id="l02506" name="l02506"></a><span class="lineno"> 2506</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l02507" name="l02507"></a><span class="lineno"> 2507</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> || <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() ) &gt; 3 || !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l02508" name="l02508"></a><span class="lineno"> 2508</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02509" name="l02509"></a><span class="lineno"> 2509</span>    }</div>
<div class="line"><a id="l02510" name="l02510"></a><span class="lineno"> 2510</span>    <a class="code hl_enumeration" href="enums_8h.html#a3baf36d700701401b6baf94db93d096e">game_message_type</a> msg_type = target == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ? <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a> : <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>;</div>
<div class="line"><a id="l02511" name="l02511"></a><span class="lineno"> 2511</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( msg_type,</div>
<div class="line"><a id="l02512" name="l02512"></a><span class="lineno"> 2512</span>                                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s lashes its tentacle at you!&quot;</span> ),</div>
<div class="line"><a id="l02513" name="l02513"></a><span class="lineno"> 2513</span>                                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s lashes its tentacle at &lt;npcname&gt;!&quot;</span> ),</div>
<div class="line"><a id="l02514" name="l02514"></a><span class="lineno"> 2514</span>                                   z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02515" name="l02515"></a><span class="lineno"> 2515</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 100;</div>
<div class="line"><a id="l02516" name="l02516"></a><span class="lineno"> 2516</span> </div>
<div class="line"><a id="l02517" name="l02517"></a><span class="lineno"> 2517</span>    <span class="keywordflow">if</span>( target-&gt;<a class="code hl_function" href="classCreature.html#afd2f1b1e5bafdef20afddbb704b1d5a5">uncanny_dodge</a>() ) {</div>
<div class="line"><a id="l02518" name="l02518"></a><span class="lineno"> 2518</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02519" name="l02519"></a><span class="lineno"> 2519</span>    }</div>
<div class="line"><a id="l02520" name="l02520"></a><span class="lineno"> 2520</span>    <span class="comment">// Can we dodge the attack? Uses player dodge function % chance (melee.cpp)</span></div>
<div class="line"><a id="l02521" name="l02521"></a><span class="lineno"> 2521</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacemattack.html#a4efb8be314551e35f69df8cf8d824174">dodge_check</a>( z, target ) ) {</div>
<div class="line"><a id="l02522" name="l02522"></a><span class="lineno"> 2522</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You dodge it!&quot;</span> ),</div>
<div class="line"><a id="l02523" name="l02523"></a><span class="lineno"> 2523</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; dodges it!&quot;</span> ) );</div>
<div class="line"><a id="l02524" name="l02524"></a><span class="lineno"> 2524</span>        target-&gt;<a class="code hl_function" href="classCreature.html#af56188882e3300853d18f166738ee37a">on_dodge</a>( z, z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> * 2 );</div>
<div class="line"><a id="l02525" name="l02525"></a><span class="lineno"> 2525</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02526" name="l02526"></a><span class="lineno"> 2526</span>    }</div>
<div class="line"><a id="l02527" name="l02527"></a><span class="lineno"> 2527</span> </div>
<div class="line"><a id="l02528" name="l02528"></a><span class="lineno"> 2528</span>    <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">bodypart_id</a> hit = target-&gt;<a class="code hl_function" href="classCreature.html#a51c96c81ae1ea766b5eead4a265c1492">get_random_body_part</a>();</div>
<div class="line"><a id="l02529" name="l02529"></a><span class="lineno"> 2529</span>    <span class="keyword">const</span> <a class="code hl_enumeration" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980">body_part</a> hit_token = hit-&gt;token;</div>
<div class="line"><a id="l02530" name="l02530"></a><span class="lineno"> 2530</span>    <span class="keywordtype">int</span> dam = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 10, 20 );</div>
<div class="line"><a id="l02531" name="l02531"></a><span class="lineno"> 2531</span>    dam = target-&gt;<a class="code hl_function" href="classCreature.html#a75ad96eb6ce27d3c1df250965b4de7b5">deal_damage</a>( z, hit, <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa5f8b46c6c239266403858fa2ae90ef23">DT_BASH</a>, dam ) ).<a class="code hl_function" href="structdealt__damage__instance.html#a86b702070a1c313624abc78ff34eff48">total_damage</a>();</div>
<div class="line"><a id="l02532" name="l02532"></a><span class="lineno"> 2532</span> </div>
<div class="line"><a id="l02533" name="l02533"></a><span class="lineno"> 2533</span>    <span class="keywordflow">if</span>( dam &gt; 0 ) {</div>
<div class="line"><a id="l02534" name="l02534"></a><span class="lineno"> 2534</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( msg_type,</div>
<div class="line"><a id="l02535" name="l02535"></a><span class="lineno"> 2535</span>                                       <span class="comment">//~ 1$s is bodypart name, 2$d is damage value.</span></div>
<div class="line"><a id="l02536" name="l02536"></a><span class="lineno"> 2536</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your %1$s is hit for %2$d damage!&quot;</span> ),</div>
<div class="line"><a id="l02537" name="l02537"></a><span class="lineno"> 2537</span>                                       <span class="comment">//~ 1$s is bodypart name, 2$d is damage value.</span></div>
<div class="line"><a id="l02538" name="l02538"></a><span class="lineno"> 2538</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt;&#39;s %1$s is hit for %2$d damage!&quot;</span> ),</div>
<div class="line"><a id="l02539" name="l02539"></a><span class="lineno"> 2539</span>                                       <a class="code hl_function" href="bodypart_8cpp.html#a6c9ef5f15f73c82d39d205d56a560672">body_part_name</a>( hit_token ),</div>
<div class="line"><a id="l02540" name="l02540"></a><span class="lineno"> 2540</span>                                       dam );</div>
<div class="line"><a id="l02541" name="l02541"></a><span class="lineno"> 2541</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02542" name="l02542"></a><span class="lineno"> 2542</span>        target-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>(</div>
<div class="line"><a id="l02543" name="l02543"></a><span class="lineno"> 2543</span>            <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s lashes its tentacle at your %2$s, but glances off your armor!&quot;</span> ),</div>
<div class="line"><a id="l02544" name="l02544"></a><span class="lineno"> 2544</span>            <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s lashes its tentacle at &lt;npcname&gt;&#39;s %2$s, but glances off their armor!&quot;</span> ),</div>
<div class="line"><a id="l02545" name="l02545"></a><span class="lineno"> 2545</span>            z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l02546" name="l02546"></a><span class="lineno"> 2546</span>            <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( hit_token ) );</div>
<div class="line"><a id="l02547" name="l02547"></a><span class="lineno"> 2547</span>    }</div>
<div class="line"><a id="l02548" name="l02548"></a><span class="lineno"> 2548</span> </div>
<div class="line"><a id="l02549" name="l02549"></a><span class="lineno"> 2549</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">on_hit</a>( z, hit,  z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> );</div>
<div class="line"><a id="l02550" name="l02550"></a><span class="lineno"> 2550</span>    target-&gt;<a class="code hl_function" href="classCreature.html#a36dcf5a04ddc0cf9fa29c08b7b099158">check_dead_state</a>();</div>
<div class="line"><a id="l02551" name="l02551"></a><span class="lineno"> 2551</span> </div>
<div class="line"><a id="l02552" name="l02552"></a><span class="lineno"> 2552</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02553" name="l02553"></a><span class="lineno"> 2553</span>}</div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096e"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096e">game_message_type</a></div><div class="ttdeci">game_message_type</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00252">enums.h:252</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="bodypart_8cpp_source.html#l00317">body_part_name()</a>, <a class="el" href="bodypart_8cpp_source.html#l00329">body_part_name_accusative()</a>, <a class="el" href="creature_8cpp_source.html#l01833">Creature::check_dead_state()</a>, <a class="el" href="creature_8cpp_source.html#l00873">Creature::deal_damage()</a>, <a class="el" href="monattack_8cpp_source.html#l05764">dodge_check()</a>, <a class="el" href="damage_8h_source.html#l00024">DT_BASH</a>, <a class="el" href="monster_8h_source.html#l00471">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8cpp_source.html#l01614">Creature::get_random_body_part()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="mtype_8h_source.html#l00285">mtype::melee_skill</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="classCreature.html#af56188882e3300853d18f166738ee37a">Creature::on_dodge()</a>, <a class="el" href="classCreature.html#a29989737d8bdd693384ee1c193ce7270">Creature::on_hit()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, <a class="el" href="damage_8cpp_source.html#l00180">dealt_damage_instance::total_damage()</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, and <a class="el" href="creature_8h_source.html#l00485">Creature::uncanny_dodge()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a417df1f7014426b1736ddcfc68bed69f" name="a417df1f7014426b1736ddcfc68bed69f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a417df1f7014426b1736ddcfc68bed69f">&#9670;&nbsp;</a></span>thrown_by_judo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::thrown_by_judo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
Dexterity increases chance judo-throwing a monster Unarmed increases chance of judo-throwing monster, vs their melee skill 
<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l04581">4581</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04582" name="l04582"></a><span class="lineno"> 4582</span>{</div>
<div class="line"><a id="l04583" name="l04583"></a><span class="lineno"> 4583</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l04584" name="l04584"></a><span class="lineno"> 4584</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ||</div>
<div class="line"><a id="l04585" name="l04585"></a><span class="lineno"> 4585</span>        !<a class="code hl_function" href="monattack_8cpp.html#abf0d71b531a799a8eb3fd58a846064db">is_adjacent</a>( z, target, <span class="keyword">false</span> ) ||</div>
<div class="line"><a id="l04586" name="l04586"></a><span class="lineno"> 4586</span>        !z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l04587" name="l04587"></a><span class="lineno"> 4587</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04588" name="l04588"></a><span class="lineno"> 4588</span>    }</div>
<div class="line"><a id="l04589" name="l04589"></a><span class="lineno"> 4589</span> </div>
<div class="line"><a id="l04590" name="l04590"></a><span class="lineno"> 4590</span>    <a class="code hl_class" href="classplayer.html">player</a> *foe = <span class="keyword">dynamic_cast&lt;</span> <a class="code hl_class" href="classplayer.html">player</a> * <span class="keyword">&gt;</span>( target );</div>
<div class="line"><a id="l04591" name="l04591"></a><span class="lineno"> 4591</span>    <span class="keywordflow">if</span>( foe == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l04592" name="l04592"></a><span class="lineno"> 4592</span>        <span class="comment">// No mons for now</span></div>
<div class="line"><a id="l04593" name="l04593"></a><span class="lineno"> 4593</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04594" name="l04594"></a><span class="lineno"> 4594</span>    }</div>
<div class="line"><a id="l04595" name="l04595"></a><span class="lineno"> 4595</span>    <span class="comment">// &quot;Wimpy&quot; Judo is about to pay off... :D</span></div>
<div class="line"><a id="l04596" name="l04596"></a><span class="lineno"> 4596</span>    <span class="keywordflow">if</span>( foe-&gt;<a class="code hl_function" href="classCharacter.html#ab9612295236144e36e019fb74b04c309">is_throw_immune</a>() ) {</div>
<div class="line"><a id="l04597" name="l04597"></a><span class="lineno"> 4597</span>        <span class="comment">// DX + Unarmed</span><span class="comment"></span></div>
<div class="line"><a id="l04598" name="l04598"></a><span class="lineno"> 4598</span><span class="comment">        ///\EFFECT_DEX increases chance judo-throwing a monster</span></div>
<div class="line"><a id="l04599" name="l04599"></a><span class="lineno"> 4599</span><span class="comment"></span><span class="comment"></span> </div>
<div class="line"><a id="l04600" name="l04600"></a><span class="lineno"> 4600</span><span class="comment">        ///\EFFECT_UNARMED increases chance of judo-throwing monster, vs their melee skill</span></div>
<div class="line"><a id="l04601" name="l04601"></a><span class="lineno"> 4601</span><span class="comment"></span>        <span class="keywordflow">if</span>( ( ( foe-&gt;<a class="code hl_variable" href="classCharacter.html#a4065ac02745befad248425d307b71849">dex_cur</a> + foe-&gt;<a class="code hl_function" href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">get_skill_level</a>( <a class="code hl_variable" href="monattack_8cpp.html#ad22b82ceedf236ed05df55e661444c76">skill_unarmed</a> ) ) &gt; ( z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a575a59af47aec8bf8bfb9021eb4dddf5">melee_skill</a> + <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0,</div>
<div class="line"><a id="l04602" name="l04602"></a><span class="lineno"> 4602</span>                3 ) ) ) ) {</div>
<div class="line"><a id="l04603" name="l04603"></a><span class="lineno"> 4603</span>            target-&gt;<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;but you grab its arm and flip it to the ground!&quot;</span> ) );</div>
<div class="line"><a id="l04604" name="l04604"></a><span class="lineno"> 4604</span> </div>
<div class="line"><a id="l04605" name="l04605"></a><span class="lineno"> 4605</span>            <span class="comment">// most of the time, when not isolated</span></div>
<div class="line"><a id="l04606" name="l04606"></a><span class="lineno"> 4606</span>            <span class="keywordflow">if</span>( !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) &amp;&amp; !target-&gt;<a class="code hl_function" href="classCreature.html#a8c833068edbe464c195c15084ab544f0">is_elec_immune</a>() &amp;&amp; z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a90766c9bb21264c53ed3c97ca031ccf6">sp_defense</a> == &amp;<a class="code hl_function" href="namespacemdefense.html#ab6cedba84e8aed8494aa011c914895af">mdefense::zapback</a> ) {</div>
<div class="line"><a id="l04607" name="l04607"></a><span class="lineno"> 4607</span>                <span class="comment">// If it all pans out, we&#39;re zap the player&#39;s arm as he flips the monster.</span></div>
<div class="line"><a id="l04608" name="l04608"></a><span class="lineno"> 4608</span>                target-&gt;<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The flip does shock you…&quot;</span> ) );</div>
<div class="line"><a id="l04609" name="l04609"></a><span class="lineno"> 4609</span>                <span class="comment">// Discounted electric damage for quick flip</span></div>
<div class="line"><a id="l04610" name="l04610"></a><span class="lineno"> 4610</span>                <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a> shock;</div>
<div class="line"><a id="l04611" name="l04611"></a><span class="lineno"> 4611</span>                shock.<a class="code hl_function" href="structdamage__instance.html#a36067fd68baf04345d0c3626c67b8cac">add_damage</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa31df3b2996d2d10b2ca3e275899fdddb">DT_ELECTRIC</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 3 ) );</div>
<div class="line"><a id="l04612" name="l04612"></a><span class="lineno"> 4612</span>                foe-&gt;<a class="code hl_function" href="classCharacter.html#a2c05090cba2078f9ebefd80e61564be3">deal_damage</a>( z, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;arm_l&quot;</span> ), shock );</div>
<div class="line"><a id="l04613" name="l04613"></a><span class="lineno"> 4613</span>                foe-&gt;<a class="code hl_function" href="classCharacter.html#a2c05090cba2078f9ebefd80e61564be3">deal_damage</a>( z, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;arm_r&quot;</span> ), shock );</div>
<div class="line"><a id="l04614" name="l04614"></a><span class="lineno"> 4614</span>                foe-&gt;<a class="code hl_function" href="classCreature.html#a36dcf5a04ddc0cf9fa29c08b7b099158">check_dead_state</a>();</div>
<div class="line"><a id="l04615" name="l04615"></a><span class="lineno"> 4615</span>            }</div>
<div class="line"><a id="l04616" name="l04616"></a><span class="lineno"> 4616</span>            <span class="comment">// Monster is down,</span></div>
<div class="line"><a id="l04617" name="l04617"></a><span class="lineno"> 4617</span>            z-&gt;<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a>, 5_turns );</div>
<div class="line"><a id="l04618" name="l04618"></a><span class="lineno"> 4618</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> min_damage = 10 + foe-&gt;<a class="code hl_function" href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">get_skill_level</a>( <a class="code hl_variable" href="monattack_8cpp.html#ad22b82ceedf236ed05df55e661444c76">skill_unarmed</a> );</div>
<div class="line"><a id="l04619" name="l04619"></a><span class="lineno"> 4619</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> max_damage = 20 + foe-&gt;<a class="code hl_function" href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">get_skill_level</a>( <a class="code hl_variable" href="monattack_8cpp.html#ad22b82ceedf236ed05df55e661444c76">skill_unarmed</a> );</div>
<div class="line"><a id="l04620" name="l04620"></a><span class="lineno"> 4620</span>            <span class="comment">// Deal moderate damage</span></div>
<div class="line"><a id="l04621" name="l04621"></a><span class="lineno"> 4621</span>            <span class="keyword">const</span> <span class="keyword">auto</span> damage = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( min_damage, max_damage );</div>
<div class="line"><a id="l04622" name="l04622"></a><span class="lineno"> 4622</span>            z-&gt;<a class="code hl_function" href="classmonster.html#afc6e6f5443145732310dd4901a394b4f">apply_damage</a>( foe, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ), damage );</div>
<div class="line"><a id="l04623" name="l04623"></a><span class="lineno"> 4623</span>            z-&gt;<a class="code hl_function" href="classCreature.html#a36dcf5a04ddc0cf9fa29c08b7b099158">check_dead_state</a>();</div>
<div class="line"><a id="l04624" name="l04624"></a><span class="lineno"> 4624</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04625" name="l04625"></a><span class="lineno"> 4625</span>            <span class="comment">// Still avoids the major hit!</span></div>
<div class="line"><a id="l04626" name="l04626"></a><span class="lineno"> 4626</span>            target-&gt;<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;but you deftly spin out of its grasp!&quot;</span> ) );</div>
<div class="line"><a id="l04627" name="l04627"></a><span class="lineno"> 4627</span>        }</div>
<div class="line"><a id="l04628" name="l04628"></a><span class="lineno"> 4628</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04629" name="l04629"></a><span class="lineno"> 4629</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04630" name="l04630"></a><span class="lineno"> 4630</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04631" name="l04631"></a><span class="lineno"> 4631</span>    }</div>
<div class="line"><a id="l04632" name="l04632"></a><span class="lineno"> 4632</span>}</div>
<div class="ttc" id="aclassCreature_html_a8c833068edbe464c195c15084ab544f0"><div class="ttname"><a href="classCreature.html#a8c833068edbe464c195c15084ab544f0">Creature::is_elec_immune</a></div><div class="ttdeci">virtual bool is_elec_immune() const =0</div></div>
<div class="ttc" id="anamespacemdefense_html_ab6cedba84e8aed8494aa011c914895af"><div class="ttname"><a href="namespacemdefense.html#ab6cedba84e8aed8494aa011c914895af">mdefense::zapback</a></div><div class="ttdeci">void zapback(monster &amp;m, Creature *source, const dealt_projectile_attack *proj)</div><div class="ttdef"><b>Definition:</b> <a href="mondefense_8cpp_source.html#l00048">mondefense.cpp:48</a></div></div>
<div class="ttc" id="astructmtype_html_a90766c9bb21264c53ed3c97ca031ccf6"><div class="ttname"><a href="structmtype.html#a90766c9bb21264c53ed3c97ca031ccf6">mtype::sp_defense</a></div><div class="ttdeci">mon_action_defend sp_defense</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00321">mtype.h:321</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="damage_8cpp_source.html#l00041">damage_instance::add_damage()</a>, <a class="el" href="monster_8cpp_source.html#l01807">monster::add_effect()</a>, <a class="el" href="creature_8h_source.html#l00593">Creature::add_msg_if_player()</a>, <a class="el" href="monster_8cpp_source.html#l01636">monster::apply_damage()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="creature_8cpp_source.html#l01833">Creature::check_dead_state()</a>, <a class="el" href="character_8cpp_source.html#l08437">Character::deal_damage()</a>, <a class="el" href="character_8h_source.html#l00305">Character::dex_cur</a>, <a class="el" href="damage_8h_source.html#l00030">DT_ELECTRIC</a>, <a class="el" href="monattack_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a>, <a class="el" href="character_8cpp_source.html#l03327">Character::get_skill_level()</a>, <a class="el" href="monattack_8cpp_source.html#l00275">is_adjacent()</a>, <a class="el" href="classCreature.html#a8c833068edbe464c195c15084ab544f0">Creature::is_elec_immune()</a>, <a class="el" href="martialarts_8cpp_source.html#l01176">Character::is_throw_immune()</a>, <a class="el" href="enums_8h_source.html#l00253">m_good</a>, <a class="el" href="mtype_8h_source.html#l00285">mtype::melee_skill</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, <a class="el" href="monattack_8cpp.html#ad22b82ceedf236ed05df55e661444c76">skill_unarmed</a>, <a class="el" href="mtype_8h_source.html#l00321">mtype::sp_defense</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, and <a class="el" href="mondefense_8cpp_source.html#l00048">mdefense::zapback()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monattack_8cpp_source.html#l05099">bio_op_takedown()</a>, <a class="el" href="monattack_8cpp_source.html#l02649">grab()</a>, and <a class="el" href="game_8cpp_source.html#l11318">game::update_stair_monsters()</a>.</p>

</div>
</div>
<a id="a2482921ec63e536a2bd13a998a19832f" name="a2482921ec63e536a2bd13a998a19832f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2482921ec63e536a2bd13a998a19832f">&#9670;&nbsp;</a></span>tindalos_teleport()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::tindalos_teleport </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l04956">4956</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04957" name="l04957"></a><span class="lineno"> 4957</span>{</div>
<div class="line"><a id="l04958" name="l04958"></a><span class="lineno"> 4958</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *target = z-&gt;<a class="code hl_function" href="classmonster.html#a3414f60cd7b63132b8ab605f6949edf4">attack_target</a>();</div>
<div class="line"><a id="l04959" name="l04959"></a><span class="lineno"> 4959</span>    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l04960" name="l04960"></a><span class="lineno"> 4960</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04961" name="l04961"></a><span class="lineno"> 4961</span>    }</div>
<div class="line"><a id="l04962" name="l04962"></a><span class="lineno"> 4962</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 7 ) ) {</div>
<div class="line"><a id="l04963" name="l04963"></a><span class="lineno"> 4963</span>        <span class="keywordflow">if</span>( <a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">const</span> afterimage = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_around( <a class="code hl_variable" href="monattack_8cpp.html#ab577a6dd7c7fb75a18a573934499058c">mon_hound_tindalos_afterimage</a>, z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(),</div>
<div class="line"><a id="l04964" name="l04964"></a><span class="lineno"> 4964</span>                                        1 ) ) {</div>
<div class="line"><a id="l04965" name="l04965"></a><span class="lineno"> 4965</span>            z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 140;</div>
<div class="line"><a id="l04966" name="l04966"></a><span class="lineno"> 4966</span>            afterimage-&gt;make_ally( *z );</div>
<div class="line"><a id="l04967" name="l04967"></a><span class="lineno"> 4967</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l04968" name="l04968"></a><span class="lineno"> 4968</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>,</div>
<div class="line"><a id="l04969" name="l04969"></a><span class="lineno"> 4969</span>                         <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The hound&#39;s movements chaotically rewind as a living afterimage splits from it!&quot;</span> ) );</div>
<div class="line"><a id="l04970" name="l04970"></a><span class="lineno"> 4970</span>            }</div>
<div class="line"><a id="l04971" name="l04971"></a><span class="lineno"> 4971</span>        }</div>
<div class="line"><a id="l04972" name="l04972"></a><span class="lineno"> 4972</span>    }</div>
<div class="line"><a id="l04973" name="l04973"></a><span class="lineno"> 4973</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> distance_to_target = <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() );</div>
<div class="line"><a id="l04974" name="l04974"></a><span class="lineno"> 4974</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> oldpos = z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>();</div>
<div class="line"><a id="l04975" name="l04975"></a><span class="lineno"> 4975</span>    <span class="keywordflow">if</span>( distance_to_target &gt; 5 ) {</div>
<div class="line"><a id="l04976" name="l04976"></a><span class="lineno"> 4976</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;dest : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>(), 4 ) ) {</div>
<div class="line"><a id="l04977" name="l04977"></a><span class="lineno"> 4977</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.is_cornerfloor( dest ) ) {</div>
<div class="line"><a id="l04978" name="l04978"></a><span class="lineno"> 4978</span>                <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_empty( dest ) ) {</div>
<div class="line"><a id="l04979" name="l04979"></a><span class="lineno"> 4979</span>                    z-&gt;<a class="code hl_function" href="classmonster.html#a4871f8fa2b4ba7577c80db7c5e88f291">setpos</a>( dest );</div>
<div class="line"><a id="l04980" name="l04980"></a><span class="lineno"> 4980</span>                    <span class="comment">// Not teleporting if it means losing sight of our current target</span></div>
<div class="line"><a id="l04981" name="l04981"></a><span class="lineno"> 4981</span>                    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_function" href="classCreature.html#ab42d5d429a5599b7f80906394c1236e5">sees</a>( *target ) ) {</div>
<div class="line"><a id="l04982" name="l04982"></a><span class="lineno"> 4982</span>                        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_field( oldpos, <a class="code hl_variable" href="field__type_8cpp.html#add34ceb641349b4b54b06aa46e16f7eb">fd_tindalos_rift</a>, 2 );</div>
<div class="line"><a id="l04983" name="l04983"></a><span class="lineno"> 4983</span>                        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_field( dest, <a class="code hl_variable" href="field__type_8cpp.html#add34ceb641349b4b54b06aa46e16f7eb">fd_tindalos_rift</a>, 2 );</div>
<div class="line"><a id="l04984" name="l04984"></a><span class="lineno"> 4984</span>                        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l04985" name="l04985"></a><span class="lineno"> 4985</span>                            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s dissipates and reforms close by.&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l04986" name="l04986"></a><span class="lineno"> 4986</span>                        }</div>
<div class="line"><a id="l04987" name="l04987"></a><span class="lineno"> 4987</span>                        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04988" name="l04988"></a><span class="lineno"> 4988</span>                    }</div>
<div class="line"><a id="l04989" name="l04989"></a><span class="lineno"> 4989</span>                }</div>
<div class="line"><a id="l04990" name="l04990"></a><span class="lineno"> 4990</span>            }</div>
<div class="line"><a id="l04991" name="l04991"></a><span class="lineno"> 4991</span>        }</div>
<div class="line"><a id="l04992" name="l04992"></a><span class="lineno"> 4992</span>        <span class="comment">// couldn&#39;t teleport without losing sight of target</span></div>
<div class="line"><a id="l04993" name="l04993"></a><span class="lineno"> 4993</span>        z-&gt;<a class="code hl_function" href="classmonster.html#a4871f8fa2b4ba7577c80db7c5e88f291">setpos</a>( oldpos );</div>
<div class="line"><a id="l04994" name="l04994"></a><span class="lineno"> 4994</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04995" name="l04995"></a><span class="lineno"> 4995</span>    }</div>
<div class="line"><a id="l04996" name="l04996"></a><span class="lineno"> 4996</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04997" name="l04997"></a><span class="lineno"> 4997</span>}</div>
<div class="ttc" id="afield__type_8cpp_html_add34ceb641349b4b54b06aa46e16f7eb"><div class="ttname"><a href="field__type_8cpp.html#add34ceb641349b4b54b06aa46e16f7eb">fd_tindalos_rift</a></div><div class="ttdeci">field_type_id fd_tindalos_rift</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00386">field_type.cpp:387</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_ab577a6dd7c7fb75a18a573934499058c"><div class="ttname"><a href="monattack_8cpp.html#ab577a6dd7c7fb75a18a573934499058c">mon_hound_tindalos_afterimage</a></div><div class="ttdeci">static const mtype_id mon_hound_tindalos_afterimage(&quot;mon_hound_tindalos_afterimage&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="monster_8cpp_source.html#l00993">monster::attack_target()</a>, <a class="el" href="field__type_8cpp_source.html#l00387">fd_tindalos_rift</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="monattack_8cpp.html#ab577a6dd7c7fb75a18a573934499058c">mon_hound_tindalos_afterimage</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="creature_8cpp_source.html#l00202">Creature::sees()</a>, and <a class="el" href="monster_8cpp_source.html#l00237">monster::setpos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a5477c56594f9a3b33735de5a43538880" name="a5477c56594f9a3b33735de5a43538880"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5477c56594f9a3b33735de5a43538880">&#9670;&nbsp;</a></span>triffid_growth()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::triffid_growth </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l02817">2817</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02818" name="l02818"></a><span class="lineno"> 2818</span>{</div>
<div class="line"><a id="l02819" name="l02819"></a><span class="lineno"> 2819</span>    <span class="comment">// Young triffid growing into an adult</span></div>
<div class="line"><a id="l02820" name="l02820"></a><span class="lineno"> 2820</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l02821" name="l02821"></a><span class="lineno"> 2821</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s young triffid grows into an adult!&quot;</span> ),</div>
<div class="line"><a id="l02822" name="l02822"></a><span class="lineno"> 2822</span>                 z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l02823" name="l02823"></a><span class="lineno"> 2823</span>    }</div>
<div class="line"><a id="l02824" name="l02824"></a><span class="lineno"> 2824</span>    z-&gt;<a class="code hl_function" href="classmonster.html#a39d78be1e47deaf970439c3b9504e5d9">poly</a>( <a class="code hl_variable" href="monattack_8cpp.html#abeab8cb2b0249fa7d4c815d19b6dd457">mon_triffid</a> );</div>
<div class="line"><a id="l02825" name="l02825"></a><span class="lineno"> 2825</span> </div>
<div class="line"><a id="l02826" name="l02826"></a><span class="lineno"> 2826</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02827" name="l02827"></a><span class="lineno"> 2827</span>}</div>
<div class="ttc" id="amonattack_8cpp_html_abeab8cb2b0249fa7d4c815d19b6dd457"><div class="ttname"><a href="monattack_8cpp.html#abeab8cb2b0249fa7d4c815d19b6dd457">mon_triffid</a></div><div class="ttdeci">static const mtype_id mon_triffid(&quot;mon_triffid&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="monattack_8cpp.html#abeab8cb2b0249fa7d4c815d19b6dd457">mon_triffid</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, and <a class="el" href="monster_8cpp_source.html#l00260">monster::poly()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="a8fb64bc402d45e98d82c603c475755eb" name="a8fb64bc402d45e98d82c603c475755eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fb64bc402d45e98d82c603c475755eb">&#9670;&nbsp;</a></span>triffid_heartbeat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::triffid_heartbeat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l01601">1601</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span>{</div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span>    <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 14, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a74bcc1e0384a916f56360c649f543f3a">sounds::sound_t::movement</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;thu-THUMP.&quot;</span> ), <span class="keyword">true</span>, <span class="stringliteral">&quot;misc&quot;</span>,</div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span>                   <span class="stringliteral">&quot;heartbeat&quot;</span> );</div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 300;</div>
<div class="line"><a id="l01606" name="l01606"></a><span class="lineno"> 1606</span>    <span class="keywordflow">if</span>( z-&gt;<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> != 0 ) {</div>
<div class="line"><a id="l01607" name="l01607"></a><span class="lineno"> 1607</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span>        <span class="comment">// TODO: when friendly: open a way to the stairs, don&#39;t spawn monsters</span></div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"> 1609</span>    }</div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.posz() != z-&gt;<a class="code hl_function" href="classmonster.html#a3690c104bd71bffc25153a86229f2a97">posz</a>() ) {</div>
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"> 1611</span>        <span class="comment">// Maybe remove this and allow spawning monsters above?</span></div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span>    }</div>
<div class="line"><a id="l01614" name="l01614"></a><span class="lineno"> 1614</span> </div>
<div class="line"><a id="l01615" name="l01615"></a><span class="lineno"> 1615</span>    <span class="keyword">static</span> <a class="code hl_struct" href="structpathfinding__settings.html">pathfinding_settings</a> root_pathfind( 10, 20, 50, 0, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span> );</div>
<div class="line"><a id="l01616" name="l01616"></a><span class="lineno"> 1616</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() ) &gt; 5 &amp;&amp;</div>
<div class="line"><a id="l01617" name="l01617"></a><span class="lineno"> 1617</span>        !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.route( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos(), z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), root_pathfind ).empty() ) {</div>
<div class="line"><a id="l01618" name="l01618"></a><span class="lineno"> 1618</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The root walls creak around you.&quot;</span> ) );</div>
<div class="line"><a id="l01619" name="l01619"></a><span class="lineno"> 1619</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;dest : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 3 ) ) {</div>
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"> 1620</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_empty( dest ) &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a id="l01621" name="l01621"></a><span class="lineno"> 1621</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.ter_set( dest, <a class="code hl_variable" href="mapdata_8cpp.html#a74ff6521e84b9ecf004c74db7fb2bbb6">t_root_wall</a> );</div>
<div class="line"><a id="l01622" name="l01622"></a><span class="lineno"> 1622</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.ter( dest ) == <a class="code hl_variable" href="mapdata_8cpp.html#a74ff6521e84b9ecf004c74db7fb2bbb6">t_root_wall</a> &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 10 ) ) {</div>
<div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.ter_set( dest, <a class="code hl_variable" href="mapdata_8cpp.html#aa4573ce2c594834a8ced806a5099f3e3">t_dirt</a> );</div>
<div class="line"><a id="l01624" name="l01624"></a><span class="lineno"> 1624</span>            }</div>
<div class="line"><a id="l01625" name="l01625"></a><span class="lineno"> 1625</span>        }</div>
<div class="line"><a id="l01626" name="l01626"></a><span class="lineno"> 1626</span>        <span class="comment">// Open blank tiles as long as there&#39;s no possible route</span></div>
<div class="line"><a id="l01627" name="l01627"></a><span class="lineno"> 1627</span>        <span class="keywordtype">int</span> tries = 0;</div>
<div class="line"><a id="l01628" name="l01628"></a><span class="lineno"> 1628</span>        <span class="keywordflow">while</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.route( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos(), z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), root_pathfind ).empty() &amp;&amp;</div>
<div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span>               tries &lt; 20 ) {</div>
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"> 1630</span>            <a class="code hl_struct" href="structpoint.html">point</a> p( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.posx(), z-&gt;<a class="code hl_function" href="classmonster.html#ae5824f6fba759aa296cd55b83d2ea60f">posx</a>() - 3 ), <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.posy(), z-&gt;<a class="code hl_function" href="classmonster.html#a34e7b9873ad1cf0901f6583895ee3af8">posy</a>() - 3 ) );</div>
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"> 1631</span>            <a class="code hl_struct" href="structtripoint.html">tripoint</a> dest( p, z-&gt;<a class="code hl_function" href="classmonster.html#a3690c104bd71bffc25153a86229f2a97">posz</a>() );</div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"> 1632</span>            tries++;</div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.ter_set( dest, <a class="code hl_variable" href="mapdata_8cpp.html#aa4573ce2c594834a8ced806a5099f3e3">t_dirt</a> );</div>
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"> 1634</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( dest, <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() ) &gt; 3 &amp;&amp; <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;num_creatures() &lt; 30 &amp;&amp;</div>
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"> 1635</span>                !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at( dest ) &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 20 ) ) { <span class="comment">// Spawn an extra monster</span></div>
<div class="line"><a id="l01636" name="l01636"></a><span class="lineno"> 1636</span>                <a class="code hl_class" href="classstring__id.html">mtype_id</a> montype = <a class="code hl_variable" href="monattack_8cpp.html#abeab8cb2b0249fa7d4c815d19b6dd457">mon_triffid</a>;</div>
<div class="line"><a id="l01637" name="l01637"></a><span class="lineno"> 1637</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a id="l01638" name="l01638"></a><span class="lineno"> 1638</span>                    montype = <a class="code hl_variable" href="monattack_8cpp.html#a9505b03c793013adc043674d3233f8f4">mon_creeper_hub</a>;</div>
<div class="line"><a id="l01639" name="l01639"></a><span class="lineno"> 1639</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a id="l01640" name="l01640"></a><span class="lineno"> 1640</span>                    montype = <a class="code hl_variable" href="monattack_8cpp.html#a0f270bdc0fdca233dd1a3e20d948f67c">mon_biollante</a>;</div>
<div class="line"><a id="l01641" name="l01641"></a><span class="lineno"> 1641</span>                }</div>
<div class="line"><a id="l01642" name="l01642"></a><span class="lineno"> 1642</span>                <span class="keywordflow">if</span>( <a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">const</span> plant = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_at( montype, dest ) ) {</div>
<div class="line"><a id="l01643" name="l01643"></a><span class="lineno"> 1643</span>                    <a class="code hl_function" href="namespacemattack.html#a7304ed99145452654c6e4ce3456f601e">plant</a>-&gt;make_ally( *z );</div>
<div class="line"><a id="l01644" name="l01644"></a><span class="lineno"> 1644</span>                }</div>
<div class="line"><a id="l01645" name="l01645"></a><span class="lineno"> 1645</span>            }</div>
<div class="line"><a id="l01646" name="l01646"></a><span class="lineno"> 1646</span>        }</div>
<div class="line"><a id="l01647" name="l01647"></a><span class="lineno"> 1647</span> </div>
<div class="line"><a id="l01648" name="l01648"></a><span class="lineno"> 1648</span>    } <span class="keywordflow">else</span> { <span class="comment">// The player is close enough for a fight!</span></div>
<div class="line"><a id="l01649" name="l01649"></a><span class="lineno"> 1649</span> </div>
<div class="line"><a id="l01650" name="l01650"></a><span class="lineno"> 1650</span>        <span class="comment">// Spawn a monster in (about) every second surrounding tile.</span></div>
<div class="line"><a id="l01651" name="l01651"></a><span class="lineno"> 1651</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; 4; ++i ) {</div>
<div class="line"><a id="l01652" name="l01652"></a><span class="lineno"> 1652</span>            <span class="keywordflow">if</span>( <a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">const</span>  triffid = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_around( <a class="code hl_variable" href="monattack_8cpp.html#abeab8cb2b0249fa7d4c815d19b6dd457">mon_triffid</a>, z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 1 ) ) {</div>
<div class="line"><a id="l01653" name="l01653"></a><span class="lineno"> 1653</span>                triffid-&gt;make_ally( *z );</div>
<div class="line"><a id="l01654" name="l01654"></a><span class="lineno"> 1654</span>            }</div>
<div class="line"><a id="l01655" name="l01655"></a><span class="lineno"> 1655</span>        }</div>
<div class="line"><a id="l01656" name="l01656"></a><span class="lineno"> 1656</span>    }</div>
<div class="line"><a id="l01657" name="l01657"></a><span class="lineno"> 1657</span> </div>
<div class="line"><a id="l01658" name="l01658"></a><span class="lineno"> 1658</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01659" name="l01659"></a><span class="lineno"> 1659</span>}</div>
<div class="ttc" id="amapdata_8cpp_html_a74ff6521e84b9ecf004c74db7fb2bbb6"><div class="ttname"><a href="mapdata_8cpp.html#a74ff6521e84b9ecf004c74db7fb2bbb6">t_root_wall</a></div><div class="ttdeci">ter_id t_root_wall</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00684">mapdata.cpp:684</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_aa4573ce2c594834a8ced806a5099f3e3"><div class="ttname"><a href="mapdata_8cpp.html#aa4573ce2c594834a8ced806a5099f3e3">t_dirt</a></div><div class="ttdeci">ter_id t_dirt</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00625">mapdata.cpp:625</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a0f270bdc0fdca233dd1a3e20d948f67c"><div class="ttname"><a href="monattack_8cpp.html#a0f270bdc0fdca233dd1a3e20d948f67c">mon_biollante</a></div><div class="ttdeci">static const mtype_id mon_biollante(&quot;mon_biollante&quot;)</div></div>
<div class="ttc" id="amonattack_8cpp_html_a9505b03c793013adc043674d3233f8f4"><div class="ttname"><a href="monattack_8cpp.html#a9505b03c793013adc043674d3233f8f4">mon_creeper_hub</a></div><div class="ttdeci">static const mtype_id mon_creeper_hub(&quot;mon_creeper_hub&quot;)</div></div>
<div class="ttc" id="anamespacemattack_html_a7304ed99145452654c6e4ce3456f601e"><div class="ttname"><a href="namespacemattack.html#a7304ed99145452654c6e4ce3456f601e">mattack::plant</a></div><div class="ttdeci">bool plant(monster *z)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l02204">monattack.cpp:2204</a></div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3a74bcc1e0384a916f56360c649f543f3a"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a74bcc1e0384a916f56360c649f543f3a">sounds::sound_t::movement</a></div><div class="ttdeci">@ movement</div></div>
<div class="ttc" id="astructpathfinding__settings_html"><div class="ttname"><a href="structpathfinding__settings.html">pathfinding_settings</a></div><div class="ttdef"><b>Definition:</b> <a href="pathfinding_8h_source.html#l00050">pathfinding.h:50</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="monster_8h_source.html#l00471">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="monattack_8cpp.html#a0f270bdc0fdca233dd1a3e20d948f67c">mon_biollante</a>, <a class="el" href="monattack_8cpp.html#a9505b03c793013adc043674d3233f8f4">mon_creeper_hub</a>, <a class="el" href="monattack_8cpp.html#abeab8cb2b0249fa7d4c815d19b6dd457">mon_triffid</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a74bcc1e0384a916f56360c649f543f3a">sounds::movement</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="monattack_8cpp_source.html#l02204">plant()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="monster_8h_source.html#l00495">monster::posx()</a>, <a class="el" href="monster_8h_source.html#l00498">monster::posy()</a>, <a class="el" href="monster_8h_source.html#l00501">monster::posz()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, <a class="el" href="mapdata_8cpp_source.html#l00625">t_dirt</a>, and <a class="el" href="mapdata_8cpp_source.html#l00684">t_root_wall</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="aa9f6e64b0eb6f282691998192ebd7a7f" name="aa9f6e64b0eb6f282691998192ebd7a7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9f6e64b0eb6f282691998192ebd7a7f">&#9670;&nbsp;</a></span>upgrade()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::upgrade </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l03965">3965</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03966" name="l03966"></a><span class="lineno"> 3966</span>{</div>
<div class="line"><a id="l03967" name="l03967"></a><span class="lineno"> 3967</span>    std::vector&lt;monster *&gt; targets;</div>
<div class="line"><a id="l03968" name="l03968"></a><span class="lineno"> 3968</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classmonster.html">monster</a> &amp;zed : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;all_monsters() ) {</div>
<div class="line"><a id="l03969" name="l03969"></a><span class="lineno"> 3969</span>        <span class="comment">// Check this first because it is a relatively cheap check</span></div>
<div class="line"><a id="l03970" name="l03970"></a><span class="lineno"> 3970</span>        <span class="keywordflow">if</span>( zed.can_upgrade() ) {</div>
<div class="line"><a id="l03971" name="l03971"></a><span class="lineno"> 3971</span>            <span class="comment">// Then do the more expensive ones</span></div>
<div class="line"><a id="l03972" name="l03972"></a><span class="lineno"> 3972</span>            <span class="keywordflow">if</span>( z-&gt;<a class="code hl_function" href="classmonster.html#a125622587c2069dc4dbbe07943c81336">attitude_to</a>( zed ) != Creature::Attitude::A_HOSTILE &amp;&amp;</div>
<div class="line"><a id="l03973" name="l03973"></a><span class="lineno"> 3973</span>                <a class="code hl_function" href="monattack_8cpp.html#a2239aa1914a4ff939b923ada5faf247d">within_target_range</a>( z, &amp;zed, 10 ) ) {</div>
<div class="line"><a id="l03974" name="l03974"></a><span class="lineno"> 3974</span>                targets.push_back( &amp;zed );</div>
<div class="line"><a id="l03975" name="l03975"></a><span class="lineno"> 3975</span>            }</div>
<div class="line"><a id="l03976" name="l03976"></a><span class="lineno"> 3976</span>        }</div>
<div class="line"><a id="l03977" name="l03977"></a><span class="lineno"> 3977</span>    }</div>
<div class="line"><a id="l03978" name="l03978"></a><span class="lineno"> 3978</span>    <span class="keywordflow">if</span>( targets.empty() ) {</div>
<div class="line"><a id="l03979" name="l03979"></a><span class="lineno"> 3979</span>        <span class="comment">// Nobody to upgrade, get MAD!</span></div>
<div class="line"><a id="l03980" name="l03980"></a><span class="lineno"> 3980</span>        z-&gt;<a class="code hl_variable" href="classmonster.html#a7b22fe8719e4783fe1896429cedefa8d">anger</a> = 100;</div>
<div class="line"><a id="l03981" name="l03981"></a><span class="lineno"> 3981</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03982" name="l03982"></a><span class="lineno"> 3982</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03983" name="l03983"></a><span class="lineno"> 3983</span>        <span class="comment">// We&#39;ve got zombies to upgrade now, calm down again</span></div>
<div class="line"><a id="l03984" name="l03984"></a><span class="lineno"> 3984</span>        z-&gt;<a class="code hl_variable" href="classmonster.html#a7b22fe8719e4783fe1896429cedefa8d">anger</a> = 5;</div>
<div class="line"><a id="l03985" name="l03985"></a><span class="lineno"> 3985</span>    }</div>
<div class="line"><a id="l03986" name="l03986"></a><span class="lineno"> 3986</span> </div>
<div class="line"><a id="l03987" name="l03987"></a><span class="lineno"> 3987</span>    <span class="comment">// Takes one turn</span></div>
<div class="line"><a id="l03988" name="l03988"></a><span class="lineno"> 3988</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= z-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#addfa6852e581c8cebbd1bbf9c4ebbd9a">speed</a>;</div>
<div class="line"><a id="l03989" name="l03989"></a><span class="lineno"> 3989</span> </div>
<div class="line"><a id="l03990" name="l03990"></a><span class="lineno"> 3990</span>    <a class="code hl_class" href="classmonster.html">monster</a> *target = <a class="code hl_function" href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a>( targets );</div>
<div class="line"><a id="l03991" name="l03991"></a><span class="lineno"> 3991</span> </div>
<div class="line"><a id="l03992" name="l03992"></a><span class="lineno"> 3992</span>    std::string old_name = target-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>();</div>
<div class="line"><a id="l03993" name="l03993"></a><span class="lineno"> 3993</span>    <span class="keyword">const</span> <span class="keyword">auto</span> could_see = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *target );</div>
<div class="line"><a id="l03994" name="l03994"></a><span class="lineno"> 3994</span>    target-&gt;<a class="code hl_function" href="classmonster.html#a0efe8a7c1afcfe788aa886e49c27a3f5">hasten_upgrade</a>();</div>
<div class="line"><a id="l03995" name="l03995"></a><span class="lineno"> 3995</span>    target-&gt;<a class="code hl_function" href="classmonster.html#a63cfaab5c6126ecc3f3c3e966f4bf574">try_upgrade</a>( <span class="keyword">false</span> );</div>
<div class="line"><a id="l03996" name="l03996"></a><span class="lineno"> 3996</span>    <span class="keyword">const</span> <span class="keyword">auto</span> can_see = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *target );</div>
<div class="line"><a id="l03997" name="l03997"></a><span class="lineno"> 3997</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l03998" name="l03998"></a><span class="lineno"> 3998</span>        <span class="keywordflow">if</span>( could_see ) {</div>
<div class="line"><a id="l03999" name="l03999"></a><span class="lineno"> 3999</span>            <span class="comment">//~ %1$s is the name of the zombie upgrading the other, %2$s is the zombie being upgraded.</span></div>
<div class="line"><a id="l04000" name="l04000"></a><span class="lineno"> 4000</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A black mist floats from the %1$s around the %2$s.&quot;</span> ),</div>
<div class="line"><a id="l04001" name="l04001"></a><span class="lineno"> 4001</span>                     z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(), old_name );</div>
<div class="line"><a id="l04002" name="l04002"></a><span class="lineno"> 4002</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04003" name="l04003"></a><span class="lineno"> 4003</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A black mist floats from the %s.&quot;</span> ), z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l04004" name="l04004"></a><span class="lineno"> 4004</span>        }</div>
<div class="line"><a id="l04005" name="l04005"></a><span class="lineno"> 4005</span>    }</div>
<div class="line"><a id="l04006" name="l04006"></a><span class="lineno"> 4006</span>    <span class="keywordflow">if</span>( target-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() != old_name ) {</div>
<div class="line"><a id="l04007" name="l04007"></a><span class="lineno"> 4007</span>        <span class="keywordflow">if</span>( could_see &amp;&amp; can_see ) {</div>
<div class="line"><a id="l04008" name="l04008"></a><span class="lineno"> 4008</span>            <span class="comment">//~ %1$s is the pre-upgrade monster, %2$s is the post-upgrade monster.</span></div>
<div class="line"><a id="l04009" name="l04009"></a><span class="lineno"> 4009</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s becomes a %2$s!&quot;</span> ), old_name,</div>
<div class="line"><a id="l04010" name="l04010"></a><span class="lineno"> 4010</span>                     target-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l04011" name="l04011"></a><span class="lineno"> 4011</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( could_see ) {</div>
<div class="line"><a id="l04012" name="l04012"></a><span class="lineno"> 4012</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s vanishes!&quot;</span> ), old_name );</div>
<div class="line"><a id="l04013" name="l04013"></a><span class="lineno"> 4013</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( can_see ) {</div>
<div class="line"><a id="l04014" name="l04014"></a><span class="lineno"> 4014</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A %s appears!&quot;</span> ), target-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l04015" name="l04015"></a><span class="lineno"> 4015</span>        }</div>
<div class="line"><a id="l04016" name="l04016"></a><span class="lineno"> 4016</span>    }</div>
<div class="line"><a id="l04017" name="l04017"></a><span class="lineno"> 4017</span> </div>
<div class="line"><a id="l04018" name="l04018"></a><span class="lineno"> 4018</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04019" name="l04019"></a><span class="lineno"> 4019</span>}</div>
<div class="ttc" id="aclassmonster_html_a0efe8a7c1afcfe788aa886e49c27a3f5"><div class="ttname"><a href="classmonster.html#a0efe8a7c1afcfe788aa886e49c27a3f5">monster::hasten_upgrade</a></div><div class="ttdeci">void hasten_upgrade()</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00285">monster.cpp:285</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="monster_8h_source.html#l00472">monster::anger</a>, <a class="el" href="monster_8cpp_source.html#l01020">monster::attitude_to()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="monster_8cpp_source.html#l00285">monster::hasten_upgrade()</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="rng_8h_source.html#l00088">random_entry()</a>, <a class="el" href="mtype_8h_source.html#l00268">mtype::speed</a>, <a class="el" href="monster_8cpp_source.html#l00331">monster::try_upgrade()</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, and <a class="el" href="monattack_8cpp_source.html#l00214">within_target_range()</a>.</p>

<p class="reference">Referenced by <a class="el" href="faction__camp_8cpp_source.html#l01209">basecamp::get_available_missions()</a>, <a class="el" href="faction__camp_8cpp_source.html#l00691">basecamp::get_available_missions_by_dir()</a>, and <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
<a id="af2676be6738b2b9622d33c48e7c664c6" name="af2676be6738b2b9622d33c48e7c664c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2676be6738b2b9622d33c48e7c664c6">&#9670;&nbsp;</a></span>vine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::vine </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l01521">1521</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01522" name="l01522"></a><span class="lineno"> 1522</span>{</div>
<div class="line"><a id="l01523" name="l01523"></a><span class="lineno"> 1523</span>    <span class="keywordtype">int</span> vine_neighbors = 0;</div>
<div class="line"><a id="l01524" name="l01524"></a><span class="lineno"> 1524</span>    <span class="keywordtype">bool</span> parent_out_of_range = !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.inbounds( z-&gt;<a class="code hl_function" href="classmonster.html#a7acb550c6851c43b6804abf119102571">move_target</a>() );</div>
<div class="line"><a id="l01525" name="l01525"></a><span class="lineno"> 1525</span>    <a class="code hl_class" href="classmonster.html">monster</a> *parent = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at&lt;<a class="code hl_class" href="classmonster.html">monster</a>&gt;( z-&gt;<a class="code hl_function" href="classmonster.html#a7acb550c6851c43b6804abf119102571">move_target</a>() );</div>
<div class="line"><a id="l01526" name="l01526"></a><span class="lineno"> 1526</span>    <span class="keywordflow">if</span>( !parent_out_of_range &amp;&amp; ( parent == <span class="keyword">nullptr</span> || parent-&gt;<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a> != <a class="code hl_variable" href="monattack_8cpp.html#a9505b03c793013adc043674d3233f8f4">mon_creeper_hub</a> ) ) {</div>
<div class="line"><a id="l01527" name="l01527"></a><span class="lineno"> 1527</span>        <span class="comment">// TODO: Should probably die instead.</span></div>
<div class="line"><a id="l01528" name="l01528"></a><span class="lineno"> 1528</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01529" name="l01529"></a><span class="lineno"> 1529</span>    }</div>
<div class="line"><a id="l01530" name="l01530"></a><span class="lineno"> 1530</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 100;</div>
<div class="line"><a id="l01531" name="l01531"></a><span class="lineno"> 1531</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;dest : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 1 ) ) {</div>
<div class="line"><a id="l01532" name="l01532"></a><span class="lineno"> 1532</span>        <a class="code hl_class" href="classCreature.html">Creature</a> *critter = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at( dest );</div>
<div class="line"><a id="l01533" name="l01533"></a><span class="lineno"> 1533</span>        <span class="keywordflow">if</span>( critter != <span class="keyword">nullptr</span> &amp;&amp; z-&gt;<a class="code hl_function" href="classmonster.html#a125622587c2069dc4dbbe07943c81336">attitude_to</a>( *critter ) == Creature::Attitude::A_HOSTILE ) {</div>
<div class="line"><a id="l01534" name="l01534"></a><span class="lineno"> 1534</span>            <span class="keywordflow">if</span>( critter-&gt;<a class="code hl_function" href="classCreature.html#afd2f1b1e5bafdef20afddbb704b1d5a5">uncanny_dodge</a>() ) {</div>
<div class="line"><a id="l01535" name="l01535"></a><span class="lineno"> 1535</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01536" name="l01536"></a><span class="lineno"> 1536</span>            }</div>
<div class="line"><a id="l01537" name="l01537"></a><span class="lineno"> 1537</span> </div>
<div class="line"><a id="l01538" name="l01538"></a><span class="lineno"> 1538</span>            <a class="code hl_class" href="classint__id.html">bodypart_id</a> bphit = critter-&gt;<a class="code hl_function" href="classCreature.html#a51c96c81ae1ea766b5eead4a265c1492">get_random_body_part</a>();</div>
<div class="line"><a id="l01539" name="l01539"></a><span class="lineno"> 1539</span>            critter-&gt;<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a id="l01540" name="l01540"></a><span class="lineno"> 1540</span>                                            <span class="comment">//~ 1$s monster name(vine), 2$s bodypart in accusative</span></div>
<div class="line"><a id="l01541" name="l01541"></a><span class="lineno"> 1541</span>                                            <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s lashes your %2$s!&quot;</span> ),</div>
<div class="line"><a id="l01542" name="l01542"></a><span class="lineno"> 1542</span>                                            <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s lashes &lt;npcname&gt;&#39;s %2$s!&quot;</span> ),</div>
<div class="line"><a id="l01543" name="l01543"></a><span class="lineno"> 1543</span>                                            z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l01544" name="l01544"></a><span class="lineno"> 1544</span>                                            <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( bphit-&gt;token ) );</div>
<div class="line"><a id="l01545" name="l01545"></a><span class="lineno"> 1545</span>            <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a> d;</div>
<div class="line"><a id="l01546" name="l01546"></a><span class="lineno"> 1546</span>            d.<a class="code hl_function" href="structdamage__instance.html#a36067fd68baf04345d0c3626c67b8cac">add_damage</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa8ff698c0509e78ff65c7c7ec899b4f51">DT_CUT</a>, 8 );</div>
<div class="line"><a id="l01547" name="l01547"></a><span class="lineno"> 1547</span>            d.<a class="code hl_function" href="structdamage__instance.html#a36067fd68baf04345d0c3626c67b8cac">add_damage</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa5f8b46c6c239266403858fa2ae90ef23">DT_BASH</a>, 8 );</div>
<div class="line"><a id="l01548" name="l01548"></a><span class="lineno"> 1548</span>            critter-&gt;<a class="code hl_function" href="classCreature.html#a75ad96eb6ce27d3c1df250965b4de7b5">deal_damage</a>( z, bphit, d );</div>
<div class="line"><a id="l01549" name="l01549"></a><span class="lineno"> 1549</span>            critter-&gt;<a class="code hl_function" href="classCreature.html#a36dcf5a04ddc0cf9fa29c08b7b099158">check_dead_state</a>();</div>
<div class="line"><a id="l01550" name="l01550"></a><span class="lineno"> 1550</span>            z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 100;</div>
<div class="line"><a id="l01551" name="l01551"></a><span class="lineno"> 1551</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01552" name="l01552"></a><span class="lineno"> 1552</span>        }</div>
<div class="line"><a id="l01553" name="l01553"></a><span class="lineno"> 1553</span> </div>
<div class="line"><a id="l01554" name="l01554"></a><span class="lineno"> 1554</span>        <span class="keywordflow">if</span>( <a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">const</span> neighbor = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at&lt;<a class="code hl_class" href="classmonster.html">monster</a>&gt;( dest ) ) {</div>
<div class="line"><a id="l01555" name="l01555"></a><span class="lineno"> 1555</span>            <span class="keywordflow">if</span>( neighbor-&gt;type-&gt;id == <a class="code hl_variable" href="monattack_8cpp.html#a041e74f49f2eab98904a956d5d5e473a">mon_creeper_vine</a> ) {</div>
<div class="line"><a id="l01556" name="l01556"></a><span class="lineno"> 1556</span>                vine_neighbors++;</div>
<div class="line"><a id="l01557" name="l01557"></a><span class="lineno"> 1557</span>            }</div>
<div class="line"><a id="l01558" name="l01558"></a><span class="lineno"> 1558</span>        }</div>
<div class="line"><a id="l01559" name="l01559"></a><span class="lineno"> 1559</span>    }</div>
<div class="line"><a id="l01560" name="l01560"></a><span class="lineno"> 1560</span>    <span class="comment">// Calculate distance from nearest hub</span></div>
<div class="line"><a id="l01561" name="l01561"></a><span class="lineno"> 1561</span>    <span class="keywordtype">int</span> dist_from_hub = <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), z-&gt;<a class="code hl_function" href="classmonster.html#a7acb550c6851c43b6804abf119102571">move_target</a>() );</div>
<div class="line"><a id="l01562" name="l01562"></a><span class="lineno"> 1562</span>    <span class="keywordflow">if</span>( dist_from_hub &gt; 20 || vine_neighbors &gt; 5 || <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 7 - vine_neighbors ) ||</div>
<div class="line"><a id="l01563" name="l01563"></a><span class="lineno"> 1563</span>        !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( dist_from_hub ) ) {</div>
<div class="line"><a id="l01564" name="l01564"></a><span class="lineno"> 1564</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01565" name="l01565"></a><span class="lineno"> 1565</span>    }</div>
<div class="line"><a id="l01566" name="l01566"></a><span class="lineno"> 1566</span>    <span class="keywordflow">if</span>( <a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">const</span> <a class="code hl_function" href="namespacemattack.html#af2676be6738b2b9622d33c48e7c664c6">vine</a> = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_around( <a class="code hl_variable" href="monattack_8cpp.html#a041e74f49f2eab98904a956d5d5e473a">mon_creeper_vine</a>, z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 1 ) ) {</div>
<div class="line"><a id="l01567" name="l01567"></a><span class="lineno"> 1567</span>        <a class="code hl_function" href="namespacemattack.html#af2676be6738b2b9622d33c48e7c664c6">vine</a>-&gt;make_ally( *z );</div>
<div class="line"><a id="l01568" name="l01568"></a><span class="lineno"> 1568</span>        <a class="code hl_function" href="namespacemattack.html#af2676be6738b2b9622d33c48e7c664c6">vine</a>-&gt;reset_special( <span class="stringliteral">&quot;VINE&quot;</span> );</div>
<div class="line"><a id="l01569" name="l01569"></a><span class="lineno"> 1569</span>        <span class="comment">// Store position of parent hub in vine goal point.</span></div>
<div class="line"><a id="l01570" name="l01570"></a><span class="lineno"> 1570</span>        <a class="code hl_function" href="namespacemattack.html#af2676be6738b2b9622d33c48e7c664c6">vine</a>-&gt;set_goal( z-&gt;<a class="code hl_function" href="classmonster.html#a7acb550c6851c43b6804abf119102571">move_target</a>() );</div>
<div class="line"><a id="l01571" name="l01571"></a><span class="lineno"> 1571</span>    }</div>
<div class="line"><a id="l01572" name="l01572"></a><span class="lineno"> 1572</span> </div>
<div class="line"><a id="l01573" name="l01573"></a><span class="lineno"> 1573</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01574" name="l01574"></a><span class="lineno"> 1574</span>}</div>
<div class="ttc" id="aclassmonster_html_a7acb550c6851c43b6804abf119102571"><div class="ttname"><a href="classmonster.html#a7acb550c6851c43b6804abf119102571">monster::move_target</a></div><div class="ttdeci">tripoint move_target()</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00988">monster.cpp:988</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="damage_8cpp_source.html#l00041">damage_instance::add_damage()</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="monster_8cpp_source.html#l01020">monster::attitude_to()</a>, <a class="el" href="bodypart_8cpp_source.html#l00329">body_part_name_accusative()</a>, <a class="el" href="creature_8cpp_source.html#l01833">Creature::check_dead_state()</a>, <a class="el" href="creature_8cpp_source.html#l00873">Creature::deal_damage()</a>, <a class="el" href="damage_8h_source.html#l00024">DT_BASH</a>, <a class="el" href="damage_8h_source.html#l00025">DT_CUT</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8cpp_source.html#l01614">Creature::get_random_body_part()</a>, <a class="el" href="mtype_8h_source.html#l00240">mtype::id</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="monattack_8cpp.html#a9505b03c793013adc043674d3233f8f4">mon_creeper_hub</a>, <a class="el" href="monattack_8cpp.html#a041e74f49f2eab98904a956d5d5e473a">mon_creeper_vine</a>, <a class="el" href="monster_8cpp_source.html#l00988">monster::move_target()</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="monster_8h_source.html#l00478">monster::type</a>, <a class="el" href="creature_8h_source.html#l00485">Creature::uncanny_dodge()</a>, and <a class="el" href="monattack_8cpp_source.html#l01521">vine()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monattack_8cpp_source.html#l01500">grow_vine()</a>, <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>, <a class="el" href="mondeath_8cpp_source.html#l00296">mdeath::kill_vines()</a>, <a class="el" href="monattack_8cpp_source.html#l01521">vine()</a>, and <a class="el" href="mondeath_8cpp_source.html#l00321">mdeath::vine_cut()</a>.</p>

</div>
</div>
<a id="ab942b8c05023c96b91503934ec592b98" name="ab942b8c05023c96b91503934ec592b98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab942b8c05023c96b91503934ec592b98">&#9670;&nbsp;</a></span>vortex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::vortex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0ff528d847e1c9012c2646531a1423f6" name="a0ff528d847e1c9012c2646531a1423f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ff528d847e1c9012c2646531a1423f6">&#9670;&nbsp;</a></span>zombie_fuse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mattack::zombie_fuse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmonster.html">monster</a> *&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monattack_8cpp_source.html#l05708">5708</a> of file <a class="el" href="monattack_8cpp_source.html">monattack.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05709" name="l05709"></a><span class="lineno"> 5709</span>{</div>
<div class="line"><a id="l05710" name="l05710"></a><span class="lineno"> 5710</span>    <a class="code hl_class" href="classmonster.html">monster</a> *critter = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l05711" name="l05711"></a><span class="lineno"> 5711</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;p : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( z-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>(), 1 ) ) {</div>
<div class="line"><a id="l05712" name="l05712"></a><span class="lineno"> 5712</span>        critter = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at&lt;<a class="code hl_class" href="classmonster.html">monster</a>&gt;( p );</div>
<div class="line"><a id="l05713" name="l05713"></a><span class="lineno"> 5713</span>        <span class="keywordflow">if</span>( critter != <span class="keyword">nullptr</span> &amp;&amp; critter-&gt;<a class="code hl_variable" href="classmonster.html#a8e30fdb59bcecd8ecb8a609431cb6caf">faction</a> == z-&gt;<a class="code hl_variable" href="classmonster.html#a8e30fdb59bcecd8ecb8a609431cb6caf">faction</a></div>
<div class="line"><a id="l05714" name="l05714"></a><span class="lineno"> 5714</span>            &amp;&amp; critter != z &amp;&amp; critter-&gt;<a class="code hl_function" href="classmonster.html#a4c251cc737554fe0bde7f7e4f68b8ef5">get_size</a>() &lt;= z-&gt;<a class="code hl_function" href="classmonster.html#a4c251cc737554fe0bde7f7e4f68b8ef5">get_size</a>() ) {</div>
<div class="line"><a id="l05715" name="l05715"></a><span class="lineno"> 5715</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05716" name="l05716"></a><span class="lineno"> 5716</span>        }</div>
<div class="line"><a id="l05717" name="l05717"></a><span class="lineno"> 5717</span>    }</div>
<div class="line"><a id="l05718" name="l05718"></a><span class="lineno"> 5718</span> </div>
<div class="line"><a id="l05719" name="l05719"></a><span class="lineno"> 5719</span>    <span class="keywordflow">if</span>( critter == <span class="keyword">nullptr</span> || ( z-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a704d4798dee9450b10cc03085c6245ec">effect_grown_of_fuse</a> ) &amp;&amp;</div>
<div class="line"><a id="l05720" name="l05720"></a><span class="lineno"> 5720</span>                                ( z-&gt;<a class="code hl_function" href="classmonster.html#a2d0e466b9d25796cd99402ddd5d3ce20">get_hp</a>() + critter-&gt;<a class="code hl_function" href="classmonster.html#a2d0e466b9d25796cd99402ddd5d3ce20">get_hp</a>() &gt; z-&gt;<a class="code hl_function" href="classmonster.html#a551f4a380282f8ec082c74f410c397de">get_hp_max</a>() + z-&gt;<a class="code hl_function" href="classCreature.html#a89f56544cdbf34297b4c0e62f3350817">get_effect</a>(</div>
<div class="line"><a id="l05721" name="l05721"></a><span class="lineno"> 5721</span>                                      <a class="code hl_variable" href="monattack_8cpp.html#a704d4798dee9450b10cc03085c6245ec">effect_grown_of_fuse</a> ).<a class="code hl_function" href="classeffect.html#a11dfe5a38fa2a63bf309b491f64051e0">get_max_intensity</a>() ) ) ) {</div>
<div class="line"><a id="l05722" name="l05722"></a><span class="lineno"> 5722</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05723" name="l05723"></a><span class="lineno"> 5723</span>    }</div>
<div class="line"><a id="l05724" name="l05724"></a><span class="lineno"> 5724</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( *z ) ) {</div>
<div class="line"><a id="l05725" name="l05725"></a><span class="lineno"> 5725</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s fuses with the %2$s.&quot;</span> ),</div>
<div class="line"><a id="l05726" name="l05726"></a><span class="lineno"> 5726</span>                 critter-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>(),</div>
<div class="line"><a id="l05727" name="l05727"></a><span class="lineno"> 5727</span>                 z-&gt;<a class="code hl_function" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a id="l05728" name="l05728"></a><span class="lineno"> 5728</span>    }</div>
<div class="line"><a id="l05729" name="l05729"></a><span class="lineno"> 5729</span>    z-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 200;</div>
<div class="line"><a id="l05730" name="l05730"></a><span class="lineno"> 5730</span>    z-&gt;<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a704d4798dee9450b10cc03085c6245ec">effect_grown_of_fuse</a>, 10_days, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a>,</div>
<div class="line"><a id="l05731" name="l05731"></a><span class="lineno"> 5731</span>                   critter-&gt;<a class="code hl_function" href="classmonster.html#a551f4a380282f8ec082c74f410c397de">get_hp_max</a>() + z-&gt;<a class="code hl_function" href="classCreature.html#a89f56544cdbf34297b4c0e62f3350817">get_effect</a>( <a class="code hl_variable" href="monattack_8cpp.html#a704d4798dee9450b10cc03085c6245ec">effect_grown_of_fuse</a> ).<a class="code hl_function" href="classeffect.html#a68192c5a91cf7ad4618263ba3de8b802">get_intensity</a>() );</div>
<div class="line"><a id="l05732" name="l05732"></a><span class="lineno"> 5732</span>    z-&gt;<a class="code hl_function" href="classmonster.html#af7763c0da8025aea231a29272f25d5fc">heal</a>( critter-&gt;<a class="code hl_function" href="classmonster.html#a2d0e466b9d25796cd99402ddd5d3ce20">get_hp</a>(), <span class="keyword">true</span> );</div>
<div class="line"><a id="l05733" name="l05733"></a><span class="lineno"> 5733</span>    critter-&gt;<a class="code hl_variable" href="classmonster.html#af8ac8dd571acf81aad0df01924d335c6">death_drops</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05734" name="l05734"></a><span class="lineno"> 5734</span>    critter-&gt;<a class="code hl_function" href="classmonster.html#a82ae41773b05af94d4b678cb33bfb329">die</a>( z );</div>
<div class="line"><a id="l05735" name="l05735"></a><span class="lineno"> 5735</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05736" name="l05736"></a><span class="lineno"> 5736</span>}</div>
<div class="ttc" id="aclasseffect_html_a11dfe5a38fa2a63bf309b491f64051e0"><div class="ttname"><a href="classeffect.html#a11dfe5a38fa2a63bf309b491f64051e0">effect::get_max_intensity</a></div><div class="ttdeci">int get_max_intensity() const</div><div class="ttdoc">Returns the maximum intensity of an effect.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l00853">effect.cpp:853</a></div></div>
<div class="ttc" id="aclasseffect_html_a68192c5a91cf7ad4618263ba3de8b802"><div class="ttname"><a href="classeffect.html#a68192c5a91cf7ad4618263ba3de8b802">effect::get_intensity</a></div><div class="ttdeci">int get_intensity() const</div><div class="ttdoc">Returns the intensity of an effect.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l00849">effect.cpp:849</a></div></div>
<div class="ttc" id="aclassmonster_html_a4c251cc737554fe0bde7f7e4f68b8ef5"><div class="ttname"><a href="classmonster.html#a4c251cc737554fe0bde7f7e4f68b8ef5">monster::get_size</a></div><div class="ttdeci">m_size get_size() const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l02668">monster.cpp:2668</a></div></div>
<div class="ttc" id="aclassmonster_html_af8ac8dd571acf81aad0df01924d335c6"><div class="ttname"><a href="classmonster.html#af8ac8dd571acf81aad0df01924d335c6">monster::death_drops</a></div><div class="ttdeci">bool death_drops</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00484">monster.h:484</a></div></div>
<div class="ttc" id="amonattack_8cpp_html_a704d4798dee9450b10cc03085c6245ec"><div class="ttname"><a href="monattack_8cpp.html#a704d4798dee9450b10cc03085c6245ec">effect_grown_of_fuse</a></div><div class="ttdeci">static const efftype_id effect_grown_of_fuse(&quot;grown_of_fuse&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="monster_8cpp_source.html#l01807">monster::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="monster_8h_source.html#l00484">monster::death_drops</a>, <a class="el" href="monster_8cpp_source.html#l02243">monster::die()</a>, <a class="el" href="monattack_8cpp.html#a704d4798dee9450b10cc03085c6245ec">effect_grown_of_fuse</a>, <a class="el" href="monster_8h_source.html#l00475">monster::faction</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8cpp_source.html#l01213">Creature::get_effect()</a>, <a class="el" href="monster_8cpp_source.html#l02894">monster::get_hp()</a>, <a class="el" href="monster_8cpp_source.html#l02884">monster::get_hp_max()</a>, <a class="el" href="effect_8cpp_source.html#l00849">effect::get_intensity()</a>, <a class="el" href="effect_8cpp_source.html#l00853">effect::get_max_intensity()</a>, <a class="el" href="monster_8cpp_source.html#l02668">monster::get_size()</a>, <a class="el" href="creature_8cpp_source.html#l01173">Creature::has_effect()</a>, <a class="el" href="monster_8cpp_source.html#l01616">monster::heal()</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="monster_8cpp_source.html#l00492">monster::name()</a>, <a class="el" href="bodypart_8h_source.html#l00052">num_bp</a>, and <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monstergenerator_8cpp_source.html#l00520">MonsterGenerator::init_attack()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacemattack.html">mattack</a></li>
    <li class="footer">Generated on Sat Nov 12 2022 15:16:10 for Cataclysm BN by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
