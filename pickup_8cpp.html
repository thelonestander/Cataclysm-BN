<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm BN: src/pickup.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm BN
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('pickup_8cpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">pickup.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="pickup_8h_source.html">pickup.h</a>&quot;</code><br />
<code>#include &lt;algorithm&gt;</code><br />
<code>#include &lt;cstddef&gt;</code><br />
<code>#include &lt;functional&gt;</code><br />
<code>#include &lt;list&gt;</code><br />
<code>#include &lt;map&gt;</code><br />
<code>#include &lt;memory&gt;</code><br />
<code>#include &lt;numeric&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;utility&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
<code>#include &quot;<a class="el" href="activity__actor_8h_source.html">activity_actor.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="activity__actor__definitions_8h_source.html">activity_actor_definitions.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="auto__pickup_8h_source.html">auto_pickup.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="avatar_8h_source.html">avatar.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cata__utility_8h_source.html">cata_utility.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="catacharset_8h_source.html">catacharset.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="character_8h_source.html">character.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="colony_8h_source.html">colony.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="color_8h_source.html">color.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cursesdef_8h_source.html">cursesdef.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="debug_8h_source.html">debug.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="drop__token_8h_source.html">drop_token.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="enums_8h_source.html">enums.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="game_8h_source.html">game.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="input_8h_source.html">input.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="int__id_8h_source.html">int_id.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="item_8h_source.html">item.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="item__contents_8h_source.html">item_contents.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="item__location_8h_source.html">item_location.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="item__search_8h_source.html">item_search.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="item__stack_8h_source.html">item_stack.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="json_8h_source.html">json.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="line_8h_source.html">line.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="map_8h_source.html">map.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="map__selector_8h_source.html">map_selector.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mapdata_8h_source.html">mapdata.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="messages_8h_source.html">messages.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="optional_8h_source.html">optional.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="options_8h_source.html">options.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="output_8h_source.html">output.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="panels_8h_source.html">panels.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pickup__token_8h_source.html">pickup_token.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="player_8h_source.html">player.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="player__activity_8h_source.html">player_activity.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="point_8h_source.html">point.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="popup_8h_source.html">popup.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ret__val_8h_source.html">ret_val.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="string__formatter_8h_source.html">string_formatter.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="string__input__popup_8h_source.html">string_input_popup.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="translations_8h_source.html">translations.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="type__id_8h_source.html">type_id.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ui_8h_source.html">ui.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ui__manager_8h_source.html">ui_manager.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="units_8h_source.html">units.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="units__utility_8h_source.html">units_utility.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="vehicle_8h_source.html">vehicle.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="vehicle__selector_8h_source.html">vehicle_selector.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="vpart__position_8h_source.html">vpart_position.h</a>&quot;</code><br />
</div>
<p><a href="pickup_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpickup__count.html">pickup_count</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpickup_1_1parent__child__check__t.html">pickup::parent_child_check_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpickup_1_1unstacked__items.html">pickup::unstacked_items</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacepickup"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepickup.html">pickup</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a0e89b8759b1d9911fd4632c9739dfd33"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pickup_8cpp.html#a0e89b8759b1d9911fd4632c9739dfd33">item_count</a> = std::pair&lt; <a class="el" href="classitem.html">item</a>, int &gt;</td></tr>
<tr class="separator:a0e89b8759b1d9911fd4632c9739dfd33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cff7c1e58e62a42d75a83536fb3f90e"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pickup_8cpp.html#a8cff7c1e58e62a42d75a83536fb3f90e">pickup_map</a> = std::map&lt; std::string, <a class="el" href="pickup_8cpp.html#a0e89b8759b1d9911fd4632c9739dfd33">item_count</a> &gt;</td></tr>
<tr class="separator:a8cff7c1e58e62a42d75a83536fb3f90e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a777d97e4e0b5f526a83ac7c820cb92e1"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1">pickup_answer</a> : int { <br />
&#160;&#160;<a class="el" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae4842754cb17e5234637e3a85a7f3d90">CANCEL</a> = -1
, <a class="el" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ac318239754caa08c2df1edef8e8994e3">WIELD</a>
, <a class="el" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1aaeae02ecd2eba89310d911936c58646a">WEAR</a>
, <a class="el" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1aca2be1f63d060cd294aba7da969743b1">SPILL</a>
, <br />
&#160;&#160;<a class="el" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1a2f0d18fc0d0fa4a6cd92dc328501874d">EMPTY</a>
, <a class="el" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae3947b7ec73b9b7ef32249ea80aec67f">STASH</a>
, <a class="el" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1a37e5e1ac1cb8d085e53c84e8ed6514e9">NUM_ANSWERS</a>
<br />
 }</td></tr>
<tr class="separator:a777d97e4e0b5f526a83ac7c820cb92e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a984fe168e58131dd17135e0d7e6036a1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pickup_8cpp.html#a984fe168e58131dd17135e0d7e6036a1">show_pickup_message</a> (const <a class="el" href="pickup_8cpp.html#a8cff7c1e58e62a42d75a83536fb3f90e">pickup_map</a> &amp;mapPickup)</td></tr>
<tr class="separator:a984fe168e58131dd17135e0d7e6036a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f73c55c1f3e9f16874f732646e58485"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pickup_8cpp.html#a9f73c55c1f3e9f16874f732646e58485">select_autopickup_items</a> (const std::vector&lt; std::list&lt; <a class="el" href="classitem__stack.html#a711217cbaded7f3f13b4b54f9ef617af">item_stack::iterator</a> &gt; &gt; &amp;here, std::vector&lt; <a class="el" href="structpickup__count.html">pickup_count</a> &gt; &amp;getitem)</td></tr>
<tr class="separator:a9f73c55c1f3e9f16874f732646e58485"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20e8880d7ef528f172f8edd95d943233"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1">pickup_answer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pickup_8cpp.html#a20e8880d7ef528f172f8edd95d943233">handle_problematic_pickup</a> (const <a class="el" href="classitem.html">item</a> &amp;it, bool &amp;offered_swap, bool has_children, const std::string &amp;explain)</td></tr>
<tr class="separator:a20e8880d7ef528f172f8edd95d943233"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63a2d8446a101a6b77a1a2efbfa24391"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pickup_8cpp.html#a63a2d8446a101a6b77a1a2efbfa24391">pick_one_up</a> (<a class="el" href="structpickup_1_1pick__drop__selection.html">pickup::pick_drop_selection</a> &amp;selection, bool &amp;got_water, bool &amp;offered_swap, <a class="el" href="pickup_8cpp.html#a8cff7c1e58e62a42d75a83536fb3f90e">pickup_map</a> &amp;map_pickup, bool autopickup)</td></tr>
<tr class="separator:a63a2d8446a101a6b77a1a2efbfa24391"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a554552d66cb17d2fe8a97734377168"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepickup.html#a4a554552d66cb17d2fe8a97734377168">pickup::do_pickup</a> (std::vector&lt; pick_drop_selection &gt; &amp;targets, bool autopickup)</td></tr>
<tr class="memdesc:a4a554552d66cb17d2fe8a97734377168"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns <code>false</code> if the player was presented a prompt and decided to cancel the pickup.  <a href="namespacepickup.html#a4a554552d66cb17d2fe8a97734377168">More...</a><br /></td></tr>
<tr class="separator:a4a554552d66cb17d2fe8a97734377168"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d474eb4abd948ccfc06e01de9ebab8b"><td class="memItemLeft" align="right" valign="top">static std::vector&lt; <a class="el" href="classcata_1_1optional.html">cata::optional</a>&lt; size_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepickup.html#a5d474eb4abd948ccfc06e01de9ebab8b">pickup::calculate_parents</a> (const std::vector&lt; std::list&lt; <a class="el" href="classitem__stack.html#a711217cbaded7f3f13b4b54f9ef617af">item_stack::iterator</a> &gt; &gt; &amp;stacked_here)</td></tr>
<tr class="separator:a5d474eb4abd948ccfc06e01de9ebab8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab73198da179190bf492b1c179ef4421"><td class="memItemLeft" align="right" valign="top">std::vector&lt; stacked_items &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepickup.html#aab73198da179190bf492b1c179ef4421">pickup::stack_for_pickup_ui</a> (const std::vector&lt; <a class="el" href="classitem__stack.html#a711217cbaded7f3f13b4b54f9ef617af">item_stack::iterator</a> &gt; &amp;unstacked)</td></tr>
<tr class="separator:aab73198da179190bf492b1c179ef4421"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb2d3214070659aea65d01402917f834"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::list&lt; <a class="el" href="classitem__stack.html#a711217cbaded7f3f13b4b54f9ef617af">item_stack::iterator</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepickup.html#aeb2d3214070659aea65d01402917f834">pickup::flatten</a> (const std::vector&lt; stacked_items &gt; &amp;stacked)</td></tr>
<tr class="separator:aeb2d3214070659aea65d01402917f834"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a876f9437271da80f53cc2a748cd6e240"><td class="memItemLeft" align="right" valign="top">std::vector&lt; pick_drop_selection &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepickup.html#a876f9437271da80f53cc2a748cd6e240">pickup::optimize_pickup</a> (const std::vector&lt; <a class="el" href="classitem__location.html">item_location</a> &gt; &amp;targets, const std::vector&lt; int &gt; &amp;quantities)</td></tr>
<tr class="memdesc:a876f9437271da80f53cc2a748cd6e240"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds possible parent-child relations in picked up items to save moves.  <a href="namespacepickup.html#a876f9437271da80f53cc2a748cd6e240">More...</a><br /></td></tr>
<tr class="separator:a876f9437271da80f53cc2a748cd6e240"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a0e89b8759b1d9911fd4632c9739dfd33" name="a0e89b8759b1d9911fd4632c9739dfd33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e89b8759b1d9911fd4632c9739dfd33">&#9670;&nbsp;</a></span>item_count</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="pickup_8cpp.html#a0e89b8759b1d9911fd4632c9739dfd33">item_count</a> =  std::pair&lt;<a class="el" href="classitem.html">item</a>, int&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="pickup_8cpp_source.html#l00063">63</a> of file <a class="el" href="pickup_8cpp_source.html">pickup.cpp</a>.</p>

</div>
</div>
<a id="a8cff7c1e58e62a42d75a83536fb3f90e" name="a8cff7c1e58e62a42d75a83536fb3f90e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cff7c1e58e62a42d75a83536fb3f90e">&#9670;&nbsp;</a></span>pickup_map</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="pickup_8cpp.html#a8cff7c1e58e62a42d75a83536fb3f90e">pickup_map</a> =  std::map&lt;std::string, <a class="el" href="pickup_8cpp.html#a0e89b8759b1d9911fd4632c9739dfd33">item_count</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="pickup_8cpp_source.html#l00064">64</a> of file <a class="el" href="pickup_8cpp_source.html">pickup.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a777d97e4e0b5f526a83ac7c820cb92e1" name="a777d97e4e0b5f526a83ac7c820cb92e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a777d97e4e0b5f526a83ac7c820cb92e1">&#9670;&nbsp;</a></span>pickup_answer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1">pickup_answer</a> : int</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a777d97e4e0b5f526a83ac7c820cb92e1ae4842754cb17e5234637e3a85a7f3d90" name="a777d97e4e0b5f526a83ac7c820cb92e1ae4842754cb17e5234637e3a85a7f3d90"></a>CANCEL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a777d97e4e0b5f526a83ac7c820cb92e1ac318239754caa08c2df1edef8e8994e3" name="a777d97e4e0b5f526a83ac7c820cb92e1ac318239754caa08c2df1edef8e8994e3"></a>WIELD&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a777d97e4e0b5f526a83ac7c820cb92e1aaeae02ecd2eba89310d911936c58646a" name="a777d97e4e0b5f526a83ac7c820cb92e1aaeae02ecd2eba89310d911936c58646a"></a>WEAR&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a777d97e4e0b5f526a83ac7c820cb92e1aca2be1f63d060cd294aba7da969743b1" name="a777d97e4e0b5f526a83ac7c820cb92e1aca2be1f63d060cd294aba7da969743b1"></a>SPILL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a777d97e4e0b5f526a83ac7c820cb92e1a2f0d18fc0d0fa4a6cd92dc328501874d" name="a777d97e4e0b5f526a83ac7c820cb92e1a2f0d18fc0d0fa4a6cd92dc328501874d"></a>EMPTY&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a777d97e4e0b5f526a83ac7c820cb92e1ae3947b7ec73b9b7ef32249ea80aec67f" name="a777d97e4e0b5f526a83ac7c820cb92e1ae3947b7ec73b9b7ef32249ea80aec67f"></a>STASH&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a777d97e4e0b5f526a83ac7c820cb92e1a37e5e1ac1cb8d085e53c84e8ed6514e9" name="a777d97e4e0b5f526a83ac7c820cb92e1a37e5e1ac1cb8d085e53c84e8ed6514e9"></a>NUM_ANSWERS&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="pickup_8cpp_source.html#l00130">130</a> of file <a class="el" href="pickup_8cpp_source.html">pickup.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>                   : <span class="keywordtype">int</span> {</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae4842754cb17e5234637e3a85a7f3d90">CANCEL</a> = -1,</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ac318239754caa08c2df1edef8e8994e3">WIELD</a>,</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1aaeae02ecd2eba89310d911936c58646a">WEAR</a>,</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1aca2be1f63d060cd294aba7da969743b1">SPILL</a>,</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>    <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1a2f0d18fc0d0fa4a6cd92dc328501874d">EMPTY</a>,</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae3947b7ec73b9b7ef32249ea80aec67f">STASH</a>,</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>    <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1a37e5e1ac1cb8d085e53c84e8ed6514e9">NUM_ANSWERS</a></div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>};</div>
<div class="ttc" id="apickup_8cpp_html_a777d97e4e0b5f526a83ac7c820cb92e1a2f0d18fc0d0fa4a6cd92dc328501874d"><div class="ttname"><a href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1a2f0d18fc0d0fa4a6cd92dc328501874d">EMPTY</a></div><div class="ttdeci">@ EMPTY</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00135">pickup.cpp:135</a></div></div>
<div class="ttc" id="apickup_8cpp_html_a777d97e4e0b5f526a83ac7c820cb92e1a37e5e1ac1cb8d085e53c84e8ed6514e9"><div class="ttname"><a href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1a37e5e1ac1cb8d085e53c84e8ed6514e9">NUM_ANSWERS</a></div><div class="ttdeci">@ NUM_ANSWERS</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00138">pickup.cpp:137</a></div></div>
<div class="ttc" id="apickup_8cpp_html_a777d97e4e0b5f526a83ac7c820cb92e1aaeae02ecd2eba89310d911936c58646a"><div class="ttname"><a href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1aaeae02ecd2eba89310d911936c58646a">WEAR</a></div><div class="ttdeci">@ WEAR</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00133">pickup.cpp:133</a></div></div>
<div class="ttc" id="apickup_8cpp_html_a777d97e4e0b5f526a83ac7c820cb92e1ac318239754caa08c2df1edef8e8994e3"><div class="ttname"><a href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ac318239754caa08c2df1edef8e8994e3">WIELD</a></div><div class="ttdeci">@ WIELD</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00132">pickup.cpp:132</a></div></div>
<div class="ttc" id="apickup_8cpp_html_a777d97e4e0b5f526a83ac7c820cb92e1aca2be1f63d060cd294aba7da969743b1"><div class="ttname"><a href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1aca2be1f63d060cd294aba7da969743b1">SPILL</a></div><div class="ttdeci">@ SPILL</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00134">pickup.cpp:134</a></div></div>
<div class="ttc" id="apickup_8cpp_html_a777d97e4e0b5f526a83ac7c820cb92e1ae3947b7ec73b9b7ef32249ea80aec67f"><div class="ttname"><a href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae3947b7ec73b9b7ef32249ea80aec67f">STASH</a></div><div class="ttdeci">@ STASH</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00136">pickup.cpp:136</a></div></div>
<div class="ttc" id="apickup_8cpp_html_a777d97e4e0b5f526a83ac7c820cb92e1ae4842754cb17e5234637e3a85a7f3d90"><div class="ttname"><a href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae4842754cb17e5234637e3a85a7f3d90">CANCEL</a></div><div class="ttdeci">@ CANCEL</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00131">pickup.cpp:131</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a20e8880d7ef528f172f8edd95d943233" name="a20e8880d7ef528f172f8edd95d943233"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20e8880d7ef528f172f8edd95d943233">&#9670;&nbsp;</a></span>handle_problematic_pickup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1">pickup_answer</a> handle_problematic_pickup </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>offered_swap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>has_children</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>explain</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="pickup_8cpp_source.html#l00140">140</a> of file <a class="el" href="pickup_8cpp_source.html">pickup.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>{</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>    <span class="keywordflow">if</span>( offered_swap ) {</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae4842754cb17e5234637e3a85a7f3d90">CANCEL</a>;</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>    }</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span> </div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>    <a class="code hl_class" href="classplayer.html">player</a> &amp;u = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u;</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span> </div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    <a class="code hl_class" href="classuilist.html">uilist</a> amenu;</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span> </div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>    amenu.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = explain;</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span> </div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    offered_swap = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>    <span class="comment">// TODO: Gray out if not enough hands</span></div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    <span class="keywordflow">if</span>( u.<a class="code hl_function" href="classCharacter.html#ad79464264cb8a2061f5888d092f5cd86">is_armed</a>() ) {</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>        amenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ac318239754caa08c2df1edef8e8994e3">WIELD</a>, !u.<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_function" href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">has_flag</a>( <span class="stringliteral">&quot;NO_UNWIELD&quot;</span> ), <span class="charliteral">&#39;w&#39;</span>,</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>                        <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Dispose of %s and wield %s&quot;</span> ), u.<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_function" href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">display_name</a>(),</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>                        it.<a class="code hl_function" href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">display_name</a>() );</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>        amenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ac318239754caa08c2df1edef8e8994e3">WIELD</a>, <span class="keyword">true</span>, <span class="charliteral">&#39;w&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Wield %s&quot;</span> ), it.<a class="code hl_function" href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">display_name</a>() );</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>    }</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>    <span class="keywordflow">if</span>( it.<a class="code hl_function" href="classitem.html#a9aab8660fb40eedb8d2da95e797ecd32">is_armor</a>() ) {</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>        amenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1aaeae02ecd2eba89310d911936c58646a">WEAR</a>, u.<a class="code hl_function" href="classCharacter.html#add7c18c1ff4186fa02862a1fef9cdbe1">can_wear</a>( it ).success(), <span class="charliteral">&#39;W&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Wear %s&quot;</span> ), it.<a class="code hl_function" href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">display_name</a>() );</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>    }</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>    <span class="keywordflow">if</span>( has_children ) {</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>        <span class="comment">// TODO: Fix problematic pickup due to child weight when parent alone is also too heavy</span></div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>        <span class="comment">// Maybe-TODO: A short summary of contained items</span></div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>        amenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1a2f0d18fc0d0fa4a6cd92dc328501874d">EMPTY</a>, u.<a class="code hl_function" href="classCharacter.html#a9194d4ec193c9a26488fb7ccde73437c">can_pick_volume</a>( it ), <span class="charliteral">&#39;e&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Pick up just %s, without contents&quot;</span> ),</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>                        it.<a class="code hl_function" href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">display_name</a>() );</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    }</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>    <span class="keywordflow">if</span>( it.<a class="code hl_function" href="classitem.html#af84e26c1418a4d090bbf55174431b6ac">is_bucket_nonempty</a>() ) {</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>        amenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1aca2be1f63d060cd294aba7da969743b1">SPILL</a>, u.<a class="code hl_function" href="classCharacter.html#a9194d4ec193c9a26488fb7ccde73437c">can_pick_volume</a>( it ), <span class="charliteral">&#39;s&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Spill %s, then pick up %s&quot;</span> ),</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>                        it.<a class="code hl_variable" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code hl_function" href="classitem__contents.html#a14299e40ca1440af11623c86e0b84072">front</a>().<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>(), it.<a class="code hl_function" href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">display_name</a>() );</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    }</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span> </div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    amenu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>    <span class="keywordtype">int</span> choice = amenu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span> </div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>    <span class="keywordflow">if</span>( choice &lt;= CANCEL || choice &gt;= <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1a37e5e1ac1cb8d085e53c84e8ed6514e9">NUM_ANSWERS</a> ) {</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae4842754cb17e5234637e3a85a7f3d90">CANCEL</a>;</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    }</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span> </div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1">pickup_answer</a><span class="keyword">&gt;</span>( choice );</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>}</div>
<div class="ttc" id="aclassCharacter_html_a9194d4ec193c9a26488fb7ccde73437c"><div class="ttname"><a href="classCharacter.html#a9194d4ec193c9a26488fb7ccde73437c">Character::can_pick_volume</a></div><div class="ttdeci">bool can_pick_volume(const item &amp;it) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02868">character.cpp:2868</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad79464264cb8a2061f5888d092f5cd86"><div class="ttname"><a href="classCharacter.html#ad79464264cb8a2061f5888d092f5cd86">Character::is_armed</a></div><div class="ttdeci">bool is_armed() const</div><div class="ttdoc">Returns true if the character is wielding something.</div><div class="ttdef"><b>Definition:</b> <a href="melee_8cpp_source.html#l00145">melee.cpp:145</a></div></div>
<div class="ttc" id="aclassCharacter_html_add7c18c1ff4186fa02862a1fef9cdbe1"><div class="ttname"><a href="classCharacter.html#add7c18c1ff4186fa02862a1fef9cdbe1">Character::can_wear</a></div><div class="ttdeci">ret_val&lt; bool &gt; can_wear(const item &amp;it, bool with_equip_change=false) const</div><div class="ttdoc">Check character capable of wearing an item.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02923">character.cpp:2923</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae68b7a6565646ba662e448bded8b6599"><div class="ttname"><a href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">Character::weapon</a></div><div class="ttdeci">item weapon</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01585">character.h:1585</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a14299e40ca1440af11623c86e0b84072"><div class="ttname"><a href="classitem__contents.html#a14299e40ca1440af11623c86e0b84072">item_contents::front</a></div><div class="ttdeci">item &amp; front()</div><div class="ttdoc">this is an artifact of the previous code using front() everywhere for contents.</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00190">item_contents.cpp:190</a></div></div>
<div class="ttc" id="aclassitem_html_a4afe851abb42cbff0857065860f96e0e"><div class="ttname"><a href="classitem.html#a4afe851abb42cbff0857065860f96e0e">item::contents</a></div><div class="ttdeci">item_contents contents</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02157">item.h:2157</a></div></div>
<div class="ttc" id="aclassitem_html_a7e78e26dcf9b357cda769c3ca2938eda"><div class="ttname"><a href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">item::tname</a></div><div class="ttdeci">std::string tname(unsigned int quantity=1, bool with_prefix=true, unsigned int truncate=0) const</div><div class="ttdoc">Return the (translated) item name.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04440">item.cpp:4440</a></div></div>
<div class="ttc" id="aclassitem_html_a893525fea93fa0a45a51edeb64f1b973"><div class="ttname"><a href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">item::display_name</a></div><div class="ttdeci">std::string display_name(unsigned int quantity=1) const</div><div class="ttdoc">Returns the item name and the charges or contained charges (if the item can have charges at all).</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04706">item.cpp:4706</a></div></div>
<div class="ttc" id="aclassitem_html_a9aab8660fb40eedb8d2da95e797ecd32"><div class="ttname"><a href="classitem.html#a9aab8660fb40eedb8d2da95e797ecd32">item::is_armor</a></div><div class="ttdeci">bool is_armor() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06554">item.cpp:6554</a></div></div>
<div class="ttc" id="aclassitem_html_aaa5aeb6f838927babb10ede535cf2a73"><div class="ttname"><a href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">item::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05192">item.cpp:5192</a></div></div>
<div class="ttc" id="aclassitem_html_af84e26c1418a4d090bbf55174431b6ac"><div class="ttname"><a href="classitem.html#af84e26c1418a4d090bbf55174431b6ac">item::is_bucket_nonempty</a></div><div class="ttdeci">bool is_bucket_nonempty() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06595">item.cpp:6595</a></div></div>
<div class="ttc" id="aclassplayer_html"><div class="ttname"><a href="classplayer.html">player</a></div><div class="ttdef"><b>Definition:</b> <a href="player_8h_source.html#l00098">player.h:99</a></div></div>
<div class="ttc" id="aclassuilist_html"><div class="ttname"><a href="classuilist.html">uilist</a></div><div class="ttdoc">uilist: scrolling vertical list menu</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00186">ui.h:187</a></div></div>
<div class="ttc" id="aclassuilist_html_a0baa34622db6972a59d47d478bfd21d6"><div class="ttname"><a href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">uilist::ret</a></div><div class="ttdeci">int ret</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00412">ui.h:412</a></div></div>
<div class="ttc" id="aclassuilist_html_af59dd3fdde04746dbc5cb52b355577ce"><div class="ttname"><a href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">uilist::text</a></div><div class="ttdeci">std::string text</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00320">ui.h:320</a></div></div>
<div class="ttc" id="aclassuilist_html_af99f28334902af64487e2d0758df2ab9"><div class="ttname"><a href="classuilist.html#af99f28334902af64487e2d0758df2ab9">uilist::addentry</a></div><div class="ttdeci">void addentry(const std::string &amp;str)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l00932">ui.cpp:932</a></div></div>
<div class="ttc" id="agame_8cpp_html_abeb98e93502d73818b4a73fabe191bc1"><div class="ttname"><a href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a></div><div class="ttdeci">std::unique_ptr&lt; game &gt; g</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00267">game.cpp:267</a></div></div>
<div class="ttc" id="agroup__UI_html_ga7604af7545244003f0a52ac87ce37979"><div class="ttname"><a href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">uilist::query</a></div><div class="ttdeci">void query(bool loop=true, int timeout=-1)</div><div class="ttdoc">Handle input and update display.</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l00828">ui.cpp:828</a></div></div>
<div class="ttc" id="apickup_8cpp_html_a777d97e4e0b5f526a83ac7c820cb92e1"><div class="ttname"><a href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1">pickup_answer</a></div><div class="ttdeci">pickup_answer</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00130">pickup.cpp:130</a></div></div>
<div class="ttc" id="atranslations_8h_html_aa829053017e23ef22d44dccecba63a34"><div class="ttname"><a href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a></div><div class="ttdeci">#define _(msg)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00116">translations.h:116</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="ui_8cpp_source.html#l00932">uilist::addentry()</a>, <a class="el" href="character_8cpp_source.html#l02868">Character::can_pick_volume()</a>, <a class="el" href="character_8cpp_source.html#l02923">Character::can_wear()</a>, <a class="el" href="pickup_8cpp_source.html#l00131">CANCEL</a>, <a class="el" href="item_8h_source.html#l02157">item::contents</a>, <a class="el" href="item_8cpp_source.html#l04706">item::display_name()</a>, <a class="el" href="pickup_8cpp_source.html#l00135">EMPTY</a>, <a class="el" href="item__contents_8cpp_source.html#l00190">item_contents::front()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="item_8cpp_source.html#l05192">item::has_flag()</a>, <a class="el" href="melee_8cpp_source.html#l00145">Character::is_armed()</a>, <a class="el" href="item_8cpp_source.html#l06554">item::is_armor()</a>, <a class="el" href="item_8cpp_source.html#l06595">item::is_bucket_nonempty()</a>, <a class="el" href="pickup_8cpp_source.html#l00137">NUM_ANSWERS</a>, <a class="el" href="ui_8cpp_source.html#l00828">uilist::query()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="pickup_8cpp_source.html#l00134">SPILL</a>, <a class="el" href="ui_8h_source.html#l00320">uilist::text</a>, <a class="el" href="item_8cpp_source.html#l04440">item::tname()</a>, <a class="el" href="character_8h_source.html#l01585">Character::weapon</a>, <a class="el" href="pickup_8cpp_source.html#l00133">WEAR</a>, and <a class="el" href="pickup_8cpp_source.html#l00132">WIELD</a>.</p>

<p class="reference">Referenced by <a class="el" href="pickup_8cpp_source.html#l00229">pick_one_up()</a>.</p>

</div>
</div>
<a id="a63a2d8446a101a6b77a1a2efbfa24391" name="a63a2d8446a101a6b77a1a2efbfa24391"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63a2d8446a101a6b77a1a2efbfa24391">&#9670;&nbsp;</a></span>pick_one_up()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool pick_one_up </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpickup_1_1pick__drop__selection.html">pickup::pick_drop_selection</a> &amp;&#160;</td>
          <td class="paramname"><em>selection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>got_water</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>offered_swap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pickup_8cpp.html#a8cff7c1e58e62a42d75a83536fb3f90e">pickup_map</a> &amp;&#160;</td>
          <td class="paramname"><em>map_pickup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>autopickup</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="pickup_8cpp_source.html#l00229">229</a> of file <a class="el" href="pickup_8cpp_source.html">pickup.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>{</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>    <a class="code hl_class" href="classplayer.html">player</a> &amp;u = <a class="code hl_function" href="avatar_8cpp.html#a2eddae690431cd32ce7a091217d68a3a">get_avatar</a>();</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>    <span class="keywordtype">int</span> moves_taken = 100;</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>    <span class="keywordtype">bool</span> picked_up = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>    <a class="code hl_enumeration" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1">pickup_answer</a> option = <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae4842754cb17e5234637e3a85a7f3d90">CANCEL</a>;</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span> </div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>    <a class="code hl_class" href="classitem__location.html">item_location</a> &amp;loc = selection.<a class="code hl_variable" href="structpickup_1_1pick__drop__selection.html#a287d92f0058f459d4f73316ac2ce4be8">target</a>;</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>    <span class="comment">// We already checked in do_pickup if this was a nullptr</span></div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>    <span class="comment">// Make copies so the original remains untouched if we bail out</span></div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>    <a class="code hl_class" href="classitem__location.html">item_location</a> newloc = loc;</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>    <span class="comment">//original item reference</span></div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>    <a class="code hl_class" href="classitem.html">item</a> &amp;it = *newloc.<a class="code hl_function" href="classitem__location.html#a350bb267073f30205f780b394324a32c">get_item</a>();</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>    <span class="comment">//new item (copy)</span></div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>    <a class="code hl_class" href="classitem.html">item</a> newit = it;</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>    <a class="code hl_class" href="classitem.html">item</a> leftovers = newit;</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>    <span class="keyword">const</span> <a class="code hl_class" href="classcata_1_1optional.html">cata::optional&lt;int&gt;</a> &amp;quantity = selection.<a class="code hl_variable" href="structpickup_1_1pick__drop__selection.html#adebce66028cc80bed362b83acfe2bbf2">quantity</a>;</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>    std::vector&lt;item_location&gt; &amp;children = selection.<a class="code hl_variable" href="structpickup_1_1pick__drop__selection.html#a8cd2ac95f738861aca0608573db85637">children</a>;</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span> </div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>    <span class="keywordflow">if</span>( !newit.<a class="code hl_function" href="classitem.html#a0b35b9066ad71987b77727af45d96059">is_owned_by</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>        <span class="comment">// Has the player given input on if stealing is ok?</span></div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>        <span class="keywordflow">if</span>( u.<a class="code hl_function" href="classCreature.html#a2acb6e1e19bcb775748403d07d8dc3f0">get_value</a>( <span class="stringliteral">&quot;THIEF_MODE&quot;</span> ) == <span class="stringliteral">&quot;THIEF_ASK&quot;</span> ) {</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>            <a class="code hl_function" href="namespacepickup.html#abd31c624477e99fff1c2dee074c44531">pickup::query_thief</a>();</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>        }</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>        <span class="keywordflow">if</span>( u.<a class="code hl_function" href="classCreature.html#a2acb6e1e19bcb775748403d07d8dc3f0">get_value</a>( <span class="stringliteral">&quot;THIEF_MODE&quot;</span> ) == <span class="stringliteral">&quot;THIEF_HONEST&quot;</span> ) {</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// Since we are honest, return no problem before picking up</span></div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>        }</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>    }</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>    <span class="keywordflow">if</span>( newit.<a class="code hl_variable" href="classitem.html#af38d78ce6d128f6c7a1999b7f9e00965">invlet</a> != <span class="charliteral">&#39;\0&#39;</span> &amp;&amp;</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>        u.<a class="code hl_function" href="classCharacter.html#a9a5d53916ea06db1f64575e4c91a1653">invlet_to_item</a>( newit.<a class="code hl_variable" href="classitem.html#af38d78ce6d128f6c7a1999b7f9e00965">invlet</a> ) != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>        <span class="comment">// Existing invlet is not re-usable, remove it and let the code in player.cpp/inventory.cpp</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>        <span class="comment">// add a new invlet, otherwise keep the (usable) invlet.</span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>        newit.<a class="code hl_variable" href="classitem.html#af38d78ce6d128f6c7a1999b7f9e00965">invlet</a> = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>    }</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span> </div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>    <span class="comment">// Handle charges, quantity == 0 means move all</span></div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>    <span class="keywordflow">if</span>( quantity &amp;&amp; newit.<a class="code hl_function" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() ) {</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>        leftovers.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = newit.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> - *quantity;</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>        <span class="keywordflow">if</span>( leftovers.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> &gt; 0 ) {</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>            newit.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = *quantity;</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>        }</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>        leftovers.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = 0;</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>    }</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span> </div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>    <span class="keyword">const</span> <span class="keyword">auto</span> wield_check = u.<a class="code hl_function" href="classplayer.html#a0a7027632b8f86717dd34d64d3015dda">can_wield</a>( newit );</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span> </div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>    <span class="keywordtype">bool</span> did_prompt = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>    newit.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = u.<a class="code hl_function" href="classCharacter.html#ae3984315b08c3e42f11694f2572b10b1">i_add_to_container</a>( newit, <span class="keyword">false</span> );</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span> </div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::volume</a> children_volume = std::accumulate( children.begin(), children.end(), 0_ml,</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>    []( <a class="code hl_class" href="classunits_1_1quantity.html">units::volume</a> acc, <span class="keyword">const</span> <a class="code hl_class" href="classitem__location.html">item_location</a> &amp; <a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> ) {</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>        return acc + c-&gt;volume();</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>    } );</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::mass</a> children_weight = std::accumulate( children.begin(), children.end(), 0_gram,</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>    []( <a class="code hl_class" href="classunits_1_1quantity.html">units::mass</a> acc, <span class="keyword">const</span> <a class="code hl_class" href="classitem__location.html">item_location</a> &amp; <a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> ) {</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>        return acc + c-&gt;weight();</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>    } );</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span> </div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    <span class="keywordflow">if</span>( newit.<a class="code hl_function" href="classitem.html#ac3cc4d74d020cbd36ae490cbe88f9152">is_ammo</a>() &amp;&amp; newit.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> == 0 ) {</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>        picked_up = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>        option = <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1a37e5e1ac1cb8d085e53c84e8ed6514e9">NUM_ANSWERS</a>; <span class="comment">//Skip the options part</span></div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( newit.<a class="code hl_function" href="classitem.html#a4326944ae95f4d265c8ca1c76ed89a03">made_of</a>( <a class="code hl_enumvalue" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a> ) ) {</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>        got_water = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !u.<a class="code hl_function" href="classCharacter.html#aef94559a8419824449833a59a1573aaf">can_pick_weight</a>( newit.<a class="code hl_function" href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">weight</a>() + children_weight, <span class="keyword">false</span> ) ) {</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="namespacePATH__INFO.html#a66c14923108f089ee1c7888184bc8f22">autopickup</a> ) {</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>            <span class="keyword">const</span> std::string &amp;explain = <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s is too heavy!&quot;</span> ),</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>                                         newit.<a class="code hl_function" href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">display_name</a>() );</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>            option = <a class="code hl_function" href="pickup_8cpp.html#a20e8880d7ef528f172f8edd95d943233">handle_problematic_pickup</a>( newit, offered_swap, !children.empty(), explain );</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>            did_prompt = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>            option = <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae4842754cb17e5234637e3a85a7f3d90">CANCEL</a>;</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>        }</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( newit.<a class="code hl_function" href="classitem.html#ab3f85f52bf0b1191bfdc2a940d95454e">is_bucket</a>() &amp;&amp; !newit.<a class="code hl_function" href="classitem.html#a5996f63ca1797fc01482678b51a87680">is_container_empty</a>() ) {</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="namespacePATH__INFO.html#a66c14923108f089ee1c7888184bc8f22">autopickup</a> ) {</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>            <span class="keyword">const</span> std::string &amp;explain = <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Can&#39;t stash %s while it&#39;s not empty&quot;</span> ),</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>                                         newit.<a class="code hl_function" href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">display_name</a>() );</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>            option = <a class="code hl_function" href="pickup_8cpp.html#a20e8880d7ef528f172f8edd95d943233">handle_problematic_pickup</a>( newit, offered_swap, !children.empty(), explain );</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>            did_prompt = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>            option = <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae4842754cb17e5234637e3a85a7f3d90">CANCEL</a>;</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>        }</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !u.<a class="code hl_function" href="classCharacter.html#a9194d4ec193c9a26488fb7ccde73437c">can_pick_volume</a>( newit.<a class="code hl_function" href="classitem.html#a51eafbdf8b331d88b741c0c527f98eb9">volume</a>() + children_volume ) ) {</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="namespacePATH__INFO.html#a66c14923108f089ee1c7888184bc8f22">autopickup</a> ) {</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>            <span class="keyword">const</span> std::string &amp;explain = <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Not enough capacity to stash %s&quot;</span> ),</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>                                         newit.<a class="code hl_function" href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">display_name</a>() );</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>            option = <a class="code hl_function" href="pickup_8cpp.html#a20e8880d7ef528f172f8edd95d943233">handle_problematic_pickup</a>( newit, offered_swap, !children.empty(), explain );</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>            did_prompt = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>            option = <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae4842754cb17e5234637e3a85a7f3d90">CANCEL</a>;</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>        }</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>        option = <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae3947b7ec73b9b7ef32249ea80aec67f">STASH</a>;</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>    }</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span> </div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>    <span class="keywordflow">switch</span>( option ) {</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1a37e5e1ac1cb8d085e53c84e8ed6514e9">NUM_ANSWERS</a>:</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>            <span class="comment">// Some other option</span></div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae4842754cb17e5234637e3a85a7f3d90">CANCEL</a>:</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>            picked_up = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1aaeae02ecd2eba89310d911936c58646a">WEAR</a>:</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>            picked_up = !!u.<a class="code hl_function" href="classCharacter.html#a298ce5c5382920e7bffb8f146a18cce1">wear_item</a>( newit );</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ac318239754caa08c2df1edef8e8994e3">WIELD</a>:</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>            <span class="keywordflow">if</span>( wield_check.success() ) {</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>                <span class="comment">//using original item, possibly modifying it</span></div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>                picked_up = u.<a class="code hl_function" href="classCharacter.html#abfefc2e9898fff84f1d6bf007a73a976">wield</a>( it );</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>                <span class="keywordflow">if</span>( picked_up ) {</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>                    u.<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = newit.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>;</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>                }</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>                <span class="keywordflow">if</span>( u.<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_variable" href="classitem.html#af38d78ce6d128f6c7a1999b7f9e00965">invlet</a> ) {</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Wielding %c - %s&quot;</span> ), u.<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_variable" href="classitem.html#af38d78ce6d128f6c7a1999b7f9e00965">invlet</a>,</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>                             u.<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_function" href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">display_name</a>() );</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Wielding - %s&quot;</span> ), u.<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_function" href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">display_name</a>() );</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>                }</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <span class="stringliteral">&quot;%s&quot;</span>, wield_check.c_str() );</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>            }</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1aca2be1f63d060cd294aba7da969743b1">SPILL</a>:</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>            <span class="keywordflow">if</span>( newit.<a class="code hl_function" href="classitem.html#a5996f63ca1797fc01482678b51a87680">is_container_empty</a>() ) {</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>                <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to spill contents from an empty container&quot;</span> );</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>            }</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>            <span class="comment">//using original item, possibly modifying it</span></div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>            picked_up = it.<a class="code hl_function" href="classitem.html#a2ea9b8df7dba40fc847f51563285f5aa">spill_contents</a>( u );</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>            <span class="keywordflow">if</span>( !picked_up ) {</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>            }</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>        <span class="comment">// Intentional fallthrough</span></div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1a2f0d18fc0d0fa4a6cd92dc328501874d">EMPTY</a>:</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>        <span class="comment">// Handled later</span></div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae3947b7ec73b9b7ef32249ea80aec67f">STASH</a>:</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>            <span class="keyword">auto</span> &amp;entry = map_pickup[newit.<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>()];</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>            entry.second += newit.<a class="code hl_function" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>();</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>            entry.first = u.<a class="code hl_function" href="classCharacter.html#a611bd51d6d4fa9c119787f2fbc6bdd52">i_add</a>( newit );</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>            picked_up = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>    }</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span> </div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>    <span class="keywordflow">if</span>( picked_up ) {</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>        <span class="comment">// Children have to be picked up first, since removing parent would re-index the stack</span></div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>        <span class="keywordflow">if</span>( option != <a class="code hl_enumvalue" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1a2f0d18fc0d0fa4a6cd92dc328501874d">EMPTY</a> ) {</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>            <span class="keywordflow">for</span>( <a class="code hl_class" href="classitem__location.html">item_location</a> &amp;child_loc : children ) {</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>                <a class="code hl_class" href="classitem.html">item</a> &amp;added = u.<a class="code hl_function" href="classCharacter.html#a611bd51d6d4fa9c119787f2fbc6bdd52">i_add</a>( *child_loc );</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>                <span class="keyword">auto</span> &amp;pickup_entry = map_pickup[added.<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>()];</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>                pickup_entry.first = added;</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>                pickup_entry.second += added.<a class="code hl_function" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>();</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span> </div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>                child_loc.remove_item();</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>            }</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>        }</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span> </div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>        <span class="comment">// If we picked up a whole stack, remove the original item</span></div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>        <span class="comment">// Otherwise, replace the item with the leftovers</span></div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>        <span class="keywordflow">if</span>( leftovers.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> &gt; 0 ) {</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>            *loc.<a class="code hl_function" href="classitem__location.html#a350bb267073f30205f780b394324a32c">get_item</a>() = <a class="code hl_function" href="namespaceavatar__action.html#a76ba74774376a08222b8cdcce08f7304">std::move</a>( leftovers );</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>            loc.<a class="code hl_function" href="classitem__location.html#a41e90133672d99aa1cecde670e37c23c">remove_item</a>();</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>        }</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span> </div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>        u.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= moves_taken;</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>    }</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span> </div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>    <span class="keywordflow">return</span> picked_up || !did_prompt;</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>}</div>
<div class="ttc" id="aavatar_8cpp_html_a2eddae690431cd32ce7a091217d68a3a"><div class="ttname"><a href="avatar_8cpp.html#a2eddae690431cd32ce7a091217d68a3a">get_avatar</a></div><div class="ttdeci">avatar &amp; get_avatar()</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00100">avatar.cpp:100</a></div></div>
<div class="ttc" id="aclassCharacter_html_a298ce5c5382920e7bffb8f146a18cce1"><div class="ttname"><a href="classCharacter.html#a298ce5c5382920e7bffb8f146a18cce1">Character::wear_item</a></div><div class="ttdeci">cata::optional&lt; std::list&lt; item &gt;::iterator &gt; wear_item(const item &amp;to_wear, bool interactive=true)</div><div class="ttdoc">Wear item; returns nullopt on fail, or pointer to newly worn item on success.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02170">character.cpp:2170</a></div></div>
<div class="ttc" id="aclassCharacter_html_a611bd51d6d4fa9c119787f2fbc6bdd52"><div class="ttname"><a href="classCharacter.html#a611bd51d6d4fa9c119787f2fbc6bdd52">Character::i_add</a></div><div class="ttdeci">item &amp; i_add(item it, bool should_stack=true)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02310">character.cpp:2310</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9a5d53916ea06db1f64575e4c91a1653"><div class="ttname"><a href="classCharacter.html#a9a5d53916ea06db1f64575e4c91a1653">Character::invlet_to_item</a></div><div class="ttdeci">item * invlet_to_item(int invlet)</div><div class="ttdoc">Return the item pointer of the item with given invlet, return nullptr if the player does not have suc...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02350">character.cpp:2350</a></div></div>
<div class="ttc" id="aclassCharacter_html_abfefc2e9898fff84f1d6bf007a73a976"><div class="ttname"><a href="classCharacter.html#abfefc2e9898fff84f1d6bf007a73a976">Character::wield</a></div><div class="ttdeci">virtual bool wield(item &amp;target)=0</div><div class="ttdoc">Removes currently wielded item (if any) and replaces it with the target item.</div></div>
<div class="ttc" id="aclassCharacter_html_ae3984315b08c3e42f11694f2572b10b1"><div class="ttname"><a href="classCharacter.html#ae3984315b08c3e42f11694f2572b10b1">Character::i_add_to_container</a></div><div class="ttdeci">int i_add_to_container(const item &amp;it, bool unloading)</div><div class="ttdoc">Try to find a container/s on character containing ammo of type it.typeId() and add charges until the ...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02274">character.cpp:2274</a></div></div>
<div class="ttc" id="aclassCharacter_html_aef94559a8419824449833a59a1573aaf"><div class="ttname"><a href="classCharacter.html#aef94559a8419824449833a59a1573aaf">Character::can_pick_weight</a></div><div class="ttdeci">bool can_pick_weight(const item &amp;it, bool safe=true) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02882">character.cpp:2882</a></div></div>
<div class="ttc" id="aclassCreature_html_a2acb6e1e19bcb775748403d07d8dc3f0"><div class="ttname"><a href="classCreature.html#a2acb6e1e19bcb775748403d07d8dc3f0">Creature::get_value</a></div><div class="ttdeci">std::string get_value(const std::string &amp;key) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01335">creature.cpp:1335</a></div></div>
<div class="ttc" id="aclassCreature_html_a8c5a392caa213bee9581b47e9f0e2052"><div class="ttname"><a href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">Creature::moves</a></div><div class="ttdeci">int moves</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00569">creature.h:569</a></div></div>
<div class="ttc" id="aclasscata_1_1optional_html"><div class="ttname"><a href="classcata_1_1optional.html">cata::optional</a></div><div class="ttdef"><b>Definition:</b> <a href="optional_8h_source.html#l00030">optional.h:31</a></div></div>
<div class="ttc" id="aclassitem__location_html"><div class="ttname"><a href="classitem__location.html">item_location</a></div><div class="ttdoc">A lightweight handle to an item independent of it's location Unlike a raw pointer can be (de-)seriali...</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8h_source.html#l00022">item_location.h:23</a></div></div>
<div class="ttc" id="aclassitem__location_html_a350bb267073f30205f780b394324a32c"><div class="ttname"><a href="classitem__location.html#a350bb267073f30205f780b394324a32c">item_location::get_item</a></div><div class="ttdeci">item * get_item()</div><div class="ttdoc">Gets the selected item or nullptr.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l00768">item_location.cpp:768</a></div></div>
<div class="ttc" id="aclassitem__location_html_a41e90133672d99aa1cecde670e37c23c"><div class="ttname"><a href="classitem__location.html#a41e90133672d99aa1cecde670e37c23c">item_location::remove_item</a></div><div class="ttdeci">void remove_item()</div><div class="ttdoc">Removes the selected item from the game.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l00758">item_location.cpp:758</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00175">item.h:176</a></div></div>
<div class="ttc" id="aclassitem_html_a016494fa25a7a403fe78fadbd90b267b"><div class="ttname"><a href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">item::count</a></div><div class="ttdeci">int count() const</div><div class="ttdoc">If count_by_charges(), returns charges, otherwise 1.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05860">item.cpp:5860</a></div></div>
<div class="ttc" id="aclassitem_html_a0b35b9066ad71987b77727af45d96059"><div class="ttname"><a href="classitem.html#a0b35b9066ad71987b77727af45d96059">item::is_owned_by</a></div><div class="ttdeci">bool is_owned_by(const Character &amp;c, bool available_to_take=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01239">item.cpp:1239</a></div></div>
<div class="ttc" id="aclassitem_html_a2ea9b8df7dba40fc847f51563285f5aa"><div class="ttname"><a href="classitem.html#a2ea9b8df7dba40fc847f51563285f5aa">item::spill_contents</a></div><div class="ttdeci">bool spill_contents(Character &amp;c)</div><div class="ttdoc">Unloads the item's contents.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06898">item.cpp:6898</a></div></div>
<div class="ttc" id="aclassitem_html_a3157f01f1da6fe89bdbc87db2605afb9"><div class="ttname"><a href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">item::weight</a></div><div class="ttdeci">units::mass weight(bool include_contents=true, bool integral=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04844">item.cpp:4844</a></div></div>
<div class="ttc" id="aclassitem_html_a40963a016376016eb408bdb9dbb94388"><div class="ttname"><a href="classitem.html#a40963a016376016eb408bdb9dbb94388">item::count_by_charges</a></div><div class="ttdeci">bool count_by_charges() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05855">item.cpp:5855</a></div></div>
<div class="ttc" id="aclassitem_html_a4326944ae95f4d265c8ca1c76ed89a03"><div class="ttname"><a href="classitem.html#a4326944ae95f4d265c8ca1c76ed89a03">item::made_of</a></div><div class="ttdeci">const std::vector&lt; material_id &gt; &amp; made_of() const</div><div class="ttdoc">The ids of all the materials this is made of.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06263">item.cpp:6263</a></div></div>
<div class="ttc" id="aclassitem_html_a51eafbdf8b331d88b741c0c527f98eb9"><div class="ttname"><a href="classitem.html#a51eafbdf8b331d88b741c0c527f98eb9">item::volume</a></div><div class="ttdeci">units::volume volume(bool integral=false) const</div><div class="ttdoc">Total volume of an item accounting for all contained/integrated items NOTE: Result is rounded up to n...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04991">item.cpp:4991</a></div></div>
<div class="ttc" id="aclassitem_html_a5996f63ca1797fc01482678b51a87680"><div class="ttname"><a href="classitem.html#a5996f63ca1797fc01482678b51a87680">item::is_container_empty</a></div><div class="ttdeci">bool is_container_empty() const</div><div class="ttdoc">Whether this item has no contents at all.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06687">item.cpp:6687</a></div></div>
<div class="ttc" id="aclassitem_html_a6bfb92ab5d41e0eb3a1da160fac71b0e"><div class="ttname"><a href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">item::charges</a></div><div class="ttdeci">int charges</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02195">item.h:2195</a></div></div>
<div class="ttc" id="aclassitem_html_ab3f85f52bf0b1191bfdc2a940d95454e"><div class="ttname"><a href="classitem.html#ab3f85f52bf0b1191bfdc2a940d95454e">item::is_bucket</a></div><div class="ttdeci">bool is_bucket() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06584">item.cpp:6584</a></div></div>
<div class="ttc" id="aclassitem_html_ac3cc4d74d020cbd36ae490cbe88f9152"><div class="ttname"><a href="classitem.html#ac3cc4d74d020cbd36ae490cbe88f9152">item::is_ammo</a></div><div class="ttdeci">bool is_ammo() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06432">item.cpp:6432</a></div></div>
<div class="ttc" id="aclassitem_html_af38d78ce6d128f6c7a1999b7f9e00965"><div class="ttname"><a href="classitem.html#af38d78ce6d128f6c7a1999b7f9e00965">item::invlet</a></div><div class="ttdeci">char invlet</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02232">item.h:2232</a></div></div>
<div class="ttc" id="aclassplayer_html_a0a7027632b8f86717dd34d64d3015dda"><div class="ttname"><a href="classplayer.html#a0a7027632b8f86717dd34d64d3015dda">player::can_wield</a></div><div class="ttdeci">ret_val&lt; bool &gt; can_wield(const item &amp;it) const</div><div class="ttdoc">Check player capable of wielding an item.</div><div class="ttdef"><b>Definition:</b> <a href="player_8cpp_source.html#l02491">player.cpp:2491</a></div></div>
<div class="ttc" id="aclassunits_1_1quantity_html"><div class="ttname"><a href="classunits_1_1quantity.html">units::quantity</a></div><div class="ttdef"><b>Definition:</b> <a href="units__def_8h_source.html#l00014">units_def.h:15</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level DL::Error and class DC::DebugMsg, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00074">debug.h:74</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a></div><div class="ttdeci">@ m_neutral</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00260">enums.h:260</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a></div><div class="ttdeci">@ m_info</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00258">enums.h:258</a></div></div>
<div class="ttc" id="aenums_8h_html_ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce"><div class="ttname"><a href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a></div><div class="ttdeci">@ LIQUID</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00175">enums.h:175</a></div></div>
<div class="ttc" id="amagic_8cpp_html_a6753ecfe87da659675b18c2f81d6ec12"><div class="ttname"><a href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a></div><div class="ttdeci">constexpr double c</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01031">magic.cpp:1031</a></div></div>
<div class="ttc" id="amessages_8cpp_html_a54489326fc37823819c5105addfa27f2"><div class="ttname"><a href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a></div><div class="ttdeci">void add_msg(std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l00884">messages.cpp:884</a></div></div>
<div class="ttc" id="anamespacePATH__INFO_html_a66c14923108f089ee1c7888184bc8f22"><div class="ttname"><a href="namespacePATH__INFO.html#a66c14923108f089ee1c7888184bc8f22">PATH_INFO::autopickup</a></div><div class="ttdeci">std::string autopickup()</div><div class="ttdef"><b>Definition:</b> <a href="path__info_8cpp_source.html#l00134">path_info.cpp:134</a></div></div>
<div class="ttc" id="anamespaceavatar__action_html_a76ba74774376a08222b8cdcce08f7304"><div class="ttname"><a href="namespaceavatar__action.html#a76ba74774376a08222b8cdcce08f7304">avatar_action::move</a></div><div class="ttdeci">bool move(avatar &amp;you, map &amp;m, const tripoint &amp;d)</div><div class="ttdef"><b>Definition:</b> <a href="avatar__action_8cpp_source.html#l00090">avatar_action.cpp:90</a></div></div>
<div class="ttc" id="anamespacepickup_html_abd31c624477e99fff1c2dee074c44531"><div class="ttname"><a href="namespacepickup.html#abd31c624477e99fff1c2dee074c44531">pickup::query_thief</a></div><div class="ttdeci">bool query_thief()</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00186">pickup.cpp:186</a></div></div>
<div class="ttc" id="apickup_8cpp_html_a20e8880d7ef528f172f8edd95d943233"><div class="ttname"><a href="pickup_8cpp.html#a20e8880d7ef528f172f8edd95d943233">handle_problematic_pickup</a></div><div class="ttdeci">static pickup_answer handle_problematic_pickup(const item &amp;it, bool &amp;offered_swap, bool has_children, const std::string &amp;explain)</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00140">pickup.cpp:140</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a9b089d0b697443b096063219dab08ef5"><div class="ttname"><a href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a></div><div class="ttdeci">std::string string_format(std::string format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00418">string_formatter.h:418</a></div></div>
<div class="ttc" id="astructpickup_1_1pick__drop__selection_html_a287d92f0058f459d4f73316ac2ce4be8"><div class="ttname"><a href="structpickup_1_1pick__drop__selection.html#a287d92f0058f459d4f73316ac2ce4be8">pickup::pick_drop_selection::target</a></div><div class="ttdeci">item_location target</div><div class="ttdef"><b>Definition:</b> <a href="pickup__token_8h_source.html#l00038">pickup_token.h:38</a></div></div>
<div class="ttc" id="astructpickup_1_1pick__drop__selection_html_a8cd2ac95f738861aca0608573db85637"><div class="ttname"><a href="structpickup_1_1pick__drop__selection.html#a8cd2ac95f738861aca0608573db85637">pickup::pick_drop_selection::children</a></div><div class="ttdeci">std::vector&lt; item_location &gt; children</div><div class="ttdef"><b>Definition:</b> <a href="pickup__token_8h_source.html#l00040">pickup_token.h:40</a></div></div>
<div class="ttc" id="astructpickup_1_1pick__drop__selection_html_adebce66028cc80bed362b83acfe2bbf2"><div class="ttname"><a href="structpickup_1_1pick__drop__selection.html#adebce66028cc80bed362b83acfe2bbf2">pickup::pick_drop_selection::quantity</a></div><div class="ttdeci">cata::optional&lt; int &gt; quantity</div><div class="ttdef"><b>Definition:</b> <a href="pickup__token_8h_source.html#l00039">pickup_token.h:39</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="path__info_8cpp_source.html#l00134">PATH_INFO::autopickup()</a>, <a class="el" href="magic_8cpp_source.html#l01031">c</a>, <a class="el" href="character_8cpp_source.html#l02868">Character::can_pick_volume()</a>, <a class="el" href="character_8cpp_source.html#l02882">Character::can_pick_weight()</a>, <a class="el" href="player_8cpp_source.html#l02491">player::can_wield()</a>, <a class="el" href="pickup_8cpp_source.html#l00131">CANCEL</a>, <a class="el" href="item_8h_source.html#l02195">item::charges</a>, <a class="el" href="pickup__token_8h_source.html#l00040">pickup::pick_drop_selection::children</a>, <a class="el" href="item_8cpp_source.html#l05860">item::count()</a>, <a class="el" href="item_8cpp_source.html#l05855">item::count_by_charges()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="item_8cpp_source.html#l04706">item::display_name()</a>, <a class="el" href="pickup_8cpp_source.html#l00135">EMPTY</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="avatar_8cpp_source.html#l00100">get_avatar()</a>, <a class="el" href="item__location_8cpp_source.html#l00768">item_location::get_item()</a>, <a class="el" href="creature_8cpp_source.html#l01335">Creature::get_value()</a>, <a class="el" href="pickup_8cpp_source.html#l00140">handle_problematic_pickup()</a>, <a class="el" href="character_8cpp_source.html#l02310">Character::i_add()</a>, <a class="el" href="character_8cpp_source.html#l02274">Character::i_add_to_container()</a>, <a class="el" href="item_8h_source.html#l02232">item::invlet</a>, <a class="el" href="character_8cpp_source.html#l02350">Character::invlet_to_item()</a>, <a class="el" href="item_8cpp_source.html#l06432">item::is_ammo()</a>, <a class="el" href="item_8cpp_source.html#l06584">item::is_bucket()</a>, <a class="el" href="item_8cpp_source.html#l06687">item::is_container_empty()</a>, <a class="el" href="item_8cpp_source.html#l01239">item::is_owned_by()</a>, <a class="el" href="enums_8h_source.html#l00175">LIQUID</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="enums_8h_source.html#l00260">m_neutral</a>, <a class="el" href="item_8cpp_source.html#l06263">item::made_of()</a>, <a class="el" href="avatar__action_8cpp_source.html#l00090">avatar_action::move()</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="pickup_8cpp_source.html#l00137">NUM_ANSWERS</a>, <a class="el" href="pickup__token_8h_source.html#l00039">pickup::pick_drop_selection::quantity</a>, <a class="el" href="pickup_8cpp_source.html#l00186">pickup::query_thief()</a>, <a class="el" href="item__location_8cpp_source.html#l00758">item_location::remove_item()</a>, <a class="el" href="pickup_8cpp_source.html#l00134">SPILL</a>, <a class="el" href="item_8cpp_source.html#l06898">item::spill_contents()</a>, <a class="el" href="pickup_8cpp_source.html#l00136">STASH</a>, <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>, <a class="el" href="pickup__token_8h_source.html#l00038">pickup::pick_drop_selection::target</a>, <a class="el" href="item_8cpp_source.html#l04440">item::tname()</a>, <a class="el" href="item_8cpp_source.html#l04991">item::volume()</a>, <a class="el" href="character_8h_source.html#l01585">Character::weapon</a>, <a class="el" href="pickup_8cpp_source.html#l00133">WEAR</a>, <a class="el" href="character_8cpp_source.html#l02170">Character::wear_item()</a>, <a class="el" href="item_8cpp_source.html#l04844">item::weight()</a>, <a class="el" href="classCharacter.html#abfefc2e9898fff84f1d6bf007a73a976">Character::wield()</a>, and <a class="el" href="pickup_8cpp_source.html#l00132">WIELD</a>.</p>

<p class="reference">Referenced by <a class="el" href="pickup_8cpp_source.html#l00404">pickup::do_pickup()</a>.</p>

</div>
</div>
<a id="a9f73c55c1f3e9f16874f732646e58485" name="a9f73c55c1f3e9f16874f732646e58485"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f73c55c1f3e9f16874f732646e58485">&#9670;&nbsp;</a></span>select_autopickup_items()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool select_autopickup_items </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; std::list&lt; <a class="el" href="classitem__stack.html#a711217cbaded7f3f13b4b54f9ef617af">item_stack::iterator</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>here</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="structpickup__count.html">pickup_count</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>getitem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="pickup_8cpp_source.html#l00077">77</a> of file <a class="el" href="pickup_8cpp_source.html">pickup.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>{</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>    <span class="keywordtype">bool</span> found_something = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span> </div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>    <span class="comment">//Loop through Items lowest Volume first</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="namespacepickup.html#a4a554552d66cb17d2fe8a97734377168">do_pickup</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span> </div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> rounded_volume = 0, num_checked = 0; num_checked &lt; here.size(); rounded_volume++ ) {</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>        <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0; i &lt; here.size(); i++ ) {</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>            <a class="code hl_function" href="namespacepickup.html#a4a554552d66cb17d2fe8a97734377168">do_pickup</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>            <a class="code hl_class" href="classcata_1_1colony_1_1colony__iterator.html">item_stack::const_iterator</a> begin_iterator = here[i].front();</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>            <span class="keywordflow">if</span>( begin_iterator-&gt;volume() / <a class="code hl_variable" href="namespaceunits.html#a58e7d31fbaa28a1dd45fb598f8d1fba9">units::legacy_volume_factor</a> == <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( rounded_volume ) ) {</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>                num_checked++;</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>                <span class="keyword">const</span> std::string item_name = begin_iterator-&gt;tname( 1, <span class="keyword">false</span> );</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span> </div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>                <span class="comment">//Check the Pickup Rules</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="auto__pickup_8cpp.html#a97eff598e0c42f1241a8a587007e64ff">get_auto_pickup</a>().check_item( item_name ) == <a class="code hl_enumvalue" href="enums_8h.html#ad05def87273524522ee10384f0cf103caa5a69c112de6ea3b835c5bc2067f7f91">RULE_WHITELISTED</a> ) {</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>                    <a class="code hl_function" href="namespacepickup.html#a4a554552d66cb17d2fe8a97734377168">do_pickup</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="auto__pickup_8cpp.html#a97eff598e0c42f1241a8a587007e64ff">get_auto_pickup</a>().check_item( item_name ) != <a class="code hl_enumvalue" href="enums_8h.html#ad05def87273524522ee10384f0cf103ca05702fa9c14599b62f74dcd5b889a256">RULE_BLACKLISTED</a> ) {</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>                    <span class="comment">//No prematched pickup rule found</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>                    <span class="comment">//check rules in more detail</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>                    <a class="code hl_function" href="auto__pickup_8cpp.html#a97eff598e0c42f1241a8a587007e64ff">get_auto_pickup</a>().<a class="code hl_function" href="classauto__pickup_1_1player__settings.html#af8106055a57ec4d891e720f8e3f67656">create_rule</a>( &amp;*begin_iterator );</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span> </div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>                    <span class="keywordflow">if</span>( <a class="code hl_function" href="auto__pickup_8cpp.html#a97eff598e0c42f1241a8a587007e64ff">get_auto_pickup</a>().check_item( item_name ) == <a class="code hl_enumvalue" href="enums_8h.html#ad05def87273524522ee10384f0cf103caa5a69c112de6ea3b835c5bc2067f7f91">RULE_WHITELISTED</a> ) {</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>                        <a class="code hl_function" href="namespacepickup.html#a4a554552d66cb17d2fe8a97734377168">do_pickup</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>                    }</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>                }</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span> </div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>                <span class="comment">//Auto Pickup all items with Volume &lt;= AUTO_PICKUP_VOL_LIMIT * 50 and Weight &lt;= AUTO_PICKUP_ZERO * 50</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>                <span class="comment">//items will either be in the autopickup list (&quot;true&quot;) or unmatched (&quot;&quot;)</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>                <span class="keywordflow">if</span>( !<a class="code hl_function" href="namespacepickup.html#a4a554552d66cb17d2fe8a97734377168">do_pickup</a> ) {</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>                    <span class="keywordtype">int</span> weight_limit = get_option&lt;int&gt;( <span class="stringliteral">&quot;AUTO_PICKUP_WEIGHT_LIMIT&quot;</span> );</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>                    <span class="keywordtype">int</span> volume_limit = get_option&lt;int&gt;( <span class="stringliteral">&quot;AUTO_PICKUP_VOL_LIMIT&quot;</span> );</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>                    <span class="keywordflow">if</span>( weight_limit &amp;&amp; volume_limit ) {</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>                        <span class="keywordflow">if</span>( begin_iterator-&gt;volume() &lt;= <a class="code hl_function" href="namespaceunits.html#ae88f75884a4675d88f416f8fc6510558">units::from_milliliter</a>( volume_limit * 50 ) &amp;&amp;</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>                            begin_iterator-&gt;weight() &lt;= weight_limit * 50_gram &amp;&amp;</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>                            <a class="code hl_function" href="auto__pickup_8cpp.html#a97eff598e0c42f1241a8a587007e64ff">get_auto_pickup</a>().check_item( item_name ) != <a class="code hl_enumvalue" href="enums_8h.html#ad05def87273524522ee10384f0cf103ca05702fa9c14599b62f74dcd5b889a256">RULE_BLACKLISTED</a> ) {</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>                            <a class="code hl_function" href="namespacepickup.html#a4a554552d66cb17d2fe8a97734377168">do_pickup</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>                        }</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>                    }</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>                }</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>            }</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span> </div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacepickup.html#a4a554552d66cb17d2fe8a97734377168">do_pickup</a> ) {</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>                getitem[i].pick = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>                found_something = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>            }</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>        }</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    }</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    <span class="keywordflow">return</span> found_something;</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>}</div>
<div class="ttc" id="aauto__pickup_8cpp_html_a97eff598e0c42f1241a8a587007e64ff"><div class="ttname"><a href="auto__pickup_8cpp.html#a97eff598e0c42f1241a8a587007e64ff">get_auto_pickup</a></div><div class="ttdeci">auto_pickup::player_settings &amp; get_auto_pickup()</div><div class="ttdef"><b>Definition:</b> <a href="auto__pickup_8cpp_source.html#l00038">auto_pickup.cpp:38</a></div></div>
<div class="ttc" id="aclassauto__pickup_1_1player__settings_html_af8106055a57ec4d891e720f8e3f67656"><div class="ttname"><a href="classauto__pickup_1_1player__settings.html#af8106055a57ec4d891e720f8e3f67656">auto_pickup::player_settings::create_rule</a></div><div class="ttdeci">void create_rule(const item *it)</div><div class="ttdef"><b>Definition:</b> <a href="auto__pickup_8cpp_source.html#l00619">auto_pickup.cpp:619</a></div></div>
<div class="ttc" id="aclasscata_1_1colony_1_1colony__iterator_html"><div class="ttname"><a href="classcata_1_1colony_1_1colony__iterator.html">cata::colony::colony_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="colony_8h_source.html#l00196">colony.h:197</a></div></div>
<div class="ttc" id="aenums_8h_html_ad05def87273524522ee10384f0cf103ca05702fa9c14599b62f74dcd5b889a256"><div class="ttname"><a href="enums_8h.html#ad05def87273524522ee10384f0cf103ca05702fa9c14599b62f74dcd5b889a256">RULE_BLACKLISTED</a></div><div class="ttdeci">@ RULE_BLACKLISTED</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00055">enums.h:54</a></div></div>
<div class="ttc" id="aenums_8h_html_ad05def87273524522ee10384f0cf103caa5a69c112de6ea3b835c5bc2067f7f91"><div class="ttname"><a href="enums_8h.html#ad05def87273524522ee10384f0cf103caa5a69c112de6ea3b835c5bc2067f7f91">RULE_WHITELISTED</a></div><div class="ttdeci">@ RULE_WHITELISTED</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00053">enums.h:53</a></div></div>
<div class="ttc" id="anamespacepickup_html_a4a554552d66cb17d2fe8a97734377168"><div class="ttname"><a href="namespacepickup.html#a4a554552d66cb17d2fe8a97734377168">pickup::do_pickup</a></div><div class="ttdeci">bool do_pickup(std::vector&lt; pick_drop_selection &gt; &amp;targets, bool autopickup)</div><div class="ttdoc">Returns false if the player was presented a prompt and decided to cancel the pickup.</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00404">pickup.cpp:404</a></div></div>
<div class="ttc" id="anamespaceunits_html_a58e7d31fbaa28a1dd45fb598f8d1fba9"><div class="ttname"><a href="namespaceunits.html#a58e7d31fbaa28a1dd45fb598f8d1fba9">units::legacy_volume_factor</a></div><div class="ttdeci">static constexpr volume legacy_volume_factor</div><div class="ttdef"><b>Definition:</b> <a href="units__volume_8h_source.html#l00050">units_volume.h:50</a></div></div>
<div class="ttc" id="anamespaceunits_html_ae88f75884a4675d88f416f8fc6510558"><div class="ttname"><a href="namespaceunits.html#ae88f75884a4675d88f416f8fc6510558">units::from_milliliter</a></div><div class="ttdeci">constexpr quantity&lt; value_type, volume_in_milliliter_tag &gt; from_milliliter(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units__volume_8h_source.html#l00025">units_volume.h:25</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="auto__pickup_8cpp_source.html#l00619">auto_pickup::player_settings::create_rule()</a>, <a class="el" href="pickup_8cpp_source.html#l00404">pickup::do_pickup()</a>, <a class="el" href="units__volume_8h_source.html#l00025">units::from_milliliter()</a>, <a class="el" href="auto__pickup_8cpp_source.html#l00038">get_auto_pickup()</a>, <a class="el" href="units__volume_8h_source.html#l00050">units::legacy_volume_factor</a>, <a class="el" href="enums_8h_source.html#l00054">RULE_BLACKLISTED</a>, and <a class="el" href="enums_8h_source.html#l00053">RULE_WHITELISTED</a>.</p>

<p class="reference">Referenced by <a class="el" href="pickup_8cpp_source.html#l00571">pickup::pick_up()</a>.</p>

</div>
</div>
<a id="a984fe168e58131dd17135e0d7e6036a1" name="a984fe168e58131dd17135e0d7e6036a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a984fe168e58131dd17135e0d7e6036a1">&#9670;&nbsp;</a></span>show_pickup_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void show_pickup_message </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="pickup_8cpp.html#a8cff7c1e58e62a42d75a83536fb3f90e">pickup_map</a> &amp;&#160;</td>
          <td class="paramname"><em>mapPickup</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="pickup_8cpp_source.html#l01225">1225</a> of file <a class="el" href="pickup_8cpp_source.html">pickup.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>{</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;entry : mapPickup ) {</div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>        <span class="keywordflow">if</span>( entry.second.first.invlet != 0 ) {</div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You pick up: %d %s [%c]&quot;</span> ), entry.second.second,</div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>                     entry.second.first.display_name( entry.second.second ), entry.second.first.invlet );</div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You pick up: %d %s&quot;</span> ), entry.second.second,</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>                     entry.second.first.display_name( entry.second.second ) );</div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>        }</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>    }</div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, and <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>.</p>

<p class="reference">Referenced by <a class="el" href="pickup_8cpp_source.html#l00404">pickup::do_pickup()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="pickup_8cpp.html">pickup.cpp</a></li>
    <li class="footer">Generated on Sat Nov 12 2022 15:15:40 for Cataclysm BN by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
