<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm BN: vehicle Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm BN
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classvehicle.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="classvehicle-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">vehicle Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>A vehicle as a whole with all its components.  
 <a href="classvehicle.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="vehicle_8h_source.html">vehicle.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle_1_1autodrive__controller.html">autodrive_controller</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8621fbcb37cbcb7760f0106a6b7e4fbe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a8621fbcb37cbcb7760f0106a6b7e4fbe">vehicle</a> (const <a class="el" href="type__id_8h.html#a64efc8ab51816a59711440d464136eda">vproto_id</a> &amp;type_id, int init_veh_fuel=-1, int init_veh_status=-1)</td></tr>
<tr class="separator:a8621fbcb37cbcb7760f0106a6b7e4fbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf5643774310a3300a2637e20f0b6fee"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#abf5643774310a3300a2637e20f0b6fee">vehicle</a> ()</td></tr>
<tr class="separator:abf5643774310a3300a2637e20f0b6fee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4abd7f41e0d1243436d99393e3594a9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ad4abd7f41e0d1243436d99393e3594a9">vehicle</a> (const <a class="el" href="classvehicle.html">vehicle</a> &amp;)=delete</td></tr>
<tr class="separator:ad4abd7f41e0d1243436d99393e3594a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af410668ac3b25faaaca1bd8e044c58c2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af410668ac3b25faaaca1bd8e044c58c2">~vehicle</a> ()</td></tr>
<tr class="separator:af410668ac3b25faaaca1bd8e044c58c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0481cb566495e5d3856291d69855599"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classvehicle.html">vehicle</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ac0481cb566495e5d3856291d69855599">operator=</a> (<a class="el" href="classvehicle.html">vehicle</a> &amp;&amp;)=default</td></tr>
<tr class="separator:ac0481cb566495e5d3856291d69855599"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1994ca720f9bd60f9fc14e9cf27e0381"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a1994ca720f9bd60f9fc14e9cf27e0381">suspend_refresh</a> ()</td></tr>
<tr class="memdesc:a1994ca720f9bd60f9fc14e9cf27e0381"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable or enable <a class="el" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5" title="Refreshes all caches and refinds all parts.">refresh()</a> ; used to speed up performance when creating a vehicle.  <a href="classvehicle.html#a1994ca720f9bd60f9fc14e9cf27e0381">More...</a><br /></td></tr>
<tr class="separator:a1994ca720f9bd60f9fc14e9cf27e0381"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a649520b2771528912e35040ff307b6fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a649520b2771528912e35040ff307b6fb">enable_refresh</a> ()</td></tr>
<tr class="separator:a649520b2771528912e35040ff307b6fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84a1f3fed2f2075a8f8814e74de888c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a84a1f3fed2f2075a8f8814e74de888c7">set_hp</a> (<a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;pt, int qty)</td></tr>
<tr class="memdesc:a84a1f3fed2f2075a8f8814e74de888c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set stat for part constrained by range [0,durability].  <a href="classvehicle.html#a84a1f3fed2f2075a8f8814e74de888c7">More...</a><br /></td></tr>
<tr class="separator:a84a1f3fed2f2075a8f8814e74de888c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c80007e6bb704ab32bd6c8adafff454"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a9c80007e6bb704ab32bd6c8adafff454">mod_hp</a> (<a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;pt, int qty, <a class="el" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7a">damage_type</a> dt=<a class="el" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa72a55d767311e078564d195eefa4cafc">DT_NULL</a>)</td></tr>
<tr class="memdesc:a9c80007e6bb704ab32bd6c8adafff454"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply damage to part constrained by range [0,durability] possibly destroying it.  <a href="classvehicle.html#a9c80007e6bb704ab32bd6c8adafff454">More...</a><br /></td></tr>
<tr class="separator:a9c80007e6bb704ab32bd6c8adafff454"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a341515426011486c265d016c35f84de6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a341515426011486c265d016c35f84de6">player_in_control</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;p) const</td></tr>
<tr class="separator:a341515426011486c265d016c35f84de6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcb8ceed162110674571ecb30a3cee48"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#adcb8ceed162110674571ecb30a3cee48">remote_controlled</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;p) const</td></tr>
<tr class="separator:adcb8ceed162110674571ecb30a3cee48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d5520a059111acb3427c98580b713a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a9d5520a059111acb3427c98580b713a8">init_state</a> (int init_veh_fuel, int init_veh_status)</td></tr>
<tr class="separator:a9d5520a059111acb3427c98580b713a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b023391122d88cc354e7fca903cec54"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a8b023391122d88cc354e7fca903cec54">smash</a> (<a class="el" href="classmap.html">map</a> &amp;m, float hp_percent_loss_min=0.1f, float hp_percent_loss_max=1.2f, float percent_of_parts_to_affect=1.0f, <a class="el" href="structpoint.html">point</a> damage_origin=<a class="el" href="point_8h.html#a0ee2195dcb488ae55fbf4316f5011172">point_zero</a>, float damage_size=0)</td></tr>
<tr class="memdesc:a8b023391122d88cc354e7fca903cec54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Smashes up a vehicle that has already been placed; used for generating very damaged vehicles.  <a href="classvehicle.html#a8b023391122d88cc354e7fca903cec54">More...</a><br /></td></tr>
<tr class="separator:a8b023391122d88cc354e7fca903cec54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a080b319ecacdc070844e9b5cd9090216"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a080b319ecacdc070844e9b5cd9090216">serialize</a> (<a class="el" href="classJsonOut.html">JsonOut</a> &amp;json) const</td></tr>
<tr class="separator:a080b319ecacdc070844e9b5cd9090216"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b4df7e5059e9684cb71feba1233c36f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a3b4df7e5059e9684cb71feba1233c36f">deserialize</a> (<a class="el" href="classJsonIn.html">JsonIn</a> &amp;jsin)</td></tr>
<tr class="separator:a3b4df7e5059e9684cb71feba1233c36f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0e3632190f7d337f88938e688a092b9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af0e3632190f7d337f88938e688a092b9">print_part_list</a> (const <a class="el" href="classcatacurses_1_1window.html">catacurses::window</a> &amp;win, int y1, int max_y, int width, int p, int hl=-1, bool detail=false) const</td></tr>
<tr class="memdesc:af0e3632190f7d337f88938e688a092b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints a list of all parts to the screen inside of a boxed window, possibly highlighting a selected one.  <a href="classvehicle.html#af0e3632190f7d337f88938e688a092b9">More...</a><br /></td></tr>
<tr class="separator:af0e3632190f7d337f88938e688a092b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98b1fa3f71287aad0de13e3166e8a6e7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a98b1fa3f71287aad0de13e3166e8a6e7">print_vparts_descs</a> (const <a class="el" href="classcatacurses_1_1window.html">catacurses::window</a> &amp;win, int max_y, int width, int p, int &amp;start_at, int &amp;start_limit) const</td></tr>
<tr class="memdesc:a98b1fa3f71287aad0de13e3166e8a6e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints a list of descriptions for all parts to the screen inside of a boxed window.  <a href="classvehicle.html#a98b1fa3f71287aad0de13e3166e8a6e7">More...</a><br /></td></tr>
<tr class="separator:a98b1fa3f71287aad0de13e3166e8a6e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad874a1fdccab8e70b60d887fc0d56b7e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ad874a1fdccab8e70b60d887fc0d56b7e">invalidate_towing</a> (bool first_vehicle=false)</td></tr>
<tr class="separator:ad874a1fdccab8e70b60d887fc0d56b7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9246519a74be61ee9a8b4da2888c2ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af9246519a74be61ee9a8b4da2888c2ed">do_towing_move</a> ()</td></tr>
<tr class="separator:af9246519a74be61ee9a8b4da2888c2ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac943b06a3e2b9680b89c418abd4f62ff"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ac943b06a3e2b9680b89c418abd4f62ff">tow_cable_too_far</a> () const</td></tr>
<tr class="separator:ac943b06a3e2b9680b89c418abd4f62ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49867729934087d3589ea7e9ca2ad75b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a49867729934087d3589ea7e9ca2ad75b">no_towing_slack</a> () const</td></tr>
<tr class="separator:a49867729934087d3589ea7e9ca2ad75b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40b149ccb2383cb1a263f3e3d88f3469"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a40b149ccb2383cb1a263f3e3d88f3469">is_towing</a> () const</td></tr>
<tr class="separator:a40b149ccb2383cb1a263f3e3d88f3469"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35d54e8a51e9571f03c0e192c70af09f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a35d54e8a51e9571f03c0e192c70af09f">has_tow_attached</a> () const</td></tr>
<tr class="separator:a35d54e8a51e9571f03c0e192c70af09f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb9be9ceedf5b5922879fad1646da8fb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#adb9be9ceedf5b5922879fad1646da8fb">get_tow_part</a> () const</td></tr>
<tr class="separator:adb9be9ceedf5b5922879fad1646da8fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb993252c4c4131ced3d47e37ac0f811"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#adb993252c4c4131ced3d47e37ac0f811">is_external_part</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;part_pt) const</td></tr>
<tr class="separator:adb993252c4c4131ced3d47e37ac0f811"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac24aba962fd53d1a87bf57b52ce40508"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ac24aba962fd53d1a87bf57b52ce40508">is_towed</a> () const</td></tr>
<tr class="separator:ac24aba962fd53d1a87bf57b52ce40508"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c731c248cdff3b843f703b3c607a823"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a6c731c248cdff3b843f703b3c607a823">set_tow_directions</a> ()</td></tr>
<tr class="separator:a6c731c248cdff3b843f703b3c607a823"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f2357d1540b058495b554c1b5593611"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a0f2357d1540b058495b554c1b5593611">is_owned_by</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;<a class="el" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>, bool available_to_take=false) const</td></tr>
<tr class="separator:a0f2357d1540b058495b554c1b5593611"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf454e2521b991a5b45f920be43fc5c1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#abf454e2521b991a5b45f920be43fc5c1">is_old_owner</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;<a class="el" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>, bool available_to_take=false) const</td></tr>
<tr class="separator:abf454e2521b991a5b45f920be43fc5c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48d4c51cef53131283d0ff6c64a2fe5f"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a48d4c51cef53131283d0ff6c64a2fe5f">get_owner_name</a> () const</td></tr>
<tr class="separator:a48d4c51cef53131283d0ff6c64a2fe5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad68498a5e732d7d0912f25f989e0356"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aad68498a5e732d7d0912f25f989e0356">set_old_owner</a> (const <a class="el" href="clzones_8h.html#ab899db7b87cf958f079fe0f14793625b">faction_id</a> &amp;temp_owner)</td></tr>
<tr class="separator:aad68498a5e732d7d0912f25f989e0356"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae4c2a7de2fba2e7808904f8e39bd12e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aae4c2a7de2fba2e7808904f8e39bd12e">remove_old_owner</a> ()</td></tr>
<tr class="separator:aae4c2a7de2fba2e7808904f8e39bd12e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae57a59ca3ca669ce217f98094101b2ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ae57a59ca3ca669ce217f98094101b2ef">set_owner</a> (const <a class="el" href="clzones_8h.html#ab899db7b87cf958f079fe0f14793625b">faction_id</a> &amp;new_owner)</td></tr>
<tr class="separator:ae57a59ca3ca669ce217f98094101b2ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5eb3c01708ec8090cedc2272b50d1bc4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a5eb3c01708ec8090cedc2272b50d1bc4">set_owner</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;<a class="el" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>)</td></tr>
<tr class="separator:a5eb3c01708ec8090cedc2272b50d1bc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95f9abba8cbc766e3916da4aec323b21"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a95f9abba8cbc766e3916da4aec323b21">remove_owner</a> ()</td></tr>
<tr class="separator:a95f9abba8cbc766e3916da4aec323b21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a070fe172db0a71f8ab874a18a1d88d10"><td class="memItemLeft" align="right" valign="top"><a class="el" href="clzones_8h.html#ab899db7b87cf958f079fe0f14793625b">faction_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a070fe172db0a71f8ab874a18a1d88d10">get_owner</a> () const</td></tr>
<tr class="separator:a070fe172db0a71f8ab874a18a1d88d10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75b7a6e603fe0fe7c2d8f950c397d87e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="clzones_8h.html#ab899db7b87cf958f079fe0f14793625b">faction_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a75b7a6e603fe0fe7c2d8f950c397d87e">get_old_owner</a> () const</td></tr>
<tr class="separator:a75b7a6e603fe0fe7c2d8f950c397d87e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16754f112125d292839bf0c10a99d7ae"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a16754f112125d292839bf0c10a99d7ae">has_owner</a> () const</td></tr>
<tr class="separator:a16754f112125d292839bf0c10a99d7ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a075fec953ade4b95c94b4cc1f80fe4e9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a075fec953ade4b95c94b4cc1f80fe4e9">has_old_owner</a> () const</td></tr>
<tr class="separator:a075fec953ade4b95c94b4cc1f80fe4e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f52c81265462fd7eee8fd158666f9be"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a2f52c81265462fd7eee8fd158666f9be">handle_potential_theft</a> (<a class="el" href="classplayer.html">player</a> &amp;p, bool check_only=false, bool prompt=true)</td></tr>
<tr class="separator:a2f52c81265462fd7eee8fd158666f9be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b5b9d8cd2fc0b772daa3be20776e2ba"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="structpoint.html">point</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a9b5b9d8cd2fc0b772daa3be20776e2ba">immediate_path</a> (<a class="el" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">units::angle</a> <a class="el" href="vehicle__autodrive_8cpp.html#affed6d9410facda00cc52b22abf797ba">rotate</a>=0_degrees)</td></tr>
<tr class="separator:a9b5b9d8cd2fc0b772daa3be20776e2ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11ce39add66d395d6e136daf6b53f62a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a11ce39add66d395d6e136daf6b53f62a">autopilot_patrol</a> ()</td></tr>
<tr class="separator:a11ce39add66d395d6e136daf6b53f62a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29bd874a59dfbdac6c6c9b5f0032680e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">units::angle</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a29bd874a59dfbdac6c6c9b5f0032680e">get_angle_from_targ</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;targ)</td></tr>
<tr class="separator:a29bd874a59dfbdac6c6c9b5f0032680e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9bc38c7faa275ff2ea2f92be706da33"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aa9bc38c7faa275ff2ea2f92be706da33">drive_to_local_target</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;target, bool follow_protocol)</td></tr>
<tr class="separator:aa9bc38c7faa275ff2ea2f92be706da33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb4c50c8656b06d74e63a19b3d72308b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtripoint.html">tripoint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#adb4c50c8656b06d74e63a19b3d72308b">get_autodrive_target</a> ()</td></tr>
<tr class="separator:adb4c50c8656b06d74e63a19b3d72308b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af00bcdd270607518a99b64f187397080"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vehicle_8h.html#a120e32a2f241b5f666c5189a2f405eea">autodrive_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af00bcdd270607518a99b64f187397080">do_autodrive</a> (<a class="el" href="classCharacter.html">Character</a> &amp;driver)</td></tr>
<tr class="separator:af00bcdd270607518a99b64f187397080"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d23ce82d669c714795a2ed9b679e3b9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a8d23ce82d669c714795a2ed9b679e3b9">stop_autodriving</a> (bool apply_brakes=true)</td></tr>
<tr class="separator:a8d23ce82d669c714795a2ed9b679e3b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7872008545efae65aac7a6d9582bbd3b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a7872008545efae65aac7a6d9582bbd3b">use_controls</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;<a class="el" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>)</td></tr>
<tr class="memdesc:a7872008545efae65aac7a6d9582bbd3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Operate vehicle controls.  <a href="classvehicle.html#a7872008545efae65aac7a6d9582bbd3b">More...</a><br /></td></tr>
<tr class="separator:a7872008545efae65aac7a6d9582bbd3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac5f2a0e58f59b3cc5020d9bb7216bdd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aac5f2a0e58f59b3cc5020d9bb7216bdd">fold_up</a> ()</td></tr>
<tr class="separator:aac5f2a0e58f59b3cc5020d9bb7216bdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab29f93a000f56c1118d3e2a8ea509105"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ab29f93a000f56c1118d3e2a8ea509105">start_engine</a> (int e)</td></tr>
<tr class="separator:ab29f93a000f56c1118d3e2a8ea509105"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac35c686d0d5bc43d6605036bcde5e62b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ac35c686d0d5bc43d6605036bcde5e62b">stop_engines</a> ()</td></tr>
<tr class="separator:ac35c686d0d5bc43d6605036bcde5e62b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7183b4a2eac4da678e316f5ca1d46e08"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a7183b4a2eac4da678e316f5ca1d46e08">start_engines</a> (bool take_control=false, bool autodrive=false)</td></tr>
<tr class="separator:a7183b4a2eac4da678e316f5ca1d46e08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b0acd63b60b974f0ac842263d5ec58f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a9b0acd63b60b974f0ac842263d5ec58f">backfire</a> (int e) const</td></tr>
<tr class="separator:a9b0acd63b60b974f0ac842263d5ec58f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab4917d0f78fe4df1c8f5303fdf2b86d"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classvpart__info.html">vpart_info</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a> (int index, bool include_removed=false) const</td></tr>
<tr class="separator:aab4917d0f78fe4df1c8f5303fdf2b86d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace12ee882e4b3b71b7679ff9b01efe9c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ace12ee882e4b3b71b7679ff9b01efe9c">can_mount</a> (const <a class="el" href="structpoint.html">point</a> &amp;dp, const <a class="el" href="type__id_8h.html#a01bb48ae3e1e67dbfa6a3a9679dc1b13">vpart_id</a> &amp;id) const</td></tr>
<tr class="memdesc:ace12ee882e4b3b71b7679ff9b01efe9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether or not the vehicle part with the given id can be mounted in the specified square.  <a href="classvehicle.html#ace12ee882e4b3b71b7679ff9b01efe9c">More...</a><br /></td></tr>
<tr class="separator:ace12ee882e4b3b71b7679ff9b01efe9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ab138d254ebd9207f2a7e021040a4d8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a8ab138d254ebd9207f2a7e021040a4d8">can_unmount</a> (int p) const</td></tr>
<tr class="separator:a8ab138d254ebd9207f2a7e021040a4d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a862aacf53bdf71913925b6dc66f5cc31"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a862aacf53bdf71913925b6dc66f5cc31">can_unmount</a> (int p, std::string &amp;reason) const</td></tr>
<tr class="separator:a862aacf53bdf71913925b6dc66f5cc31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a720bcd814432de09323f4ca1dfb2eade"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a720bcd814432de09323f4ca1dfb2eade">install_part</a> (const <a class="el" href="structpoint.html">point</a> &amp;dp, const <a class="el" href="type__id_8h.html#a01bb48ae3e1e67dbfa6a3a9679dc1b13">vpart_id</a> &amp;id, bool force=false)</td></tr>
<tr class="memdesc:a720bcd814432de09323f4ca1dfb2eade"><td class="mdescLeft">&#160;</td><td class="mdescRight">Installs a part into this vehicle.  <a href="classvehicle.html#a720bcd814432de09323f4ca1dfb2eade">More...</a><br /></td></tr>
<tr class="separator:a720bcd814432de09323f4ca1dfb2eade"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae5fcaf3c41d87b4a0534b6649e0e05c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aae5fcaf3c41d87b4a0534b6649e0e05c">install_part</a> (const <a class="el" href="structpoint.html">point</a> &amp;dp, const <a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;<a class="el" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>)</td></tr>
<tr class="separator:aae5fcaf3c41d87b4a0534b6649e0e05c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28c6af2e367a807dca353289f8d7fabb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a28c6af2e367a807dca353289f8d7fabb">install_part</a> (const <a class="el" href="structpoint.html">point</a> &amp;dp, const <a class="el" href="type__id_8h.html#a01bb48ae3e1e67dbfa6a3a9679dc1b13">vpart_id</a> &amp;id, <a class="el" href="classitem.html">item</a> &amp;&amp;obj, bool force=false)</td></tr>
<tr class="memdesc:a28c6af2e367a807dca353289f8d7fabb"><td class="mdescLeft">&#160;</td><td class="mdescRight">install item specified item to vehicle as a vehicle part  <a href="classvehicle.html#a28c6af2e367a807dca353289f8d7fabb">More...</a><br /></td></tr>
<tr class="separator:a28c6af2e367a807dca353289f8d7fabb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a834d9feebd679075951c666c2030b881"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a834d9feebd679075951c666c2030b881">try_to_rack_nearby_vehicle</a> (const std::vector&lt; std::vector&lt; int &gt; &gt; &amp;list_of_racks)</td></tr>
<tr class="separator:a834d9feebd679075951c666c2030b881"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fcad9b54e438d79b12f2e369511ffa8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a2fcad9b54e438d79b12f2e369511ffa8">merge_rackable_vehicle</a> (<a class="el" href="classvehicle.html">vehicle</a> *carry_veh, const std::vector&lt; int &gt; &amp;rack_parts)</td></tr>
<tr class="separator:a2fcad9b54e438d79b12f2e369511ffa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04638c5234928c4ccca14ddc2059fb11"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a04638c5234928c4ccca14ddc2059fb11">remove_part</a> (int p, <a class="el" href="classRemovePartHandler.html">RemovePartHandler</a> &amp;handler)</td></tr>
<tr class="separator:a04638c5234928c4ccca14ddc2059fb11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3994c8a66172408e26ed8bfaec2f717"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ab3994c8a66172408e26ed8bfaec2f717">remove_part</a> (int p)</td></tr>
<tr class="memdesc:ab3994c8a66172408e26ed8bfaec2f717"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark a part as removed from the vehicle.  <a href="classvehicle.html#ab3994c8a66172408e26ed8bfaec2f717">More...</a><br /></td></tr>
<tr class="separator:ab3994c8a66172408e26ed8bfaec2f717"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a256bff136536ed8e38b84521c1450a6a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a256bff136536ed8e38b84521c1450a6a">part_removal_cleanup</a> ()</td></tr>
<tr class="separator:a256bff136536ed8e38b84521c1450a6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f50d5c5835291a971f85c12662f4e0e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a0f50d5c5835291a971f85c12662f4e0e">remove_carried_flag</a> ()</td></tr>
<tr class="separator:a0f50d5c5835291a971f85c12662f4e0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a653f5f2bff7517c56044fdaa16b73ed6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a653f5f2bff7517c56044fdaa16b73ed6">remove_tracked_flag</a> ()</td></tr>
<tr class="separator:a653f5f2bff7517c56044fdaa16b73ed6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af17aff1ff5fdcef4f1a8b63d47f32b69"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af17aff1ff5fdcef4f1a8b63d47f32b69">remove_carried_vehicle</a> (const std::vector&lt; int &gt; &amp;carried_parts)</td></tr>
<tr class="separator:af17aff1ff5fdcef4f1a8b63d47f32b69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5732b3bce5414a290baedad25a85b2b4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a5732b3bce5414a290baedad25a85b2b4">find_and_split_vehicles</a> (int exclude)</td></tr>
<tr class="separator:a5732b3bce5414a290baedad25a85b2b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a4ea0ccba37cc3df09163313b402105"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a6a4ea0ccba37cc3df09163313b402105">relocate_passengers</a> (const std::vector&lt; <a class="el" href="classplayer.html">player</a> * &gt; &amp;passengers)</td></tr>
<tr class="separator:a6a4ea0ccba37cc3df09163313b402105"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90e64bb680f1b708b645df8d06028366"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a90e64bb680f1b708b645df8d06028366">split_vehicles</a> (const std::vector&lt; std::vector&lt; int &gt; &gt; &amp;new_vehs, const std::vector&lt; <a class="el" href="classvehicle.html">vehicle</a> * &gt; &amp;new_vehicles, const std::vector&lt; std::vector&lt; <a class="el" href="structpoint.html">point</a> &gt; &gt; &amp;new_mounts)</td></tr>
<tr class="separator:a90e64bb680f1b708b645df8d06028366"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e87fc465ea66ba46f29f09bcc68b6bb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a4e87fc465ea66ba46f29f09bcc68b6bb">split_vehicles</a> (const std::vector&lt; std::vector&lt; int &gt; &gt; &amp;new_veh)</td></tr>
<tr class="separator:a4e87fc465ea66ba46f29f09bcc68b6bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab14a3fcf395f63b6fcaea51d37b72176"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classitem__location.html">item_location</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ab14a3fcf395f63b6fcaea51d37b72176">part_base</a> (int p)</td></tr>
<tr class="memdesc:ab14a3fcf395f63b6fcaea51d37b72176"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get handle for base item of part.  <a href="classvehicle.html#ab14a3fcf395f63b6fcaea51d37b72176">More...</a><br /></td></tr>
<tr class="separator:ab14a3fcf395f63b6fcaea51d37b72176"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc38c6f89711eb77b77fa955d4e24040"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#abc38c6f89711eb77b77fa955d4e24040">find_part</a> (const <a class="el" href="classitem.html">item</a> &amp;it) const</td></tr>
<tr class="memdesc:abc38c6f89711eb77b77fa955d4e24040"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get index of part with matching base item or INT_MIN if not found.  <a href="classvehicle.html#abc38c6f89711eb77b77fa955d4e24040">More...</a><br /></td></tr>
<tr class="separator:abc38c6f89711eb77b77fa955d4e24040"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e69be901ab700c0d31b6b20f1f97f39"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a3e69be901ab700c0d31b6b20f1f97f39">remove_remote_part</a> (int part_num)</td></tr>
<tr class="memdesc:a3e69be901ab700c0d31b6b20f1f97f39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a part from a targeted remote vehicle.  <a href="classvehicle.html#a3e69be901ab700c0d31b6b20f1f97f39">More...</a><br /></td></tr>
<tr class="separator:a3e69be901ab700c0d31b6b20f1f97f39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a397b40aa92dd1fd09ee592aa279bc656"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classvehicle__part__range.html">vehicle_part_range</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a397b40aa92dd1fd09ee592aa279bc656">get_all_parts</a> () const</td></tr>
<tr class="memdesc:a397b40aa92dd1fd09ee592aa279bc656"><td class="mdescLeft">&#160;</td><td class="mdescRight">Yields a range containing all parts (including broken ones) that can be iterated over.  <a href="classvehicle.html#a397b40aa92dd1fd09ee592aa279bc656">More...</a><br /></td></tr>
<tr class="separator:a397b40aa92dd1fd09ee592aa279bc656"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a4d8dc36f8def16518bc7ba0126c969"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a> (const <a class="el" href="structpoint.html">point</a> &amp;dp, bool use_cache) const</td></tr>
<tr class="separator:a5a4d8dc36f8def16518bc7ba0126c969"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00f013bfeaa4b6d44eaa67961f0c1e59"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a> (int p, const std::string &amp;f, bool unbroken) const</td></tr>
<tr class="separator:a00f013bfeaa4b6d44eaa67961f0c1e59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8a64866c703516f0746b4e6ee98370c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ad8a64866c703516f0746b4e6ee98370c">part_with_feature</a> (const <a class="el" href="structpoint.html">point</a> &amp;pt, const std::string &amp;f, bool unbroken) const</td></tr>
<tr class="separator:ad8a64866c703516f0746b4e6ee98370c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3776bc7547aa1af7ae7f6d34d0b4668"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ad3776bc7547aa1af7ae7f6d34d0b4668">part_with_feature</a> (int p, <a class="el" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307e">vpart_bitflags</a> f, bool unbroken) const</td></tr>
<tr class="separator:ad3776bc7547aa1af7ae7f6d34d0b4668"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad22641da003beff80194f7127280bc5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aad22641da003beff80194f7127280bc5">avail_part_with_feature</a> (int p, const std::string &amp;f, bool unbroken) const</td></tr>
<tr class="separator:aad22641da003beff80194f7127280bc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d21f80be5fabbc95e3d58f250009c24"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a5d21f80be5fabbc95e3d58f250009c24">avail_part_with_feature</a> (const <a class="el" href="structpoint.html">point</a> &amp;pt, const std::string &amp;f, bool unbroken) const</td></tr>
<tr class="separator:a5d21f80be5fabbc95e3d58f250009c24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad627a3bca72c23daf3961f6abbd202d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aad627a3bca72c23daf3961f6abbd202d">avail_part_with_feature</a> (int p, <a class="el" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307e">vpart_bitflags</a> f, bool unbroken) const</td></tr>
<tr class="separator:aad627a3bca72c23daf3961f6abbd202d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca3ae013973cb492b14967e574189c1c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a> (const std::string &amp;flag, bool <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a>=false) const</td></tr>
<tr class="memdesc:aca3ae013973cb492b14967e574189c1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if vehicle has at least one unbroken part with specified flag.  <a href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">More...</a><br /></td></tr>
<tr class="separator:aca3ae013973cb492b14967e574189c1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfb71c4f46718a813eb4f29a0bd0b3db"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#acfb71c4f46718a813eb4f29a0bd0b3db">has_part</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;<a class="el" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, const std::string &amp;flag, bool <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a>=false) const</td></tr>
<tr class="memdesc:acfb71c4f46718a813eb4f29a0bd0b3db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if vehicle has at least one unbroken part with specified flag.  <a href="classvehicle.html#acfb71c4f46718a813eb4f29a0bd0b3db">More...</a><br /></td></tr>
<tr class="separator:acfb71c4f46718a813eb4f29a0bd0b3db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38ba5bdc99241568c83ada974ed73e07"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structvehicle__part.html">vehicle_part</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a38ba5bdc99241568c83ada974ed73e07">get_parts_at</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;<a class="el" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, const std::string &amp;flag, <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02c">part_status_flag</a> condition)</td></tr>
<tr class="memdesc:a38ba5bdc99241568c83ada974ed73e07"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get all enabled, available, unbroken vehicle parts at specified position.  <a href="classvehicle.html#a38ba5bdc99241568c83ada974ed73e07">More...</a><br /></td></tr>
<tr class="separator:a38ba5bdc99241568c83ada974ed73e07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee3df9c68359219bc6fbcbe6fcec2e48"><td class="memItemLeft" align="right" valign="top">std::vector&lt; const <a class="el" href="structvehicle__part.html">vehicle_part</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aee3df9c68359219bc6fbcbe6fcec2e48">get_parts_at</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;<a class="el" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, const std::string &amp;flag, <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02c">part_status_flag</a> condition) const</td></tr>
<tr class="separator:aee3df9c68359219bc6fbcbe6fcec2e48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f9dfc3363a30ce23a1575e47b851fa0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a1f9dfc3363a30ce23a1575e47b851fa0">can_enable</a> (const <a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;pt, bool alert=false) const</td></tr>
<tr class="memdesc:a1f9dfc3363a30ce23a1575e47b851fa0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test if part can be enabled (unbroken, sufficient fuel etc), optionally displaying failures to user.  <a href="classvehicle.html#a1f9dfc3363a30ce23a1575e47b851fa0">More...</a><br /></td></tr>
<tr class="separator:a1f9dfc3363a30ce23a1575e47b851fa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3c434ad827415575b465480af310487"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aa3c434ad827415575b465480af310487">next_part_to_open</a> (int p, bool outside=false) const</td></tr>
<tr class="memdesc:aa3c434ad827415575b465480af310487"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the index of the next part to open at <code>p</code>'s location.  <a href="classvehicle.html#aa3c434ad827415575b465480af310487">More...</a><br /></td></tr>
<tr class="separator:aa3c434ad827415575b465480af310487"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac026aecb053a772b6d5902fe180166c5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ac026aecb053a772b6d5902fe180166c5">next_part_to_close</a> (int p, bool outside=false) const</td></tr>
<tr class="memdesc:ac026aecb053a772b6d5902fe180166c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the index of the next part to close at <code>p</code>  <a href="classvehicle.html#ac026aecb053a772b6d5902fe180166c5">More...</a><br /></td></tr>
<tr class="separator:ac026aecb053a772b6d5902fe180166c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e1f54f4d34a2edb7ff3665e5eba7df9"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a2e1f54f4d34a2edb7ff3665e5eba7df9">all_parts_at_location</a> (const std::string &amp;location) const</td></tr>
<tr class="memdesc:a2e1f54f4d34a2edb7ff3665e5eba7df9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns all parts in the vehicle that exist in the given location slot.  <a href="classvehicle.html#a2e1f54f4d34a2edb7ff3665e5eba7df9">More...</a><br /></td></tr>
<tr class="separator:a2e1f54f4d34a2edb7ff3665e5eba7df9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fd45081157bdeb69cec2567bf2cbeaa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a2fd45081157bdeb69cec2567bf2cbeaa">get_next_shifted_index</a> (int original_index, <a class="el" href="classplayer.html">player</a> &amp;p)</td></tr>
<tr class="separator:a2fd45081157bdeb69cec2567bf2cbeaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0f69e5e031ee2c64b5e4ea5b874b584"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af0f69e5e031ee2c64b5e4ea5b874b584">find_lines_of_parts</a> (int <a class="el" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, const std::string &amp;flag)</td></tr>
<tr class="memdesc:af0f69e5e031ee2c64b5e4ea5b874b584"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns all parts in the vehicle that have the specified flag in their vpinfo and are on the same X-axis or Y-axis as the input part and are contiguous with each other.  <a href="classvehicle.html#af0f69e5e031ee2c64b5e4ea5b874b584">More...</a><br /></td></tr>
<tr class="separator:af0f69e5e031ee2c64b5e4ea5b874b584"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a396e319b27729d4c423b3d096e657bf9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a> (int p, const std::string &amp;f) const</td></tr>
<tr class="separator:a396e319b27729d4c423b3d096e657bf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22ccc7dfff6c973a0f33151c75b455a9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a22ccc7dfff6c973a0f33151c75b455a9">part_flag</a> (int p, <a class="el" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307e">vpart_bitflags</a> f) const</td></tr>
<tr class="separator:a22ccc7dfff6c973a0f33151c75b455a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad45ae53f6326f7fde4d8e59848470457"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpoint.html">point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ad45ae53f6326f7fde4d8e59848470457">coord_translate</a> (const <a class="el" href="structpoint.html">point</a> &amp;p) const</td></tr>
<tr class="separator:ad45ae53f6326f7fde4d8e59848470457"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bb09b62768a71d8ef20b30f7958fa63"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a2bb09b62768a71d8ef20b30f7958fa63">coord_translate</a> (<a class="el" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">units::angle</a> dir, const <a class="el" href="structpoint.html">point</a> &amp;pivot, const <a class="el" href="structpoint.html">point</a> &amp;p, <a class="el" href="structtripoint.html">tripoint</a> &amp;q) const</td></tr>
<tr class="separator:a2bb09b62768a71d8ef20b30f7958fa63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86540b87f8c877b043c1a51f62c07075"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a86540b87f8c877b043c1a51f62c07075">coord_translate</a> (<a class="el" href="classtileray.html">tileray</a> tdir, const <a class="el" href="structpoint.html">point</a> &amp;pivot, const <a class="el" href="structpoint.html">point</a> &amp;p, <a class="el" href="structtripoint.html">tripoint</a> &amp;q) const</td></tr>
<tr class="separator:a86540b87f8c877b043c1a51f62c07075"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2123b10ad5b9401069f9b5774361878"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtripoint.html">tripoint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aa2123b10ad5b9401069f9b5774361878">mount_to_tripoint</a> (const <a class="el" href="structpoint.html">point</a> &amp;mount) const</td></tr>
<tr class="separator:aa2123b10ad5b9401069f9b5774361878"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e6f28b13e285237d6e0a2bc5812d78c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtripoint.html">tripoint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a9e6f28b13e285237d6e0a2bc5812d78c">mount_to_tripoint</a> (const <a class="el" href="structpoint.html">point</a> &amp;mount, const <a class="el" href="structpoint.html">point</a> &amp;offset) const</td></tr>
<tr class="separator:a9e6f28b13e285237d6e0a2bc5812d78c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4f6d4393384b656bd9c12e14cb6e2cb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ae4f6d4393384b656bd9c12e14cb6e2cb">part_at</a> (const <a class="el" href="structpoint.html">point</a> &amp;dp) const</td></tr>
<tr class="separator:ae4f6d4393384b656bd9c12e14cb6e2cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc20027ac440f3052242f9f6f0441934"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#adc20027ac440f3052242f9f6f0441934">part_displayed_at</a> (const <a class="el" href="structpoint.html">point</a> &amp;dp) const</td></tr>
<tr class="memdesc:adc20027ac440f3052242f9f6f0441934"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns which part (as an index into the parts list) is the one that will be displayed for the given square.  <a href="classvehicle.html#adc20027ac440f3052242f9f6f0441934">More...</a><br /></td></tr>
<tr class="separator:adc20027ac440f3052242f9f6f0441934"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a898e68c15af3168bb84a22a71a454c70"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a898e68c15af3168bb84a22a71a454c70">roof_at_part</a> (int p) const</td></tr>
<tr class="separator:a898e68c15af3168bb84a22a71a454c70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ebc79bba42df4fea00ee3a4e495cbde"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a0ebc79bba42df4fea00ee3a4e495cbde">index_of_part</a> (const <a class="el" href="structvehicle__part.html">vehicle_part</a> *<a class="el" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, bool check_removed=false) const</td></tr>
<tr class="memdesc:a0ebc79bba42df4fea00ee3a4e495cbde"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a vehicle part which is inside of this vehicle, returns the index of that part.  <a href="classvehicle.html#a0ebc79bba42df4fea00ee3a4e495cbde">More...</a><br /></td></tr>
<tr class="separator:a0ebc79bba42df4fea00ee3a4e495cbde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55aa2e0015efe2254f39fc2309257b2b"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a55aa2e0015efe2254f39fc2309257b2b">part_sym</a> (int p, bool <a class="el" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40a4dc2e2416faefa33a23a45ed367e9fa6">exact</a>=false) const</td></tr>
<tr class="separator:a55aa2e0015efe2254f39fc2309257b2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc549123dad32242312ada68c18ef0ce"><td class="memItemLeft" align="right" valign="top"><a class="el" href="type__id_8h.html#a01bb48ae3e1e67dbfa6a3a9679dc1b13">vpart_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#abc549123dad32242312ada68c18ef0ce">part_id_string</a> (int p, char &amp;part_mod) const</td></tr>
<tr class="separator:abc549123dad32242312ada68c18ef0ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c0ae4096c22318dabe8395b39ebd55e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classnc__color.html">nc_color</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a1c0ae4096c22318dabe8395b39ebd55e">part_color</a> (int p, bool <a class="el" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40a4dc2e2416faefa33a23a45ed367e9fa6">exact</a>=false) const</td></tr>
<tr class="separator:a1c0ae4096c22318dabe8395b39ebd55e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a574a15ae1c2572a6dafa55be0c7f3b25"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a574a15ae1c2572a6dafa55be0c7f3b25">get_printable_fuel_types</a> () const</td></tr>
<tr class="memdesc:a574a15ae1c2572a6dafa55be0c7f3b25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns an array of fuel types that can be printed.  <a href="classvehicle.html#a574a15ae1c2572a6dafa55be0c7f3b25">More...</a><br /></td></tr>
<tr class="separator:a574a15ae1c2572a6dafa55be0c7f3b25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74615c0f1ae9301f623bbea94a9f23c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a74615c0f1ae9301f623bbea94a9f23c4">print_fuel_indicators</a> (const <a class="el" href="classcatacurses_1_1window.html">catacurses::window</a> &amp;win, const <a class="el" href="structpoint.html">point</a> &amp;, int start_index=0, bool fullsize=false, bool verbose=false, bool desc=false, bool isHorizontal=false)</td></tr>
<tr class="memdesc:a74615c0f1ae9301f623bbea94a9f23c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints all of the fuel indicators of the vehicle.  <a href="classvehicle.html#a74615c0f1ae9301f623bbea94a9f23c4">More...</a><br /></td></tr>
<tr class="separator:a74615c0f1ae9301f623bbea94a9f23c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3df213ef35c4a1801ef30d1f65195f40"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a3df213ef35c4a1801ef30d1f65195f40">precalc_mounts</a> (int idir, <a class="el" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">units::angle</a> dir, const <a class="el" href="structpoint.html">point</a> &amp;pivot)</td></tr>
<tr class="separator:a3df213ef35c4a1801ef30d1f65195f40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab429af6376b555746f92158331f2a4cf"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ab429af6376b555746f92158331f2a4cf">boarded_parts</a> () const</td></tr>
<tr class="separator:ab429af6376b555746f92158331f2a4cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8df35c3f329b78ad0b912181f9e479e5"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structrider__data.html">rider_data</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a8df35c3f329b78ad0b912181f9e479e5">get_riders</a> () const</td></tr>
<tr class="separator:a8df35c3f329b78ad0b912181f9e479e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af02a0418851ddf50fcc810951d77b076"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classplayer.html">player</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af02a0418851ddf50fcc810951d77b076">get_passenger</a> (int p) const</td></tr>
<tr class="separator:af02a0418851ddf50fcc810951d77b076"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab266c3250ffece69b5c2ddc9897d80d3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmonster.html">monster</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ab266c3250ffece69b5c2ddc9897d80d3">get_pet</a> (int p) const</td></tr>
<tr class="separator:ab266c3250ffece69b5c2ddc9897d80d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afccaeaa8277a4fbfc2c596682bf8b2d1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#afccaeaa8277a4fbfc2c596682bf8b2d1">enclosed_at</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;<a class="el" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>)</td></tr>
<tr class="separator:afccaeaa8277a4fbfc2c596682bf8b2d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a789289c4179f7677e45cb100ff5ffb9a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="coordinates_8h.html#a25195af12949fae51d496c1fbd549871">tripoint_abs_ms</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a789289c4179f7677e45cb100ff5ffb9a">global_square_location</a> () const</td></tr>
<tr class="separator:a789289c4179f7677e45cb100ff5ffb9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec200af03ac3aa401024514d9cfd60ee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="coordinates_8h.html#a383a8345c0282c087ef788e4421c3ded">tripoint_abs_omt</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aec200af03ac3aa401024514d9cfd60ee">global_omt_location</a> () const</td></tr>
<tr class="separator:aec200af03ac3aa401024514d9cfd60ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3900ee345be0453828a955a200154db1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtripoint.html">tripoint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a> () const</td></tr>
<tr class="separator:a3900ee345be0453828a955a200154db1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8132c34a1ea24866889e6e599796adc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtripoint.html">tripoint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a> (const int &amp;index) const</td></tr>
<tr class="memdesc:ae8132c34a1ea24866889e6e599796adc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the coordinates of the studied part of the vehicle.  <a href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">More...</a><br /></td></tr>
<tr class="separator:ae8132c34a1ea24866889e6e599796adc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c8497dcb7aebc85a5c56780c1e90f49"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtripoint.html">tripoint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a6c8497dcb7aebc85a5c56780c1e90f49">global_part_pos3</a> (const <a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;pt) const</td></tr>
<tr class="separator:a6c8497dcb7aebc85a5c56780c1e90f49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af104b67f7b35e092414fd2efa9f2da05"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af104b67f7b35e092414fd2efa9f2da05">fuels_left</a> () const</td></tr>
<tr class="memdesc:af104b67f7b35e092414fd2efa9f2da05"><td class="mdescLeft">&#160;</td><td class="mdescRight">All the fuels that are in all the tanks in the vehicle, nicely summed up.  <a href="classvehicle.html#af104b67f7b35e092414fd2efa9f2da05">More...</a><br /></td></tr>
<tr class="separator:af104b67f7b35e092414fd2efa9f2da05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b3c37a197c21cdd469e7779f8c1db50"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a> (const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;ftype, bool recurse=false) const</td></tr>
<tr class="separator:a5b3c37a197c21cdd469e7779f8c1db50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07977db91bd20b5731d38764671102ed"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a07977db91bd20b5731d38764671102ed">fuel_left</a> (int p, bool recurse=false) const</td></tr>
<tr class="separator:a07977db91bd20b5731d38764671102ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af615cefb430470fc97b60635a382bc7a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af615cefb430470fc97b60635a382bc7a">engine_fuel_left</a> (int e, bool recurse=false) const</td></tr>
<tr class="separator:af615cefb430470fc97b60635a382bc7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d14b343f954d77dd649891fefd221de"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a2d14b343f954d77dd649891fefd221de">fuel_capacity</a> (const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;ftype) const</td></tr>
<tr class="separator:a2d14b343f954d77dd649891fefd221de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b28d63a4879b75d5a186289c54f6330"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a2b28d63a4879b75d5a186289c54f6330">drain</a> (const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;ftype, int amount)</td></tr>
<tr class="separator:a2b28d63a4879b75d5a186289c54f6330"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7b87d3b23c752e0c118a7fa913be276"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af7b87d3b23c752e0c118a7fa913be276">drain</a> (int index, int amount)</td></tr>
<tr class="separator:af7b87d3b23c752e0c118a7fa913be276"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89d72d47c4284b751fd8bebf52febdc4"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a89d72d47c4284b751fd8bebf52febdc4">drain_energy</a> (const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;ftype, double energy_j)</td></tr>
<tr class="memdesc:a89d72d47c4284b751fd8bebf52febdc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Consumes enough fuel by energy content.  <a href="classvehicle.html#a89d72d47c4284b751fd8bebf52febdc4">More...</a><br /></td></tr>
<tr class="separator:a89d72d47c4284b751fd8bebf52febdc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4fa51cc4955a15d62baa73006eccfa9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aa4fa51cc4955a15d62baa73006eccfa9">basic_consumption</a> (const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;ftype) const</td></tr>
<tr class="separator:aa4fa51cc4955a15d62baa73006eccfa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f1c8a77b8886bea8f66f8e730270493"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a6f1c8a77b8886bea8f66f8e730270493">consumption_per_hour</a> (const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;ftype, int fuel_rate) const</td></tr>
<tr class="separator:a6f1c8a77b8886bea8f66f8e730270493"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69a37e32958ea0bffc377cc3e0ece913"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a69a37e32958ea0bffc377cc3e0ece913">consume_fuel</a> (int load, int t_seconds=6, bool skip_electric=false)</td></tr>
<tr class="separator:a69a37e32958ea0bffc377cc3e0ece913"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97eca7e230437aa8792f1db63919c44f"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a97eca7e230437aa8792f1db63919c44f">fuel_usage</a> () const</td></tr>
<tr class="memdesc:a97eca7e230437aa8792f1db63919c44f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maps used fuel to its basic (unscaled by load/strain) consumption.  <a href="classvehicle.html#a97eca7e230437aa8792f1db63919c44f">More...</a><br /></td></tr>
<tr class="separator:a97eca7e230437aa8792f1db63919c44f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35c5a1a0f58f678e8a34e338b1b5187d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structvehicle__part.html">vehicle_part</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a35c5a1a0f58f678e8a34e338b1b5187d">lights</a> (bool <a class="el" href="mutation__ui_8cpp.html#a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79">active</a>=false)</td></tr>
<tr class="memdesc:a35c5a1a0f58f678e8a34e338b1b5187d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get all vehicle lights (excluding any that are destroyed)  <a href="classvehicle.html#a35c5a1a0f58f678e8a34e338b1b5187d">More...</a><br /></td></tr>
<tr class="separator:a35c5a1a0f58f678e8a34e338b1b5187d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab594a5970cdd36a1a4fbc1423de88538"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ab594a5970cdd36a1a4fbc1423de88538">update_alternator_load</a> ()</td></tr>
<tr class="separator:ab594a5970cdd36a1a4fbc1423de88538"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fcd5bf8a5698a23f77e614473d0e938"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a6fcd5bf8a5698a23f77e614473d0e938">total_engine_epower_w</a> () const</td></tr>
<tr class="separator:a6fcd5bf8a5698a23f77e614473d0e938"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26e100291b7fb8dd5574463e7112713a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a26e100291b7fb8dd5574463e7112713a">total_alternator_epower_w</a> () const</td></tr>
<tr class="separator:a26e100291b7fb8dd5574463e7112713a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9263dc6065a0c465c2716a3964a55bb8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a9263dc6065a0c465c2716a3964a55bb8">total_solar_epower_w</a> () const</td></tr>
<tr class="separator:a9263dc6065a0c465c2716a3964a55bb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad83675cd116674b36d3dd8e094b7a28b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ad83675cd116674b36d3dd8e094b7a28b">total_wind_epower_w</a> () const</td></tr>
<tr class="separator:ad83675cd116674b36d3dd8e094b7a28b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d7bd918d812d83f1fe3705f45b8615f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a7d7bd918d812d83f1fe3705f45b8615f">total_water_wheel_epower_w</a> () const</td></tr>
<tr class="separator:a7d7bd918d812d83f1fe3705f45b8615f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4883ea970c6da7b880d9f16f2590a1bd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a4883ea970c6da7b880d9f16f2590a1bd">total_accessory_epower_w</a> () const</td></tr>
<tr class="separator:a4883ea970c6da7b880d9f16f2590a1bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7787708a8d2096bcd114b955e5a3d56f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a7787708a8d2096bcd114b955e5a3d56f">net_battery_charge_rate_w</a> () const</td></tr>
<tr class="separator:a7787708a8d2096bcd114b955e5a3d56f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd0ed862a967a9016de37a47b1ac8043"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#abd0ed862a967a9016de37a47b1ac8043">max_reactor_epower_w</a> () const</td></tr>
<tr class="separator:abd0ed862a967a9016de37a47b1ac8043"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaafc01747fef78702c196ca9cf39a1bd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aaafc01747fef78702c196ca9cf39a1bd">power_parts</a> ()</td></tr>
<tr class="separator:aaafc01747fef78702c196ca9cf39a1bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46d22a6712ad986ed60917c367be83eb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a46d22a6712ad986ed60917c367be83eb">charge_battery</a> (int amount, bool include_other_vehicles=true)</td></tr>
<tr class="memdesc:a46d22a6712ad986ed60917c367be83eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to charge our (and, optionally, connected vehicles') batteries by the given amount.  <a href="classvehicle.html#a46d22a6712ad986ed60917c367be83eb">More...</a><br /></td></tr>
<tr class="separator:a46d22a6712ad986ed60917c367be83eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb03f8288804b551378478137e9cea11"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#acb03f8288804b551378478137e9cea11">discharge_battery</a> (int amount, bool recurse=true)</td></tr>
<tr class="memdesc:acb03f8288804b551378478137e9cea11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to discharge our (and, optionally, connected vehicles') batteries by the given amount.  <a href="classvehicle.html#acb03f8288804b551378478137e9cea11">More...</a><br /></td></tr>
<tr class="separator:acb03f8288804b551378478137e9cea11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e8079a6591b3104191c881509f16d61"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a8e8079a6591b3104191c881509f16d61">invalidate_mass</a> ()</td></tr>
<tr class="memdesc:a8e8079a6591b3104191c881509f16d61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark mass caches and pivot cache as dirty.  <a href="classvehicle.html#a8e8079a6591b3104191c881509f16d61">More...</a><br /></td></tr>
<tr class="separator:a8e8079a6591b3104191c881509f16d61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a7d83716bf73d4b58d265b626872d01"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceunits.html#af4f3159f510e2b4372187d8fb4746e23">units::mass</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a5a7d83716bf73d4b58d265b626872d01">total_mass</a> () const</td></tr>
<tr class="separator:a5a7d83716bf73d4b58d265b626872d01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36e9c29cbead2213b56dd6dc171d9ade"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a36e9c29cbead2213b56dd6dc171d9ade">rotated_center_of_mass</a> () const</td></tr>
<tr class="separator:a36e9c29cbead2213b56dd6dc171d9ade"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e52e13cf66fa7ebbe89c16687bae54b"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a8e52e13cf66fa7ebbe89c16687bae54b">local_center_of_mass</a> () const</td></tr>
<tr class="separator:a8e52e13cf66fa7ebbe89c16687bae54b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19bf91bbba8085237248e25c7d214ee6"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a19bf91bbba8085237248e25c7d214ee6">pivot_point</a> () const</td></tr>
<tr class="separator:a19bf91bbba8085237248e25c7d214ee6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6e46ab36d49708d3e96da5593d4c1f7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpoint.html">point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af6e46ab36d49708d3e96da5593d4c1f7">pivot_displacement</a> () const</td></tr>
<tr class="separator:af6e46ab36d49708d3e96da5593d4c1f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73db9a09464720b32da8e3f214475a8e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a73db9a09464720b32da8e3f214475a8e">total_power_w</a> (bool fueled=true, bool safe=false) const</td></tr>
<tr class="separator:a73db9a09464720b32da8e3f214475a8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a864572607b3e016a73c6e3b421021a84"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a864572607b3e016a73c6e3b421021a84">ground_acceleration</a> (bool fueled=true, int at_vel_in_vmi=-1) const</td></tr>
<tr class="separator:a864572607b3e016a73c6e3b421021a84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdeb5964519a588fa9be7f891e56cbfe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#abdeb5964519a588fa9be7f891e56cbfe">water_acceleration</a> (bool fueled=true, int at_vel_in_vmi=-1) const</td></tr>
<tr class="separator:abdeb5964519a588fa9be7f891e56cbfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e900eef075e4239bf1faec947f60c1d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a1e900eef075e4239bf1faec947f60c1d">rotor_acceleration</a> (bool fueled=true, int at_vel_in_vmi=-1) const</td></tr>
<tr class="separator:a1e900eef075e4239bf1faec947f60c1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9380d6e415bc75e80ab578d798af611"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ab9380d6e415bc75e80ab578d798af611">acceleration</a> (bool fueled=true, int at_vel_in_vmi=-1) const</td></tr>
<tr class="separator:ab9380d6e415bc75e80ab578d798af611"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad81a52a0535e57a0d7e390f6f379ae42"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ad81a52a0535e57a0d7e390f6f379ae42">current_acceleration</a> (bool fueled=true) const</td></tr>
<tr class="separator:ad81a52a0535e57a0d7e390f6f379ae42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec9a1faa6740b681867d48878e37d7bb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aec9a1faa6740b681867d48878e37d7bb">is_moving</a> () const</td></tr>
<tr class="separator:aec9a1faa6740b681867d48878e37d7bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c46063d58fd3a05504dec8bb8b6e837"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a9c46063d58fd3a05504dec8bb8b6e837">can_use_rails</a> () const</td></tr>
<tr class="separator:a9c46063d58fd3a05504dec8bb8b6e837"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f48439c388d9f7a75515eee70adf0ee"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a6f48439c388d9f7a75515eee70adf0ee">max_ground_velocity</a> (bool fueled=true) const</td></tr>
<tr class="separator:a6f48439c388d9f7a75515eee70adf0ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa288156b4f46f46ba4791073cbaf4c1b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aa288156b4f46f46ba4791073cbaf4c1b">max_water_velocity</a> (bool fueled=true) const</td></tr>
<tr class="separator:aa288156b4f46f46ba4791073cbaf4c1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade874af0ba61fbce41b10b05e9095e11"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ade874af0ba61fbce41b10b05e9095e11">max_rotor_velocity</a> (bool fueled=true) const</td></tr>
<tr class="separator:ade874af0ba61fbce41b10b05e9095e11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ae7b8e43449ee574a6fd266f4773892"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a8ae7b8e43449ee574a6fd266f4773892">max_velocity</a> (bool fueled=true) const</td></tr>
<tr class="separator:a8ae7b8e43449ee574a6fd266f4773892"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad845fa8ba69c4b41cf6a0fc35db7f01d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ad845fa8ba69c4b41cf6a0fc35db7f01d">max_reverse_velocity</a> (bool fueled=true) const</td></tr>
<tr class="separator:ad845fa8ba69c4b41cf6a0fc35db7f01d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae7ca2fef868c46f3f9181830a3bfa6d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aae7ca2fef868c46f3f9181830a3bfa6d">safe_ground_velocity</a> (bool fueled=true) const</td></tr>
<tr class="separator:aae7ca2fef868c46f3f9181830a3bfa6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfe723d18ff825cd4f9fe3a0aeac11da"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#adfe723d18ff825cd4f9fe3a0aeac11da">safe_rotor_velocity</a> (bool fueled=true) const</td></tr>
<tr class="separator:adfe723d18ff825cd4f9fe3a0aeac11da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6d107ed282fd1226e070fb19d7acf74"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af6d107ed282fd1226e070fb19d7acf74">safe_water_velocity</a> (bool fueled=true) const</td></tr>
<tr class="separator:af6d107ed282fd1226e070fb19d7acf74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad38e05507056b3b3da5a5a5e482adba4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ad38e05507056b3b3da5a5a5e482adba4">safe_velocity</a> (bool fueled=true) const</td></tr>
<tr class="separator:ad38e05507056b3b3da5a5a5e482adba4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f15b9fb1b1f72f1baf6dacfc5b05206"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a9f15b9fb1b1f72f1baf6dacfc5b05206">spew_field</a> (double joules, int <a class="el" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, <a class="el" href="type__id_8h.html#a2a56520b7eef7294fc98230cb883c9d2">field_type_id</a> <a class="el" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a>, int intensity=1)</td></tr>
<tr class="separator:a9f15b9fb1b1f72f1baf6dacfc5b05206"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bdc82052e35e69dd5f65e1177a13a95"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a8bdc82052e35e69dd5f65e1177a13a95">noise_and_smoke</a> (int load, <a class="el" href="classtime__duration.html">time_duration</a> time=1_turns)</td></tr>
<tr class="memdesc:a8bdc82052e35e69dd5f65e1177a13a95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate noise or smoke from a vehicle with engines turned on load = how hard the engines are working, from 0.0 until 1.0 time = how many seconds to generated smoke for.  <a href="classvehicle.html#a8bdc82052e35e69dd5f65e1177a13a95">More...</a><br /></td></tr>
<tr class="separator:a8bdc82052e35e69dd5f65e1177a13a95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab738fb6279eb3c198c96dfc2ff1207ff"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ab738fb6279eb3c198c96dfc2ff1207ff">wheel_area</a> () const</td></tr>
<tr class="memdesc:ab738fb6279eb3c198c96dfc2ff1207ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the sum of the area under the wheels of the vehicle.  <a href="classvehicle.html#ab738fb6279eb3c198c96dfc2ff1207ff">More...</a><br /></td></tr>
<tr class="separator:ab738fb6279eb3c198c96dfc2ff1207ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d8f351c21e7590410a9046f3b040d3b"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a3d8f351c21e7590410a9046f3b040d3b">average_or_rating</a> () const</td></tr>
<tr class="separator:a3d8f351c21e7590410a9046f3b040d3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8997e3518316057cde55f9ecb444b8f0"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a8997e3518316057cde55f9ecb444b8f0">coeff_air_drag</a> () const</td></tr>
<tr class="memdesc:a8997e3518316057cde55f9ecb444b8f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Physical coefficients used for vehicle calculations.  <a href="classvehicle.html#a8997e3518316057cde55f9ecb444b8f0">More...</a><br /></td></tr>
<tr class="separator:a8997e3518316057cde55f9ecb444b8f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc7fb8b935b2f6f3d26efaf0fae16230"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#acc7fb8b935b2f6f3d26efaf0fae16230">coeff_rolling_drag</a> () const</td></tr>
<tr class="memdesc:acc7fb8b935b2f6f3d26efaf0fae16230"><td class="mdescLeft">&#160;</td><td class="mdescRight">coefficient of rolling resistance multiplied by velocity to get the variable part of rolling resistance drag in N multiplied by a constant to get the constant part of rolling resistance drag in N depends on wheel design, wheel number, and vehicle weight  <a href="classvehicle.html#acc7fb8b935b2f6f3d26efaf0fae16230">More...</a><br /></td></tr>
<tr class="separator:acc7fb8b935b2f6f3d26efaf0fae16230"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae97aeac27584b839105a68f12eb1f7a1"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ae97aeac27584b839105a68f12eb1f7a1">coeff_water_drag</a> () const</td></tr>
<tr class="memdesc:ae97aeac27584b839105a68f12eb1f7a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">coefficient of water drag in kg/m multiplied by the square of speed to calculate water drag force in N proportional to cross sectional area of the vehicle, times the density of water, times a dimensional constant based on the vehicle's shape  <a href="classvehicle.html#ae97aeac27584b839105a68f12eb1f7a1">More...</a><br /></td></tr>
<tr class="separator:ae97aeac27584b839105a68f12eb1f7a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a418620f2e2b16ad13145dc2731826fac"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a418620f2e2b16ad13145dc2731826fac">water_hull_height</a> () const</td></tr>
<tr class="memdesc:a418620f2e2b16ad13145dc2731826fac"><td class="mdescLeft">&#160;</td><td class="mdescRight">watertight hull height in meters measures distance from bottom of vehicle to the point where the vehicle will start taking on water  <a href="classvehicle.html#a418620f2e2b16ad13145dc2731826fac">More...</a><br /></td></tr>
<tr class="separator:a418620f2e2b16ad13145dc2731826fac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab66cf9a81dbebec6dbf6fbcfd1ae5cb9"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ab66cf9a81dbebec6dbf6fbcfd1ae5cb9">water_draft</a> () const</td></tr>
<tr class="memdesc:ab66cf9a81dbebec6dbf6fbcfd1ae5cb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">water draft in meters - how much of the vehicle's body is under water must be less than the hull height or the boat will sink at some point, also add boats with deep draft running around  <a href="classvehicle.html#ab66cf9a81dbebec6dbf6fbcfd1ae5cb9">More...</a><br /></td></tr>
<tr class="separator:ab66cf9a81dbebec6dbf6fbcfd1ae5cb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac460f925a21efb9dea1dc0fc2f930609"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ac460f925a21efb9dea1dc0fc2f930609">can_float</a> () const</td></tr>
<tr class="memdesc:ac460f925a21efb9dea1dc0fc2f930609"><td class="mdescLeft">&#160;</td><td class="mdescRight">can_float does the vehicle have freeboard or does it overflow with water?  <a href="classvehicle.html#ac460f925a21efb9dea1dc0fc2f930609">More...</a><br /></td></tr>
<tr class="separator:ac460f925a21efb9dea1dc0fc2f930609"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80d02aa674786172d2d8a7ec8f39a4b3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a80d02aa674786172d2d8a7ec8f39a4b3">is_in_water</a> (bool deep_water=false) const</td></tr>
<tr class="memdesc:a80d02aa674786172d2d8a7ec8f39a4b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">is the vehicle mostly in water or mostly on fairly dry land?  <a href="classvehicle.html#a80d02aa674786172d2d8a7ec8f39a4b3">More...</a><br /></td></tr>
<tr class="separator:a80d02aa674786172d2d8a7ec8f39a4b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ede4cc2a97a8305b1f06817d0d6cdf8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a0ede4cc2a97a8305b1f06817d0d6cdf8">is_watercraft</a> () const</td></tr>
<tr class="separator:a0ede4cc2a97a8305b1f06817d0d6cdf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a292961ab33a42bf495d19b8692f6f105"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a292961ab33a42bf495d19b8692f6f105">is_rotorcraft</a> () const</td></tr>
<tr class="memdesc:a292961ab33a42bf495d19b8692f6f105"><td class="mdescLeft">&#160;</td><td class="mdescRight">is the vehicle flying? is it a rotorcraft?  <a href="classvehicle.html#a292961ab33a42bf495d19b8692f6f105">More...</a><br /></td></tr>
<tr class="separator:a292961ab33a42bf495d19b8692f6f105"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05d21beabf48728a05a9c202dd3972ee"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a05d21beabf48728a05a9c202dd3972ee">total_rotor_area</a> () const</td></tr>
<tr class="memdesc:a05d21beabf48728a05a9c202dd3972ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">total area of every rotors in m^2  <a href="classvehicle.html#a05d21beabf48728a05a9c202dd3972ee">More...</a><br /></td></tr>
<tr class="separator:a05d21beabf48728a05a9c202dd3972ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af531084b2df70f7d6458cb7c3093bbcf"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af531084b2df70f7d6458cb7c3093bbcf">lift_thrust_of_rotorcraft</a> (bool fuelled, bool safe=false) const</td></tr>
<tr class="separator:af531084b2df70f7d6458cb7c3093bbcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae080ba753c5c752d846ec95df31d4bdd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ae080ba753c5c752d846ec95df31d4bdd">has_sufficient_rotorlift</a> () const</td></tr>
<tr class="separator:ae080ba753c5c752d846ec95df31d4bdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97363e7e97605021a562f60187205e11"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a97363e7e97605021a562f60187205e11">get_z_change</a> () const</td></tr>
<tr class="separator:a97363e7e97605021a562f60187205e11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ac15340cefeea4793448cdb34784011"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a6ac15340cefeea4793448cdb34784011">is_flying_in_air</a> () const</td></tr>
<tr class="separator:a6ac15340cefeea4793448cdb34784011"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad99135d6b3b85ed2fac910cbfd4714c3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ad99135d6b3b85ed2fac910cbfd4714c3">set_flying</a> (bool new_flying_value)</td></tr>
<tr class="separator:ad99135d6b3b85ed2fac910cbfd4714c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d41a3f9a7969c40ca5a9b7b5a3fdebe"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a9d41a3f9a7969c40ca5a9b7b5a3fdebe">k_traction</a> (float wheel_traction_area) const</td></tr>
<tr class="memdesc:a9d41a3f9a7969c40ca5a9b7b5a3fdebe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Traction coefficient of the vehicle.  <a href="classvehicle.html#a9d41a3f9a7969c40ca5a9b7b5a3fdebe">More...</a><br /></td></tr>
<tr class="separator:a9d41a3f9a7969c40ca5a9b7b5a3fdebe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07afedd1263adc69d4ddf5967b18d1c9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a07afedd1263adc69d4ddf5967b18d1c9">static_drag</a> (bool actual=true) const</td></tr>
<tr class="separator:a07afedd1263adc69d4ddf5967b18d1c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac49843abe67be6f7f9c3fdaf92e2f411"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ac49843abe67be6f7f9c3fdaf92e2f411">strain</a> () const</td></tr>
<tr class="separator:ac49843abe67be6f7f9c3fdaf92e2f411"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e6f3f24ce6c6431dcc4b915d3a437ef"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a3e6f3f24ce6c6431dcc4b915d3a437ef">sufficient_wheel_config</a> () const</td></tr>
<tr class="separator:a3e6f3f24ce6c6431dcc4b915d3a437ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada20634b6f5df98a1bd03b2af7e08d60"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ada20634b6f5df98a1bd03b2af7e08d60">balanced_wheel_config</a> () const</td></tr>
<tr class="separator:ada20634b6f5df98a1bd03b2af7e08d60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a578c681656be6b419c62799006008035"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a578c681656be6b419c62799006008035">valid_wheel_config</a> () const</td></tr>
<tr class="separator:a578c681656be6b419c62799006008035"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec2fcbe01499d105316d14c8b99107a2"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aec2fcbe01499d105316d14c8b99107a2">steering_effectiveness</a> () const</td></tr>
<tr class="separator:aec2fcbe01499d105316d14c8b99107a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedeb37c9ce1c25bd8b9765e91ef6e502"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aedeb37c9ce1c25bd8b9765e91ef6e502">handling_difficulty</a> () const</td></tr>
<tr class="memdesc:aedeb37c9ce1c25bd8b9765e91ef6e502"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns roughly driving skill level at which there is no chance of fumbling.  <a href="classvehicle.html#aedeb37c9ce1c25bd8b9765e91ef6e502">More...</a><br /></td></tr>
<tr class="separator:aedeb37c9ce1c25bd8b9765e91ef6e502"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa99cb04cc85e3bd40d2e93197194284c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aa99cb04cc85e3bd40d2e93197194284c">idle</a> (bool on_map=true)</td></tr>
<tr class="separator:aa99cb04cc85e3bd40d2e93197194284c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0eb12133195f158fb7f903572e4afcc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aa0eb12133195f158fb7f903572e4afcc">alarm</a> ()</td></tr>
<tr class="separator:aa0eb12133195f158fb7f903572e4afcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60ddd6b046628f4a437779ee21735937"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a60ddd6b046628f4a437779ee21735937">slow_leak</a> ()</td></tr>
<tr class="separator:a60ddd6b046628f4a437779ee21735937"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b298dcb96f6d82ac696f38d9a89868b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a0b298dcb96f6d82ac696f38d9a89868b">thrust</a> (int thd, int z=0)</td></tr>
<tr class="separator:a0b298dcb96f6d82ac696f38d9a89868b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09364942b91a344a94af82fad1702918"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a09364942b91a344a94af82fad1702918">slowdown</a> (int <a class="el" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a>) const</td></tr>
<tr class="separator:a09364942b91a344a94af82fad1702918"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a819beb6aab98cb4b90478b65a35a07ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a819beb6aab98cb4b90478b65a35a07ac">possibly_recover_from_skid</a> ()</td></tr>
<tr class="separator:a819beb6aab98cb4b90478b65a35a07ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e7305881802ea38e07925826da63b82"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a8e7305881802ea38e07925826da63b82">forward_velocity</a> () const</td></tr>
<tr class="separator:a8e7305881802ea38e07925826da63b82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9e0d3482a62d5ac5ec8e5fc83cfaa4a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ac9e0d3482a62d5ac5ec8e5fc83cfaa4a">cruise_thrust</a> (int amount)</td></tr>
<tr class="separator:ac9e0d3482a62d5ac5ec8e5fc83cfaa4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1380ff85985897f9f8a34eba538e04db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a1380ff85985897f9f8a34eba538e04db">turn</a> (<a class="el" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">units::angle</a> deg)</td></tr>
<tr class="separator:a1380ff85985897f9f8a34eba538e04db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa17bd1dea0b5376e3d118ede063736f8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aa17bd1dea0b5376e3d118ede063736f8">collision</a> (std::vector&lt; <a class="el" href="structveh__collision.html">veh_collision</a> &gt; &amp;colls, const <a class="el" href="structtripoint.html">tripoint</a> &amp;dp, bool just_detect, bool bash_floor=false)</td></tr>
<tr class="separator:aa17bd1dea0b5376e3d118ede063736f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4a8bd9a6ff5fb9a0169296a776c1e98"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structveh__collision.html">veh_collision</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ae4a8bd9a6ff5fb9a0169296a776c1e98">part_collision</a> (int <a class="el" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, const <a class="el" href="structtripoint.html">tripoint</a> &amp;p, bool just_detect, bool bash_floor)</td></tr>
<tr class="separator:ae4a8bd9a6ff5fb9a0169296a776c1e98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4630e42613cfd4129edd33828c10dc4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ae4630e42613cfd4129edd33828c10dc4">handle_trap</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;p, int <a class="el" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>)</td></tr>
<tr class="separator:ae4630e42613cfd4129edd33828c10dc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e5ef7a7ef85f65f6f159d29f5fc11c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a3e5ef7a7ef85f65f6f159d29f5fc11c8">activate_magical_follow</a> ()</td></tr>
<tr class="separator:a3e5ef7a7ef85f65f6f159d29f5fc11c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af43257f1119ebd767a92ed574685cb60"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af43257f1119ebd767a92ed574685cb60">activate_animal_follow</a> ()</td></tr>
<tr class="separator:af43257f1119ebd767a92ed574685cb60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8a5271d6aeae28a1bd341800cc5254d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ac8a5271d6aeae28a1bd341800cc5254d">selfdrive</a> (const <a class="el" href="structpoint.html">point</a> &amp;)</td></tr>
<tr class="memdesc:ac8a5271d6aeae28a1bd341800cc5254d"><td class="mdescLeft">&#160;</td><td class="mdescRight">vehicle is driving itself  <a href="classvehicle.html#ac8a5271d6aeae28a1bd341800cc5254d">More...</a><br /></td></tr>
<tr class="separator:ac8a5271d6aeae28a1bd341800cc5254d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2451db6447a956b203210ffaa654a59c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a2451db6447a956b203210ffaa654a59c">check_heli_descend</a> (<a class="el" href="classplayer.html">player</a> &amp;p)</td></tr>
<tr class="memdesc:a2451db6447a956b203210ffaa654a59c"><td class="mdescLeft">&#160;</td><td class="mdescRight">can the helicopter descend/ascend here?  <a href="classvehicle.html#a2451db6447a956b203210ffaa654a59c">More...</a><br /></td></tr>
<tr class="separator:a2451db6447a956b203210ffaa654a59c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d3113700f4a8faafbdf34a46278687b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a7d3113700f4a8faafbdf34a46278687b">check_heli_ascend</a> (<a class="el" href="classplayer.html">player</a> &amp;p)</td></tr>
<tr class="separator:a7d3113700f4a8faafbdf34a46278687b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58757e10821fc870895d84ebc4ac36a7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a58757e10821fc870895d84ebc4ac36a7">check_is_heli_landed</a> ()</td></tr>
<tr class="separator:a58757e10821fc870895d84ebc4ac36a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ee4e09fef222f0db06421381be4a354"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a8ee4e09fef222f0db06421381be4a354">pldrive</a> (<a class="el" href="classCharacter.html">Character</a> &amp;driver, const <a class="el" href="structpoint.html">point</a> &amp;p, int z=0)</td></tr>
<tr class="memdesc:a8ee4e09fef222f0db06421381be4a354"><td class="mdescLeft">&#160;</td><td class="mdescRight">Player is driving the vehicle.  <a href="classvehicle.html#a8ee4e09fef222f0db06421381be4a354">More...</a><br /></td></tr>
<tr class="separator:a8ee4e09fef222f0db06421381be4a354"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a197b7a92e0fe24d69d2b3368df720059"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceunits.html#a5d16607c866588620acb381e7dbbf0a6">units::volume</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a197b7a92e0fe24d69d2b3368df720059">max_volume</a> (int <a class="el" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>) const</td></tr>
<tr class="separator:a197b7a92e0fe24d69d2b3368df720059"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2d0a1cc3c320adad08d7034f4f18683"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceunits.html#a5d16607c866588620acb381e7dbbf0a6">units::volume</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ad2d0a1cc3c320adad08d7034f4f18683">free_volume</a> (int <a class="el" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>) const</td></tr>
<tr class="separator:ad2d0a1cc3c320adad08d7034f4f18683"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47f721a94d09f4161b41c3e85fadf6a5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceunits.html#a5d16607c866588620acb381e7dbbf0a6">units::volume</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a47f721a94d09f4161b41c3e85fadf6a5">stored_volume</a> (int <a class="el" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>) const</td></tr>
<tr class="separator:a47f721a94d09f4161b41c3e85fadf6a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf67680c34af48b743af08f5f18b2748"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#acf67680c34af48b743af08f5f18b2748">make_active</a> (<a class="el" href="classitem__location.html">item_location</a> &amp;loc)</td></tr>
<tr class="memdesc:acf67680c34af48b743af08f5f18b2748"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update an item's active status, for example when adding hot or perishable liquid to a container.  <a href="classvehicle.html#acf67680c34af48b743af08f5f18b2748">More...</a><br /></td></tr>
<tr class="separator:acf67680c34af48b743af08f5f18b2748"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04426c7f3acf2455684972f092352cb0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcata_1_1optional.html">cata::optional</a>&lt; <a class="el" href="classitem__stack.html#a711217cbaded7f3f13b4b54f9ef617af">vehicle_stack::iterator</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a04426c7f3acf2455684972f092352cb0">add_item</a> (int <a class="el" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, const <a class="el" href="classitem.html">item</a> &amp;itm)</td></tr>
<tr class="memdesc:a04426c7f3acf2455684972f092352cb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to add an item to part's cargo.  <a href="classvehicle.html#a04426c7f3acf2455684972f092352cb0">More...</a><br /></td></tr>
<tr class="separator:a04426c7f3acf2455684972f092352cb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1a78ddd260a113c2a46b2dd83dcf960"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcata_1_1optional.html">cata::optional</a>&lt; <a class="el" href="classitem__stack.html#a711217cbaded7f3f13b4b54f9ef617af">vehicle_stack::iterator</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ae1a78ddd260a113c2a46b2dd83dcf960">add_item</a> (<a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;pt, const <a class="el" href="classitem.html">item</a> &amp;obj)</td></tr>
<tr class="memdesc:ae1a78ddd260a113c2a46b2dd83dcf960"><td class="mdescLeft">&#160;</td><td class="mdescRight">Like the above.  <a href="classvehicle.html#ae1a78ddd260a113c2a46b2dd83dcf960">More...</a><br /></td></tr>
<tr class="separator:ae1a78ddd260a113c2a46b2dd83dcf960"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c87e616f3d0e1bd86165a9ef3bcd48a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a2c87e616f3d0e1bd86165a9ef3bcd48a">add_charges</a> (int <a class="el" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, const <a class="el" href="classitem.html">item</a> &amp;itm)</td></tr>
<tr class="memdesc:a2c87e616f3d0e1bd86165a9ef3bcd48a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add an item counted by charges to the part's cargo.  <a href="classvehicle.html#a2c87e616f3d0e1bd86165a9ef3bcd48a">More...</a><br /></td></tr>
<tr class="separator:a2c87e616f3d0e1bd86165a9ef3bcd48a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5469b7e71a5e31095c9856cb1282566b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a5469b7e71a5e31095c9856cb1282566b">remove_item</a> (int <a class="el" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, <a class="el" href="classitem.html">item</a> *it)</td></tr>
<tr class="separator:a5469b7e71a5e31095c9856cb1282566b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a952b8f84407547e8cf4d4508f7f9e5fd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classitem__stack.html#a711217cbaded7f3f13b4b54f9ef617af">vehicle_stack::iterator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a952b8f84407547e8cf4d4508f7f9e5fd">remove_item</a> (int <a class="el" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, <a class="el" href="classitem__stack.html#a4fc307204e23390ef6790b99439d4475">vehicle_stack::const_iterator</a> it)</td></tr>
<tr class="separator:a952b8f84407547e8cf4d4508f7f9e5fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a983dd9db3cd64078b176a82289e0b260"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classvehicle__stack.html">vehicle_stack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a983dd9db3cd64078b176a82289e0b260">get_items</a> (int <a class="el" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>) const</td></tr>
<tr class="separator:a983dd9db3cd64078b176a82289e0b260"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6247bd2a7ca94ef2528e50397281c30"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classvehicle__stack.html">vehicle_stack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ab6247bd2a7ca94ef2528e50397281c30">get_items</a> (int <a class="el" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>)</td></tr>
<tr class="separator:ab6247bd2a7ca94ef2528e50397281c30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1b0ab1a9d635577ecd14b02efe5655a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af1b0ab1a9d635577ecd14b02efe5655a">dump_items_from_part</a> (size_t index)</td></tr>
<tr class="separator:af1b0ab1a9d635577ecd14b02efe5655a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af09f95d87a91c86857993b6c105300ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af09f95d87a91c86857993b6c105300ac">place_spawn_items</a> ()</td></tr>
<tr class="separator:af09f95d87a91c86857993b6c105300ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2ece6ea045b084d7296473e67022325"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ad2ece6ea045b084d7296473e67022325">gain_moves</a> ()</td></tr>
<tr class="separator:ad2ece6ea045b084d7296473e67022325"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeeecc873ea4841652366d8ffc6c3bfe"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#abeeecc873ea4841652366d8ffc6c3bfe">decrement_summon_timer</a> ()</td></tr>
<tr class="separator:abeeecc873ea4841652366d8ffc6c3bfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3ca604dd9cd1907f37c8a888934a1d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ab3ca604dd9cd1907f37c8a888934a1d3">stop</a> (bool update_cache=true)</td></tr>
<tr class="separator:ab3ca604dd9cd1907f37c8a888934a1d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8610ffeac8223a463ed316e3c3134662"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a8610ffeac8223a463ed316e3c3134662">refresh_insides</a> ()</td></tr>
<tr class="separator:a8610ffeac8223a463ed316e3c3134662"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a222ab75111163098b53f34a28e017dad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a222ab75111163098b53f34a28e017dad">unboard_all</a> ()</td></tr>
<tr class="separator:a222ab75111163098b53f34a28e017dad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d539c327a7a8cb987d637f68f918cdf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a7d539c327a7a8cb987d637f68f918cdf">damage</a> (int p, int dmg, <a class="el" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7a">damage_type</a> <a class="el" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a>=<a class="el" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa5f8b46c6c239266403858fa2ae90ef23">DT_BASH</a>, bool aimed=true)</td></tr>
<tr class="separator:a7d539c327a7a8cb987d637f68f918cdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a052137ecb2a3cef5438679ca2ca8b666"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a052137ecb2a3cef5438679ca2ca8b666">damage_all</a> (int dmg1, int dmg2, <a class="el" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7a">damage_type</a> <a class="el" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a>, const <a class="el" href="structpoint.html">point</a> &amp;impact)</td></tr>
<tr class="separator:a052137ecb2a3cef5438679ca2ca8b666"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16b3772f72faa9f18472a45664b36463"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a16b3772f72faa9f18472a45664b36463">shift_parts</a> (const <a class="el" href="structpoint.html">point</a> &amp;delta)</td></tr>
<tr class="memdesc:a16b3772f72faa9f18472a45664b36463"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shifts all parts of the vehicle by the given amounts, and then shifts the vehicle itself in the opposite direction.  <a href="classvehicle.html#a16b3772f72faa9f18472a45664b36463">More...</a><br /></td></tr>
<tr class="separator:a16b3772f72faa9f18472a45664b36463"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3cd05d2cba38784e106793c3ca13147"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af3cd05d2cba38784e106793c3ca13147">shift_if_needed</a> ()</td></tr>
<tr class="memdesc:af3cd05d2cba38784e106793c3ca13147"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detect if the vehicle is currently missing a 0,0 part, and adjust if necessary.  <a href="classvehicle.html#af3cd05d2cba38784e106793c3ca13147">More...</a><br /></td></tr>
<tr class="separator:af3cd05d2cba38784e106793c3ca13147"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a853f20e405b2934d63fcb43b052f8461"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a853f20e405b2934d63fcb43b052f8461">shed_loose_parts</a> ()</td></tr>
<tr class="separator:a853f20e405b2934d63fcb43b052f8461"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a1b64eabc86039e338bf054c96f5a26ff"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classvehicle__part__with__feature__range.html">vehicle_part_with_feature_range</a>&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">get_avail_parts</a> (std::string <a class="el" href="editmap_8cpp.html#a14e7362458bb23f8c57511c0d71d3c22">feature</a>) const</td></tr>
<tr class="memdesc:a1b64eabc86039e338bf054c96f5a26ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Yields a range of parts of this vehicle that each have the given feature and are available: not broken, removed, or part of a carried vehicle.  <a href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">More...</a><br /></td></tr>
<tr class="separator:a1b64eabc86039e338bf054c96f5a26ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92e221d5173d88af6ac2097fa7f81c10"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classvehicle__part__with__feature__range.html">vehicle_part_with_feature_range</a>&lt; <a class="el" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307e">vpart_bitflags</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a92e221d5173d88af6ac2097fa7f81c10">get_avail_parts</a> (<a class="el" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307e">vpart_bitflags</a> f) const</td></tr>
<tr class="separator:a92e221d5173d88af6ac2097fa7f81c10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a7465f91fe80f1cf5df317d2ccebeaae7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classvehicle__part__with__feature__range.html">vehicle_part_with_feature_range</a>&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a7465f91fe80f1cf5df317d2ccebeaae7">get_parts_including_carried</a> (std::string <a class="el" href="editmap_8cpp.html#a14e7362458bb23f8c57511c0d71d3c22">feature</a>) const</td></tr>
<tr class="memdesc:a7465f91fe80f1cf5df317d2ccebeaae7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Yields a range of parts of this vehicle that each have the given feature and are not broken or removed.  <a href="classvehicle.html#a7465f91fe80f1cf5df317d2ccebeaae7">More...</a><br /></td></tr>
<tr class="separator:a7465f91fe80f1cf5df317d2ccebeaae7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c3e2d419018f6ca5cf6a2b17fc8fb98"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classvehicle__part__with__feature__range.html">vehicle_part_with_feature_range</a>&lt; <a class="el" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307e">vpart_bitflags</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a1c3e2d419018f6ca5cf6a2b17fc8fb98">get_parts_including_carried</a> (<a class="el" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307e">vpart_bitflags</a> f) const</td></tr>
<tr class="separator:a1c3e2d419018f6ca5cf6a2b17fc8fb98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:adfbc0794c9bb9a5f1d75e1c52a2e561a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classvehicle__part__with__feature__range.html">vehicle_part_with_feature_range</a>&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#adfbc0794c9bb9a5f1d75e1c52a2e561a">get_any_parts</a> (std::string <a class="el" href="editmap_8cpp.html#a14e7362458bb23f8c57511c0d71d3c22">feature</a>) const</td></tr>
<tr class="memdesc:adfbc0794c9bb9a5f1d75e1c52a2e561a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Yields a range of parts of this vehicle that each have the given feature and not removed.  <a href="classvehicle.html#adfbc0794c9bb9a5f1d75e1c52a2e561a">More...</a><br /></td></tr>
<tr class="separator:adfbc0794c9bb9a5f1d75e1c52a2e561a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac36da718dfd43c629c5be476af1fcaae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classvehicle__part__with__feature__range.html">vehicle_part_with_feature_range</a>&lt; <a class="el" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307e">vpart_bitflags</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ac36da718dfd43c629c5be476af1fcaae">get_any_parts</a> (<a class="el" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307e">vpart_bitflags</a> f) const</td></tr>
<tr class="separator:ac36da718dfd43c629c5be476af1fcaae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a791413b7697a0ef434df0fe73d85b9fe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classvehicle__part__with__feature__range.html">vehicle_part_with_feature_range</a>&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a791413b7697a0ef434df0fe73d85b9fe">get_enabled_parts</a> (std::string <a class="el" href="editmap_8cpp.html#a14e7362458bb23f8c57511c0d71d3c22">feature</a>) const</td></tr>
<tr class="memdesc:a791413b7697a0ef434df0fe73d85b9fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Yields a range of parts of this vehicle that each have the given feature and are enabled and available: not broken, removed, or part of a carried vehicle.  <a href="classvehicle.html#a791413b7697a0ef434df0fe73d85b9fe">More...</a><br /></td></tr>
<tr class="separator:a791413b7697a0ef434df0fe73d85b9fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add733f278420b147ef4802deca9a66a3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classvehicle__part__with__feature__range.html">vehicle_part_with_feature_range</a>&lt; <a class="el" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307e">vpart_bitflags</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#add733f278420b147ef4802deca9a66a3">get_enabled_parts</a> (<a class="el" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307e">vpart_bitflags</a> f) const</td></tr>
<tr class="separator:add733f278420b147ef4802deca9a66a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a9f7d91110eca49a43877317c08a99bf9"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classvehicle.html">vehicle</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a9f7d91110eca49a43877317c08a99bf9">find_vehicle</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;where)</td></tr>
<tr class="memdesc:a9f7d91110eca49a43877317c08a99bf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find a possibly off-map vehicle.  <a href="classvehicle.html#a9f7d91110eca49a43877317c08a99bf9">More...</a><br /></td></tr>
<tr class="separator:a9f7d91110eca49a43877317c08a99bf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59e1530025754fa2879e9530ba022e85"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classvehicle.html">vehicle</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a59e1530025754fa2879e9530ba022e85">find_vehicle</a> (const <a class="el" href="coordinates_8h.html#a25195af12949fae51d496c1fbd549871">tripoint_abs_ms</a> &amp;where)</td></tr>
<tr class="separator:a59e1530025754fa2879e9530ba022e85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e9cbe7f2f60c477981d2a67e079d640"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a3e9cbe7f2f60c477981d2a67e079d640">enumerate_vehicles</a> (std::map&lt; <a class="el" href="classvehicle.html">vehicle</a> *, bool &gt; &amp;connected_vehicles, const std::set&lt; <a class="el" href="classvehicle.html">vehicle</a> * &gt; &amp;vehicle_list)</td></tr>
<tr class="memdesc:a3e9cbe7f2f60c477981d2a67e079d640"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use grid traversal to enumerate all connected vehicles.  <a href="classvehicle.html#a3e9cbe7f2f60c477981d2a67e079d640">More...</a><br /></td></tr>
<tr class="separator:a3e9cbe7f2f60c477981d2a67e079d640"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a5ee50a8425f281ee825025aaf1ef2ba4"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="structpoint.html">point</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a5ee50a8425f281ee825025aaf1ef2ba4">collision_check_points</a></td></tr>
<tr class="separator:a5ee50a8425f281ee825025aaf1ef2ba4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a6afe452e4097f52337af003011c59568"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a6afe452e4097f52337af003011c59568">has_structural_part</a> (const <a class="el" href="structpoint.html">point</a> &amp;dp) const</td></tr>
<tr class="separator:a6afe452e4097f52337af003011c59568"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cf6ac345daa4073fb6e0629e2066d17"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a0cf6ac345daa4073fb6e0629e2066d17">is_structural_part_removed</a> () const</td></tr>
<tr class="memdesc:a0cf6ac345daa4073fb6e0629e2066d17"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether or not the vehicle has a structural part queued for removal,.  <a href="classvehicle.html#a0cf6ac345daa4073fb6e0629e2066d17">More...</a><br /></td></tr>
<tr class="separator:a0cf6ac345daa4073fb6e0629e2066d17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a190ccc33782a28e26089122eec15f767"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a190ccc33782a28e26089122eec15f767">open_or_close</a> (int part_index, bool opening)</td></tr>
<tr class="memdesc:a190ccc33782a28e26089122eec15f767"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens or closes an openable part at the specified index based on the @opening value passed.  <a href="classvehicle.html#a190ccc33782a28e26089122eec15f767">More...</a><br /></td></tr>
<tr class="separator:a190ccc33782a28e26089122eec15f767"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbada90fa3188ed391fcd80023f1148f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#afbada90fa3188ed391fcd80023f1148f">is_connected</a> (const <a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;to, const <a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;from, const <a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;excluded) const</td></tr>
<tr class="memdesc:afbada90fa3188ed391fcd80023f1148f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a breadth-first search from one part to another, to see if a path exists between the two without going through the excluded part.  <a href="classvehicle.html#afbada90fa3188ed391fcd80023f1148f">More...</a><br /></td></tr>
<tr class="separator:afbada90fa3188ed391fcd80023f1148f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a970b2eebbb27e574f2b09132e8b4be2b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a970b2eebbb27e574f2b09132e8b4be2b">add_missing_frames</a> ()</td></tr>
<tr class="memdesc:a970b2eebbb27e574f2b09132e8b4be2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks all parts to see if frames are missing (as they might be when loading from a game saved before the vehicle construction rules overhaul).  <a href="classvehicle.html#a970b2eebbb27e574f2b09132e8b4be2b">More...</a><br /></td></tr>
<tr class="separator:a970b2eebbb27e574f2b09132e8b4be2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f755028b23085cf45b0d3ea7c7c282b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a9f755028b23085cf45b0d3ea7c7c282b">add_steerable_wheels</a> ()</td></tr>
<tr class="separator:a9f755028b23085cf45b0d3ea7c7c282b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2de625db1619f042c4a3a69d0995a6a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ac2de625db1619f042c4a3a69d0995a6a">damage_direct</a> (int p, int dmg, <a class="el" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7a">damage_type</a> <a class="el" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a>=<a class="el" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa64ca6840e504bdf899795e9e112d9077">DT_TRUE</a>)</td></tr>
<tr class="separator:ac2de625db1619f042c4a3a69d0995a6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42edd61c5db016a1a5021bb9c3189e3a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a42edd61c5db016a1a5021bb9c3189e3a">break_off</a> (int p, int dmg)</td></tr>
<tr class="separator:a42edd61c5db016a1a5021bb9c3189e3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a91f98959c5283578641ff7684869d7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a0a91f98959c5283578641ff7684869d7">explode_fuel</a> (int p, <a class="el" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7a">damage_type</a> <a class="el" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a>)</td></tr>
<tr class="separator:a0a91f98959c5283578641ff7684869d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a726572f5d8dc1c0123bc0ea2357499d9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a726572f5d8dc1c0123bc0ea2357499d9">smash_security_system</a> ()</td></tr>
<tr class="separator:a726572f5d8dc1c0123bc0ea2357499d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5246baeafa78272d858f6cce466579e4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a5246baeafa78272d858f6cce466579e4">part_vpower_w</a> (int index, bool at_full_hp=false) const</td></tr>
<tr class="separator:a5246baeafa78272d858f6cce466579e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27cec1366be7bf296d9c483a40833120"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a27cec1366be7bf296d9c483a40833120">part_epower_w</a> (int index) const</td></tr>
<tr class="separator:a27cec1366be7bf296d9c483a40833120"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88de59eafc9488490ebdd42cff0e604f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a88de59eafc9488490ebdd42cff0e604f">power_to_energy_bat</a> (int power_w, const <a class="el" href="classtime__duration.html">time_duration</a> &amp;d) const</td></tr>
<tr class="separator:a88de59eafc9488490ebdd42cff0e604f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa2487e84144e8c6ea235748339e97a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a> ()</td></tr>
<tr class="memdesc:aaa2487e84144e8c6ea235748339e97a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Refreshes all caches and refinds all parts.  <a href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">More...</a><br /></td></tr>
<tr class="separator:aaa2487e84144e8c6ea235748339e97a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa47aa8d1a535f8fd42b96a377ef6b1ff"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aa47aa8d1a535f8fd42b96a377ef6b1ff">do_environmental_effects</a> ()</td></tr>
<tr class="separator:aa47aa8d1a535f8fd42b96a377ef6b1ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8beceeb67e5a0355b3737efa24638a15"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceunits.html#a5d16607c866588620acb381e7dbbf0a6">units::volume</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a8beceeb67e5a0355b3737efa24638a15">total_folded_volume</a> () const</td></tr>
<tr class="separator:a8beceeb67e5a0355b3737efa24638a15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f4d8d6d9e975a7f36f1c5baa1c891b3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a9f4d8d6d9e975a7f36f1c5baa1c891b3">print_fuel_indicator</a> (const <a class="el" href="classcatacurses_1_1window.html">catacurses::window</a> &amp;w, const <a class="el" href="structpoint.html">point</a> &amp;p, const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;fuel_type, bool verbose=false, bool desc=false)</td></tr>
<tr class="memdesc:a9f4d8d6d9e975a7f36f1c5baa1c891b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints a fuel gauge for a vehicle.  <a href="classvehicle.html#a9f4d8d6d9e975a7f36f1c5baa1c891b3">More...</a><br /></td></tr>
<tr class="separator:a9f4d8d6d9e975a7f36f1c5baa1c891b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeff19eb4a60947edcc744b747a3a26e1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aeff19eb4a60947edcc744b747a3a26e1">print_fuel_indicator</a> (const <a class="el" href="classcatacurses_1_1window.html">catacurses::window</a> &amp;w, const <a class="el" href="structpoint.html">point</a> &amp;p, const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;fuel_type, std::map&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, float &gt; fuel_usages, bool verbose=false, bool desc=false)</td></tr>
<tr class="separator:aeff19eb4a60947edcc744b747a3a26e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6faebde63c532754c7ca9875b9d1fef9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a6faebde63c532754c7ca9875b9d1fef9">engine_start_time</a> (int e) const</td></tr>
<tr class="separator:a6faebde63c532754c7ca9875b9d1fef9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8fcbea4632f523e20dfab4dc12b6c22"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ad8fcbea4632f523e20dfab4dc12b6c22">engine_cold_factor</a> (int e) const</td></tr>
<tr class="separator:ad8fcbea4632f523e20dfab4dc12b6c22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb959a78c449c54bcbd3bc2e834e9663"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#abb959a78c449c54bcbd3bc2e834e9663">refresh_pivot</a> () const</td></tr>
<tr class="separator:abb959a78c449c54bcbd3bc2e834e9663"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a15aa4c2578558dd2262029807deb71"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a3a15aa4c2578558dd2262029807deb71">refresh_mass</a> () const</td></tr>
<tr class="separator:a3a15aa4c2578558dd2262029807deb71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3bb85693d41273a49e87ab79cb61462"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af3bb85693d41273a49e87ab79cb61462">calc_mass_center</a> (bool precalc) const</td></tr>
<tr class="separator:af3bb85693d41273a49e87ab79cb61462"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9b05f9729dee1e8844c726eeb1a515d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ab9b05f9729dee1e8844c726eeb1a515d">leak_fuel</a> (<a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;pt)</td></tr>
<tr class="memdesc:ab9b05f9729dee1e8844c726eeb1a515d"><td class="mdescLeft">&#160;</td><td class="mdescRight">empty the contents of a tank, battery or turret spilling liquids randomly on the ground  <a href="classvehicle.html#ab9b05f9729dee1e8844c726eeb1a515d">More...</a><br /></td></tr>
<tr class="separator:ab9b05f9729dee1e8844c726eeb1a515d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb8f7d8485b736fe00f599bd9fe87d02"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classvehicle.html">vehicle</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#acb8f7d8485b736fe00f599bd9fe87d02">operator=</a> (const <a class="el" href="classvehicle.html">vehicle</a> &amp;)=default</td></tr>
<tr class="separator:acb8f7d8485b736fe00f599bd9fe87d02"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-methods" name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:ac0c3e6e0d42b9e091fef6a799fd56b7a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ac0c3e6e0d42b9e091fef6a799fd56b7a">vhp_to_watts</a> (int power)</td></tr>
<tr class="separator:ac0c3e6e0d42b9e091fef6a799fd56b7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Vehicle turrets</h2></td></tr>
<tr class="memitem:afb548b72a0c24d9f9c436f198040e052"><td class="memItemLeft" align="right" valign="top"><a class="el" href="clzones_8h.html#ab899db7b87cf958f079fe0f14793625b">faction_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#afb548b72a0c24d9f9c436f198040e052">owner</a> = <a class="el" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">faction_id::NULL_ID</a>()</td></tr>
<tr class="separator:afb548b72a0c24d9f9c436f198040e052"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e6255388e73823374ec4bc9097f87c3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="clzones_8h.html#ab899db7b87cf958f079fe0f14793625b">faction_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a0e6255388e73823374ec4bc9097f87c3">old_owner</a> = <a class="el" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">faction_id::NULL_ID</a>()</td></tr>
<tr class="separator:a0e6255388e73823374ec4bc9097f87c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4dee440f50b7e9a412faf4dab9796c0"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ab4dee440f50b7e9a412faf4dab9796c0">alternators</a></td></tr>
<tr class="separator:ab4dee440f50b7e9a412faf4dab9796c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31bcfe9c61adc2fe500315a59e1bb690"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a></td></tr>
<tr class="separator:a31bcfe9c61adc2fe500315a59e1bb690"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2423efb46e19d1801498f9ea0c06f576"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a2423efb46e19d1801498f9ea0c06f576">reactors</a></td></tr>
<tr class="separator:a2423efb46e19d1801498f9ea0c06f576"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59bb3a4e9aa26397203cce91d56ab2ec"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a59bb3a4e9aa26397203cce91d56ab2ec">solar_panels</a></td></tr>
<tr class="separator:a59bb3a4e9aa26397203cce91d56ab2ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa467e8fa404592fb7c704dfa50ac9141"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aa467e8fa404592fb7c704dfa50ac9141">wind_turbines</a></td></tr>
<tr class="separator:aa467e8fa404592fb7c704dfa50ac9141"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaebcdca0982ede955b6da03757db4e77"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aaebcdca0982ede955b6da03757db4e77">water_wheels</a></td></tr>
<tr class="separator:aaebcdca0982ede955b6da03757db4e77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29734343c62d80afa734f4d1bc1767c6"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a29734343c62d80afa734f4d1bc1767c6">sails</a></td></tr>
<tr class="separator:a29734343c62d80afa734f4d1bc1767c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64509695c74d33dbccf7a6d10e7fcbb0"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a64509695c74d33dbccf7a6d10e7fcbb0">funnels</a></td></tr>
<tr class="separator:a64509695c74d33dbccf7a6d10e7fcbb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5bbcf289b67336d6cd7de031517c1ea"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aa5bbcf289b67336d6cd7de031517c1ea">emitters</a></td></tr>
<tr class="separator:aa5bbcf289b67336d6cd7de031517c1ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd84ace26c98ea5025d6a7cbbfff66e1"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#afd84ace26c98ea5025d6a7cbbfff66e1">loose_parts</a></td></tr>
<tr class="separator:afd84ace26c98ea5025d6a7cbbfff66e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c432c0da0ff47a483e3aa74548bd435"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a5c432c0da0ff47a483e3aa74548bd435">wheelcache</a></td></tr>
<tr class="separator:a5c432c0da0ff47a483e3aa74548bd435"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8c51c573320aab5e499c239e78a285b"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aa8c51c573320aab5e499c239e78a285b">rotors</a></td></tr>
<tr class="separator:aa8c51c573320aab5e499c239e78a285b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a905db1f8c84d0754a8e0a121392a2b3a"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a905db1f8c84d0754a8e0a121392a2b3a">rail_wheelcache</a></td></tr>
<tr class="separator:a905db1f8c84d0754a8e0a121392a2b3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26f77298a01a76e95ed34888793700a4"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a26f77298a01a76e95ed34888793700a4">steering</a></td></tr>
<tr class="separator:a26f77298a01a76e95ed34888793700a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa33bd32301526128292da1ec7f78be55"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aa33bd32301526128292da1ec7f78be55">speciality</a></td></tr>
<tr class="separator:aa33bd32301526128292da1ec7f78be55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae94902df801fd06056734d05ea98aa0f"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ae94902df801fd06056734d05ea98aa0f">floating</a></td></tr>
<tr class="separator:ae94902df801fd06056734d05ea98aa0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae57bcc52818212097155515e82c3a84d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ae57bcc52818212097155515e82c3a84d">rail_profile</a></td></tr>
<tr class="memdesc:ae57bcc52818212097155515e82c3a84d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rail profile of the vehicle.  <a href="classvehicle.html#ae57bcc52818212097155515e82c3a84d">More...</a><br /></td></tr>
<tr class="separator:ae57bcc52818212097155515e82c3a84d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a441fa41f264fb7bc45df81d71244a0d1"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a></td></tr>
<tr class="separator:a441fa41f264fb7bc45df81d71244a0d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22b8b1fe66df7091af2eb16f62fb711b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="type__id_8h.html#a64efc8ab51816a59711440d464136eda">vproto_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a></td></tr>
<tr class="memdesc:a22b8b1fe66df7091af2eb16f62fb711b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of the vehicle as it was spawned.  <a href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">More...</a><br /></td></tr>
<tr class="separator:a22b8b1fe66df7091af2eb16f62fb711b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92654cefac764c60371c47e0b406a991"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="structpoint.html">point</a>, std::vector&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a92654cefac764c60371c47e0b406a991">relative_parts</a></td></tr>
<tr class="separator:a92654cefac764c60371c47e0b406a991"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c2d668e2b8f48a53f5c5e94aa2bd408"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="structlabel.html">label</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a7c2d668e2b8f48a53f5c5e94aa2bd408">labels</a></td></tr>
<tr class="separator:a7c2d668e2b8f48a53f5c5e94aa2bd408"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0383bc21c8d6b5a3689124f3d286a004"><td class="memItemLeft" align="right" valign="top">std::set&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a0383bc21c8d6b5a3689124f3d286a004">tags</a></td></tr>
<tr class="separator:a0383bc21c8d6b5a3689124f3d286a004"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a575c37830326826ac7421382652b2f5d"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, float &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a575c37830326826ac7421382652b2f5d">fuel_remainder</a></td></tr>
<tr class="separator:a575c37830326826ac7421382652b2f5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9047841099276d5de5a6771be72233a"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, float &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ad9047841099276d5de5a6771be72233a">fuel_used_last_turn</a></td></tr>
<tr class="separator:ad9047841099276d5de5a6771be72233a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90b6f438b5ae343dab2b131c64293584"><td class="memItemLeft" align="right" valign="top">std::unordered_multimap&lt; <a class="el" href="structpoint.html">point</a>, <a class="el" href="classzone__data.html">zone_data</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a90b6f438b5ae343dab2b131c64293584">loot_zones</a></td></tr>
<tr class="separator:a90b6f438b5ae343dab2b131c64293584"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7894d7d5b3a20fb16927cd95d4d2a04"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classactive__item__cache.html">active_item_cache</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ad7894d7d5b3a20fb16927cd95d4d2a04">active_items</a></td></tr>
<tr class="separator:ad7894d7d5b3a20fb16927cd95d4d2a04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a506fb7b0a17c1578498599e14c173710"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a506fb7b0a17c1578498599e14c173710">magic</a> = false</td></tr>
<tr class="separator:a506fb7b0a17c1578498599e14c173710"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a975683a2a22bccef9e5e02f80661cf03"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcata_1_1optional.html">cata::optional</a>&lt; <a class="el" href="classtime__duration.html">time_duration</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a975683a2a22bccef9e5e02f80661cf03">summon_time_limit</a> = <a class="el" href="namespacecata.html#ad05314667ac5d05f984aeeef26b9a87f">cata::nullopt</a></td></tr>
<tr class="separator:a975683a2a22bccef9e5e02f80661cf03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2aaa937610c71ab4b8ff3ffdfa4902d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ab2aaa937610c71ab4b8ff3ffdfa4902d">removed_part_count</a> = 0</td></tr>
<tr class="separator:ab2aaa937610c71ab4b8ff3ffdfa4902d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34630935e46860003c616e0522316f02"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtripoint.html">tripoint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a34630935e46860003c616e0522316f02">sm_pos</a></td></tr>
<tr class="memdesc:a34630935e46860003c616e0522316f02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Submap coordinates of the currently loaded submap (see <a class="el" href="classgame.html#ab6a1689fcb99f28cb9bee5b831a21450">game::m</a>) that contains this vehicle.  <a href="classvehicle.html#a34630935e46860003c616e0522316f02">More...</a><br /></td></tr>
<tr class="separator:a34630935e46860003c616e0522316f02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6df763082e71eb21a793372711c907fa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a6df763082e71eb21a793372711c907fa">alternator_load</a> = 0</td></tr>
<tr class="separator:a6df763082e71eb21a793372711c907fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7769b4dac262f6ff8bd328eb1b8f022c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtime__point.html">time_point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a7769b4dac262f6ff8bd328eb1b8f022c">occupied_cache_time</a> = <a class="el" href="namespacecalendar.html#ae25f99fbff61e25df40b5b26bcedee8c">calendar::before_time_starts</a></td></tr>
<tr class="memdesc:a7769b4dac262f6ff8bd328eb1b8f022c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time occupied points were calculated.  <a href="classvehicle.html#a7769b4dac262f6ff8bd328eb1b8f022c">More...</a><br /></td></tr>
<tr class="separator:a7769b4dac262f6ff8bd328eb1b8f022c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a987b54408280dc6a74da8c857907faf2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtime__point.html">time_point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a987b54408280dc6a74da8c857907faf2">last_update</a> = <a class="el" href="namespacecalendar.html#ae25f99fbff61e25df40b5b26bcedee8c">calendar::before_time_starts</a></td></tr>
<tr class="separator:a987b54408280dc6a74da8c857907faf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12844862e123c12dc923ca390becf79e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpoint.html">point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a></td></tr>
<tr class="memdesc:a12844862e123c12dc923ca390becf79e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Position of the vehicle <em>inside</em> the submap that contains the vehicle.  <a href="classvehicle.html#a12844862e123c12dc923ca390becf79e">More...</a><br /></td></tr>
<tr class="separator:a12844862e123c12dc923ca390becf79e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d83e86fe57ec6126893a68f68c3c304"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> = 0</td></tr>
<tr class="separator:a4d83e86fe57ec6126893a68f68c3c304"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5c4cd455d31d1a9377ddad223cafe44"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> = 0</td></tr>
<tr class="separator:af5c4cd455d31d1a9377ddad223cafe44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a416a2bc9ee792663fced3344db322cb8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a416a2bc9ee792663fced3344db322cb8">vertical_velocity</a> = 0</td></tr>
<tr class="separator:a416a2bc9ee792663fced3344db322cb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abef886f9f8fbb643d84ef5c6ad86518d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#abef886f9f8fbb643d84ef5c6ad86518d">om_id</a> = -1</td></tr>
<tr class="separator:abef886f9f8fbb643d84ef5c6ad86518d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af366981a584e12d25133fb479d47de33"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">units::angle</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af366981a584e12d25133fb479d47de33">turn_dir</a> = 0_degrees</td></tr>
<tr class="separator:af366981a584e12d25133fb479d47de33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d4d97e9ca8cb2642001f8f61df500d5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">units::angle</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a3d4d97e9ca8cb2642001f8f61df500d5">last_turn</a> = 0_degrees</td></tr>
<tr class="separator:a3d4d97e9ca8cb2642001f8f61df500d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af757f49411232815e121faa825d415f7"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af757f49411232815e121faa825d415f7">of_turn</a> = 0.0f</td></tr>
<tr class="separator:af757f49411232815e121faa825d415f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d2d513640544cb11fa826890b692e5a"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a3d2d513640544cb11fa826890b692e5a">of_turn_carry</a> = 0.0f</td></tr>
<tr class="separator:a3d2d513640544cb11fa826890b692e5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd5333bdd6640697f0202b652621c6e2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#afd5333bdd6640697f0202b652621c6e2">extra_drag</a> = 0</td></tr>
<tr class="separator:afd5333bdd6640697f0202b652621c6e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10fc2ae6531f87ae9e7f304ec6ec811e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtime__point.html">time_point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a10fc2ae6531f87ae9e7f304ec6ec811e">last_fluid_check</a> = <a class="el" href="namespacecalendar.html#a2ad145a605c70358e73fdd4a802ba21a">calendar::turn_zero</a></td></tr>
<tr class="separator:a10fc2ae6531f87ae9e7f304ec6ec811e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a191233eeb95ac9e660d5da83dd247a73"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcata_1_1optional.html">cata::optional</a>&lt; <a class="el" href="classtime__point.html">time_point</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a191233eeb95ac9e660d5da83dd247a73">theft_time</a></td></tr>
<tr class="separator:a191233eeb95ac9e660d5da83dd247a73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a709da7b758c18d51b79311eea6eaca59"><td class="memItemLeft" align="right" valign="top">std::array&lt; <a class="el" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">units::angle</a>, 2 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a709da7b758c18d51b79311eea6eaca59">pivot_rotation</a> = { { 0_degrees, 0_degrees } }</td></tr>
<tr class="separator:a709da7b758c18d51b79311eea6eaca59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfae2101cfd7f4b68d64157d8d6e0a4a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpoint.html">point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#acfae2101cfd7f4b68d64157d8d6e0a4a">front_left</a></td></tr>
<tr class="separator:acfae2101cfd7f4b68d64157d8d6e0a4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94fa253f6f0ceedf40843bd249eca56e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpoint.html">point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a94fa253f6f0ceedf40843bd249eca56e">front_right</a></td></tr>
<tr class="separator:a94fa253f6f0ceedf40843bd249eca56e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72a3e7b7f00c193446b29adee5d5aa9f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtowing__data.html">towing_data</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a></td></tr>
<tr class="separator:a72a3e7b7f00c193446b29adee5d5aa9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd4e8e8471b17450205d827dee8a41a5"><td class="memItemLeft" align="right" valign="top">std::array&lt; <a class="el" href="structpoint.html">point</a>, 2 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#afd4e8e8471b17450205d827dee8a41a5">pivot_anchor</a></td></tr>
<tr class="separator:afd4e8e8471b17450205d827dee8a41a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e021d197980bbed36ff3c43962df957"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtileray.html">tileray</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">face</a></td></tr>
<tr class="separator:a8e021d197980bbed36ff3c43962df957"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bbdfb41ea75fdc007feab08e2137aa2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtileray.html">tileray</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a8bbdfb41ea75fdc007feab08e2137aa2">move</a></td></tr>
<tr class="separator:a8bbdfb41ea75fdc007feab08e2137aa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bbb34d03303f8e298a26ab614f35adc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a2bbb34d03303f8e298a26ab614f35adc">is_on_ramp</a> = false</td></tr>
<tr class="separator:a2bbb34d03303f8e298a26ab614f35adc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad95f42088a5fceef3fc215336649b4ee"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ad95f42088a5fceef3fc215336649b4ee">is_autodriving</a> = false</td></tr>
<tr class="separator:ad95f42088a5fceef3fc215336649b4ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26f98c384048e03538bca10e4f26905d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a26f98c384048e03538bca10e4f26905d">is_following</a> = false</td></tr>
<tr class="separator:a26f98c384048e03538bca10e4f26905d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a953fed1abe9bacc2a7c98cee6425c5b2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a953fed1abe9bacc2a7c98cee6425c5b2">is_patrolling</a> = false</td></tr>
<tr class="separator:a953fed1abe9bacc2a7c98cee6425c5b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdf6601268460dc437ef079590deb33b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#abdf6601268460dc437ef079590deb33b">cruise_on</a> = true</td></tr>
<tr class="separator:abdf6601268460dc437ef079590deb33b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ccf22f114d5d8f239ebe58f5c8f70ad"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> = false</td></tr>
<tr class="separator:a0ccf22f114d5d8f239ebe58f5c8f70ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe5f5ade599d2cd543a3e3c3860bc051"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#abe5f5ade599d2cd543a3e3c3860bc051">tracking_on</a> = false</td></tr>
<tr class="separator:abe5f5ade599d2cd543a3e3c3860bc051"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61be41a90435acf77c1c078c2966643b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a61be41a90435acf77c1c078c2966643b">is_locked</a> = false</td></tr>
<tr class="separator:a61be41a90435acf77c1c078c2966643b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a949775a37c7daa7a6b67e510f548bca3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a949775a37c7daa7a6b67e510f548bca3">is_alarm_on</a> = false</td></tr>
<tr class="separator:a949775a37c7daa7a6b67e510f548bca3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70a0f1b85b1b3eed228b92d7b70334b1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a70a0f1b85b1b3eed228b92d7b70334b1">camera_on</a> = false</td></tr>
<tr class="separator:a70a0f1b85b1b3eed228b92d7b70334b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0ffd12faf770950ee7d2493ffaf9bd0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ab0ffd12faf770950ee7d2493ffaf9bd0">autopilot_on</a> = false</td></tr>
<tr class="separator:ab0ffd12faf770950ee7d2493ffaf9bd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a320ca34b5c38568efd801731cef78a35"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a320ca34b5c38568efd801731cef78a35">skidding</a> = false</td></tr>
<tr class="separator:a320ca34b5c38568efd801731cef78a35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac82426b9ed349941fde4e5af18038735"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ac82426b9ed349941fde4e5af18038735">check_environmental_effects</a> = false</td></tr>
<tr class="separator:ac82426b9ed349941fde4e5af18038735"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42aa0af38e1a54ca47855c9231aa1457"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a42aa0af38e1a54ca47855c9231aa1457">insides_dirty</a> = true</td></tr>
<tr class="separator:a42aa0af38e1a54ca47855c9231aa1457"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeafb913ad9b9d1341d51a4c51ba43a06"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aeafb913ad9b9d1341d51a4c51ba43a06">is_falling</a> = false</td></tr>
<tr class="separator:aeafb913ad9b9d1341d51a4c51ba43a06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6c2314d1f5b83a04771abea3109a137"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af6c2314d1f5b83a04771abea3109a137">zones_dirty</a> = true</td></tr>
<tr class="separator:af6c2314d1f5b83a04771abea3109a137"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3281409ce9ec7e878f9e22427e815e5"><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ae3281409ce9ec7e878f9e22427e815e5">vehicle_noise</a> = 0</td></tr>
<tr class="separator:ae3281409ce9ec7e878f9e22427e815e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a226257689cf48986271ad0969ab1741c"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a226257689cf48986271ad0969ab1741c">coefficient_air_resistance</a> = 1</td></tr>
<tr class="separator:a226257689cf48986271ad0969ab1741c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ba73328e291117051f3a05b28dbd9c5"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a3ba73328e291117051f3a05b28dbd9c5">coefficient_rolling_resistance</a> = 1</td></tr>
<tr class="separator:a3ba73328e291117051f3a05b28dbd9c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace10be719ab1c8e5d86ff203a3298131"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ace10be719ab1c8e5d86ff203a3298131">coefficient_water_resistance</a> = 1</td></tr>
<tr class="separator:ace10be719ab1c8e5d86ff203a3298131"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a954d6ff52f6a111d01aa9700db89e941"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a954d6ff52f6a111d01aa9700db89e941">draft_m</a> = 1</td></tr>
<tr class="separator:a954d6ff52f6a111d01aa9700db89e941"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a1adee2a33275ecf3a31301a5ce88da"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a8a1adee2a33275ecf3a31301a5ce88da">hull_height</a> = 0.3</td></tr>
<tr class="separator:a8a1adee2a33275ecf3a31301a5ce88da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3b0c13142af91fa64a5db922af2669a"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af3b0c13142af91fa64a5db922af2669a">occupied_points</a></td></tr>
<tr class="separator:af3b0c13142af91fa64a5db922af2669a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afac2bfaf9d2b400e9a9e171624f74c40"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structvehicle__part.html">vehicle_part</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a></td></tr>
<tr class="separator:afac2bfaf9d2b400e9a9e171624f74c40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b083d16089ec28b00bfe19a53cf90d6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceunits.html#af4f3159f510e2b4372187d8fb4746e23">units::mass</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a4b083d16089ec28b00bfe19a53cf90d6">mass_cache</a></td></tr>
<tr class="separator:a4b083d16089ec28b00bfe19a53cf90d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d1b9a43a439a0ec56de30c9a8ccb328"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpoint.html">point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a6d1b9a43a439a0ec56de30c9a8ccb328">pivot_cache</a></td></tr>
<tr class="separator:a6d1b9a43a439a0ec56de30c9a8ccb328"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93c1c8baa5cd7ee79039fd5c7226b24e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpoint.html">point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a93c1c8baa5cd7ee79039fd5c7226b24e">mount_max</a></td></tr>
<tr class="separator:a93c1c8baa5cd7ee79039fd5c7226b24e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad62e7dec9def6c6fcc23f2d7b8e51963"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpoint.html">point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ad62e7dec9def6c6fcc23f2d7b8e51963">mount_min</a></td></tr>
<tr class="separator:ad62e7dec9def6c6fcc23f2d7b8e51963"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a55c996486f67a46b7978f13cd1d0e1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpoint.html">point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a1a55c996486f67a46b7978f13cd1d0e1">mass_center_precalc</a></td></tr>
<tr class="separator:a1a55c996486f67a46b7978f13cd1d0e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade9fbb951e5a6ab5e65708aeef3cb4e2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpoint.html">point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ade9fbb951e5a6ab5e65708aeef3cb4e2">mass_center_no_precalc</a></td></tr>
<tr class="separator:ade9fbb951e5a6ab5e65708aeef3cb4e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdbb2eec025972d86be23e90e9e92d22"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtripoint.html">tripoint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#acdbb2eec025972d86be23e90e9e92d22">autodrive_local_target</a> = <a class="el" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a></td></tr>
<tr class="separator:acdbb2eec025972d86be23e90e9e92d22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a81aa92070897147fbed2c61bad4825"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classvehicle_1_1autodrive__controller.html">autodrive_controller</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a5a81aa92070897147fbed2c61bad4825">active_autodrive_controller</a></td></tr>
<tr class="separator:a5a81aa92070897147fbed2c61bad4825"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a680decfc32d2eac704c5f3c890639821"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a680decfc32d2eac704c5f3c890639821">no_refresh</a> = false</td></tr>
<tr class="separator:a680decfc32d2eac704c5f3c890639821"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4618e6b69581e93ab96d66fc889659c5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a4618e6b69581e93ab96d66fc889659c5">pivot_dirty</a> = true</td></tr>
<tr class="separator:a4618e6b69581e93ab96d66fc889659c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9c7234d3c2f5f0c42cc57b0931d21a6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ac9c7234d3c2f5f0c42cc57b0931d21a6">mass_dirty</a> = true</td></tr>
<tr class="separator:ac9c7234d3c2f5f0c42cc57b0931d21a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a908223c2d250ba23fdbff51379cf2213"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a908223c2d250ba23fdbff51379cf2213">mass_center_precalc_dirty</a> = true</td></tr>
<tr class="separator:a908223c2d250ba23fdbff51379cf2213"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa84e5e990b66ac1cedeba291ddc6028"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#afa84e5e990b66ac1cedeba291ddc6028">mass_center_no_precalc_dirty</a> = true</td></tr>
<tr class="separator:afa84e5e990b66ac1cedeba291ddc6028"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57285bb3b5dfda9f926bd3f99e3e1bad"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a57285bb3b5dfda9f926bd3f99e3e1bad">coeff_rolling_dirty</a> = true</td></tr>
<tr class="separator:a57285bb3b5dfda9f926bd3f99e3e1bad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1e6fe4cf22c08ceb542a7a3d515268b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ac1e6fe4cf22c08ceb542a7a3d515268b">coeff_air_dirty</a> = true</td></tr>
<tr class="separator:ac1e6fe4cf22c08ceb542a7a3d515268b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bf02329db46b5a5dda2a0b35b8147fc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a3bf02329db46b5a5dda2a0b35b8147fc">coeff_water_dirty</a> = true</td></tr>
<tr class="separator:a3bf02329db46b5a5dda2a0b35b8147fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62e8354926b0f973a2a0ec1db3deb997"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a62e8354926b0f973a2a0ec1db3deb997">coeff_air_changed</a> = true</td></tr>
<tr class="separator:a62e8354926b0f973a2a0ec1db3deb997"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3cbbbb890aa9a12504ec3458746f3e1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ae3cbbbb890aa9a12504ec3458746f3e1">is_floating</a> = false</td></tr>
<tr class="separator:ae3cbbbb890aa9a12504ec3458746f3e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cfee06c49af306085cad6bbf3326319"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a3cfee06c49af306085cad6bbf3326319">in_water</a> = false</td></tr>
<tr class="separator:a3cfee06c49af306085cad6bbf3326319"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a35b7f917fdb08e70a78315cc968f86"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a0a35b7f917fdb08e70a78315cc968f86">is_flying</a> = false</td></tr>
<tr class="separator:a0a35b7f917fdb08e70a78315cc968f86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb404e5f18eee80d104a7bb0680ac169"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aeb404e5f18eee80d104a7bb0680ac169">requested_z_change</a> = 0</td></tr>
<tr class="separator:aeb404e5f18eee80d104a7bb0680ac169"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6db05ed4285c46744bff75c3e767009"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structvehicle__part.html">vehicle_part</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ac6db05ed4285c46744bff75c3e767009">find_all_ready_turrets</a> (bool manual, bool automatic)</td></tr>
<tr class="separator:ac6db05ed4285c46744bff75c3e767009"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39c9cf3772e36cf3587423cbd88ab442"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a39c9cf3772e36cf3587423cbd88ab442">turrets_aim</a> (std::vector&lt; <a class="el" href="structvehicle__part.html">vehicle_part</a> * &gt; &amp;<a class="el" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a>)</td></tr>
<tr class="separator:a39c9cf3772e36cf3587423cbd88ab442"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00ca4a4d048854071a831f6733161a22"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a00ca4a4d048854071a831f6733161a22">turrets_aim_and_fire</a> (std::vector&lt; <a class="el" href="structvehicle__part.html">vehicle_part</a> * &gt; &amp;<a class="el" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a>)</td></tr>
<tr class="separator:a00ca4a4d048854071a831f6733161a22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa21321fd8f1d85fbc252aad2c1156da"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classnpc.html">npc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#afa21321fd8f1d85fbc252aad2c1156da">get_targeting_npc</a> (const <a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;pt)</td></tr>
<tr class="separator:afa21321fd8f1d85fbc252aad2c1156da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10a4d598caa3405cac5ed2b77a5360cf"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structvehicle__part.html">vehicle_part</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a> ()</td></tr>
<tr class="memdesc:a10a4d598caa3405cac5ed2b77a5360cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get all vehicle turrets (excluding any that are destroyed)  <a href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">More...</a><br /></td></tr>
<tr class="separator:a10a4d598caa3405cac5ed2b77a5360cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f0fa1b1f866c77dc9c857cb2bfad1d5"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structvehicle__part.html">vehicle_part</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a8f0fa1b1f866c77dc9c857cb2bfad1d5">turrets</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;target)</td></tr>
<tr class="memdesc:a8f0fa1b1f866c77dc9c857cb2bfad1d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get all vehicle turrets loaded and ready to fire at target.  <a href="classvehicle.html#a8f0fa1b1f866c77dc9c857cb2bfad1d5">More...</a><br /></td></tr>
<tr class="separator:a8f0fa1b1f866c77dc9c857cb2bfad1d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accfab81af66cd979bdfff4c39e5a3a8e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classturret__data.html">turret_data</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#accfab81af66cd979bdfff4c39e5a3a8e">turret_query</a> (<a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;pt)</td></tr>
<tr class="memdesc:accfab81af66cd979bdfff4c39e5a3a8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get firing data for a turret.  <a href="classvehicle.html#accfab81af66cd979bdfff4c39e5a3a8e">More...</a><br /></td></tr>
<tr class="separator:accfab81af66cd979bdfff4c39e5a3a8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc77498516e3767f7a1e309e4302d40f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classturret__data.html">turret_data</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#abc77498516e3767f7a1e309e4302d40f">turret_query</a> (const <a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;pt) const</td></tr>
<tr class="separator:abc77498516e3767f7a1e309e4302d40f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab09a1e3aa362419ee575f17fd665de1d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classturret__data.html">turret_data</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ab09a1e3aa362419ee575f17fd665de1d">turret_query</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;<a class="el" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>)</td></tr>
<tr class="separator:ab09a1e3aa362419ee575f17fd665de1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e9f2af1c1de05a9bfa205c2f3695140"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classturret__data.html">turret_data</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a5e9f2af1c1de05a9bfa205c2f3695140">turret_query</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;<a class="el" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>) const</td></tr>
<tr class="separator:a5e9f2af1c1de05a9bfa205c2f3695140"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25395ffcb67e950d30682050f3147778"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a25395ffcb67e950d30682050f3147778">turrets_set_targeting</a> ()</td></tr>
<tr class="memdesc:a25395ffcb67e950d30682050f3147778"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set targeting mode for specific turrets.  <a href="classvehicle.html#a25395ffcb67e950d30682050f3147778">More...</a><br /></td></tr>
<tr class="separator:a25395ffcb67e950d30682050f3147778"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34acaf3108178e27a2530566749a17c2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a34acaf3108178e27a2530566749a17c2">turrets_set_mode</a> ()</td></tr>
<tr class="memdesc:a34acaf3108178e27a2530566749a17c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set firing mode for specific turrets.  <a href="classvehicle.html#a34acaf3108178e27a2530566749a17c2">More...</a><br /></td></tr>
<tr class="separator:a34acaf3108178e27a2530566749a17c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb1d7445bb1b9448594d50402103bc7c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#abb1d7445bb1b9448594d50402103bc7c">turrets_aim_and_fire_single</a> ()</td></tr>
<tr class="memdesc:abb1d7445bb1b9448594d50402103bc7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Select a single ready turret, aim it using the aiming UI and fire.  <a href="classvehicle.html#abb1d7445bb1b9448594d50402103bc7c">More...</a><br /></td></tr>
<tr class="separator:abb1d7445bb1b9448594d50402103bc7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee60cda2d8d84a6f1a912512fa523cba"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aee60cda2d8d84a6f1a912512fa523cba">turrets_aim_and_fire_all_manual</a> (bool show_msg=false)</td></tr>
<tr class="separator:aee60cda2d8d84a6f1a912512fa523cba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1de4016879048f712da9fa4ecd286a87"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a1de4016879048f712da9fa4ecd286a87">turrets_override_automatic_aim</a> ()</td></tr>
<tr class="memdesc:a1de4016879048f712da9fa4ecd286a87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set target for automatic turrets using the aiming UI.  <a href="classvehicle.html#a1de4016879048f712da9fa4ecd286a87">More...</a><br /></td></tr>
<tr class="separator:a1de4016879048f712da9fa4ecd286a87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30b8e7b1d09c18caa89f069d64d37205"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a30b8e7b1d09c18caa89f069d64d37205">automatic_fire_turret</a> (<a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;pt)</td></tr>
<tr class="separator:a30b8e7b1d09c18caa89f069d64d37205"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a559f0259028e51b88604564fb212cdc2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a559f0259028e51b88604564fb212cdc2">assign_seat</a> (<a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;pt, const <a class="el" href="classnpc.html">npc</a> &amp;who)</td></tr>
<tr class="memdesc:a559f0259028e51b88604564fb212cdc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to assign a crew member (who must be a player ally) to a specific seat.  <a href="classvehicle.html#a559f0259028e51b88604564fb212cdc2">More...</a><br /></td></tr>
<tr class="separator:a559f0259028e51b88604564fb212cdc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e80dafb2c03147b569688658843d9d6"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a2e80dafb2c03147b569688658843d9d6">get_points</a> (bool force_refresh=false)</td></tr>
<tr class="separator:a2e80dafb2c03147b569688658843d9d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d96053cfef6f4cb5db1b7c74c6da067"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">open</a> (int part_index)</td></tr>
<tr class="memdesc:a9d96053cfef6f4cb5db1b7c74c6da067"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens an openable part at the specified index.  <a href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">More...</a><br /></td></tr>
<tr class="separator:a9d96053cfef6f4cb5db1b7c74c6da067"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac522e55cee675f48861c5f931f8695df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ac522e55cee675f48861c5f931f8695df">close</a> (int part_index)</td></tr>
<tr class="memdesc:ac522e55cee675f48861c5f931f8695df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes an openable part at the specified index.  <a href="classvehicle.html#ac522e55cee675f48861c5f931f8695df">More...</a><br /></td></tr>
<tr class="separator:ac522e55cee675f48861c5f931f8695df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a00ad9624b9f73a4e62cca6df292f9f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a6a00ad9624b9f73a4e62cca6df292f9f">is_open</a> (int part_index) const</td></tr>
<tr class="separator:a6a00ad9624b9f73a4e62cca6df292f9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86f77e344d17d7ec786d86f6a6c9a426"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a86f77e344d17d7ec786d86f6a6c9a426">can_close</a> (int part_index, <a class="el" href="classCharacter.html">Character</a> &amp;who)</td></tr>
<tr class="separator:a86f77e344d17d7ec786d86f6a6c9a426"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9e5f31113c5dda6b76442cbd7b8429f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ad9e5f31113c5dda6b76442cbd7b8429f">is_foldable</a> () const</td></tr>
<tr class="separator:ad9e5f31113c5dda6b76442cbd7b8429f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfc3934d35e8ba27600500d0e48f0d4d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#abfc3934d35e8ba27600500d0e48f0d4d">restore</a> (const std::string &amp;data)</td></tr>
<tr class="separator:abfc3934d35e8ba27600500d0e48f0d4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a961aba2c257491888731b7806a103d1a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a961aba2c257491888731b7806a103d1a">interact_vehicle_locked</a> ()</td></tr>
<tr class="separator:a961aba2c257491888731b7806a103d1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a450b5dd0e3c8e21773995962f381157b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a450b5dd0e3c8e21773995962f381157b">has_security_working</a> () const</td></tr>
<tr class="separator:a450b5dd0e3c8e21773995962f381157b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16b29a171a5a4add5b6a759e049cbcf0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a16b29a171a5a4add5b6a759e049cbcf0">open_all_at</a> (int p)</td></tr>
<tr class="memdesc:a16b29a171a5a4add5b6a759e049cbcf0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens everything that can be opened on the same tile as <code>p</code>  <a href="classvehicle.html#a16b29a171a5a4add5b6a759e049cbcf0">More...</a><br /></td></tr>
<tr class="separator:a16b29a171a5a4add5b6a759e049cbcf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad842343ffa2e67bbd0ad708bf7f7bf93"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ad842343ffa2e67bbd0ad708bf7f7bf93">honk_horn</a> ()</td></tr>
<tr class="separator:ad842343ffa2e67bbd0ad708bf7f7bf93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1374dea5212a7c1311a1fd5bb3d1f0f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af1374dea5212a7c1311a1fd5bb3d1f0f">reload_seeds</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;<a class="el" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>)</td></tr>
<tr class="separator:af1374dea5212a7c1311a1fd5bb3d1f0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2eb76e28ca0f8caf364eaa4a79f1eaa0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a2eb76e28ca0f8caf364eaa4a79f1eaa0">beeper_sound</a> ()</td></tr>
<tr class="separator:a2eb76e28ca0f8caf364eaa4a79f1eaa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a872c70ddff1081cf426fa695bcdf4153"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a872c70ddff1081cf426fa695bcdf4153">play_music</a> ()</td></tr>
<tr class="separator:a872c70ddff1081cf426fa695bcdf4153"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af878a8bbb20a0b7db5c776067c7a1a40"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af878a8bbb20a0b7db5c776067c7a1a40">play_chimes</a> ()</td></tr>
<tr class="separator:af878a8bbb20a0b7db5c776067c7a1a40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ecd7bbfce4b780111a1cbf5d8251d9b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a2ecd7bbfce4b780111a1cbf5d8251d9b">operate_planter</a> ()</td></tr>
<tr class="separator:a2ecd7bbfce4b780111a1cbf5d8251d9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75e144a47baea76ae92c0f6fc1e7c780"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a75e144a47baea76ae92c0f6fc1e7c780">tracking_toggle_string</a> ()</td></tr>
<tr class="separator:a75e144a47baea76ae92c0f6fc1e7c780"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6035e37524b3ea6157fd0f3bef16ca97"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a6035e37524b3ea6157fd0f3bef16ca97">autopilot_patrol_check</a> ()</td></tr>
<tr class="separator:a6035e37524b3ea6157fd0f3bef16ca97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5903e76e7d6113d396c9eb5eeef8f7a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ad5903e76e7d6113d396c9eb5eeef8f7a">toggle_autopilot</a> ()</td></tr>
<tr class="separator:ad5903e76e7d6113d396c9eb5eeef8f7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20879efe6f04d7de665ba3a57f73e0af"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a20879efe6f04d7de665ba3a57f73e0af">enable_patrol</a> ()</td></tr>
<tr class="separator:a20879efe6f04d7de665ba3a57f73e0af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af215ec0fe4b4e7a8a8bf7e03e5874678"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af215ec0fe4b4e7a8a8bf7e03e5874678">toggle_tracking</a> ()</td></tr>
<tr class="separator:af215ec0fe4b4e7a8a8bf7e03e5874678"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a555d22bca89b0f11d8477c7df6711d24"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a555d22bca89b0f11d8477c7df6711d24">operate_scoop</a> ()</td></tr>
<tr class="separator:a555d22bca89b0f11d8477c7df6711d24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25da50ff11a0bbdb949f12cf2e62e5d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a25da50ff11a0bbdb949f12cf2e62e5d3">operate_reaper</a> ()</td></tr>
<tr class="separator:a25da50ff11a0bbdb949f12cf2e62e5d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a59e5df3ef43114973413525dcafaa9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a1a59e5df3ef43114973413525dcafaa9">crash_terrain_around</a> ()</td></tr>
<tr class="separator:a1a59e5df3ef43114973413525dcafaa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45a1410dc6e76021f7ed69ba82e93fe8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a45a1410dc6e76021f7ed69ba82e93fe8">transform_terrain</a> ()</td></tr>
<tr class="separator:a45a1410dc6e76021f7ed69ba82e93fe8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22c303e2414d3a1ccae66d96fa77d638"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a22c303e2414d3a1ccae66d96fa77d638">add_toggle_to_opts</a> (std::vector&lt; <a class="el" href="structuilist__entry.html">uilist_entry</a> &gt; &amp;options, std::vector&lt; std::function&lt; void()&gt; &gt; &amp;actions, const std::string &amp;<a class="el" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, char key, const std::string &amp;flag)</td></tr>
<tr class="separator:a22c303e2414d3a1ccae66d96fa77d638"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21939ab01fc986741bf90546bc4b8044"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a21939ab01fc986741bf90546bc4b8044">set_electronics_menu_options</a> (std::vector&lt; <a class="el" href="structuilist__entry.html">uilist_entry</a> &gt; &amp;options, std::vector&lt; std::function&lt; void()&gt; &gt; &amp;actions)</td></tr>
<tr class="separator:a21939ab01fc986741bf90546bc4b8044"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a905234356e91951db1fe65d212a0d89d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a905234356e91951db1fe65d212a0d89d">control_electronics</a> ()</td></tr>
<tr class="separator:a905234356e91951db1fe65d212a0d89d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af03022f10e08674024f2fb664624ca54"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af03022f10e08674024f2fb664624ca54">control_engines</a> ()</td></tr>
<tr class="separator:af03022f10e08674024f2fb664624ca54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17aa6419424492de3019d606da710d29"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a17aa6419424492de3019d606da710d29">select_engine</a> ()</td></tr>
<tr class="separator:a17aa6419424492de3019d606da710d29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad220b3180a33f66aa420dfa24b1d3ee4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ad220b3180a33f66aa420dfa24b1d3ee4">is_engine_type_on</a> (int e, const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;ft) const</td></tr>
<tr class="separator:ad220b3180a33f66aa420dfa24b1d3ee4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d73f86ddc3aafe3231c33c098b9d6c8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a4d73f86ddc3aafe3231c33c098b9d6c8">is_engine_on</a> (int e) const</td></tr>
<tr class="separator:a4d73f86ddc3aafe3231c33c098b9d6c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a625ad56bb7c71b7305ccbdb411d650db"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a625ad56bb7c71b7305ccbdb411d650db">is_part_on</a> (int p) const</td></tr>
<tr class="separator:a625ad56bb7c71b7305ccbdb411d650db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaea77fa5cfb98d7b1aadb0e71ee7a671"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aaea77fa5cfb98d7b1aadb0e71ee7a671">is_engine_type</a> (int e, const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;ft) const</td></tr>
<tr class="separator:aaea77fa5cfb98d7b1aadb0e71ee7a671"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af73c2981a9b17d7e67d37568f7ce0401"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af73c2981a9b17d7e67d37568f7ce0401">is_alternator_on</a> (int <a class="el" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a>) const</td></tr>
<tr class="separator:af73c2981a9b17d7e67d37568f7ce0401"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0ee70332f9c060254c0ba5ab37521ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ad0ee70332f9c060254c0ba5ab37521ed">toggle_specific_engine</a> (int e, bool on)</td></tr>
<tr class="separator:ad0ee70332f9c060254c0ba5ab37521ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94701a6021928fbf7ba68e2ba4ad7cb8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a94701a6021928fbf7ba68e2ba4ad7cb8">toggle_specific_part</a> (int p, bool on)</td></tr>
<tr class="separator:a94701a6021928fbf7ba68e2ba4ad7cb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a603b71f04b9fdb63f400ac93fb4bea88"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a603b71f04b9fdb63f400ac93fb4bea88">has_engine_type</a> (const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;ft, bool <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a>) const</td></tr>
<tr class="separator:a603b71f04b9fdb63f400ac93fb4bea88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c4e8182afb214351822aa818e919c52"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a8c4e8182afb214351822aa818e919c52">has_harnessed_animal</a> () const</td></tr>
<tr class="separator:a8c4e8182afb214351822aa818e919c52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39ef96d5220fa3c0bde366f463039c21"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a39ef96d5220fa3c0bde366f463039c21">has_engine_type_not</a> (const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;ft, bool <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a>) const</td></tr>
<tr class="separator:a39ef96d5220fa3c0bde366f463039c21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6632253ff56fbb0b5eaee359011d1e3c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a6632253ff56fbb0b5eaee359011d1e3c">has_engine_conflict</a> (const <a class="el" href="classvpart__info.html">vpart_info</a> *possible_conflict, std::string &amp;conflict_type) const</td></tr>
<tr class="separator:a6632253ff56fbb0b5eaee359011d1e3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a850e134844078b5efa1084fc1ebbeec0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a850e134844078b5efa1084fc1ebbeec0">is_perpetual_type</a> (int e) const</td></tr>
<tr class="separator:a850e134844078b5efa1084fc1ebbeec0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaf4a073304f9f96f055094f700b0134"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#adaf4a073304f9f96f055094f700b0134">do_engine_damage</a> (size_t e, int <a class="el" href="classvehicle.html#ac49843abe67be6f7f9c3fdaf92e2f411">strain</a>)</td></tr>
<tr class="separator:adaf4a073304f9f96f055094f700b0134"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae432d73f12b167105d62fdd832f9b30e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ae432d73f12b167105d62fdd832f9b30e">control_doors</a> ()</td></tr>
<tr class="separator:ae432d73f12b167105d62fdd832f9b30e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1aa616008c1d4180e03c21d3b2ee218"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structrl__vec2d.html">rl_vec2d</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ab1aa616008c1d4180e03c21d3b2ee218">velo_vec</a> () const</td></tr>
<tr class="separator:ab1aa616008c1d4180e03c21d3b2ee218"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bc8dfdab1fadc47966b0a69520c737c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structrl__vec2d.html">rl_vec2d</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a2bc8dfdab1fadc47966b0a69520c737c">face_vec</a> () const</td></tr>
<tr class="separator:a2bc8dfdab1fadc47966b0a69520c737c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e308fcc9e8b3b08ccf622825e94c9cc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structrl__vec2d.html">rl_vec2d</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a0e308fcc9e8b3b08ccf622825e94c9cc">move_vec</a> () const</td></tr>
<tr class="separator:a0e308fcc9e8b3b08ccf622825e94c9cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a050dcaa8958d866388b780738cf0e87d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structrl__vec2d.html">rl_vec2d</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a050dcaa8958d866388b780738cf0e87d">dir_vec</a> () const</td></tr>
<tr class="separator:a050dcaa8958d866388b780738cf0e87d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe589c810323ad50368e4a3f42914ef4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#afe589c810323ad50368e4a3f42914ef4">on_move</a> ()</td></tr>
<tr class="separator:afe589c810323ad50368e4a3f42914ef4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a79185fd4b15560f76504af979b0bba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classvehicle.html">vehicle</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a8a79185fd4b15560f76504af979b0bba">act_on_map</a> ()</td></tr>
<tr class="separator:a8a79185fd4b15560f76504af979b0bba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63b06a1d61d0c44f460077314bb742a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a63b06a1d61d0c44f460077314bb742a8">check_falling_or_floating</a> ()</td></tr>
<tr class="separator:a63b06a1d61d0c44f460077314bb742a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae53a4a9e3fd761b8fcef2f379cca8918"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ae53a4a9e3fd761b8fcef2f379cca8918">set_submap_moved</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;p)</td></tr>
<tr class="memdesc:ae53a4a9e3fd761b8fcef2f379cca8918"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the submap coordinates and update the tracker info in the overmap (if enabled).  <a href="classvehicle.html#ae53a4a9e3fd761b8fcef2f379cca8918">More...</a><br /></td></tr>
<tr class="separator:ae53a4a9e3fd761b8fcef2f379cca8918"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a370afbdd3c703760b7f2c9f04d1a05ce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a370afbdd3c703760b7f2c9f04d1a05ce">use_autoclave</a> (int p)</td></tr>
<tr class="separator:a370afbdd3c703760b7f2c9f04d1a05ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7ee1f39dba42cbe13f9afe26ffc8405"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ad7ee1f39dba42cbe13f9afe26ffc8405">use_washing_machine</a> (int p)</td></tr>
<tr class="separator:ad7ee1f39dba42cbe13f9afe26ffc8405"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cada0f94f36c1bbaf243d6ff82426ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a0cada0f94f36c1bbaf243d6ff82426ed">use_dishwasher</a> (int p)</td></tr>
<tr class="separator:a0cada0f94f36c1bbaf243d6ff82426ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b4729ccb92667a95c0682c31b4d44c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a5b4729ccb92667a95c0682c31b4d44c4">use_monster_capture</a> (int <a class="el" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, const <a class="el" href="structtripoint.html">tripoint</a> &amp;<a class="el" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>)</td></tr>
<tr class="separator:a5b4729ccb92667a95c0682c31b4d44c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a418ad39b520d156f334cb08132fe472e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a418ad39b520d156f334cb08132fe472e">use_bike_rack</a> (int <a class="el" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>)</td></tr>
<tr class="separator:a418ad39b520d156f334cb08132fe472e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c5c783aa99f2c3cab059be7a72e80c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a8c5c783aa99f2c3cab059be7a72e80c4">use_harness</a> (int <a class="el" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, const <a class="el" href="structtripoint.html">tripoint</a> &amp;<a class="el" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>)</td></tr>
<tr class="separator:a8c5c783aa99f2c3cab059be7a72e80c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16b7eb7b51337edc374ce0cd6aa623e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a16b7eb7b51337edc374ce0cd6aa623e0">interact_with</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;<a class="el" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, int interact_part)</td></tr>
<tr class="separator:a16b7eb7b51337edc374ce0cd6aa623e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace5c25f3faffd8848491570cfb89f086"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ace5c25f3faffd8848491570cfb89f086">disp_name</a> () const</td></tr>
<tr class="separator:ace5c25f3faffd8848491570cfb89f086"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa436025a9aedf758df007b1c132b3f7d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aa436025a9aedf758df007b1c132b3f7d">lift_strength</a> () const</td></tr>
<tr class="memdesc:aa436025a9aedf758df007b1c132b3f7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Required strength to be able to successfully lift the vehicle unaided by equipment.  <a href="classvehicle.html#aa436025a9aedf758df007b1c132b3f7d">More...</a><br /></td></tr>
<tr class="separator:aa436025a9aedf758df007b1c132b3f7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfc6fa64a046f2c7ceedcddd0cccef9e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#abfc6fa64a046f2c7ceedcddd0cccef9e">refresh_zones</a> ()</td></tr>
<tr class="separator:abfc6fa64a046f2c7ceedcddd0cccef9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c20fa57030f23110c4b7f446a0c1f17"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structbounding__box.html">bounding_box</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a2c20fa57030f23110c4b7f446a0c1f17">get_bounding_box</a> ()</td></tr>
<tr class="separator:a2c20fa57030f23110c4b7f446a0c1f17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43595d99bbf7a719529147ce12c0b959"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a43595d99bbf7a719529147ce12c0b959">update_time</a> (const <a class="el" href="classtime__point.html">time_point</a> &amp;update_to)</td></tr>
<tr class="separator:a43595d99bbf7a719529147ce12c0b959"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1a357d8a761eee6126a31549e5a2267"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#ab1a357d8a761eee6126a31549e5a2267">process_emitters</a> ()</td></tr>
<tr class="separator:ab1a357d8a761eee6126a31549e5a2267"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa10bbf2045f3581a65049d7b7b5071ae"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aa10bbf2045f3581a65049d7b7b5071ae">part_count</a> () const</td></tr>
<tr class="separator:aa10bbf2045f3581a65049d7b7b5071ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdb2ebf673a32f657ac9e29b842ee7f5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> (int part_num)</td></tr>
<tr class="separator:acdb2ebf673a32f657ac9e29b842ee7f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2adff790fcaea181f096ebaa213e698c"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a2adff790fcaea181f096ebaa213e698c">cpart</a> (int part_num) const</td></tr>
<tr class="separator:a2adff790fcaea181f096ebaa213e698c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a7109aaf54a3cc07ab71833637bfdce"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a5a7109aaf54a3cc07ab71833637bfdce">valid_part</a> (int part_num) const</td></tr>
<tr class="separator:a5a7109aaf54a3cc07ab71833637bfdce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae6614753be39386f88c73d1c68f4cec"><td class="memItemLeft" align="right" valign="top">std::set&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#aae6614753be39386f88c73d1c68f4cec">advance_precalc_mounts</a> (const <a class="el" href="structpoint.html">point</a> &amp;new_pos, const <a class="el" href="structtripoint.html">tripoint</a> &amp;src, const <a class="el" href="structtripoint.html">tripoint</a> &amp;dp, int ramp_offset, bool adjust_pos, std::set&lt; int &gt; parts_to_move)</td></tr>
<tr class="separator:aae6614753be39386f88c73d1c68f4cec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a300054370bb18b67094b827f8c586896"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#a300054370bb18b67094b827f8c586896">level_vehicle</a> ()</td></tr>
<tr class="separator:a300054370bb18b67094b827f8c586896"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af60dc22f3846d5dabbf7877f44ebf6f5"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::tuple&lt; <a class="el" href="structpoint.html">point</a>, int, std::string &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvehicle.html#af60dc22f3846d5dabbf7877f44ebf6f5">get_debug_overlay_data</a> () const</td></tr>
<tr class="separator:af60dc22f3846d5dabbf7877f44ebf6f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >A vehicle as a whole with all its components. </p>
<p >This object can occupy multiple tiles, the objects actually visible on the map are of type <code><a class="el" href="structvehicle__part.html" title="Structure, describing vehicle part (i.e., wheel, seat)">vehicle_part</a></code>.</p>
<p >Facts you need to know about implementation:</p><ul>
<li>Vehicles belong to map. There's <code>std::vector&lt;vehicle&gt;</code> for each submap in grid. When requesting a reference to vehicle, keep in mind it can be invalidated by functions such as <code><a class="el" href="classmap.html#abeefac00972febd607e98bb0431bd5a9">map::displace_vehicle()</a></code>.</li>
<li>To check if there's any vehicle at given map tile, call <code><a class="el" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a" title="Checks if tile is occupied by vehicle and by which part.">map::veh_at()</a></code>, and check vehicle type (<code>veh_null</code> means there's no vehicle there).</li>
<li>Vehicle consists of parts (represented by vector). Parts have some constant info: see <a class="el" href="veh__type_8h.html">veh_type.h</a>, <code><a class="el" href="classvpart__info.html">vpart_info</a></code> structure and vpart_list array &ndash; that is accessible through <code><a class="el" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info()</a></code> method. The second part is variable info, see <code><a class="el" href="structvehicle__part.html" title="Structure, describing vehicle part (i.e., wheel, seat)">vehicle_part</a></code> structure.</li>
<li>Parts are mounted at some point relative to vehicle position (or starting part) (<code>0, 0</code> in mount coordinates). There can be more than one part at given mount coordinates, and they are mounted in different slots. Check <a class="el" href="tileray_8h.html">tileray.h</a> file to see a picture of coordinate axes.</li>
<li>Vehicle can be rotated to arbitrary degree. This means that mount coordinates are rotated to match vehicle's face direction before their actual positions are known. For optimization purposes mount coordinates are precalculated for current vehicle face direction and stored in <code>precalc[0]</code>. <code>precalc[1]</code> stores mount coordinates for next move (vehicle can move and turn). Method <code><a class="el" href="classmap.html#abeefac00972febd607e98bb0431bd5a9">map::displace_vehicle()</a></code> assigns <code>precalc[1]</code> to <code>precalc[0]</code>. At any time (except <code><a class="el" href="classmap.html#a5d64e11c1e8810efcdd4a19cb91ecbf5">map::vehmove()</a></code> innermost cycle) you can get actual part coordinates relative to vehicle's position by reading <code>precalc[0]</code>. Vehicles rotate around a (possibly changing) pivot point, and the precalculated coordinates always put the pivot point at (0,0).</li>
<li>Vehicle keeps track of 3 directions: <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Direction   </th><th class="markdownTableHeadNone">Meaning    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">face   </td><td class="markdownTableBodyNone">where it's facing currently    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">move   </td><td class="markdownTableBodyNone">where it's moving, it's different from face if it's skidding    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">turn_dir   </td><td class="markdownTableBodyNone">where it will turn at next move, if it won't stop due to collision   </td></tr>
</table>
</li>
<li>Some methods take <code>part</code> or <code>p</code> parameter. This is the index of a part in the parts list.</li>
<li>Driver doesn't know what vehicle he drives. There's only <a class="el" href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">player::in_vehicle</a> flag which indicates that he is inside vehicle. To figure out what, you need to ask a map if there's a vehicle at driver/passenger position.</li>
<li>To keep info consistent, always use <code><a class="el" href="classmap.html#a2e2945f391fc0ed68f1b1192b9caa7cf">map::board_vehicle()</a></code> and <code><a class="el" href="classmap.html#a53d95390d133477f8b4a1ce76482750b">map::unboard_vehicle()</a></code> for boarding/unboarding player.</li>
<li>To add new predesigned vehicle, add an entry to data/raw/vehicles.json similar to the existing ones. Keep in mind, that positive x coordinate points forwards, negative x is back, positive y is to the right, and negative y to the left: <pre class="fragment">orthogonal dir left (-Y)
     ^
-X -------&gt;  +X (forward)
     v
orthogonal dir right (+Y)
</pre> When adding parts, function checks possibility to install part at given coordinates. If it shows debug messages that it can't add parts, when you start the game, you did something wrong. There are a few rules:<ol type="1">
<li>Every mount point (tile) must begin with a part in the 'structure' location, usually a frame.</li>
<li>No part can stack with itself.</li>
<li>No part can stack with another part in the same location, unless that part is so small as to have no particular location (such as headlights). If you can't understand why installation fails, try to assemble your vehicle in game first. </li>
</ol>
</li>
</ul>

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l00674">674</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a8621fbcb37cbcb7760f0106a6b7e4fbe" name="a8621fbcb37cbcb7760f0106a6b7e4fbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8621fbcb37cbcb7760f0106a6b7e4fbe">&#9670;&nbsp;</a></span>vehicle() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vehicle::vehicle </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a64efc8ab51816a59711440d464136eda">vproto_id</a> &amp;&#160;</td>
          <td class="paramname"><em>type_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>init_veh_fuel</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>init_veh_status</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l00251">251</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>                                       : <a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a>( type_id )</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>{</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>    <a class="code hl_variable" href="classvehicle.html#af366981a584e12d25133fb479d47de33">turn_dir</a> = 0_degrees;</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>    <a class="code hl_variable" href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">face</a>.<a class="code hl_function" href="classtileray.html#ab643ca3c50332c73009031331e7c8026">init</a>( 0_degrees );</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>    <a class="code hl_variable" href="classvehicle.html#a8bbdfb41ea75fdc007feab08e2137aa2">move</a>.<a class="code hl_function" href="classtileray.html#ab643ca3c50332c73009031331e7c8026">init</a>( 0_degrees );</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>    <a class="code hl_variable" href="classvehicle.html#a3d2d513640544cb11fa826890b692e5a">of_turn_carry</a> = 0;</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span> </div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a>.<a class="code hl_function" href="classstring__id.html#aa7dabc565f0c067e1a237ea224b18f93">str</a>().empty() &amp;&amp; <a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a>.<a class="code hl_function" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() ) {</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structvehicle__prototype.html">vehicle_prototype</a> &amp;proto = <a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a>.<a class="code hl_function" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>();</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>        <span class="comment">// Copy the already made vehicle. The blueprint is created when the json data is loaded</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>        <span class="comment">// and is guaranteed to be valid (has valid parts etc.).</span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>        *<span class="keyword">this</span> = *proto.<a class="code hl_variable" href="structvehicle__prototype.html#afd97243dc2795dcac21e223dc0ffef98">blueprint</a>;</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>        <a class="code hl_function" href="classvehicle.html#a9d5520a059111acb3427c98580b713a8">init_state</a>( init_veh_fuel, init_veh_status );</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>    }</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>    <a class="code hl_function" href="classvehicle.html#a3df213ef35c4a1801ef30d1f65195f40">precalc_mounts</a>( 0, <a class="code hl_variable" href="classvehicle.html#a709da7b758c18d51b79311eea6eaca59">pivot_rotation</a>[0], <a class="code hl_variable" href="classvehicle.html#afd4e8e8471b17450205d827dee8a41a5">pivot_anchor</a>[0] );</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>    <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>}</div>
<div class="ttc" id="aclassstring__id_html_a4796245d3cd6e0283670698a98d46ae9"><div class="ttname"><a href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">string_id::obj</a></div><div class="ttdeci">const T &amp; obj() const</div><div class="ttdoc">Returns the actual object this id refers to.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00058">achievement.cpp:58</a></div></div>
<div class="ttc" id="aclassstring__id_html_a8ca0e76fa665125f1e50bd1ed8dbd213"><div class="ttname"><a href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">string_id::is_valid</a></div><div class="ttdeci">bool is_valid() const</div><div class="ttdoc">Returns whether this id is valid, that means whether it refers to an existing object.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00065">achievement.cpp:65</a></div></div>
<div class="ttc" id="aclassstring__id_html_aa7dabc565f0c067e1a237ea224b18f93"><div class="ttname"><a href="classstring__id.html#aa7dabc565f0c067e1a237ea224b18f93">string_id::str</a></div><div class="ttdeci">const std::string &amp; str() const</div><div class="ttdoc">Returns the identifier as plain std::string.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00255">string_id.h:255</a></div></div>
<div class="ttc" id="aclasstileray_html_ab643ca3c50332c73009031331e7c8026"><div class="ttname"><a href="classtileray.html#ab643ca3c50332c73009031331e7c8026">tileray::init</a></div><div class="ttdeci">void init(const point &amp;ad)</div><div class="ttdef"><b>Definition:</b> <a href="tileray_8cpp_source.html#l00027">tileray.cpp:27</a></div></div>
<div class="ttc" id="aclassvehicle_html_a22b8b1fe66df7091af2eb16f62fb711b"><div class="ttname"><a href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">vehicle::type</a></div><div class="ttdeci">vproto_id type</div><div class="ttdoc">Type of the vehicle as it was spawned.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01798">vehicle.h:1798</a></div></div>
<div class="ttc" id="aclassvehicle_html_a3d2d513640544cb11fa826890b692e5a"><div class="ttname"><a href="classvehicle.html#a3d2d513640544cb11fa826890b692e5a">vehicle::of_turn_carry</a></div><div class="ttdeci">float of_turn_carry</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01876">vehicle.h:1876</a></div></div>
<div class="ttc" id="aclassvehicle_html_a3df213ef35c4a1801ef30d1f65195f40"><div class="ttname"><a href="classvehicle.html#a3df213ef35c4a1801ef30d1f65195f40">vehicle::precalc_mounts</a></div><div class="ttdeci">void precalc_mounts(int idir, units::angle dir, const point &amp;pivot)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03024">vehicle.cpp:3024</a></div></div>
<div class="ttc" id="aclassvehicle_html_a709da7b758c18d51b79311eea6eaca59"><div class="ttname"><a href="classvehicle.html#a709da7b758c18d51b79311eea6eaca59">vehicle::pivot_rotation</a></div><div class="ttdeci">std::array&lt; units::angle, 2 &gt; pivot_rotation</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01883">vehicle.h:1883</a></div></div>
<div class="ttc" id="aclassvehicle_html_a8bbdfb41ea75fdc007feab08e2137aa2"><div class="ttname"><a href="classvehicle.html#a8bbdfb41ea75fdc007feab08e2137aa2">vehicle::move</a></div><div class="ttdeci">tileray move</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01893">vehicle.h:1893</a></div></div>
<div class="ttc" id="aclassvehicle_html_a8e021d197980bbed36ff3c43962df957"><div class="ttname"><a href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">vehicle::face</a></div><div class="ttdeci">tileray face</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01891">vehicle.h:1891</a></div></div>
<div class="ttc" id="aclassvehicle_html_a9d5520a059111acb3427c98580b713a8"><div class="ttname"><a href="classvehicle.html#a9d5520a059111acb3427c98580b713a8">vehicle::init_state</a></div><div class="ttdeci">void init_state(int init_veh_fuel, int init_veh_status)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l00386">vehicle.cpp:386</a></div></div>
<div class="ttc" id="aclassvehicle_html_aaa2487e84144e8c6ea235748339e97a5"><div class="ttname"><a href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">vehicle::refresh</a></div><div class="ttdeci">void refresh()</div><div class="ttdoc">Refreshes all caches and refinds all parts.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05477">vehicle.cpp:5477</a></div></div>
<div class="ttc" id="aclassvehicle_html_af366981a584e12d25133fb479d47de33"><div class="ttname"><a href="classvehicle.html#af366981a584e12d25133fb479d47de33">vehicle::turn_dir</a></div><div class="ttdeci">units::angle turn_dir</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01870">vehicle.h:1870</a></div></div>
<div class="ttc" id="aclassvehicle_html_afd4e8e8471b17450205d827dee8a41a5"><div class="ttname"><a href="classvehicle.html#afd4e8e8471b17450205d827dee8a41a5">vehicle::pivot_anchor</a></div><div class="ttdeci">std::array&lt; point, 2 &gt; pivot_anchor</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01889">vehicle.h:1889</a></div></div>
<div class="ttc" id="astructvehicle__prototype_html"><div class="ttname"><a href="structvehicle__prototype.html">vehicle_prototype</a></div><div class="ttdoc">Prototype of a vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00372">veh_type.h:372</a></div></div>
<div class="ttc" id="astructvehicle__prototype_html_afd97243dc2795dcac21e223dc0ffef98"><div class="ttname"><a href="structvehicle__prototype.html#afd97243dc2795dcac21e223dc0ffef98">vehicle_prototype::blueprint</a></div><div class="ttdeci">std::unique_ptr&lt; vehicle &gt; blueprint</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00395">veh_type.h:395</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="veh__type_8h_source.html#l00395">vehicle_prototype::blueprint</a>, <a class="el" href="vehicle_8h_source.html#l01891">face</a>, <a class="el" href="tileray_8cpp_source.html#l00027">tileray::init()</a>, <a class="el" href="vehicle_8cpp_source.html#l00386">init_state()</a>, <a class="el" href="achievement_8cpp_source.html#l00065">string_id&lt; T &gt;::is_valid()</a>, <a class="el" href="vehicle_8h_source.html#l01893">move</a>, <a class="el" href="achievement_8cpp_source.html#l00058">string_id&lt; T &gt;::obj()</a>, <a class="el" href="vehicle_8h_source.html#l01876">of_turn_carry</a>, <a class="el" href="vehicle_8h_source.html#l01889">pivot_anchor</a>, <a class="el" href="vehicle_8h_source.html#l01883">pivot_rotation</a>, <a class="el" href="vehicle_8cpp_source.html#l03024">precalc_mounts()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="string__id_8h_source.html#l00255">string_id&lt; T &gt;::str()</a>, <a class="el" href="vehicle_8h_source.html#l01870">turn_dir</a>, and <a class="el" href="vehicle_8h_source.html#l01798">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__item__handling_8cpp_source.html#l02112">activity_on_turn_move_loot()</a>, <a class="el" href="map_8cpp_source.html#l05489">map::add_splatter()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l01175">are_requirements_nearby()</a>, <a class="el" href="gates_8cpp_source.html#l00255">doors::close_door()</a>, <a class="el" href="game_8cpp_source.html#l05443">game::control_vehicle()</a>, <a class="el" href="explosion_8cpp_source.html#l00344">explosion_handler::do_blast_new()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l01977">fetch_activity()</a>, <a class="el" href="character_8cpp_source.html#l09465">Character::floor_item_warmth()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l01786">activity_handlers::hotwire_finish()</a>, <a class="el" href="advanced__inv__area_8cpp_source.html#l00061">advanced_inv_area::init()</a>, <a class="el" href="character_8cpp_source.html#l09301">Character::is_snuggling()</a>, <a class="el" href="iuse_8cpp_source.html#l05094">iuse::mop()</a>, <a class="el" href="map_8cpp_source.html#l02803">map::mop_spills()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00888">move_cost()</a>, <a class="el" href="handle__action_8cpp_source.html#l00510">open()</a>, <a class="el" href="handle__action_8cpp_source.html#l00439">pldrive()</a>, <a class="el" href="advanced__inv__area_8cpp_source.html#l00403">advanced_inv_area::set_container_position()</a>, <a class="el" href="monmove_8cpp_source.html#l02021">monster::shove_vehicle()</a>, and <a class="el" href="activity__item__handling_8cpp_source.html#l01924">tidy_activity()</a>.</p>

</div>
</div>
<a id="abf5643774310a3300a2637e20f0b6fee" name="abf5643774310a3300a2637e20f0b6fee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf5643774310a3300a2637e20f0b6fee">&#9670;&nbsp;</a></span>vehicle() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vehicle::vehicle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l00270">270</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>                 : <a class="code hl_function" href="classvehicle.html#abf5643774310a3300a2637e20f0b6fee">vehicle</a>( <a class="code hl_typedef" href="type__id_8h.html#a64efc8ab51816a59711440d464136eda">vproto_id</a>() )</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>{</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>    <a class="code hl_variable" href="classvehicle.html#a34630935e46860003c616e0522316f02">sm_pos</a> = <a class="code hl_variable" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a>;</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>}</div>
<div class="ttc" id="aclassvehicle_html_a34630935e46860003c616e0522316f02"><div class="ttname"><a href="classvehicle.html#a34630935e46860003c616e0522316f02">vehicle::sm_pos</a></div><div class="ttdeci">tripoint sm_pos</div><div class="ttdoc">Submap coordinates of the currently loaded submap (see game::m) that contains this vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01844">vehicle.h:1844</a></div></div>
<div class="ttc" id="aclassvehicle_html_abf5643774310a3300a2637e20f0b6fee"><div class="ttname"><a href="classvehicle.html#abf5643774310a3300a2637e20f0b6fee">vehicle::vehicle</a></div><div class="ttdeci">vehicle()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l00270">vehicle.cpp:270</a></div></div>
<div class="ttc" id="apoint_8h_html_a4b1a6bcaa42d2c06ecc3afc63305bfdf"><div class="ttname"><a href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a></div><div class="ttdeci">static constexpr tripoint tripoint_zero</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00273">point.h:273</a></div></div>
<div class="ttc" id="atype__id_8h_html_a64efc8ab51816a59711440d464136eda"><div class="ttname"><a href="type__id_8h.html#a64efc8ab51816a59711440d464136eda">vproto_id</a></div><div class="ttdeci">string_id&lt; vehicle_prototype &gt; vproto_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00170">type_id.h:170</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01844">sm_pos</a>, and <a class="el" href="point_8h_source.html#l00273">tripoint_zero</a>.</p>

</div>
</div>
<a id="ad4abd7f41e0d1243436d99393e3594a9" name="ad4abd7f41e0d1243436d99393e3594a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4abd7f41e0d1243436d99393e3594a9">&#9670;&nbsp;</a></span>vehicle() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">vehicle::vehicle </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classvehicle.html">vehicle</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af410668ac3b25faaaca1bd8e044c58c2" name="af410668ac3b25faaaca1bd8e044c58c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af410668ac3b25faaaca1bd8e044c58c2">&#9670;&nbsp;</a></span>~vehicle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">vehicle::~vehicle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab9380d6e415bc75e80ab578d798af611" name="ab9380d6e415bc75e80ab578d798af611"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9380d6e415bc75e80ab578d798af611">&#9670;&nbsp;</a></span>acceleration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::acceleration </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fueled</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>at_vel_in_vmi</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03462">3462</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03463" name="l03463"></a><span class="lineno"> 3463</span>{</div>
<div class="line"><a id="l03464" name="l03464"></a><span class="lineno"> 3464</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a0ede4cc2a97a8305b1f06817d0d6cdf8">is_watercraft</a>() ) {</div>
<div class="line"><a id="l03465" name="l03465"></a><span class="lineno"> 3465</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#abdeb5964519a588fa9be7f891e56cbfe">water_acceleration</a>( fueled, at_vel_in_vmi );</div>
<div class="line"><a id="l03466" name="l03466"></a><span class="lineno"> 3466</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a292961ab33a42bf495d19b8692f6f105">is_rotorcraft</a>() &amp;&amp; <a class="code hl_variable" href="classvehicle.html#a0a35b7f917fdb08e70a78315cc968f86">is_flying</a> ) {</div>
<div class="line"><a id="l03467" name="l03467"></a><span class="lineno"> 3467</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a1e900eef075e4239bf1faec947f60c1d">rotor_acceleration</a>( fueled, at_vel_in_vmi );</div>
<div class="line"><a id="l03468" name="l03468"></a><span class="lineno"> 3468</span>    }</div>
<div class="line"><a id="l03469" name="l03469"></a><span class="lineno"> 3469</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a864572607b3e016a73c6e3b421021a84">ground_acceleration</a>( fueled, at_vel_in_vmi );</div>
<div class="line"><a id="l03470" name="l03470"></a><span class="lineno"> 3470</span>}</div>
<div class="ttc" id="aclassvehicle_html_a0a35b7f917fdb08e70a78315cc968f86"><div class="ttname"><a href="classvehicle.html#a0a35b7f917fdb08e70a78315cc968f86">vehicle::is_flying</a></div><div class="ttdeci">bool is_flying</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01917">vehicle.h:1917</a></div></div>
<div class="ttc" id="aclassvehicle_html_a0ede4cc2a97a8305b1f06817d0d6cdf8"><div class="ttname"><a href="classvehicle.html#a0ede4cc2a97a8305b1f06817d0d6cdf8">vehicle::is_watercraft</a></div><div class="ttdeci">bool is_watercraft() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04037">vehicle.cpp:4037</a></div></div>
<div class="ttc" id="aclassvehicle_html_a1e900eef075e4239bf1faec947f60c1d"><div class="ttname"><a href="classvehicle.html#a1e900eef075e4239bf1faec947f60c1d">vehicle::rotor_acceleration</a></div><div class="ttdeci">int rotor_acceleration(bool fueled=true, int at_vel_in_vmi=-1) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03396">vehicle.cpp:3396</a></div></div>
<div class="ttc" id="aclassvehicle_html_a292961ab33a42bf495d19b8692f6f105"><div class="ttname"><a href="classvehicle.html#a292961ab33a42bf495d19b8692f6f105">vehicle::is_rotorcraft</a></div><div class="ttdeci">bool is_rotorcraft() const</div><div class="ttdoc">is the vehicle flying? is it a rotorcraft?</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04017">vehicle.cpp:4017</a></div></div>
<div class="ttc" id="aclassvehicle_html_a864572607b3e016a73c6e3b421021a84"><div class="ttname"><a href="classvehicle.html#a864572607b3e016a73c6e3b421021a84">vehicle::ground_acceleration</a></div><div class="ttdeci">int ground_acceleration(bool fueled=true, int at_vel_in_vmi=-1) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03375">vehicle.cpp:3375</a></div></div>
<div class="ttc" id="aclassvehicle_html_abdeb5964519a588fa9be7f891e56cbfe"><div class="ttname"><a href="classvehicle.html#abdeb5964519a588fa9be7f891e56cbfe">vehicle::water_acceleration</a></div><div class="ttdeci">int water_acceleration(bool fueled=true, int at_vel_in_vmi=-1) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03406">vehicle.cpp:3406</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l03375">ground_acceleration()</a>, <a class="el" href="vehicle_8h_source.html#l01917">is_flying</a>, <a class="el" href="vehicle_8cpp_source.html#l04017">is_rotorcraft()</a>, <a class="el" href="vehicle_8cpp_source.html#l04037">is_watercraft()</a>, <a class="el" href="vehicle_8cpp_source.html#l03396">rotor_acceleration()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03406">water_acceleration()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03472">current_acceleration()</a>.</p>

</div>
</div>
<a id="a8a79185fd4b15560f76504af979b0bba" name="a8a79185fd4b15560f76504af979b0bba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a79185fd4b15560f76504af979b0bba">&#9670;&nbsp;</a></span>act_on_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classvehicle.html">vehicle</a> * vehicle::act_on_map </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__move_8cpp_source.html#l01239">1239</a> of file <a class="el" href="vehicle__move_8cpp_source.html">vehicle_move.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>{</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> pt = <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>();</div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>    <span class="keywordflow">if</span>( !here.<a class="code hl_function" href="classmap.html#a46608709f68358365d0734b1063fed73">inbounds</a>( pt ) ) {</div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>        <a class="code hl_define" href="vehicle__move_8cpp.html#a49bc164f30e64702250d2cbea09bf86c">dbg</a>( <a class="code hl_enumvalue" href="debug_8h.html#a157bb3f8cadfd404439ad477a19e8515a4059b0251f66a18cb56f544728796875">DL::Info</a> ) &lt;&lt; <span class="stringliteral">&quot;stopping out-of-map vehicle at global pos &quot;</span> &lt;&lt; pt;</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>        <a class="code hl_function" href="classvehicle.html#ab3ca604dd9cd1907f37c8a888934a1d3">stop</a>( <span class="keyword">false</span> );</div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>        <a class="code hl_variable" href="classvehicle.html#af757f49411232815e121faa825d415f7">of_turn</a> = 0;</div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>        <a class="code hl_variable" href="classvehicle.html#aeafb913ad9b9d1341d51a4c51ba43a06">is_falling</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>        <span class="keywordflow">return</span> <span class="keyword">this</span>;</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>    }</div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#abeeecc873ea4841652366d8ffc6c3bfe">decrement_summon_timer</a>() ) {</div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span>    }</div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span>    <a class="code hl_class" href="classCharacter.html">Character</a> &amp;player_character = <a class="code hl_function" href="character_8cpp.html#a2fcb25d686f4a35fca374c6f71280311">get_player_character</a>();</div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> pl_ctrl = <a class="code hl_function" href="classvehicle.html#a341515426011486c265d016c35f84de6">player_in_control</a>( player_character );</div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span>    <span class="comment">// TODO: Remove this hack, have vehicle sink a z-level</span></div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#ae3cbbbb890aa9a12504ec3458746f3e1">is_floating</a> &amp;&amp; !<a class="code hl_function" href="classvehicle.html#ac460f925a21efb9dea1dc0fc2f930609">can_float</a>() ) {</div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your %s sank.&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span>        <span class="keywordflow">if</span>( pl_ctrl ) {</div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>            <a class="code hl_function" href="classvehicle.html#a222ab75111163098b53f34a28e017dad">unboard_all</a>();</div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>        }</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;remoteveh() == <span class="keyword">this</span> ) {</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;setremoteveh( <span class="keyword">nullptr</span> );</div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>        }</div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span> </div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>        here.<a class="code hl_function" href="classmap.html#aac63fb28872f612df34a7f9a86898ed7">on_vehicle_moved</a>( <a class="code hl_variable" href="classvehicle.html#a34630935e46860003c616e0522316f02">sm_pos</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> );</div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>        <span class="comment">// Destroy vehicle (sank to nowhere)</span></div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span>        here.<a class="code hl_function" href="classmap.html#ac7f59f4bc6fad84a8d8c0ddd4e023734">destroy_vehicle</a>( <span class="keyword">this</span> );</div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span>    }</div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span> </div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span>    <span class="comment">// It needs to fall when it has no support OR was falling before</span></div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>    <span class="comment">//  so that vertical collisions happen.</span></div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> should_fall = <a class="code hl_variable" href="classvehicle.html#aeafb913ad9b9d1341d51a4c51ba43a06">is_falling</a> || <a class="code hl_variable" href="classvehicle.html#a416a2bc9ee792663fced3344db322cb8">vertical_velocity</a> != 0;</div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span> </div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>    <span class="comment">// TODO: Saner diagonal movement, so that you can jump off cliffs properly</span></div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>    <span class="comment">// The ratio of vertical to horizontal movement should be vertical_velocity/velocity</span></div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>    <span class="comment">//  for as long as of_turn doesn&#39;t run out.</span></div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>    <span class="keywordflow">if</span>( should_fall ) {</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>        <span class="comment">// Convert from 100*mph to m/s</span></div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>        <span class="keyword">const</span> <span class="keywordtype">float</span> old_vel = <a class="code hl_function" href="vehicle__move_8cpp.html#a5b4f290597a25f2c2f9447eb786c37c5">vmiph_to_mps</a>( <a class="code hl_variable" href="classvehicle.html#a416a2bc9ee792663fced3344db322cb8">vertical_velocity</a> );</div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>        <span class="comment">// Formula is v_2 = sqrt( 2*d*g + v_1^2 )</span></div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span>        <span class="comment">// Note: That drops the sign</span></div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>        <span class="keyword">const</span> <span class="keywordtype">float</span> new_vel = -std::sqrt( 2 * <a class="code hl_variable" href="vehicle__move_8cpp.html#abc9fa7d03f14e2a5323ee0ff66e7938e">tile_height</a> * <a class="code hl_variable" href="units__mass_8h.html#af9bdbc604b3753642c7d25280b6f3114">GRAVITY_OF_EARTH</a> + old_vel * old_vel );</div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>        <a class="code hl_variable" href="classvehicle.html#a416a2bc9ee792663fced3344db322cb8">vertical_velocity</a> = <a class="code hl_function" href="vehicle__move_8cpp.html#a3bf51af37129f24d376a74ca56b2644e">mps_to_vmiph</a>( new_vel );</div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>        <a class="code hl_variable" href="classvehicle.html#aeafb913ad9b9d1341d51a4c51ba43a06">is_falling</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>        <span class="comment">// Not actually falling, was just marked for fall test</span></div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span>        <a class="code hl_variable" href="classvehicle.html#aeafb913ad9b9d1341d51a4c51ba43a06">is_falling</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span>    }</div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span> </div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>    <span class="comment">// Low enough for bicycles to go in reverse.</span></div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span>    <span class="comment">// If the movement is due to a change in z-level, i.e a helicopter then the lateral movement will often be zero.</span></div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>    <span class="keywordflow">if</span>( !should_fall &amp;&amp; std::abs( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> ) &lt; 20 &amp;&amp; <a class="code hl_variable" href="classvehicle.html#aeb404e5f18eee80d104a7bb0680ac169">requested_z_change</a> == 0 ) {</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>        <a class="code hl_function" href="classvehicle.html#ab3ca604dd9cd1907f37c8a888934a1d3">stop</a>();</div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>        <a class="code hl_variable" href="classvehicle.html#af757f49411232815e121faa825d415f7">of_turn</a> -= .321f;</div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>        <span class="keywordflow">return</span> <span class="keyword">this</span>;</div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>    }</div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span> </div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> wheel_traction_area = here.<a class="code hl_function" href="classmap.html#a1d638822dc7c62d6ec6ee4f64ae0f4b2">vehicle_wheel_traction</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> traction = <a class="code hl_function" href="classvehicle.html#a9d41a3f9a7969c40ca5a9b7b5a3fdebe">k_traction</a>( wheel_traction_area );</div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span>    <span class="keywordflow">if</span>( traction &lt; 0.001f ) {</div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span>        <a class="code hl_variable" href="classvehicle.html#af757f49411232815e121faa825d415f7">of_turn</a> = 0;</div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>        <span class="keywordflow">if</span>( !should_fall ) {</div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>            <a class="code hl_function" href="classvehicle.html#ab3ca604dd9cd1907f37c8a888934a1d3">stop</a>();</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#ae94902df801fd06056734d05ea98aa0f">floating</a>.empty() ) {</div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your %s can&#39;t move on this terrain.&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your %s is beached.&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span>            }</div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span>            <span class="keywordflow">return</span> <span class="keyword">this</span>;</div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>        }</div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>    }</div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> turn_cost = <a class="code hl_variable" href="namespacevehicles.html#a002783f4304f09443cfa9fa8efa9f6d4">vehicles::vmiph_per_tile</a> / std::max&lt;float&gt;( 0.0001f, std::abs( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> ) );</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span> </div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span>    <span class="comment">// Can&#39;t afford it this turn?</span></div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span>    <span class="comment">// Low speed shouldn&#39;t prevent vehicle from falling, though</span></div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span>    <span class="keywordtype">bool</span> falling_only = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span>    <span class="keywordflow">if</span>( turn_cost &gt;= <a class="code hl_variable" href="classvehicle.html#af757f49411232815e121faa825d415f7">of_turn</a> &amp;&amp; ( ( !<a class="code hl_variable" href="classvehicle.html#a0a35b7f917fdb08e70a78315cc968f86">is_flying</a> &amp;&amp; <a class="code hl_variable" href="classvehicle.html#aeb404e5f18eee80d104a7bb0680ac169">requested_z_change</a> == 0 ) || !<a class="code hl_function" href="classvehicle.html#a292961ab33a42bf495d19b8692f6f105">is_rotorcraft</a>() ) ) {</div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span>        <span class="keywordflow">if</span>( !should_fall ) {</div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span>            <a class="code hl_variable" href="classvehicle.html#a3d2d513640544cb11fa826890b692e5a">of_turn_carry</a> = <a class="code hl_variable" href="classvehicle.html#af757f49411232815e121faa825d415f7">of_turn</a>;</div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span>            <a class="code hl_variable" href="classvehicle.html#af757f49411232815e121faa825d415f7">of_turn</a> = 0;</div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span>            <span class="keywordflow">return</span> <span class="keyword">this</span>;</div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>        }</div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>        falling_only = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>    }</div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span> </div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>    <span class="comment">// Decrease of_turn if falling+moving, but not when it&#39;s lower than move cost</span></div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span>    <span class="keywordflow">if</span>( !falling_only ) {</div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>        <a class="code hl_variable" href="classvehicle.html#af757f49411232815e121faa825d415f7">of_turn</a> -= turn_cost;</div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>    }</div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span> </div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="classvehicle.html#a9c46063d58fd3a05504dec8bb8b6e837">can_use_rails</a> = this-&gt;<a class="code hl_function" href="classvehicle.html#a9c46063d58fd3a05504dec8bb8b6e837">can_use_rails</a>();</div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="namespacevehicle__movement.html#ad2c532fb5522d745b0006f7a3b36cab3">is_on_rails</a> = <a class="code hl_function" href="namespacevehicle__movement.html#ad2c532fb5522d745b0006f7a3b36cab3">vehicle_movement::is_on_rails</a>( here, *<span class="keyword">this</span> );</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 10 ) ) {</div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>        <span class="keywordtype">bool</span> controlled = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>        <span class="comment">// It can even be a NPC, but must be at the controls</span></div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> boarded : <a class="code hl_function" href="classvehicle.html#ab429af6376b555746f92158331f2a4cf">boarded_parts</a>() ) {</div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( boarded, <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea1d493984c83c95a15238b6e21f4547d0">VPFLAG_CONTROLS</a>, <span class="keyword">true</span> ) &gt;= 0 ) {</div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span>                controlled = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span>                <a class="code hl_class" href="classplayer.html">player</a> *passenger = <a class="code hl_function" href="classvehicle.html#af02a0418851ddf50fcc810951d77b076">get_passenger</a>( boarded );</div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span>                <span class="keywordflow">if</span>( passenger != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>                    passenger-&gt;<a class="code hl_function" href="classplayer.html#aa57c61de29a5e410c100aee07798b9b1">practice</a>( <a class="code hl_variable" href="vehicle__move_8cpp.html#afee8dcfd12a225c469ee6171063d7594">skill_driving</a>, 1 );</div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>                }</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span>            }</div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span>        }</div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span> </div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span>        <span class="comment">// Eventually send it skidding if no control</span></div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>        <span class="comment">// But not if it&#39;s remotely controlled, is in water or is on rails</span></div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span>        <span class="keywordflow">if</span>( !controlled &amp;&amp; !pl_ctrl &amp;&amp; !<a class="code hl_variable" href="classvehicle.html#ae3cbbbb890aa9a12504ec3458746f3e1">is_floating</a> &amp;&amp; !<a class="code hl_function" href="namespacevehicle__movement.html#ad2c532fb5522d745b0006f7a3b36cab3">is_on_rails</a> &amp;&amp; !<a class="code hl_variable" href="classvehicle.html#a0a35b7f917fdb08e70a78315cc968f86">is_flying</a> &amp;&amp;</div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span>            <a class="code hl_variable" href="classvehicle.html#aeb404e5f18eee80d104a7bb0680ac169">requested_z_change</a> == 0 ) {</div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span>            <a class="code hl_variable" href="classvehicle.html#a320ca34b5c38568efd801731cef78a35">skidding</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span>        }</div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span>    }</div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span> </div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a320ca34b5c38568efd801731cef78a35">skidding</a> &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span>        <span class="comment">// Might turn uncontrollably while skidding</span></div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span>        <a class="code hl_function" href="classvehicle.html#a1380ff85985897f9f8a34eba538e04db">turn</a>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) ? -15_degrees : 15_degrees );</div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span>    }</div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span> </div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span>    <span class="keywordflow">if</span>( should_fall ) {</div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span>        <span class="comment">// TODO: Insert a (hard) driving test to stop this from happening</span></div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span>        <a class="code hl_variable" href="classvehicle.html#a320ca34b5c38568efd801731cef78a35">skidding</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>    }</div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span> </div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>    <a class="code hl_struct" href="structvehicle__movement_1_1rail__processing__result.html">vehicle_movement::rail_processing_result</a> rpres;</div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a9c46063d58fd3a05504dec8bb8b6e837">can_use_rails</a> &amp;&amp; !falling_only ) {</div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>        rpres = <a class="code hl_function" href="namespacevehicle__movement.html#a90bf274fc2c6eb229613c63739d8e2c1">vehicle_movement::process_movement_on_rails</a>( here, *<span class="keyword">this</span> );</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span>    }</div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>    <span class="keywordflow">if</span>( rpres.<a class="code hl_variable" href="structvehicle__movement_1_1rail__processing__result.html#aa10da2e7136704fa25a4af595ae7122b">do_turn</a> ) {</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span>        <a class="code hl_variable" href="classvehicle.html#af366981a584e12d25133fb479d47de33">turn_dir</a> = rpres.<a class="code hl_variable" href="structvehicle__movement_1_1rail__processing__result.html#a0a31255e2dd466d5580aa4446964f5c7">turn_dir</a>;</div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span>    }</div>
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"> 1372</span> </div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span>    <span class="comment">// The direction we&#39;re moving</span></div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span>    <a class="code hl_class" href="classtileray.html">tileray</a> mdir;</div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a320ca34b5c38568efd801731cef78a35">skidding</a> || should_fall ) {</div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span>        <span class="comment">// If skidding, it&#39;s the move vector</span></div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span>        <span class="comment">// Same for falling - no air control</span></div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span>        mdir = <a class="code hl_variable" href="classvehicle.html#a8bbdfb41ea75fdc007feab08e2137aa2">move</a>;</div>
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#af366981a584e12d25133fb479d47de33">turn_dir</a> != <a class="code hl_variable" href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">face</a>.<a class="code hl_function" href="classtileray.html#a91ed01227e1754597024f4916f8bd6af">dir</a>() &amp;&amp; ( !<a class="code hl_function" href="namespacevehicle__movement.html#ad2c532fb5522d745b0006f7a3b36cab3">is_on_rails</a> || rpres.<a class="code hl_variable" href="structvehicle__movement_1_1rail__processing__result.html#aa10da2e7136704fa25a4af595ae7122b">do_turn</a> ) ) {</div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span>        <span class="comment">// Driver turned vehicle, get turn_dir</span></div>
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"> 1381</span>        mdir.<a class="code hl_function" href="classtileray.html#ab643ca3c50332c73009031331e7c8026">init</a>( <a class="code hl_variable" href="classvehicle.html#af366981a584e12d25133fb479d47de33">turn_dir</a> );</div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"> 1382</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span>        <span class="comment">// Not turning, keep face.dir</span></div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span>        mdir = <a class="code hl_variable" href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">face</a>;</div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span>    }</div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"> 1386</span> </div>
<div class="line"><a id="l01387" name="l01387"></a><span class="lineno"> 1387</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> dp;</div>
<div class="line"><a id="l01388" name="l01388"></a><span class="lineno"> 1388</span>    <span class="keywordflow">if</span>( std::abs( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> ) &gt;= 20 &amp;&amp; !falling_only ) {</div>
<div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span>        mdir.<a class="code hl_function" href="classtileray.html#a283722bbdbde0af59bbda1a26adc5b88">advance</a>( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &lt; 0 ? -1 : 1 );</div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span>        <span class="keywordflow">if</span>( rpres.<a class="code hl_variable" href="structvehicle__movement_1_1rail__processing__result.html#a894bbd71e540fd9488b350fa60a51096">do_shift</a> ) {</div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span>            dp.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> = rpres.<a class="code hl_variable" href="structvehicle__movement_1_1rail__processing__result.html#ac8a076ac2aafe3dc22aa6796ffdc04b3">shift_amount</a>.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a>;</div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span>            dp.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> = rpres.<a class="code hl_variable" href="structvehicle__movement_1_1rail__processing__result.html#ac8a076ac2aafe3dc22aa6796ffdc04b3">shift_amount</a>.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a>;</div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span>            dp.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> = mdir.<a class="code hl_function" href="classtileray.html#aefd7fd88fdbfecf5731bbff553a7aab8">dx</a>();</div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span>            dp.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> = mdir.<a class="code hl_function" href="classtileray.html#a27e3f200a89812a3d2fbc2e0e5710722">dy</a>();</div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span>        }</div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span>    }</div>
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span> </div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span>    <span class="keywordflow">if</span>( should_fall ) {</div>
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"> 1400</span>        dp.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> = -1;</div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"> 1401</span>        <a class="code hl_variable" href="classvehicle.html#a0a35b7f917fdb08e70a78315cc968f86">is_flying</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01402" name="l01402"></a><span class="lineno"> 1402</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"> 1403</span>        dp.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> = <a class="code hl_variable" href="classvehicle.html#aeb404e5f18eee80d104a7bb0680ac169">requested_z_change</a>;</div>
<div class="line"><a id="l01404" name="l01404"></a><span class="lineno"> 1404</span>        <a class="code hl_variable" href="classvehicle.html#aeb404e5f18eee80d104a7bb0680ac169">requested_z_change</a> = 0;</div>
<div class="line"><a id="l01405" name="l01405"></a><span class="lineno"> 1405</span>        <span class="keywordflow">if</span>( dp.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> &gt; 0 &amp;&amp; <a class="code hl_function" href="classvehicle.html#a292961ab33a42bf495d19b8692f6f105">is_rotorcraft</a>() ) {</div>
<div class="line"><a id="l01406" name="l01406"></a><span class="lineno"> 1406</span>            <a class="code hl_variable" href="classvehicle.html#a0a35b7f917fdb08e70a78315cc968f86">is_flying</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01407" name="l01407"></a><span class="lineno"> 1407</span>        }</div>
<div class="line"><a id="l01408" name="l01408"></a><span class="lineno"> 1408</span>    }</div>
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"> 1409</span> </div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"> 1410</span>    <span class="keywordflow">return</span> here.<a class="code hl_function" href="classmap.html#add9128611766f2a8095b0104f0fd7371">move_vehicle</a>( *<span class="keyword">this</span>, dp, mdir );</div>
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"> 1411</span>}</div>
<div class="ttc" id="acharacter_8cpp_html_a2fcb25d686f4a35fca374c6f71280311"><div class="ttname"><a href="character_8cpp.html#a2fcb25d686f4a35fca374c6f71280311">get_player_character</a></div><div class="ttdeci">Character &amp; get_player_character()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00381">character.cpp:381</a></div></div>
<div class="ttc" id="aclassCharacter_html"><div class="ttname"><a href="classCharacter.html">Character</a></div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00259">character.h:260</a></div></div>
<div class="ttc" id="aclassmap_html"><div class="ttname"><a href="classmap.html">map</a></div><div class="ttdoc">Manage and cache data about a part of the map.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00371">map.h:372</a></div></div>
<div class="ttc" id="aclassmap_html_a1d638822dc7c62d6ec6ee4f64ae0f4b2"><div class="ttname"><a href="classmap.html#a1d638822dc7c62d6ec6ee4f64ae0f4b2">map::vehicle_wheel_traction</a></div><div class="ttdeci">float vehicle_wheel_traction(const vehicle &amp;veh, bool ignore_movement_modifiers=false) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l01501">vehicle_move.cpp:1501</a></div></div>
<div class="ttc" id="aclassmap_html_a46608709f68358365d0734b1063fed73"><div class="ttname"><a href="classmap.html#a46608709f68358365d0734b1063fed73">map::inbounds</a></div><div class="ttdeci">virtual bool inbounds(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l07588">map.cpp:7588</a></div></div>
<div class="ttc" id="aclassmap_html_aac63fb28872f612df34a7f9a86898ed7"><div class="ttname"><a href="classmap.html#aac63fb28872f612df34a7f9a86898ed7">map::on_vehicle_moved</a></div><div class="ttdeci">void on_vehicle_moved(int smz)</div><div class="ttdoc">Callback invoked when a vehicle has moved.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00389">map.cpp:389</a></div></div>
<div class="ttc" id="aclassmap_html_ac7f59f4bc6fad84a8d8c0ddd4e023734"><div class="ttname"><a href="classmap.html#ac7f59f4bc6fad84a8d8c0ddd4e023734">map::destroy_vehicle</a></div><div class="ttdeci">void destroy_vehicle(vehicle *veh)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00384">map.cpp:384</a></div></div>
<div class="ttc" id="aclassmap_html_add9128611766f2a8095b0104f0fd7371"><div class="ttname"><a href="classmap.html#add9128611766f2a8095b0104f0fd7371">map::move_vehicle</a></div><div class="ttdeci">vehicle * move_vehicle(vehicle &amp;veh, const tripoint &amp;dp, const tileray &amp;facing)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00504">map.cpp:504</a></div></div>
<div class="ttc" id="aclassplayer_html"><div class="ttname"><a href="classplayer.html">player</a></div><div class="ttdef"><b>Definition:</b> <a href="player_8h_source.html#l00098">player.h:99</a></div></div>
<div class="ttc" id="aclassplayer_html_aa57c61de29a5e410c100aee07798b9b1"><div class="ttname"><a href="classplayer.html#aa57c61de29a5e410c100aee07798b9b1">player::practice</a></div><div class="ttdeci">void practice(const skill_id &amp;id, int amount, int cap=99, bool suppress_warning=false)</div><div class="ttdoc">This handles giving xp for a skill.</div><div class="ttdef"><b>Definition:</b> <a href="player_8cpp_source.html#l04005">player.cpp:4005</a></div></div>
<div class="ttc" id="aclasstileray_html"><div class="ttname"><a href="classtileray.html">tileray</a></div><div class="ttdef"><b>Definition:</b> <a href="tileray_8h_source.html#l00026">tileray.h:27</a></div></div>
<div class="ttc" id="aclasstileray_html_a27e3f200a89812a3d2fbc2e0e5710722"><div class="ttname"><a href="classtileray.html#a27e3f200a89812a3d2fbc2e0e5710722">tileray::dy</a></div><div class="ttdeci">int dy() const</div><div class="ttdef"><b>Definition:</b> <a href="tileray_8cpp_source.html#l00069">tileray.cpp:69</a></div></div>
<div class="ttc" id="aclasstileray_html_a283722bbdbde0af59bbda1a26adc5b88"><div class="ttname"><a href="classtileray.html#a283722bbdbde0af59bbda1a26adc5b88">tileray::advance</a></div><div class="ttdeci">void advance(int num=1)</div><div class="ttdef"><b>Definition:</b> <a href="tileray_8cpp_source.html#l00194">tileray.cpp:194</a></div></div>
<div class="ttc" id="aclasstileray_html_a91ed01227e1754597024f4916f8bd6af"><div class="ttname"><a href="classtileray.html#a91ed01227e1754597024f4916f8bd6af">tileray::dir</a></div><div class="ttdeci">units::angle dir() const</div><div class="ttdef"><b>Definition:</b> <a href="tileray_8cpp_source.html#l00074">tileray.cpp:74</a></div></div>
<div class="ttc" id="aclasstileray_html_aefd7fd88fdbfecf5731bbff553a7aab8"><div class="ttname"><a href="classtileray.html#aefd7fd88fdbfecf5731bbff553a7aab8">tileray::dx</a></div><div class="ttdeci">int dx() const</div><div class="ttdef"><b>Definition:</b> <a href="tileray_8cpp_source.html#l00064">tileray.cpp:64</a></div></div>
<div class="ttc" id="aclassvehicle_html_a00f013bfeaa4b6d44eaa67961f0c1e59"><div class="ttname"><a href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">vehicle::part_with_feature</a></div><div class="ttdeci">int part_with_feature(int p, const std::string &amp;f, bool unbroken) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02518">vehicle.cpp:2518</a></div></div>
<div class="ttc" id="aclassvehicle_html_a1380ff85985897f9f8a34eba538e04db"><div class="ttname"><a href="classvehicle.html#a1380ff85985897f9f8a34eba538e04db">vehicle::turn</a></div><div class="ttdeci">void turn(units::angle deg)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l00324">vehicle_move.cpp:324</a></div></div>
<div class="ttc" id="aclassvehicle_html_a222ab75111163098b53f34a28e017dad"><div class="ttname"><a href="classvehicle.html#a222ab75111163098b53f34a28e017dad">vehicle::unboard_all</a></div><div class="ttdeci">void unboard_all()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06165">vehicle.cpp:6165</a></div></div>
<div class="ttc" id="aclassvehicle_html_a320ca34b5c38568efd801731cef78a35"><div class="ttname"><a href="classvehicle.html#a320ca34b5c38568efd801731cef78a35">vehicle::skidding</a></div><div class="ttdeci">bool skidding</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01940">vehicle.h:1940</a></div></div>
<div class="ttc" id="aclassvehicle_html_a341515426011486c265d016c35f84de6"><div class="ttname"><a href="classvehicle.html#a341515426011486c265d016c35f84de6">vehicle::player_in_control</a></div><div class="ttdeci">bool player_in_control(const Character &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l00277">vehicle.cpp:277</a></div></div>
<div class="ttc" id="aclassvehicle_html_a3900ee345be0453828a955a200154db1"><div class="ttname"><a href="classvehicle.html#a3900ee345be0453828a955a200154db1">vehicle::global_pos3</a></div><div class="ttdeci">tripoint global_pos3() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03101">vehicle.cpp:3101</a></div></div>
<div class="ttc" id="aclassvehicle_html_a416a2bc9ee792663fced3344db322cb8"><div class="ttname"><a href="classvehicle.html#a416a2bc9ee792663fced3344db322cb8">vehicle::vertical_velocity</a></div><div class="ttdeci">int vertical_velocity</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01865">vehicle.h:1865</a></div></div>
<div class="ttc" id="aclassvehicle_html_a441fa41f264fb7bc45df81d71244a0d1"><div class="ttname"><a href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">vehicle::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01792">vehicle.h:1792</a></div></div>
<div class="ttc" id="aclassvehicle_html_a4d83e86fe57ec6126893a68f68c3c304"><div class="ttname"><a href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">vehicle::velocity</a></div><div class="ttdeci">int velocity</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01861">vehicle.h:1861</a></div></div>
<div class="ttc" id="aclassvehicle_html_a9c46063d58fd3a05504dec8bb8b6e837"><div class="ttname"><a href="classvehicle.html#a9c46063d58fd3a05504dec8bb8b6e837">vehicle::can_use_rails</a></div><div class="ttdeci">bool can_use_rails() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03369">vehicle.cpp:3369</a></div></div>
<div class="ttc" id="aclassvehicle_html_a9d41a3f9a7969c40ca5a9b7b5a3fdebe"><div class="ttname"><a href="classvehicle.html#a9d41a3f9a7969c40ca5a9b7b5a3fdebe">vehicle::k_traction</a></div><div class="ttdeci">float k_traction(float wheel_traction_area) const</div><div class="ttdoc">Traction coefficient of the vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04097">vehicle.cpp:4097</a></div></div>
<div class="ttc" id="aclassvehicle_html_ab3ca604dd9cd1907f37c8a888934a1d3"><div class="ttname"><a href="classvehicle.html#ab3ca604dd9cd1907f37c8a888934a1d3">vehicle::stop</a></div><div class="ttdeci">void stop(bool update_cache=true)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l00338">vehicle_move.cpp:338</a></div></div>
<div class="ttc" id="aclassvehicle_html_ab429af6376b555746f92158331f2a4cf"><div class="ttname"><a href="classvehicle.html#ab429af6376b555746f92158331f2a4cf">vehicle::boarded_parts</a></div><div class="ttdeci">std::vector&lt; int &gt; boarded_parts() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03047">vehicle.cpp:3047</a></div></div>
<div class="ttc" id="aclassvehicle_html_abeeecc873ea4841652366d8ffc6c3bfe"><div class="ttname"><a href="classvehicle.html#abeeecc873ea4841652366d8ffc6c3bfe">vehicle::decrement_summon_timer</a></div><div class="ttdeci">bool decrement_summon_timer()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05425">vehicle.cpp:5425</a></div></div>
<div class="ttc" id="aclassvehicle_html_ac460f925a21efb9dea1dc0fc2f930609"><div class="ttname"><a href="classvehicle.html#ac460f925a21efb9dea1dc0fc2f930609">vehicle::can_float</a></div><div class="ttdeci">bool can_float() const</div><div class="ttdoc">can_float does the vehicle have freeboard or does it overflow with water?</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03974">vehicle.cpp:3974</a></div></div>
<div class="ttc" id="aclassvehicle_html_ae3cbbbb890aa9a12504ec3458746f3e1"><div class="ttname"><a href="classvehicle.html#ae3cbbbb890aa9a12504ec3458746f3e1">vehicle::is_floating</a></div><div class="ttdeci">bool is_floating</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01913">vehicle.h:1913</a></div></div>
<div class="ttc" id="aclassvehicle_html_ae94902df801fd06056734d05ea98aa0f"><div class="ttname"><a href="classvehicle.html#ae94902df801fd06056734d05ea98aa0f">vehicle::floating</a></div><div class="ttdeci">std::vector&lt; int &gt; floating</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01767">vehicle.h:1767</a></div></div>
<div class="ttc" id="aclassvehicle_html_aeafb913ad9b9d1341d51a4c51ba43a06"><div class="ttname"><a href="classvehicle.html#aeafb913ad9b9d1341d51a4c51ba43a06">vehicle::is_falling</a></div><div class="ttdeci">bool is_falling</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01946">vehicle.h:1946</a></div></div>
<div class="ttc" id="aclassvehicle_html_aeb404e5f18eee80d104a7bb0680ac169"><div class="ttname"><a href="classvehicle.html#aeb404e5f18eee80d104a7bb0680ac169">vehicle::requested_z_change</a></div><div class="ttdeci">int requested_z_change</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01918">vehicle.h:1918</a></div></div>
<div class="ttc" id="aclassvehicle_html_af02a0418851ddf50fcc810951d77b076"><div class="ttname"><a href="classvehicle.html#af02a0418851ddf50fcc810951d77b076">vehicle::get_passenger</a></div><div class="ttdeci">player * get_passenger(int p) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03073">vehicle.cpp:3073</a></div></div>
<div class="ttc" id="aclassvehicle_html_af757f49411232815e121faa825d415f7"><div class="ttname"><a href="classvehicle.html#af757f49411232815e121faa825d415f7">vehicle::of_turn</a></div><div class="ttdeci">float of_turn</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01874">vehicle.h:1874</a></div></div>
<div class="ttc" id="adebug_8h_html_a157bb3f8cadfd404439ad477a19e8515a4059b0251f66a18cb56f544728796875"><div class="ttname"><a href="debug_8h.html#a157bb3f8cadfd404439ad477a19e8515a4059b0251f66a18cb56f544728796875">DL::Info</a></div><div class="ttdeci">@ Info</div><div class="ttdoc">Information (default: enabled).</div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a></div><div class="ttdeci">@ m_info</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00258">enums.h:258</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00254">enums.h:254</a></div></div>
<div class="ttc" id="agame_8cpp_html_abeb98e93502d73818b4a73fabe191bc1"><div class="ttname"><a href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a></div><div class="ttdeci">std::unique_ptr&lt; game &gt; g</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00267">game.cpp:267</a></div></div>
<div class="ttc" id="amap_8cpp_html_acb0b34be6e497bdd2f9f40ae6929d562"><div class="ttname"><a href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00141">map.cpp:141</a></div></div>
<div class="ttc" id="amessages_8cpp_html_a54489326fc37823819c5105addfa27f2"><div class="ttname"><a href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a></div><div class="ttdeci">void add_msg(std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l00884">messages.cpp:884</a></div></div>
<div class="ttc" id="anamespacevehicle__movement_html_a90bf274fc2c6eb229613c63739d8e2c1"><div class="ttname"><a href="namespacevehicle__movement.html#a90bf274fc2c6eb229613c63739d8e2c1">vehicle_movement::process_movement_on_rails</a></div><div class="ttdeci">rail_processing_result process_movement_on_rails(const map &amp;m, const vehicle &amp;veh)</div><div class="ttdoc">Decides how the vehicle should move in order to follow rails, or get on rails.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l01768">vehicle_move.cpp:1768</a></div></div>
<div class="ttc" id="anamespacevehicle__movement_html_ad2c532fb5522d745b0006f7a3b36cab3"><div class="ttname"><a href="namespacevehicle__movement.html#ad2c532fb5522d745b0006f7a3b36cab3">vehicle_movement::is_on_rails</a></div><div class="ttdeci">bool is_on_rails(const map &amp;m, const vehicle &amp;veh)</div><div class="ttdoc">Returns whether the vehicle is currently on rails.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l01850">vehicle_move.cpp:1850</a></div></div>
<div class="ttc" id="anamespacevehicles_html_a002783f4304f09443cfa9fa8efa9f6d4"><div class="ttname"><a href="namespacevehicles.html#a002783f4304f09443cfa9fa8efa9f6d4">vehicles::vmiph_per_tile</a></div><div class="ttdeci">constexpr float vmiph_per_tile</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00068">vehicle.h:68</a></div></div>
<div class="ttc" id="arng_8cpp_html_aad28bdad07401a34ecf9912708f8b750"><div class="ttname"><a href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a></div><div class="ttdeci">bool one_in(int chance)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00065">rng.cpp:65</a></div></div>
<div class="ttc" id="astructtripoint_html"><div class="ttname"><a href="structtripoint.html">tripoint</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00147">point.h:147</a></div></div>
<div class="ttc" id="astructtripoint_html_a89f6c0a16e2bfd7ce4f1f1d20404c4d7"><div class="ttname"><a href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">tripoint::y</a></div><div class="ttdeci">int y</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00151">point.h:151</a></div></div>
<div class="ttc" id="astructtripoint_html_ac944c0e329b5eba2602f7a52f66bbbb9"><div class="ttname"><a href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">tripoint::z</a></div><div class="ttdeci">int z</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00152">point.h:152</a></div></div>
<div class="ttc" id="astructtripoint_html_affdc0d5b75024cbfacd208a495def3dc"><div class="ttname"><a href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">tripoint::x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00150">point.h:150</a></div></div>
<div class="ttc" id="astructvehicle__movement_1_1rail__processing__result_html"><div class="ttname"><a href="structvehicle__movement_1_1rail__processing__result.html">vehicle_movement::rail_processing_result</a></div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8h_source.html#l00014">vehicle_move.h:14</a></div></div>
<div class="ttc" id="astructvehicle__movement_1_1rail__processing__result_html_a0a31255e2dd466d5580aa4446964f5c7"><div class="ttname"><a href="structvehicle__movement_1_1rail__processing__result.html#a0a31255e2dd466d5580aa4446964f5c7">vehicle_movement::rail_processing_result::turn_dir</a></div><div class="ttdeci">units::angle turn_dir</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8h_source.html#l00017">vehicle_move.h:17</a></div></div>
<div class="ttc" id="astructvehicle__movement_1_1rail__processing__result_html_a894bbd71e540fd9488b350fa60a51096"><div class="ttname"><a href="structvehicle__movement_1_1rail__processing__result.html#a894bbd71e540fd9488b350fa60a51096">vehicle_movement::rail_processing_result::do_shift</a></div><div class="ttdeci">bool do_shift</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8h_source.html#l00016">vehicle_move.h:16</a></div></div>
<div class="ttc" id="astructvehicle__movement_1_1rail__processing__result_html_aa10da2e7136704fa25a4af595ae7122b"><div class="ttname"><a href="structvehicle__movement_1_1rail__processing__result.html#aa10da2e7136704fa25a4af595ae7122b">vehicle_movement::rail_processing_result::do_turn</a></div><div class="ttdeci">bool do_turn</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8h_source.html#l00015">vehicle_move.h:15</a></div></div>
<div class="ttc" id="astructvehicle__movement_1_1rail__processing__result_html_ac8a076ac2aafe3dc22aa6796ffdc04b3"><div class="ttname"><a href="structvehicle__movement_1_1rail__processing__result.html#ac8a076ac2aafe3dc22aa6796ffdc04b3">vehicle_movement::rail_processing_result::shift_amount</a></div><div class="ttdeci">tripoint shift_amount</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8h_source.html#l00018">vehicle_move.h:18</a></div></div>
<div class="ttc" id="atranslations_8h_html_aa829053017e23ef22d44dccecba63a34"><div class="ttname"><a href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a></div><div class="ttdeci">#define _(msg)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00116">translations.h:116</a></div></div>
<div class="ttc" id="aunits__mass_8h_html_af9bdbc604b3753642c7d25280b6f3114"><div class="ttname"><a href="units__mass_8h.html#af9bdbc604b3753642c7d25280b6f3114">GRAVITY_OF_EARTH</a></div><div class="ttdeci">constexpr double GRAVITY_OF_EARTH</div><div class="ttdef"><b>Definition:</b> <a href="units__mass_8h_source.html#l00013">units_mass.h:13</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307ea1d493984c83c95a15238b6e21f4547d0"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea1d493984c83c95a15238b6e21f4547d0">VPFLAG_CONTROLS</a></div><div class="ttdeci">@ VPFLAG_CONTROLS</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00041">veh_type.h:41</a></div></div>
<div class="ttc" id="avehicle__move_8cpp_html_a3bf51af37129f24d376a74ca56b2644e"><div class="ttname"><a href="vehicle__move_8cpp.html#a3bf51af37129f24d376a74ca56b2644e">mps_to_vmiph</a></div><div class="ttdeci">int mps_to_vmiph(double mps)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l00066">vehicle_move.cpp:66</a></div></div>
<div class="ttc" id="avehicle__move_8cpp_html_a49bc164f30e64702250d2cbea09bf86c"><div class="ttname"><a href="vehicle__move_8cpp.html#a49bc164f30e64702250d2cbea09bf86c">dbg</a></div><div class="ttdeci">#define dbg(x)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l00044">vehicle_move.cpp:44</a></div></div>
<div class="ttc" id="avehicle__move_8cpp_html_a5b4f290597a25f2c2f9447eb786c37c5"><div class="ttname"><a href="vehicle__move_8cpp.html#a5b4f290597a25f2c2f9447eb786c37c5">vmiph_to_mps</a></div><div class="ttdeci">double vmiph_to_mps(int vmiph)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l00072">vehicle_move.cpp:72</a></div></div>
<div class="ttc" id="avehicle__move_8cpp_html_abc9fa7d03f14e2a5323ee0ff66e7938e"><div class="ttname"><a href="vehicle__move_8cpp.html#abc9fa7d03f14e2a5323ee0ff66e7938e">tile_height</a></div><div class="ttdeci">static const float tile_height</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l00059">vehicle_move.cpp:59</a></div></div>
<div class="ttc" id="avehicle__move_8cpp_html_afee8dcfd12a225c469ee6171063d7594"><div class="ttname"><a href="vehicle__move_8cpp.html#afee8dcfd12a225c469ee6171063d7594">skill_driving</a></div><div class="ttdeci">static const skill_id skill_driving(&quot;driving&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="tileray_8cpp_source.html#l00194">tileray::advance()</a>, <a class="el" href="vehicle_8cpp_source.html#l03047">boarded_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l03974">can_float()</a>, <a class="el" href="vehicle_8cpp_source.html#l03369">can_use_rails()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00044">dbg</a>, <a class="el" href="vehicle_8cpp_source.html#l05425">decrement_summon_timer()</a>, <a class="el" href="map_8cpp_source.html#l00384">map::destroy_vehicle()</a>, <a class="el" href="tileray_8cpp_source.html#l00074">tileray::dir()</a>, <a class="el" href="vehicle__move_8h_source.html#l00016">vehicle_movement::rail_processing_result::do_shift</a>, <a class="el" href="vehicle__move_8h_source.html#l00015">vehicle_movement::rail_processing_result::do_turn</a>, <a class="el" href="tileray_8cpp_source.html#l00064">tileray::dx()</a>, <a class="el" href="tileray_8cpp_source.html#l00069">tileray::dy()</a>, <a class="el" href="vehicle_8h_source.html#l01891">face</a>, <a class="el" href="vehicle_8h_source.html#l01767">floating</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="map_8cpp_source.html#l00141">get_map()</a>, <a class="el" href="vehicle_8cpp_source.html#l03073">get_passenger()</a>, <a class="el" href="character_8cpp_source.html#l00381">get_player_character()</a>, <a class="el" href="vehicle_8cpp_source.html#l03101">global_pos3()</a>, <a class="el" href="units__mass_8h_source.html#l00013">GRAVITY_OF_EARTH</a>, <a class="el" href="map_8cpp_source.html#l07588">map::inbounds()</a>, <a class="el" href="debug_8h.html#a157bb3f8cadfd404439ad477a19e8515a4059b0251f66a18cb56f544728796875">Info</a>, <a class="el" href="tileray_8cpp_source.html#l00027">tileray::init()</a>, <a class="el" href="vehicle_8h_source.html#l01946">is_falling</a>, <a class="el" href="vehicle_8h_source.html#l01913">is_floating</a>, <a class="el" href="vehicle_8h_source.html#l01917">is_flying</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01850">vehicle_movement::is_on_rails()</a>, <a class="el" href="vehicle_8cpp_source.html#l04017">is_rotorcraft()</a>, <a class="el" href="vehicle_8cpp_source.html#l04097">k_traction()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="vehicle_8h_source.html#l01893">move</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00066">mps_to_vmiph()</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="vehicle_8h_source.html#l01874">of_turn</a>, <a class="el" href="vehicle_8h_source.html#l01876">of_turn_carry</a>, <a class="el" href="map_8cpp_source.html#l00389">map::on_vehicle_moved()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="vehicle_8cpp_source.html#l02518">part_with_feature()</a>, <a class="el" href="vehicle_8cpp_source.html#l00277">player_in_control()</a>, <a class="el" href="player_8cpp_source.html#l04005">player::practice()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01768">vehicle_movement::process_movement_on_rails()</a>, <a class="el" href="vehicle_8h_source.html#l01918">requested_z_change</a>, <a class="el" href="vehicle__move_8h_source.html#l00018">vehicle_movement::rail_processing_result::shift_amount</a>, <a class="el" href="vehicle_8h_source.html#l01940">skidding</a>, <a class="el" href="vehicle__move_8cpp.html#afee8dcfd12a225c469ee6171063d7594">skill_driving</a>, <a class="el" href="vehicle_8h_source.html#l01844">sm_pos</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00338">stop()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00059">tile_height</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00324">turn()</a>, <a class="el" href="vehicle_8h_source.html#l01870">turn_dir</a>, <a class="el" href="vehicle__move_8h_source.html#l00017">vehicle_movement::rail_processing_result::turn_dir</a>, <a class="el" href="vehicle_8cpp_source.html#l06165">unboard_all()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01501">map::vehicle_wheel_traction()</a>, <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>, <a class="el" href="vehicle_8h_source.html#l01865">vertical_velocity</a>, <a class="el" href="vehicle_8h_source.html#l00068">vehicles::vmiph_per_tile</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00072">vmiph_to_mps()</a>, <a class="el" href="veh__type_8h_source.html#l00041">VPFLAG_CONTROLS</a>, <a class="el" href="point_8h_source.html#l00150">tripoint::x</a>, <a class="el" href="point_8h_source.html#l00151">tripoint::y</a>, and <a class="el" href="point_8h_source.html#l00152">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l00446">map::vehproceed()</a>.</p>

</div>
</div>
<a id="af43257f1119ebd767a92ed574685cb60" name="af43257f1119ebd767a92ed574685cb60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af43257f1119ebd767a92ed574685cb60">&#9670;&nbsp;</a></span>activate_animal_follow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::activate_animal_follow </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l00683">683</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>{</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> e = 0; e &lt; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size(); e++ ) {</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>        <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ e ];</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>        <span class="keywordflow">if</span>( vp.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_variable" href="classvpart__info.html#ae9c50d26b3cc88604ae85573ee6599cd">fuel_type</a> == <a class="code hl_variable" href="vehicle_8cpp.html#a944ba9be1d911a61e9ca62af989355fd">fuel_type_animal</a> ) {</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>            <a class="code hl_class" href="classmonster.html">monster</a> *mon = <a class="code hl_function" href="classvehicle.html#ab266c3250ffece69b5c2ddc9897d80d3">get_pet</a>( e );</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>            <span class="keywordflow">if</span>( mon &amp;&amp; mon-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="vehicle_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a> ) ) {</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>                vp.<a class="code hl_variable" href="structvehicle__part.html#a27a7cba7268cb7d3550ed2b7c9adc323">enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>                <a class="code hl_variable" href="classvehicle.html#a26f98c384048e03538bca10e4f26905d">is_following</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>                <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>            }</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>            vp.<a class="code hl_variable" href="structvehicle__part.html#a27a7cba7268cb7d3550ed2b7c9adc323">enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>        }</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>    }</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>    <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>}</div>
<div class="ttc" id="aclassCreature_html_a6fb79df9315dc2bed6f34d9a2e37da90"><div class="ttname"><a href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">Creature::has_effect</a></div><div class="ttdeci">bool has_effect(const efftype_id &amp;eff_id, body_part bp=num_bp) const</div><div class="ttdoc">Check if creature has the matching effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01173">creature.cpp:1173</a></div></div>
<div class="ttc" id="aclassmonster_html"><div class="ttname"><a href="classmonster.html">monster</a></div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00083">monster.h:84</a></div></div>
<div class="ttc" id="aclassvehicle_html_a0ccf22f114d5d8f239ebe58f5c8f70ad"><div class="ttname"><a href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">vehicle::engine_on</a></div><div class="ttdeci">bool engine_on</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01930">vehicle.h:1930</a></div></div>
<div class="ttc" id="aclassvehicle_html_a26f98c384048e03538bca10e4f26905d"><div class="ttname"><a href="classvehicle.html#a26f98c384048e03538bca10e4f26905d">vehicle::is_following</a></div><div class="ttdeci">bool is_following</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01924">vehicle.h:1924</a></div></div>
<div class="ttc" id="aclassvehicle_html_ab266c3250ffece69b5c2ddc9897d80d3"><div class="ttname"><a href="classvehicle.html#ab266c3250ffece69b5c2ddc9897d80d3">vehicle::get_pet</a></div><div class="ttdeci">monster * get_pet(int p) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03082">vehicle.cpp:3082</a></div></div>
<div class="ttc" id="aclassvehicle_html_afac2bfaf9d2b400e9a9e171624f74c40"><div class="ttname"><a href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">vehicle::parts</a></div><div class="ttdeci">std::vector&lt; vehicle_part &gt; parts</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01733">vehicle.h:1733</a></div></div>
<div class="ttc" id="aclassvpart__info_html_ae9c50d26b3cc88604ae85573ee6599cd"><div class="ttname"><a href="classvpart__info.html#ae9c50d26b3cc88604ae85573ee6599cd">vpart_info::fuel_type</a></div><div class="ttdeci">itype_id fuel_type</div><div class="ttdoc">Fuel type of engine or tank.</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00203">veh_type.h:203</a></div></div>
<div class="ttc" id="astructvehicle__part_html"><div class="ttname"><a href="structvehicle__part.html">vehicle_part</a></div><div class="ttdoc">Structure, describing vehicle part (i.e., wheel, seat)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00185">vehicle.h:185</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a002a1023cd1a96d43556a1b912ebd27b"><div class="ttname"><a href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">vehicle_part::info</a></div><div class="ttdeci">const vpart_info &amp; info() const</div><div class="ttdoc">Get part definition common to all parts of this type.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00519">vehicle_part.cpp:519</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a27a7cba7268cb7d3550ed2b7c9adc323"><div class="ttname"><a href="structvehicle__part.html#a27a7cba7268cb7d3550ed2b7c9adc323">vehicle_part::enabled</a></div><div class="ttdeci">bool enabled</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00411">vehicle.h:411</a></div></div>
<div class="ttc" id="avehicle_8cpp_html_a7697771dc47ecaeff36785ff20c9aa33"><div class="ttname"><a href="vehicle_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a></div><div class="ttdeci">static const efftype_id effect_harnessed(&quot;harnessed&quot;)</div></div>
<div class="ttc" id="avehicle_8cpp_html_a944ba9be1d911a61e9ca62af989355fd"><div class="ttname"><a href="vehicle_8cpp.html#a944ba9be1d911a61e9ca62af989355fd">fuel_type_animal</a></div><div class="ttdeci">static const itype_id fuel_type_animal(&quot;animal&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a>, <a class="el" href="vehicle_8h_source.html#l00411">vehicle_part::enabled</a>, <a class="el" href="vehicle_8h_source.html#l01930">engine_on</a>, <a class="el" href="veh__type_8h_source.html#l00203">vpart_info::fuel_type</a>, <a class="el" href="vehicle_8cpp.html#a944ba9be1d911a61e9ca62af989355fd">fuel_type_animal</a>, <a class="el" href="vehicle_8cpp_source.html#l03082">get_pet()</a>, <a class="el" href="creature_8cpp_source.html#l01173">Creature::has_effect()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00519">vehicle_part::info()</a>, <a class="el" href="vehicle_8h_source.html#l01924">is_following</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l00350">assign_veh_to_follow()</a>.</p>

</div>
</div>
<a id="a3e5ef7a7ef85f65f6f159d29f5fc11c8" name="a3e5ef7a7ef85f65f6f159d29f5fc11c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e5ef7a7ef85f65f6f159d29f5fc11c8">&#9670;&nbsp;</a></span>activate_magical_follow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::activate_magical_follow </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l00669">669</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>{</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>    <span class="keywordflow">for</span>( <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;vp : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>        <span class="keywordflow">if</span>( vp.info().fuel_type == <a class="code hl_variable" href="vehicle_8cpp.html#adf09e0f2410a6b0b61ebc369b0ce462c">fuel_type_mana</a> ) {</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>            vp.enabled = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>            <a class="code hl_variable" href="classvehicle.html#a26f98c384048e03538bca10e4f26905d">is_following</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>            <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>            vp.enabled = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>        }</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>    }</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>    <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>}</div>
<div class="ttc" id="avehicle_8cpp_html_adf09e0f2410a6b0b61ebc369b0ce462c"><div class="ttname"><a href="vehicle_8cpp.html#adf09e0f2410a6b0b61ebc369b0ce462c">fuel_type_mana</a></div><div class="ttdeci">static const itype_id fuel_type_mana(&quot;mana&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01930">engine_on</a>, <a class="el" href="vehicle_8cpp.html#adf09e0f2410a6b0b61ebc369b0ce462c">fuel_type_mana</a>, <a class="el" href="vehicle_8h_source.html#l01924">is_following</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l00360">tell_magic_veh_to_follow()</a>.</p>

</div>
</div>
<a id="a2c87e616f3d0e1bd86165a9ef3bcd48a" name="a2c87e616f3d0e1bd86165a9ef3bcd48a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c87e616f3d0e1bd86165a9ef3bcd48a">&#9670;&nbsp;</a></span>add_charges()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::add_charges </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>part</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>itm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add an item counted by charges to the part's cargo. </p>
<dl class="section return"><dt>Returns</dt><dd>The number of charges added. </dd></dl>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05183">5183</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05184" name="l05184"></a><span class="lineno"> 5184</span>{</div>
<div class="line"><a id="l05185" name="l05185"></a><span class="lineno"> 5185</span>    <span class="keywordflow">if</span>( !itm.<a class="code hl_function" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() ) {</div>
<div class="line"><a id="l05186" name="l05186"></a><span class="lineno"> 5186</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Add charges was called for an item not counted by charges!&quot;</span> );</div>
<div class="line"><a id="l05187" name="l05187"></a><span class="lineno"> 5187</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l05188" name="l05188"></a><span class="lineno"> 5188</span>    }</div>
<div class="line"><a id="l05189" name="l05189"></a><span class="lineno"> 5189</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code hl_function" href="classvehicle.html#a983dd9db3cd64078b176a82289e0b260">get_items</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ).<a class="code hl_function" href="classitem__stack.html#aa4946926628c312fae47581b1fd66e19">amount_can_fit</a>( itm );</div>
<div class="line"><a id="l05190" name="l05190"></a><span class="lineno"> 5190</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> == 0 ) {</div>
<div class="line"><a id="l05191" name="l05191"></a><span class="lineno"> 5191</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l05192" name="l05192"></a><span class="lineno"> 5192</span>    }</div>
<div class="line"><a id="l05193" name="l05193"></a><span class="lineno"> 5193</span> </div>
<div class="line"><a id="l05194" name="l05194"></a><span class="lineno"> 5194</span>    <a class="code hl_class" href="classitem.html">item</a> itm_copy = itm;</div>
<div class="line"><a id="l05195" name="l05195"></a><span class="lineno"> 5195</span>    itm_copy.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l05196" name="l05196"></a><span class="lineno"> 5196</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a04426c7f3acf2455684972f092352cb0">add_item</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, itm_copy ) ? <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> : 0;</div>
<div class="line"><a id="l05197" name="l05197"></a><span class="lineno"> 5197</span>}</div>
<div class="ttc" id="aclassitem__stack_html_aa4946926628c312fae47581b1fd66e19"><div class="ttname"><a href="classitem__stack.html#aa4946926628c312fae47581b1fd66e19">item_stack::amount_can_fit</a></div><div class="ttdeci">int amount_can_fit(const item &amp;it) const</div><div class="ttdoc">Returns how many of the specified item (or how many charges if it's counted by charges) could be adde...</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00107">item_stack.cpp:107</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00175">item.h:176</a></div></div>
<div class="ttc" id="aclassitem_html_a40963a016376016eb408bdb9dbb94388"><div class="ttname"><a href="classitem.html#a40963a016376016eb408bdb9dbb94388">item::count_by_charges</a></div><div class="ttdeci">bool count_by_charges() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05855">item.cpp:5855</a></div></div>
<div class="ttc" id="aclassitem_html_a6bfb92ab5d41e0eb3a1da160fac71b0e"><div class="ttname"><a href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">item::charges</a></div><div class="ttdeci">int charges</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02195">item.h:2195</a></div></div>
<div class="ttc" id="aclassvehicle_html_a04426c7f3acf2455684972f092352cb0"><div class="ttname"><a href="classvehicle.html#a04426c7f3acf2455684972f092352cb0">vehicle::add_item</a></div><div class="ttdeci">cata::optional&lt; vehicle_stack::iterator &gt; add_item(int part, const item &amp;itm)</div><div class="ttdoc">Try to add an item to part's cargo.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05209">vehicle.cpp:5209</a></div></div>
<div class="ttc" id="aclassvehicle_html_a983dd9db3cd64078b176a82289e0b260"><div class="ttname"><a href="classvehicle.html#a983dd9db3cd64078b176a82289e0b260">vehicle::get_items</a></div><div class="ttdeci">vehicle_stack get_items(int part) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05288">vehicle.cpp:5288</a></div></div>
<div class="ttc" id="aclassvehicle_html_acdb2ebf673a32f657ac9e29b842ee7f5"><div class="ttname"><a href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">vehicle::part</a></div><div class="ttdeci">vehicle_part &amp; part(int part_num)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06892">vehicle.cpp:6892</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level DL::Error and class DC::DebugMsg, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00074">debug.h:74</a></div></div>
<div class="ttc" id="anamespacecata_1_1hash64__detail_html_a5ca825db6fd06946302c60daa97333e4"><div class="ttname"><a href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">cata::hash64_detail::ret</a></div><div class="ttdeci">T ret</div><div class="ttdef"><b>Definition:</b> <a href="hash__utils_8h_source.html#l00097">hash_utils.h:97</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l05209">add_item()</a>, <a class="el" href="item__stack_8cpp_source.html#l00107">item_stack::amount_can_fit()</a>, <a class="el" href="item_8h_source.html#l02195">item::charges</a>, <a class="el" href="item_8cpp_source.html#l05855">item::count_by_charges()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="vehicle_8cpp_source.html#l05288">get_items()</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, and <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__item__handling_8cpp_source.html#l00160">put_into_vehicle()</a>.</p>

</div>
</div>
<a id="a04426c7f3acf2455684972f092352cb0" name="a04426c7f3acf2455684972f092352cb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04426c7f3acf2455684972f092352cb0">&#9670;&nbsp;</a></span>add_item() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcata_1_1optional.html">cata::optional</a>&lt; <a class="el" href="classitem__stack.html#a711217cbaded7f3f13b4b54f9ef617af">vehicle_stack::iterator</a> &gt; vehicle::add_item </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>part</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>itm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try to add an item to part's cargo. </p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="namespacecata.html#ad05314667ac5d05f984aeeef26b9a87f">cata::nullopt</a> if it can't be put here (not a cargo part, adding this would violate the volume limit or item count limit, not all charges can fit, etc.) Otherwise, returns an iterator to the added item in the vehicle stack </dd></dl>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05209">5209</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05210" name="l05210"></a><span class="lineno"> 5210</span>{</div>
<div class="line"><a id="l05211" name="l05211"></a><span class="lineno"> 5211</span>    <span class="keywordflow">if</span>( part &lt; 0 || part &gt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size() ) ) {</div>
<div class="line"><a id="l05212" name="l05212"></a><span class="lineno"> 5212</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;int part (%d) is out of range&quot;</span>, <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> );</div>
<div class="line"><a id="l05213" name="l05213"></a><span class="lineno"> 5213</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata.html#ad05314667ac5d05f984aeeef26b9a87f">cata::nullopt</a>;</div>
<div class="line"><a id="l05214" name="l05214"></a><span class="lineno"> 5214</span>    }</div>
<div class="line"><a id="l05215" name="l05215"></a><span class="lineno"> 5215</span>    <span class="comment">// const int max_weight = ?! // TODO: weight limit, calculation per vpart &amp; vehicle stats, not a hard user limit.</span></div>
<div class="line"><a id="l05216" name="l05216"></a><span class="lineno"> 5216</span>    <span class="comment">// add creaking sounds and damage to overloaded vpart, outright break it past a certain point, or when hitting bumps etc</span></div>
<div class="line"><a id="l05217" name="l05217"></a><span class="lineno"> 5217</span>    <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;p = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ];</div>
<div class="line"><a id="l05218" name="l05218"></a><span class="lineno"> 5218</span>    <span class="keywordflow">if</span>( p.<a class="code hl_function" href="structvehicle__part.html#aeee4fac34f34d6c9ff557fde6590439d">is_broken</a>() ) {</div>
<div class="line"><a id="l05219" name="l05219"></a><span class="lineno"> 5219</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata.html#ad05314667ac5d05f984aeeef26b9a87f">cata::nullopt</a>;</div>
<div class="line"><a id="l05220" name="l05220"></a><span class="lineno"> 5220</span>    }</div>
<div class="line"><a id="l05221" name="l05221"></a><span class="lineno"> 5221</span> </div>
<div class="line"><a id="l05222" name="l05222"></a><span class="lineno"> 5222</span>    <span class="keywordflow">if</span>( p.<a class="code hl_variable" href="structvehicle__part.html#a5122e284fbcf0f14f0e6022e01b5b574">base</a>.<a class="code hl_function" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a id="l05223" name="l05223"></a><span class="lineno"> 5223</span>        <span class="keywordflow">if</span>( !itm.<a class="code hl_function" href="classitem.html#ac3cc4d74d020cbd36ae490cbe88f9152">is_ammo</a>() || !p.<a class="code hl_variable" href="structvehicle__part.html#a5122e284fbcf0f14f0e6022e01b5b574">base</a>.<a class="code hl_function" href="classitem.html#ac4f8c31c6aa17560f8f523290d568436">ammo_types</a>().count( itm.<a class="code hl_function" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a>() ) ) {</div>
<div class="line"><a id="l05224" name="l05224"></a><span class="lineno"> 5224</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata.html#ad05314667ac5d05f984aeeef26b9a87f">cata::nullopt</a>;</div>
<div class="line"><a id="l05225" name="l05225"></a><span class="lineno"> 5225</span>        }</div>
<div class="line"><a id="l05226" name="l05226"></a><span class="lineno"> 5226</span>    }</div>
<div class="line"><a id="l05227" name="l05227"></a><span class="lineno"> 5227</span>    <span class="keywordtype">bool</span> charge = itm.<a class="code hl_function" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>();</div>
<div class="line"><a id="l05228" name="l05228"></a><span class="lineno"> 5228</span>    <a class="code hl_class" href="classvehicle__stack.html">vehicle_stack</a> istack = <a class="code hl_function" href="classvehicle.html#a983dd9db3cd64078b176a82289e0b260">get_items</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> );</div>
<div class="line"><a id="l05229" name="l05229"></a><span class="lineno"> 5229</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> to_move = istack.<a class="code hl_function" href="classitem__stack.html#aa4946926628c312fae47581b1fd66e19">amount_can_fit</a>( itm );</div>
<div class="line"><a id="l05230" name="l05230"></a><span class="lineno"> 5230</span>    <span class="keywordflow">if</span>( to_move == 0 || ( charge &amp;&amp; to_move &lt; itm.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> ) ) {</div>
<div class="line"><a id="l05231" name="l05231"></a><span class="lineno"> 5231</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata.html#ad05314667ac5d05f984aeeef26b9a87f">cata::nullopt</a>; <span class="comment">// @add_charges should be used in the latter case</span></div>
<div class="line"><a id="l05232" name="l05232"></a><span class="lineno"> 5232</span>    }</div>
<div class="line"><a id="l05233" name="l05233"></a><span class="lineno"> 5233</span>    <span class="keywordflow">if</span>( charge ) {</div>
<div class="line"><a id="l05234" name="l05234"></a><span class="lineno"> 5234</span>        <a class="code hl_class" href="classitem.html">item</a> *here = istack.<a class="code hl_function" href="classitem__stack.html#ae6afd0352211138ab26d184a87b58766">stacks_with</a>( itm );</div>
<div class="line"><a id="l05235" name="l05235"></a><span class="lineno"> 5235</span>        <span class="keywordflow">if</span>( here ) {</div>
<div class="line"><a id="l05236" name="l05236"></a><span class="lineno"> 5236</span>            <a class="code hl_function" href="classvehicle.html#a8e8079a6591b3104191c881509f16d61">invalidate_mass</a>();</div>
<div class="line"><a id="l05237" name="l05237"></a><span class="lineno"> 5237</span>            <span class="keywordflow">if</span>( !here-&gt;<a class="code hl_function" href="classitem.html#a2d50ee340d6b9591ef0525425967b8fc">merge_charges</a>( itm ) ) {</div>
<div class="line"><a id="l05238" name="l05238"></a><span class="lineno"> 5238</span>                <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata.html#ad05314667ac5d05f984aeeef26b9a87f">cata::nullopt</a>;</div>
<div class="line"><a id="l05239" name="l05239"></a><span class="lineno"> 5239</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05240" name="l05240"></a><span class="lineno"> 5240</span>                <span class="keywordflow">return</span> <a class="code hl_class" href="classcata_1_1optional.html">cata::optional&lt;vehicle_stack::iterator&gt;</a>( istack.<a class="code hl_function" href="classitem__stack.html#a27413250792dac247d9d9e3187f48ce9">get_iterator_from_pointer</a>( here ) );</div>
<div class="line"><a id="l05241" name="l05241"></a><span class="lineno"> 5241</span>            }</div>
<div class="line"><a id="l05242" name="l05242"></a><span class="lineno"> 5242</span>        }</div>
<div class="line"><a id="l05243" name="l05243"></a><span class="lineno"> 5243</span>    }</div>
<div class="line"><a id="l05244" name="l05244"></a><span class="lineno"> 5244</span> </div>
<div class="line"><a id="l05245" name="l05245"></a><span class="lineno"> 5245</span>    <a class="code hl_class" href="classitem.html">item</a> itm_copy = itm;</div>
<div class="line"><a id="l05246" name="l05246"></a><span class="lineno"> 5246</span> </div>
<div class="line"><a id="l05247" name="l05247"></a><span class="lineno"> 5247</span>    <span class="keywordflow">if</span>( itm_copy.<a class="code hl_function" href="classitem.html#af84e26c1418a4d090bbf55174431b6ac">is_bucket_nonempty</a>() ) {</div>
<div class="line"><a id="l05248" name="l05248"></a><span class="lineno"> 5248</span>        itm_copy.<a class="code hl_variable" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code hl_function" href="classitem__contents.html#a279305b87c2b0f995ba8fc59c88fbaa8">spill_contents</a>( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ) );</div>
<div class="line"><a id="l05249" name="l05249"></a><span class="lineno"> 5249</span>    }</div>
<div class="line"><a id="l05250" name="l05250"></a><span class="lineno"> 5250</span> </div>
<div class="line"><a id="l05251" name="l05251"></a><span class="lineno"> 5251</span>    <span class="keyword">const</span> <a class="code hl_class" href="classcata_1_1colony_1_1colony__iterator.html">vehicle_stack::iterator</a> new_pos = p.<a class="code hl_variable" href="structvehicle__part.html#ad59383d4f9c006ff499082dd5a600d9f">items</a>.insert( itm_copy );</div>
<div class="line"><a id="l05252" name="l05252"></a><span class="lineno"> 5252</span>    <span class="keywordflow">if</span>( itm_copy.<a class="code hl_function" href="classitem.html#a22d1f85c07bab6621bbd16d301b22bbf">needs_processing</a>() ) {</div>
<div class="line"><a id="l05253" name="l05253"></a><span class="lineno"> 5253</span>        <a class="code hl_variable" href="classvehicle.html#ad7894d7d5b3a20fb16927cd95d4d2a04">active_items</a>.<a class="code hl_function" href="classactive__item__cache.html#a5fa98979f3b77cce8696282184928af3">add</a>( *new_pos, p.<a class="code hl_variable" href="structvehicle__part.html#ac6e2dfa7178b8bed91baea3543961a86">mount</a> );</div>
<div class="line"><a id="l05254" name="l05254"></a><span class="lineno"> 5254</span>    }</div>
<div class="line"><a id="l05255" name="l05255"></a><span class="lineno"> 5255</span> </div>
<div class="line"><a id="l05256" name="l05256"></a><span class="lineno"> 5256</span>    <a class="code hl_function" href="classvehicle.html#a8e8079a6591b3104191c881509f16d61">invalidate_mass</a>();</div>
<div class="line"><a id="l05257" name="l05257"></a><span class="lineno"> 5257</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="classcata_1_1optional.html">cata::optional&lt;vehicle_stack::iterator&gt;</a>( new_pos );</div>
<div class="line"><a id="l05258" name="l05258"></a><span class="lineno"> 5258</span>}</div>
<div class="ttc" id="aclassactive__item__cache_html_a5fa98979f3b77cce8696282184928af3"><div class="ttname"><a href="classactive__item__cache.html#a5fa98979f3b77cce8696282184928af3">active_item_cache::add</a></div><div class="ttdeci">void add(item &amp;it, point location)</div><div class="ttdoc">Adds the reference to the cache.</div><div class="ttdef"><b>Definition:</b> <a href="active__item__cache_8cpp_source.html#l00030">active_item_cache.cpp:30</a></div></div>
<div class="ttc" id="aclasscata_1_1colony_1_1colony__iterator_html"><div class="ttname"><a href="classcata_1_1colony_1_1colony__iterator.html">cata::colony::colony_iterator&lt; false &gt;</a></div></div>
<div class="ttc" id="aclasscata_1_1optional_html"><div class="ttname"><a href="classcata_1_1optional.html">cata::optional</a></div><div class="ttdef"><b>Definition:</b> <a href="optional_8h_source.html#l00030">optional.h:31</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a279305b87c2b0f995ba8fc59c88fbaa8"><div class="ttname"><a href="classitem__contents.html#a279305b87c2b0f995ba8fc59c88fbaa8">item_contents::spill_contents</a></div><div class="ttdeci">bool spill_contents(const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00032">item_contents.cpp:32</a></div></div>
<div class="ttc" id="aclassitem__stack_html_a27413250792dac247d9d9e3187f48ce9"><div class="ttname"><a href="classitem__stack.html#a27413250792dac247d9d9e3187f48ce9">item_stack::get_iterator_from_pointer</a></div><div class="ttdeci">iterator get_iterator_from_pointer(item *it)</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00068">item_stack.cpp:68</a></div></div>
<div class="ttc" id="aclassitem__stack_html_ae6afd0352211138ab26d184a87b58766"><div class="ttname"><a href="classitem__stack.html#ae6afd0352211138ab26d184a87b58766">item_stack::stacks_with</a></div><div class="ttdeci">item * stacks_with(const item &amp;it)</div><div class="ttdoc">Return the item (or nullptr) that stacks with the argument.</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00121">item_stack.cpp:121</a></div></div>
<div class="ttc" id="aclassitem_html_a22d1f85c07bab6621bbd16d301b22bbf"><div class="ttname"><a href="classitem.html#a22d1f85c07bab6621bbd16d301b22bbf">item::needs_processing</a></div><div class="ttdeci">bool needs_processing() const</div><div class="ttdoc">Whether the item should be processed (by calling process).</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08772">item.cpp:8772</a></div></div>
<div class="ttc" id="aclassitem_html_a2912b2e15a4eec07a5070fffbbd152e8"><div class="ttname"><a href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">item::is_gun</a></div><div class="ttdeci">bool is_gun() const</div><div class="ttdoc">Can this item be used to perform a ranged attack?</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06367">item.cpp:6367</a></div></div>
<div class="ttc" id="aclassitem_html_a2d50ee340d6b9591ef0525425967b8fc"><div class="ttname"><a href="classitem.html#a2d50ee340d6b9591ef0525425967b8fc">item::merge_charges</a></div><div class="ttdeci">bool merge_charges(const item &amp;rhs)</div><div class="ttdoc">Merge charges of the other item into this item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00968">item.cpp:968</a></div></div>
<div class="ttc" id="aclassitem_html_a4afe851abb42cbff0857065860f96e0e"><div class="ttname"><a href="classitem.html#a4afe851abb42cbff0857065860f96e0e">item::contents</a></div><div class="ttdeci">item_contents contents</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02157">item.h:2157</a></div></div>
<div class="ttc" id="aclassitem_html_aab4f4feeb64f169f408c24d03e0ce61f"><div class="ttname"><a href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">item::ammo_type</a></div><div class="ttdeci">ammotype ammo_type() const</div><div class="ttdoc">Ammo type of an ammo item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07431">item.cpp:7431</a></div></div>
<div class="ttc" id="aclassitem_html_ac3cc4d74d020cbd36ae490cbe88f9152"><div class="ttname"><a href="classitem.html#ac3cc4d74d020cbd36ae490cbe88f9152">item::is_ammo</a></div><div class="ttdeci">bool is_ammo() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06432">item.cpp:6432</a></div></div>
<div class="ttc" id="aclassitem_html_ac4f8c31c6aa17560f8f523290d568436"><div class="ttname"><a href="classitem.html#ac4f8c31c6aa17560f8f523290d568436">item::ammo_types</a></div><div class="ttdeci">const std::set&lt; ammotype &gt; &amp; ammo_types(bool conversion=true) const</div><div class="ttdoc">Set of ammo types (ammunition_type) used by item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07408">item.cpp:7408</a></div></div>
<div class="ttc" id="aclassitem_html_af84e26c1418a4d090bbf55174431b6ac"><div class="ttname"><a href="classitem.html#af84e26c1418a4d090bbf55174431b6ac">item::is_bucket_nonempty</a></div><div class="ttdeci">bool is_bucket_nonempty() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06595">item.cpp:6595</a></div></div>
<div class="ttc" id="aclassvehicle__stack_html"><div class="ttname"><a href="classvehicle__stack.html">vehicle_stack</a></div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00122">vehicle.h:123</a></div></div>
<div class="ttc" id="aclassvehicle_html_a8e8079a6591b3104191c881509f16d61"><div class="ttname"><a href="classvehicle.html#a8e8079a6591b3104191c881509f16d61">vehicle::invalidate_mass</a></div><div class="ttdeci">void invalidate_mass()</div><div class="ttdoc">Mark mass caches and pivot cache as dirty.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06778">vehicle.cpp:6778</a></div></div>
<div class="ttc" id="aclassvehicle_html_ad7894d7d5b3a20fb16927cd95d4d2a04"><div class="ttname"><a href="classvehicle.html#ad7894d7d5b3a20fb16927cd95d4d2a04">vehicle::active_items</a></div><div class="ttdeci">active_item_cache active_items</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01807">vehicle.h:1807</a></div></div>
<div class="ttc" id="aclassvehicle_html_ae8132c34a1ea24866889e6e599796adc"><div class="ttname"><a href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">vehicle::global_part_pos3</a></div><div class="ttdeci">tripoint global_part_pos3(const int &amp;index) const</div><div class="ttdoc">Get the coordinates of the studied part of the vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03106">vehicle.cpp:3106</a></div></div>
<div class="ttc" id="anamespacecata_html_ad05314667ac5d05f984aeeef26b9a87f"><div class="ttname"><a href="namespacecata.html#ad05314667ac5d05f984aeeef26b9a87f">cata::nullopt</a></div><div class="ttdeci">static constexpr nullopt_t nullopt</div><div class="ttdef"><b>Definition:</b> <a href="optional_8h_source.html#l00022">optional.h:22</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a5122e284fbcf0f14f0e6022e01b5b574"><div class="ttname"><a href="structvehicle__part.html#a5122e284fbcf0f14f0e6022e01b5b574">vehicle_part::base</a></div><div class="ttdeci">item base</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00440">vehicle.h:440</a></div></div>
<div class="ttc" id="astructvehicle__part_html_ac6e2dfa7178b8bed91baea3543961a86"><div class="ttname"><a href="structvehicle__part.html#ac6e2dfa7178b8bed91baea3543961a86">vehicle_part::mount</a></div><div class="ttdeci">point mount</div><div class="ttdoc">mount point: x is on the forward/backward axis, y is on the left/right axis</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00367">vehicle.h:367</a></div></div>
<div class="ttc" id="astructvehicle__part_html_ad59383d4f9c006ff499082dd5a600d9f"><div class="ttname"><a href="structvehicle__part.html#ad59383d4f9c006ff499082dd5a600d9f">vehicle_part::items</a></div><div class="ttdeci">cata::colony&lt; item &gt; items</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00441">vehicle.h:441</a></div></div>
<div class="ttc" id="astructvehicle__part_html_aeee4fac34f34d6c9ff557fde6590439d"><div class="ttname"><a href="structvehicle__part.html#aeee4fac34f34d6c9ff557fde6590439d">vehicle_part::is_broken</a></div><div class="ttdeci">bool is_broken() const</div><div class="ttdoc">parts are considered broken at zero health</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00170">vehicle_part.cpp:170</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01807">active_items</a>, <a class="el" href="active__item__cache_8cpp_source.html#l00030">active_item_cache::add()</a>, <a class="el" href="item_8cpp_source.html#l07431">item::ammo_type()</a>, <a class="el" href="item_8cpp_source.html#l07408">item::ammo_types()</a>, <a class="el" href="item__stack_8cpp_source.html#l00107">item_stack::amount_can_fit()</a>, <a class="el" href="vehicle_8h_source.html#l00440">vehicle_part::base</a>, <a class="el" href="item_8h_source.html#l02195">item::charges</a>, <a class="el" href="item_8h_source.html#l02157">item::contents</a>, <a class="el" href="item_8cpp_source.html#l05855">item::count_by_charges()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="vehicle_8cpp_source.html#l05288">get_items()</a>, <a class="el" href="item__stack_8cpp_source.html#l00068">item_stack::get_iterator_from_pointer()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l06778">invalidate_mass()</a>, <a class="el" href="item_8cpp_source.html#l06432">item::is_ammo()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00170">vehicle_part::is_broken()</a>, <a class="el" href="item_8cpp_source.html#l06595">item::is_bucket_nonempty()</a>, <a class="el" href="item_8cpp_source.html#l06367">item::is_gun()</a>, <a class="el" href="vehicle_8h_source.html#l00441">vehicle_part::items</a>, <a class="el" href="item_8cpp_source.html#l00968">item::merge_charges()</a>, <a class="el" href="vehicle_8h_source.html#l00367">vehicle_part::mount</a>, <a class="el" href="item_8cpp_source.html#l08772">item::needs_processing()</a>, <a class="el" href="optional_8h_source.html#l00022">cata::nullopt</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="item__contents_8cpp_source.html#l00032">item_contents::spill_contents()</a>, and <a class="el" href="item__stack_8cpp_source.html#l00121">item_stack::stacks_with()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05183">add_charges()</a>, <a class="el" href="vehicle_8cpp_source.html#l05199">add_item()</a>, <a class="el" href="vehicle_8cpp_source.html#l00235">vehicle_stack::insert()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00964">move_item()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01299">operate_reaper()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01380">operate_scoop()</a>, <a class="el" href="vehicle_8cpp_source.html#l05295">place_spawn_items()</a>, and <a class="el" href="activity__item__handling_8cpp_source.html#l00160">put_into_vehicle()</a>.</p>

</div>
</div>
<a id="ae1a78ddd260a113c2a46b2dd83dcf960" name="ae1a78ddd260a113c2a46b2dd83dcf960"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1a78ddd260a113c2a46b2dd83dcf960">&#9670;&nbsp;</a></span>add_item() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcata_1_1optional.html">cata::optional</a>&lt; <a class="el" href="classitem__stack.html#a711217cbaded7f3f13b4b54f9ef617af">vehicle_stack::iterator</a> &gt; vehicle::add_item </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;&#160;</td>
          <td class="paramname"><em>pt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>obj</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Like the above. </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05199">5199</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05200" name="l05200"></a><span class="lineno"> 5200</span>{</div>
<div class="line"><a id="l05201" name="l05201"></a><span class="lineno"> 5201</span>    <span class="keywordtype">int</span> idx = <a class="code hl_function" href="classvehicle.html#a0ebc79bba42df4fea00ee3a4e495cbde">index_of_part</a>( &amp;pt );</div>
<div class="line"><a id="l05202" name="l05202"></a><span class="lineno"> 5202</span>    <span class="keywordflow">if</span>( idx &lt; 0 ) {</div>
<div class="line"><a id="l05203" name="l05203"></a><span class="lineno"> 5203</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to add item to invalid part&quot;</span> );</div>
<div class="line"><a id="l05204" name="l05204"></a><span class="lineno"> 5204</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata.html#ad05314667ac5d05f984aeeef26b9a87f">cata::nullopt</a>;</div>
<div class="line"><a id="l05205" name="l05205"></a><span class="lineno"> 5205</span>    }</div>
<div class="line"><a id="l05206" name="l05206"></a><span class="lineno"> 5206</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a04426c7f3acf2455684972f092352cb0">add_item</a>( idx, obj );</div>
<div class="line"><a id="l05207" name="l05207"></a><span class="lineno"> 5207</span>}</div>
<div class="ttc" id="aclassvehicle_html_a0ebc79bba42df4fea00ee3a4e495cbde"><div class="ttname"><a href="classvehicle.html#a0ebc79bba42df4fea00ee3a4e495cbde">vehicle::index_of_part</a></div><div class="ttdeci">int index_of_part(const vehicle_part *part, bool check_removed=false) const</div><div class="ttdoc">Given a vehicle part which is inside of this vehicle, returns the index of that part.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02911">vehicle.cpp:2911</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l05209">add_item()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="vehicle_8cpp_source.html#l02911">index_of_part()</a>, and <a class="el" href="optional_8h_source.html#l00022">cata::nullopt</a>.</p>

</div>
</div>
<a id="a970b2eebbb27e574f2b09132e8b4be2b" name="a970b2eebbb27e574f2b09132e8b4be2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a970b2eebbb27e574f2b09132e8b4be2b">&#9670;&nbsp;</a></span>add_missing_frames()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::add_missing_frames </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks all parts to see if frames are missing (as they might be when loading from a game saved before the vehicle construction rules overhaul). </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l00317">317</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>{</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">vpart_id</a> frame_id( <span class="stringliteral">&quot;frame_vertical&quot;</span> );</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>    <span class="comment">//No need to check the same spot more than once</span></div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>    std::set&lt;point&gt; locations_checked;</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;i : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>        <span class="keywordflow">if</span>( locations_checked.count( i.mount ) != 0 ) {</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>        }</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>        locations_checked.insert( i.mount );</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span> </div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>        <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;elem : <a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( i.mount, <span class="keyword">false</span> ) ) {</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( elem ).location == <a class="code hl_function" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure</a> ) {</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>                found = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>            }</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>        }</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>        <span class="keywordflow">if</span>( !found ) {</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>            <span class="comment">// Install missing frame</span></div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>            <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.emplace_back( frame_id, i.mount, <a class="code hl_class" href="classitem.html">item</a>( frame_id-&gt;item ) );</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>        }</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>    }</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>}</div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; vpart_info &gt;</a></div></div>
<div class="ttc" id="aclassvehicle_html_a5a4d8dc36f8def16518bc7ba0126c969"><div class="ttname"><a href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">vehicle::parts_at_relative</a></div><div class="ttdeci">std::vector&lt; int &gt; parts_at_relative(const point &amp;dp, bool use_cache) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02414">vehicle.cpp:2414</a></div></div>
<div class="ttc" id="aclassvehicle_html_aab4917d0f78fe4df1c8f5303fdf2b86d"><div class="ttname"><a href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">vehicle::part_info</a></div><div class="ttdeci">const vpart_info &amp; part_info(int index, bool include_removed=false) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01137">vehicle.cpp:1137</a></div></div>
<div class="ttc" id="avehicle_8cpp_html_a00735c0bfb68c2a0c0c7d53e8f72a70e"><div class="ttname"><a href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure</a></div><div class="ttdeci">static const std::string part_location_structure(&quot;structure&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="veh__type_8h_source.html#l00152">vpart_info::item</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>.</p>

</div>
</div>
<a id="a9f755028b23085cf45b0d3ea7c7c282b" name="a9f755028b23085cf45b0d3ea7c7c282b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f755028b23085cf45b0d3ea7c7c282b">&#9670;&nbsp;</a></span>add_steerable_wheels()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::add_steerable_wheels </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l00344">344</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>{</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>    <span class="keywordtype">int</span> axle = INT_MIN;</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>    std::vector&lt; std::pair&lt;int, vpart_id&gt; &gt; wheels;</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span> </div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>    <span class="comment">// Find wheels that have steerable versions.</span></div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>    <span class="comment">// Convert the wheel(s) with the largest x value.</span></div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a397b40aa92dd1fd09ee592aa279bc656">get_all_parts</a>() ) {</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>        <span class="keywordflow">if</span>( vp.has_feature( <span class="stringliteral">&quot;STEERABLE&quot;</span> ) || vp.has_feature( <span class="stringliteral">&quot;TRACKED&quot;</span> ) ) {</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>            <span class="comment">// Has a wheel that is inherently steerable</span></div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>            <span class="comment">// (e.g. unicycle, casters), this vehicle doesn&#39;t</span></div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>            <span class="comment">// need conversion.</span></div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>        }</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span> </div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>        <span class="keywordflow">if</span>( vp.mount().x &lt; axle ) {</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>            <span class="comment">// there is another axle in front of this</span></div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>        }</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span> </div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>        <span class="keywordflow">if</span>( vp.has_feature( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eae36e04cd704cf1a4a2ae645809e24e1b">VPFLAG_WHEEL</a> ) ) {</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>            <a class="code hl_class" href="classstring__id.html">vpart_id</a> steerable_id( vp.info().get_id().str() + <span class="stringliteral">&quot;_steerable&quot;</span> );</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>            <span class="keywordflow">if</span>( steerable_id.is_valid() ) {</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>                <span class="comment">// We can convert this.</span></div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>                <span class="keywordflow">if</span>( vp.mount().x != axle ) {</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>                    <span class="comment">// Found a new axle further forward than the</span></div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>                    <span class="comment">// existing one.</span></div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>                    wheels.clear();</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>                    axle = vp.mount().x;</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>                }</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span> </div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>                wheels.push_back( std::make_pair( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( vp.part_index() ), steerable_id ) );</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>            }</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>        }</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>    }</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span> </div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>    <span class="comment">// Now convert the wheels to their new types.</span></div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;wheel : wheels ) {</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>        <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ wheel.first ].id = wheel.second;</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>    }</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>}</div>
<div class="ttc" id="aclassvehicle_html_a397b40aa92dd1fd09ee592aa279bc656"><div class="ttname"><a href="classvehicle.html#a397b40aa92dd1fd09ee592aa279bc656">vehicle::get_all_parts</a></div><div class="ttdeci">vehicle_part_range get_all_parts() const</div><div class="ttdoc">Yields a range containing all parts (including broken ones) that can be iterated over.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06882">vehicle.cpp:6882</a></div></div>
<div class="ttc" id="aclassvpart__reference_html"><div class="ttname"><a href="classvpart__reference.html">vpart_reference</a></div><div class="ttdoc">This is a wrapper over a vehicle pointer and a reference to a part of it.</div><div class="ttdef"><b>Definition:</b> <a href="vpart__position_8h_source.html#l00124">vpart_position.h:125</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307eae36e04cd704cf1a4a2ae645809e24e1b"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eae36e04cd704cf1a4a2ae645809e24e1b">VPFLAG_WHEEL</a></div><div class="ttdeci">@ VPFLAG_WHEEL</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00048">veh_type.h:48</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l06882">get_all_parts()</a>, <a class="el" href="achievement_8cpp_source.html#l00065">string_id&lt; T &gt;::is_valid()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="veh__type_8h_source.html#l00048">VPFLAG_WHEEL</a>.</p>

</div>
</div>
<a id="a22c303e2414d3a1ccae66d96fa77d638" name="a22c303e2414d3a1ccae66d96fa77d638"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22c303e2414d3a1ccae66d96fa77d638">&#9670;&nbsp;</a></span>add_toggle_to_opts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::add_toggle_to_opts </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="structuilist__entry.html">uilist_entry</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::function&lt; void()&gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>actions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>flag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l00100">100</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>{</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    <span class="comment">// fetch matching parts and abort early if none found</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>    <span class="keyword">const</span> <span class="keyword">auto</span> found = <a class="code hl_function" href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">get_avail_parts</a>( flag );</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    <span class="keywordflow">if</span>( empty( found ) ) {</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    }</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span> </div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>    <span class="comment">// can this menu option be selected by the user?</span></div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    <span class="keywordtype">bool</span> allow = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span> </div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>    <span class="comment">// determine target state - currently parts of similar type are all switched concurrently</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    <span class="keywordtype">bool</span> state = std::none_of( found.begin(), found.end(), []( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp; vp ) {</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>        return vp.part().enabled;</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    } );</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span> </div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    <span class="comment">// if toggled part potentially usable check if could be enabled now (sufficient fuel etc.)</span></div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>    <span class="keywordflow">if</span>( state ) {</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>        allow = std::any_of( found.begin(), found.end(), []( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp; vp ) {</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>            return vp.vehicle().can_enable( vp.part() );</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>        } );</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>    }</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span> </div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    <span class="keyword">auto</span> msg = <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( state ?</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>                              <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Turn on %s&quot;</span> ) :</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>                              <a class="code hl_function" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Turn off %s&quot;</span> ), <a class="code hl_define" href="color_8h.html#a6c870a877c442090edead1e229b3953d">c_pink</a> ),</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>                              <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>.emplace_back( -1, allow, key, msg );</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span> </div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    actions.push_back( [ = ] {</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : found )</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>        {</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>            <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;e = vp.part();</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>            <span class="keywordflow">if</span>( e.<a class="code hl_variable" href="structvehicle__part.html#a27a7cba7268cb7d3550ed2b7c9adc323">enabled</a> != state ) {</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>                add_msg( state ? _( <span class="stringliteral">&quot;Turned on %s&quot;</span> ) : _( <span class="stringliteral">&quot;Turned off %s.&quot;</span> ), e.name() );</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>                e.enabled = state;</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>            }</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>        }</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>        <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>    } );</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>}</div>
<div class="ttc" id="aclassvehicle_html_a1b64eabc86039e338bf054c96f5a26ff"><div class="ttname"><a href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">vehicle::get_avail_parts</a></div><div class="ttdeci">vehicle_part_with_feature_range&lt; std::string &gt; get_avail_parts(std::string feature) const</div><div class="ttdoc">Yields a range of parts of this vehicle that each have the given feature and are available: not broke...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02678">vehicle.cpp:2678</a></div></div>
<div class="ttc" id="acolor_8cpp_html_a0f25678be1fc95cb81381a004493a4cc"><div class="ttname"><a href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a></div><div class="ttdeci">std::string colorize(const std::string &amp;text, const nc_color &amp;color)</div><div class="ttdef"><b>Definition:</b> <a href="color_8cpp_source.html#l00669">color.cpp:669</a></div></div>
<div class="ttc" id="acolor_8h_html_a6c870a877c442090edead1e229b3953d"><div class="ttname"><a href="color_8h.html#a6c870a877c442090edead1e229b3953d">c_pink</a></div><div class="ttdeci">#define c_pink</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00031">color.h:31</a></div></div>
<div class="ttc" id="anamespacePATH__INFO_html_a5a5d41d971342c3e6103b510ccbcb9bb"><div class="ttname"><a href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">PATH_INFO::options</a></div><div class="ttdeci">std::string options()</div><div class="ttdef"><b>Definition:</b> <a href="path__info_8cpp_source.html#l00238">path_info.cpp:238</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a9b089d0b697443b096063219dab08ef5"><div class="ttname"><a href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a></div><div class="ttdeci">std::string string_format(std::string format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00418">string_formatter.h:418</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="color_8h_source.html#l00031">c_pink</a>, <a class="el" href="color_8cpp_source.html#l00669">colorize()</a>, <a class="el" href="vehicle_8h_source.html#l00411">vehicle_part::enabled</a>, <a class="el" href="vehicle_8cpp_source.html#l02678">get_avail_parts()</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="path__info_8cpp_source.html#l00238">PATH_INFO::options()</a>, <a class="el" href="vehicle_8cpp_source.html#l06581">vpart_reference::part()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, and <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00266">set_electronics_menu_options()</a>.</p>

</div>
</div>
<a id="aae6614753be39386f88c73d1c68f4cec" name="aae6614753be39386f88c73d1c68f4cec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae6614753be39386f88c73d1c68f4cec">&#9670;&nbsp;</a></span>advance_precalc_mounts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt; int &gt; vehicle::advance_precalc_mounts </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>new_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>dp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ramp_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>adjust_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::set&lt; int &gt;&#160;</td>
          <td class="paramname"><em>parts_to_move</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06907">6907</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06910" name="l06910"></a><span class="lineno"> 6910</span>{</div>
<div class="line"><a id="l06911" name="l06911"></a><span class="lineno"> 6911</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l06912" name="l06912"></a><span class="lineno"> 6912</span>    std::set&lt;int&gt; smzs;</div>
<div class="line"><a id="l06913" name="l06913"></a><span class="lineno"> 6913</span>    <span class="comment">// when a vehicle part enters the low end of a down ramp, or the high end of an up ramp,</span></div>
<div class="line"><a id="l06914" name="l06914"></a><span class="lineno"> 6914</span>    <span class="comment">// it immediately translates down or up a z-level, respectively, ending up on the low</span></div>
<div class="line"><a id="l06915" name="l06915"></a><span class="lineno"> 6915</span>    <span class="comment">// end of an up ramp or high end of a down ramp, respectively.  The two ends are set</span></div>
<div class="line"><a id="l06916" name="l06916"></a><span class="lineno"> 6916</span>    <span class="comment">// past each other, like so:</span></div>
<div class="line"><a id="l06917" name="l06917"></a><span class="lineno"> 6917</span>    <span class="comment">// (side view)  z+1   Rdh RDl</span></div>
<div class="line"><a id="l06918" name="l06918"></a><span class="lineno"> 6918</span>    <span class="comment">//              z+0   RUh Rul</span></div>
<div class="line"><a id="l06919" name="l06919"></a><span class="lineno"> 6919</span>    <span class="comment">// A vehicle moving left to right on z+1 drives down to z+0 by entering the ramp down low end.</span></div>
<div class="line"><a id="l06920" name="l06920"></a><span class="lineno"> 6920</span>    <span class="comment">// A vehicle moving right to left on z+0 drives up to z+1 by entering the ramp up high end.</span></div>
<div class="line"><a id="l06921" name="l06921"></a><span class="lineno"> 6921</span>    <span class="comment">// A vehicle moving left to right on z+0 should ideally collide into a wall before entering</span></div>
<div class="line"><a id="l06922" name="l06922"></a><span class="lineno"> 6922</span>    <span class="comment">//   the ramp up high end, but even if it does, it briefly transitions to z+1 before returning</span></div>
<div class="line"><a id="l06923" name="l06923"></a><span class="lineno"> 6923</span>    <span class="comment">//   to z0 by entering the ramp down low end.</span></div>
<div class="line"><a id="l06924" name="l06924"></a><span class="lineno"> 6924</span>    <span class="comment">// A vehicle moving right to left on z+1 drives down to z+0 by entering the ramp down low end,</span></div>
<div class="line"><a id="l06925" name="l06925"></a><span class="lineno"> 6925</span>    <span class="comment">//   then immediately returns to z+1 by entering the ramp up high end.</span></div>
<div class="line"><a id="l06926" name="l06926"></a><span class="lineno"> 6926</span>    <span class="comment">// When a vehicle&#39;s pivot point transitions a z-level via a ramp, all other pre-calc points</span></div>
<div class="line"><a id="l06927" name="l06927"></a><span class="lineno"> 6927</span>    <span class="comment">// make the opposite transition, so that points that were above an ascending pivot point are</span></div>
<div class="line"><a id="l06928" name="l06928"></a><span class="lineno"> 6928</span>    <span class="comment">// now level with it, and parts that were level with an ascending pivot point are now below</span></div>
<div class="line"><a id="l06929" name="l06929"></a><span class="lineno"> 6929</span>    <span class="comment">// it.</span></div>
<div class="line"><a id="l06930" name="l06930"></a><span class="lineno"> 6930</span>    <span class="comment">// parts that enter the translation portion of a ramp on the same displacement as the</span></div>
<div class="line"><a id="l06931" name="l06931"></a><span class="lineno"> 6931</span>    <span class="comment">// pivot point stay at the same relative z to the pivot point, as the ramp_offset adjustments</span></div>
<div class="line"><a id="l06932" name="l06932"></a><span class="lineno"> 6932</span>    <span class="comment">// cancel out.</span></div>
<div class="line"><a id="l06933" name="l06933"></a><span class="lineno"> 6933</span>    <span class="comment">// if a vehicle manages move partially up or down a ramp and then veers off course, it</span></div>
<div class="line"><a id="l06934" name="l06934"></a><span class="lineno"> 6934</span>    <span class="comment">// can get split across the z-levels and continue moving, enough though large parts of the</span></div>
<div class="line"><a id="l06935" name="l06935"></a><span class="lineno"> 6935</span>    <span class="comment">// vehicle are unsupported.  In that case, move the unsupported parts down until they are</span></div>
<div class="line"><a id="l06936" name="l06936"></a><span class="lineno"> 6936</span>    <span class="comment">// supported.</span></div>
<div class="line"><a id="l06937" name="l06937"></a><span class="lineno"> 6937</span>    <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="namespacedetail.html#ac4c79842ec549e8b02145d43a1fbc330a6a992d5529f459a44fee58c733255e86">index</a> = -1;</div>
<div class="line"><a id="l06938" name="l06938"></a><span class="lineno"> 6938</span>    <span class="keywordflow">for</span>( <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;prt : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l06939" name="l06939"></a><span class="lineno"> 6939</span>        <a class="code hl_enumvalue" href="namespacedetail.html#ac4c79842ec549e8b02145d43a1fbc330a6a992d5529f459a44fee58c733255e86">index</a> += 1;</div>
<div class="line"><a id="l06940" name="l06940"></a><span class="lineno"> 6940</span>        here.<a class="code hl_function" href="classmap.html#a5fdaa85d36d4c8b742ea050d4c07a7b3">clear_vehicle_point_from_cache</a>( <span class="keyword">this</span>, src + prt.precalc[0] );</div>
<div class="line"><a id="l06941" name="l06941"></a><span class="lineno"> 6941</span>        <span class="comment">// no parts means this is a normal horizontal or vertical move</span></div>
<div class="line"><a id="l06942" name="l06942"></a><span class="lineno"> 6942</span>        <span class="keywordflow">if</span>( parts_to_move.empty() ) {</div>
<div class="line"><a id="l06943" name="l06943"></a><span class="lineno"> 6943</span>            prt.precalc[0] = prt.precalc[1];</div>
<div class="line"><a id="l06944" name="l06944"></a><span class="lineno"> 6944</span>            <span class="comment">// partial part movement means we&#39;re zero-ing out after missing a ramp</span></div>
<div class="line"><a id="l06945" name="l06945"></a><span class="lineno"> 6945</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( adjust_pos &amp;&amp; parts_to_move.find( index ) == parts_to_move.end() ) {</div>
<div class="line"><a id="l06946" name="l06946"></a><span class="lineno"> 6946</span>            prt.precalc[0].z -= dp.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>;</div>
<div class="line"><a id="l06947" name="l06947"></a><span class="lineno"> 6947</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !adjust_pos &amp;&amp;  parts_to_move.find( index ) != parts_to_move.end() ) {</div>
<div class="line"><a id="l06948" name="l06948"></a><span class="lineno"> 6948</span>            prt.precalc[0].z += dp.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>;</div>
<div class="line"><a id="l06949" name="l06949"></a><span class="lineno"> 6949</span>        }</div>
<div class="line"><a id="l06950" name="l06950"></a><span class="lineno"> 6950</span>        <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a8b0355a9fb797e14a8e8a58c2a8a0c8a">TFLAG_RAMP_UP</a>, src + dp + prt.precalc[0] ) ) {</div>
<div class="line"><a id="l06951" name="l06951"></a><span class="lineno"> 6951</span>            prt.precalc[0].z += 1;</div>
<div class="line"><a id="l06952" name="l06952"></a><span class="lineno"> 6952</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258aea455dd59bde4d5560357c2f1de5bd8a">TFLAG_RAMP_DOWN</a>, src + dp + prt.precalc[0] ) ) {</div>
<div class="line"><a id="l06953" name="l06953"></a><span class="lineno"> 6953</span>            prt.precalc[0].z -= 1;</div>
<div class="line"><a id="l06954" name="l06954"></a><span class="lineno"> 6954</span>        }</div>
<div class="line"><a id="l06955" name="l06955"></a><span class="lineno"> 6955</span>        prt.precalc[0].z -= ramp_offset;</div>
<div class="line"><a id="l06956" name="l06956"></a><span class="lineno"> 6956</span>        prt.precalc[1].z = prt.precalc[0].z;</div>
<div class="line"><a id="l06957" name="l06957"></a><span class="lineno"> 6957</span>        smzs.insert( prt.precalc[0].z );</div>
<div class="line"><a id="l06958" name="l06958"></a><span class="lineno"> 6958</span>    }</div>
<div class="line"><a id="l06959" name="l06959"></a><span class="lineno"> 6959</span>    <span class="keywordflow">if</span>( adjust_pos ) {</div>
<div class="line"><a id="l06960" name="l06960"></a><span class="lineno"> 6960</span>        <span class="keywordflow">if</span>( parts_to_move.empty() ) {</div>
<div class="line"><a id="l06961" name="l06961"></a><span class="lineno"> 6961</span>            <a class="code hl_variable" href="classvehicle.html#afd4e8e8471b17450205d827dee8a41a5">pivot_anchor</a>[0] = <a class="code hl_variable" href="classvehicle.html#afd4e8e8471b17450205d827dee8a41a5">pivot_anchor</a>[1];</div>
<div class="line"><a id="l06962" name="l06962"></a><span class="lineno"> 6962</span>            <a class="code hl_variable" href="classvehicle.html#a709da7b758c18d51b79311eea6eaca59">pivot_rotation</a>[0] = <a class="code hl_variable" href="classvehicle.html#a709da7b758c18d51b79311eea6eaca59">pivot_rotation</a>[1];</div>
<div class="line"><a id="l06963" name="l06963"></a><span class="lineno"> 6963</span>        }</div>
<div class="line"><a id="l06964" name="l06964"></a><span class="lineno"> 6964</span>        <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> = new_pos;</div>
<div class="line"><a id="l06965" name="l06965"></a><span class="lineno"> 6965</span>    }</div>
<div class="line"><a id="l06966" name="l06966"></a><span class="lineno"> 6966</span>    <span class="comment">// Invalidate vehicle&#39;s point cache</span></div>
<div class="line"><a id="l06967" name="l06967"></a><span class="lineno"> 6967</span>    <a class="code hl_variable" href="classvehicle.html#a7769b4dac262f6ff8bd328eb1b8f022c">occupied_cache_time</a> = <a class="code hl_variable" href="namespacecalendar.html#ae25f99fbff61e25df40b5b26bcedee8c">calendar::before_time_starts</a>;</div>
<div class="line"><a id="l06968" name="l06968"></a><span class="lineno"> 6968</span>    <span class="keywordflow">return</span> smzs;</div>
<div class="line"><a id="l06969" name="l06969"></a><span class="lineno"> 6969</span>}</div>
<div class="ttc" id="aclassmap_html_a27e22f0999ea03eff18babc48643c568"><div class="ttname"><a href="classmap.html#a27e22f0999ea03eff18babc48643c568">map::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02304">map.cpp:2304</a></div></div>
<div class="ttc" id="aclassmap_html_a5fdaa85d36d4c8b742ea050d4c07a7b3"><div class="ttname"><a href="classmap.html#a5fdaa85d36d4c8b742ea050d4c07a7b3">map::clear_vehicle_point_from_cache</a></div><div class="ttdeci">void clear_vehicle_point_from_cache(vehicle *veh, const tripoint &amp;pt)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00285">map.cpp:285</a></div></div>
<div class="ttc" id="aclassvehicle_html_a12844862e123c12dc923ca390becf79e"><div class="ttname"><a href="classvehicle.html#a12844862e123c12dc923ca390becf79e">vehicle::pos</a></div><div class="ttdeci">point pos</div><div class="ttdoc">Position of the vehicle inside the submap that contains the vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01859">vehicle.h:1859</a></div></div>
<div class="ttc" id="aclassvehicle_html_a7769b4dac262f6ff8bd328eb1b8f022c"><div class="ttname"><a href="classvehicle.html#a7769b4dac262f6ff8bd328eb1b8f022c">vehicle::occupied_cache_time</a></div><div class="ttdeci">time_point occupied_cache_time</div><div class="ttdoc">Time occupied points were calculated.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01849">vehicle.h:1849</a></div></div>
<div class="ttc" id="amapdata_8h_html_aa04d037303ea30193f7cf0cd82304258a8b0355a9fb797e14a8e8a58c2a8a0c8a"><div class="ttname"><a href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a8b0355a9fb797e14a8e8a58c2a8a0c8a">TFLAG_RAMP_UP</a></div><div class="ttdeci">@ TFLAG_RAMP_UP</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00313">mapdata.h:313</a></div></div>
<div class="ttc" id="amapdata_8h_html_aa04d037303ea30193f7cf0cd82304258aea455dd59bde4d5560357c2f1de5bd8a"><div class="ttname"><a href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258aea455dd59bde4d5560357c2f1de5bd8a">TFLAG_RAMP_DOWN</a></div><div class="ttdeci">@ TFLAG_RAMP_DOWN</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00312">mapdata.h:312</a></div></div>
<div class="ttc" id="anamespacecalendar_html_ae25f99fbff61e25df40b5b26bcedee8c"><div class="ttname"><a href="namespacecalendar.html#ae25f99fbff61e25df40b5b26bcedee8c">calendar::before_time_starts</a></div><div class="ttdeci">const time_point before_time_starts</div><div class="ttdoc">A time point that is always before the current turn, even when the game has just started.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00025">calendar.cpp:25</a></div></div>
<div class="ttc" id="anamespacedetail_html_ac4c79842ec549e8b02145d43a1fbc330a6a992d5529f459a44fee58c733255e86"><div class="ttname"><a href="namespacedetail.html#ac4c79842ec549e8b02145d43a1fbc330a6a992d5529f459a44fee58c733255e86">detail::arg_id_kind::index</a></div><div class="ttdeci">@ index</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="calendar_8cpp_source.html#l00025">calendar::before_time_starts</a>, <a class="el" href="map_8cpp_source.html#l00285">map::clear_vehicle_point_from_cache()</a>, <a class="el" href="map_8cpp_source.html#l00141">get_map()</a>, <a class="el" href="map_8cpp_source.html#l02304">map::has_flag()</a>, <a class="el" href="vehicle_8h_source.html#l01849">occupied_cache_time</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8h_source.html#l01889">pivot_anchor</a>, <a class="el" href="vehicle_8h_source.html#l01883">pivot_rotation</a>, <a class="el" href="vehicle_8h_source.html#l01859">pos</a>, <a class="el" href="mapdata_8h_source.html#l00312">TFLAG_RAMP_DOWN</a>, <a class="el" href="mapdata_8h_source.html#l00313">TFLAG_RAMP_UP</a>, and <a class="el" href="point_8h_source.html#l00152">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l01098">map::displace_vehicle()</a>.</p>

</div>
</div>
<a id="aa0eb12133195f158fb7f903572e4afcc" name="aa0eb12133195f158fb7f903572e4afcc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0eb12133195f158fb7f903572e4afcc">&#9670;&nbsp;</a></span>alarm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::alarm </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01435">1435</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01436" name="l01436"></a><span class="lineno"> 1436</span>{</div>
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"> 1437</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a id="l01438" name="l01438"></a><span class="lineno"> 1438</span>        <span class="comment">//first check if the alarm is still installed</span></div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span>        <span class="keywordtype">bool</span> found_alarm = <a class="code hl_function" href="classvehicle.html#a450b5dd0e3c8e21773995962f381157b">has_security_working</a>();</div>
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"> 1440</span> </div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"> 1441</span>        <span class="comment">//if alarm found, make noise, else set alarm disabled</span></div>
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"> 1442</span>        <span class="keywordflow">if</span>( found_alarm ) {</div>
<div class="line"><a id="l01443" name="l01443"></a><span class="lineno"> 1443</span>            <span class="keyword">const</span> std::array&lt;std::string, 4&gt; sound_msgs = {{</div>
<div class="line"><a id="l01444" name="l01444"></a><span class="lineno"> 1444</span>                    <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;WHOOP WHOOP&quot;</span> ), <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;NEEeu NEEeu NEEeu&quot;</span> ), <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;BLEEEEEEP&quot;</span> ), <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;WREEP&quot;</span> )</div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span>                }</div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span>            };</div>
<div class="line"><a id="l01447" name="l01447"></a><span class="lineno"> 1447</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>(), <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 45, 80 ) ),</div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"> 1448</span>                           <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>,  <a class="code hl_function" href="rng_8h.html#a265321f9012874a83b2a57ee33835617">random_entry_ref</a>( sound_msgs ), <span class="keyword">false</span>, <span class="stringliteral">&quot;vehicle&quot;</span>, <span class="stringliteral">&quot;car_alarm&quot;</span> );</div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 1000 ) ) {</div>
<div class="line"><a id="l01450" name="l01450"></a><span class="lineno"> 1450</span>                <a class="code hl_variable" href="classvehicle.html#a949775a37c7daa7a6b67e510f548bca3">is_alarm_on</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"> 1451</span>            }</div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"> 1452</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01453" name="l01453"></a><span class="lineno"> 1453</span>            <a class="code hl_variable" href="classvehicle.html#a949775a37c7daa7a6b67e510f548bca3">is_alarm_on</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span>        }</div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"> 1455</span>    }</div>
<div class="line"><a id="l01456" name="l01456"></a><span class="lineno"> 1456</span>}</div>
<div class="ttc" id="aartifact_8cpp_html_a70800e95389f34dd34186fafaea2a840"><div class="ttname"><a href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a></div><div class="ttdeci">units::quantity&lt; V, B &gt; rng(const units::quantity&lt; V, B &gt; &amp;min, const units::quantity&lt; V, B &gt; &amp;max)</div><div class="ttdef"><b>Definition:</b> <a href="artifact_8cpp_source.html#l00032">artifact.cpp:32</a></div></div>
<div class="ttc" id="aclassvehicle_html_a450b5dd0e3c8e21773995962f381157b"><div class="ttname"><a href="classvehicle.html#a450b5dd0e3c8e21773995962f381157b">vehicle::has_security_working</a></div><div class="ttdeci">bool has_security_working() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01112">vehicle.cpp:1112</a></div></div>
<div class="ttc" id="aclassvehicle_html_a949775a37c7daa7a6b67e510f548bca3"><div class="ttname"><a href="classvehicle.html#a949775a37c7daa7a6b67e510f548bca3">vehicle::is_alarm_on</a></div><div class="ttdeci">bool is_alarm_on</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01936">vehicle.h:1936</a></div></div>
<div class="ttc" id="anamespacesounds_html_a6bb79ae1c9c3dcd8c8e0b28c66b0398d"><div class="ttname"><a href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a></div><div class="ttdeci">void sound(const tripoint &amp;p, int vol, sound_t category, const std::string &amp;description, bool ambient=false, const std::string &amp;id=&quot;&quot;, const std::string &amp;variant=&quot;default&quot;)</div><div class="ttdoc">Sound at (p) of intensity (vol)</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l00177">sounds.cpp:177</a></div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a></div><div class="ttdeci">@ alarm</div></div>
<div class="ttc" id="arng_8h_html_a265321f9012874a83b2a57ee33835617"><div class="ttname"><a href="rng_8h.html#a265321f9012874a83b2a57ee33835617">random_entry_ref</a></div><div class="ttdeci">std::enable_if&lt;!is_std_array&lt; C &gt;::value, constV &amp; &gt;::type random_entry_ref(const C &amp;container)</div><div class="ttdoc">Same as above, but with a statically allocated default value (using the default constructor).</div><div class="ttdef"><b>Definition:</b> <a href="rng_8h_source.html#l00149">rng.h:149</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::alarm</a>, <a class="el" href="vehicle_8cpp_source.html#l03101">global_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l01112">has_security_working()</a>, <a class="el" href="vehicle_8h_source.html#l01936">is_alarm_on</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="rng_8h_source.html#l00149">random_entry_ref()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, and <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05033">idle()</a>.</p>

</div>
</div>
<a id="a2e1f54f4d34a2edb7ff3665e5eba7df9" name="a2e1f54f4d34a2edb7ff3665e5eba7df9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e1f54f4d34a2edb7ff3665e5eba7df9">&#9670;&nbsp;</a></span>all_parts_at_location()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; int &gt; vehicle::all_parts_at_location </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>location</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns all parts in the vehicle that exist in the given location slot. </p>
<p >If the empty string is passed in, returns all parts with no slot. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">location</td><td>The location slot to get parts for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A list of indices to all parts with the specified location. </dd></dl>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02745">2745</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02746" name="l02746"></a><span class="lineno"> 2746</span>{</div>
<div class="line"><a id="l02747" name="l02747"></a><span class="lineno"> 2747</span>    std::vector&lt;int&gt; parts_found;</div>
<div class="line"><a id="l02748" name="l02748"></a><span class="lineno"> 2748</span>    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> part_index = 0; part_index &lt; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size(); ++part_index ) {</div>
<div class="line"><a id="l02749" name="l02749"></a><span class="lineno"> 2749</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( part_index ).location == location &amp;&amp; !<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[part_index].removed ) {</div>
<div class="line"><a id="l02750" name="l02750"></a><span class="lineno"> 2750</span>            parts_found.push_back( part_index );</div>
<div class="line"><a id="l02751" name="l02751"></a><span class="lineno"> 2751</span>        }</div>
<div class="line"><a id="l02752" name="l02752"></a><span class="lineno"> 2752</span>    }</div>
<div class="line"><a id="l02753" name="l02753"></a><span class="lineno"> 2753</span>    <span class="keywordflow">return</span> parts_found;</div>
<div class="line"><a id="l02754" name="l02754"></a><span class="lineno"> 2754</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="mapgen_8cpp_source.html#l05671">map::add_vehicle_to_map()</a>, <a class="el" href="vehicle_8cpp_source.html#l03789">coeff_air_drag()</a>, <a class="el" href="vehicle_8cpp_source.html#l04047">coeff_water_drag()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02239">veh_interact::display_veh()</a>, <a class="el" href="vehicle_8cpp_source.html#l02117">find_and_split_vehicles()</a>, <a class="el" href="vehicle_8cpp_source.html#l01654">merge_rackable_vehicle()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04140">sufficient_wheel_config()</a>.</p>

</div>
</div>
<a id="a559f0259028e51b88604564fb212cdc2" name="a559f0259028e51b88604564fb212cdc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a559f0259028e51b88604564fb212cdc2">&#9670;&nbsp;</a></span>assign_seat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::assign_seat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;&#160;</td>
          <td class="paramname"><em>pt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classnpc.html">npc</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try to assign a crew member (who must be a player ally) to a specific seat. </p>
<dl class="section note"><dt>Note</dt><dd>enforces NPC's being assigned to only one seat (per-vehicle) at once </dd></dl>

<p class="definition">Definition at line <a class="el" href="vehicle__part_8cpp_source.html#l00580">580</a> of file <a class="el" href="vehicle__part_8cpp_source.html">vehicle_part.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>{</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>    <span class="keywordflow">if</span>( !pt.<a class="code hl_function" href="structvehicle__part.html#a5ade8d53dbb09a12cded87b1a8ce8e23">is_seat</a>() || !pt.<a class="code hl_function" href="structvehicle__part.html#acf1900c90d9b8a3eb2da45d9c8b54218">set_crew</a>( who ) ) {</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>    }</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span> </div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>    <span class="comment">// NPC&#39;s can only be assigned to one seat in the vehicle</span></div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;e : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>        <span class="keywordflow">if</span>( &amp;e == &amp;pt ) {</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>            <span class="comment">// skip this part</span></div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>        }</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span> </div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>        <span class="keywordflow">if</span>( e.is_seat() ) {</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>            <span class="keyword">const</span> <a class="code hl_class" href="classnpc.html">npc</a> *n = e.crew();</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>            <span class="keywordflow">if</span>( n &amp;&amp; n-&gt;<a class="code hl_function" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>() == who.<a class="code hl_function" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>() ) {</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>                e.unset_crew();</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>            }</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>        }</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>    }</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span> </div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>}</div>
<div class="ttc" id="aclassCharacter_html_adb54bdcb284abb66b6be99c8ae225065"><div class="ttname"><a href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">Character::getID</a></div><div class="ttdeci">character_id getID() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00470">character.cpp:470</a></div></div>
<div class="ttc" id="aclassnpc_html"><div class="ttname"><a href="classnpc.html">npc</a></div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l00780">npc.h:781</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a5ade8d53dbb09a12cded87b1a8ce8e23"><div class="ttname"><a href="structvehicle__part.html#a5ade8d53dbb09a12cded87b1a8ce8e23">vehicle_part::is_seat</a></div><div class="ttdeci">bool is_seat() const</div><div class="ttdoc">Can a player or NPC use this part as a seat?</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00514">vehicle_part.cpp:514</a></div></div>
<div class="ttc" id="astructvehicle__part_html_acf1900c90d9b8a3eb2da45d9c8b54218"><div class="ttname"><a href="structvehicle__part.html#acf1900c90d9b8a3eb2da45d9c8b54218">vehicle_part::set_crew</a></div><div class="ttdeci">bool set_crew(const npc &amp;who)</div><div class="ttdoc">Set crew member for this part (seat, turret etc) who must be a player ally)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00441">vehicle_part.cpp:441</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8cpp_source.html#l00470">Character::getID()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00514">vehicle_part::is_seat()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="vehicle__part_8cpp_source.html#l00441">vehicle_part::set_crew()</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02024">veh_interact::do_assign_crew()</a>.</p>

</div>
</div>
<a id="a30b8e7b1d09c18caa89f069d64d37205" name="a30b8e7b1d09c18caa89f069d64d37205"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30b8e7b1d09c18caa89f069d64d37205">&#9670;&nbsp;</a></span>automatic_fire_turret()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::automatic_fire_turret </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;&#160;</td>
          <td class="paramname"><em>pt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="turret_8cpp_source.html#l00542">542</a> of file <a class="el" href="turret_8cpp_source.html">turret.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>{</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>    <a class="code hl_class" href="classturret__data.html">turret_data</a> gun = <a class="code hl_function" href="classvehicle.html#accfab81af66cd979bdfff4c39e5a3a8e">turret_query</a>( pt );</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span> </div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>    <span class="keywordtype">int</span> shots = 0;</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span> </div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>    <span class="keywordflow">if</span>( gun.<a class="code hl_function" href="classturret__data.html#a585d18f2c33116bc1e9028210fccadbc">query</a>() != <a class="code hl_enumvalue" href="classturret__data.html#aa11f464b221b987d03a8859293e07ab6ab2fdab230a2c39f3595a947861863cb7">turret_data::status::ready</a> ) {</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>        <span class="keywordflow">return</span> shots;</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>    }</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span> </div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>    <span class="comment">// The position of the vehicle part.</span></div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> = <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( pt );</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span> </div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>    <span class="comment">// Create the targeting computer&#39;s npc</span></div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>    <a class="code hl_class" href="classnpc.html">npc</a> cpu = <a class="code hl_function" href="classvehicle.html#afa21321fd8f1d85fbc252aad2c1156da">get_targeting_npc</a>( pt );</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span> </div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>    <span class="keywordtype">int</span> area = <a class="code hl_function" href="projectile_8cpp.html#a65071d7b82e80907bb06d5c4127f7308">max_aoe_size</a>( gun.<a class="code hl_function" href="classturret__data.html#aba91a28f4c66130c649ac19f8e65d0a9">ammo_effects</a>() );</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>    <span class="keywordflow">if</span>( area &gt; 0 ) {</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>        <span class="comment">// Pad a bit for less friendly fire</span></div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>        area += area == 1 ? 1 : 2;</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>    }</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span> </div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> u_see = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> );</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> u_hear = !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.is_deaf();</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>    <span class="comment">// The current target of the turret.</span></div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>    <span class="keyword">auto</span> &amp;target = pt.<a class="code hl_variable" href="structvehicle__part.html#a1db4e1805d25a95908b517ce51a64259">target</a>;</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>    <span class="keywordflow">if</span>( target.first == target.second ) {</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>        <span class="comment">// Manual target not set, find one automatically.</span></div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>        <span class="comment">// BEWARE: Calling turret_data.fire on tripoint min coordinates starts a crash</span></div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>        <span class="comment">//      triggered at `trajectory.insert( trajectory.begin(), source )` at ranged.cpp:236</span></div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>        pt.<a class="code hl_function" href="structvehicle__part.html#a85b96041d7f61831a467fdcd1fae1dc5">reset_target</a>( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> );</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>        <span class="keywordtype">int</span> boo_hoo;</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span> </div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>        <span class="comment">// TODO: calculate chance to hit and cap range based upon this</span></div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>        <span class="keywordtype">int</span> max_range = 20;</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>        <span class="keywordtype">int</span> range = std::min( gun.<a class="code hl_function" href="classturret__data.html#a78df34a41feb7bf25a677dba1e8181d5">range</a>(), max_range );</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>        <a class="code hl_class" href="classCreature.html">Creature</a> *auto_target = cpu.<a class="code hl_function" href="classCreature.html#abb91e1cd5610658124d40623e7e4d698">auto_find_hostile_target</a>( range, boo_hoo, area );</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>        <span class="keywordflow">if</span>( auto_target == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>            <span class="keywordflow">if</span>( boo_hoo ) {</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>                cpu.<a class="code hl_variable" href="classCharacter.html#a6592c35167738421f3e04ca8808d37db">name</a> = <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;vehicle turret&quot;</span>, <span class="stringliteral">&quot;The %s&quot;</span> ), pt.<a class="code hl_function" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() );</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>                <span class="comment">// check if the player can see or hear then print chooses a message accordingly</span></div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>                <span class="keywordflow">if</span>( u_see &amp;&amp; u_hear ) {</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;%s points in your direction and emits an IFF warning beep.&quot;</span>,</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>                                                  <span class="stringliteral">&quot;%s points in your direction and emits %d annoyed sounding beeps.&quot;</span>,</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>                                                  boo_hoo ),</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>                             cpu.<a class="code hl_variable" href="classCharacter.html#a6592c35167738421f3e04ca8808d37db">name</a>, boo_hoo );</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( u_hear ) {</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_function" href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a>( <span class="stringliteral">&quot;You hear a warning beep.&quot;</span>,</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>                                                  <span class="stringliteral">&quot;You hear %d annoyed sounding beeps.&quot;</span>,</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>                                                  boo_hoo ), boo_hoo );</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( u_see ) {</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;%s points in your direction.&quot;</span> ), cpu.<a class="code hl_variable" href="classCharacter.html#a6592c35167738421f3e04ca8808d37db">name</a> );</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>                }</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>            }</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>            <span class="keywordflow">return</span> shots;</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>        }</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span> </div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>        target.second = auto_target-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>();</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span> </div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>        <span class="comment">// Target is already set, make sure we didn&#39;t move after aiming (it&#39;s a bug if we did).</span></div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> != target.first ) {</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>            target.second = target.first;</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>            <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s moved after aiming but before it could fire.&quot;</span>, cpu.<a class="code hl_variable" href="classCharacter.html#a6592c35167738421f3e04ca8808d37db">name</a> );</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>            <span class="keywordflow">return</span> shots;</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>        }</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>    }</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span> </div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>    <span class="comment">// Get the turret&#39;s target and reset it</span></div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> targ = target.second;</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>    pt.<a class="code hl_function" href="structvehicle__part.html#a85b96041d7f61831a467fdcd1fae1dc5">reset_target</a>( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> );</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span> </div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>    shots = gun.<a class="code hl_function" href="classturret__data.html#aaf3b3f3b0e3a8647d4641970223f24c9">fire</a>( cpu, targ );</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span> </div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>    <span class="keywordflow">if</span>( shots &amp;&amp; u_see &amp;&amp; !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( targ ) ) {</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s fires its %2$s!&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, pt.<a class="code hl_function" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() );</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>    }</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span> </div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>    <span class="keywordflow">return</span> shots;</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>}</div>
<div class="ttc" id="aclassCharacter_html_a6592c35167738421f3e04ca8808d37db"><div class="ttname"><a href="classCharacter.html#a6592c35167738421f3e04ca8808d37db">Character::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01568">character.h:1568</a></div></div>
<div class="ttc" id="aclassCreature_html"><div class="ttname"><a href="classCreature.html">Creature</a></div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00077">creature.h:78</a></div></div>
<div class="ttc" id="aclassCreature_html_a45926a7ba63ccc9be744f87a4d540b7d"><div class="ttname"><a href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos</a></div><div class="ttdeci">virtual const tripoint &amp; pos() const =0</div></div>
<div class="ttc" id="aclassCreature_html_abb91e1cd5610658124d40623e7e4d698"><div class="ttname"><a href="classCreature.html#abb91e1cd5610658124d40623e7e4d698">Creature::auto_find_hostile_target</a></div><div class="ttdeci">Creature * auto_find_hostile_target(int range, int &amp;boo_hoo, int area=0)</div><div class="ttdoc">For fake-players (turrets, mounted turrets) this functions chooses a target.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00330">creature.cpp:330</a></div></div>
<div class="ttc" id="aclassturret__data_html"><div class="ttname"><a href="classturret__data.html">turret_data</a></div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00473">vehicle.h:474</a></div></div>
<div class="ttc" id="aclassturret__data_html_a585d18f2c33116bc1e9028210fccadbc"><div class="ttname"><a href="classturret__data.html#a585d18f2c33116bc1e9028210fccadbc">turret_data::query</a></div><div class="ttdeci">status query() const</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00232">turret.cpp:232</a></div></div>
<div class="ttc" id="aclassturret__data_html_a78df34a41feb7bf25a677dba1e8181d5"><div class="ttname"><a href="classturret__data.html#a78df34a41feb7bf25a677dba1e8181d5">turret_data::range</a></div><div class="ttdeci">int range() const</div><div class="ttdoc">Maximum range considering current ammo (if any)</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00188">turret.cpp:188</a></div></div>
<div class="ttc" id="aclassturret__data_html_aa11f464b221b987d03a8859293e07ab6ab2fdab230a2c39f3595a947861863cb7"><div class="ttname"><a href="classturret__data.html#aa11f464b221b987d03a8859293e07ab6ab2fdab230a2c39f3595a947861863cb7">turret_data::status::ready</a></div><div class="ttdeci">@ ready</div></div>
<div class="ttc" id="aclassturret__data_html_aaf3b3f3b0e3a8647d4641970223f24c9"><div class="ttname"><a href="classturret__data.html#aaf3b3f3b0e3a8647d4641970223f24c9">turret_data::fire</a></div><div class="ttdeci">int fire(player &amp;p, const tripoint &amp;target)</div><div class="ttdoc">Fire the turret's gun at a given target.</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00292">turret.cpp:292</a></div></div>
<div class="ttc" id="aclassturret__data_html_aba91a28f4c66130c649ac19f8e65d0a9"><div class="ttname"><a href="classturret__data.html#aba91a28f4c66130c649ac19f8e65d0a9">turret_data::ammo_effects</a></div><div class="ttdeci">std::set&lt; ammo_effect_str_id &gt; ammo_effects() const</div><div class="ttdoc">Effects inclusive of any from ammo loaded from tanks.</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00176">turret.cpp:176</a></div></div>
<div class="ttc" id="aclassvehicle_html_accfab81af66cd979bdfff4c39e5a3a8e"><div class="ttname"><a href="classvehicle.html#accfab81af66cd979bdfff4c39e5a3a8e">vehicle::turret_query</a></div><div class="ttdeci">turret_data turret_query(vehicle_part &amp;pt)</div><div class="ttdoc">Get firing data for a turret.</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00055">turret.cpp:55</a></div></div>
<div class="ttc" id="aclassvehicle_html_afa21321fd8f1d85fbc252aad2c1156da"><div class="ttname"><a href="classvehicle.html#afa21321fd8f1d85fbc252aad2c1156da">vehicle::get_targeting_npc</a></div><div class="ttdeci">npc get_targeting_npc(const vehicle_part &amp;pt)</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00519">turret.cpp:519</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a></div><div class="ttdeci">@ m_warning</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00257">enums.h:257</a></div></div>
<div class="ttc" id="aprojectile_8cpp_html_a65071d7b82e80907bb06d5c4127f7308"><div class="ttname"><a href="projectile_8cpp.html#a65071d7b82e80907bb06d5c4127f7308">max_aoe_size</a></div><div class="ttdeci">int max_aoe_size(const std::set&lt; ammo_effect_str_id &gt; &amp;tags)</div><div class="ttdef"><b>Definition:</b> <a href="projectile_8cpp_source.html#l00163">projectile.cpp:163</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a1c555386664b5d61de6bac27572c5c4f"><div class="ttname"><a href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">vehicle_part::name</a></div><div class="ttdeci">std::string name(bool with_prefix=true) const</div><div class="ttdoc">Translated name of a part inclusive of any current status effects with_prefix as true indicates the d...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00105">vehicle_part.cpp:105</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a1db4e1805d25a95908b517ce51a64259"><div class="ttname"><a href="structvehicle__part.html#a1db4e1805d25a95908b517ce51a64259">vehicle_part::target</a></div><div class="ttdeci">std::pair&lt; tripoint, tripoint &gt; target</div><div class="ttdoc">Coordinates for some kind of target; jumper cables and turrets use this Two coordinate pairs are stor...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00431">vehicle.h:431</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a85b96041d7f61831a467fdcd1fae1dc5"><div class="ttname"><a href="structvehicle__part.html#a85b96041d7f61831a467fdcd1fae1dc5">vehicle_part::reset_target</a></div><div class="ttdeci">void reset_target(const tripoint &amp;pos)</div><div class="ttdoc">Reset the target for this part.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00458">vehicle_part.cpp:458</a></div></div>
<div class="ttc" id="atranslations_8cpp_html_a82b835742108b8d7f5f6a291b41e208e"><div class="ttname"><a href="translations_8cpp.html#a82b835742108b8d7f5f6a291b41e208e">vgettext</a></div><div class="ttdeci">const char * vgettext(const char *msgid, const char *msgid_plural, size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8cpp_source.html#l00036">translations.cpp:36</a></div></div>
<div class="ttc" id="atranslations_8cpp_html_af0c79b5c75a7cf2df78663485b03ed9a"><div class="ttname"><a href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a></div><div class="ttdeci">const char * pgettext(const char *context, const char *msgid)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8cpp_source.html#l00041">translations.cpp:41</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="turret_8cpp_source.html#l00176">turret_data::ammo_effects()</a>, <a class="el" href="creature_8cpp_source.html#l00330">Creature::auto_find_hostile_target()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="turret_8cpp_source.html#l00292">turret_data::fire()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="turret_8cpp_source.html#l00519">get_targeting_npc()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="projectile_8cpp_source.html#l00163">max_aoe_size()</a>, <a class="el" href="character_8h_source.html#l01568">Character::name</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00105">vehicle_part::name()</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="translations_8cpp_source.html#l00041">pgettext()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="vehicle_8h_source.html#l01859">pos</a>, <a class="el" href="turret_8cpp_source.html#l00232">turret_data::query()</a>, <a class="el" href="turret_8cpp_source.html#l00188">turret_data::range()</a>, <a class="el" href="classturret__data.html#aa11f464b221b987d03a8859293e07ab6ab2fdab230a2c39f3595a947861863cb7">turret_data::ready</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00458">vehicle_part::reset_target()</a>, <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>, <a class="el" href="vehicle_8h_source.html#l00431">vehicle_part::target</a>, <a class="el" href="turret_8cpp_source.html#l00055">turret_query()</a>, and <a class="el" href="translations_8cpp_source.html#l00036">vgettext()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05361">gain_moves()</a>.</p>

</div>
</div>
<a id="a11ce39add66d395d6e136daf6b53f62a" name="a11ce39add66d395d6e136daf6b53f62a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11ce39add66d395d6e136daf6b53f62a">&#9670;&nbsp;</a></span>autopilot_patrol()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::autopilot_patrol </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >choose one single zone ( multiple zones too complex for now ) choose a point at the far edge of the zone the edge chosen is the edge that is smaller, therefore the longer side of the rectangle is the one the vehicle drives mostly parallel too. if its perfect square then choose a point that is on any edge that the vehicle is not currently at drive to that point. then once arrived, choose a random opposite point of the zone. this should ( in a simple fashion ) cause a patrolling behavior in a criss-cross fashion. in an auto-tractor, this would eventually cover the entire rectangle.</p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l00701">701</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>{<span class="comment"></span></div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span><span class="comment">    /** choose one single zone ( multiple zones too complex for now )</span></div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span><span class="comment">     * choose a point at the far edge of the zone</span></div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span><span class="comment">     * the edge chosen is the edge that is smaller, therefore the longer side</span></div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span><span class="comment">     * of the rectangle is the one the vehicle drives mostly parallel too.</span></div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span><span class="comment">     * if its  perfect square then choose a point that is on any edge that the</span></div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span><span class="comment">     * vehicle is not currently at</span></div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span><span class="comment">     * drive to that point.</span></div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span><span class="comment">     * then once arrived, choose a random opposite point of the zone.</span></div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span><span class="comment">     * this should ( in a simple fashion ) cause a patrolling behavior</span></div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span><span class="comment">     * in a criss-cross fashion.</span></div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span><span class="comment">     * in an auto-tractor, this would eventually cover the entire rectangle.</span></div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span><span class="comment">     */</span></div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>    <span class="comment">// if we are close to a waypoint, then return to come back to this function next turn.</span></div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#acdbb2eec025972d86be23e90e9e92d22">autodrive_local_target</a> != <a class="code hl_variable" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a> ) {</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( <a class="code hl_function" href="classvehicle.html#a789289c4179f7677e45cb100ff5ffb9a">global_square_location</a>().raw(), <a class="code hl_variable" href="classvehicle.html#acdbb2eec025972d86be23e90e9e92d22">autodrive_local_target</a> ) &lt;= 3 ) {</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>            <a class="code hl_variable" href="classvehicle.html#acdbb2eec025972d86be23e90e9e92d22">autodrive_local_target</a> = <a class="code hl_variable" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a>;</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>        }</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>        <span class="keywordflow">if</span>( !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.inbounds( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.getlocal( <a class="code hl_variable" href="classvehicle.html#acdbb2eec025972d86be23e90e9e92d22">autodrive_local_target</a> ) ) ) {</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>            <a class="code hl_variable" href="classvehicle.html#acdbb2eec025972d86be23e90e9e92d22">autodrive_local_target</a> = <a class="code hl_variable" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a>;</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>            <a class="code hl_variable" href="classvehicle.html#a953fed1abe9bacc2a7c98cee6425c5b2">is_patrolling</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>        }</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>        <a class="code hl_function" href="classvehicle.html#aa9bc38c7faa275ff2ea2f92be706da33">drive_to_local_target</a>( <a class="code hl_variable" href="classvehicle.html#acdbb2eec025972d86be23e90e9e92d22">autodrive_local_target</a>, <span class="keyword">false</span> );</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>    }</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>    <a class="code hl_class" href="classzone__manager.html">zone_manager</a> &amp;mgr = <a class="code hl_function" href="classzone__manager.html#a11e6a0ecb51069e3c334b6f4b9c5c6bc">zone_manager::get_manager</a>();</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;zone_src_set = mgr.<a class="code hl_function" href="classzone__manager.html#a9790f2a2f3d3b707b0fb0a9d873de1ab">get_near</a>( <a class="code hl_typedef" href="type__id_8h.html#a4ec2337d992ab8b0115c2bd7ff30902a">zone_type_id</a>( <span class="stringliteral">&quot;VEHICLE_PATROL&quot;</span> ),</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>                               <a class="code hl_function" href="classvehicle.html#a789289c4179f7677e45cb100ff5ffb9a">global_square_location</a>().raw(), 60 );</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>    <span class="keywordflow">if</span>( zone_src_set.empty() ) {</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>        <a class="code hl_variable" href="classvehicle.html#a953fed1abe9bacc2a7c98cee6425c5b2">is_patrolling</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>    }</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>    <span class="comment">// get corners.</span></div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> min;</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> max;</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;box : zone_src_set ) {</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>        <span class="keywordflow">if</span>( min == <a class="code hl_variable" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a> ) {</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>            min = box;</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>            max = box;</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>        }</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>        min.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> = std::min( box.x, min.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> );</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>        min.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> = std::min( box.y, min.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> );</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>        min.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> = std::min( box.z, min.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> );</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>        max.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> = std::max( box.x, max.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> );</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>        max.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> = std::max( box.y, max.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> );</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>        max.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> = std::max( box.z, max.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> );</div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>    }</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> x_side = ( max.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> - min.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> ) &lt; ( max.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> - min.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> );</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> point_along = x_side ? <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( min.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a>, max.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> ) : <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( min.y, max.y );</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> max_tri = x_side ? <a class="code hl_struct" href="structtripoint.html">tripoint</a>( point_along, max.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a>, min.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> ) : <a class="code hl_struct" href="structtripoint.html">tripoint</a>( max.x,</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>                             point_along,</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>                             min.z );</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> min_tri = x_side ? <a class="code hl_struct" href="structtripoint.html">tripoint</a>( point_along, min.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a>, min.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> ) : <a class="code hl_struct" href="structtripoint.html">tripoint</a>( min.x,</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>                             point_along,</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>                             min.z );</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> chosen_tri = min_tri;</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( max_tri, <a class="code hl_function" href="classvehicle.html#a789289c4179f7677e45cb100ff5ffb9a">global_square_location</a>().raw() ) &gt;= <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( min_tri,</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>            <a class="code hl_function" href="classvehicle.html#a789289c4179f7677e45cb100ff5ffb9a">global_square_location</a>().raw() ) ) {</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>        chosen_tri = max_tri;</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>    }</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>    <a class="code hl_variable" href="classvehicle.html#acdbb2eec025972d86be23e90e9e92d22">autodrive_local_target</a> = chosen_tri;</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>    <a class="code hl_function" href="classvehicle.html#aa9bc38c7faa275ff2ea2f92be706da33">drive_to_local_target</a>( <a class="code hl_variable" href="classvehicle.html#acdbb2eec025972d86be23e90e9e92d22">autodrive_local_target</a>, <span class="keyword">false</span> );</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>}</div>
<div class="ttc" id="aclassvehicle_html_a789289c4179f7677e45cb100ff5ffb9a"><div class="ttname"><a href="classvehicle.html#a789289c4179f7677e45cb100ff5ffb9a">vehicle::global_square_location</a></div><div class="ttdeci">tripoint_abs_ms global_square_location() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03091">vehicle.cpp:3091</a></div></div>
<div class="ttc" id="aclassvehicle_html_a953fed1abe9bacc2a7c98cee6425c5b2"><div class="ttname"><a href="classvehicle.html#a953fed1abe9bacc2a7c98cee6425c5b2">vehicle::is_patrolling</a></div><div class="ttdeci">bool is_patrolling</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01925">vehicle.h:1925</a></div></div>
<div class="ttc" id="aclassvehicle_html_aa9bc38c7faa275ff2ea2f92be706da33"><div class="ttname"><a href="classvehicle.html#aa9bc38c7faa275ff2ea2f92be706da33">vehicle::drive_to_local_target</a></div><div class="ttdeci">void drive_to_local_target(const tripoint &amp;target, bool follow_protocol)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l00816">vehicle.cpp:816</a></div></div>
<div class="ttc" id="aclassvehicle_html_acdbb2eec025972d86be23e90e9e92d22"><div class="ttname"><a href="classvehicle.html#acdbb2eec025972d86be23e90e9e92d22">vehicle::autodrive_local_target</a></div><div class="ttdeci">tripoint autodrive_local_target</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01824">vehicle.h:1824</a></div></div>
<div class="ttc" id="aclasszone__manager_html"><div class="ttname"><a href="classzone__manager.html">zone_manager</a></div><div class="ttdef"><b>Definition:</b> <a href="clzones_8h_source.html#l00342">clzones.h:343</a></div></div>
<div class="ttc" id="aclasszone__manager_html_a11e6a0ecb51069e3c334b6f4b9c5c6bc"><div class="ttname"><a href="classzone__manager.html#a11e6a0ecb51069e3c334b6f4b9c5c6bc">zone_manager::get_manager</a></div><div class="ttdeci">static zone_manager &amp; get_manager()</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8cpp_source.html#l00125">clzones.cpp:125</a></div></div>
<div class="ttc" id="aclasszone__manager_html_a9790f2a2f3d3b707b0fb0a9d873de1ab"><div class="ttname"><a href="classzone__manager.html#a9790f2a2f3d3b707b0fb0a9d873de1ab">zone_manager::get_near</a></div><div class="ttdeci">std::unordered_set&lt; tripoint &gt; get_near(const zone_type_id &amp;type, const tripoint &amp;where, int range=MAX_DISTANCE, const item *it=nullptr, const faction_id &amp;fac=your_fac) const</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8cpp_source.html#l00770">clzones.cpp:770</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a47953b33a873caa0861b12222842a5ec"><div class="ttname"><a href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a></div><div class="ttdeci">int rl_dist(const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00519">coordinates.h:519</a></div></div>
<div class="ttc" id="atype__id_8h_html_a4ec2337d992ab8b0115c2bd7ff30902a"><div class="ttname"><a href="type__id_8h.html#a4ec2337d992ab8b0115c2bd7ff30902a">zone_type_id</a></div><div class="ttdeci">string_id&lt; zone_type &gt; zone_type_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00176">type_id.h:176</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01824">autodrive_local_target</a>, <a class="el" href="vehicle_8cpp_source.html#l00816">drive_to_local_target()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="clzones_8cpp_source.html#l00125">zone_manager::get_manager()</a>, <a class="el" href="clzones_8cpp_source.html#l00770">zone_manager::get_near()</a>, <a class="el" href="vehicle_8cpp_source.html#l03091">global_square_location()</a>, <a class="el" href="vehicle_8h_source.html#l01925">is_patrolling</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="point_8h_source.html#l00273">tripoint_zero</a>, <a class="el" href="point_8h_source.html#l00150">tripoint::x</a>, <a class="el" href="point_8h_source.html#l00151">tripoint::y</a>, and <a class="el" href="point_8h_source.html#l00152">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l01751">game::autopilot_vehicles()</a>.</p>

</div>
</div>
<a id="a6035e37524b3ea6157fd0f3bef16ca97" name="a6035e37524b3ea6157fd0f3bef16ca97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6035e37524b3ea6157fd0f3bef16ca97">&#9670;&nbsp;</a></span>autopilot_patrol_check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::autopilot_patrol_check </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l00542">542</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>{</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>    <a class="code hl_class" href="classzone__manager.html">zone_manager</a> &amp;mgr = <a class="code hl_function" href="classzone__manager.html#a11e6a0ecb51069e3c334b6f4b9c5c6bc">zone_manager::get_manager</a>();</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>    <span class="keywordflow">if</span>( mgr.<a class="code hl_function" href="classzone__manager.html#adf01b4f9195463a0b7bf7a8e6a63040d">has_near</a>( <a class="code hl_class" href="classstring__id.html">zone_type_id</a>( <span class="stringliteral">&quot;VEHICLE_PATROL&quot;</span> ), <a class="code hl_function" href="classvehicle.html#a789289c4179f7677e45cb100ff5ffb9a">global_square_location</a>().raw(), 60 ) ) {</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>        <a class="code hl_function" href="classvehicle.html#a20879efe6f04d7de665ba3a57f73e0af">enable_patrol</a>();</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;zones_manager();</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>    }</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>}</div>
<div class="ttc" id="aclassvehicle_html_a20879efe6f04d7de665ba3a57f73e0af"><div class="ttname"><a href="classvehicle.html#a20879efe6f04d7de665ba3a57f73e0af">vehicle::enable_patrol</a></div><div class="ttdeci">void enable_patrol()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01104">vehicle_use.cpp:1104</a></div></div>
<div class="ttc" id="aclasszone__manager_html_adf01b4f9195463a0b7bf7a8e6a63040d"><div class="ttname"><a href="classzone__manager.html#adf01b4f9195463a0b7bf7a8e6a63040d">zone_manager::has_near</a></div><div class="ttdeci">bool has_near(const zone_type_id &amp;type, const tripoint &amp;where, int range=MAX_DISTANCE, const faction_id &amp;fac=your_fac) const</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8cpp_source.html#l00700">clzones.cpp:700</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle__use_8cpp_source.html#l01104">enable_patrol()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="clzones_8cpp_source.html#l00125">zone_manager::get_manager()</a>, <a class="el" href="vehicle_8cpp_source.html#l03091">global_square_location()</a>, and <a class="el" href="clzones_8cpp_source.html#l00700">zone_manager::has_near()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00552">toggle_autopilot()</a>.</p>

</div>
</div>
<a id="a5d21f80be5fabbc95e3d58f250009c24" name="a5d21f80be5fabbc95e3d58f250009c24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d21f80be5fabbc95e3d58f250009c24">&#9670;&nbsp;</a></span>avail_part_with_feature() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::avail_part_with_feature </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>pt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>unbroken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02548">2548</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02550" name="l02550"></a><span class="lineno"> 2550</span>{</div>
<div class="line"><a id="l02551" name="l02551"></a><span class="lineno"> 2551</span>    <span class="keywordtype">int</span> part_a = <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( pt, flag, unbroken );</div>
<div class="line"><a id="l02552" name="l02552"></a><span class="lineno"> 2552</span>    <span class="keywordflow">if</span>( ( part_a &gt;= 0 ) &amp;&amp; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ part_a ].is_available() ) {</div>
<div class="line"><a id="l02553" name="l02553"></a><span class="lineno"> 2553</span>        <span class="keywordflow">return</span> part_a;</div>
<div class="line"><a id="l02554" name="l02554"></a><span class="lineno"> 2554</span>    }</div>
<div class="line"><a id="l02555" name="l02555"></a><span class="lineno"> 2555</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l02556" name="l02556"></a><span class="lineno"> 2556</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l02518">part_with_feature()</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

</div>
</div>
<a id="aad22641da003beff80194f7127280bc5" name="aad22641da003beff80194f7127280bc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad22641da003beff80194f7127280bc5">&#9670;&nbsp;</a></span>avail_part_with_feature() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::avail_part_with_feature </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>unbroken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02543">2543</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02544" name="l02544"></a><span class="lineno"> 2544</span>{</div>
<div class="line"><a id="l02545" name="l02545"></a><span class="lineno"> 2545</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#aad22641da003beff80194f7127280bc5">avail_part_with_feature</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ].mount, flag, unbroken );</div>
<div class="line"><a id="l02546" name="l02546"></a><span class="lineno"> 2546</span>}</div>
<div class="ttc" id="aclassvehicle_html_aad22641da003beff80194f7127280bc5"><div class="ttname"><a href="classvehicle.html#aad22641da003beff80194f7127280bc5">vehicle::avail_part_with_feature</a></div><div class="ttdeci">int avail_part_with_feature(int p, const std::string &amp;f, bool unbroken) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02543">vehicle.cpp:2543</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l02543">avail_part_with_feature()</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l02543">avail_part_with_feature()</a>, <a class="el" href="game_8cpp_source.html#l05443">game::control_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l03179">fuel_left()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>.</p>

</div>
</div>
<a id="aad627a3bca72c23daf3961f6abbd202d" name="aad627a3bca72c23daf3961f6abbd202d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad627a3bca72c23daf3961f6abbd202d">&#9670;&nbsp;</a></span>avail_part_with_feature() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::avail_part_with_feature </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307e">vpart_bitflags</a>&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>unbroken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02534">2534</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02535" name="l02535"></a><span class="lineno"> 2535</span>{</div>
<div class="line"><a id="l02536" name="l02536"></a><span class="lineno"> 2536</span>    <span class="keywordtype">int</span> part_a = <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, flag, unbroken );</div>
<div class="line"><a id="l02537" name="l02537"></a><span class="lineno"> 2537</span>    <span class="keywordflow">if</span>( ( part_a &gt;= 0 ) &amp;&amp; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ part_a ].is_available() ) {</div>
<div class="line"><a id="l02538" name="l02538"></a><span class="lineno"> 2538</span>        <span class="keywordflow">return</span> part_a;</div>
<div class="line"><a id="l02539" name="l02539"></a><span class="lineno"> 2539</span>    }</div>
<div class="line"><a id="l02540" name="l02540"></a><span class="lineno"> 2540</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l02541" name="l02541"></a><span class="lineno"> 2541</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8cpp_source.html#l02518">part_with_feature()</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

</div>
</div>
<a id="a3d8f351c21e7590410a9046f3b040d3b" name="a3d8f351c21e7590410a9046f3b040d3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d8f351c21e7590410a9046f3b040d3b">&#9670;&nbsp;</a></span>average_or_rating()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float vehicle::average_or_rating </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03747">3747</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03748" name="l03748"></a><span class="lineno"> 3748</span>{</div>
<div class="line"><a id="l03749" name="l03749"></a><span class="lineno"> 3749</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a5c432c0da0ff47a483e3aa74548bd435">wheelcache</a>.empty() ) {</div>
<div class="line"><a id="l03750" name="l03750"></a><span class="lineno"> 3750</span>        <span class="keywordflow">return</span> 0.0f;</div>
<div class="line"><a id="l03751" name="l03751"></a><span class="lineno"> 3751</span>    }</div>
<div class="line"><a id="l03752" name="l03752"></a><span class="lineno"> 3752</span>    <span class="keywordtype">float</span> total_rating = 0;</div>
<div class="line"><a id="l03753" name="l03753"></a><span class="lineno"> 3753</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keywordtype">int</span> &amp;wheel_index : <a class="code hl_variable" href="classvehicle.html#a5c432c0da0ff47a483e3aa74548bd435">wheelcache</a> ) {</div>
<div class="line"><a id="l03754" name="l03754"></a><span class="lineno"> 3754</span>        total_rating += <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( wheel_index ).<a class="code hl_function" href="classvpart__info.html#aa6109e11c1a0f7316d57d876466eb20a">wheel_or_rating</a>();</div>
<div class="line"><a id="l03755" name="l03755"></a><span class="lineno"> 3755</span>    }</div>
<div class="line"><a id="l03756" name="l03756"></a><span class="lineno"> 3756</span>    <span class="keywordflow">return</span> total_rating / <a class="code hl_variable" href="classvehicle.html#a5c432c0da0ff47a483e3aa74548bd435">wheelcache</a>.size();</div>
<div class="line"><a id="l03757" name="l03757"></a><span class="lineno"> 3757</span>}</div>
<div class="ttc" id="aclassvehicle_html_a5c432c0da0ff47a483e3aa74548bd435"><div class="ttname"><a href="classvehicle.html#a5c432c0da0ff47a483e3aa74548bd435">vehicle::wheelcache</a></div><div class="ttdeci">std::vector&lt; int &gt; wheelcache</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01761">vehicle.h:1761</a></div></div>
<div class="ttc" id="aclassvpart__info_html_aa6109e11c1a0f7316d57d876466eb20a"><div class="ttname"><a href="classvpart__info.html#aa6109e11c1a0f7316d57d876466eb20a">vpart_info::wheel_or_rating</a></div><div class="ttdeci">float wheel_or_rating() const</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8cpp_source.html#l00903">veh_type.cpp:903</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="veh__type_8cpp_source.html#l00903">vpart_info::wheel_or_rating()</a>, and <a class="el" href="vehicle_8h_source.html#l01761">wheelcache</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>, and <a class="el" href="overmap__ui_8cpp_source.html#l01830">overmap_ui::get_overmap_path_to()</a>.</p>

</div>
</div>
<a id="a9b0acd63b60b974f0ac842263d5ec58f" name="a9b0acd63b60b974f0ac842263d5ec58f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b0acd63b60b974f0ac842263d5ec58f">&#9670;&nbsp;</a></span>backfire()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::backfire </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01126">1126</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>{</div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> power = <a class="code hl_function" href="classvehicle.html#a5246baeafa78272d858f6cce466579e4">part_vpower_w</a>( <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e], <span class="keyword">true</span> );</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> = <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e] );</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>    <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, 40 + power / 10000, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a74bcc1e0384a916f56360c649f543f3a">sounds::sound_t::movement</a>,</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>                   <span class="comment">// single space after the exclaimation mark because it does not end the sentence</span></div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>                   <span class="comment">//~ backfire sound</span></div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>                   <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;a loud BANG! from the %s&quot;</span> ), <span class="comment">// NOLINT(cata-text-style)</span></div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>                                  <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[ e ] ].<a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>() ), <span class="keyword">true</span>, <span class="stringliteral">&quot;vehicle&quot;</span>, <span class="stringliteral">&quot;engine_backfire&quot;</span> );</div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>}</div>
<div class="ttc" id="aclassvehicle_html_a31bcfe9c61adc2fe500315a59e1bb690"><div class="ttname"><a href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">vehicle::engines</a></div><div class="ttdeci">std::vector&lt; int &gt; engines</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01752">vehicle.h:1752</a></div></div>
<div class="ttc" id="aclassvehicle_html_a5246baeafa78272d858f6cce466579e4"><div class="ttname"><a href="classvehicle.html#a5246baeafa78272d858f6cce466579e4">vehicle::part_vpower_w</a></div><div class="ttdeci">int part_vpower_w(int index, bool at_full_hp=false) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01149">vehicle.cpp:1149</a></div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3a74bcc1e0384a916f56360c649f543f3a"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a74bcc1e0384a916f56360c649f543f3a">sounds::sound_t::movement</a></div><div class="ttdeci">@ movement</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a74bcc1e0384a916f56360c649f543f3a">sounds::movement</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="vehicle_8cpp_source.html#l01149">part_vpower_w()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8h_source.html#l01859">pos</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, and <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03644">noise_and_smoke()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00918">start_engine()</a>.</p>

</div>
</div>
<a id="ada20634b6f5df98a1bd03b2af7e08d60" name="ada20634b6f5df98a1bd03b2af7e08d60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada20634b6f5df98a1bd03b2af7e08d60">&#9670;&nbsp;</a></span>balanced_wheel_config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::balanced_wheel_config </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04260">4260</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04261" name="l04261"></a><span class="lineno"> 4261</span>{</div>
<div class="line"><a id="l04262" name="l04262"></a><span class="lineno"> 4262</span>    <a class="code hl_struct" href="structpoint.html">point</a> min = <a class="code hl_variable" href="point_8h.html#a8457edaeb6c1e773774cf1037737c2a6">point_max</a>;</div>
<div class="line"><a id="l04263" name="l04263"></a><span class="lineno"> 4263</span>    <a class="code hl_struct" href="structpoint.html">point</a> max = <a class="code hl_variable" href="point_8h.html#a66feef6944f7a9037008b5206fd1e586">point_min</a>;</div>
<div class="line"><a id="l04264" name="l04264"></a><span class="lineno"> 4264</span>    <span class="comment">// find the bounding box of the wheels</span></div>
<div class="line"><a id="l04265" name="l04265"></a><span class="lineno"> 4265</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;w : <a class="code hl_variable" href="classvehicle.html#a5c432c0da0ff47a483e3aa74548bd435">wheelcache</a> ) {</div>
<div class="line"><a id="l04266" name="l04266"></a><span class="lineno"> 4266</span>        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;pt = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ w ].mount;</div>
<div class="line"><a id="l04267" name="l04267"></a><span class="lineno"> 4267</span>        min.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> = std::min( min.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a>, pt.x );</div>
<div class="line"><a id="l04268" name="l04268"></a><span class="lineno"> 4268</span>        min.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> = std::min( min.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a>, pt.y );</div>
<div class="line"><a id="l04269" name="l04269"></a><span class="lineno"> 4269</span>        max.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> = std::max( max.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a>, pt.x );</div>
<div class="line"><a id="l04270" name="l04270"></a><span class="lineno"> 4270</span>        max.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> = std::max( max.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a>, pt.y );</div>
<div class="line"><a id="l04271" name="l04271"></a><span class="lineno"> 4271</span>    }</div>
<div class="line"><a id="l04272" name="l04272"></a><span class="lineno"> 4272</span> </div>
<div class="line"><a id="l04273" name="l04273"></a><span class="lineno"> 4273</span>    <span class="comment">// Check center of mass inside support of wheels (roughly)</span></div>
<div class="line"><a id="l04274" name="l04274"></a><span class="lineno"> 4274</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> &amp;com = <a class="code hl_function" href="classvehicle.html#a8e52e13cf66fa7ebbe89c16687bae54b">local_center_of_mass</a>();</div>
<div class="line"><a id="l04275" name="l04275"></a><span class="lineno"> 4275</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structinclusive__rectangle.html">inclusive_rectangle&lt;point&gt;</a> support( min, max );</div>
<div class="line"><a id="l04276" name="l04276"></a><span class="lineno"> 4276</span>    <span class="keywordflow">return</span> support.contains( com );</div>
<div class="line"><a id="l04277" name="l04277"></a><span class="lineno"> 4277</span>}</div>
<div class="ttc" id="aclassvehicle_html_a8e52e13cf66fa7ebbe89c16687bae54b"><div class="ttname"><a href="classvehicle.html#a8e52e13cf66fa7ebbe89c16687bae54b">vehicle::local_center_of_mass</a></div><div class="ttdeci">const point &amp; local_center_of_mass() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03155">vehicle.cpp:3155</a></div></div>
<div class="ttc" id="apoint_8h_html_a66feef6944f7a9037008b5206fd1e586"><div class="ttname"><a href="point_8h.html#a66feef6944f7a9037008b5206fd1e586">point_min</a></div><div class="ttdeci">static constexpr point point_min</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00321">point.h:321</a></div></div>
<div class="ttc" id="apoint_8h_html_a8457edaeb6c1e773774cf1037737c2a6"><div class="ttname"><a href="point_8h.html#a8457edaeb6c1e773774cf1037737c2a6">point_max</a></div><div class="ttdeci">static constexpr point point_max</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00322">point.h:322</a></div></div>
<div class="ttc" id="astructinclusive__rectangle_html"><div class="ttname"><a href="structinclusive__rectangle.html">inclusive_rectangle</a></div><div class="ttdef"><b>Definition:</b> <a href="cuboid__rectangle_8h_source.html#l00047">cuboid_rectangle.h:47</a></div></div>
<div class="ttc" id="astructpoint_html"><div class="ttname"><a href="structpoint.html">point</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00035">point.h:35</a></div></div>
<div class="ttc" id="astructpoint_html_a9a82ca9504acabb1e30569f89c805471"><div class="ttname"><a href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">point::y</a></div><div class="ttdeci">int y</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00039">point.h:39</a></div></div>
<div class="ttc" id="astructpoint_html_ad679b07fb69d55f5ad454d0f1f2891d5"><div class="ttname"><a href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">point::x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00038">point.h:38</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cuboid__rectangle_8h_source.html#l00053">inclusive_rectangle&lt; Point, &gt;::contains()</a>, <a class="el" href="vehicle_8cpp_source.html#l03155">local_center_of_mass()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="point_8h_source.html#l00322">point_max</a>, <a class="el" href="point_8h_source.html#l00321">point_min</a>, <a class="el" href="vehicle_8h_source.html#l01761">wheelcache</a>, <a class="el" href="point_8h_source.html#l00038">point::x</a>, and <a class="el" href="point_8h_source.html#l00039">point::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04279">valid_wheel_config()</a>, and <a class="el" href="veh__interact_8cpp_source.html#l02322">wheel_state_description()</a>.</p>

</div>
</div>
<a id="aa4fa51cc4955a15d62baa73006eccfa9" name="aa4fa51cc4955a15d62baa73006eccfa9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4fa51cc4955a15d62baa73006eccfa9">&#9670;&nbsp;</a></span>basic_consumption()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::basic_consumption </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>ftype</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03297">3297</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03298" name="l03298"></a><span class="lineno"> 3298</span>{</div>
<div class="line"><a id="l03299" name="l03299"></a><span class="lineno"> 3299</span>    <span class="keywordtype">int</span> fcon = 0;</div>
<div class="line"><a id="l03300" name="l03300"></a><span class="lineno"> 3300</span>    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> e = 0; e &lt; <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.size(); ++e ) {</div>
<div class="line"><a id="l03301" name="l03301"></a><span class="lineno"> 3301</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#ad220b3180a33f66aa420dfa24b1d3ee4">is_engine_type_on</a>( e, ftype ) ) {</div>
<div class="line"><a id="l03302" name="l03302"></a><span class="lineno"> 3302</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e] ].ammo_current() == <a class="code hl_variable" href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a> &amp;&amp;</div>
<div class="line"><a id="l03303" name="l03303"></a><span class="lineno"> 3303</span>                <a class="code hl_function" href="classvehicle.html#a27cec1366be7bf296d9c483a40833120">part_epower_w</a>( <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e] ) &gt;= 0 ) {</div>
<div class="line"><a id="l03304" name="l03304"></a><span class="lineno"> 3304</span>                <span class="comment">// Electric engine - use epower instead</span></div>
<div class="line"><a id="l03305" name="l03305"></a><span class="lineno"> 3305</span>                fcon -= <a class="code hl_function" href="classvehicle.html#a27cec1366be7bf296d9c483a40833120">part_epower_w</a>( <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e] );</div>
<div class="line"><a id="l03306" name="l03306"></a><span class="lineno"> 3306</span> </div>
<div class="line"><a id="l03307" name="l03307"></a><span class="lineno"> 3307</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#a850e134844078b5efa1084fc1ebbeec0">is_perpetual_type</a>( e ) ) {</div>
<div class="line"><a id="l03308" name="l03308"></a><span class="lineno"> 3308</span>                fcon += <a class="code hl_function" href="classvehicle.html#a5246baeafa78272d858f6cce466579e4">part_vpower_w</a>( <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e] );</div>
<div class="line"><a id="l03309" name="l03309"></a><span class="lineno"> 3309</span>                <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ e ].faults().<a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a>( <a class="code hl_variable" href="vehicle_8cpp.html#a0c862ae2786ce8dbc0d67cb723601d2d">fault_filter_air</a> ) ) {</div>
<div class="line"><a id="l03310" name="l03310"></a><span class="lineno"> 3310</span>                    fcon *= 2;</div>
<div class="line"><a id="l03311" name="l03311"></a><span class="lineno"> 3311</span>                }</div>
<div class="line"><a id="l03312" name="l03312"></a><span class="lineno"> 3312</span>            }</div>
<div class="line"><a id="l03313" name="l03313"></a><span class="lineno"> 3313</span>        }</div>
<div class="line"><a id="l03314" name="l03314"></a><span class="lineno"> 3314</span>    }</div>
<div class="line"><a id="l03315" name="l03315"></a><span class="lineno"> 3315</span>    <span class="keywordflow">return</span> fcon;</div>
<div class="line"><a id="l03316" name="l03316"></a><span class="lineno"> 3316</span>}</div>
<div class="ttc" id="aclassvehicle_html_a27cec1366be7bf296d9c483a40833120"><div class="ttname"><a href="classvehicle.html#a27cec1366be7bf296d9c483a40833120">vehicle::part_epower_w</a></div><div class="ttdeci">int part_epower_w(int index) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01208">vehicle.cpp:1208</a></div></div>
<div class="ttc" id="aclassvehicle_html_a850e134844078b5efa1084fc1ebbeec0"><div class="ttname"><a href="classvehicle.html#a850e134844078b5efa1084fc1ebbeec0">vehicle::is_perpetual_type</a></div><div class="ttdeci">bool is_perpetual_type(int e) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01081">vehicle.cpp:1081</a></div></div>
<div class="ttc" id="aclassvehicle_html_ad220b3180a33f66aa420dfa24b1d3ee4"><div class="ttname"><a href="classvehicle.html#ad220b3180a33f66aa420dfa24b1d3ee4">vehicle::is_engine_type_on</a></div><div class="ttdeci">bool is_engine_type_on(int e, const itype_id &amp;ft) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01026">vehicle.cpp:1026</a></div></div>
<div class="ttc" id="anamespacedetail_html_ab2f84fb3de26acdac3fc63a2dce5ea5e"><div class="ttname"><a href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">detail::count</a></div><div class="ttdeci">constexpr size_t count()</div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__core_8h_source.html#l01073">fmtlib_core.h:1073</a></div></div>
<div class="ttc" id="avehicle_8cpp_html_a0c862ae2786ce8dbc0d67cb723601d2d"><div class="ttname"><a href="vehicle_8cpp.html#a0c862ae2786ce8dbc0d67cb723601d2d">fault_filter_air</a></div><div class="ttdeci">static const fault_id fault_filter_air(&quot;fault_engine_filter_air&quot;)</div></div>
<div class="ttc" id="avehicle_8cpp_html_a3f2436294a28dc686156c10abab2f994"><div class="ttname"><a href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a></div><div class="ttdeci">static const itype_id fuel_type_battery(&quot;battery&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="fmtlib__core_8h_source.html#l01073">detail::count()</a>, <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, <a class="el" href="vehicle_8cpp.html#a0c862ae2786ce8dbc0d67cb723601d2d">fault_filter_air</a>, <a class="el" href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, <a class="el" href="vehicle_8cpp_source.html#l01026">is_engine_type_on()</a>, <a class="el" href="vehicle_8cpp_source.html#l01081">is_perpetual_type()</a>, <a class="el" href="vehicle_8cpp_source.html#l01208">part_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l01149">part_vpower_w()</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

</div>
</div>
<a id="a2eb76e28ca0f8caf364eaa4a79f1eaa0" name="a2eb76e28ca0f8caf364eaa4a79f1eaa0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2eb76e28ca0f8caf364eaa4a79f1eaa0">&#9670;&nbsp;</a></span>beeper_sound()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::beeper_sound </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01191">1191</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>{</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>    <span class="comment">// No power = no sound</span></div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, <span class="keyword">true</span> ) == 0 ) {</div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>    }</div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span> </div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> odd_turn = <a class="code hl_function" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( 2_turns );</div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">get_avail_parts</a>( <span class="stringliteral">&quot;BEEPER&quot;</span> ) ) {</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>        <span class="keywordflow">if</span>( ( odd_turn &amp;&amp; vp.has_feature( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eab1d67af167effd5d1afdeadb63a82ec7">VPFLAG_EVENTURN</a> ) ) ||</div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span>            ( !odd_turn &amp;&amp; vp.has_feature( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eae969d6c7993df32ff8bb263f6f680813">VPFLAG_ODDTURN</a> ) ) ) {</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>        }</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span> </div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span>        <span class="comment">//~ Beeper sound</span></div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span>        <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( vp.pos(), vp.info().bonus, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;beep!&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;vehicle&quot;</span>,</div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>                       <span class="stringliteral">&quot;rear_beeper&quot;</span> );</div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span>    }</div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span>}</div>
<div class="ttc" id="aclassvehicle_html_a5b3c37a197c21cdd469e7779f8c1db50"><div class="ttname"><a href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">vehicle::fuel_left</a></div><div class="ttdeci">int fuel_left(const itype_id &amp;ftype, bool recurse=false) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03179">vehicle.cpp:3179</a></div></div>
<div class="ttc" id="anamespacecalendar_html_a356df28513f4d655ae35c312ab6e7d55"><div class="ttname"><a href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a></div><div class="ttdeci">bool once_every(const time_duration &amp;event_frequency)</div><div class="ttdoc">Predicate to handle rate-limiting.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00490">calendar.cpp:490</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307eab1d67af167effd5d1afdeadb63a82ec7"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eab1d67af167effd5d1afdeadb63a82ec7">VPFLAG_EVENTURN</a></div><div class="ttdeci">@ VPFLAG_EVENTURN</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00033">veh_type.h:33</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307eae969d6c7993df32ff8bb263f6f680813"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eae969d6c7993df32ff8bb263f6f680813">VPFLAG_ODDTURN</a></div><div class="ttdeci">@ VPFLAG_ODDTURN</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00034">veh_type.h:34</a></div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a3f2436294a28dc686156c10abab2f994"><div class="ttname"><a href="vehicle__use_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a></div><div class="ttdeci">static const itype_id fuel_type_battery(&quot;battery&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::alarm</a>, <a class="el" href="vehicle_8cpp_source.html#l03179">fuel_left()</a>, <a class="el" href="vehicle__use_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, <a class="el" href="vehicle_8cpp_source.html#l02678">get_avail_parts()</a>, <a class="el" href="calendar_8cpp_source.html#l00490">calendar::once_every()</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, <a class="el" href="veh__type_8h_source.html#l00033">VPFLAG_EVENTURN</a>, and <a class="el" href="veh__type_8h_source.html#l00034">VPFLAG_ODDTURN</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05361">gain_moves()</a>.</p>

</div>
</div>
<a id="ab429af6376b555746f92158331f2a4cf" name="ab429af6376b555746f92158331f2a4cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab429af6376b555746f92158331f2a4cf">&#9670;&nbsp;</a></span>boarded_parts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; int &gt; vehicle::boarded_parts </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03047">3047</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03048" name="l03048"></a><span class="lineno"> 3048</span>{</div>
<div class="line"><a id="l03049" name="l03049"></a><span class="lineno"> 3049</span>    std::vector&lt;int&gt; res;</div>
<div class="line"><a id="l03050" name="l03050"></a><span class="lineno"> 3050</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">get_avail_parts</a>( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eaebc2a9d9402e04973e4ee469daddeda5">VPFLAG_BOARDABLE</a> ) ) {</div>
<div class="line"><a id="l03051" name="l03051"></a><span class="lineno"> 3051</span>        <span class="keywordflow">if</span>( vp.part().has_flag( <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaacbdd8bab66369a907eb2edbd4b209752">vehicle_part::passenger_flag</a> ) ) {</div>
<div class="line"><a id="l03052" name="l03052"></a><span class="lineno"> 3052</span>            res.push_back( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( vp.part_index() ) );</div>
<div class="line"><a id="l03053" name="l03053"></a><span class="lineno"> 3053</span>        }</div>
<div class="line"><a id="l03054" name="l03054"></a><span class="lineno"> 3054</span>    }</div>
<div class="line"><a id="l03055" name="l03055"></a><span class="lineno"> 3055</span>    <span class="keywordflow">return</span> res;</div>
<div class="line"><a id="l03056" name="l03056"></a><span class="lineno"> 3056</span>}</div>
<div class="ttc" id="astructvehicle__part_html_a6944258e64f01a23d5ea254ad2fe71eaacbdd8bab66369a907eb2edbd4b209752"><div class="ttname"><a href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaacbdd8bab66369a907eb2edbd4b209752">vehicle_part::passenger_flag</a></div><div class="ttdeci">@ passenger_flag</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00192">vehicle.h:192</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307eaebc2a9d9402e04973e4ee469daddeda5"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eaebc2a9d9402e04973e4ee469daddeda5">VPFLAG_BOARDABLE</a></div><div class="ttdeci">@ VPFLAG_BOARDABLE</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00039">veh_type.h:39</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l02678">get_avail_parts()</a>, <a class="el" href="vehicle_8h_source.html#l00192">vehicle_part::passenger_flag</a>, and <a class="el" href="veh__type_8h_source.html#l00039">VPFLAG_BOARDABLE</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, <a class="el" href="vehicle_8cpp_source.html#l02934">part_displayed_at()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06165">unboard_all()</a>.</p>

</div>
</div>
<a id="a42edd61c5db016a1a5021bb9c3189e3a" name="a42edd61c5db016a1a5021bb9c3189e3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42edd61c5db016a1a5021bb9c3189e3a">&#9670;&nbsp;</a></span>break_off()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::break_off </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dmg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06338">6338</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06339" name="l06339"></a><span class="lineno"> 6339</span>{</div>
<div class="line"><a id="l06340" name="l06340"></a><span class="lineno"> 6340</span>    <span class="comment">/* Already-destroyed part - chance it could be torn off into pieces.</span></div>
<div class="line"><a id="l06341" name="l06341"></a><span class="lineno"> 6341</span><span class="comment">     * Chance increases with damage, and decreases with part max durability</span></div>
<div class="line"><a id="l06342" name="l06342"></a><span class="lineno"> 6342</span><span class="comment">     * (so lights, etc are easily removed; frames and plating not so much) */</span></div>
<div class="line"><a id="l06343" name="l06343"></a><span class="lineno"> 6343</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( p ).durability / 10 ) &gt;= dmg ) {</div>
<div class="line"><a id="l06344" name="l06344"></a><span class="lineno"> 6344</span>        <span class="keywordflow">return</span> dmg;</div>
<div class="line"><a id="l06345" name="l06345"></a><span class="lineno"> 6345</span>    }</div>
<div class="line"><a id="l06346" name="l06346"></a><span class="lineno"> 6346</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> = <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( p );</div>
<div class="line"><a id="l06347" name="l06347"></a><span class="lineno"> 6347</span>    <span class="keyword">const</span> <span class="keyword">auto</span> scatter_parts = [&amp;]( <span class="keyword">const</span> <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp; pt ) {</div>
<div class="line"><a id="l06348" name="l06348"></a><span class="lineno"> 6348</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp;piece : pt.pieces_for_broken_part() ) {</div>
<div class="line"><a id="l06349" name="l06349"></a><span class="lineno"> 6349</span>            <span class="comment">// inside the loop, so each piece goes to a different place</span></div>
<div class="line"><a id="l06350" name="l06350"></a><span class="lineno"> 6350</span>            <span class="comment">// TODO: this may spawn items behind a wall</span></div>
<div class="line"><a id="l06351" name="l06351"></a><span class="lineno"> 6351</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> where = <a class="code hl_function" href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, <a class="code hl_variable" href="vehicle_8h.html#a99804d8e2a7788248e634cec0841b296">SCATTER_DISTANCE</a> ) );</div>
<div class="line"><a id="l06352" name="l06352"></a><span class="lineno"> 6352</span>            <span class="comment">// TODO: balance audit, ensure that less pieces are generated than one would need</span></div>
<div class="line"><a id="l06353" name="l06353"></a><span class="lineno"> 6353</span>            <span class="comment">// to build the component (smash a vehicle box that took 10 lumps of steel,</span></div>
<div class="line"><a id="l06354" name="l06354"></a><span class="lineno"> 6354</span>            <span class="comment">// find 12 steel lumps scattered after atom-smashing it with a tree trunk)</span></div>
<div class="line"><a id="l06355" name="l06355"></a><span class="lineno"> 6355</span>            <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#a506fb7b0a17c1578498599e14c173710">magic</a> ) {</div>
<div class="line"><a id="l06356" name="l06356"></a><span class="lineno"> 6356</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_item_or_charges( where, piece );</div>
<div class="line"><a id="l06357" name="l06357"></a><span class="lineno"> 6357</span>            }</div>
<div class="line"><a id="l06358" name="l06358"></a><span class="lineno"> 6358</span>        }</div>
<div class="line"><a id="l06359" name="l06359"></a><span class="lineno"> 6359</span>    };</div>
<div class="line"><a id="l06360" name="l06360"></a><span class="lineno"> 6360</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( p ).location == <a class="code hl_function" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure</a> ) {</div>
<div class="line"><a id="l06361" name="l06361"></a><span class="lineno"> 6361</span>        <span class="comment">// For structural parts, remove other parts first</span></div>
<div class="line"><a id="l06362" name="l06362"></a><span class="lineno"> 6362</span>        std::vector&lt;int&gt; parts_in_square = <a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].mount, <span class="keyword">true</span> );</div>
<div class="line"><a id="l06363" name="l06363"></a><span class="lineno"> 6363</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> index = parts_in_square.size() - 1; index &gt;= 0; index-- ) {</div>
<div class="line"><a id="l06364" name="l06364"></a><span class="lineno"> 6364</span>            <span class="comment">// Ignore the frame being destroyed</span></div>
<div class="line"><a id="l06365" name="l06365"></a><span class="lineno"> 6365</span>            <span class="keywordflow">if</span>( parts_in_square[index] == p ) {</div>
<div class="line"><a id="l06366" name="l06366"></a><span class="lineno"> 6366</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l06367" name="l06367"></a><span class="lineno"> 6367</span>            }</div>
<div class="line"><a id="l06368" name="l06368"></a><span class="lineno"> 6368</span> </div>
<div class="line"><a id="l06369" name="l06369"></a><span class="lineno"> 6369</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ parts_in_square[ index ] ].is_broken() ) {</div>
<div class="line"><a id="l06370" name="l06370"></a><span class="lineno"> 6370</span>                <span class="comment">// Tearing off a broken part - break it up</span></div>
<div class="line"><a id="l06371" name="l06371"></a><span class="lineno"> 6371</span>                <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> ) ) {</div>
<div class="line"><a id="l06372" name="l06372"></a><span class="lineno"> 6372</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s&#39;s %s breaks into pieces!&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>,</div>
<div class="line"><a id="l06373" name="l06373"></a><span class="lineno"> 6373</span>                             <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ parts_in_square[ index ] ].<a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>() );</div>
<div class="line"><a id="l06374" name="l06374"></a><span class="lineno"> 6374</span>                }</div>
<div class="line"><a id="l06375" name="l06375"></a><span class="lineno"> 6375</span>                scatter_parts( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[parts_in_square[index]] );</div>
<div class="line"><a id="l06376" name="l06376"></a><span class="lineno"> 6376</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l06377" name="l06377"></a><span class="lineno"> 6377</span>                <span class="comment">// Intact (but possibly damaged) part - remove it in one piece</span></div>
<div class="line"><a id="l06378" name="l06378"></a><span class="lineno"> 6378</span>                <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> ) ) {</div>
<div class="line"><a id="l06379" name="l06379"></a><span class="lineno"> 6379</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s&#39;s %2$s is torn off!&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>,</div>
<div class="line"><a id="l06380" name="l06380"></a><span class="lineno"> 6380</span>                             <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ parts_in_square[ index ] ].<a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>() );</div>
<div class="line"><a id="l06381" name="l06381"></a><span class="lineno"> 6381</span>                }</div>
<div class="line"><a id="l06382" name="l06382"></a><span class="lineno"> 6382</span>                <a class="code hl_class" href="classitem.html">item</a> part_as_item = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[parts_in_square[<a class="code hl_enumvalue" href="namespacedetail.html#ac4c79842ec549e8b02145d43a1fbc330a6a992d5529f459a44fee58c733255e86">index</a>]].properties_to_item();</div>
<div class="line"><a id="l06383" name="l06383"></a><span class="lineno"> 6383</span>                <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#a506fb7b0a17c1578498599e14c173710">magic</a> ) {</div>
<div class="line"><a id="l06384" name="l06384"></a><span class="lineno"> 6384</span>                    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_item_or_charges( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, part_as_item );</div>
<div class="line"><a id="l06385" name="l06385"></a><span class="lineno"> 6385</span>                }</div>
<div class="line"><a id="l06386" name="l06386"></a><span class="lineno"> 6386</span>            }</div>
<div class="line"><a id="l06387" name="l06387"></a><span class="lineno"> 6387</span>            <a class="code hl_function" href="classvehicle.html#a04638c5234928c4ccca14ddc2059fb11">remove_part</a>( parts_in_square[index] );</div>
<div class="line"><a id="l06388" name="l06388"></a><span class="lineno"> 6388</span>        }</div>
<div class="line"><a id="l06389" name="l06389"></a><span class="lineno"> 6389</span>        <span class="comment">// After clearing the frame, remove it.</span></div>
<div class="line"><a id="l06390" name="l06390"></a><span class="lineno"> 6390</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> ) ) {</div>
<div class="line"><a id="l06391" name="l06391"></a><span class="lineno"> 6391</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s&#39;s %2$s is destroyed!&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ p ].<a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>() );</div>
<div class="line"><a id="l06392" name="l06392"></a><span class="lineno"> 6392</span>        }</div>
<div class="line"><a id="l06393" name="l06393"></a><span class="lineno"> 6393</span>        scatter_parts( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p] );</div>
<div class="line"><a id="l06394" name="l06394"></a><span class="lineno"> 6394</span>        <a class="code hl_function" href="classvehicle.html#a04638c5234928c4ccca14ddc2059fb11">remove_part</a>( p );</div>
<div class="line"><a id="l06395" name="l06395"></a><span class="lineno"> 6395</span>        <a class="code hl_function" href="classvehicle.html#a5732b3bce5414a290baedad25a85b2b4">find_and_split_vehicles</a>( p );</div>
<div class="line"><a id="l06396" name="l06396"></a><span class="lineno"> 6396</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l06397" name="l06397"></a><span class="lineno"> 6397</span>        <span class="comment">//Just break it off</span></div>
<div class="line"><a id="l06398" name="l06398"></a><span class="lineno"> 6398</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> ) ) {</div>
<div class="line"><a id="l06399" name="l06399"></a><span class="lineno"> 6399</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s&#39;s %2$s is destroyed!&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ p ].<a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>() );</div>
<div class="line"><a id="l06400" name="l06400"></a><span class="lineno"> 6400</span>        }</div>
<div class="line"><a id="l06401" name="l06401"></a><span class="lineno"> 6401</span> </div>
<div class="line"><a id="l06402" name="l06402"></a><span class="lineno"> 6402</span>        scatter_parts( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p] );</div>
<div class="line"><a id="l06403" name="l06403"></a><span class="lineno"> 6403</span>        <a class="code hl_function" href="classvehicle.html#a04638c5234928c4ccca14ddc2059fb11">remove_part</a>( p );</div>
<div class="line"><a id="l06404" name="l06404"></a><span class="lineno"> 6404</span>    }</div>
<div class="line"><a id="l06405" name="l06405"></a><span class="lineno"> 6405</span> </div>
<div class="line"><a id="l06406" name="l06406"></a><span class="lineno"> 6406</span>    <span class="keywordflow">return</span> dmg;</div>
<div class="line"><a id="l06407" name="l06407"></a><span class="lineno"> 6407</span>}</div>
<div class="ttc" id="aclassvehicle_html_a04638c5234928c4ccca14ddc2059fb11"><div class="ttname"><a href="classvehicle.html#a04638c5234928c4ccca14ddc2059fb11">vehicle::remove_part</a></div><div class="ttdeci">bool remove_part(int p, RemovePartHandler &amp;handler)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01820">vehicle.cpp:1820</a></div></div>
<div class="ttc" id="aclassvehicle_html_a506fb7b0a17c1578498599e14c173710"><div class="ttname"><a href="classvehicle.html#a506fb7b0a17c1578498599e14c173710">vehicle::magic</a></div><div class="ttdeci">bool magic</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01809">vehicle.h:1809</a></div></div>
<div class="ttc" id="aclassvehicle_html_a5732b3bce5414a290baedad25a85b2b4"><div class="ttname"><a href="classvehicle.html#a5732b3bce5414a290baedad25a85b2b4">vehicle::find_and_split_vehicles</a></div><div class="ttdeci">bool find_and_split_vehicles(int exclude)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02117">vehicle.cpp:2117</a></div></div>
<div class="ttc" id="arng_8h_html_a12244355ee77108f1b08618e9962e4d1"><div class="ttname"><a href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a></div><div class="ttdeci">V random_entry(const C &amp;container, D default_value)</div><div class="ttdoc">Returns a random entry in the container.</div><div class="ttdef"><b>Definition:</b> <a href="rng_8h_source.html#l00088">rng.h:88</a></div></div>
<div class="ttc" id="avehicle_8h_html_a99804d8e2a7788248e634cec0841b296"><div class="ttname"><a href="vehicle_8h.html#a99804d8e2a7788248e634cec0841b296">SCATTER_DISTANCE</a></div><div class="ttdeci">constexpr int SCATTER_DISTANCE</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00079">vehicle.h:79</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="vehicle_8cpp_source.html#l02117">find_and_split_vehicles()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="vehicle_8h_source.html#l01809">magic</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>, <a class="el" href="vehicle_8h_source.html#l01859">pos</a>, <a class="el" href="rng_8h_source.html#l00088">random_entry()</a>, <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, and <a class="el" href="vehicle_8h_source.html#l00079">SCATTER_DISTANCE</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06437">damage_direct()</a>.</p>

</div>
</div>
<a id="af3bb85693d41273a49e87ab79cb61462" name="af3bb85693d41273a49e87ab79cb61462"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3bb85693d41273a49e87ab79cb61462">&#9670;&nbsp;</a></span>calc_mass_center()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::calc_mass_center </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>precalc</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06794">6794</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06795" name="l06795"></a><span class="lineno"> 6795</span>{</div>
<div class="line"><a id="l06796" name="l06796"></a><span class="lineno"> 6796</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::quantity&lt;float, units::mass::unit_type&gt;</a> xf;</div>
<div class="line"><a id="l06797" name="l06797"></a><span class="lineno"> 6797</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::quantity&lt;float, units::mass::unit_type&gt;</a> yf;</div>
<div class="line"><a id="l06798" name="l06798"></a><span class="lineno"> 6798</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::mass</a> m_total = 0_gram;</div>
<div class="line"><a id="l06799" name="l06799"></a><span class="lineno"> 6799</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a397b40aa92dd1fd09ee592aa279bc656">get_all_parts</a>() ) {</div>
<div class="line"><a id="l06800" name="l06800"></a><span class="lineno"> 6800</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> i = vp.part_index();</div>
<div class="line"><a id="l06801" name="l06801"></a><span class="lineno"> 6801</span>        <span class="keywordflow">if</span>( vp.part().removed ) {</div>
<div class="line"><a id="l06802" name="l06802"></a><span class="lineno"> 6802</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l06803" name="l06803"></a><span class="lineno"> 6803</span>        }</div>
<div class="line"><a id="l06804" name="l06804"></a><span class="lineno"> 6804</span> </div>
<div class="line"><a id="l06805" name="l06805"></a><span class="lineno"> 6805</span>        <a class="code hl_class" href="classunits_1_1quantity.html">units::mass</a> m_part = 0_gram;</div>
<div class="line"><a id="l06806" name="l06806"></a><span class="lineno"> 6806</span>        <a class="code hl_class" href="classunits_1_1quantity.html">units::mass</a> m_part_items = 0_gram;</div>
<div class="line"><a id="l06807" name="l06807"></a><span class="lineno"> 6807</span>        m_part += vp.part().base.weight();</div>
<div class="line"><a id="l06808" name="l06808"></a><span class="lineno"> 6808</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;j : <a class="code hl_function" href="classvehicle.html#a983dd9db3cd64078b176a82289e0b260">get_items</a>( i ) ) {</div>
<div class="line"><a id="l06809" name="l06809"></a><span class="lineno"> 6809</span>            m_part_items += j.weight();</div>
<div class="line"><a id="l06810" name="l06810"></a><span class="lineno"> 6810</span>        }</div>
<div class="line"><a id="l06811" name="l06811"></a><span class="lineno"> 6811</span>        <span class="keywordflow">if</span>( vp.part().info().cargo_weight_modifier != 100 ) {</div>
<div class="line"><a id="l06812" name="l06812"></a><span class="lineno"> 6812</span>            m_part_items *= <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( vp.part().info().cargo_weight_modifier ) / 100.0f;</div>
<div class="line"><a id="l06813" name="l06813"></a><span class="lineno"> 6813</span>        }</div>
<div class="line"><a id="l06814" name="l06814"></a><span class="lineno"> 6814</span>        m_part += m_part_items;</div>
<div class="line"><a id="l06815" name="l06815"></a><span class="lineno"> 6815</span> </div>
<div class="line"><a id="l06816" name="l06816"></a><span class="lineno"> 6816</span>        <span class="keywordflow">if</span>( vp.has_feature( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eaebc2a9d9402e04973e4ee469daddeda5">VPFLAG_BOARDABLE</a> ) &amp;&amp; vp.part().has_flag( <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaacbdd8bab66369a907eb2edbd4b209752">vehicle_part::passenger_flag</a> ) ) {</div>
<div class="line"><a id="l06817" name="l06817"></a><span class="lineno"> 6817</span>            <span class="keyword">const</span> <a class="code hl_class" href="classplayer.html">player</a> *p = <a class="code hl_function" href="classvehicle.html#af02a0418851ddf50fcc810951d77b076">get_passenger</a>( i );</div>
<div class="line"><a id="l06818" name="l06818"></a><span class="lineno"> 6818</span>            <span class="comment">// Sometimes flag is wrongly set, don&#39;t crash!</span></div>
<div class="line"><a id="l06819" name="l06819"></a><span class="lineno"> 6819</span>            m_part += p != <span class="keyword">nullptr</span> ? p-&gt;<a class="code hl_function" href="classCharacter.html#a264388843c2319708b9f727da5d15a81">get_weight</a>() : 0_gram;</div>
<div class="line"><a id="l06820" name="l06820"></a><span class="lineno"> 6820</span>        }</div>
<div class="line"><a id="l06821" name="l06821"></a><span class="lineno"> 6821</span> </div>
<div class="line"><a id="l06822" name="l06822"></a><span class="lineno"> 6822</span>        <span class="keywordflow">if</span>( use_precalc ) {</div>
<div class="line"><a id="l06823" name="l06823"></a><span class="lineno"> 6823</span>            xf += vp.part().precalc[0].x * m_part;</div>
<div class="line"><a id="l06824" name="l06824"></a><span class="lineno"> 6824</span>            yf += vp.part().precalc[0].y * m_part;</div>
<div class="line"><a id="l06825" name="l06825"></a><span class="lineno"> 6825</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l06826" name="l06826"></a><span class="lineno"> 6826</span>            xf += vp.mount().x * m_part;</div>
<div class="line"><a id="l06827" name="l06827"></a><span class="lineno"> 6827</span>            yf += vp.mount().y * m_part;</div>
<div class="line"><a id="l06828" name="l06828"></a><span class="lineno"> 6828</span>        }</div>
<div class="line"><a id="l06829" name="l06829"></a><span class="lineno"> 6829</span> </div>
<div class="line"><a id="l06830" name="l06830"></a><span class="lineno"> 6830</span>        m_total += m_part;</div>
<div class="line"><a id="l06831" name="l06831"></a><span class="lineno"> 6831</span>    }</div>
<div class="line"><a id="l06832" name="l06832"></a><span class="lineno"> 6832</span> </div>
<div class="line"><a id="l06833" name="l06833"></a><span class="lineno"> 6833</span>    <a class="code hl_variable" href="classvehicle.html#a4b083d16089ec28b00bfe19a53cf90d6">mass_cache</a> = m_total;</div>
<div class="line"><a id="l06834" name="l06834"></a><span class="lineno"> 6834</span>    <a class="code hl_variable" href="classvehicle.html#ac9c7234d3c2f5f0c42cc57b0931d21a6">mass_dirty</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l06835" name="l06835"></a><span class="lineno"> 6835</span> </div>
<div class="line"><a id="l06836" name="l06836"></a><span class="lineno"> 6836</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> x = xf / <a class="code hl_variable" href="classvehicle.html#a4b083d16089ec28b00bfe19a53cf90d6">mass_cache</a>;</div>
<div class="line"><a id="l06837" name="l06837"></a><span class="lineno"> 6837</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> y = yf / <a class="code hl_variable" href="classvehicle.html#a4b083d16089ec28b00bfe19a53cf90d6">mass_cache</a>;</div>
<div class="line"><a id="l06838" name="l06838"></a><span class="lineno"> 6838</span>    <span class="keywordflow">if</span>( use_precalc ) {</div>
<div class="line"><a id="l06839" name="l06839"></a><span class="lineno"> 6839</span>        <a class="code hl_variable" href="classvehicle.html#a1a55c996486f67a46b7978f13cd1d0e1">mass_center_precalc</a>.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> = std::round( x );</div>
<div class="line"><a id="l06840" name="l06840"></a><span class="lineno"> 6840</span>        <a class="code hl_variable" href="classvehicle.html#a1a55c996486f67a46b7978f13cd1d0e1">mass_center_precalc</a>.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> = std::round( y );</div>
<div class="line"><a id="l06841" name="l06841"></a><span class="lineno"> 6841</span>        <a class="code hl_variable" href="classvehicle.html#a908223c2d250ba23fdbff51379cf2213">mass_center_precalc_dirty</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l06842" name="l06842"></a><span class="lineno"> 6842</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l06843" name="l06843"></a><span class="lineno"> 6843</span>        <a class="code hl_variable" href="classvehicle.html#ade9fbb951e5a6ab5e65708aeef3cb4e2">mass_center_no_precalc</a>.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> = std::round( x );</div>
<div class="line"><a id="l06844" name="l06844"></a><span class="lineno"> 6844</span>        <a class="code hl_variable" href="classvehicle.html#ade9fbb951e5a6ab5e65708aeef3cb4e2">mass_center_no_precalc</a>.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> = std::round( y );</div>
<div class="line"><a id="l06845" name="l06845"></a><span class="lineno"> 6845</span>        <a class="code hl_variable" href="classvehicle.html#afa84e5e990b66ac1cedeba291ddc6028">mass_center_no_precalc_dirty</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l06846" name="l06846"></a><span class="lineno"> 6846</span>    }</div>
<div class="line"><a id="l06847" name="l06847"></a><span class="lineno"> 6847</span>}</div>
<div class="ttc" id="aclassCharacter_html_a264388843c2319708b9f727da5d15a81"><div class="ttname"><a href="classCharacter.html#a264388843c2319708b9f727da5d15a81">Character::get_weight</a></div><div class="ttdeci">units::mass get_weight() const override</div><div class="ttdoc">Returns body weight plus weight of inventory and worn/wielded items.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03635">character.cpp:3635</a></div></div>
<div class="ttc" id="aclassunits_1_1quantity_html"><div class="ttname"><a href="classunits_1_1quantity.html">units::quantity</a></div><div class="ttdef"><b>Definition:</b> <a href="units__def_8h_source.html#l00014">units_def.h:15</a></div></div>
<div class="ttc" id="aclassvehicle_html_a1a55c996486f67a46b7978f13cd1d0e1"><div class="ttname"><a href="classvehicle.html#a1a55c996486f67a46b7978f13cd1d0e1">vehicle::mass_center_precalc</a></div><div class="ttdeci">point mass_center_precalc</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01822">vehicle.h:1822</a></div></div>
<div class="ttc" id="aclassvehicle_html_a4b083d16089ec28b00bfe19a53cf90d6"><div class="ttname"><a href="classvehicle.html#a4b083d16089ec28b00bfe19a53cf90d6">vehicle::mass_cache</a></div><div class="ttdeci">units::mass mass_cache</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01814">vehicle.h:1814</a></div></div>
<div class="ttc" id="aclassvehicle_html_a908223c2d250ba23fdbff51379cf2213"><div class="ttname"><a href="classvehicle.html#a908223c2d250ba23fdbff51379cf2213">vehicle::mass_center_precalc_dirty</a></div><div class="ttdeci">bool mass_center_precalc_dirty</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01901">vehicle.h:1901</a></div></div>
<div class="ttc" id="aclassvehicle_html_ac9c7234d3c2f5f0c42cc57b0931d21a6"><div class="ttname"><a href="classvehicle.html#ac9c7234d3c2f5f0c42cc57b0931d21a6">vehicle::mass_dirty</a></div><div class="ttdeci">bool mass_dirty</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01900">vehicle.h:1900</a></div></div>
<div class="ttc" id="aclassvehicle_html_ade9fbb951e5a6ab5e65708aeef3cb4e2"><div class="ttname"><a href="classvehicle.html#ade9fbb951e5a6ab5e65708aeef3cb4e2">vehicle::mass_center_no_precalc</a></div><div class="ttdeci">point mass_center_no_precalc</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01823">vehicle.h:1823</a></div></div>
<div class="ttc" id="aclassvehicle_html_afa84e5e990b66ac1cedeba291ddc6028"><div class="ttname"><a href="classvehicle.html#afa84e5e990b66ac1cedeba291ddc6028">vehicle::mass_center_no_precalc_dirty</a></div><div class="ttdeci">bool mass_center_no_precalc_dirty</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01902">vehicle.h:1902</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l06882">get_all_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l05288">get_items()</a>, <a class="el" href="vehicle_8cpp_source.html#l03073">get_passenger()</a>, <a class="el" href="character_8cpp_source.html#l03635">Character::get_weight()</a>, <a class="el" href="vehicle_8h_source.html#l01814">mass_cache</a>, <a class="el" href="vehicle_8h_source.html#l01823">mass_center_no_precalc</a>, <a class="el" href="vehicle_8h_source.html#l01902">mass_center_no_precalc_dirty</a>, <a class="el" href="vehicle_8h_source.html#l01822">mass_center_precalc</a>, <a class="el" href="vehicle_8h_source.html#l01901">mass_center_precalc_dirty</a>, <a class="el" href="vehicle_8h_source.html#l01900">mass_dirty</a>, <a class="el" href="vehicle_8h_source.html#l00192">vehicle_part::passenger_flag</a>, <a class="el" href="veh__type_8h_source.html#l00039">VPFLAG_BOARDABLE</a>, <a class="el" href="point_8h_source.html#l00038">point::x</a>, and <a class="el" href="point_8h_source.html#l00039">point::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03155">local_center_of_mass()</a>, <a class="el" href="vehicle_8cpp_source.html#l06789">refresh_mass()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03147">rotated_center_of_mass()</a>.</p>

</div>
</div>
<a id="a86f77e344d17d7ec786d86f6a6c9a426" name="a86f77e344d17d7ec786d86f6a6c9a426"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86f77e344d17d7ec786d86f6a6c9a426">&#9670;&nbsp;</a></span>can_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::can_close </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>part_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01493">1493</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01494" name="l01494"></a><span class="lineno"> 1494</span>{</div>
<div class="line"><a id="l01495" name="l01495"></a><span class="lineno"> 1495</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> <span class="keyword">const</span> &amp;vec : <a class="code hl_function" href="classvehicle.html#af0f69e5e031ee2c64b5e4ea5b874b584">find_lines_of_parts</a>( part_index, <span class="stringliteral">&quot;OPENABLE&quot;</span> ) ) {</div>
<div class="line"><a id="l01496" name="l01496"></a><span class="lineno"> 1496</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> <span class="keyword">const</span> &amp;partID : vec ) {</div>
<div class="line"><a id="l01497" name="l01497"></a><span class="lineno"> 1497</span>            <span class="keyword">const</span> <a class="code hl_class" href="classCreature.html">Creature</a> *<span class="keyword">const</span> mon = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[partID] ) );</div>
<div class="line"><a id="l01498" name="l01498"></a><span class="lineno"> 1498</span>            <span class="keywordflow">if</span>( mon ) {</div>
<div class="line"><a id="l01499" name="l01499"></a><span class="lineno"> 1499</span>                <span class="keywordflow">if</span>( mon-&gt;<a class="code hl_function" href="classCreature.html#a1217a190a2e561227e831a72d4a6d390">is_player</a>() ) {</div>
<div class="line"><a id="l01500" name="l01500"></a><span class="lineno"> 1500</span>                    who.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;There&#39;s some buffoon in the way!&quot;</span> ) );</div>
<div class="line"><a id="l01501" name="l01501"></a><span class="lineno"> 1501</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( mon-&gt;<a class="code hl_function" href="classCreature.html#a07012d6d1998068bef112510c7424374">is_monster</a>() ) {</div>
<div class="line"><a id="l01502" name="l01502"></a><span class="lineno"> 1502</span>                    <span class="comment">// TODO: Houseflies, mosquitoes, etc shouldn&#39;t count</span></div>
<div class="line"><a id="l01503" name="l01503"></a><span class="lineno"> 1503</span>                    who.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s is in the way!&quot;</span> ), mon-&gt;<a class="code hl_function" href="classCreature.html#a5881c150a3ed435f757e0b34b0d1009e">get_name</a>() );</div>
<div class="line"><a id="l01504" name="l01504"></a><span class="lineno"> 1504</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01505" name="l01505"></a><span class="lineno"> 1505</span>                    who.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;%s is in the way!&quot;</span> ), mon-&gt;<a class="code hl_function" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">disp_name</a>() );</div>
<div class="line"><a id="l01506" name="l01506"></a><span class="lineno"> 1506</span>                }</div>
<div class="line"><a id="l01507" name="l01507"></a><span class="lineno"> 1507</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01508" name="l01508"></a><span class="lineno"> 1508</span>            }</div>
<div class="line"><a id="l01509" name="l01509"></a><span class="lineno"> 1509</span>        }</div>
<div class="line"><a id="l01510" name="l01510"></a><span class="lineno"> 1510</span>    }</div>
<div class="line"><a id="l01511" name="l01511"></a><span class="lineno"> 1511</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01512" name="l01512"></a><span class="lineno"> 1512</span>}</div>
<div class="ttc" id="aclassCreature_html_a07012d6d1998068bef112510c7424374"><div class="ttname"><a href="classCreature.html#a07012d6d1998068bef112510c7424374">Creature::is_monster</a></div><div class="ttdeci">virtual bool is_monster() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00101">creature.h:101</a></div></div>
<div class="ttc" id="aclassCreature_html_a1217a190a2e561227e831a72d4a6d390"><div class="ttname"><a href="classCreature.html#a1217a190a2e561227e831a72d4a6d390">Creature::is_player</a></div><div class="ttdeci">virtual bool is_player() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00092">creature.h:92</a></div></div>
<div class="ttc" id="aclassCreature_html_a26b7c431f85f0b99b888db69318ebdc5"><div class="ttname"><a href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">Creature::disp_name</a></div><div class="ttdeci">virtual std::string disp_name(bool possessive=false, bool capitalize_first=false) const =0</div></div>
<div class="ttc" id="aclassCreature_html_a5881c150a3ed435f757e0b34b0d1009e"><div class="ttname"><a href="classCreature.html#a5881c150a3ed435f757e0b34b0d1009e">Creature::get_name</a></div><div class="ttdeci">virtual std::string get_name() const =0</div></div>
<div class="ttc" id="aclassCreature_html_a91dc4715c36eef7d116f944be9a4d435"><div class="ttname"><a href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">Creature::add_msg_if_player</a></div><div class="ttdeci">virtual void add_msg_if_player(const std::string &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00593">creature.h:593</a></div></div>
<div class="ttc" id="aclassvehicle_html_af0f69e5e031ee2c64b5e4ea5b874b584"><div class="ttname"><a href="classvehicle.html#af0f69e5e031ee2c64b5e4ea5b874b584">vehicle::find_lines_of_parts</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; int &gt; &gt; find_lines_of_parts(int part, const std::string &amp;flag)</div><div class="ttdoc">Returns all parts in the vehicle that have the specified flag in their vpinfo and are on the same X-a...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02789">vehicle.cpp:2789</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8h_source.html#l00593">Creature::add_msg_if_player()</a>, <a class="el" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">Creature::disp_name()</a>, <a class="el" href="vehicle_8cpp_source.html#l02789">find_lines_of_parts()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="classCreature.html#a5881c150a3ed435f757e0b34b0d1009e">Creature::get_name()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="creature_8h_source.html#l00101">Creature::is_monster()</a>, <a class="el" href="creature_8h_source.html#l00092">Creature::is_player()</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="gates_8cpp_source.html#l00255">doors::close_door()</a>.</p>

</div>
</div>
<a id="a1f9dfc3363a30ce23a1575e47b851fa0" name="a1f9dfc3363a30ce23a1575e47b851fa0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f9dfc3363a30ce23a1575e47b851fa0">&#9670;&nbsp;</a></span>can_enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::can_enable </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;&#160;</td>
          <td class="paramname"><em>pt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>alert</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Test if part can be enabled (unbroken, sufficient fuel etc), optionally displaying failures to user. </p>

<p class="definition">Definition at line <a class="el" href="vehicle__part_8cpp_source.html#l00549">549</a> of file <a class="el" href="vehicle__part_8cpp_source.html">vehicle_part.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>{</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>    <span class="keywordflow">if</span>( std::none_of( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.begin(), <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.end(), [&amp;pt]( <span class="keyword">const</span> <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp; e ) {</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>    return &amp;e == &amp;pt;</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>} ) || pt.<a class="code hl_variable" href="structvehicle__part.html#ab1d4873f1384392595a1e01c463543a5">removed</a> ) {</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Cannot enable removed or non-existent part&quot;</span> );</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>    }</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span> </div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>    <span class="keywordflow">if</span>( pt.<a class="code hl_function" href="structvehicle__part.html#aeee4fac34f34d6c9ff557fde6590439d">is_broken</a>() ) {</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>    }</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span> </div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>    <span class="keywordflow">if</span>( pt.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;PLANTER&quot;</span> ) &amp;&amp; !<a class="code hl_function" href="group__Weather.html#gadb21721b572a715148778ab71405819a">warm_enough_to_plant</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() ) ) {</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>        <span class="keywordflow">if</span>( alert ) {</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It is too cold to plant anything now.&quot;</span> ) );</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>        }</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>    }</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span> </div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>    <span class="comment">// TODO: check fuel for combustion engines</span></div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span> </div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>    <span class="keywordflow">if</span>( pt.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_variable" href="classvpart__info.html#a0a939666602dd133e501b7cdf1f01eaa">epower</a> &lt; 0 &amp;&amp; <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="vehicle__part_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, <span class="keyword">true</span> ) &lt;= 0 ) {</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>        <span class="keywordflow">if</span>( alert ) {</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Insufficient power to enable %s&quot;</span> ), pt.<a class="code hl_function" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() );</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>        }</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>    }</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span> </div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>}</div>
<div class="ttc" id="aclassvpart__info_html_a0a939666602dd133e501b7cdf1f01eaa"><div class="ttname"><a href="classvpart__info.html#a0a939666602dd133e501b7cdf1f01eaa">vpart_info::epower</a></div><div class="ttdeci">int epower</div><div class="ttdoc">Electrical power, flat rate (watts); positive for generation, negative for consumption For motor cons...</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00185">veh_type.h:185</a></div></div>
<div class="ttc" id="aclassvpart__info_html_aea0fdb1ef9041e28d7856afae97dcc87"><div class="ttname"><a href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">vpart_info::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00336">veh_type.h:336</a></div></div>
<div class="ttc" id="agroup__Weather_html_gadb21721b572a715148778ab71405819a"><div class="ttname"><a href="group__Weather.html#gadb21721b572a715148778ab71405819a">warm_enough_to_plant</a></div><div class="ttdeci">bool warm_enough_to_plant(const tripoint &amp;pos)</div><div class="ttdoc">Is it warm enough to plant seeds?</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l01027">weather.cpp:1027</a></div></div>
<div class="ttc" id="astructvehicle__part_html_ab1d4873f1384392595a1e01c463543a5"><div class="ttname"><a href="structvehicle__part.html#ab1d4873f1384392595a1e01c463543a5">vehicle_part::removed</a></div><div class="ttdeci">bool removed</div><div class="ttdoc">true if this part is removed.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00410">vehicle.h:410</a></div></div>
<div class="ttc" id="avehicle__part_8cpp_html_a3f2436294a28dc686156c10abab2f994"><div class="ttname"><a href="vehicle__part_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a></div><div class="ttdeci">static const itype_id fuel_type_battery(&quot;battery&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="veh__type_8h_source.html#l00185">vpart_info::epower</a>, <a class="el" href="vehicle_8cpp_source.html#l03179">fuel_left()</a>, <a class="el" href="vehicle__part_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="veh__type_8h_source.html#l00336">vpart_info::has_flag()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00519">vehicle_part::info()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00170">vehicle_part::is_broken()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00105">vehicle_part::name()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8h_source.html#l00410">vehicle_part::removed</a>, and <a class="el" href="weather_8cpp_source.html#l01027">warm_enough_to_plant()</a>.</p>

</div>
</div>
<a id="ac460f925a21efb9dea1dc0fc2f930609" name="ac460f925a21efb9dea1dc0fc2f930609"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac460f925a21efb9dea1dc0fc2f930609">&#9670;&nbsp;</a></span>can_float()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::can_float </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>can_float does the vehicle have freeboard or does it overflow with water? </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03974">3974</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03975" name="l03975"></a><span class="lineno"> 3975</span>{</div>
<div class="line"><a id="l03976" name="l03976"></a><span class="lineno"> 3976</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a3bf02329db46b5a5dda2a0b35b8147fc">coeff_water_dirty</a> ) {</div>
<div class="line"><a id="l03977" name="l03977"></a><span class="lineno"> 3977</span>        <a class="code hl_function" href="classvehicle.html#ae97aeac27584b839105a68f12eb1f7a1">coeff_water_drag</a>();</div>
<div class="line"><a id="l03978" name="l03978"></a><span class="lineno"> 3978</span>    }</div>
<div class="line"><a id="l03979" name="l03979"></a><span class="lineno"> 3979</span>    <span class="comment">// Someday I&#39;ll deal with submarines, but now, you can only float if you have freeboard</span></div>
<div class="line"><a id="l03980" name="l03980"></a><span class="lineno"> 3980</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#a954d6ff52f6a111d01aa9700db89e941">draft_m</a> &lt; <a class="code hl_variable" href="classvehicle.html#a8a1adee2a33275ecf3a31301a5ce88da">hull_height</a>;</div>
<div class="line"><a id="l03981" name="l03981"></a><span class="lineno"> 3981</span>}</div>
<div class="ttc" id="aclassvehicle_html_a3bf02329db46b5a5dda2a0b35b8147fc"><div class="ttname"><a href="classvehicle.html#a3bf02329db46b5a5dda2a0b35b8147fc">vehicle::coeff_water_dirty</a></div><div class="ttdeci">bool coeff_water_dirty</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01906">vehicle.h:1906</a></div></div>
<div class="ttc" id="aclassvehicle_html_a8a1adee2a33275ecf3a31301a5ce88da"><div class="ttname"><a href="classvehicle.html#a8a1adee2a33275ecf3a31301a5ce88da">vehicle::hull_height</a></div><div class="ttdeci">double hull_height</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01728">vehicle.h:1728</a></div></div>
<div class="ttc" id="aclassvehicle_html_a954d6ff52f6a111d01aa9700db89e941"><div class="ttname"><a href="classvehicle.html#a954d6ff52f6a111d01aa9700db89e941">vehicle::draft_m</a></div><div class="ttdeci">double draft_m</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01727">vehicle.h:1727</a></div></div>
<div class="ttc" id="aclassvehicle_html_ae97aeac27584b839105a68f12eb1f7a1"><div class="ttname"><a href="classvehicle.html#ae97aeac27584b839105a68f12eb1f7a1">vehicle::coeff_water_drag</a></div><div class="ttdeci">double coeff_water_drag() const</div><div class="ttdoc">coefficient of water drag in kg/m multiplied by the square of speed to calculate water drag force in ...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04047">vehicle.cpp:4047</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01906">coeff_water_dirty</a>, <a class="el" href="vehicle_8cpp_source.html#l04047">coeff_water_drag()</a>, <a class="el" href="vehicle_8h_source.html#l01727">draft_m</a>, and <a class="el" href="vehicle_8h_source.html#l01728">hull_height</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, <a class="el" href="overmap__ui_8cpp_source.html#l01830">overmap_ui::get_overmap_path_to()</a>, <a class="el" href="vehicle_8cpp_source.html#l04097">k_traction()</a>, <a class="el" href="game_8cpp_source.html#l00845">game::place_vehicle_nearby()</a>, <a class="el" href="vehicle_8cpp_source.html#l04284">steering_effectiveness()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01501">map::vehicle_wheel_traction()</a>, and <a class="el" href="veh__interact_8cpp_source.html#l02322">wheel_state_description()</a>.</p>

</div>
</div>
<a id="ace12ee882e4b3b71b7679ff9b01efe9c" name="ace12ee882e4b3b71b7679ff9b01efe9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace12ee882e4b3b71b7679ff9b01efe9c">&#9670;&nbsp;</a></span>can_mount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::can_mount </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>dp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a01bb48ae3e1e67dbfa6a3a9679dc1b13">vpart_id</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns whether or not the vehicle part with the given id can be mounted in the specified square. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dp</td><td>The local coordinate to mount in. </td></tr>
    <tr><td class="paramname">id</td><td>The id of the part to install. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the part can be mounted, false if not. </dd></dl>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01271">1271</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>{</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>    <span class="comment">//The part has to actually exist.</span></div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span>    <span class="keywordflow">if</span>( !<span class="keywordtype">id</span>.is_valid() ) {</div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>    }</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span> </div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>    <span class="comment">//It also has to be a real part, not the null part</span></div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>    <span class="keyword">const</span> <a class="code hl_class" href="classvpart__info.html">vpart_info</a> &amp;<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> = <span class="keywordtype">id</span>.obj();</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.<a class="code hl_function" href="structvehicle__part.html#a47e1312a6ae089f6870efb218f6aa04e">has_flag</a>( <span class="stringliteral">&quot;NOINSTALL&quot;</span> ) ) {</div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span>    }</div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span> </div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>    <span class="keyword">const</span> std::vector&lt;int&gt; parts_in_square = <a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( dp, <span class="keyword">false</span> );</div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span> </div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>    <span class="comment">//First part in an empty square MUST be a structural part</span></div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>    <span class="keywordflow">if</span>( parts_in_square.empty() &amp;&amp; <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.location != <a class="code hl_function" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure</a> ) {</div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span>    }</div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>    <span class="comment">// If its a part that harnesses animals that don&#39;t allow placing on it.</span></div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>    <span class="keywordflow">if</span>( !parts_in_square.empty() &amp;&amp; <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( parts_in_square[0] ).has_flag( <span class="stringliteral">&quot;ANIMAL_CTRL&quot;</span> ) ) {</div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>    }</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>    <span class="comment">//No other part can be placed on a protrusion</span></div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>    <span class="keywordflow">if</span>( !parts_in_square.empty() &amp;&amp; <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( parts_in_square[0] ).has_flag( <span class="stringliteral">&quot;PROTRUSION&quot;</span> ) ) {</div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>    }</div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span> </div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span>    <span class="comment">//No part type can stack with itself, or any other part in the same slot</span></div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;elem : parts_in_square ) {</div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span>        <span class="keyword">const</span> <a class="code hl_class" href="classvpart__info.html">vpart_info</a> &amp;<a class="code hl_function" href="player__display_8cpp.html#a81f1ef24eb127df8dc20d4ef60d5d99e">other_part</a> = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[elem].info();</div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span> </div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>        <span class="comment">//Parts with no location can stack with each other (but not themselves)</span></div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.get_id() == <a class="code hl_function" href="player__display_8cpp.html#a81f1ef24eb127df8dc20d4ef60d5d99e">other_part</a>.get_id() ||</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span>            ( !<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.location.empty() &amp;&amp; <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.location == <a class="code hl_function" href="player__display_8cpp.html#a81f1ef24eb127df8dc20d4ef60d5d99e">other_part</a>.location ) ) {</div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>        }</div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span>        <span class="comment">// Until we have an interface for handling multiple components with CARGO space,</span></div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span>        <span class="comment">// exclude them from being mounted in the same tile.</span></div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.<a class="code hl_function" href="structvehicle__part.html#a47e1312a6ae089f6870efb218f6aa04e">has_flag</a>( <span class="stringliteral">&quot;CARGO&quot;</span> ) &amp;&amp; <a class="code hl_function" href="player__display_8cpp.html#a81f1ef24eb127df8dc20d4ef60d5d99e">other_part</a>.has_flag( <span class="stringliteral">&quot;CARGO&quot;</span> ) ) {</div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>        }</div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span> </div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span>    }</div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span> </div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span>    <span class="comment">// All parts after the first must be installed on or next to an existing part</span></div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span>    <span class="comment">// the exception is when a single tile only structural object is being repaired</span></div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.empty() ) {</div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#a0cf6ac345daa4073fb6e0629e2066d17">is_structural_part_removed</a>() &amp;&amp;</div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span>            !<a class="code hl_function" href="classvehicle.html#a6afe452e4097f52337af003011c59568">has_structural_part</a>( dp ) &amp;&amp;</div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span>            !<a class="code hl_function" href="classvehicle.html#a6afe452e4097f52337af003011c59568">has_structural_part</a>( dp + <a class="code hl_variable" href="point_8h.html#aff73fd5bf470a3db5291c5dec855bb71">point_east</a> ) &amp;&amp;</div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span>            !<a class="code hl_function" href="classvehicle.html#a6afe452e4097f52337af003011c59568">has_structural_part</a>( dp + <a class="code hl_variable" href="point_8h.html#a702e673ec0d39d0822e2dc453a6af3e5">point_south</a> ) &amp;&amp;</div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>            !<a class="code hl_function" href="classvehicle.html#a6afe452e4097f52337af003011c59568">has_structural_part</a>( dp + <a class="code hl_variable" href="point_8h.html#a0acd5e182489265fadc8c586f5d4d701">point_west</a> ) &amp;&amp;</div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>            !<a class="code hl_function" href="classvehicle.html#a6afe452e4097f52337af003011c59568">has_structural_part</a>( dp + <a class="code hl_variable" href="point_8h.html#acfe3d4a2977589c0adad45cf36774d8a">point_north</a> ) ) {</div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span>        }</div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>    }</div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span> </div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>    <span class="comment">// only one exclusive engine allowed</span></div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>    std::string empty;</div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a6632253ff56fbb0b5eaee359011d1e3c">has_engine_conflict</a>( &amp;<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, empty ) ) {</div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>    }</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span> </div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>    <span class="comment">// Check all the flags of the part to see if they require other flags</span></div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>    <span class="comment">// If other flags are required check if those flags are present</span></div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;flag : <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.get_flags() ) {</div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="classjson__flag.html#ad60cc8cafad9e89dfbab36fd8dbd0eda">json_flag::get</a>( flag ).requires_flag().empty() ) {</div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span>            <span class="keywordtype">bool</span> anchor_found = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;elem : parts_in_square ) {</div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( elem ).has_flag( <a class="code hl_function" href="classjson__flag.html#ad60cc8cafad9e89dfbab36fd8dbd0eda">json_flag::get</a>( flag ).requires_flag() ) ) {</div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>                    anchor_found = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>                }</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span>            }</div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span>            <span class="keywordflow">if</span>( !anchor_found ) {</div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span>            }</div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>        }</div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span>    }</div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span> </div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span>    <span class="comment">//Mirrors cannot be mounted on OPAQUE parts</span></div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.<a class="code hl_function" href="structvehicle__part.html#a47e1312a6ae089f6870efb218f6aa04e">has_flag</a>( <span class="stringliteral">&quot;VISION&quot;</span> ) &amp;&amp; !<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.<a class="code hl_function" href="structvehicle__part.html#a47e1312a6ae089f6870efb218f6aa04e">has_flag</a>( <span class="stringliteral">&quot;CAMERA&quot;</span> ) ) {</div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;elem : parts_in_square ) {</div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( elem ).has_flag( <span class="stringliteral">&quot;OPAQUE&quot;</span> ) ) {</div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span>            }</div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span>        }</div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span>    }</div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span>    <span class="comment">//Opaque parts cannot be mounted on mirrors parts</span></div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.<a class="code hl_function" href="structvehicle__part.html#a47e1312a6ae089f6870efb218f6aa04e">has_flag</a>( <span class="stringliteral">&quot;OPAQUE&quot;</span> ) ) {</div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;elem : parts_in_square ) {</div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( elem ).has_flag( <span class="stringliteral">&quot;VISION&quot;</span> ) &amp;&amp;</div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>                !<a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( elem ).has_flag( <span class="stringliteral">&quot;CAMERA&quot;</span> ) ) {</div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>            }</div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>        }</div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>    }</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span> </div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>    <span class="comment">//Turret mounts must NOT be installed on other (modded) turret mounts</span></div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.<a class="code hl_function" href="structvehicle__part.html#a47e1312a6ae089f6870efb218f6aa04e">has_flag</a>( <span class="stringliteral">&quot;TURRET_MOUNT&quot;</span> ) ) {</div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;elem : parts_in_square ) {</div>
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"> 1372</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( elem ).has_flag( <span class="stringliteral">&quot;TURRET_MOUNT&quot;</span> ) ) {</div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span>            }</div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span>        }</div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span>    }</div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span> </div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span>    <span class="comment">//Anything not explicitly denied is permitted</span></div>
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span>}</div>
<div class="ttc" id="aclassjson__flag_html_ad60cc8cafad9e89dfbab36fd8dbd0eda"><div class="ttname"><a href="classjson__flag.html#ad60cc8cafad9e89dfbab36fd8dbd0eda">json_flag::get</a></div><div class="ttdeci">static const json_flag &amp; get(const std::string &amp;id)</div><div class="ttdoc">Fetches flag definition (or null flag if not found)</div><div class="ttdef"><b>Definition:</b> <a href="flag_8cpp_source.html#l00070">flag.cpp:70</a></div></div>
<div class="ttc" id="aclassvehicle_html_a0cf6ac345daa4073fb6e0629e2066d17"><div class="ttname"><a href="classvehicle.html#a0cf6ac345daa4073fb6e0629e2066d17">vehicle::is_structural_part_removed</a></div><div class="ttdeci">bool is_structural_part_removed() const</div><div class="ttdoc">Returns whether or not the vehicle has a structural part queued for removal,.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01254">vehicle.cpp:1254</a></div></div>
<div class="ttc" id="aclassvehicle_html_a6632253ff56fbb0b5eaee359011d1e3c"><div class="ttname"><a href="classvehicle.html#a6632253ff56fbb0b5eaee359011d1e3c">vehicle::has_engine_conflict</a></div><div class="ttdeci">bool has_engine_conflict(const vpart_info *possible_conflict, std::string &amp;conflict_type) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01050">vehicle.cpp:1050</a></div></div>
<div class="ttc" id="aclassvehicle_html_a6afe452e4097f52337af003011c59568"><div class="ttname"><a href="classvehicle.html#a6afe452e4097f52337af003011c59568">vehicle::has_structural_part</a></div><div class="ttdeci">bool has_structural_part(const point &amp;dp) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01239">vehicle.cpp:1239</a></div></div>
<div class="ttc" id="aclassvpart__info_html"><div class="ttname"><a href="classvpart__info.html">vpart_info</a></div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00132">veh_type.h:133</a></div></div>
<div class="ttc" id="aplayer__display_8cpp_html_a81f1ef24eb127df8dc20d4ef60d5d99e"><div class="ttname"><a href="player__display_8cpp.html#a81f1ef24eb127df8dc20d4ef60d5d99e">other_part</a></div><div class="ttdeci">static body_part other_part(body_part bp)</div><div class="ttdef"><b>Definition:</b> <a href="player__display_8cpp_source.html#l00054">player_display.cpp:54</a></div></div>
<div class="ttc" id="apoint_8h_html_a0acd5e182489265fadc8c586f5d4d701"><div class="ttname"><a href="point_8h.html#a0acd5e182489265fadc8c586f5d4d701">point_west</a></div><div class="ttdeci">static constexpr point point_west</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00282">point.h:282</a></div></div>
<div class="ttc" id="apoint_8h_html_a702e673ec0d39d0822e2dc453a6af3e5"><div class="ttname"><a href="point_8h.html#a702e673ec0d39d0822e2dc453a6af3e5">point_south</a></div><div class="ttdeci">static constexpr point point_south</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00280">point.h:280</a></div></div>
<div class="ttc" id="apoint_8h_html_acfe3d4a2977589c0adad45cf36774d8a"><div class="ttname"><a href="point_8h.html#acfe3d4a2977589c0adad45cf36774d8a">point_north</a></div><div class="ttdeci">static constexpr point point_north</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00276">point.h:276</a></div></div>
<div class="ttc" id="apoint_8h_html_aff73fd5bf470a3db5291c5dec855bb71"><div class="ttname"><a href="point_8h.html#aff73fd5bf470a3db5291c5dec855bb71">point_east</a></div><div class="ttdeci">static constexpr point point_east</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00278">point.h:278</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a47e1312a6ae089f6870efb218f6aa04e"><div class="ttname"><a href="structvehicle__part.html#a47e1312a6ae089f6870efb218f6aa04e">vehicle_part::has_flag</a></div><div class="ttdeci">bool has_flag(const int flag) const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00208">vehicle.h:208</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flag_8cpp_source.html#l00070">json_flag::get()</a>, <a class="el" href="vehicle_8cpp_source.html#l01050">has_engine_conflict()</a>, <a class="el" href="vehicle_8h_source.html#l00208">vehicle_part::has_flag()</a>, <a class="el" href="vehicle_8cpp_source.html#l01239">has_structural_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l01254">is_structural_part_removed()</a>, <a class="el" href="player__display_8cpp_source.html#l00054">other_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>, <a class="el" href="point_8h_source.html#l00278">point_east</a>, <a class="el" href="point_8h_source.html#l00276">point_north</a>, <a class="el" href="point_8h_source.html#l00280">point_south</a>, and <a class="el" href="point_8h_source.html#l00282">point_west</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l01554">install_part()</a>, and <a class="el" href="veh__interact_8cpp_source.html#l02122">veh_interact::move_cursor()</a>.</p>

</div>
</div>
<a id="a8ab138d254ebd9207f2a7e021040a4d8" name="a8ab138d254ebd9207f2a7e021040a4d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ab138d254ebd9207f2a7e021040a4d8">&#9670;&nbsp;</a></span>can_unmount() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::can_unmount </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01382">1382</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span>{</div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span>    std::string no_reason;</div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a8ab138d254ebd9207f2a7e021040a4d8">can_unmount</a>( p, no_reason );</div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"> 1386</span>}</div>
<div class="ttc" id="aclassvehicle_html_a8ab138d254ebd9207f2a7e021040a4d8"><div class="ttname"><a href="classvehicle.html#a8ab138d254ebd9207f2a7e021040a4d8">vehicle::can_unmount</a></div><div class="ttdeci">bool can_unmount(int p) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01382">vehicle.cpp:1382</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l01382">can_unmount()</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__item__handling_8cpp_source.html#l01273">can_do_activity_there()</a>, <a class="el" href="veh__interact_8cpp_source.html#l01753">veh_interact::can_remove_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l01382">can_unmount()</a>, and <a class="el" href="veh__interact_8cpp_source.html#l00536">veh_interact::cant_do()</a>.</p>

</div>
</div>
<a id="a862aacf53bdf71913925b6dc66f5cc31" name="a862aacf53bdf71913925b6dc66f5cc31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a862aacf53bdf71913925b6dc66f5cc31">&#9670;&nbsp;</a></span>can_unmount() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::can_unmount </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>reason</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01388">1388</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span>{</div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span>    <span class="keywordflow">if</span>( p &lt; 0 || p &gt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size() ) ) {</div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span>    }</div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span> </div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span>    <span class="comment">// Find all the flags on parts in this tile that require other flags</span></div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> pt = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].mount;</div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span>    std::vector&lt;int&gt; parts_here = <a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( pt, <span class="keyword">false</span> );</div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span> </div>
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;elem : parts_here ) {</div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;flag : <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( elem ).get_flags() ) {</div>
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"> 1400</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( p ).has_flag( <a class="code hl_function" href="classjson__flag.html#ad60cc8cafad9e89dfbab36fd8dbd0eda">json_flag::get</a>( flag ).requires_flag() ) ) {</div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"> 1401</span>                reason = <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Remove the attached %s first.&quot;</span> ), <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( elem ).<a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>() );</div>
<div class="line"><a id="l01402" name="l01402"></a><span class="lineno"> 1402</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"> 1403</span>            }</div>
<div class="line"><a id="l01404" name="l01404"></a><span class="lineno"> 1404</span>        }</div>
<div class="line"><a id="l01405" name="l01405"></a><span class="lineno"> 1405</span>    }</div>
<div class="line"><a id="l01406" name="l01406"></a><span class="lineno"> 1406</span> </div>
<div class="line"><a id="l01407" name="l01407"></a><span class="lineno"> 1407</span>    <span class="comment">//Can&#39;t remove an animal part if the animal is still contained</span></div>
<div class="line"><a id="l01408" name="l01408"></a><span class="lineno"> 1408</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].has_flag( <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaaabd3365c4be9551a2c9a5b72039d04c3">vehicle_part::animal_flag</a> ) ) {</div>
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"> 1409</span>        reason = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Remove carried animal first.&quot;</span> );</div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"> 1410</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"> 1411</span>    }</div>
<div class="line"><a id="l01412" name="l01412"></a><span class="lineno"> 1412</span> </div>
<div class="line"><a id="l01413" name="l01413"></a><span class="lineno"> 1413</span>    <span class="comment">//Structural parts have extra requirements</span></div>
<div class="line"><a id="l01414" name="l01414"></a><span class="lineno"> 1414</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( p ).location == <a class="code hl_function" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure</a> ) {</div>
<div class="line"><a id="l01415" name="l01415"></a><span class="lineno"> 1415</span> </div>
<div class="line"><a id="l01416" name="l01416"></a><span class="lineno"> 1416</span>        std::vector&lt;int&gt; parts_in_square = <a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].mount, <span class="keyword">false</span> );</div>
<div class="line"><a id="l01417" name="l01417"></a><span class="lineno"> 1417</span>        <span class="comment">/* To remove a structural part, there can be only structural parts left</span></div>
<div class="line"><a id="l01418" name="l01418"></a><span class="lineno"> 1418</span><span class="comment">         * in that square (might be more than one in the case of wreckage) */</span></div>
<div class="line"><a id="l01419" name="l01419"></a><span class="lineno"> 1419</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;elem : parts_in_square ) {</div>
<div class="line"><a id="l01420" name="l01420"></a><span class="lineno"> 1420</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( elem ).location != <a class="code hl_function" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure</a> ) {</div>
<div class="line"><a id="l01421" name="l01421"></a><span class="lineno"> 1421</span>                reason = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Remove all other attached parts first.&quot;</span> );</div>
<div class="line"><a id="l01422" name="l01422"></a><span class="lineno"> 1422</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01423" name="l01423"></a><span class="lineno"> 1423</span>            }</div>
<div class="line"><a id="l01424" name="l01424"></a><span class="lineno"> 1424</span>        }</div>
<div class="line"><a id="l01425" name="l01425"></a><span class="lineno"> 1425</span> </div>
<div class="line"><a id="l01426" name="l01426"></a><span class="lineno"> 1426</span>        <span class="comment">//If it&#39;s the last part in the square...</span></div>
<div class="line"><a id="l01427" name="l01427"></a><span class="lineno"> 1427</span>        <span class="keywordflow">if</span>( parts_in_square.size() == 1 ) {</div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span> </div>
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"> 1429</span>            <span class="comment">/* This is the tricky part: We can&#39;t remove a part that would cause</span></div>
<div class="line"><a id="l01430" name="l01430"></a><span class="lineno"> 1430</span><span class="comment">             * the vehicle to &#39;break into two&#39; (like removing the middle section</span></div>
<div class="line"><a id="l01431" name="l01431"></a><span class="lineno"> 1431</span><span class="comment">             * of a quad bike, for instance). This basically requires doing some</span></div>
<div class="line"><a id="l01432" name="l01432"></a><span class="lineno"> 1432</span><span class="comment">             * breadth-first searches to ensure previously connected parts are</span></div>
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"> 1433</span><span class="comment">             * still connected. */</span></div>
<div class="line"><a id="l01434" name="l01434"></a><span class="lineno"> 1434</span> </div>
<div class="line"><a id="l01435" name="l01435"></a><span class="lineno"> 1435</span>            <span class="comment">//First, find all the squares connected to the one we&#39;re removing</span></div>
<div class="line"><a id="l01436" name="l01436"></a><span class="lineno"> 1436</span>            std::vector&lt;vehicle_part&gt; connected_parts;</div>
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"> 1437</span> </div>
<div class="line"><a id="l01438" name="l01438"></a><span class="lineno"> 1438</span>            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; 4; i++ ) {</div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span>                <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> next = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].mount + <a class="code hl_struct" href="structpoint.html">point</a>( i &lt; 2 ? ( i == 0 ? -1 : 1 ) : 0,</div>
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"> 1440</span>                                   i &lt; 2 ? 0 : ( i == 2 ? -1 : 1 ) );</div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"> 1441</span>                std::vector&lt;int&gt; parts_over_there = <a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( next, <span class="keyword">false</span> );</div>
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"> 1442</span>                <span class="comment">//Ignore empty squares</span></div>
<div class="line"><a id="l01443" name="l01443"></a><span class="lineno"> 1443</span>                <span class="keywordflow">if</span>( !parts_over_there.empty() ) {</div>
<div class="line"><a id="l01444" name="l01444"></a><span class="lineno"> 1444</span>                    <span class="comment">//Just need one part from the square to track the x/y</span></div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span>                    connected_parts.push_back( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[parts_over_there[0]] );</div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span>                }</div>
<div class="line"><a id="l01447" name="l01447"></a><span class="lineno"> 1447</span>            }</div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"> 1448</span> </div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span>            <span class="comment">/* If size = 0, it&#39;s the last part of the whole vehicle, so we&#39;re OK</span></div>
<div class="line"><a id="l01450" name="l01450"></a><span class="lineno"> 1450</span><span class="comment">             * If size = 1, it&#39;s one protruding part (i.e., bicycle wheel), so OK</span></div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"> 1451</span><span class="comment">             * Otherwise, it gets complicated... */</span></div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"> 1452</span>            <span class="keywordflow">if</span>( connected_parts.size() &gt; 1 ) {</div>
<div class="line"><a id="l01453" name="l01453"></a><span class="lineno"> 1453</span> </div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span>                <span class="comment">/* We&#39;ll take connected_parts[0] to be the target part.</span></div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"> 1455</span><span class="comment">                 * Every other part must have some path (that doesn&#39;t involve</span></div>
<div class="line"><a id="l01456" name="l01456"></a><span class="lineno"> 1456</span><span class="comment">                 * the part about to be removed) to the target part, in order</span></div>
<div class="line"><a id="l01457" name="l01457"></a><span class="lineno"> 1457</span><span class="comment">                 * for the part to be legally removable. */</span></div>
<div class="line"><a id="l01458" name="l01458"></a><span class="lineno"> 1458</span>                <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;next_part : connected_parts ) {</div>
<div class="line"><a id="l01459" name="l01459"></a><span class="lineno"> 1459</span>                    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#afbada90fa3188ed391fcd80023f1148f">is_connected</a>( connected_parts[0], next_part, <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p] ) ) {</div>
<div class="line"><a id="l01460" name="l01460"></a><span class="lineno"> 1460</span>                        <span class="comment">//Removing that part would break the vehicle in two</span></div>
<div class="line"><a id="l01461" name="l01461"></a><span class="lineno"> 1461</span>                        reason = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Removing this part would split the vehicle.&quot;</span> );</div>
<div class="line"><a id="l01462" name="l01462"></a><span class="lineno"> 1462</span>                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01463" name="l01463"></a><span class="lineno"> 1463</span>                    }</div>
<div class="line"><a id="l01464" name="l01464"></a><span class="lineno"> 1464</span>                }</div>
<div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span> </div>
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"> 1466</span>            }</div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span> </div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span>        }</div>
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"> 1469</span>    }</div>
<div class="line"><a id="l01470" name="l01470"></a><span class="lineno"> 1470</span>    <span class="comment">//Anything not explicitly denied is permitted</span></div>
<div class="line"><a id="l01471" name="l01471"></a><span class="lineno"> 1471</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01472" name="l01472"></a><span class="lineno"> 1472</span>}</div>
<div class="ttc" id="aclassvehicle_html_afbada90fa3188ed391fcd80023f1148f"><div class="ttname"><a href="classvehicle.html#afbada90fa3188ed391fcd80023f1148f">vehicle::is_connected</a></div><div class="ttdeci">bool is_connected(const vehicle_part &amp;to, const vehicle_part &amp;from, const vehicle_part &amp;excluded) const</div><div class="ttdoc">Performs a breadth-first search from one part to another, to see if a path exists between the two wit...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01484">vehicle.cpp:1484</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a6944258e64f01a23d5ea254ad2fe71eaaabd3365c4be9551a2c9a5b72039d04c3"><div class="ttname"><a href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaaabd3365c4be9551a2c9a5b72039d04c3">vehicle_part::animal_flag</a></div><div class="ttdeci">@ animal_flag</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00193">vehicle.h:193</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="vehicle_8h_source.html#l00193">vehicle_part::animal_flag</a>, <a class="el" href="flag_8cpp_source.html#l00070">json_flag::get()</a>, <a class="el" href="vehicle_8cpp_source.html#l01484">is_connected()</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>, and <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>.</p>

</div>
</div>
<a id="a9c46063d58fd3a05504dec8bb8b6e837" name="a9c46063d58fd3a05504dec8bb8b6e837"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c46063d58fd3a05504dec8bb8b6e837">&#9670;&nbsp;</a></span>can_use_rails()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::can_use_rails </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03369">3369</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03370" name="l03370"></a><span class="lineno"> 3370</span>{</div>
<div class="line"><a id="l03371" name="l03371"></a><span class="lineno"> 3371</span>    <span class="comment">// Do not allow vehicles without rail wheels or with mixed wheels</span></div>
<div class="line"><a id="l03372" name="l03372"></a><span class="lineno"> 3372</span>    <span class="keywordflow">return</span> !<a class="code hl_variable" href="classvehicle.html#a905db1f8c84d0754a8e0a121392a2b3a">rail_wheelcache</a>.empty() &amp;&amp; <a class="code hl_variable" href="classvehicle.html#a5c432c0da0ff47a483e3aa74548bd435">wheelcache</a>.size() == <a class="code hl_variable" href="classvehicle.html#a905db1f8c84d0754a8e0a121392a2b3a">rail_wheelcache</a>.size();</div>
<div class="line"><a id="l03373" name="l03373"></a><span class="lineno"> 3373</span>}</div>
<div class="ttc" id="aclassvehicle_html_a905db1f8c84d0754a8e0a121392a2b3a"><div class="ttname"><a href="classvehicle.html#a905db1f8c84d0754a8e0a121392a2b3a">vehicle::rail_wheelcache</a></div><div class="ttdeci">std::vector&lt; int &gt; rail_wheelcache</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01763">vehicle.h:1763</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01763">rail_wheelcache</a>, and <a class="el" href="vehicle_8h_source.html#l01761">wheelcache</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l01850">vehicle_movement::is_on_rails()</a>.</p>

</div>
</div>
<a id="a46d22a6712ad986ed60917c367be83eb" name="a46d22a6712ad986ed60917c367be83eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46d22a6712ad986ed60917c367be83eb">&#9670;&nbsp;</a></span>charge_battery()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::charge_battery </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>amount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>include_other_vehicles</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try to charge our (and, optionally, connected vehicles') batteries by the given amount. </p>
<dl class="section return"><dt>Returns</dt><dd>amount of charge left over. </dd></dl>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04926">4926</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04927" name="l04927"></a><span class="lineno"> 4927</span>{</div>
<div class="line"><a id="l04928" name="l04928"></a><span class="lineno"> 4928</span>    <span class="comment">// Key parts by percentage charge level.</span></div>
<div class="line"><a id="l04929" name="l04929"></a><span class="lineno"> 4929</span>    std::multimap&lt;int, vehicle_part *&gt; chargeable_parts;</div>
<div class="line"><a id="l04930" name="l04930"></a><span class="lineno"> 4930</span>    <span class="keywordflow">for</span>( <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;p : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l04931" name="l04931"></a><span class="lineno"> 4931</span>        <span class="keywordflow">if</span>( p.is_available() &amp;&amp; p.is_battery() &amp;&amp; p.ammo_capacity() &gt; p.ammo_remaining() ) {</div>
<div class="line"><a id="l04932" name="l04932"></a><span class="lineno"> 4932</span>            chargeable_parts.insert( { ( p.ammo_remaining() * 100 ) / p.ammo_capacity(), &amp;p } );</div>
<div class="line"><a id="l04933" name="l04933"></a><span class="lineno"> 4933</span>        }</div>
<div class="line"><a id="l04934" name="l04934"></a><span class="lineno"> 4934</span>    }</div>
<div class="line"><a id="l04935" name="l04935"></a><span class="lineno"> 4935</span>    <span class="keywordflow">while</span>( amount &gt; 0 &amp;&amp; !chargeable_parts.empty() ) {</div>
<div class="line"><a id="l04936" name="l04936"></a><span class="lineno"> 4936</span>        <span class="comment">// Grab first part, charge until it reaches the next %, then re-insert with new % key.</span></div>
<div class="line"><a id="l04937" name="l04937"></a><span class="lineno"> 4937</span>        <span class="keyword">auto</span> iter = chargeable_parts.begin();</div>
<div class="line"><a id="l04938" name="l04938"></a><span class="lineno"> 4938</span>        <span class="keywordtype">int</span> charge_level = iter-&gt;first;</div>
<div class="line"><a id="l04939" name="l04939"></a><span class="lineno"> 4939</span>        <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> *p = iter-&gt;second;</div>
<div class="line"><a id="l04940" name="l04940"></a><span class="lineno"> 4940</span>        chargeable_parts.erase( iter );</div>
<div class="line"><a id="l04941" name="l04941"></a><span class="lineno"> 4941</span>        <span class="comment">// Calculate number of charges to reach the next %, but insure it&#39;s at least</span></div>
<div class="line"><a id="l04942" name="l04942"></a><span class="lineno"> 4942</span>        <span class="comment">// one more than current charge.</span></div>
<div class="line"><a id="l04943" name="l04943"></a><span class="lineno"> 4943</span>        <span class="keywordtype">int</span> next_charge_level = ( ( charge_level + 1 ) * p-&gt;<a class="code hl_function" href="structvehicle__part.html#a3cdc75652e7509b56d164fe9e5c15231">ammo_capacity</a>() ) / 100;</div>
<div class="line"><a id="l04944" name="l04944"></a><span class="lineno"> 4944</span>        next_charge_level = std::max( next_charge_level, p-&gt;<a class="code hl_function" href="structvehicle__part.html#a9c6bf106558c9ed00536e2d7cb0e862d">ammo_remaining</a>() + 1 );</div>
<div class="line"><a id="l04945" name="l04945"></a><span class="lineno"> 4945</span>        <span class="keywordtype">int</span> qty = std::min( amount, next_charge_level - p-&gt;<a class="code hl_function" href="structvehicle__part.html#a9c6bf106558c9ed00536e2d7cb0e862d">ammo_remaining</a>() );</div>
<div class="line"><a id="l04946" name="l04946"></a><span class="lineno"> 4946</span>        p-&gt;<a class="code hl_function" href="structvehicle__part.html#ab16185500ef5d69edf04ffc7df422049">ammo_set</a>( <a class="code hl_variable" href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, p-&gt;<a class="code hl_function" href="structvehicle__part.html#a9c6bf106558c9ed00536e2d7cb0e862d">ammo_remaining</a>() + qty );</div>
<div class="line"><a id="l04947" name="l04947"></a><span class="lineno"> 4947</span>        amount -= qty;</div>
<div class="line"><a id="l04948" name="l04948"></a><span class="lineno"> 4948</span>        <span class="keywordflow">if</span>( p-&gt;<a class="code hl_function" href="structvehicle__part.html#a3cdc75652e7509b56d164fe9e5c15231">ammo_capacity</a>() &gt; p-&gt;<a class="code hl_function" href="structvehicle__part.html#a9c6bf106558c9ed00536e2d7cb0e862d">ammo_remaining</a>() ) {</div>
<div class="line"><a id="l04949" name="l04949"></a><span class="lineno"> 4949</span>            chargeable_parts.insert( { ( p-&gt;<a class="code hl_function" href="structvehicle__part.html#a9c6bf106558c9ed00536e2d7cb0e862d">ammo_remaining</a>() * 100 ) / p-&gt;<a class="code hl_function" href="structvehicle__part.html#a3cdc75652e7509b56d164fe9e5c15231">ammo_capacity</a>(), p } );</div>
<div class="line"><a id="l04950" name="l04950"></a><span class="lineno"> 4950</span>        }</div>
<div class="line"><a id="l04951" name="l04951"></a><span class="lineno"> 4951</span>    }</div>
<div class="line"><a id="l04952" name="l04952"></a><span class="lineno"> 4952</span> </div>
<div class="line"><a id="l04953" name="l04953"></a><span class="lineno"> 4953</span>    <span class="keywordflow">if</span>( amount &gt; 0 &amp;&amp; include_other_vehicles ) {</div>
<div class="line"><a id="l04954" name="l04954"></a><span class="lineno"> 4954</span>        <span class="comment">// still a bit of charge we could send out...</span></div>
<div class="line"><a id="l04955" name="l04955"></a><span class="lineno"> 4955</span>        <span class="keyword">using</span> tvr = <a class="code hl_enumeration" href="namespacedistribution__graph.html#a2693ab255ec1b2e508b6af35709ce9eb">distribution_graph::traverse_visitor_result</a>;</div>
<div class="line"><a id="l04956" name="l04956"></a><span class="lineno"> 4956</span>        <span class="keyword">auto</span> charge_veh = [&amp;amount]( <a class="code hl_class" href="classvehicle.html">vehicle</a> &amp; veh ) {</div>
<div class="line"><a id="l04957" name="l04957"></a><span class="lineno"> 4957</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.add_msg_if_player( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;CHv: %d&quot;</span>, amount );</div>
<div class="line"><a id="l04958" name="l04958"></a><span class="lineno"> 4958</span>            amount = veh.charge_battery( amount, <span class="keyword">false</span> );</div>
<div class="line"><a id="l04959" name="l04959"></a><span class="lineno"> 4959</span>            <span class="keywordflow">return</span> amount &gt; 0 ? tvr::continue_further : tvr::stop;</div>
<div class="line"><a id="l04960" name="l04960"></a><span class="lineno"> 4960</span>        };</div>
<div class="line"><a id="l04961" name="l04961"></a><span class="lineno"> 4961</span>        <span class="keyword">auto</span> charge_grid = [&amp;amount]( <a class="code hl_class" href="classdistribution__grid.html">distribution_grid</a> &amp; grid ) {</div>
<div class="line"><a id="l04962" name="l04962"></a><span class="lineno"> 4962</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.add_msg_if_player( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;CHg: %d&quot;</span>, amount );</div>
<div class="line"><a id="l04963" name="l04963"></a><span class="lineno"> 4963</span>            amount = grid.mod_resource( amount, <span class="keyword">false</span> );</div>
<div class="line"><a id="l04964" name="l04964"></a><span class="lineno"> 4964</span>            <span class="keywordflow">return</span> amount &gt; 0 ? tvr::continue_further : tvr::stop;</div>
<div class="line"><a id="l04965" name="l04965"></a><span class="lineno"> 4965</span>        };</div>
<div class="line"><a id="l04966" name="l04966"></a><span class="lineno"> 4966</span>        <a class="code hl_function" href="namespacedistribution__graph.html#a27a7603aec9db0a5d334bbee275915d9">distribution_graph::traverse</a>( *<span class="keyword">this</span>, charge_veh, charge_grid );</div>
<div class="line"><a id="l04967" name="l04967"></a><span class="lineno"> 4967</span>    }</div>
<div class="line"><a id="l04968" name="l04968"></a><span class="lineno"> 4968</span> </div>
<div class="line"><a id="l04969" name="l04969"></a><span class="lineno"> 4969</span> </div>
<div class="line"><a id="l04970" name="l04970"></a><span class="lineno"> 4970</span>    <span class="keywordflow">return</span> amount;</div>
<div class="line"><a id="l04971" name="l04971"></a><span class="lineno"> 4971</span>}</div>
<div class="ttc" id="aclassdistribution__grid_html"><div class="ttname"><a href="classdistribution__grid.html">distribution_grid</a></div><div class="ttdoc">A cache that organizes producers, storage and consumers of some resource, like electricity.</div><div class="ttdef"><b>Definition:</b> <a href="distribution__grid_8h_source.html#l00036">distribution_grid.h:37</a></div></div>
<div class="ttc" id="aclassvehicle_html"><div class="ttname"><a href="classvehicle.html">vehicle</a></div><div class="ttdoc">A vehicle as a whole with all its components.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00674">vehicle.h:675</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a></div><div class="ttdeci">@ m_debug</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00264">enums.h:264</a></div></div>
<div class="ttc" id="anamespacedistribution__graph_html_a2693ab255ec1b2e508b6af35709ce9eb"><div class="ttname"><a href="namespacedistribution__graph.html#a2693ab255ec1b2e508b6af35709ce9eb">distribution_graph::traverse_visitor_result</a></div><div class="ttdeci">traverse_visitor_result</div><div class="ttdef"><b>Definition:</b> <a href="distribution__grid_8h_source.html#l00186">distribution_grid.h:186</a></div></div>
<div class="ttc" id="anamespacedistribution__graph_html_a27a7603aec9db0a5d334bbee275915d9"><div class="ttname"><a href="namespacedistribution__graph.html#a27a7603aec9db0a5d334bbee275915d9">distribution_graph::traverse</a></div><div class="ttdeci">void traverse(StartPoint &amp;start, VehFunc veh_action, GridFunc grid_action)</div><div class="ttdoc">Traverses the graph of connected vehicles and grids.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04802">vehicle.cpp:4802</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a3cdc75652e7509b56d164fe9e5c15231"><div class="ttname"><a href="structvehicle__part.html#a3cdc75652e7509b56d164fe9e5c15231">vehicle_part::ammo_capacity</a></div><div class="ttdeci">int ammo_capacity() const</div><div class="ttdoc">Maximum amount of fuel, charges or ammunition that can be contained by a part.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00228">vehicle_part.cpp:228</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a9c6bf106558c9ed00536e2d7cb0e862d"><div class="ttname"><a href="structvehicle__part.html#a9c6bf106558c9ed00536e2d7cb0e862d">vehicle_part::ammo_remaining</a></div><div class="ttdeci">int ammo_remaining() const</div><div class="ttdoc">Amount of fuel, charges or ammunition currently contained by a part.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00241">vehicle_part.cpp:241</a></div></div>
<div class="ttc" id="astructvehicle__part_html_ab16185500ef5d69edf04ffc7df422049"><div class="ttname"><a href="structvehicle__part.html#ab16185500ef5d69edf04ffc7df422049">vehicle_part::ammo_set</a></div><div class="ttdeci">int ammo_set(const itype_id &amp;ammo, int qty=-1)</div><div class="ttdoc">Set fuel, charges or ammunition for this part removing any existing ammo.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00254">vehicle_part.cpp:254</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle__part_8cpp_source.html#l00228">vehicle_part::ammo_capacity()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00241">vehicle_part::ammo_remaining()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00254">vehicle_part::ammo_set()</a>, <a class="el" href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="enums_8h_source.html#l00264">m_debug</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="vehicle_8cpp_source.html#l04802">distribution_graph::traverse()</a>.</p>

<p class="reference">Referenced by <a class="el" href="debug__menu_8cpp_source.html#l01325">debug_menu::debug()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>, <a class="el" href="vehicle_8cpp_source.html#l04619">power_parts()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06657">update_time()</a>.</p>

</div>
</div>
<a id="a63b06a1d61d0c44f460077314bb742a8" name="a63b06a1d61d0c44f460077314bb742a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63b06a1d61d0c44f460077314bb742a8">&#9670;&nbsp;</a></span>check_falling_or_floating()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::check_falling_or_floating </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__move_8cpp_source.html#l01461">1461</a> of file <a class="el" href="vehicle__move_8cpp_source.html">vehicle_move.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01462" name="l01462"></a><span class="lineno"> 1462</span>{</div>
<div class="line"><a id="l01463" name="l01463"></a><span class="lineno"> 1463</span>    <span class="comment">// TODO: Make the vehicle &quot;slide&quot; towards its center of weight</span></div>
<div class="line"><a id="l01464" name="l01464"></a><span class="lineno"> 1464</span>    <span class="comment">//  when it&#39;s not properly supported</span></div>
<div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span>    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;pts = <a class="code hl_function" href="classvehicle.html#a2e80dafb2c03147b569688658843d9d6">get_points</a>( <span class="keyword">true</span> );</div>
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"> 1466</span>    <span class="keywordflow">if</span>( pts.empty() ) {</div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span>        <span class="comment">// Dirty vehicle with no parts</span></div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span>        <a class="code hl_variable" href="classvehicle.html#aeafb913ad9b9d1341d51a4c51ba43a06">is_falling</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"> 1469</span>        <a class="code hl_variable" href="classvehicle.html#ae3cbbbb890aa9a12504ec3458746f3e1">is_floating</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01470" name="l01470"></a><span class="lineno"> 1470</span>        <a class="code hl_variable" href="classvehicle.html#a3cfee06c49af306085cad6bbf3326319">in_water</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01471" name="l01471"></a><span class="lineno"> 1471</span>        <a class="code hl_variable" href="classvehicle.html#a0a35b7f917fdb08e70a78315cc968f86">is_flying</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01472" name="l01472"></a><span class="lineno"> 1472</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01473" name="l01473"></a><span class="lineno"> 1473</span>    }</div>
<div class="line"><a id="l01474" name="l01474"></a><span class="lineno"> 1474</span> </div>
<div class="line"><a id="l01475" name="l01475"></a><span class="lineno"> 1475</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01476" name="l01476"></a><span class="lineno"> 1476</span>    <a class="code hl_variable" href="classvehicle.html#aeafb913ad9b9d1341d51a4c51ba43a06">is_falling</a> = here.<a class="code hl_function" href="classmap.html#abff2fded83a8e96e5e20084c3cb59579">has_zlevels</a>();</div>
<div class="line"><a id="l01477" name="l01477"></a><span class="lineno"> 1477</span> </div>
<div class="line"><a id="l01478" name="l01478"></a><span class="lineno"> 1478</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a0a35b7f917fdb08e70a78315cc968f86">is_flying</a> &amp;&amp; <a class="code hl_function" href="classvehicle.html#a292961ab33a42bf495d19b8692f6f105">is_rotorcraft</a>() ) {</div>
<div class="line"><a id="l01479" name="l01479"></a><span class="lineno"> 1479</span>        <a class="code hl_variable" href="classvehicle.html#aeafb913ad9b9d1341d51a4c51ba43a06">is_falling</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01480" name="l01480"></a><span class="lineno"> 1480</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01481" name="l01481"></a><span class="lineno"> 1481</span>        <a class="code hl_variable" href="classvehicle.html#a0a35b7f917fdb08e70a78315cc968f86">is_flying</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01482" name="l01482"></a><span class="lineno"> 1482</span>    }</div>
<div class="line"><a id="l01483" name="l01483"></a><span class="lineno"> 1483</span> </div>
<div class="line"><a id="l01484" name="l01484"></a><span class="lineno"> 1484</span>    <span class="keywordtype">size_t</span> deep_water_tiles = 0;</div>
<div class="line"><a id="l01485" name="l01485"></a><span class="lineno"> 1485</span>    <span class="keywordtype">size_t</span> water_tiles = 0;</div>
<div class="line"><a id="l01486" name="l01486"></a><span class="lineno"> 1486</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;p : pts ) {</div>
<div class="line"><a id="l01487" name="l01487"></a><span class="lineno"> 1487</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#aeafb913ad9b9d1341d51a4c51ba43a06">is_falling</a> ) {</div>
<div class="line"><a id="l01488" name="l01488"></a><span class="lineno"> 1488</span>            <a class="code hl_struct" href="structtripoint.html">tripoint</a> below( p.xy(), p.z - 1 );</div>
<div class="line"><a id="l01489" name="l01489"></a><span class="lineno"> 1489</span>            <a class="code hl_variable" href="classvehicle.html#aeafb913ad9b9d1341d51a4c51ba43a06">is_falling</a> &amp;= here.<a class="code hl_function" href="classmap.html#a516c0764134cc86b57297811520395f7">has_flag_ter_or_furn</a>( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a7ae3043cdc343c2784d644bcafe86269">TFLAG_NO_FLOOR</a>, p ) &amp;&amp;</div>
<div class="line"><a id="l01490" name="l01490"></a><span class="lineno"> 1490</span>                          ( p.z &gt; -<a class="code hl_variable" href="game__constants_8h.html#aad0eacfa516a8f7e005674027d7640fe">OVERMAP_DEPTH</a> ) &amp;&amp; !here.<a class="code hl_function" href="classmap.html#a3779768673ad08004a999b1ac440421c">supports_above</a>( below );</div>
<div class="line"><a id="l01491" name="l01491"></a><span class="lineno"> 1491</span>        }</div>
<div class="line"><a id="l01492" name="l01492"></a><span class="lineno"> 1492</span>        deep_water_tiles += here.<a class="code hl_function" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258aeb9fcbd752ad2c632ccc4383c5641b69">TFLAG_DEEP_WATER</a>, p ) ? 1 : 0;</div>
<div class="line"><a id="l01493" name="l01493"></a><span class="lineno"> 1493</span>        water_tiles += here.<a class="code hl_function" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a36b67adb6e7c521980de8a6688085d16">TFLAG_SWIMMABLE</a>, p ) ? 1 : 0;</div>
<div class="line"><a id="l01494" name="l01494"></a><span class="lineno"> 1494</span>    }</div>
<div class="line"><a id="l01495" name="l01495"></a><span class="lineno"> 1495</span>    <span class="comment">// floating if 2/3rds of the vehicle is in deep water</span></div>
<div class="line"><a id="l01496" name="l01496"></a><span class="lineno"> 1496</span>    <a class="code hl_variable" href="classvehicle.html#ae3cbbbb890aa9a12504ec3458746f3e1">is_floating</a> = 3 * deep_water_tiles &gt;= 2 * pts.size();</div>
<div class="line"><a id="l01497" name="l01497"></a><span class="lineno"> 1497</span>    <span class="comment">// in_water if 1/2 of the vehicle is in water at all</span></div>
<div class="line"><a id="l01498" name="l01498"></a><span class="lineno"> 1498</span>    <a class="code hl_variable" href="classvehicle.html#a3cfee06c49af306085cad6bbf3326319">in_water</a> =  2 * water_tiles &gt;= pts.size();</div>
<div class="line"><a id="l01499" name="l01499"></a><span class="lineno"> 1499</span>}</div>
<div class="ttc" id="aclassmap_html_a3779768673ad08004a999b1ac440421c"><div class="ttname"><a href="classmap.html#a3779768673ad08004a999b1ac440421c">map::supports_above</a></div><div class="ttdeci">bool supports_above(const tripoint &amp;p) const</div><div class="ttdoc">Does this tile support vehicles and furniture above it.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02031">map.cpp:2031</a></div></div>
<div class="ttc" id="aclassmap_html_a516c0764134cc86b57297811520395f7"><div class="ttname"><a href="classmap.html#a516c0764134cc86b57297811520395f7">map::has_flag_ter_or_furn</a></div><div class="ttdeci">bool has_flag_ter_or_furn(const std::string &amp;flag, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02333">map.cpp:2333</a></div></div>
<div class="ttc" id="aclassmap_html_abff2fded83a8e96e5e20084c3cb59579"><div class="ttname"><a href="classmap.html#abff2fded83a8e96e5e20084c3cb59579">map::has_zlevels</a></div><div class="ttdeci">bool has_zlevels() const</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l01657">map.h:1657</a></div></div>
<div class="ttc" id="aclassvehicle_html_a2e80dafb2c03147b569688658843d9d6"><div class="ttname"><a href="classvehicle.html#a2e80dafb2c03147b569688658843d9d6">vehicle::get_points</a></div><div class="ttdeci">std::set&lt; tripoint &gt; &amp; get_points(bool force_refresh=false)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06568">vehicle.cpp:6568</a></div></div>
<div class="ttc" id="aclassvehicle_html_a3cfee06c49af306085cad6bbf3326319"><div class="ttname"><a href="classvehicle.html#a3cfee06c49af306085cad6bbf3326319">vehicle::in_water</a></div><div class="ttdeci">bool in_water</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01915">vehicle.h:1915</a></div></div>
<div class="ttc" id="agame__constants_8h_html_aad0eacfa516a8f7e005674027d7640fe"><div class="ttname"><a href="game__constants_8h.html#aad0eacfa516a8f7e005674027d7640fe">OVERMAP_DEPTH</a></div><div class="ttdeci">static constexpr int OVERMAP_DEPTH</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00061">game_constants.h:61</a></div></div>
<div class="ttc" id="amapdata_8h_html_aa04d037303ea30193f7cf0cd82304258a36b67adb6e7c521980de8a6688085d16"><div class="ttname"><a href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a36b67adb6e7c521980de8a6688085d16">TFLAG_SWIMMABLE</a></div><div class="ttdeci">@ TFLAG_SWIMMABLE</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00279">mapdata.h:279</a></div></div>
<div class="ttc" id="amapdata_8h_html_aa04d037303ea30193f7cf0cd82304258a7ae3043cdc343c2784d644bcafe86269"><div class="ttname"><a href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a7ae3043cdc343c2784d644bcafe86269">TFLAG_NO_FLOOR</a></div><div class="ttdeci">@ TFLAG_NO_FLOOR</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00310">mapdata.h:310</a></div></div>
<div class="ttc" id="amapdata_8h_html_aa04d037303ea30193f7cf0cd82304258aeb9fcbd752ad2c632ccc4383c5641b69"><div class="ttname"><a href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258aeb9fcbd752ad2c632ccc4383c5641b69">TFLAG_DEEP_WATER</a></div><div class="ttdeci">@ TFLAG_DEEP_WATER</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00301">mapdata.h:301</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="map_8cpp_source.html#l00141">get_map()</a>, <a class="el" href="vehicle_8cpp_source.html#l06568">get_points()</a>, <a class="el" href="map_8cpp_source.html#l02304">map::has_flag()</a>, <a class="el" href="map_8cpp_source.html#l02333">map::has_flag_ter_or_furn()</a>, <a class="el" href="map_8h_source.html#l01657">map::has_zlevels()</a>, <a class="el" href="vehicle_8h_source.html#l01915">in_water</a>, <a class="el" href="vehicle_8h_source.html#l01946">is_falling</a>, <a class="el" href="vehicle_8h_source.html#l01913">is_floating</a>, <a class="el" href="vehicle_8h_source.html#l01917">is_flying</a>, <a class="el" href="vehicle_8cpp_source.html#l04017">is_rotorcraft()</a>, <a class="el" href="game__constants_8h_source.html#l00061">OVERMAP_DEPTH</a>, <a class="el" href="map_8cpp_source.html#l02031">map::supports_above()</a>, <a class="el" href="mapdata_8h_source.html#l00301">TFLAG_DEEP_WATER</a>, <a class="el" href="mapdata_8h_source.html#l00310">TFLAG_NO_FLOOR</a>, and <a class="el" href="mapdata_8h_source.html#l00279">TFLAG_SWIMMABLE</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05361">gain_moves()</a>, <a class="el" href="grab_8cpp_source.html#l00021">game::grabbed_veh_move()</a>, and <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>.</p>

</div>
</div>
<a id="a7d3113700f4a8faafbdf34a46278687b" name="a7d3113700f4a8faafbdf34a46278687b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d3113700f4a8faafbdf34a46278687b">&#9670;&nbsp;</a></span>check_heli_ascend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::check_heli_ascend </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__move_8cpp_source.html#l01031">1031</a> of file <a class="el" href="vehicle__move_8cpp_source.html">vehicle_move.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>{</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#a292961ab33a42bf495d19b8692f6f105">is_rotorcraft</a>() ) {</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;A vehicle is somehow flying without being an aircraft&quot;</span> );</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>    }</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &gt; 0 &amp;&amp; !<a class="code hl_function" href="classvehicle.html#a6ac15340cefeea4793448cdb34784011">is_flying_in_air</a>() ) {</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>        p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It would be unsafe to try and take off while you are moving.&quot;</span> ) );</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>    }</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;pt : <a class="code hl_function" href="classvehicle.html#a2e80dafb2c03147b569688658843d9d6">get_points</a>( <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>        <a class="code hl_struct" href="structtripoint.html">tripoint</a> above( pt.xy(), pt.z + 1 );</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>        <span class="keywordflow">if</span>( !here.<a class="code hl_function" href="classmap.html#aa00000bc092d452f60dc532532d58232">inbounds_z</a>( above.z ) ) {</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>            p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It would be unsafe to try and ascend further.&quot;</span> ) );</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>        }</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>        <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a516c0764134cc86b57297811520395f7">has_flag_ter_or_furn</a>( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a526400ab16c5537e7cbbe1a1a400ae6e">TFLAG_INDOORS</a>, pt )</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>            || here.<a class="code hl_function" href="classmap.html#a82534d8752a0be6bbb000928d1f1978b">impassable_ter_furn</a>( above )</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>            || here.<a class="code hl_function" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( above )</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>            || <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at( above )</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>          ) {</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>            p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>                                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It would be unsafe to try and ascend when there are obstacles above you.&quot;</span> ) );</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>        }</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>    }</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>}</div>
<div class="ttc" id="aclassmap_html_a82534d8752a0be6bbb000928d1f1978b"><div class="ttname"><a href="classmap.html#a82534d8752a0be6bbb000928d1f1978b">map::impassable_ter_furn</a></div><div class="ttdeci">bool impassable_ter_furn(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01839">map.cpp:1839</a></div></div>
<div class="ttc" id="aclassmap_html_aa00000bc092d452f60dc532532d58232"><div class="ttname"><a href="classmap.html#aa00000bc092d452f60dc532532d58232">map::inbounds_z</a></div><div class="ttdeci">bool inbounds_z(const int z) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l01645">map.h:1645</a></div></div>
<div class="ttc" id="aclassmap_html_aa487d96256c3d35db7a1bf273156b64a"><div class="ttname"><a href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">map::veh_at</a></div><div class="ttdeci">optional_vpart_position veh_at(const tripoint &amp;p) const</div><div class="ttdoc">Checks if tile is occupied by vehicle and by which part.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00988">map.cpp:988</a></div></div>
<div class="ttc" id="aclassplayer_html_ae7009d849f19a4f5ebe877cbe463c459"><div class="ttname"><a href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">player::add_msg_if_player</a></div><div class="ttdeci">void add_msg_if_player(const std::string &amp;msg) const override</div><div class="ttdef"><b>Definition:</b> <a href="player_8cpp_source.html#l04368">player.cpp:4368</a></div></div>
<div class="ttc" id="aclassvehicle_html_a6ac15340cefeea4793448cdb34784011"><div class="ttname"><a href="classvehicle.html#a6ac15340cefeea4793448cdb34784011">vehicle::is_flying_in_air</a></div><div class="ttdeci">bool is_flying_in_air() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04027">vehicle.cpp:4027</a></div></div>
<div class="ttc" id="amapdata_8h_html_aa04d037303ea30193f7cf0cd82304258a526400ab16c5537e7cbbe1a1a400ae6e"><div class="ttname"><a href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a526400ab16c5537e7cbbe1a1a400ae6e">TFLAG_INDOORS</a></div><div class="ttdeci">@ TFLAG_INDOORS</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00291">mapdata.h:291</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="player_8cpp_source.html#l04368">player::add_msg_if_player()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="map_8cpp_source.html#l00141">get_map()</a>, <a class="el" href="vehicle_8cpp_source.html#l06568">get_points()</a>, <a class="el" href="map_8cpp_source.html#l02333">map::has_flag_ter_or_furn()</a>, <a class="el" href="map_8cpp_source.html#l01839">map::impassable_ter_furn()</a>, <a class="el" href="map_8h_source.html#l01645">map::inbounds_z()</a>, <a class="el" href="vehicle_8cpp_source.html#l04027">is_flying_in_air()</a>, <a class="el" href="vehicle_8cpp_source.html#l04017">is_rotorcraft()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="mapdata_8h_source.html#l00291">TFLAG_INDOORS</a>, <a class="el" href="map_8cpp_source.html#l00988">map::veh_at()</a>, <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>, and <a class="el" href="point_8h_source.html#l00152">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="handle__action_8cpp_source.html#l00439">pldrive()</a>.</p>

</div>
</div>
<a id="a2451db6447a956b203210ffaa654a59c" name="a2451db6447a956b203210ffaa654a59c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2451db6447a956b203210ffaa654a59c">&#9670;&nbsp;</a></span>check_heli_descend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::check_heli_descend </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>can the helicopter descend/ascend here? </p>

<p class="definition">Definition at line <a class="el" href="vehicle__move_8cpp_source.html#l00996">996</a> of file <a class="el" href="vehicle__move_8cpp_source.html">vehicle_move.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>{</div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#a292961ab33a42bf495d19b8692f6f105">is_rotorcraft</a>() ) {</div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;A vehicle is somehow flying without being an aircraft&quot;</span> );</div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>    }</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>    <span class="keywordtype">int</span> <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> = 0;</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>    <span class="keywordtype">int</span> air_count = 0;</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;pt : <a class="code hl_function" href="classvehicle.html#a2e80dafb2c03147b569688658843d9d6">get_points</a>( <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>        <a class="code hl_struct" href="structtripoint.html">tripoint</a> below( pt.xy(), pt.z - 1 );</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>        <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#abff2fded83a8e96e5e20084c3cb59579">has_zlevels</a>() &amp;&amp; ( pt.z &lt; -<a class="code hl_variable" href="game__constants_8h.html#aad0eacfa516a8f7e005674027d7640fe">OVERMAP_DEPTH</a> ||</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>                                    !here.<a class="code hl_function" href="classmap.html#a516c0764134cc86b57297811520395f7">has_flag_ter_or_furn</a>( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a7ae3043cdc343c2784d644bcafe86269">TFLAG_NO_FLOOR</a>, pt ) ) ) {</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>            p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You are already landed!&quot;</span> ) );</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>        }</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>        <span class="keyword">const</span> <a class="code hl_class" href="classoptional__vpart__position.html">optional_vpart_position</a> ovp = here.<a class="code hl_function" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( below );</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>        <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a82534d8752a0be6bbb000928d1f1978b">impassable_ter_furn</a>( below ) || ovp || <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at( below ) ) {</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>            p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>                                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It would be unsafe to try and land when there are obstacles below you.&quot;</span> ) );</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>        }</div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>        <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a516c0764134cc86b57297811520395f7">has_flag_ter_or_furn</a>( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a7ae3043cdc343c2784d644bcafe86269">TFLAG_NO_FLOOR</a>, below ) ) {</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>            air_count++;</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>        }</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>        <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a>++;</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>    }</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &gt; 0 &amp;&amp; air_count != <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> ) {</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>        p.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It would be unsafe to try and land while you are moving.&quot;</span> ) );</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>    }</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span> </div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>}</div>
<div class="ttc" id="aclassoptional__vpart__position_html"><div class="ttname"><a href="classoptional__vpart__position.html">optional_vpart_position</a></div><div class="ttdoc">Simple wrapper to forward functions that may return a cata::optional to vpart_position.</div><div class="ttdef"><b>Definition:</b> <a href="vpart__position_8h_source.html#l00101">vpart_position.h:102</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="player_8cpp_source.html#l04368">player::add_msg_if_player()</a>, <a class="el" href="fmtlib__core_8h_source.html#l01073">detail::count()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="map_8cpp_source.html#l00141">get_map()</a>, <a class="el" href="vehicle_8cpp_source.html#l06568">get_points()</a>, <a class="el" href="map_8cpp_source.html#l02333">map::has_flag_ter_or_furn()</a>, <a class="el" href="map_8h_source.html#l01657">map::has_zlevels()</a>, <a class="el" href="map_8cpp_source.html#l01839">map::impassable_ter_furn()</a>, <a class="el" href="vehicle_8cpp_source.html#l04017">is_rotorcraft()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="game__constants_8h_source.html#l00061">OVERMAP_DEPTH</a>, <a class="el" href="mapdata_8h_source.html#l00310">TFLAG_NO_FLOOR</a>, <a class="el" href="map_8cpp_source.html#l00988">map::veh_at()</a>, and <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>.</p>

<p class="reference">Referenced by <a class="el" href="handle__action_8cpp_source.html#l00439">pldrive()</a>.</p>

</div>
</div>
<a id="a58757e10821fc870895d84ebc4ac36a7" name="a58757e10821fc870895d84ebc4ac36a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58757e10821fc870895d84ebc4ac36a7">&#9670;&nbsp;</a></span>check_is_heli_landed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::check_is_heli_landed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__move_8cpp_source.html#l00985">985</a> of file <a class="el" href="vehicle__move_8cpp_source.html">vehicle_move.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>{</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>    <span class="comment">// @TODO - when there are chasms that extend below z-level 0 - perhaps the heli</span></div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>    <span class="comment">// will be able to descend into them but for now, assume z-level-0 == the ground.</span></div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>().z == 0 || !<a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().has_flag_ter_or_furn( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a7ae3043cdc343c2784d644bcafe86269">TFLAG_NO_FLOOR</a>, <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>() ) ) {</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>        <a class="code hl_variable" href="classvehicle.html#a0a35b7f917fdb08e70a78315cc968f86">is_flying</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>    }</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="map_8cpp_source.html#l00141">get_map()</a>, <a class="el" href="vehicle_8cpp_source.html#l03101">global_pos3()</a>, <a class="el" href="vehicle_8h_source.html#l01917">is_flying</a>, and <a class="el" href="mapdata_8h_source.html#l00310">TFLAG_NO_FLOOR</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l01098">map::displace_vehicle()</a>.</p>

</div>
</div>
<a id="ac522e55cee675f48861c5f931f8695df" name="ac522e55cee675f48861c5f931f8695df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac522e55cee675f48861c5f931f8695df">&#9670;&nbsp;</a></span>close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::close </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>part_index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes an openable part at the specified index. </p>
<p >If it's a multipart, closes all attached parts as well. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">part_index</td><td>The index in the parts list of the part to close. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01478">1478</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01479" name="l01479"></a><span class="lineno"> 1479</span>{</div>
<div class="line"><a id="l01480" name="l01480"></a><span class="lineno"> 1480</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( part_index ).has_flag( <span class="stringliteral">&quot;OPENABLE&quot;</span> ) ) {</div>
<div class="line"><a id="l01481" name="l01481"></a><span class="lineno"> 1481</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Attempted to close non-closeable part %d (%s) on a %s!&quot;</span>, part_index,</div>
<div class="line"><a id="l01482" name="l01482"></a><span class="lineno"> 1482</span>                  <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ part_index ].<a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>(), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l01483" name="l01483"></a><span class="lineno"> 1483</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01484" name="l01484"></a><span class="lineno"> 1484</span>        <a class="code hl_function" href="classvehicle.html#a190ccc33782a28e26089122eec15f767">open_or_close</a>( part_index, <span class="keyword">false</span> );</div>
<div class="line"><a id="l01485" name="l01485"></a><span class="lineno"> 1485</span>    }</div>
<div class="line"><a id="l01486" name="l01486"></a><span class="lineno"> 1486</span>}</div>
<div class="ttc" id="aclassvehicle_html_a190ccc33782a28e26089122eec15f767"><div class="ttname"><a href="classvehicle.html#a190ccc33782a28e26089122eec15f767">vehicle::open_or_close</a></div><div class="ttdeci">void open_or_close(int part_index, bool opening)</div><div class="ttdoc">Opens or closes an openable part at the specified index based on the @opening value passed.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01532">vehicle_use.cpp:1532</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01532">open_or_close()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="gates_8cpp_source.html#l00255">doors::close_door()</a>.</p>

</div>
</div>
<a id="a8997e3518316057cde55f9ecb444b8f0" name="a8997e3518316057cde55f9ecb444b8f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8997e3518316057cde55f9ecb444b8f0">&#9670;&nbsp;</a></span>coeff_air_drag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double vehicle::coeff_air_drag </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Physical coefficients used for vehicle calculations. </p>
<p >coefficient of air drag in kg/m multiplied by the square of speed to calculate air drag force in N proportional to cross sectional area of the vehicle, times the density of air, times a dimensional constant based on the vehicle's shape </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03789">3789</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03790" name="l03790"></a><span class="lineno"> 3790</span>{</div>
<div class="line"><a id="l03791" name="l03791"></a><span class="lineno"> 3791</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#ac1e6fe4cf22c08ceb542a7a3d515268b">coeff_air_dirty</a> ) {</div>
<div class="line"><a id="l03792" name="l03792"></a><span class="lineno"> 3792</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#a226257689cf48986271ad0969ab1741c">coefficient_air_resistance</a>;</div>
<div class="line"><a id="l03793" name="l03793"></a><span class="lineno"> 3793</span>    }</div>
<div class="line"><a id="l03794" name="l03794"></a><span class="lineno"> 3794</span>    <span class="keyword">constexpr</span> <span class="keywordtype">double</span> c_air_base = 0.25;</div>
<div class="line"><a id="l03795" name="l03795"></a><span class="lineno"> 3795</span>    <span class="keyword">constexpr</span> <span class="keywordtype">double</span> c_air_mod = 0.1;</div>
<div class="line"><a id="l03796" name="l03796"></a><span class="lineno"> 3796</span>    <span class="keyword">constexpr</span> <span class="keywordtype">double</span> base_height = 1.4;</div>
<div class="line"><a id="l03797" name="l03797"></a><span class="lineno"> 3797</span>    <span class="keyword">constexpr</span> <span class="keywordtype">double</span> aisle_height = 0.6;</div>
<div class="line"><a id="l03798" name="l03798"></a><span class="lineno"> 3798</span>    <span class="keyword">constexpr</span> <span class="keywordtype">double</span> fullboard_height = 0.5;</div>
<div class="line"><a id="l03799" name="l03799"></a><span class="lineno"> 3799</span>    <span class="keyword">constexpr</span> <span class="keywordtype">double</span> roof_height = 0.1;</div>
<div class="line"><a id="l03800" name="l03800"></a><span class="lineno"> 3800</span>    <span class="keyword">constexpr</span> <span class="keywordtype">double</span> windmill_height = 0.7;</div>
<div class="line"><a id="l03801" name="l03801"></a><span class="lineno"> 3801</span>    <span class="keyword">constexpr</span> <span class="keywordtype">double</span> sail_height = 0.8;</div>
<div class="line"><a id="l03802" name="l03802"></a><span class="lineno"> 3802</span>    <span class="keyword">constexpr</span> <span class="keywordtype">double</span> rotor_height = 0.6;</div>
<div class="line"><a id="l03803" name="l03803"></a><span class="lineno"> 3803</span> </div>
<div class="line"><a id="l03804" name="l03804"></a><span class="lineno"> 3804</span>    std::vector&lt;int&gt; structure_indices = <a class="code hl_function" href="classvehicle.html#a2e1f54f4d34a2edb7ff3665e5eba7df9">all_parts_at_location</a>( <a class="code hl_function" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure</a> );</div>
<div class="line"><a id="l03805" name="l03805"></a><span class="lineno"> 3805</span>    <span class="keywordtype">int</span> width = <a class="code hl_variable" href="classvehicle.html#a93c1c8baa5cd7ee79039fd5c7226b24e">mount_max</a>.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> - <a class="code hl_variable" href="classvehicle.html#ad62e7dec9def6c6fcc23f2d7b8e51963">mount_min</a>.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> + 1;</div>
<div class="line"><a id="l03806" name="l03806"></a><span class="lineno"> 3806</span> </div>
<div class="line"><a id="l03807" name="l03807"></a><span class="lineno"> 3807</span>    <span class="comment">// a mess of lambdas to make the next bit slightly easier to read</span></div>
<div class="line"><a id="l03808" name="l03808"></a><span class="lineno"> 3808</span>    <span class="keyword">const</span> <span class="keyword">auto</span> d_exposed = [&amp;]( <span class="keyword">const</span> <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp; p ) {</div>
<div class="line"><a id="l03809" name="l03809"></a><span class="lineno"> 3809</span>        <span class="comment">// if it&#39;s not inside, it&#39;s a center location, and it doesn&#39;t need a roof, it&#39;s exposed</span></div>
<div class="line"><a id="l03810" name="l03810"></a><span class="lineno"> 3810</span>        <span class="keywordflow">if</span>( p.info().location != <a class="code hl_function" href="vehicle_8cpp.html#a721f1eded84064be8fd4342e2537f666">part_location_center</a> ) {</div>
<div class="line"><a id="l03811" name="l03811"></a><span class="lineno"> 3811</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03812" name="l03812"></a><span class="lineno"> 3812</span>        }</div>
<div class="line"><a id="l03813" name="l03813"></a><span class="lineno"> 3813</span>        <span class="keywordflow">return</span> !( p.inside || p.info().has_flag( <span class="stringliteral">&quot;NO_ROOF_NEEDED&quot;</span> ) ||</div>
<div class="line"><a id="l03814" name="l03814"></a><span class="lineno"> 3814</span>                  p.info().has_flag( <span class="stringliteral">&quot;WINDSHIELD&quot;</span> ) ||</div>
<div class="line"><a id="l03815" name="l03815"></a><span class="lineno"> 3815</span>                  p.info().has_flag( <span class="stringliteral">&quot;OPENABLE&quot;</span> ) );</div>
<div class="line"><a id="l03816" name="l03816"></a><span class="lineno"> 3816</span>    };</div>
<div class="line"><a id="l03817" name="l03817"></a><span class="lineno"> 3817</span> </div>
<div class="line"><a id="l03818" name="l03818"></a><span class="lineno"> 3818</span>    <span class="keyword">const</span> <span class="keyword">auto</span> d_protrusion = [&amp;]( std::vector&lt;int&gt; parts_at ) {</div>
<div class="line"><a id="l03819" name="l03819"></a><span class="lineno"> 3819</span>        <span class="keywordflow">if</span>( parts_at.size() &gt; 1 ) {</div>
<div class="line"><a id="l03820" name="l03820"></a><span class="lineno"> 3820</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03821" name="l03821"></a><span class="lineno"> 3821</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03822" name="l03822"></a><span class="lineno"> 3822</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ parts_at.front() ].info().has_flag( <span class="stringliteral">&quot;PROTRUSION&quot;</span> );</div>
<div class="line"><a id="l03823" name="l03823"></a><span class="lineno"> 3823</span>        }</div>
<div class="line"><a id="l03824" name="l03824"></a><span class="lineno"> 3824</span>    };</div>
<div class="line"><a id="l03825" name="l03825"></a><span class="lineno"> 3825</span>    <span class="keyword">const</span> <span class="keyword">auto</span> d_check_min = [&amp;]( <span class="keywordtype">int</span> &amp;value, <span class="keyword">const</span> <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp; p, <span class="keywordtype">bool</span> test ) {</div>
<div class="line"><a id="l03826" name="l03826"></a><span class="lineno"> 3826</span>        value = std::min( value, test ? p.mount.x - <a class="code hl_variable" href="classvehicle.html#ad62e7dec9def6c6fcc23f2d7b8e51963">mount_min</a>.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> : <a class="code hl_variable" href="vehicle_8cpp.html#a3ff34f557908f2c21ec8f1bf3e25af65">maxrow</a> );</div>
<div class="line"><a id="l03827" name="l03827"></a><span class="lineno"> 3827</span>    };</div>
<div class="line"><a id="l03828" name="l03828"></a><span class="lineno"> 3828</span>    <span class="keyword">const</span> <span class="keyword">auto</span> d_check_max = [&amp;]( <span class="keywordtype">int</span> &amp;value, <span class="keyword">const</span> <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp; p, <span class="keywordtype">bool</span> test ) {</div>
<div class="line"><a id="l03829" name="l03829"></a><span class="lineno"> 3829</span>        value = std::max( value, test ? p.mount.x - <a class="code hl_variable" href="classvehicle.html#ad62e7dec9def6c6fcc23f2d7b8e51963">mount_min</a>.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> : <a class="code hl_variable" href="vehicle_8cpp.html#ae6e50ea1c6f681b76fbb6761d19a8069">minrow</a> );</div>
<div class="line"><a id="l03830" name="l03830"></a><span class="lineno"> 3830</span>    };</div>
<div class="line"><a id="l03831" name="l03831"></a><span class="lineno"> 3831</span> </div>
<div class="line"><a id="l03832" name="l03832"></a><span class="lineno"> 3832</span>    <span class="comment">// raycast down each column. the least drag vehicle has halfboard, windshield, seat with roof,</span></div>
<div class="line"><a id="l03833" name="l03833"></a><span class="lineno"> 3833</span>    <span class="comment">// windshield, halfboard and is twice as long as it is wide.</span></div>
<div class="line"><a id="l03834" name="l03834"></a><span class="lineno"> 3834</span>    <span class="comment">// find the first instance of each item and compare against the ideal configuration.</span></div>
<div class="line"><a id="l03835" name="l03835"></a><span class="lineno"> 3835</span>    std::vector&lt;drag_column&gt; drag( width );</div>
<div class="line"><a id="l03836" name="l03836"></a><span class="lineno"> 3836</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> p : structure_indices ) {</div>
<div class="line"><a id="l03837" name="l03837"></a><span class="lineno"> 3837</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ p ].removed ) {</div>
<div class="line"><a id="l03838" name="l03838"></a><span class="lineno"> 3838</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03839" name="l03839"></a><span class="lineno"> 3839</span>        }</div>
<div class="line"><a id="l03840" name="l03840"></a><span class="lineno"> 3840</span>        <span class="keywordtype">int</span> col = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ p ].mount.y - <a class="code hl_variable" href="classvehicle.html#ad62e7dec9def6c6fcc23f2d7b8e51963">mount_min</a>.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a>;</div>
<div class="line"><a id="l03841" name="l03841"></a><span class="lineno"> 3841</span>        std::vector&lt;int&gt; parts_at = <a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ p ].mount, <span class="keyword">true</span> );</div>
<div class="line"><a id="l03842" name="l03842"></a><span class="lineno"> 3842</span>        d_check_min( drag[ col ].pro, <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ p ], d_protrusion( parts_at ) );</div>
<div class="line"><a id="l03843" name="l03843"></a><span class="lineno"> 3843</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> pa_index : parts_at ) {</div>
<div class="line"><a id="l03844" name="l03844"></a><span class="lineno"> 3844</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;pa = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ pa_index ];</div>
<div class="line"><a id="l03845" name="l03845"></a><span class="lineno"> 3845</span>            d_check_max( drag[ col ].hboard, pa, pa.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;HALF_BOARD&quot;</span> ) );</div>
<div class="line"><a id="l03846" name="l03846"></a><span class="lineno"> 3846</span>            d_check_max( drag[ col ].fboard, pa, pa.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;FULL_BOARD&quot;</span> ) );</div>
<div class="line"><a id="l03847" name="l03847"></a><span class="lineno"> 3847</span>            d_check_max( drag[ col ].aisle, pa, pa.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;AISLE&quot;</span> ) );</div>
<div class="line"><a id="l03848" name="l03848"></a><span class="lineno"> 3848</span>            d_check_max( drag[ col ].shield, pa, pa.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;WINDSHIELD&quot;</span> ) &amp;&amp;</div>
<div class="line"><a id="l03849" name="l03849"></a><span class="lineno"> 3849</span>                         pa.<a class="code hl_function" href="structvehicle__part.html#a4e3ef0215ad9ed276d592161518b7f0b">is_available</a>() );</div>
<div class="line"><a id="l03850" name="l03850"></a><span class="lineno"> 3850</span>            d_check_max( drag[ col ].seat, pa, pa.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;SEAT&quot;</span> ) ||</div>
<div class="line"><a id="l03851" name="l03851"></a><span class="lineno"> 3851</span>                         pa.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;BED&quot;</span> ) );</div>
<div class="line"><a id="l03852" name="l03852"></a><span class="lineno"> 3852</span>            d_check_max( drag[ col ].turret, pa, pa.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_variable" href="classvpart__info.html#a03cfe554b18beb9c32d9a86872a1748e">location</a> == <a class="code hl_function" href="vehicle_8cpp.html#a3af5cf19936c13e456326749583d41ab">part_location_onroof</a> &amp;&amp;</div>
<div class="line"><a id="l03853" name="l03853"></a><span class="lineno"> 3853</span>                         !pa.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;SOLAR_PANEL&quot;</span> ) );</div>
<div class="line"><a id="l03854" name="l03854"></a><span class="lineno"> 3854</span>            d_check_max( drag[ col ].roof, pa, pa.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;ROOF&quot;</span> ) );</div>
<div class="line"><a id="l03855" name="l03855"></a><span class="lineno"> 3855</span>            d_check_max( drag[ col ].panel, pa, pa.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;SOLAR_PANEL&quot;</span> ) );</div>
<div class="line"><a id="l03856" name="l03856"></a><span class="lineno"> 3856</span>            d_check_max( drag[ col ].windmill, pa, pa.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;WIND_TURBINE&quot;</span> ) );</div>
<div class="line"><a id="l03857" name="l03857"></a><span class="lineno"> 3857</span>            d_check_max( drag[ col ].rotor, pa, pa.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;ROTOR&quot;</span> ) );</div>
<div class="line"><a id="l03858" name="l03858"></a><span class="lineno"> 3858</span>            d_check_max( drag[ col ].sail, pa, pa.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;WIND_POWERED&quot;</span> ) );</div>
<div class="line"><a id="l03859" name="l03859"></a><span class="lineno"> 3859</span>            d_check_max( drag[ col ].exposed, pa, d_exposed( pa ) );</div>
<div class="line"><a id="l03860" name="l03860"></a><span class="lineno"> 3860</span>            d_check_min( drag[ col ].<a class="code hl_enumvalue" href="achievement_8h.html#a4c2771ccaad822c94aee3786288bb112a98bd1c45684cf587ac2347a92dd7bb51">last</a>, pa, pa.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;LOW_FINAL_AIR_DRAG&quot;</span> ) ||</div>
<div class="line"><a id="l03861" name="l03861"></a><span class="lineno"> 3861</span>                         pa.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;HALF_BOARD&quot;</span> ) );</div>
<div class="line"><a id="l03862" name="l03862"></a><span class="lineno"> 3862</span>        }</div>
<div class="line"><a id="l03863" name="l03863"></a><span class="lineno"> 3863</span>    }</div>
<div class="line"><a id="l03864" name="l03864"></a><span class="lineno"> 3864</span>    <span class="keywordtype">double</span> height = 0;</div>
<div class="line"><a id="l03865" name="l03865"></a><span class="lineno"> 3865</span>    <span class="keywordtype">double</span> c_air_drag = 0;</div>
<div class="line"><a id="l03866" name="l03866"></a><span class="lineno"> 3866</span>    <span class="comment">// tally the results of each row and prorate them relative to vehicle width</span></div>
<div class="line"><a id="l03867" name="l03867"></a><span class="lineno"> 3867</span>    <span class="keywordflow">for</span>( <a class="code hl_struct" href="structdrag__column.html">drag_column</a> &amp;dc : drag ) {</div>
<div class="line"><a id="l03868" name="l03868"></a><span class="lineno"> 3868</span>        <span class="comment">// even as m_debug you rarely want to see this</span></div>
<div class="line"><a id="l03869" name="l03869"></a><span class="lineno"> 3869</span>        <span class="comment">// add_msg( m_debug, &quot;veh %: pro %d, hboard %d, fboard %d, shield %d, seat %d, roof %d, aisle %d, turret %d, panel %d, exposed %d, last %d\n&quot;, name, dc.pro, dc.hboard, dc.fboard, dc.shield, dc.seat, dc.roof, dc.aisle, dc.turret, dc.panel, dc.exposed, dc.last );</span></div>
<div class="line"><a id="l03870" name="l03870"></a><span class="lineno"> 3870</span> </div>
<div class="line"><a id="l03871" name="l03871"></a><span class="lineno"> 3871</span>        <span class="keywordtype">double</span> c_air_drag_c = c_air_base;</div>
<div class="line"><a id="l03872" name="l03872"></a><span class="lineno"> 3872</span>        <span class="comment">// rams in front of the vehicle mildly worsens air drag</span></div>
<div class="line"><a id="l03873" name="l03873"></a><span class="lineno"> 3873</span>        c_air_drag_c += ( dc.pro &gt; dc.hboard ) ? c_air_mod : 0;</div>
<div class="line"><a id="l03874" name="l03874"></a><span class="lineno"> 3874</span>        <span class="comment">// not having halfboards in front of any windshields or fullboards moderately worsens</span></div>
<div class="line"><a id="l03875" name="l03875"></a><span class="lineno"> 3875</span>        <span class="comment">// air drag</span></div>
<div class="line"><a id="l03876" name="l03876"></a><span class="lineno"> 3876</span>        c_air_drag_c += ( std::max( std::max( dc.hboard, dc.fboard ),</div>
<div class="line"><a id="l03877" name="l03877"></a><span class="lineno"> 3877</span>                                    dc.shield ) != dc.hboard ) ? 2 * c_air_mod : 0;</div>
<div class="line"><a id="l03878" name="l03878"></a><span class="lineno"> 3878</span>        <span class="comment">// not having windshields in front of seats severely worsens air drag</span></div>
<div class="line"><a id="l03879" name="l03879"></a><span class="lineno"> 3879</span>        c_air_drag_c += ( dc.shield &lt; dc.seat ) ? 3 * c_air_mod : 0;</div>
<div class="line"><a id="l03880" name="l03880"></a><span class="lineno"> 3880</span>        <span class="comment">// missing roofs and open doors severely worsen air drag</span></div>
<div class="line"><a id="l03881" name="l03881"></a><span class="lineno"> 3881</span>        c_air_drag_c += ( dc.exposed &gt; <a class="code hl_variable" href="vehicle_8cpp.html#ae6e50ea1c6f681b76fbb6761d19a8069">minrow</a> ) ? 3 * c_air_mod : 0;</div>
<div class="line"><a id="l03882" name="l03882"></a><span class="lineno"> 3882</span>        <span class="comment">// being twice as long as wide mildly reduces air drag</span></div>
<div class="line"><a id="l03883" name="l03883"></a><span class="lineno"> 3883</span>        c_air_drag_c -= ( 2 * ( <a class="code hl_variable" href="classvehicle.html#a93c1c8baa5cd7ee79039fd5c7226b24e">mount_max</a>.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> - <a class="code hl_variable" href="classvehicle.html#ad62e7dec9def6c6fcc23f2d7b8e51963">mount_min</a>.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> ) &gt; width ) ? c_air_mod : 0;</div>
<div class="line"><a id="l03884" name="l03884"></a><span class="lineno"> 3884</span>        <span class="comment">// trunk doors and halfboards at the tail mildly reduce air drag</span></div>
<div class="line"><a id="l03885" name="l03885"></a><span class="lineno"> 3885</span>        c_air_drag_c -= ( dc.last == <a class="code hl_variable" href="classvehicle.html#ad62e7dec9def6c6fcc23f2d7b8e51963">mount_min</a>.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> ) ? c_air_mod : 0;</div>
<div class="line"><a id="l03886" name="l03886"></a><span class="lineno"> 3886</span>        <span class="comment">// turrets severely worsen air drag</span></div>
<div class="line"><a id="l03887" name="l03887"></a><span class="lineno"> 3887</span>        c_air_drag_c += ( dc.turret &gt; <a class="code hl_variable" href="vehicle_8cpp.html#ae6e50ea1c6f681b76fbb6761d19a8069">minrow</a> ) ? 3 * c_air_mod : 0;</div>
<div class="line"><a id="l03888" name="l03888"></a><span class="lineno"> 3888</span>        <span class="comment">// having a windmill is terrible for your drag</span></div>
<div class="line"><a id="l03889" name="l03889"></a><span class="lineno"> 3889</span>        c_air_drag_c += ( dc.windmill &gt; <a class="code hl_variable" href="vehicle_8cpp.html#ae6e50ea1c6f681b76fbb6761d19a8069">minrow</a> ) ? 5 * c_air_mod : 0;</div>
<div class="line"><a id="l03890" name="l03890"></a><span class="lineno"> 3890</span>        <span class="comment">// rotors are not great for drag!</span></div>
<div class="line"><a id="l03891" name="l03891"></a><span class="lineno"> 3891</span>        c_air_drag_c += ( dc.rotor &gt; <a class="code hl_variable" href="vehicle_8cpp.html#ae6e50ea1c6f681b76fbb6761d19a8069">minrow</a> ) ? 6 * c_air_mod : 0;</div>
<div class="line"><a id="l03892" name="l03892"></a><span class="lineno"> 3892</span>        <span class="comment">// having a sail is terrible for your drag</span></div>
<div class="line"><a id="l03893" name="l03893"></a><span class="lineno"> 3893</span>        c_air_drag_c += ( dc.sail &gt; <a class="code hl_variable" href="vehicle_8cpp.html#ae6e50ea1c6f681b76fbb6761d19a8069">minrow</a> ) ? 7 * c_air_mod : 0;</div>
<div class="line"><a id="l03894" name="l03894"></a><span class="lineno"> 3894</span>        c_air_drag += c_air_drag_c;</div>
<div class="line"><a id="l03895" name="l03895"></a><span class="lineno"> 3895</span>        <span class="comment">// vehicles are 1.4m tall</span></div>
<div class="line"><a id="l03896" name="l03896"></a><span class="lineno"> 3896</span>        <span class="keywordtype">double</span> c_height = base_height;</div>
<div class="line"><a id="l03897" name="l03897"></a><span class="lineno"> 3897</span>        <span class="comment">// plus a bit for a roof</span></div>
<div class="line"><a id="l03898" name="l03898"></a><span class="lineno"> 3898</span>        c_height += ( dc.roof &gt; <a class="code hl_variable" href="vehicle_8cpp.html#ae6e50ea1c6f681b76fbb6761d19a8069">minrow</a> ) ? roof_height : 0;</div>
<div class="line"><a id="l03899" name="l03899"></a><span class="lineno"> 3899</span>        <span class="comment">// plus a lot for an aisle</span></div>
<div class="line"><a id="l03900" name="l03900"></a><span class="lineno"> 3900</span>        c_height += ( dc.aisle &gt; <a class="code hl_variable" href="vehicle_8cpp.html#ae6e50ea1c6f681b76fbb6761d19a8069">minrow</a> ) ?  aisle_height : 0;</div>
<div class="line"><a id="l03901" name="l03901"></a><span class="lineno"> 3901</span>        <span class="comment">// or fullboards</span></div>
<div class="line"><a id="l03902" name="l03902"></a><span class="lineno"> 3902</span>        c_height += ( dc.fboard &gt; <a class="code hl_variable" href="vehicle_8cpp.html#ae6e50ea1c6f681b76fbb6761d19a8069">minrow</a> ) ? fullboard_height : 0;</div>
<div class="line"><a id="l03903" name="l03903"></a><span class="lineno"> 3903</span>        <span class="comment">// and a little for anything on the roof</span></div>
<div class="line"><a id="l03904" name="l03904"></a><span class="lineno"> 3904</span>        c_height += ( dc.turret &gt; <a class="code hl_variable" href="vehicle_8cpp.html#ae6e50ea1c6f681b76fbb6761d19a8069">minrow</a> ) ? 2 * roof_height : 0;</div>
<div class="line"><a id="l03905" name="l03905"></a><span class="lineno"> 3905</span>        <span class="comment">// solar panels are better than turrets or floodlights, though</span></div>
<div class="line"><a id="l03906" name="l03906"></a><span class="lineno"> 3906</span>        c_height += ( dc.panel &gt; <a class="code hl_variable" href="vehicle_8cpp.html#ae6e50ea1c6f681b76fbb6761d19a8069">minrow</a> ) ? roof_height : 0;</div>
<div class="line"><a id="l03907" name="l03907"></a><span class="lineno"> 3907</span>        <span class="comment">// windmills are tall, too</span></div>
<div class="line"><a id="l03908" name="l03908"></a><span class="lineno"> 3908</span>        c_height += ( dc.windmill &gt; <a class="code hl_variable" href="vehicle_8cpp.html#ae6e50ea1c6f681b76fbb6761d19a8069">minrow</a> ) ? windmill_height : 0;</div>
<div class="line"><a id="l03909" name="l03909"></a><span class="lineno"> 3909</span>        c_height += ( dc.rotor &gt; <a class="code hl_variable" href="vehicle_8cpp.html#ae6e50ea1c6f681b76fbb6761d19a8069">minrow</a> ) ? rotor_height : 0;</div>
<div class="line"><a id="l03910" name="l03910"></a><span class="lineno"> 3910</span>        <span class="comment">// sails are tall, too</span></div>
<div class="line"><a id="l03911" name="l03911"></a><span class="lineno"> 3911</span>        c_height += ( dc.sail &gt; <a class="code hl_variable" href="vehicle_8cpp.html#ae6e50ea1c6f681b76fbb6761d19a8069">minrow</a> ) ? sail_height : 0;</div>
<div class="line"><a id="l03912" name="l03912"></a><span class="lineno"> 3912</span>        height += c_height;</div>
<div class="line"><a id="l03913" name="l03913"></a><span class="lineno"> 3913</span>    }</div>
<div class="line"><a id="l03914" name="l03914"></a><span class="lineno"> 3914</span>    <span class="keyword">constexpr</span> <span class="keywordtype">double</span> air_density = 1.29; <span class="comment">// kg/m^3</span></div>
<div class="line"><a id="l03915" name="l03915"></a><span class="lineno"> 3915</span>    <span class="comment">// prorate per row height and c_air_drag</span></div>
<div class="line"><a id="l03916" name="l03916"></a><span class="lineno"> 3916</span>    height /= width;</div>
<div class="line"><a id="l03917" name="l03917"></a><span class="lineno"> 3917</span>    c_air_drag /= width;</div>
<div class="line"><a id="l03918" name="l03918"></a><span class="lineno"> 3918</span>    <span class="keywordtype">double</span> cross_area = height * <a class="code hl_function" href="vehicle_8cpp.html#acadd942a1d699817700bb888c759c09d">tile_to_width</a>( width );</div>
<div class="line"><a id="l03919" name="l03919"></a><span class="lineno"> 3919</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;%s: height %3.2fm, width %3.2fm (%d tiles), c_air %3.2f\n&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, height,</div>
<div class="line"><a id="l03920" name="l03920"></a><span class="lineno"> 3920</span>             <a class="code hl_function" href="vehicle_8cpp.html#acadd942a1d699817700bb888c759c09d">tile_to_width</a>( width ), width, c_air_drag );</div>
<div class="line"><a id="l03921" name="l03921"></a><span class="lineno"> 3921</span>    <span class="comment">// F_air_drag = c_air_drag * cross_area * 1/2 * air_density * v^2</span></div>
<div class="line"><a id="l03922" name="l03922"></a><span class="lineno"> 3922</span>    <span class="comment">// coeff_air_resistance = c_air_drag * cross_area * 1/2 * air_density</span></div>
<div class="line"><a id="l03923" name="l03923"></a><span class="lineno"> 3923</span>    <a class="code hl_variable" href="classvehicle.html#a226257689cf48986271ad0969ab1741c">coefficient_air_resistance</a> = std::max( 0.1, c_air_drag * cross_area * 0.5 * air_density );</div>
<div class="line"><a id="l03924" name="l03924"></a><span class="lineno"> 3924</span>    <a class="code hl_variable" href="classvehicle.html#ac1e6fe4cf22c08ceb542a7a3d515268b">coeff_air_dirty</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l03925" name="l03925"></a><span class="lineno"> 3925</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#a226257689cf48986271ad0969ab1741c">coefficient_air_resistance</a>;</div>
<div class="line"><a id="l03926" name="l03926"></a><span class="lineno"> 3926</span>}</div>
<div class="ttc" id="aachievement_8h_html_a4c2771ccaad822c94aee3786288bb112a98bd1c45684cf587ac2347a92dd7bb51"><div class="ttname"><a href="achievement_8h.html#a4c2771ccaad822c94aee3786288bb112a98bd1c45684cf587ac2347a92dd7bb51">achievement_comparison::last</a></div><div class="ttdeci">@ last</div></div>
<div class="ttc" id="aclassvehicle_html_a226257689cf48986271ad0969ab1741c"><div class="ttname"><a href="classvehicle.html#a226257689cf48986271ad0969ab1741c">vehicle::coefficient_air_resistance</a></div><div class="ttdeci">double coefficient_air_resistance</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01724">vehicle.h:1724</a></div></div>
<div class="ttc" id="aclassvehicle_html_a2e1f54f4d34a2edb7ff3665e5eba7df9"><div class="ttname"><a href="classvehicle.html#a2e1f54f4d34a2edb7ff3665e5eba7df9">vehicle::all_parts_at_location</a></div><div class="ttdeci">std::vector&lt; int &gt; all_parts_at_location(const std::string &amp;location) const</div><div class="ttdoc">Returns all parts in the vehicle that exist in the given location slot.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02745">vehicle.cpp:2745</a></div></div>
<div class="ttc" id="aclassvehicle_html_a93c1c8baa5cd7ee79039fd5c7226b24e"><div class="ttname"><a href="classvehicle.html#a93c1c8baa5cd7ee79039fd5c7226b24e">vehicle::mount_max</a></div><div class="ttdeci">point mount_max</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01820">vehicle.h:1820</a></div></div>
<div class="ttc" id="aclassvehicle_html_ac1e6fe4cf22c08ceb542a7a3d515268b"><div class="ttname"><a href="classvehicle.html#ac1e6fe4cf22c08ceb542a7a3d515268b">vehicle::coeff_air_dirty</a></div><div class="ttdeci">bool coeff_air_dirty</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01905">vehicle.h:1905</a></div></div>
<div class="ttc" id="aclassvehicle_html_ad62e7dec9def6c6fcc23f2d7b8e51963"><div class="ttname"><a href="classvehicle.html#ad62e7dec9def6c6fcc23f2d7b8e51963">vehicle::mount_min</a></div><div class="ttdeci">point mount_min</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01821">vehicle.h:1821</a></div></div>
<div class="ttc" id="aclassvpart__info_html_a03cfe554b18beb9c32d9a86872a1748e"><div class="ttname"><a href="classvpart__info.html#a03cfe554b18beb9c32d9a86872a1748e">vpart_info::location</a></div><div class="ttdeci">std::string location</div><div class="ttdoc">What slot of the vehicle tile does this part occupy?</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00155">veh_type.h:155</a></div></div>
<div class="ttc" id="astructdrag__column_html"><div class="ttname"><a href="structdrag__column.html">drag_column</a></div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03772">vehicle.cpp:3772</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a4e3ef0215ad9ed276d592161518b7f0b"><div class="ttname"><a href="structvehicle__part.html#a4e3ef0215ad9ed276d592161518b7f0b">vehicle_part::is_available</a></div><div class="ttdeci">bool is_available(bool carried=true) const</div><div class="ttdoc">parts are available if they aren't unavailable</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00180">vehicle_part.cpp:180</a></div></div>
<div class="ttc" id="avehicle_8cpp_html_a3af5cf19936c13e456326749583d41ab"><div class="ttname"><a href="vehicle_8cpp.html#a3af5cf19936c13e456326749583d41ab">part_location_onroof</a></div><div class="ttdeci">static const std::string part_location_onroof(&quot;on_roof&quot;)</div></div>
<div class="ttc" id="avehicle_8cpp_html_a3ff34f557908f2c21ec8f1bf3e25af65"><div class="ttname"><a href="vehicle_8cpp.html#a3ff34f557908f2c21ec8f1bf3e25af65">maxrow</a></div><div class="ttdeci">static constexpr int maxrow</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03771">vehicle.cpp:3771</a></div></div>
<div class="ttc" id="avehicle_8cpp_html_a721f1eded84064be8fd4342e2537f666"><div class="ttname"><a href="vehicle_8cpp.html#a721f1eded84064be8fd4342e2537f666">part_location_center</a></div><div class="ttdeci">static const std::string part_location_center(&quot;center&quot;)</div></div>
<div class="ttc" id="avehicle_8cpp_html_acadd942a1d699817700bb888c759c09d"><div class="ttname"><a href="vehicle_8cpp.html#acadd942a1d699817700bb888c759c09d">tile_to_width</a></div><div class="ttdeci">static double tile_to_width(int tiles)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03759">vehicle.cpp:3759</a></div></div>
<div class="ttc" id="avehicle_8cpp_html_ae6e50ea1c6f681b76fbb6761d19a8069"><div class="ttname"><a href="vehicle_8cpp.html#ae6e50ea1c6f681b76fbb6761d19a8069">minrow</a></div><div class="ttdeci">static constexpr int minrow</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03770">vehicle.cpp:3770</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="vehicle_8cpp_source.html#l02745">all_parts_at_location()</a>, <a class="el" href="vehicle_8h_source.html#l01905">coeff_air_dirty</a>, <a class="el" href="vehicle_8h_source.html#l01724">coefficient_air_resistance</a>, <a class="el" href="veh__type_8h_source.html#l00336">vpart_info::has_flag()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00519">vehicle_part::info()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00180">vehicle_part::is_available()</a>, <a class="el" href="achievement_8h.html#a4c2771ccaad822c94aee3786288bb112a98bd1c45684cf587ac2347a92dd7bb51">last</a>, <a class="el" href="veh__type_8h_source.html#l00155">vpart_info::location</a>, <a class="el" href="enums_8h_source.html#l00264">m_debug</a>, <a class="el" href="vehicle_8cpp_source.html#l03771">maxrow</a>, <a class="el" href="vehicle_8cpp_source.html#l03770">minrow</a>, <a class="el" href="vehicle_8h_source.html#l01820">mount_max</a>, <a class="el" href="vehicle_8h_source.html#l01821">mount_min</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="vehicle_8cpp.html#a721f1eded84064be8fd4342e2537f666">part_location_center()</a>, <a class="el" href="vehicle_8cpp.html#a3af5cf19936c13e456326749583d41ab">part_location_onroof()</a>, <a class="el" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>, <a class="el" href="vehicle_8cpp_source.html#l03759">tile_to_width()</a>, <a class="el" href="point_8h_source.html#l00038">point::x</a>, and <a class="el" href="point_8h_source.html#l00039">point::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>, <a class="el" href="vehicle_8cpp_source.html#l03502">max_ground_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l03534">max_rotor_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l03524">max_water_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l03567">safe_ground_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l03577">safe_rotor_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l03585">safe_water_velocity()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00087">slowdown()</a>.</p>

</div>
</div>
<a id="acc7fb8b935b2f6f3d26efaf0fae16230" name="acc7fb8b935b2f6f3d26efaf0fae16230"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc7fb8b935b2f6f3d26efaf0fae16230">&#9670;&nbsp;</a></span>coeff_rolling_drag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double vehicle::coeff_rolling_drag </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>coefficient of rolling resistance multiplied by velocity to get the variable part of rolling resistance drag in N multiplied by a constant to get the constant part of rolling resistance drag in N depends on wheel design, wheel number, and vehicle weight </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03928">3928</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03929" name="l03929"></a><span class="lineno"> 3929</span>{</div>
<div class="line"><a id="l03930" name="l03930"></a><span class="lineno"> 3930</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#a57285bb3b5dfda9f926bd3f99e3e1bad">coeff_rolling_dirty</a> ) {</div>
<div class="line"><a id="l03931" name="l03931"></a><span class="lineno"> 3931</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#a3ba73328e291117051f3a05b28dbd9c5">coefficient_rolling_resistance</a>;</div>
<div class="line"><a id="l03932" name="l03932"></a><span class="lineno"> 3932</span>    }</div>
<div class="line"><a id="l03933" name="l03933"></a><span class="lineno"> 3933</span>    <span class="keyword">constexpr</span> <span class="keywordtype">double</span> wheel_ratio = 1.25;</div>
<div class="line"><a id="l03934" name="l03934"></a><span class="lineno"> 3934</span>    <span class="keyword">constexpr</span> <span class="keywordtype">double</span> base_wheels = 4.0;</div>
<div class="line"><a id="l03935" name="l03935"></a><span class="lineno"> 3935</span>    <span class="comment">// SAE J2452 measurements are in F_rr = N * C_rr * 0.000225 * ( v + 33.33 )</span></div>
<div class="line"><a id="l03936" name="l03936"></a><span class="lineno"> 3936</span>    <span class="comment">// Don&#39;t ask me why, but it&#39;s the numbers we have. We want N * C_rr * 0.000225 here,</span></div>
<div class="line"><a id="l03937" name="l03937"></a><span class="lineno"> 3937</span>    <span class="comment">// and N is mass * accel from gravity (aka weight)</span></div>
<div class="line"><a id="l03938" name="l03938"></a><span class="lineno"> 3938</span>    <span class="keyword">constexpr</span> <span class="keywordtype">double</span> sae_ratio = 0.000225;</div>
<div class="line"><a id="l03939" name="l03939"></a><span class="lineno"> 3939</span>    <span class="keyword">constexpr</span> <span class="keywordtype">double</span> newton_ratio = <a class="code hl_variable" href="units__mass_8h.html#af9bdbc604b3753642c7d25280b6f3114">GRAVITY_OF_EARTH</a> * sae_ratio;</div>
<div class="line"><a id="l03940" name="l03940"></a><span class="lineno"> 3940</span>    <span class="keywordtype">double</span> wheel_factor = 0;</div>
<div class="line"><a id="l03941" name="l03941"></a><span class="lineno"> 3941</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a5c432c0da0ff47a483e3aa74548bd435">wheelcache</a>.empty() ) {</div>
<div class="line"><a id="l03942" name="l03942"></a><span class="lineno"> 3942</span>        wheel_factor = 50;</div>
<div class="line"><a id="l03943" name="l03943"></a><span class="lineno"> 3943</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03944" name="l03944"></a><span class="lineno"> 3944</span>        <span class="comment">// should really sum the each wheel&#39;s c_rolling_resistance * it&#39;s share of vehicle mass</span></div>
<div class="line"><a id="l03945" name="l03945"></a><span class="lineno"> 3945</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> wheel : <a class="code hl_variable" href="classvehicle.html#a5c432c0da0ff47a483e3aa74548bd435">wheelcache</a> ) {</div>
<div class="line"><a id="l03946" name="l03946"></a><span class="lineno"> 3946</span>            wheel_factor += <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ wheel ].info().wheel_rolling_resistance();</div>
<div class="line"><a id="l03947" name="l03947"></a><span class="lineno"> 3947</span>        }</div>
<div class="line"><a id="l03948" name="l03948"></a><span class="lineno"> 3948</span>        <span class="comment">// mildly increasing rolling resistance for vehicles with more than 4 wheels and mildly</span></div>
<div class="line"><a id="l03949" name="l03949"></a><span class="lineno"> 3949</span>        <span class="comment">// decrease it for vehicles with less</span></div>
<div class="line"><a id="l03950" name="l03950"></a><span class="lineno"> 3950</span>        wheel_factor *= wheel_ratio /</div>
<div class="line"><a id="l03951" name="l03951"></a><span class="lineno"> 3951</span>                        ( base_wheels * wheel_ratio - base_wheels + <a class="code hl_variable" href="classvehicle.html#a5c432c0da0ff47a483e3aa74548bd435">wheelcache</a>.size() );</div>
<div class="line"><a id="l03952" name="l03952"></a><span class="lineno"> 3952</span>    }</div>
<div class="line"><a id="l03953" name="l03953"></a><span class="lineno"> 3953</span>    <a class="code hl_variable" href="classvehicle.html#a3ba73328e291117051f3a05b28dbd9c5">coefficient_rolling_resistance</a> = newton_ratio * wheel_factor * <a class="code hl_function" href="namespaceunits.html#afbf21a7601bd939c196667fc0b020111">to_kilogram</a>( <a class="code hl_function" href="classvehicle.html#a5a7d83716bf73d4b58d265b626872d01">total_mass</a>() );</div>
<div class="line"><a id="l03954" name="l03954"></a><span class="lineno"> 3954</span>    <a class="code hl_variable" href="classvehicle.html#a57285bb3b5dfda9f926bd3f99e3e1bad">coeff_rolling_dirty</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l03955" name="l03955"></a><span class="lineno"> 3955</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#a3ba73328e291117051f3a05b28dbd9c5">coefficient_rolling_resistance</a>;</div>
<div class="line"><a id="l03956" name="l03956"></a><span class="lineno"> 3956</span>}</div>
<div class="ttc" id="aclassvehicle_html_a3ba73328e291117051f3a05b28dbd9c5"><div class="ttname"><a href="classvehicle.html#a3ba73328e291117051f3a05b28dbd9c5">vehicle::coefficient_rolling_resistance</a></div><div class="ttdeci">double coefficient_rolling_resistance</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01725">vehicle.h:1725</a></div></div>
<div class="ttc" id="aclassvehicle_html_a57285bb3b5dfda9f926bd3f99e3e1bad"><div class="ttname"><a href="classvehicle.html#a57285bb3b5dfda9f926bd3f99e3e1bad">vehicle::coeff_rolling_dirty</a></div><div class="ttdeci">bool coeff_rolling_dirty</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01904">vehicle.h:1904</a></div></div>
<div class="ttc" id="aclassvehicle_html_a5a7d83716bf73d4b58d265b626872d01"><div class="ttname"><a href="classvehicle.html#a5a7d83716bf73d4b58d265b626872d01">vehicle::total_mass</a></div><div class="ttdeci">units::mass total_mass() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03126">vehicle.cpp:3126</a></div></div>
<div class="ttc" id="anamespaceunits_html_afbf21a7601bd939c196667fc0b020111"><div class="ttname"><a href="namespaceunits.html#afbf21a7601bd939c196667fc0b020111">units::to_kilogram</a></div><div class="ttdeci">constexpr value_type to_kilogram(const quantity&lt; value_type, mass_in_milligram_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units__mass_8h_source.html#l00073">units_mass.h:73</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01904">coeff_rolling_dirty</a>, <a class="el" href="vehicle_8h_source.html#l01725">coefficient_rolling_resistance</a>, <a class="el" href="units__mass_8h_source.html#l00013">GRAVITY_OF_EARTH</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="units__mass_8h_source.html#l00073">units::to_kilogram()</a>, <a class="el" href="vehicle_8cpp_source.html#l03126">total_mass()</a>, and <a class="el" href="vehicle_8h_source.html#l01761">wheelcache</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>, <a class="el" href="vehicle_8cpp_source.html#l03502">max_ground_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l03567">safe_ground_velocity()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00087">slowdown()</a>.</p>

</div>
</div>
<a id="ae97aeac27584b839105a68f12eb1f7a1" name="ae97aeac27584b839105a68f12eb1f7a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae97aeac27584b839105a68f12eb1f7a1">&#9670;&nbsp;</a></span>coeff_water_drag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double vehicle::coeff_water_drag </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>coefficient of water drag in kg/m multiplied by the square of speed to calculate water drag force in N proportional to cross sectional area of the vehicle, times the density of water, times a dimensional constant based on the vehicle's shape </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04047">4047</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04048" name="l04048"></a><span class="lineno"> 4048</span>{</div>
<div class="line"><a id="l04049" name="l04049"></a><span class="lineno"> 4049</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#a3bf02329db46b5a5dda2a0b35b8147fc">coeff_water_dirty</a> ) {</div>
<div class="line"><a id="l04050" name="l04050"></a><span class="lineno"> 4050</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#ace10be719ab1c8e5d86ff203a3298131">coefficient_water_resistance</a>;</div>
<div class="line"><a id="l04051" name="l04051"></a><span class="lineno"> 4051</span>    }</div>
<div class="line"><a id="l04052" name="l04052"></a><span class="lineno"> 4052</span>    std::vector&lt;int&gt; structure_indices = <a class="code hl_function" href="classvehicle.html#a2e1f54f4d34a2edb7ff3665e5eba7df9">all_parts_at_location</a>( <a class="code hl_function" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure</a> );</div>
<div class="line"><a id="l04053" name="l04053"></a><span class="lineno"> 4053</span>    <span class="keywordflow">if</span>( structure_indices.empty() ) {</div>
<div class="line"><a id="l04054" name="l04054"></a><span class="lineno"> 4054</span>        <span class="comment">// huh?</span></div>
<div class="line"><a id="l04055" name="l04055"></a><span class="lineno"> 4055</span>        <a class="code hl_variable" href="classvehicle.html#a3bf02329db46b5a5dda2a0b35b8147fc">coeff_water_dirty</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04056" name="l04056"></a><span class="lineno"> 4056</span>        <a class="code hl_variable" href="classvehicle.html#a8a1adee2a33275ecf3a31301a5ce88da">hull_height</a> = 0.3;</div>
<div class="line"><a id="l04057" name="l04057"></a><span class="lineno"> 4057</span>        <a class="code hl_variable" href="classvehicle.html#a954d6ff52f6a111d01aa9700db89e941">draft_m</a> = 1.0;</div>
<div class="line"><a id="l04058" name="l04058"></a><span class="lineno"> 4058</span>        <span class="keywordflow">return</span> 1250.0;</div>
<div class="line"><a id="l04059" name="l04059"></a><span class="lineno"> 4059</span>    }</div>
<div class="line"><a id="l04060" name="l04060"></a><span class="lineno"> 4060</span>    <span class="keywordtype">double</span> hull_coverage = <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( <a class="code hl_variable" href="classvehicle.html#ae94902df801fd06056734d05ea98aa0f">floating</a>.size() ) / structure_indices.size();</div>
<div class="line"><a id="l04061" name="l04061"></a><span class="lineno"> 4061</span> </div>
<div class="line"><a id="l04062" name="l04062"></a><span class="lineno"> 4062</span>    <span class="keywordtype">int</span> tile_width = <a class="code hl_variable" href="classvehicle.html#a93c1c8baa5cd7ee79039fd5c7226b24e">mount_max</a>.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> - <a class="code hl_variable" href="classvehicle.html#ad62e7dec9def6c6fcc23f2d7b8e51963">mount_min</a>.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> + 1;</div>
<div class="line"><a id="l04063" name="l04063"></a><span class="lineno"> 4063</span>    <span class="keywordtype">double</span> width_m = <a class="code hl_function" href="vehicle_8cpp.html#acadd942a1d699817700bb888c759c09d">tile_to_width</a>( tile_width );</div>
<div class="line"><a id="l04064" name="l04064"></a><span class="lineno"> 4064</span> </div>
<div class="line"><a id="l04065" name="l04065"></a><span class="lineno"> 4065</span>    <span class="comment">// actual area of the hull in m^2 (handles non-rectangular shapes)</span></div>
<div class="line"><a id="l04066" name="l04066"></a><span class="lineno"> 4066</span>    <span class="comment">// footprint area in tiles = tile width * tile length</span></div>
<div class="line"><a id="l04067" name="l04067"></a><span class="lineno"> 4067</span>    <span class="comment">// effective footprint percent = # of structure tiles / footprint area in tiles</span></div>
<div class="line"><a id="l04068" name="l04068"></a><span class="lineno"> 4068</span>    <span class="comment">// actual hull area in m^2 = footprint percent * length in meters * width in meters</span></div>
<div class="line"><a id="l04069" name="l04069"></a><span class="lineno"> 4069</span>    <span class="comment">// length in meters = length in tiles</span></div>
<div class="line"><a id="l04070" name="l04070"></a><span class="lineno"> 4070</span>    <span class="comment">// actual area in m = # of structure tiles * length in tiles * width in meters /</span></div>
<div class="line"><a id="l04071" name="l04071"></a><span class="lineno"> 4071</span>    <span class="comment">//                    ( length in tiles * width in tiles )</span></div>
<div class="line"><a id="l04072" name="l04072"></a><span class="lineno"> 4072</span>    <span class="comment">// actual area in m = # of structure tiles * width in meters / width in tiles</span></div>
<div class="line"><a id="l04073" name="l04073"></a><span class="lineno"> 4073</span>    <span class="keywordtype">double</span> actual_area_m = width_m * structure_indices.size() / tile_width;</div>
<div class="line"><a id="l04074" name="l04074"></a><span class="lineno"> 4074</span> </div>
<div class="line"><a id="l04075" name="l04075"></a><span class="lineno"> 4075</span>    <span class="comment">// effective hull area is actual hull area * hull coverage</span></div>
<div class="line"><a id="l04076" name="l04076"></a><span class="lineno"> 4076</span>    <span class="keywordtype">double</span> hull_area_m   = actual_area_m * std::max( 0.1, hull_coverage );</div>
<div class="line"><a id="l04077" name="l04077"></a><span class="lineno"> 4077</span>    <span class="comment">// Treat the hullform as a simple cuboid to calculate displaced depth of</span></div>
<div class="line"><a id="l04078" name="l04078"></a><span class="lineno"> 4078</span>    <span class="comment">// water.</span></div>
<div class="line"><a id="l04079" name="l04079"></a><span class="lineno"> 4079</span>    <span class="comment">// Apply Archimedes&#39; principle (mass of water displaced is mass of vehicle).</span></div>
<div class="line"><a id="l04080" name="l04080"></a><span class="lineno"> 4080</span>    <span class="comment">// area * depth = hull_volume = water_mass / water density</span></div>
<div class="line"><a id="l04081" name="l04081"></a><span class="lineno"> 4081</span>    <span class="comment">// water_mass = vehicle_mass</span></div>
<div class="line"><a id="l04082" name="l04082"></a><span class="lineno"> 4082</span>    <span class="comment">// area * depth = vehicle_mass / water_density</span></div>
<div class="line"><a id="l04083" name="l04083"></a><span class="lineno"> 4083</span>    <span class="comment">// depth = vehicle_mass / water_density / area</span></div>
<div class="line"><a id="l04084" name="l04084"></a><span class="lineno"> 4084</span>    <span class="keyword">constexpr</span> <span class="keywordtype">double</span> water_density = 1000.0; <span class="comment">// kg/m^3</span></div>
<div class="line"><a id="l04085" name="l04085"></a><span class="lineno"> 4085</span>    <a class="code hl_variable" href="classvehicle.html#a954d6ff52f6a111d01aa9700db89e941">draft_m</a> = <a class="code hl_function" href="namespaceunits.html#afbf21a7601bd939c196667fc0b020111">to_kilogram</a>( <a class="code hl_function" href="classvehicle.html#a5a7d83716bf73d4b58d265b626872d01">total_mass</a>() ) / water_density / hull_area_m;</div>
<div class="line"><a id="l04086" name="l04086"></a><span class="lineno"> 4086</span>    <span class="comment">// increase the streamlining as more of the boat is covered in boat boards</span></div>
<div class="line"><a id="l04087" name="l04087"></a><span class="lineno"> 4087</span>    <span class="keywordtype">double</span> c_water_drag = 1.25 - hull_coverage;</div>
<div class="line"><a id="l04088" name="l04088"></a><span class="lineno"> 4088</span>    <span class="comment">// hull height starts at 0.3m and goes up as you add more boat boards</span></div>
<div class="line"><a id="l04089" name="l04089"></a><span class="lineno"> 4089</span>    <a class="code hl_variable" href="classvehicle.html#a8a1adee2a33275ecf3a31301a5ce88da">hull_height</a> = 0.3 + 0.5 * hull_coverage;</div>
<div class="line"><a id="l04090" name="l04090"></a><span class="lineno"> 4090</span>    <span class="comment">// F_water_drag = c_water_drag * cross_area * 1/2 * water_density * v^2</span></div>
<div class="line"><a id="l04091" name="l04091"></a><span class="lineno"> 4091</span>    <span class="comment">// coeff_water_resistance = c_water_drag * cross_area * 1/2 * water_density</span></div>
<div class="line"><a id="l04092" name="l04092"></a><span class="lineno"> 4092</span>    <a class="code hl_variable" href="classvehicle.html#ace10be719ab1c8e5d86ff203a3298131">coefficient_water_resistance</a> = c_water_drag * width_m * <a class="code hl_variable" href="classvehicle.html#a954d6ff52f6a111d01aa9700db89e941">draft_m</a> * 0.5 * water_density;</div>
<div class="line"><a id="l04093" name="l04093"></a><span class="lineno"> 4093</span>    <a class="code hl_variable" href="classvehicle.html#a3bf02329db46b5a5dda2a0b35b8147fc">coeff_water_dirty</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04094" name="l04094"></a><span class="lineno"> 4094</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#ace10be719ab1c8e5d86ff203a3298131">coefficient_water_resistance</a>;</div>
<div class="line"><a id="l04095" name="l04095"></a><span class="lineno"> 4095</span>}</div>
<div class="ttc" id="aclassvehicle_html_ace10be719ab1c8e5d86ff203a3298131"><div class="ttname"><a href="classvehicle.html#ace10be719ab1c8e5d86ff203a3298131">vehicle::coefficient_water_resistance</a></div><div class="ttdeci">double coefficient_water_resistance</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01726">vehicle.h:1726</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l02745">all_parts_at_location()</a>, <a class="el" href="vehicle_8h_source.html#l01906">coeff_water_dirty</a>, <a class="el" href="vehicle_8h_source.html#l01726">coefficient_water_resistance</a>, <a class="el" href="vehicle_8h_source.html#l01727">draft_m</a>, <a class="el" href="vehicle_8h_source.html#l01767">floating</a>, <a class="el" href="vehicle_8h_source.html#l01728">hull_height</a>, <a class="el" href="vehicle_8h_source.html#l01820">mount_max</a>, <a class="el" href="vehicle_8h_source.html#l01821">mount_min</a>, <a class="el" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure()</a>, <a class="el" href="vehicle_8cpp_source.html#l03759">tile_to_width()</a>, <a class="el" href="units__mass_8h_source.html#l00073">units::to_kilogram()</a>, <a class="el" href="vehicle_8cpp_source.html#l03126">total_mass()</a>, and <a class="el" href="point_8h_source.html#l00039">point::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03974">can_float()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>, <a class="el" href="vehicle_8cpp_source.html#l03524">max_water_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l03585">safe_water_velocity()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00087">slowdown()</a>, <a class="el" href="vehicle_8cpp_source.html#l03966">water_draft()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03958">water_hull_height()</a>.</p>

</div>
</div>
<a id="aa17bd1dea0b5376e3d118ede063736f8" name="aa17bd1dea0b5376e3d118ede063736f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa17bd1dea0b5376e3d118ede063736f8">&#9670;&nbsp;</a></span>collision()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::collision </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="structveh__collision.html">veh_collision</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>colls</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>dp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>just_detect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bash_floor</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__move_8cpp_source.html#l00354">354</a> of file <a class="el" href="vehicle__move_8cpp_source.html">vehicle_move.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>{</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span> </div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>    <span class="comment">/*</span></div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span><span class="comment">     * Big TODO:</span></div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span><span class="comment">     * Rewrite this function so that it has &quot;pre-collision&quot; phase (detection)</span></div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span><span class="comment">     *  and &quot;post-collision&quot; phase (applying damage).</span></div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span><span class="comment">     * Then invoke the functions cyclically (pre-post-pre-post-...) until</span></div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span><span class="comment">     *  velocity == 0 or no collision happens.</span></div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span><span class="comment">     * Make all post-collisions in a given phase use the same momentum.</span></div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span><span class="comment">     *</span></div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span><span class="comment">     * How it works right now: find the first obstacle, then ram it over and over</span></div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span><span class="comment">     *  until either the obstacle is removed or the vehicle stops.</span></div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span><span class="comment">     * Bug: when ramming a critter without enough force to send it flying,</span></div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span><span class="comment">     *  the vehicle will phase into it.</span></div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span><span class="comment">     */</span></div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span> </div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>    <span class="keywordflow">if</span>( dp.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> != 0 &amp;&amp; ( dp.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> != 0 || dp.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> != 0 ) ) {</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>        <span class="comment">// Split into horizontal + vertical</span></div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#aa17bd1dea0b5376e3d118ede063736f8">collision</a>( colls, <a class="code hl_struct" href="structtripoint.html">tripoint</a>( dp.<a class="code hl_function" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>(), 0 ), just_detect, bash_floor ) ||</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>               <a class="code hl_function" href="classvehicle.html#aa17bd1dea0b5376e3d118ede063736f8">collision</a>( colls, <a class="code hl_struct" href="structtripoint.html">tripoint</a>( 0,    0,    dp.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> ), just_detect, bash_floor );</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>    }</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span> </div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>    <span class="keywordflow">if</span>( dp.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> == -1 &amp;&amp; !bash_floor ) {</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>        <span class="comment">// First check current level, then the one below if current had no collisions</span></div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>        <span class="comment">// Bash floors on the current one, but not on the one below.</span></div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aa17bd1dea0b5376e3d118ede063736f8">collision</a>( colls, <a class="code hl_variable" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a>, just_detect, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>        }</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>    }</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span> </div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> vertical = bash_floor || dp.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> != 0;</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> &amp;coll_velocity = vertical ? <a class="code hl_variable" href="classvehicle.html#a416a2bc9ee792663fced3344db322cb8">vertical_velocity</a> : <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a>;</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>    <span class="comment">// Skip collisions when there is no apparent movement, except verticially moving rotorcraft.</span></div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>    <span class="keywordflow">if</span>( coll_velocity == 0 &amp;&amp; !<a class="code hl_function" href="classvehicle.html#a292961ab33a42bf495d19b8692f6f105">is_rotorcraft</a>() ) {</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>        just_detect = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>    }</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span> </div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> velocity_before = coll_velocity;</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>    <span class="keywordtype">int</span> lowest_velocity = coll_velocity;</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> sign_before = <a class="code hl_function" href="enums_8h.html#a89bed42d8e3efcd44570febc837f088e">sgn</a>( velocity_before );</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>    <span class="keywordtype">bool</span> empty = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> p = 0; <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( p ) &lt; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size(); p++ ) {</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>        <span class="keyword">const</span> <a class="code hl_class" href="classvpart__info.html">vpart_info</a> &amp;info = <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( p );</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>        <span class="keywordflow">if</span>( ( info.<a class="code hl_variable" href="classvpart__info.html#a03cfe554b18beb9c32d9a86872a1748e">location</a> != <a class="code hl_function" href="vehicle__move_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure</a> &amp;&amp; info.<a class="code hl_function" href="classvpart__info.html#af014709bbc2aceff9f6e91bd15e6d508">rotor_diameter</a>() == 0 ) ||</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>            <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ p ].removed ) {</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>        }</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>        empty = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>        <span class="comment">// Coordinates of where part will go due to movement (dx/dy/dz)</span></div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>        <span class="comment">//  and turning (precalc[1])</span></div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> dsp = <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>() + dp + <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].precalc[1];</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>        <a class="code hl_struct" href="structveh__collision.html">veh_collision</a> coll = <a class="code hl_function" href="classvehicle.html#ae4a8bd9a6ff5fb9a0169296a776c1e98">part_collision</a>( p, dsp, just_detect, bash_floor );</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>        <span class="keywordflow">if</span>( coll.<a class="code hl_variable" href="structveh__collision.html#a5b346d49ed96d1ac882411742b92c23a">type</a> == <a class="code hl_enumvalue" href="vehicle_8h.html#a53b960f88fea75df3467e17492458952ad6f7a65f12e8eab61c4617147bbd6189">veh_coll_nothing</a> ) {</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>        }</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span> </div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>        colls.push_back( coll );</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span> </div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>        <span class="keywordflow">if</span>( just_detect ) {</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>            <span class="comment">// DO insert the first collision so we can tell what was it</span></div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>        }</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span> </div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> velocity_after = coll_velocity;</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>        <span class="comment">// A hack for falling vehicles: restore the velocity so that it hits at full force everywhere</span></div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>        <span class="comment">// TODO: Make this more elegant</span></div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>        <span class="keywordflow">if</span>( vertical ) {</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>            <span class="keywordflow">if</span>( velocity_before &lt; 0 ) {</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>                lowest_velocity = std::max( lowest_velocity, coll_velocity );</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>                lowest_velocity = std::min( lowest_velocity, coll_velocity );</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>            }</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>            <a class="code hl_variable" href="classvehicle.html#a416a2bc9ee792663fced3344db322cb8">vertical_velocity</a> = velocity_before;</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="enums_8h.html#a89bed42d8e3efcd44570febc837f088e">sgn</a>( velocity_after ) != sign_before ) {</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>            <span class="comment">// Sign of velocity inverted, collisions would be in wrong direction</span></div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>        }</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>    }</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span> </div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>    <span class="keywordflow">if</span>( vertical ) {</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>        <a class="code hl_variable" href="classvehicle.html#a416a2bc9ee792663fced3344db322cb8">vertical_velocity</a> = lowest_velocity;</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a416a2bc9ee792663fced3344db322cb8">vertical_velocity</a> == 0 ) {</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>            <a class="code hl_variable" href="classvehicle.html#aeafb913ad9b9d1341d51a4c51ba43a06">is_falling</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>        }</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>    }</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span> </div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>    <span class="keywordflow">if</span>( empty ) {</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>        <span class="comment">// HACK: Hack for dirty vehicles that didn&#39;t yet get properly removed</span></div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>        <a class="code hl_struct" href="structveh__collision.html">veh_collision</a> fake_coll;</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>        fake_coll.<a class="code hl_variable" href="structveh__collision.html#a5b346d49ed96d1ac882411742b92c23a">type</a> = <a class="code hl_enumvalue" href="vehicle_8h.html#a53b960f88fea75df3467e17492458952af924b62a834eb9a80f9f8ac3d7ae4be3">veh_coll_other</a>;</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>        colls.push_back( fake_coll );</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>        <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> = 0;</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>        <a class="code hl_variable" href="classvehicle.html#a416a2bc9ee792663fced3344db322cb8">vertical_velocity</a> = 0;</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;Collision check on a dirty vehicle %s&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>    }</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span> </div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>    <span class="keywordflow">return</span> !colls.empty();</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>}</div>
<div class="ttc" id="aclassvehicle_html_aa17bd1dea0b5376e3d118ede063736f8"><div class="ttname"><a href="classvehicle.html#aa17bd1dea0b5376e3d118ede063736f8">vehicle::collision</a></div><div class="ttdeci">bool collision(std::vector&lt; veh_collision &gt; &amp;colls, const tripoint &amp;dp, bool just_detect, bool bash_floor=false)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l00354">vehicle_move.cpp:354</a></div></div>
<div class="ttc" id="aclassvehicle_html_ae4a8bd9a6ff5fb9a0169296a776c1e98"><div class="ttname"><a href="classvehicle.html#ae4a8bd9a6ff5fb9a0169296a776c1e98">vehicle::part_collision</a></div><div class="ttdeci">veh_collision part_collision(int part, const tripoint &amp;p, bool just_detect, bool bash_floor)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l00470">vehicle_move.cpp:470</a></div></div>
<div class="ttc" id="aclassvpart__info_html_af014709bbc2aceff9f6e91bd15e6d508"><div class="ttname"><a href="classvpart__info.html#af014709bbc2aceff9f6e91bd15e6d508">vpart_info::rotor_diameter</a></div><div class="ttdeci">int rotor_diameter() const</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8cpp_source.html#l00908">veh_type.cpp:908</a></div></div>
<div class="ttc" id="aenums_8h_html_a89bed42d8e3efcd44570febc837f088e"><div class="ttname"><a href="enums_8h.html#a89bed42d8e3efcd44570febc837f088e">sgn</a></div><div class="ttdeci">constexpr int sgn(const T x)</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00008">enums.h:8</a></div></div>
<div class="ttc" id="astructtripoint_html_accc0725c936dbebb2486f969f39e2e5f"><div class="ttname"><a href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">tripoint::xy</a></div><div class="ttdeci">constexpr point xy() const</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00220">point.h:220</a></div></div>
<div class="ttc" id="astructveh__collision_html"><div class="ttname"><a href="structveh__collision.html">veh_collision</a></div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00107">vehicle.h:107</a></div></div>
<div class="ttc" id="astructveh__collision_html_a5b346d49ed96d1ac882411742b92c23a"><div class="ttname"><a href="structveh__collision.html#a5b346d49ed96d1ac882411742b92c23a">veh_collision::type</a></div><div class="ttdeci">veh_coll_type type</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00110">vehicle.h:110</a></div></div>
<div class="ttc" id="avehicle_8h_html_a53b960f88fea75df3467e17492458952ad6f7a65f12e8eab61c4617147bbd6189"><div class="ttname"><a href="vehicle_8h.html#a53b960f88fea75df3467e17492458952ad6f7a65f12e8eab61c4617147bbd6189">veh_coll_nothing</a></div><div class="ttdeci">@ veh_coll_nothing</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00099">vehicle.h:99</a></div></div>
<div class="ttc" id="avehicle_8h_html_a53b960f88fea75df3467e17492458952af924b62a834eb9a80f9f8ac3d7ae4be3"><div class="ttname"><a href="vehicle_8h.html#a53b960f88fea75df3467e17492458952af924b62a834eb9a80f9f8ac3d7ae4be3">veh_coll_other</a></div><div class="ttdeci">@ veh_coll_other</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00103">vehicle.h:103</a></div></div>
<div class="ttc" id="avehicle__move_8cpp_html_a00735c0bfb68c2a0c0c7d53e8f72a70e"><div class="ttname"><a href="vehicle__move_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure</a></div><div class="ttdeci">static const std::string part_location_structure(&quot;structure&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00354">collision()</a>, <a class="el" href="vehicle_8cpp_source.html#l03101">global_pos3()</a>, <a class="el" href="vehicle_8h_source.html#l01946">is_falling</a>, <a class="el" href="vehicle_8cpp_source.html#l04017">is_rotorcraft()</a>, <a class="el" href="veh__type_8h_source.html#l00155">vpart_info::location</a>, <a class="el" href="enums_8h_source.html#l00264">m_debug</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00470">part_collision()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle__move_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="veh__type_8cpp_source.html#l00908">vpart_info::rotor_diameter()</a>, <a class="el" href="enums_8h_source.html#l00008">sgn()</a>, <a class="el" href="point_8h_source.html#l00273">tripoint_zero</a>, <a class="el" href="vehicle_8h_source.html#l00110">veh_collision::type</a>, <a class="el" href="vehicle_8h_source.html#l00099">veh_coll_nothing</a>, <a class="el" href="vehicle_8h_source.html#l00103">veh_coll_other</a>, <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>, <a class="el" href="vehicle_8h_source.html#l01865">vertical_velocity</a>, <a class="el" href="point_8h_source.html#l00150">tripoint::x</a>, <a class="el" href="point_8h_source.html#l00220">tripoint::xy()</a>, <a class="el" href="point_8h_source.html#l00151">tripoint::y</a>, and <a class="el" href="point_8h_source.html#l00152">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l00354">collision()</a>, <a class="el" href="grab_8cpp_source.html#l00021">game::grabbed_veh_move()</a>, and <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>.</p>

</div>
</div>
<a id="a69a37e32958ea0bffc377cc3e0ece913" name="a69a37e32958ea0bffc377cc3e0ece913"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69a37e32958ea0bffc377cc3e0ece913">&#9670;&nbsp;</a></span>consume_fuel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::consume_fuel </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>load</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>t_seconds</em> = <code>6</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>skip_electric</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04400">4400</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04401" name="l04401"></a><span class="lineno"> 4401</span>{</div>
<div class="line"><a id="l04402" name="l04402"></a><span class="lineno"> 4402</span>    <span class="keywordtype">double</span> st = <a class="code hl_function" href="classvehicle.html#ac49843abe67be6f7f9c3fdaf92e2f411">strain</a>();</div>
<div class="line"><a id="l04403" name="l04403"></a><span class="lineno"> 4403</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;fuel_pr : <a class="code hl_function" href="classvehicle.html#a97eca7e230437aa8792f1db63919c44f">fuel_usage</a>() ) {</div>
<div class="line"><a id="l04404" name="l04404"></a><span class="lineno"> 4404</span>        <span class="keyword">auto</span> &amp;ft = fuel_pr.first;</div>
<div class="line"><a id="l04405" name="l04405"></a><span class="lineno"> 4405</span>        <span class="keywordflow">if</span>( skip_electric &amp;&amp; ft == <a class="code hl_variable" href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a> ) {</div>
<div class="line"><a id="l04406" name="l04406"></a><span class="lineno"> 4406</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04407" name="l04407"></a><span class="lineno"> 4407</span>        }</div>
<div class="line"><a id="l04408" name="l04408"></a><span class="lineno"> 4408</span> </div>
<div class="line"><a id="l04409" name="l04409"></a><span class="lineno"> 4409</span>        <span class="keywordtype">double</span> amnt_precise_j = <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( fuel_pr.second ) * t_seconds;</div>
<div class="line"><a id="l04410" name="l04410"></a><span class="lineno"> 4410</span>        amnt_precise_j *= <a class="code hl_function" href="namespaceammo__effects.html#a266026a76ad1cf3377d0b7c6efc36dd7">load</a> / 1000.0 * ( 1.0 + st * st * 100.0 );</div>
<div class="line"><a id="l04411" name="l04411"></a><span class="lineno"> 4411</span>        <span class="keyword">auto</span> inserted = <a class="code hl_variable" href="classvehicle.html#ad9047841099276d5de5a6771be72233a">fuel_used_last_turn</a>.insert( { ft, 0.0f } );</div>
<div class="line"><a id="l04412" name="l04412"></a><span class="lineno"> 4412</span>        inserted.first-&gt;second += amnt_precise_j;</div>
<div class="line"><a id="l04413" name="l04413"></a><span class="lineno"> 4413</span>        <span class="keywordtype">double</span> remainder = <a class="code hl_variable" href="classvehicle.html#a575c37830326826ac7421382652b2f5d">fuel_remainder</a>[ ft ];</div>
<div class="line"><a id="l04414" name="l04414"></a><span class="lineno"> 4414</span>        amnt_precise_j -= remainder;</div>
<div class="line"><a id="l04415" name="l04415"></a><span class="lineno"> 4415</span> </div>
<div class="line"><a id="l04416" name="l04416"></a><span class="lineno"> 4416</span>        <span class="keywordflow">if</span>( amnt_precise_j &gt; 0.0f ) {</div>
<div class="line"><a id="l04417" name="l04417"></a><span class="lineno"> 4417</span>            <a class="code hl_variable" href="classvehicle.html#a575c37830326826ac7421382652b2f5d">fuel_remainder</a>[ ft ] = <a class="code hl_function" href="classvehicle.html#a89d72d47c4284b751fd8bebf52febdc4">drain_energy</a>( ft, amnt_precise_j ) - amnt_precise_j;</div>
<div class="line"><a id="l04418" name="l04418"></a><span class="lineno"> 4418</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04419" name="l04419"></a><span class="lineno"> 4419</span>            <a class="code hl_variable" href="classvehicle.html#a575c37830326826ac7421382652b2f5d">fuel_remainder</a>[ ft ] = -amnt_precise_j;</div>
<div class="line"><a id="l04420" name="l04420"></a><span class="lineno"> 4420</span>        }</div>
<div class="line"><a id="l04421" name="l04421"></a><span class="lineno"> 4421</span>    }</div>
<div class="line"><a id="l04422" name="l04422"></a><span class="lineno"> 4422</span>    <span class="comment">// we want this to update the activity level whenever the engine is running</span></div>
<div class="line"><a id="l04423" name="l04423"></a><span class="lineno"> 4423</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespaceammo__effects.html#a266026a76ad1cf3377d0b7c6efc36dd7">load</a> &gt; 0 &amp;&amp; <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="vehicle_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a> ) &gt; 0 ) {</div>
<div class="line"><a id="l04424" name="l04424"></a><span class="lineno"> 4424</span>        <span class="comment">//do this as a function of current load</span></div>
<div class="line"><a id="l04425" name="l04425"></a><span class="lineno"> 4425</span>        <span class="comment">// But only if the player is actually there!</span></div>
<div class="line"><a id="l04426" name="l04426"></a><span class="lineno"> 4426</span>        <span class="keywordtype">int</span> eff_load = <a class="code hl_function" href="namespaceammo__effects.html#a266026a76ad1cf3377d0b7c6efc36dd7">load</a> / 10;</div>
<div class="line"><a id="l04427" name="l04427"></a><span class="lineno"> 4427</span>        <span class="keywordtype">int</span> <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> = 4 * st; <span class="comment">// strain</span></div>
<div class="line"><a id="l04428" name="l04428"></a><span class="lineno"> 4428</span>        <span class="keywordtype">int</span> base_burn = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( get_option&lt;float&gt;( <span class="stringliteral">&quot;PLAYER_BASE_STAMINA_REGEN_RATE&quot;</span> ) ) -</div>
<div class="line"><a id="l04429" name="l04429"></a><span class="lineno"> 4429</span>                        3;</div>
<div class="line"><a id="l04430" name="l04430"></a><span class="lineno"> 4430</span>        base_burn = std::max( eff_load / 3, base_burn );</div>
<div class="line"><a id="l04431" name="l04431"></a><span class="lineno"> 4431</span>        <span class="comment">//charge bionics when using muscle engine</span></div>
<div class="line"><a id="l04432" name="l04432"></a><span class="lineno"> 4432</span>        <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> muscle( <span class="stringliteral">&quot;muscle&quot;</span> );</div>
<div class="line"><a id="l04433" name="l04433"></a><span class="lineno"> 4433</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">bionic_id</a> &amp;bid : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.get_bionic_fueled_with( muscle ) ) {</div>
<div class="line"><a id="l04434" name="l04434"></a><span class="lineno"> 4434</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_active_bionic( bid ) ) { <span class="comment">// active power gen</span></div>
<div class="line"><a id="l04435" name="l04435"></a><span class="lineno"> 4435</span>                <span class="comment">// more pedaling = more power</span></div>
<div class="line"><a id="l04436" name="l04436"></a><span class="lineno"> 4436</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.mod_power_level( <a class="code hl_function" href="namespaceunits.html#ada24d52c1ffd0df8d52a363d013d3231">units::from_kilojoule</a>( muscle.fuel_energy() ) * bid-&gt;fuel_efficiency *</div>
<div class="line"><a id="l04437" name="l04437"></a><span class="lineno"> 4437</span>                                      ( <a class="code hl_function" href="namespaceammo__effects.html#a266026a76ad1cf3377d0b7c6efc36dd7">load</a> / 1000 ) );</div>
<div class="line"><a id="l04438" name="l04438"></a><span class="lineno"> 4438</span>                <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> += eff_load / 5;</div>
<div class="line"><a id="l04439" name="l04439"></a><span class="lineno"> 4439</span>            } <span class="keywordflow">else</span> { <span class="comment">// passive power gen</span></div>
<div class="line"><a id="l04440" name="l04440"></a><span class="lineno"> 4440</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.mod_power_level( <a class="code hl_function" href="namespaceunits.html#ada24d52c1ffd0df8d52a363d013d3231">units::from_kilojoule</a>( muscle.fuel_energy() ) * bid-&gt;passive_fuel_efficiency *</div>
<div class="line"><a id="l04441" name="l04441"></a><span class="lineno"> 4441</span>                                      ( <a class="code hl_function" href="namespaceammo__effects.html#a266026a76ad1cf3377d0b7c6efc36dd7">load</a> / 1000 ) );</div>
<div class="line"><a id="l04442" name="l04442"></a><span class="lineno"> 4442</span>                <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> += eff_load / 10;</div>
<div class="line"><a id="l04443" name="l04443"></a><span class="lineno"> 4443</span>            }</div>
<div class="line"><a id="l04444" name="l04444"></a><span class="lineno"> 4444</span>        }</div>
<div class="line"><a id="l04445" name="l04445"></a><span class="lineno"> 4445</span>        <span class="comment">// decreased stamina burn scalable with load</span></div>
<div class="line"><a id="l04446" name="l04446"></a><span class="lineno"> 4446</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_active_bionic( <a class="code hl_variable" href="vehicle_8cpp.html#af91910726c027b2621ebb07007a06e70">bio_jointservo</a> ) ) {</div>
<div class="line"><a id="l04447" name="l04447"></a><span class="lineno"> 4447</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.mod_power_level( <a class="code hl_function" href="namespaceunits.html#ada24d52c1ffd0df8d52a363d013d3231">units::from_kilojoule</a>( -std::max( eff_load / 20, 1 ) ) );</div>
<div class="line"><a id="l04448" name="l04448"></a><span class="lineno"> 4448</span>            <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> -= std::max( eff_load / 5, 5 );</div>
<div class="line"><a id="l04449" name="l04449"></a><span class="lineno"> 4449</span>        }</div>
<div class="line"><a id="l04450" name="l04450"></a><span class="lineno"> 4450</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 1000 / <a class="code hl_function" href="namespaceammo__effects.html#a266026a76ad1cf3377d0b7c6efc36dd7">load</a> ) &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 10 ) ) {</div>
<div class="line"><a id="l04451" name="l04451"></a><span class="lineno"> 4451</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.mod_stored_kcal( -10 );</div>
<div class="line"><a id="l04452" name="l04452"></a><span class="lineno"> 4452</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.mod_thirst( 1 );</div>
<div class="line"><a id="l04453" name="l04453"></a><span class="lineno"> 4453</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.mod_fatigue( 1 );</div>
<div class="line"><a id="l04454" name="l04454"></a><span class="lineno"> 4454</span>        }</div>
<div class="line"><a id="l04455" name="l04455"></a><span class="lineno"> 4455</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.mod_stamina( -( base_burn + <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> ) );</div>
<div class="line"><a id="l04456" name="l04456"></a><span class="lineno"> 4456</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;Load: %d&quot;</span>, <a class="code hl_function" href="namespaceammo__effects.html#a266026a76ad1cf3377d0b7c6efc36dd7">load</a> );</div>
<div class="line"><a id="l04457" name="l04457"></a><span class="lineno"> 4457</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;Mod: %d&quot;</span>, <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> );</div>
<div class="line"><a id="l04458" name="l04458"></a><span class="lineno"> 4458</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;Burn: %d&quot;</span>, -( base_burn + <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> ) );</div>
<div class="line"><a id="l04459" name="l04459"></a><span class="lineno"> 4459</span>    }</div>
<div class="line"><a id="l04460" name="l04460"></a><span class="lineno"> 4460</span>}</div>
<div class="ttc" id="aclassvehicle_html_a575c37830326826ac7421382652b2f5d"><div class="ttname"><a href="classvehicle.html#a575c37830326826ac7421382652b2f5d">vehicle::fuel_remainder</a></div><div class="ttdeci">std::map&lt; itype_id, float &gt; fuel_remainder</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01804">vehicle.h:1804</a></div></div>
<div class="ttc" id="aclassvehicle_html_a89d72d47c4284b751fd8bebf52febdc4"><div class="ttname"><a href="classvehicle.html#a89d72d47c4284b751fd8bebf52febdc4">vehicle::drain_energy</a></div><div class="ttdeci">double drain_energy(const itype_id &amp;ftype, double energy_j)</div><div class="ttdoc">Consumes enough fuel by energy content.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04371">vehicle.cpp:4371</a></div></div>
<div class="ttc" id="aclassvehicle_html_a97eca7e230437aa8792f1db63919c44f"><div class="ttname"><a href="classvehicle.html#a97eca7e230437aa8792f1db63919c44f">vehicle::fuel_usage</a></div><div class="ttdeci">std::map&lt; itype_id, int &gt; fuel_usage() const</div><div class="ttdoc">Maps used fuel to its basic (unscaled by load/strain) consumption.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04340">vehicle.cpp:4340</a></div></div>
<div class="ttc" id="aclassvehicle_html_ac49843abe67be6f7f9c3fdaf92e2f411"><div class="ttname"><a href="classvehicle.html#ac49843abe67be6f7f9c3fdaf92e2f411">vehicle::strain</a></div><div class="ttdeci">float strain() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04126">vehicle.cpp:4126</a></div></div>
<div class="ttc" id="aclassvehicle_html_ad9047841099276d5de5a6771be72233a"><div class="ttname"><a href="classvehicle.html#ad9047841099276d5de5a6771be72233a">vehicle::fuel_used_last_turn</a></div><div class="ttdeci">std::map&lt; itype_id, float &gt; fuel_used_last_turn</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01805">vehicle.h:1805</a></div></div>
<div class="ttc" id="anamespaceammo__effects_html_a266026a76ad1cf3377d0b7c6efc36dd7"><div class="ttname"><a href="namespaceammo__effects.html#a266026a76ad1cf3377d0b7c6efc36dd7">ammo_effects::load</a></div><div class="ttdeci">void load(const JsonObject &amp;jo, const std::string &amp;src)</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00147">ammo_effect.cpp:147</a></div></div>
<div class="ttc" id="anamespaceenchant__vals_html_acd6a6ebb27f9ecb82b3bce1d3aef2998"><div class="ttname"><a href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">enchant_vals::mod</a></div><div class="ttdeci">mod</div><div class="ttdef"><b>Definition:</b> <a href="magic__enchantment_8h_source.html#l00026">magic_enchantment.h:26</a></div></div>
<div class="ttc" id="anamespaceunits_html_ada24d52c1ffd0df8d52a363d013d3231"><div class="ttname"><a href="namespaceunits.html#ada24d52c1ffd0df8d52a363d013d3231">units::from_kilojoule</a></div><div class="ttdeci">constexpr quantity&lt; value_type, energy_in_joule_tag &gt; from_kilojoule(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units__energy_8h_source.html#l00032">units_energy.h:32</a></div></div>
<div class="ttc" id="avehicle_8cpp_html_af54ee122fbd5cf94c6ef8bca7e67c8e8"><div class="ttname"><a href="vehicle_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a></div><div class="ttdeci">static const itype_id fuel_type_muscle(&quot;muscle&quot;)</div></div>
<div class="ttc" id="avehicle_8cpp_html_af91910726c027b2621ebb07007a06e70"><div class="ttname"><a href="vehicle_8cpp.html#af91910726c027b2621ebb07007a06e70">bio_jointservo</a></div><div class="ttdeci">static const bionic_id bio_jointservo(&quot;bio_jointservo&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="vehicle_8cpp.html#af91910726c027b2621ebb07007a06e70">bio_jointservo</a>, <a class="el" href="vehicle_8cpp_source.html#l04371">drain_energy()</a>, <a class="el" href="units__energy_8h_source.html#l00032">units::from_kilojoule()</a>, <a class="el" href="item_8cpp_source.html#l06666">item::fuel_energy()</a>, <a class="el" href="vehicle_8cpp_source.html#l03179">fuel_left()</a>, <a class="el" href="vehicle_8h_source.html#l01804">fuel_remainder</a>, <a class="el" href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, <a class="el" href="vehicle_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a>, <a class="el" href="vehicle_8cpp_source.html#l04340">fuel_usage()</a>, <a class="el" href="vehicle_8h_source.html#l01805">fuel_used_last_turn</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00147">ammo_effects::load()</a>, <a class="el" href="enums_8h_source.html#l00264">m_debug</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04126">strain()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05033">idle()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>.</p>

</div>
</div>
<a id="a6f1c8a77b8886bea8f66f8e730270493" name="a6f1c8a77b8886bea8f66f8e730270493"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f1c8a77b8886bea8f66f8e730270493">&#9670;&nbsp;</a></span>consumption_per_hour()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::consumption_per_hour </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>ftype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fuel_rate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03318">3318</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03319" name="l03319"></a><span class="lineno"> 3319</span>{</div>
<div class="line"><a id="l03320" name="l03320"></a><span class="lineno"> 3320</span>    <a class="code hl_class" href="classitem.html">item</a> fuel = <a class="code hl_class" href="classitem.html">item</a>( ftype );</div>
<div class="line"><a id="l03321" name="l03321"></a><span class="lineno"> 3321</span>    <span class="keywordflow">if</span>( fuel_rate_w == 0 || fuel.<a class="code hl_function" href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">has_flag</a>( <span class="stringliteral">&quot;PERPETUAL&quot;</span> ) || !<a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> ) {</div>
<div class="line"><a id="l03322" name="l03322"></a><span class="lineno"> 3322</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l03323" name="l03323"></a><span class="lineno"> 3323</span>    }</div>
<div class="line"><a id="l03324" name="l03324"></a><span class="lineno"> 3324</span> </div>
<div class="line"><a id="l03325" name="l03325"></a><span class="lineno"> 3325</span>    <span class="keywordtype">float</span> j_per_turn = fuel_rate_w;</div>
<div class="line"><a id="l03326" name="l03326"></a><span class="lineno"> 3326</span>    <span class="keywordtype">float</span> j_per_second = j_per_turn / to_seconds&lt;float&gt;( <a class="code hl_function" href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a>( 1 ) );</div>
<div class="line"><a id="l03327" name="l03327"></a><span class="lineno"> 3327</span>    <span class="keywordtype">float</span> kj_per_hour = j_per_second * 3.6f;</div>
<div class="line"><a id="l03328" name="l03328"></a><span class="lineno"> 3328</span>    <span class="keywordtype">float</span> kj_per_mL = fuel.<a class="code hl_function" href="classitem.html#a820e79d915781a615d3b160fa63946af">fuel_energy</a>();</div>
<div class="line"><a id="l03329" name="l03329"></a><span class="lineno"> 3329</span> </div>
<div class="line"><a id="l03330" name="l03330"></a><span class="lineno"> 3330</span>    <span class="keywordflow">return</span> kj_per_hour / kj_per_mL;</div>
<div class="line"><a id="l03331" name="l03331"></a><span class="lineno"> 3331</span>}</div>
<div class="ttc" id="aclassitem_html_a820e79d915781a615d3b160fa63946af"><div class="ttname"><a href="classitem.html#a820e79d915781a615d3b160fa63946af">item::fuel_energy</a></div><div class="ttdeci">float fuel_energy() const</div><div class="ttdoc">Returns energy of one charge of this item as fuel for an engine.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06666">item.cpp:6666</a></div></div>
<div class="ttc" id="aclassitem_html_aaa5aeb6f838927babb10ede535cf2a73"><div class="ttname"><a href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">item::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05192">item.cpp:5192</a></div></div>
<div class="ttc" id="aclasstime__duration_html_a0f7145f4fc4c09defbaf25f468e4e54a"><div class="ttname"><a href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a></div><div class="ttdeci">static constexpr time_duration from_turns(const T t)</div><div class="ttdoc">Named constructors to get a duration representing a multiple of the named time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00204">calendar.h:204</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01930">engine_on</a>, <a class="el" href="calendar_8h_source.html#l00204">time_duration::from_turns()</a>, <a class="el" href="item_8cpp_source.html#l06666">item::fuel_energy()</a>, and <a class="el" href="item_8cpp_source.html#l05192">item::has_flag()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__display_8cpp_source.html#l00398">print_fuel_indicator()</a>.</p>

</div>
</div>
<a id="ae432d73f12b167105d62fdd832f9b30e" name="ae432d73f12b167105d62fdd832f9b30e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae432d73f12b167105d62fdd832f9b30e">&#9670;&nbsp;</a></span>control_doors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::control_doors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l00173">173</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>{</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    <span class="keyword">const</span> <span class="keyword">auto</span> door_motors = <a class="code hl_function" href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">get_avail_parts</a>( <span class="stringliteral">&quot;DOOR_MOTOR&quot;</span> );</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    <span class="comment">// Indices of doors</span></div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>    std::vector&lt; int &gt; doors_with_motors;</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>    <span class="comment">// Locations used to display the doors</span></div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>    std::vector&lt; tripoint &gt; <a class="code hl_variable" href="namespaceanonymous__namespace_02overmap__location_8cpp_03.html#a1746287579ae93eaa7db10693e28de66">locations</a>;</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>    <span class="comment">// it is possible to have one door to open and one to close for single motor</span></div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    <span class="keywordflow">if</span>( empty( door_motors ) ) {</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;vehicle::control_doors called but no door motors found&quot;</span> );</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>    }</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span> </div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>    <a class="code hl_class" href="classuilist.html">uilist</a> pmenu;</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    pmenu.<a class="code hl_variable" href="classuilist.html#a53ff5990a6abb4e7da837db31afea4b8">title</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Select door to toggle&quot;</span> );</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : door_motors ) {</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> p = vp.part_index();</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>        <span class="keywordflow">if</span>( vp.part().is_unavailable() ) {</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>        }</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>        <span class="keyword">const</span> std::array&lt;int, 2&gt; <a class="code hl_namespace" href="namespacedoors.html">doors</a> = { { <a class="code hl_function" href="classvehicle.html#aa3c434ad827415575b465480af310487">next_part_to_open</a>( p ), <a class="code hl_function" href="classvehicle.html#ac026aecb053a772b6d5902fe180166c5">next_part_to_close</a>( p ) } };</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> door : <a class="code hl_namespace" href="namespacedoors.html">doors</a> ) {</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>            <span class="keywordflow">if</span>( door == -1 ) {</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>            }</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span> </div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>            <span class="keywordtype">int</span> val = doors_with_motors.size();</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>            doors_with_motors.push_back( door );</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>            <a class="code hl_variable" href="namespaceanonymous__namespace_02overmap__location_8cpp_03.html#a1746287579ae93eaa7db10693e28de66">locations</a>.push_back( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( p ) );</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>            <span class="keyword">const</span> <span class="keywordtype">char</span> *actname = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[door].open ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Close&quot;</span> ) : <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Open&quot;</span> );</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>            pmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( val, <span class="keyword">true</span>, <a class="code hl_variable" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, <span class="stringliteral">&quot;%s %s&quot;</span>, actname, <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ door ].<a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>() );</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>        }</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>    }</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span> </div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>    pmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( doors_with_motors.size() + <a class="code hl_enumvalue" href="vehicle__use_8cpp.html#a8d872f8d0407d4d574214d96d44b3a17a52d9b1a92da786ed4fa44841dc41ad3f">OPENCURTAINS</a>, <span class="keyword">true</span>, <a class="code hl_variable" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>,</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>                    <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Open all curtains&quot;</span> ) );</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>    pmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( doors_with_motors.size() + <a class="code hl_enumvalue" href="vehicle__use_8cpp.html#a8d872f8d0407d4d574214d96d44b3a17a44139436fa460736a86813f9101f0592">OPENBOTH</a>, <span class="keyword">true</span>, <a class="code hl_variable" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>,</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>                    <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Open all curtains and doors&quot;</span> ) );</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>    pmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( doors_with_motors.size() + <a class="code hl_enumvalue" href="vehicle__use_8cpp.html#a8d872f8d0407d4d574214d96d44b3a17a02f444baab5e97f2ea1ae5e41838a21f">CLOSEDOORS</a>, <span class="keyword">true</span>, <a class="code hl_variable" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>,</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>                    <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Close all doors&quot;</span> ) );</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>    pmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( doors_with_motors.size() + <a class="code hl_enumvalue" href="vehicle__use_8cpp.html#a8d872f8d0407d4d574214d96d44b3a17a3239621b9e0e2e6830d6f8651784d7f5">CLOSEBOTH</a>, <span class="keyword">true</span>, <a class="code hl_variable" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>,</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>                    <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Close all curtains and doors&quot;</span> ) );</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span> </div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>    <a class="code hl_class" href="classpointmenu__cb.html">pointmenu_cb</a> callback( <a class="code hl_variable" href="namespaceanonymous__namespace_02overmap__location_8cpp_03.html#a1746287579ae93eaa7db10693e28de66">locations</a> );</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>    pmenu.<a class="code hl_variable" href="classuilist.html#ad4f5806d1d8ab3de3af8e3285faf47d6">callback</a> = &amp;callback;</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>    <span class="comment">// Move the menu so that we can see our vehicle</span></div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>    pmenu.<a class="code hl_variable" href="classuilist.html#ad9e47c1efe3c9fb954ceaeb5c65791fe">w_y_setup</a> = 0;</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>    pmenu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span> </div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>    <span class="keywordflow">if</span>( pmenu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &gt;= 0 ) {</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>        <span class="keywordflow">if</span>( pmenu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( doors_with_motors.size() ) ) {</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>            <span class="keywordtype">int</span> <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> = doors_with_motors[pmenu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>];</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>            <a class="code hl_function" href="classvehicle.html#a190ccc33782a28e26089122eec15f767">open_or_close</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, !( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].<a class="code hl_function" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">open</a> ) );</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( pmenu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &lt; ( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( doors_with_motors.size() ) + <a class="code hl_enumvalue" href="vehicle__use_8cpp.html#a8d872f8d0407d4d574214d96d44b3a17ae4842754cb17e5234637e3a85a7f3d90">CANCEL</a> ) ) {</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>            <span class="keywordtype">int</span> option = pmenu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> - <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( doors_with_motors.size() );</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>            <span class="keywordtype">bool</span> <a class="code hl_function" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">open</a> = option == <a class="code hl_enumvalue" href="vehicle__use_8cpp.html#a8d872f8d0407d4d574214d96d44b3a17a44139436fa460736a86813f9101f0592">OPENBOTH</a> || option == <a class="code hl_enumvalue" href="vehicle__use_8cpp.html#a8d872f8d0407d4d574214d96d44b3a17a52d9b1a92da786ed4fa44841dc41ad3f">OPENCURTAINS</a>;</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : door_motors ) {</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>                <span class="keyword">const</span> <span class="keywordtype">size_t</span> motor = vp.part_index();</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>                <span class="keywordtype">int</span> next_part = -1;</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">open</a> ) {</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>                    <span class="keywordtype">int</span> <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> = <a class="code hl_function" href="classvehicle.html#aa3c434ad827415575b465480af310487">next_part_to_open</a>( motor );</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>                    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> != -1 ) {</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>                        <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, <span class="stringliteral">&quot;CURTAIN&quot;</span> ) &amp;&amp;  option == <a class="code hl_enumvalue" href="vehicle__use_8cpp.html#a8d872f8d0407d4d574214d96d44b3a17a52d9b1a92da786ed4fa44841dc41ad3f">OPENCURTAINS</a> ) {</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>                            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>                        }</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>                        <a class="code hl_function" href="classvehicle.html#a190ccc33782a28e26089122eec15f767">open_or_close</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, <a class="code hl_function" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">open</a> );</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>                        <span class="keywordflow">if</span>( option == <a class="code hl_enumvalue" href="vehicle__use_8cpp.html#a8d872f8d0407d4d574214d96d44b3a17a44139436fa460736a86813f9101f0592">OPENBOTH</a> ) {</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>                            next_part = <a class="code hl_function" href="classvehicle.html#aa3c434ad827415575b465480af310487">next_part_to_open</a>( motor );</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>                        }</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>                        <span class="keywordflow">if</span>( next_part != -1 ) {</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>                            <a class="code hl_function" href="classvehicle.html#a190ccc33782a28e26089122eec15f767">open_or_close</a>( next_part, <a class="code hl_function" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">open</a> );</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>                        }</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>                    }</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>                    <span class="keywordtype">int</span> <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> = <a class="code hl_function" href="classvehicle.html#ac026aecb053a772b6d5902fe180166c5">next_part_to_close</a>( motor );</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>                    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> != -1 ) {</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>                        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, <span class="stringliteral">&quot;CURTAIN&quot;</span> ) &amp;&amp;  option == <a class="code hl_enumvalue" href="vehicle__use_8cpp.html#a8d872f8d0407d4d574214d96d44b3a17a02f444baab5e97f2ea1ae5e41838a21f">CLOSEDOORS</a> ) {</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>                            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>                        }</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>                        <a class="code hl_function" href="classvehicle.html#a190ccc33782a28e26089122eec15f767">open_or_close</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, <a class="code hl_function" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">open</a> );</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>                        <span class="keywordflow">if</span>( option == <a class="code hl_enumvalue" href="vehicle__use_8cpp.html#a8d872f8d0407d4d574214d96d44b3a17a3239621b9e0e2e6830d6f8651784d7f5">CLOSEBOTH</a> ) {</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>                            next_part = <a class="code hl_function" href="classvehicle.html#ac026aecb053a772b6d5902fe180166c5">next_part_to_close</a>( motor );</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>                        }</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>                        <span class="keywordflow">if</span>( next_part != -1 ) {</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>                            <a class="code hl_function" href="classvehicle.html#a190ccc33782a28e26089122eec15f767">open_or_close</a>( next_part, <a class="code hl_function" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">open</a> );</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>                        }</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>                    }</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>                }</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>            }</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>        }</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>    }</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>}</div>
<div class="ttc" id="aclasspointmenu__cb_html"><div class="ttname"><a href="classpointmenu__cb.html">pointmenu_cb</a></div><div class="ttdoc">Callback for uilist that pairs menu entries with points When an entry is selected,...</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00422">ui.h:423</a></div></div>
<div class="ttc" id="aclassuilist_html"><div class="ttname"><a href="classuilist.html">uilist</a></div><div class="ttdoc">uilist: scrolling vertical list menu</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00186">ui.h:187</a></div></div>
<div class="ttc" id="aclassuilist_html_a0baa34622db6972a59d47d478bfd21d6"><div class="ttname"><a href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">uilist::ret</a></div><div class="ttdeci">int ret</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00412">ui.h:412</a></div></div>
<div class="ttc" id="aclassuilist_html_a53ff5990a6abb4e7da837db31afea4b8"><div class="ttname"><a href="classuilist.html#a53ff5990a6abb4e7da837db31afea4b8">uilist::title</a></div><div class="ttdeci">std::string title</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00319">ui.h:319</a></div></div>
<div class="ttc" id="aclassuilist_html_ad4f5806d1d8ab3de3af8e3285faf47d6"><div class="ttname"><a href="classuilist.html#ad4f5806d1d8ab3de3af8e3285faf47d6">uilist::callback</a></div><div class="ttdeci">uilist_callback * callback</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00335">ui.h:335</a></div></div>
<div class="ttc" id="aclassuilist_html_ad9e47c1efe3c9fb954ceaeb5c65791fe"><div class="ttname"><a href="classuilist.html#ad9e47c1efe3c9fb954ceaeb5c65791fe">uilist::w_y_setup</a></div><div class="ttdeci">pos_scalar w_y_setup</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00338">ui.h:338</a></div></div>
<div class="ttc" id="aclassuilist_html_af99f28334902af64487e2d0758df2ab9"><div class="ttname"><a href="classuilist.html#af99f28334902af64487e2d0758df2ab9">uilist::addentry</a></div><div class="ttdeci">void addentry(const std::string &amp;str)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l00932">ui.cpp:932</a></div></div>
<div class="ttc" id="aclassvehicle_html_a396e319b27729d4c423b3d096e657bf9"><div class="ttname"><a href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">vehicle::part_flag</a></div><div class="ttdeci">bool part_flag(int p, const std::string &amp;f) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02875">vehicle.cpp:2875</a></div></div>
<div class="ttc" id="aclassvehicle_html_a9d96053cfef6f4cb5db1b7c74c6da067"><div class="ttname"><a href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">vehicle::open</a></div><div class="ttdeci">void open(int part_index)</div><div class="ttdoc">Opens an openable part at the specified index.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01463">vehicle_use.cpp:1463</a></div></div>
<div class="ttc" id="aclassvehicle_html_aa3c434ad827415575b465480af310487"><div class="ttname"><a href="classvehicle.html#aa3c434ad827415575b465480af310487">vehicle::next_part_to_open</a></div><div class="ttdeci">int next_part_to_open(int p, bool outside=false) const</div><div class="ttdoc">Return the index of the next part to open at p's location.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02664">vehicle.cpp:2664</a></div></div>
<div class="ttc" id="aclassvehicle_html_ac026aecb053a772b6d5902fe180166c5"><div class="ttname"><a href="classvehicle.html#ac026aecb053a772b6d5902fe180166c5">vehicle::next_part_to_close</a></div><div class="ttdeci">int next_part_to_close(int p, bool outside=false) const</div><div class="ttdoc">Return the index of the next part to close at p</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02645">vehicle.cpp:2645</a></div></div>
<div class="ttc" id="agroup__UI_html_ga7604af7545244003f0a52ac87ce37979"><div class="ttname"><a href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">uilist::query</a></div><div class="ttdeci">void query(bool loop=true, int timeout=-1)</div><div class="ttdoc">Handle input and update display.</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l00828">ui.cpp:828</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02overmap__location_8cpp_03_html_a1746287579ae93eaa7db10693e28de66"><div class="ttname"><a href="namespaceanonymous__namespace_02overmap__location_8cpp_03.html#a1746287579ae93eaa7db10693e28de66">anonymous_namespace{overmap_location.cpp}::locations</a></div><div class="ttdeci">generic_factory&lt; overmap_location &gt; locations(&quot;overmap location&quot;)</div></div>
<div class="ttc" id="anamespacedoors_html"><div class="ttname"><a href="namespacedoors.html">doors</a></div><div class="ttdef"><b>Definition:</b> <a href="gates_8h_source.html#l00027">gates.h:28</a></div></div>
<div class="ttc" id="aui_8h_html_a06d5f3667ed71fa40939c4e7367e30ce"><div class="ttname"><a href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a></div><div class="ttdeci">const int MENU_AUTOASSIGN</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00031">ui.h:31</a></div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a8d872f8d0407d4d574214d96d44b3a17a02f444baab5e97f2ea1ae5e41838a21f"><div class="ttname"><a href="vehicle__use_8cpp.html#a8d872f8d0407d4d574214d96d44b3a17a02f444baab5e97f2ea1ae5e41838a21f">CLOSEDOORS</a></div><div class="ttdeci">@ CLOSEDOORS</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00089">vehicle_use.cpp:89</a></div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a8d872f8d0407d4d574214d96d44b3a17a3239621b9e0e2e6830d6f8651784d7f5"><div class="ttname"><a href="vehicle__use_8cpp.html#a8d872f8d0407d4d574214d96d44b3a17a3239621b9e0e2e6830d6f8651784d7f5">CLOSEBOTH</a></div><div class="ttdeci">@ CLOSEBOTH</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00090">vehicle_use.cpp:90</a></div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a8d872f8d0407d4d574214d96d44b3a17a44139436fa460736a86813f9101f0592"><div class="ttname"><a href="vehicle__use_8cpp.html#a8d872f8d0407d4d574214d96d44b3a17a44139436fa460736a86813f9101f0592">OPENBOTH</a></div><div class="ttdeci">@ OPENBOTH</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00088">vehicle_use.cpp:88</a></div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a8d872f8d0407d4d574214d96d44b3a17a52d9b1a92da786ed4fa44841dc41ad3f"><div class="ttname"><a href="vehicle__use_8cpp.html#a8d872f8d0407d4d574214d96d44b3a17a52d9b1a92da786ed4fa44841dc41ad3f">OPENCURTAINS</a></div><div class="ttdeci">@ OPENCURTAINS</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00087">vehicle_use.cpp:87</a></div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a8d872f8d0407d4d574214d96d44b3a17ae4842754cb17e5234637e3a85a7f3d90"><div class="ttname"><a href="vehicle__use_8cpp.html#a8d872f8d0407d4d574214d96d44b3a17ae4842754cb17e5234637e3a85a7f3d90">CANCEL</a></div><div class="ttdeci">@ CANCEL</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00092">vehicle_use.cpp:91</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="ui_8cpp_source.html#l00932">uilist::addentry()</a>, <a class="el" href="ui_8h_source.html#l00335">uilist::callback</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00091">CANCEL</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00090">CLOSEBOTH</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00089">CLOSEDOORS</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="vehicle_8cpp_source.html#l02678">get_avail_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="namespaceanonymous__namespace_02overmap__location_8cpp_03.html#a1746287579ae93eaa7db10693e28de66">anonymous_namespace{overmap_location.cpp}::locations</a>, <a class="el" href="ui_8h_source.html#l00031">MENU_AUTOASSIGN</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="vehicle_8cpp_source.html#l02645">next_part_to_close()</a>, <a class="el" href="vehicle_8cpp_source.html#l02664">next_part_to_open()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01463">open()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01532">open_or_close()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00088">OPENBOTH</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00087">OPENCURTAINS</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8cpp_source.html#l02875">part_flag()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="ui_8cpp_source.html#l00828">uilist::query()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="ui_8h_source.html#l00319">uilist::title</a>, and <a class="el" href="ui_8h_source.html#l00338">uilist::w_y_setup</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00266">set_electronics_menu_options()</a>.</p>

</div>
</div>
<a id="a905234356e91951db1fe65d212a0d89d" name="a905234356e91951db1fe65d212a0d89d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a905234356e91951db1fe65d212a0d89d">&#9670;&nbsp;</a></span>control_electronics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::control_electronics </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l00344">344</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>{</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>    <span class="comment">// exit early if you can&#39;t control the vehicle</span></div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#a961aba2c257491888731b7806a103d1a">interact_vehicle_locked</a>() ) {</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>    }</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span> </div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>    <span class="keywordtype">bool</span> valid_option = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>    <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>        std::vector&lt;uilist_entry&gt; <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>;</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>        std::vector&lt;std::function&lt;void()&gt;&gt; actions;</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span> </div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>        <a class="code hl_function" href="classvehicle.html#a21939ab01fc986741bf90546bc4b8044">set_electronics_menu_options</a>( <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>, actions );</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span> </div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>        <a class="code hl_class" href="classuilist.html">uilist</a> menu;</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>        menu.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Electronics controls&quot;</span> );</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>        menu.<a class="code hl_variable" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a> = <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>;</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>        menu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>        valid_option = menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &gt;= 0 &amp;&amp; <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) &lt; actions.size();</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>        <span class="keywordflow">if</span>( valid_option ) {</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>            actions[menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>]();</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>        }</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>    } <span class="keywordflow">while</span>( valid_option );</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>}</div>
<div class="ttc" id="aclassuilist_html_af59dd3fdde04746dbc5cb52b355577ce"><div class="ttname"><a href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">uilist::text</a></div><div class="ttdeci">std::string text</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00320">ui.h:320</a></div></div>
<div class="ttc" id="aclassuilist_html_af5fc2972d43a795c49a632dbcf58132b"><div class="ttname"><a href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">uilist::entries</a></div><div class="ttdeci">std::vector&lt; uilist_entry &gt; entries</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00323">ui.h:323</a></div></div>
<div class="ttc" id="aclassvehicle_html_a21939ab01fc986741bf90546bc4b8044"><div class="ttname"><a href="classvehicle.html#a21939ab01fc986741bf90546bc4b8044">vehicle::set_electronics_menu_options</a></div><div class="ttdeci">void set_electronics_menu_options(std::vector&lt; uilist_entry &gt; &amp;options, std::vector&lt; std::function&lt; void()&gt; &gt; &amp;actions)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00266">vehicle_use.cpp:266</a></div></div>
<div class="ttc" id="aclassvehicle_html_a961aba2c257491888731b7806a103d1a"><div class="ttname"><a href="classvehicle.html#a961aba2c257491888731b7806a103d1a">vehicle::interact_vehicle_locked</a></div><div class="ttdeci">bool interact_vehicle_locked()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00454">vehicle_use.cpp:454</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="ui_8h_source.html#l00323">uilist::entries</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00454">interact_vehicle_locked()</a>, <a class="el" href="path__info_8cpp_source.html#l00238">PATH_INFO::options()</a>, <a class="el" href="ui_8cpp_source.html#l00828">uilist::query()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00266">set_electronics_menu_options()</a>, and <a class="el" href="ui_8h_source.html#l00320">uilist::text</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="af03022f10e08674024f2fb664624ca54" name="af03022f10e08674024f2fb664624ca54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af03022f10e08674024f2fb664624ca54">&#9670;&nbsp;</a></span>control_engines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::control_engines </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l00369">369</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>{</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>    <span class="keywordtype">int</span> e_toggle = 0;</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>    <span class="keywordtype">bool</span> dirty = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>    <span class="comment">//count active engines</span></div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>    <span class="keywordtype">int</span> fuel_count = 0;</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> e : <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a> ) {</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>        fuel_count += <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( e ).<a class="code hl_function" href="classvpart__info.html#a7f384f56a1cde378ede268a90a095a21">engine_fuel_opts</a>().size();</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>    }</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span> </div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>    <span class="keyword">const</span> <span class="keyword">auto</span> adjust_engine = [<span class="keyword">this</span>]( <span class="keywordtype">int</span> e_toggle ) {</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>        <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> e : <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a> ) {</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> &amp;fuel : <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( e ).<a class="code hl_function" href="classvpart__info.html#a7f384f56a1cde378ede268a90a095a21">engine_fuel_opts</a>() ) {</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>                <span class="keywordflow">if</span>( i == e_toggle ) {</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>                    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ e ].fuel_current() == fuel ) {</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>                        <a class="code hl_function" href="classvehicle.html#a94701a6021928fbf7ba68e2ba4ad7cb8">toggle_specific_part</a>( e, !<a class="code hl_function" href="classvehicle.html#a625ad56bb7c71b7305ccbdb411d650db">is_part_on</a>( e ) );</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>                        <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ e ].fuel_set( fuel );</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>                    }</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>                }</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>                i++;</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>            }</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>        }</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>    };</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span> </div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>    <span class="comment">//show menu until user finishes</span></div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>    <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>        e_toggle = <a class="code hl_function" href="classvehicle.html#a17aa6419424492de3019d606da710d29">select_engine</a>();</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>        <span class="keywordflow">if</span>( e_toggle &lt; 0 || e_toggle &gt;= fuel_count ) {</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>        }</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>        dirty = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>        adjust_engine( e_toggle );</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>    } <span class="keywordflow">while</span>( e_toggle &lt; fuel_count );</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span> </div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>    <span class="keywordflow">if</span>( !dirty ) {</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>    }</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span> </div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>    <span class="keywordtype">bool</span> engines_were_on = <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a>;</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> e : <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a> ) {</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>        <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> |= <a class="code hl_function" href="classvehicle.html#a625ad56bb7c71b7305ccbdb411d650db">is_part_on</a>( e );</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>    }</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span> </div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>    <span class="comment">// if current velocity greater than new configuration safe speed</span></div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>    <span class="comment">// drop down cruise velocity.</span></div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>    <span class="keywordtype">int</span> safe_vel = <a class="code hl_function" href="classvehicle.html#ad38e05507056b3b3da5a5a5e482adba4">safe_velocity</a>();</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &gt; safe_vel ) {</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>        <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> = safe_vel;</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>    }</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span> </div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>    <span class="keywordflow">if</span>( engines_were_on &amp;&amp; !<a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> ) {</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You turn off the %s&#39;s engines to change their configurations.&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.controlling_vehicle ) {</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You change the %s&#39;s engine configuration.&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>    }</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span> </div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> ) {</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>        <a class="code hl_function" href="classvehicle.html#a7183b4a2eac4da678e316f5ca1d46e08">start_engines</a>();</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>    }</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>}</div>
<div class="ttc" id="aclassvehicle_html_a17aa6419424492de3019d606da710d29"><div class="ttname"><a href="classvehicle.html#a17aa6419424492de3019d606da710d29">vehicle::select_engine</a></div><div class="ttdeci">int select_engine()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00433">vehicle_use.cpp:433</a></div></div>
<div class="ttc" id="aclassvehicle_html_a625ad56bb7c71b7305ccbdb411d650db"><div class="ttname"><a href="classvehicle.html#a625ad56bb7c71b7305ccbdb411d650db">vehicle::is_part_on</a></div><div class="ttdeci">bool is_part_on(int p) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01092">vehicle.cpp:1092</a></div></div>
<div class="ttc" id="aclassvehicle_html_a7183b4a2eac4da678e316f5ca1d46e08"><div class="ttname"><a href="classvehicle.html#a7183b4a2eac4da678e316f5ca1d46e08">vehicle::start_engines</a></div><div class="ttdeci">void start_engines(bool take_control=false, bool autodrive=false)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01055">vehicle_use.cpp:1055</a></div></div>
<div class="ttc" id="aclassvehicle_html_a94701a6021928fbf7ba68e2ba4ad7cb8"><div class="ttname"><a href="classvehicle.html#a94701a6021928fbf7ba68e2ba4ad7cb8">vehicle::toggle_specific_part</a></div><div class="ttdeci">void toggle_specific_part(int p, bool on)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01022">vehicle.cpp:1022</a></div></div>
<div class="ttc" id="aclassvehicle_html_ad38e05507056b3b3da5a5a5e482adba4"><div class="ttname"><a href="classvehicle.html#ad38e05507056b3b3da5a5a5e482adba4">vehicle::safe_velocity</a></div><div class="ttdeci">int safe_velocity(bool fueled=true) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03593">vehicle.cpp:3593</a></div></div>
<div class="ttc" id="aclassvehicle_html_af5c4cd455d31d1a9377ddad223cafe44"><div class="ttname"><a href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">vehicle::cruise_velocity</a></div><div class="ttdeci">int cruise_velocity</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01863">vehicle.h:1863</a></div></div>
<div class="ttc" id="aclassvpart__info_html_a7f384f56a1cde378ede268a90a095a21"><div class="ttname"><a href="classvpart__info.html#a7f384f56a1cde378ede268a90a095a21">vpart_info::engine_fuel_opts</a></div><div class="ttdeci">std::vector&lt; itype_id &gt; engine_fuel_opts() const</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8cpp_source.html#l00877">veh_type.cpp:877</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="vehicle_8h_source.html#l01863">cruise_velocity</a>, <a class="el" href="veh__type_8cpp_source.html#l00877">vpart_info::engine_fuel_opts()</a>, <a class="el" href="vehicle_8h_source.html#l01930">engine_on</a>, <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l01092">is_part_on()</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8cpp_source.html#l03593">safe_velocity()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00433">select_engine()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01055">start_engines()</a>, <a class="el" href="vehicle_8cpp_source.html#l01022">toggle_specific_part()</a>, and <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="ad45ae53f6326f7fde4d8e59848470457" name="ad45ae53f6326f7fde4d8e59848470457"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad45ae53f6326f7fde4d8e59848470457">&#9670;&nbsp;</a></span>coord_translate() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpoint.html">point</a> vehicle::coord_translate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02988">2988</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02989" name="l02989"></a><span class="lineno"> 2989</span>{</div>
<div class="line"><a id="l02990" name="l02990"></a><span class="lineno"> 2990</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> q;</div>
<div class="line"><a id="l02991" name="l02991"></a><span class="lineno"> 2991</span>    <a class="code hl_function" href="classvehicle.html#ad45ae53f6326f7fde4d8e59848470457">coord_translate</a>( <a class="code hl_variable" href="classvehicle.html#a709da7b758c18d51b79311eea6eaca59">pivot_rotation</a>[0], <a class="code hl_variable" href="classvehicle.html#afd4e8e8471b17450205d827dee8a41a5">pivot_anchor</a>[0], p, q );</div>
<div class="line"><a id="l02992" name="l02992"></a><span class="lineno"> 2992</span>    <span class="keywordflow">return</span> q.<a class="code hl_function" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>();</div>
<div class="line"><a id="l02993" name="l02993"></a><span class="lineno"> 2993</span>}</div>
<div class="ttc" id="aclassvehicle_html_ad45ae53f6326f7fde4d8e59848470457"><div class="ttname"><a href="classvehicle.html#ad45ae53f6326f7fde4d8e59848470457">vehicle::coord_translate</a></div><div class="ttdeci">point coord_translate(const point &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02988">vehicle.cpp:2988</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l02988">coord_translate()</a>, <a class="el" href="vehicle_8h_source.html#l01889">pivot_anchor</a>, <a class="el" href="vehicle_8h_source.html#l01883">pivot_rotation</a>, and <a class="el" href="point_8h_source.html#l00220">tripoint::xy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02986">veh_interact::complete_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l02988">coord_translate()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02239">veh_interact::display_veh()</a>, <a class="el" href="vehicle_8cpp_source.html#l00769">immediate_path()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00454">interact_vehicle_locked()</a>, <a class="el" href="vehicle_8cpp_source.html#l03017">mount_to_tripoint()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02122">veh_interact::move_cursor()</a>, <a class="el" href="vehicle_8cpp_source.html#l03164">pivot_displacement()</a>, <a class="el" href="vehicle_8cpp_source.html#l03024">precalc_mounts()</a>, <a class="el" href="veh__interact_8cpp_source.html#l00111">veh_interact::serialize_activity()</a>, <a class="el" href="vehicle_8cpp_source.html#l05114">slow_leak()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03623">spew_field()</a>.</p>

</div>
</div>
<a id="a86540b87f8c877b043c1a51f62c07075" name="a86540b87f8c877b043c1a51f62c07075"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86540b87f8c877b043c1a51f62c07075">&#9670;&nbsp;</a></span>coord_translate() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::coord_translate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtileray.html">tileray</a>&#160;</td>
          <td class="paramname"><em>tdir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>pivot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>q</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03004">3004</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03005" name="l03005"></a><span class="lineno"> 3005</span>{</div>
<div class="line"><a id="l03006" name="l03006"></a><span class="lineno"> 3006</span>    tdir.<a class="code hl_function" href="classtileray.html#ab861edc40fc347de814326140d8cc10a">clear_advance</a>();</div>
<div class="line"><a id="l03007" name="l03007"></a><span class="lineno"> 3007</span>    tdir.<a class="code hl_function" href="classtileray.html#a283722bbdbde0af59bbda1a26adc5b88">advance</a>( p.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> - pivot.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> );</div>
<div class="line"><a id="l03008" name="l03008"></a><span class="lineno"> 3008</span>    q.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> = tdir.<a class="code hl_function" href="classtileray.html#aefd7fd88fdbfecf5731bbff553a7aab8">dx</a>() + tdir.<a class="code hl_function" href="classtileray.html#a742ab385f1a8e40d040d03fe24575613">ortho_dx</a>( p.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> - pivot.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> );</div>
<div class="line"><a id="l03009" name="l03009"></a><span class="lineno"> 3009</span>    q.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> = tdir.<a class="code hl_function" href="classtileray.html#a27e3f200a89812a3d2fbc2e0e5710722">dy</a>() + tdir.<a class="code hl_function" href="classtileray.html#a7a068ebe22ae57915184905212e27988">ortho_dy</a>( p.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> - pivot.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> );</div>
<div class="line"><a id="l03010" name="l03010"></a><span class="lineno"> 3010</span>}</div>
<div class="ttc" id="aclasstileray_html_a742ab385f1a8e40d040d03fe24575613"><div class="ttname"><a href="classtileray.html#a742ab385f1a8e40d040d03fe24575613">tileray::ortho_dx</a></div><div class="ttdeci">int ortho_dx(int od) const</div><div class="ttdef"><b>Definition:</b> <a href="tileray_8cpp_source.html#l00177">tileray.cpp:177</a></div></div>
<div class="ttc" id="aclasstileray_html_a7a068ebe22ae57915184905212e27988"><div class="ttname"><a href="classtileray.html#a7a068ebe22ae57915184905212e27988">tileray::ortho_dy</a></div><div class="ttdeci">int ortho_dy(int od) const</div><div class="ttdef"><b>Definition:</b> <a href="tileray_8cpp_source.html#l00183">tileray.cpp:183</a></div></div>
<div class="ttc" id="aclasstileray_html_ab861edc40fc347de814326140d8cc10a"><div class="ttname"><a href="classtileray.html#ab861edc40fc347de814326140d8cc10a">tileray::clear_advance</a></div><div class="ttdeci">void clear_advance()</div><div class="ttdef"><b>Definition:</b> <a href="tileray_8cpp_source.html#l00057">tileray.cpp:57</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tileray_8cpp_source.html#l00194">tileray::advance()</a>, <a class="el" href="tileray_8cpp_source.html#l00057">tileray::clear_advance()</a>, <a class="el" href="tileray_8cpp_source.html#l00064">tileray::dx()</a>, <a class="el" href="tileray_8cpp_source.html#l00069">tileray::dy()</a>, <a class="el" href="tileray_8cpp_source.html#l00177">tileray::ortho_dx()</a>, <a class="el" href="tileray_8cpp_source.html#l00183">tileray::ortho_dy()</a>, <a class="el" href="point_8h_source.html#l00038">point::x</a>, <a class="el" href="point_8h_source.html#l00150">tripoint::x</a>, <a class="el" href="point_8h_source.html#l00039">point::y</a>, and <a class="el" href="point_8h_source.html#l00151">tripoint::y</a>.</p>

</div>
</div>
<a id="a2bb09b62768a71d8ef20b30f7958fa63" name="a2bb09b62768a71d8ef20b30f7958fa63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bb09b62768a71d8ef20b30f7958fa63">&#9670;&nbsp;</a></span>coord_translate() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::coord_translate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">units::angle</a>&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>pivot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>q</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02995">2995</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02997" name="l02997"></a><span class="lineno"> 2997</span>{</div>
<div class="line"><a id="l02998" name="l02998"></a><span class="lineno"> 2998</span>    <a class="code hl_class" href="classtileray.html">tileray</a> tdir( dir );</div>
<div class="line"><a id="l02999" name="l02999"></a><span class="lineno"> 2999</span>    tdir.advance( p.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> - pivot.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> );</div>
<div class="line"><a id="l03000" name="l03000"></a><span class="lineno"> 3000</span>    q.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> = tdir.dx() + tdir.ortho_dx( p.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> - pivot.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> );</div>
<div class="line"><a id="l03001" name="l03001"></a><span class="lineno"> 3001</span>    q.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> = tdir.dy() + tdir.ortho_dy( p.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> - pivot.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> );</div>
<div class="line"><a id="l03002" name="l03002"></a><span class="lineno"> 3002</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tileray_8cpp_source.html#l00194">tileray::advance()</a>, <a class="el" href="tileray_8cpp_source.html#l00064">tileray::dx()</a>, <a class="el" href="tileray_8cpp_source.html#l00069">tileray::dy()</a>, <a class="el" href="tileray_8cpp_source.html#l00177">tileray::ortho_dx()</a>, <a class="el" href="tileray_8cpp_source.html#l00183">tileray::ortho_dy()</a>, <a class="el" href="point_8h_source.html#l00038">point::x</a>, <a class="el" href="point_8h_source.html#l00150">tripoint::x</a>, <a class="el" href="point_8h_source.html#l00039">point::y</a>, and <a class="el" href="point_8h_source.html#l00151">tripoint::y</a>.</p>

</div>
</div>
<a id="a2adff790fcaea181f096ebaa213e698c" name="a2adff790fcaea181f096ebaa213e698c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2adff790fcaea181f096ebaa213e698c">&#9670;&nbsp;</a></span>cpart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structvehicle__part.html">vehicle_part</a> &amp; vehicle::cpart </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>part_num</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06897">6897</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06898" name="l06898"></a><span class="lineno"> 6898</span>{</div>
<div class="line"><a id="l06899" name="l06899"></a><span class="lineno"> 6899</span>    <span class="keywordflow">return</span> <span class="keyword">const_cast&lt;</span><a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;<span class="keyword">&gt;</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[part_num] );</div>
<div class="line"><a id="l06900" name="l06900"></a><span class="lineno"> 6900</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="visitable_8cpp_source.html#l00147">has_quality_from_vpart()</a>, <a class="el" href="visitable_8cpp_source.html#l00255">max_quality_from_vpart()</a>, <a class="el" href="pathfinding_8cpp_source.html#l00194">map::route()</a>, <a class="el" href="vehicle_8cpp_source.html#l04802">distribution_graph::traverse()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l01501">map::vehicle_wheel_traction()</a>.</p>

</div>
</div>
<a id="a1a59e5df3ef43114973413525dcafaa9" name="a1a59e5df3ef43114973413525dcafaa9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a59e5df3ef43114973413525dcafaa9">&#9670;&nbsp;</a></span>crash_terrain_around()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::crash_terrain_around </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01230">1230</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span>{</div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a73db9a09464720b32da8e3f214475a8e">total_power_w</a>() &lt;= 0 ) {</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>    }</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a791413b7697a0ef434df0fe73d85b9fe">get_enabled_parts</a>( <span class="stringliteral">&quot;CRASH_TERRAIN_AROUND&quot;</span> ) ) {</div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>        <a class="code hl_struct" href="structtripoint.html">tripoint</a> crush_target( 0, 0, -<a class="code hl_variable" href="game__constants_8h.html#a3b81841aab42975add2ee3525f48058a">OVERMAP_LAYERS</a> );</div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> start_pos = vp.pos();</div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structtransform__terrain__data.html">transform_terrain_data</a> &amp;ttd = vp.info().transform_terrain;</div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span>        <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code hl_variable" href="point_8h.html#a531b7c882d6066241b7f93268af3e68b">eight_horizontal_neighbors</a>.size() &amp;&amp;</div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>             !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.inbounds_z( crush_target.z ); i++ ) {</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>            <a class="code hl_struct" href="structtripoint.html">tripoint</a> cur_pos = start_pos + <a class="code hl_variable" href="point_8h.html#a531b7c882d6066241b7f93268af3e68b">eight_horizontal_neighbors</a>.at( i );</div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span>            <span class="keywordtype">bool</span> busy_pos = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp_tmp : <a class="code hl_function" href="classvehicle.html#a397b40aa92dd1fd09ee592aa279bc656">get_all_parts</a>() ) {</div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>                busy_pos |= vp_tmp.pos() == cur_pos;</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>            }</div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;flag : ttd.<a class="code hl_variable" href="structtransform__terrain__data.html#af11b8f4a0203a05436441a252de3d8d1">pre_flags</a> ) {</div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>                <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.has_flag( flag, cur_pos ) &amp;&amp; !busy_pos ) {</div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>                    crush_target = cur_pos;</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>                }</div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>            }</div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span>        }</div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span>        <span class="comment">//target chosen</span></div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.inbounds_z( crush_target.z ) ) {</div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span>            <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> = 0;</div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>            <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> = 0;</div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.destroy( crush_target );</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( crush_target, 500, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Clanggggg!&quot;</span> ), <span class="keyword">false</span>,</div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>                           <span class="stringliteral">&quot;smash_success&quot;</span>, <span class="stringliteral">&quot;hit_vehicle&quot;</span> );</div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>        }</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>    }</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span>}</div>
<div class="ttc" id="aclassvehicle_html_a73db9a09464720b32da8e3f214475a8e"><div class="ttname"><a href="classvehicle.html#a73db9a09464720b32da8e3f214475a8e">vehicle::total_power_w</a></div><div class="ttdeci">int total_power_w(bool fueled=true, bool safe=false) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03333">vehicle.cpp:3333</a></div></div>
<div class="ttc" id="aclassvehicle_html_a791413b7697a0ef434df0fe73d85b9fe"><div class="ttname"><a href="classvehicle.html#a791413b7697a0ef434df0fe73d85b9fe">vehicle::get_enabled_parts</a></div><div class="ttdeci">vehicle_part_with_feature_range&lt; std::string &gt; get_enabled_parts(std::string feature) const</div><div class="ttdoc">Yields a range of parts of this vehicle that each have the given feature and are enabled and availabl...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02721">vehicle.cpp:2721</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a3b81841aab42975add2ee3525f48058a"><div class="ttname"><a href="game__constants_8h.html#a3b81841aab42975add2ee3525f48058a">OVERMAP_LAYERS</a></div><div class="ttdeci">static constexpr int OVERMAP_LAYERS</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00065">game_constants.h:65</a></div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a></div><div class="ttdeci">@ combat</div></div>
<div class="ttc" id="apoint_8h_html_a531b7c882d6066241b7f93268af3e68b"><div class="ttname"><a href="point_8h.html#a531b7c882d6066241b7f93268af3e68b">eight_horizontal_neighbors</a></div><div class="ttdeci">static const std::array&lt; tripoint, 8 &gt; eight_horizontal_neighbors</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00389">point.h:389</a></div></div>
<div class="ttc" id="astructtransform__terrain__data_html"><div class="ttname"><a href="structtransform__terrain__data.html">transform_terrain_data</a></div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00123">veh_type.h:123</a></div></div>
<div class="ttc" id="astructtransform__terrain__data_html_af11b8f4a0203a05436441a252de3d8d1"><div class="ttname"><a href="structtransform__terrain__data.html#af11b8f4a0203a05436441a252de3d8d1">transform_terrain_data::pre_flags</a></div><div class="ttdeci">std::set&lt; std::string &gt; pre_flags</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00124">veh_type.h:124</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::combat</a>, <a class="el" href="vehicle_8h_source.html#l01863">cruise_velocity</a>, <a class="el" href="point_8h_source.html#l00389">eight_horizontal_neighbors</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l06882">get_all_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l02721">get_enabled_parts()</a>, <a class="el" href="game__constants_8h_source.html#l00065">OVERMAP_LAYERS</a>, <a class="el" href="veh__type_8h_source.html#l00124">transform_terrain_data::pre_flags</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, <a class="el" href="vehicle_8cpp_source.html#l03333">total_power_w()</a>, <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>, and <a class="el" href="point_8h_source.html#l00152">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05033">idle()</a>.</p>

</div>
</div>
<a id="ac9e0d3482a62d5ac5ec8e5fc83cfaa4a" name="ac9e0d3482a62d5ac5ec8e5fc83cfaa4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9e0d3482a62d5ac5ec8e5fc83cfaa4a">&#9670;&nbsp;</a></span>cruise_thrust()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::cruise_thrust </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>amount</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__move_8cpp_source.html#l00285">285</a> of file <a class="el" href="vehicle__move_8cpp_source.html">vehicle_move.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>{</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>    <span class="keywordflow">if</span>( amount == 0 ) {</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>    }</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    <span class="keywordtype">int</span> safe_vel = <a class="code hl_function" href="classvehicle.html#ad38e05507056b3b3da5a5a5e482adba4">safe_velocity</a>();</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>    <span class="keywordtype">int</span> max_vel = <a class="code hl_variable" href="classvehicle.html#ab0ffd12faf770950ee7d2493ffaf9bd0">autopilot_on</a> ? <a class="code hl_function" href="classvehicle.html#ad38e05507056b3b3da5a5a5e482adba4">safe_velocity</a>() : <a class="code hl_function" href="classvehicle.html#a8ae7b8e43449ee574a6fd266f4773892">max_velocity</a>();</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>    <span class="keywordtype">int</span> max_rev_vel = <a class="code hl_function" href="classvehicle.html#ad845fa8ba69c4b41cf6a0fc35db7f01d">max_reverse_velocity</a>();</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span> </div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>    <span class="comment">//if the safe velocity is between the cruise velocity and its next value, set to safe velocity</span></div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>    <span class="keywordflow">if</span>( ( <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> &lt; safe_vel &amp;&amp; safe_vel &lt; ( <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> + amount ) ) ||</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>        ( <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> &gt; safe_vel &amp;&amp; safe_vel &gt; ( <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> + amount ) ) ) {</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>        <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> = safe_vel;</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>        <span class="keywordflow">if</span>( amount &lt; 0 &amp;&amp; ( <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> == safe_vel || <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> == max_vel ) ) {</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>            <span class="comment">// If coming down from safe_velocity or max_velocity decrease by one so</span></div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>            <span class="comment">// the rounding below will drop velocity to a multiple of amount.</span></div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>            <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> += -1;</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( amount &gt; 0 &amp;&amp; <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> == max_rev_vel ) {</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>            <span class="comment">// If increasing from max_rev_vel, do the opposite.</span></div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>            <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> += 1;</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>            <span class="comment">// Otherwise just add the amount.</span></div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>            <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> += amount;</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>        }</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>        <span class="comment">// Integer round to lowest multiple of amount.</span></div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>        <span class="comment">// The result is always equal to the original or closer to zero,</span></div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>        <span class="comment">// even if negative</span></div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>        <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> = ( <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> / std::abs( amount ) ) * std::abs( amount );</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>    }</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>    <span class="comment">// Can&#39;t have a cruise speed faster than max speed</span></div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>    <span class="comment">// or reverse speed faster than max reverse speed.</span></div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> &gt; max_vel ) {</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>        <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> = max_vel;</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> &lt; max_rev_vel ) {</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>        <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> = max_rev_vel;</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>    }</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>}</div>
<div class="ttc" id="aclassvehicle_html_a8ae7b8e43449ee574a6fd266f4773892"><div class="ttname"><a href="classvehicle.html#a8ae7b8e43449ee574a6fd266f4773892">vehicle::max_velocity</a></div><div class="ttdeci">int max_velocity(bool fueled=true) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03543">vehicle.cpp:3543</a></div></div>
<div class="ttc" id="aclassvehicle_html_ab0ffd12faf770950ee7d2493ffaf9bd0"><div class="ttname"><a href="classvehicle.html#ab0ffd12faf770950ee7d2493ffaf9bd0">vehicle::autopilot_on</a></div><div class="ttdeci">bool autopilot_on</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01938">vehicle.h:1938</a></div></div>
<div class="ttc" id="aclassvehicle_html_ad845fa8ba69c4b41cf6a0fc35db7f01d"><div class="ttname"><a href="classvehicle.html#ad845fa8ba69c4b41cf6a0fc35db7f01d">vehicle::max_reverse_velocity</a></div><div class="ttdeci">int max_reverse_velocity(bool fueled=true) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03554">vehicle.cpp:3554</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01938">autopilot_on</a>, <a class="el" href="vehicle_8h_source.html#l01863">cruise_velocity</a>, <a class="el" href="vehicle_8cpp_source.html#l03554">max_reverse_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l03543">max_velocity()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03593">safe_velocity()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01061">pldrive()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00933">selfdrive()</a>.</p>

</div>
</div>
<a id="ad81a52a0535e57a0d7e390f6f379ae42" name="ad81a52a0535e57a0d7e390f6f379ae42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad81a52a0535e57a0d7e390f6f379ae42">&#9670;&nbsp;</a></span>current_acceleration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::current_acceleration </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fueled</em> = <code>true</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03472">3472</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03473" name="l03473"></a><span class="lineno"> 3473</span>{</div>
<div class="line"><a id="l03474" name="l03474"></a><span class="lineno"> 3474</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#ab9380d6e415bc75e80ab578d798af611">acceleration</a>( fueled, std::abs( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> ) );</div>
<div class="line"><a id="l03475" name="l03475"></a><span class="lineno"> 3475</span>}</div>
<div class="ttc" id="aclassvehicle_html_ab9380d6e415bc75e80ab578d798af611"><div class="ttname"><a href="classvehicle.html#ab9380d6e415bc75e80ab578d798af611">vehicle::acceleration</a></div><div class="ttdeci">int acceleration(bool fueled=true, int at_vel_in_vmi=-1) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03462">vehicle.cpp:3462</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l03462">acceleration()</a>, and <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>.</p>

</div>
</div>
<a id="a7d539c327a7a8cb987d637f68f918cdf" name="a7d539c327a7a8cb987d637f68f918cdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d539c327a7a8cb987d637f68f918cdf">&#9670;&nbsp;</a></span>damage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::damage </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dmg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7a">damage_type</a>&#160;</td>
          <td class="paramname"><em>type</em> = <code><a class="el" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa5f8b46c6c239266403858fa2ae90ef23">DT_BASH</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>aimed</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06173">6173</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06174" name="l06174"></a><span class="lineno"> 6174</span>{</div>
<div class="line"><a id="l06175" name="l06175"></a><span class="lineno"> 6175</span>    <span class="keywordflow">if</span>( dmg &lt; 1 ) {</div>
<div class="line"><a id="l06176" name="l06176"></a><span class="lineno"> 6176</span>        <span class="keywordflow">return</span> dmg;</div>
<div class="line"><a id="l06177" name="l06177"></a><span class="lineno"> 6177</span>    }</div>
<div class="line"><a id="l06178" name="l06178"></a><span class="lineno"> 6178</span> </div>
<div class="line"><a id="l06179" name="l06179"></a><span class="lineno"> 6179</span>    std::vector&lt;int&gt; pl = <a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].mount, <span class="keyword">true</span> );</div>
<div class="line"><a id="l06180" name="l06180"></a><span class="lineno"> 6180</span>    <span class="keywordflow">if</span>( pl.empty() ) {</div>
<div class="line"><a id="l06181" name="l06181"></a><span class="lineno"> 6181</span>        <span class="comment">// We ran out of non removed parts at this location already.</span></div>
<div class="line"><a id="l06182" name="l06182"></a><span class="lineno"> 6182</span>        <span class="keywordflow">return</span> dmg;</div>
<div class="line"><a id="l06183" name="l06183"></a><span class="lineno"> 6183</span>    }</div>
<div class="line"><a id="l06184" name="l06184"></a><span class="lineno"> 6184</span> </div>
<div class="line"><a id="l06185" name="l06185"></a><span class="lineno"> 6185</span>    <span class="keywordflow">if</span>( !aimed ) {</div>
<div class="line"><a id="l06186" name="l06186"></a><span class="lineno"> 6186</span>        <span class="keywordtype">bool</span> found_obs = <span class="keyword">false</span>;</div>
<div class="line"><a id="l06187" name="l06187"></a><span class="lineno"> 6187</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;i : pl ) {</div>
<div class="line"><a id="l06188" name="l06188"></a><span class="lineno"> 6188</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( i, <span class="stringliteral">&quot;OBSTACLE&quot;</span> ) &amp;&amp;</div>
<div class="line"><a id="l06189" name="l06189"></a><span class="lineno"> 6189</span>                ( !<a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( i, <span class="stringliteral">&quot;OPENABLE&quot;</span> ) || !<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[i].<a class="code hl_function" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">open</a> ) ) {</div>
<div class="line"><a id="l06190" name="l06190"></a><span class="lineno"> 6190</span>                found_obs = <span class="keyword">true</span>;</div>
<div class="line"><a id="l06191" name="l06191"></a><span class="lineno"> 6191</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l06192" name="l06192"></a><span class="lineno"> 6192</span>            }</div>
<div class="line"><a id="l06193" name="l06193"></a><span class="lineno"> 6193</span>        }</div>
<div class="line"><a id="l06194" name="l06194"></a><span class="lineno"> 6194</span> </div>
<div class="line"><a id="l06195" name="l06195"></a><span class="lineno"> 6195</span>        <span class="keywordflow">if</span>( !found_obs ) { <span class="comment">// not aimed at this tile and no obstacle here -- fly through</span></div>
<div class="line"><a id="l06196" name="l06196"></a><span class="lineno"> 6196</span>            <span class="keywordflow">return</span> dmg;</div>
<div class="line"><a id="l06197" name="l06197"></a><span class="lineno"> 6197</span>        }</div>
<div class="line"><a id="l06198" name="l06198"></a><span class="lineno"> 6198</span>    }</div>
<div class="line"><a id="l06199" name="l06199"></a><span class="lineno"> 6199</span> </div>
<div class="line"><a id="l06200" name="l06200"></a><span class="lineno"> 6200</span>    <span class="keywordtype">int</span> target_part = <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( p ).<a class="code hl_function" href="classvpart__info.html#af014709bbc2aceff9f6e91bd15e6d508">rotor_diameter</a>() ? p : <a class="code hl_function" href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a>( pl );</div>
<div class="line"><a id="l06201" name="l06201"></a><span class="lineno"> 6201</span> </div>
<div class="line"><a id="l06202" name="l06202"></a><span class="lineno"> 6202</span>    <span class="comment">// door motor mechanism is protected by closed doors</span></div>
<div class="line"><a id="l06203" name="l06203"></a><span class="lineno"> 6203</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( target_part, <span class="stringliteral">&quot;DOOR_MOTOR&quot;</span> ) ) {</div>
<div class="line"><a id="l06204" name="l06204"></a><span class="lineno"> 6204</span>        <span class="comment">// find the most strong openable that is not open</span></div>
<div class="line"><a id="l06205" name="l06205"></a><span class="lineno"> 6205</span>        <span class="keywordtype">int</span> strongest_door_part = -1;</div>
<div class="line"><a id="l06206" name="l06206"></a><span class="lineno"> 6206</span>        <span class="keywordtype">int</span> strongest_door_durability = INT_MIN;</div>
<div class="line"><a id="l06207" name="l06207"></a><span class="lineno"> 6207</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> : pl ) {</div>
<div class="line"><a id="l06208" name="l06208"></a><span class="lineno"> 6208</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, <span class="stringliteral">&quot;OPENABLE&quot;</span> ) &amp;&amp; !<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].<a class="code hl_function" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">open</a> ) {</div>
<div class="line"><a id="l06209" name="l06209"></a><span class="lineno"> 6209</span>                <span class="keywordtype">int</span> door_durability = <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ).<a class="code hl_variable" href="classvpart__info.html#aeb9e00627b8cb80d28fb1419e7f0928a">durability</a>;</div>
<div class="line"><a id="l06210" name="l06210"></a><span class="lineno"> 6210</span>                <span class="keywordflow">if</span>( door_durability &gt; strongest_door_durability ) {</div>
<div class="line"><a id="l06211" name="l06211"></a><span class="lineno"> 6211</span>                    strongest_door_part = <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>;</div>
<div class="line"><a id="l06212" name="l06212"></a><span class="lineno"> 6212</span>                    strongest_door_durability = door_durability;</div>
<div class="line"><a id="l06213" name="l06213"></a><span class="lineno"> 6213</span>                }</div>
<div class="line"><a id="l06214" name="l06214"></a><span class="lineno"> 6214</span>            }</div>
<div class="line"><a id="l06215" name="l06215"></a><span class="lineno"> 6215</span>        }</div>
<div class="line"><a id="l06216" name="l06216"></a><span class="lineno"> 6216</span> </div>
<div class="line"><a id="l06217" name="l06217"></a><span class="lineno"> 6217</span>        <span class="comment">// if we found a closed door, target it instead of the door_motor</span></div>
<div class="line"><a id="l06218" name="l06218"></a><span class="lineno"> 6218</span>        <span class="keywordflow">if</span>( strongest_door_part != -1 ) {</div>
<div class="line"><a id="l06219" name="l06219"></a><span class="lineno"> 6219</span>            target_part = strongest_door_part;</div>
<div class="line"><a id="l06220" name="l06220"></a><span class="lineno"> 6220</span>        }</div>
<div class="line"><a id="l06221" name="l06221"></a><span class="lineno"> 6221</span>    }</div>
<div class="line"><a id="l06222" name="l06222"></a><span class="lineno"> 6222</span> </div>
<div class="line"><a id="l06223" name="l06223"></a><span class="lineno"> 6223</span>    <span class="keywordtype">int</span> damage_dealt;</div>
<div class="line"><a id="l06224" name="l06224"></a><span class="lineno"> 6224</span> </div>
<div class="line"><a id="l06225" name="l06225"></a><span class="lineno"> 6225</span>    <span class="keywordtype">int</span> armor_part = <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( p, <span class="stringliteral">&quot;ARMOR&quot;</span>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l06226" name="l06226"></a><span class="lineno"> 6226</span>    <span class="keywordflow">if</span>( armor_part &lt; 0 ) {</div>
<div class="line"><a id="l06227" name="l06227"></a><span class="lineno"> 6227</span>        <span class="comment">// Not covered by armor -- damage part</span></div>
<div class="line"><a id="l06228" name="l06228"></a><span class="lineno"> 6228</span>        damage_dealt = <a class="code hl_function" href="classvehicle.html#ac2de625db1619f042c4a3a69d0995a6a">damage_direct</a>( target_part, dmg, <a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a> );</div>
<div class="line"><a id="l06229" name="l06229"></a><span class="lineno"> 6229</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l06230" name="l06230"></a><span class="lineno"> 6230</span>        <span class="comment">// Covered by armor -- hit both armor and part, but reduce damage by armor&#39;s reduction</span></div>
<div class="line"><a id="l06231" name="l06231"></a><span class="lineno"> 6231</span>        <span class="keywordtype">int</span> protection = <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( armor_part ).<a class="code hl_variable" href="classvpart__info.html#ac24f5df645d543b6a3e191211054bc6f">damage_reduction</a>[ <a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a> ];</div>
<div class="line"><a id="l06232" name="l06232"></a><span class="lineno"> 6232</span>        <span class="comment">// Parts on roof aren&#39;t protected</span></div>
<div class="line"><a id="l06233" name="l06233"></a><span class="lineno"> 6233</span>        <span class="keywordtype">bool</span> overhead = <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( target_part, <span class="stringliteral">&quot;ROOF&quot;</span> ) || <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( target_part ).<a class="code hl_variable" href="classvpart__info.html#a03cfe554b18beb9c32d9a86872a1748e">location</a> == <span class="stringliteral">&quot;on_roof&quot;</span>;</div>
<div class="line"><a id="l06234" name="l06234"></a><span class="lineno"> 6234</span>        <span class="comment">// Calling damage_direct may remove the damaged part</span></div>
<div class="line"><a id="l06235" name="l06235"></a><span class="lineno"> 6235</span>        <span class="comment">// completely, therefore the other index (target_part) becomes</span></div>
<div class="line"><a id="l06236" name="l06236"></a><span class="lineno"> 6236</span>        <span class="comment">// wrong if target_part &gt; armor_part.</span></div>
<div class="line"><a id="l06237" name="l06237"></a><span class="lineno"> 6237</span>        <span class="comment">// Damaging the part with the higher index first is save,</span></div>
<div class="line"><a id="l06238" name="l06238"></a><span class="lineno"> 6238</span>        <span class="comment">// as removing a part only changes indices after the</span></div>
<div class="line"><a id="l06239" name="l06239"></a><span class="lineno"> 6239</span>        <span class="comment">// removed part.</span></div>
<div class="line"><a id="l06240" name="l06240"></a><span class="lineno"> 6240</span>        <span class="keywordflow">if</span>( armor_part &lt; target_part ) {</div>
<div class="line"><a id="l06241" name="l06241"></a><span class="lineno"> 6241</span>            <a class="code hl_function" href="classvehicle.html#ac2de625db1619f042c4a3a69d0995a6a">damage_direct</a>( target_part, overhead ? dmg : dmg - protection, <a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a> );</div>
<div class="line"><a id="l06242" name="l06242"></a><span class="lineno"> 6242</span>            damage_dealt = <a class="code hl_function" href="classvehicle.html#ac2de625db1619f042c4a3a69d0995a6a">damage_direct</a>( armor_part, dmg, <a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a> );</div>
<div class="line"><a id="l06243" name="l06243"></a><span class="lineno"> 6243</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l06244" name="l06244"></a><span class="lineno"> 6244</span>            damage_dealt = <a class="code hl_function" href="classvehicle.html#ac2de625db1619f042c4a3a69d0995a6a">damage_direct</a>( armor_part, dmg, <a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a> );</div>
<div class="line"><a id="l06245" name="l06245"></a><span class="lineno"> 6245</span>            <a class="code hl_function" href="classvehicle.html#ac2de625db1619f042c4a3a69d0995a6a">damage_direct</a>( target_part, overhead ? dmg : dmg - protection, <a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a> );</div>
<div class="line"><a id="l06246" name="l06246"></a><span class="lineno"> 6246</span>        }</div>
<div class="line"><a id="l06247" name="l06247"></a><span class="lineno"> 6247</span>    }</div>
<div class="line"><a id="l06248" name="l06248"></a><span class="lineno"> 6248</span> </div>
<div class="line"><a id="l06249" name="l06249"></a><span class="lineno"> 6249</span>    <span class="keywordflow">return</span> damage_dealt;</div>
<div class="line"><a id="l06250" name="l06250"></a><span class="lineno"> 6250</span>}</div>
<div class="ttc" id="aclassvehicle_html_ac2de625db1619f042c4a3a69d0995a6a"><div class="ttname"><a href="classvehicle.html#ac2de625db1619f042c4a3a69d0995a6a">vehicle::damage_direct</a></div><div class="ttdeci">int damage_direct(int p, int dmg, damage_type type=DT_TRUE)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06437">vehicle.cpp:6437</a></div></div>
<div class="ttc" id="aclassvpart__info_html_ac24f5df645d543b6a3e191211054bc6f"><div class="ttname"><a href="classvpart__info.html#ac24f5df645d543b6a3e191211054bc6f">vpart_info::damage_reduction</a></div><div class="ttdeci">std::array&lt; float, NUM_DT &gt; damage_reduction</div><div class="ttdoc">Flat decrease of damage of a given type.</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00275">veh_type.h:275</a></div></div>
<div class="ttc" id="aclassvpart__info_html_aeb9e00627b8cb80d28fb1419e7f0928a"><div class="ttname"><a href="classvpart__info.html#aeb9e00627b8cb80d28fb1419e7f0928a">vpart_info::durability</a></div><div class="ttdeci">int durability</div><div class="ttdoc">Maximum damage part can sustain before being destroyed.</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00173">veh_type.h:173</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l06437">damage_direct()</a>, <a class="el" href="veh__type_8h_source.html#l00275">vpart_info::damage_reduction</a>, <a class="el" href="veh__type_8h_source.html#l00173">vpart_info::durability</a>, <a class="el" href="veh__type_8h_source.html#l00155">vpart_info::location</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01463">open()</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8cpp_source.html#l02875">part_flag()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8cpp_source.html#l02518">part_with_feature()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>, <a class="el" href="rng_8h_source.html#l00088">random_entry()</a>, <a class="el" href="veh__type_8cpp_source.html#l00908">vpart_info::rotor_diameter()</a>, and <a class="el" href="vehicle_8h_source.html#l01798">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="explosion_8cpp_source.html#l00344">explosion_handler::do_blast_new()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01343">operate_planter()</a>, <a class="el" href="map__field_8cpp_source.html#l00394">map::process_fields_in_submap()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01264">transform_terrain()</a>, and <a class="el" href="map_8cpp_source.html#l00741">map::vehicle_vehicle_collision()</a>.</p>

</div>
</div>
<a id="a052137ecb2a3cef5438679ca2ca8b666" name="a052137ecb2a3cef5438679ca2ca8b666"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a052137ecb2a3cef5438679ca2ca8b666">&#9670;&nbsp;</a></span>damage_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::damage_all </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dmg1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dmg2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7a">damage_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>impact</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06252">6252</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06253" name="l06253"></a><span class="lineno"> 6253</span>{</div>
<div class="line"><a id="l06254" name="l06254"></a><span class="lineno"> 6254</span>    <span class="keywordflow">if</span>( dmg2 &lt; dmg1 ) {</div>
<div class="line"><a id="l06255" name="l06255"></a><span class="lineno"> 6255</span>        <a class="code hl_function" href="namespacecata.html#a097b137e977a6b843c0dada2c8b19611">std::swap</a>( dmg1, dmg2 );</div>
<div class="line"><a id="l06256" name="l06256"></a><span class="lineno"> 6256</span>    }</div>
<div class="line"><a id="l06257" name="l06257"></a><span class="lineno"> 6257</span> </div>
<div class="line"><a id="l06258" name="l06258"></a><span class="lineno"> 6258</span>    <span class="keywordflow">if</span>( dmg1 &lt; 1 ) {</div>
<div class="line"><a id="l06259" name="l06259"></a><span class="lineno"> 6259</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l06260" name="l06260"></a><span class="lineno"> 6260</span>    }</div>
<div class="line"><a id="l06261" name="l06261"></a><span class="lineno"> 6261</span> </div>
<div class="line"><a id="l06262" name="l06262"></a><span class="lineno"> 6262</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a397b40aa92dd1fd09ee592aa279bc656">get_all_parts</a>() ) {</div>
<div class="line"><a id="l06263" name="l06263"></a><span class="lineno"> 6263</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> p = vp.part_index();</div>
<div class="line"><a id="l06264" name="l06264"></a><span class="lineno"> 6264</span>        <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="namespaceovermap__ui.html#a5cd0d32854b59999d3a728288bc7daaaaa74ec9c5b6882f79e32a8fbd8da90c1b">distance</a> = 1 + <a class="code hl_function" href="coordinates_8h.html#a5ca1722555a6d5ab9ab7ae8e35c35eaa">square_dist</a>( vp.mount(), impact );</div>
<div class="line"><a id="l06265" name="l06265"></a><span class="lineno"> 6265</span>        <span class="keywordflow">if</span>( distance &gt; 1 &amp;&amp; <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( p ).location == <a class="code hl_function" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure</a> &amp;&amp;</div>
<div class="line"><a id="l06266" name="l06266"></a><span class="lineno"> 6266</span>            !<a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( p ).has_flag( <span class="stringliteral">&quot;PROTRUSION&quot;</span> ) ) {</div>
<div class="line"><a id="l06267" name="l06267"></a><span class="lineno"> 6267</span>            <a class="code hl_function" href="classvehicle.html#ac2de625db1619f042c4a3a69d0995a6a">damage_direct</a>( p, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( dmg1, dmg2 ) / ( distance * distance ), <a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a> );</div>
<div class="line"><a id="l06268" name="l06268"></a><span class="lineno"> 6268</span>        }</div>
<div class="line"><a id="l06269" name="l06269"></a><span class="lineno"> 6269</span>    }</div>
<div class="line"><a id="l06270" name="l06270"></a><span class="lineno"> 6270</span>}</div>
<div class="ttc" id="acoordinates_8h_html_a5ca1722555a6d5ab9ab7ae8e35c35eaa"><div class="ttname"><a href="coordinates_8h.html#a5ca1722555a6d5ab9ab7ae8e35c35eaa">square_dist</a></div><div class="ttdeci">int square_dist(const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00505">coordinates.h:505</a></div></div>
<div class="ttc" id="anamespacecata_html_a097b137e977a6b843c0dada2c8b19611"><div class="ttname"><a href="namespacecata.html#a097b137e977a6b843c0dada2c8b19611">cata::swap</a></div><div class="ttdeci">void swap(colony&lt; element_type, element_allocator_type, element_skipfield_type &gt; &amp;a, colony&lt; element_type, element_allocator_type, element_skipfield_type &gt; &amp;b) COLONY_NOEXCEPT_SWAP(element_allocator_type)</div><div class="ttdoc">Swaps colony A's contents with that of colony B.</div><div class="ttdef"><b>Definition:</b> <a href="colony_8h_source.html#l03496">colony.h:3496</a></div></div>
<div class="ttc" id="anamespaceovermap__ui_html_a5cd0d32854b59999d3a728288bc7daaaaa74ec9c5b6882f79e32a8fbd8da90c1b"><div class="ttname"><a href="namespaceovermap__ui.html#a5cd0d32854b59999d3a728288bc7daaaaa74ec9c5b6882f79e32a8fbd8da90c1b">overmap_ui::sort_mode_t::distance</a></div><div class="ttdeci">@ distance</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l06437">damage_direct()</a>, <a class="el" href="vehicle_8cpp_source.html#l06882">get_all_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="coordinates_8h_source.html#l00505">square_dist()</a>, <a class="el" href="colony_8h_source.html#l03496">cata::swap()</a>, and <a class="el" href="vehicle_8h_source.html#l01798">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, and <a class="el" href="map_8cpp_source.html#l00741">map::vehicle_vehicle_collision()</a>.</p>

</div>
</div>
<a id="ac2de625db1619f042c4a3a69d0995a6a" name="ac2de625db1619f042c4a3a69d0995a6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2de625db1619f042c4a3a69d0995a6a">&#9670;&nbsp;</a></span>damage_direct()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::damage_direct </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dmg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7a">damage_type</a>&#160;</td>
          <td class="paramname"><em>type</em> = <code><a class="el" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa64ca6840e504bdf899795e9e112d9077">DT_TRUE</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06437">6437</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06438" name="l06438"></a><span class="lineno"> 6438</span>{</div>
<div class="line"><a id="l06439" name="l06439"></a><span class="lineno"> 6439</span>    <span class="comment">// Make sure p is within range and hasn&#39;t been removed already</span></div>
<div class="line"><a id="l06440" name="l06440"></a><span class="lineno"> 6440</span>    <span class="keywordflow">if</span>( ( <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( p ) &gt;= <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size() ) || <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].removed ) {</div>
<div class="line"><a id="l06441" name="l06441"></a><span class="lineno"> 6441</span>        <span class="keywordflow">return</span> dmg;</div>
<div class="line"><a id="l06442" name="l06442"></a><span class="lineno"> 6442</span>    }</div>
<div class="line"><a id="l06443" name="l06443"></a><span class="lineno"> 6443</span>    <span class="comment">// If auto-driving and damage happens, bail out</span></div>
<div class="line"><a id="l06444" name="l06444"></a><span class="lineno"> 6444</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#ad95f42088a5fceef3fc215336649b4ee">is_autodriving</a> ) {</div>
<div class="line"><a id="l06445" name="l06445"></a><span class="lineno"> 6445</span>        <a class="code hl_function" href="classvehicle.html#a8d23ce82d669c714795a2ed9b679e3b9">stop_autodriving</a>();</div>
<div class="line"><a id="l06446" name="l06446"></a><span class="lineno"> 6446</span>    }</div>
<div class="line"><a id="l06447" name="l06447"></a><span class="lineno"> 6447</span>    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.set_memory_seen_cache_dirty( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( p ) );</div>
<div class="line"><a id="l06448" name="l06448"></a><span class="lineno"> 6448</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].is_broken() ) {</div>
<div class="line"><a id="l06449" name="l06449"></a><span class="lineno"> 6449</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a42edd61c5db016a1a5021bb9c3189e3a">break_off</a>( p, dmg );</div>
<div class="line"><a id="l06450" name="l06450"></a><span class="lineno"> 6450</span>    }</div>
<div class="line"><a id="l06451" name="l06451"></a><span class="lineno"> 6451</span> </div>
<div class="line"><a id="l06452" name="l06452"></a><span class="lineno"> 6452</span>    <span class="keywordtype">int</span> tsh = std::min( 20, <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( p ).durability / 10 );</div>
<div class="line"><a id="l06453" name="l06453"></a><span class="lineno"> 6453</span>    <span class="keywordflow">if</span>( dmg &lt; tsh &amp;&amp; <a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a> != <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa64ca6840e504bdf899795e9e112d9077">DT_TRUE</a> ) {</div>
<div class="line"><a id="l06454" name="l06454"></a><span class="lineno"> 6454</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a> == <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aae6af44cd6e0e8cafcc63cea198f627c9">DT_HEAT</a> &amp;&amp; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].is_fuel_store() ) {</div>
<div class="line"><a id="l06455" name="l06455"></a><span class="lineno"> 6455</span>            <a class="code hl_function" href="classvehicle.html#a0a91f98959c5283578641ff7684869d7">explode_fuel</a>( p, <a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a> );</div>
<div class="line"><a id="l06456" name="l06456"></a><span class="lineno"> 6456</span>        }</div>
<div class="line"><a id="l06457" name="l06457"></a><span class="lineno"> 6457</span> </div>
<div class="line"><a id="l06458" name="l06458"></a><span class="lineno"> 6458</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l06459" name="l06459"></a><span class="lineno"> 6459</span>    }</div>
<div class="line"><a id="l06460" name="l06460"></a><span class="lineno"> 6460</span> </div>
<div class="line"><a id="l06461" name="l06461"></a><span class="lineno"> 6461</span>    dmg -= std::min&lt;int&gt;( dmg, <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( p ).damage_reduction[ <a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a> ] );</div>
<div class="line"><a id="l06462" name="l06462"></a><span class="lineno"> 6462</span>    <span class="keywordtype">int</span> dres = dmg - <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].hp();</div>
<div class="line"><a id="l06463" name="l06463"></a><span class="lineno"> 6463</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a9c80007e6bb704ab32bd6c8adafff454">mod_hp</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ p ], 0 - dmg, <a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a> ) ) {</div>
<div class="line"><a id="l06464" name="l06464"></a><span class="lineno"> 6464</span>        <a class="code hl_variable" href="classvehicle.html#a42aa0af38e1a54ca47855c9231aa1457">insides_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l06465" name="l06465"></a><span class="lineno"> 6465</span>        <a class="code hl_variable" href="classvehicle.html#a4618e6b69581e93ab96d66fc889659c5">pivot_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l06466" name="l06466"></a><span class="lineno"> 6466</span> </div>
<div class="line"><a id="l06467" name="l06467"></a><span class="lineno"> 6467</span>        <span class="comment">// destroyed parts lose any contained fuels, battery charges or ammo</span></div>
<div class="line"><a id="l06468" name="l06468"></a><span class="lineno"> 6468</span>        <a class="code hl_function" href="classvehicle.html#ab9b05f9729dee1e8844c726eeb1a515d">leak_fuel</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> [ p ] );</div>
<div class="line"><a id="l06469" name="l06469"></a><span class="lineno"> 6469</span> </div>
<div class="line"><a id="l06470" name="l06470"></a><span class="lineno"> 6470</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].items ) {</div>
<div class="line"><a id="l06471" name="l06471"></a><span class="lineno"> 6471</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_item_or_charges( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( p ), e );</div>
<div class="line"><a id="l06472" name="l06472"></a><span class="lineno"> 6472</span>        }</div>
<div class="line"><a id="l06473" name="l06473"></a><span class="lineno"> 6473</span>        <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].items.clear();</div>
<div class="line"><a id="l06474" name="l06474"></a><span class="lineno"> 6474</span> </div>
<div class="line"><a id="l06475" name="l06475"></a><span class="lineno"> 6475</span>        <a class="code hl_function" href="classvehicle.html#a8e8079a6591b3104191c881509f16d61">invalidate_mass</a>();</div>
<div class="line"><a id="l06476" name="l06476"></a><span class="lineno"> 6476</span>        <a class="code hl_variable" href="classvehicle.html#a62e8354926b0f973a2a0ec1db3deb997">coeff_air_changed</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l06477" name="l06477"></a><span class="lineno"> 6477</span> </div>
<div class="line"><a id="l06478" name="l06478"></a><span class="lineno"> 6478</span>        <span class="comment">// refresh cache in case the broken part has changed the status</span></div>
<div class="line"><a id="l06479" name="l06479"></a><span class="lineno"> 6479</span>        <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l06480" name="l06480"></a><span class="lineno"> 6480</span>    }</div>
<div class="line"><a id="l06481" name="l06481"></a><span class="lineno"> 6481</span> </div>
<div class="line"><a id="l06482" name="l06482"></a><span class="lineno"> 6482</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].is_fuel_store() ) {</div>
<div class="line"><a id="l06483" name="l06483"></a><span class="lineno"> 6483</span>        <a class="code hl_function" href="classvehicle.html#a0a91f98959c5283578641ff7684869d7">explode_fuel</a>( p, <a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a> );</div>
<div class="line"><a id="l06484" name="l06484"></a><span class="lineno"> 6484</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ p ].is_broken() &amp;&amp; <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( p, <span class="stringliteral">&quot;UNMOUNT_ON_DAMAGE&quot;</span> ) ) {</div>
<div class="line"><a id="l06485" name="l06485"></a><span class="lineno"> 6485</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.spawn_item( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( p ), <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( p ).<a class="code hl_class" href="classitem.html">item</a>, 1, 0, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l06486" name="l06486"></a><span class="lineno"> 6486</span>        <a class="code hl_class" href="classmonster.html">monster</a> *mon = <a class="code hl_function" href="classvehicle.html#ab266c3250ffece69b5c2ddc9897d80d3">get_pet</a>( p );</div>
<div class="line"><a id="l06487" name="l06487"></a><span class="lineno"> 6487</span>        <span class="keywordflow">if</span>( mon != <span class="keyword">nullptr</span> &amp;&amp; mon-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="vehicle_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a> ) ) {</div>
<div class="line"><a id="l06488" name="l06488"></a><span class="lineno"> 6488</span>            mon-&gt;<a class="code hl_function" href="classCreature.html#a730fb8be5a540edd31ed9d8126ea20de">remove_effect</a>( <a class="code hl_variable" href="vehicle_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a> );</div>
<div class="line"><a id="l06489" name="l06489"></a><span class="lineno"> 6489</span>        }</div>
<div class="line"><a id="l06490" name="l06490"></a><span class="lineno"> 6490</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( p, <span class="stringliteral">&quot;TOW_CABLE&quot;</span> ) ) {</div>
<div class="line"><a id="l06491" name="l06491"></a><span class="lineno"> 6491</span>            <a class="code hl_function" href="classvehicle.html#ad874a1fdccab8e70b60d887fc0d56b7e">invalidate_towing</a>( <span class="keyword">true</span> );</div>
<div class="line"><a id="l06492" name="l06492"></a><span class="lineno"> 6492</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l06493" name="l06493"></a><span class="lineno"> 6493</span>            <a class="code hl_function" href="classvehicle.html#a04638c5234928c4ccca14ddc2059fb11">remove_part</a>( p );</div>
<div class="line"><a id="l06494" name="l06494"></a><span class="lineno"> 6494</span>        }</div>
<div class="line"><a id="l06495" name="l06495"></a><span class="lineno"> 6495</span>    }</div>
<div class="line"><a id="l06496" name="l06496"></a><span class="lineno"> 6496</span> </div>
<div class="line"><a id="l06497" name="l06497"></a><span class="lineno"> 6497</span>    <span class="keywordflow">return</span> std::max( dres, 0 );</div>
<div class="line"><a id="l06498" name="l06498"></a><span class="lineno"> 6498</span>}</div>
<div class="ttc" id="aclassCreature_html_a730fb8be5a540edd31ed9d8126ea20de"><div class="ttname"><a href="classCreature.html#a730fb8be5a540edd31ed9d8126ea20de">Creature::remove_effect</a></div><div class="ttdeci">bool remove_effect(const efftype_id &amp;eff_id, body_part bp=num_bp)</div><div class="ttdoc">Removes a listed effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01130">creature.cpp:1130</a></div></div>
<div class="ttc" id="aclassvehicle_html_a0a91f98959c5283578641ff7684869d7"><div class="ttname"><a href="classvehicle.html#a0a91f98959c5283578641ff7684869d7">vehicle::explode_fuel</a></div><div class="ttdeci">bool explode_fuel(int p, damage_type type)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06409">vehicle.cpp:6409</a></div></div>
<div class="ttc" id="aclassvehicle_html_a42aa0af38e1a54ca47855c9231aa1457"><div class="ttname"><a href="classvehicle.html#a42aa0af38e1a54ca47855c9231aa1457">vehicle::insides_dirty</a></div><div class="ttdeci">bool insides_dirty</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01944">vehicle.h:1944</a></div></div>
<div class="ttc" id="aclassvehicle_html_a42edd61c5db016a1a5021bb9c3189e3a"><div class="ttname"><a href="classvehicle.html#a42edd61c5db016a1a5021bb9c3189e3a">vehicle::break_off</a></div><div class="ttdeci">int break_off(int p, int dmg)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06338">vehicle.cpp:6338</a></div></div>
<div class="ttc" id="aclassvehicle_html_a4618e6b69581e93ab96d66fc889659c5"><div class="ttname"><a href="classvehicle.html#a4618e6b69581e93ab96d66fc889659c5">vehicle::pivot_dirty</a></div><div class="ttdeci">bool pivot_dirty</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01899">vehicle.h:1899</a></div></div>
<div class="ttc" id="aclassvehicle_html_a62e8354926b0f973a2a0ec1db3deb997"><div class="ttname"><a href="classvehicle.html#a62e8354926b0f973a2a0ec1db3deb997">vehicle::coeff_air_changed</a></div><div class="ttdeci">bool coeff_air_changed</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01911">vehicle.h:1911</a></div></div>
<div class="ttc" id="aclassvehicle_html_a8d23ce82d669c714795a2ed9b679e3b9"><div class="ttname"><a href="classvehicle.html#a8d23ce82d669c714795a2ed9b679e3b9">vehicle::stop_autodriving</a></div><div class="ttdeci">void stop_autodriving(bool apply_brakes=true)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l01292">vehicle_autodrive.cpp:1292</a></div></div>
<div class="ttc" id="aclassvehicle_html_a9c80007e6bb704ab32bd6c8adafff454"><div class="ttname"><a href="classvehicle.html#a9c80007e6bb704ab32bd6c8adafff454">vehicle::mod_hp</a></div><div class="ttdeci">bool mod_hp(vehicle_part &amp;pt, int qty, damage_type dt=DT_NULL)</div><div class="ttdoc">Apply damage to part constrained by range [0,durability] possibly destroying it.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00540">vehicle_part.cpp:540</a></div></div>
<div class="ttc" id="aclassvehicle_html_ab9b05f9729dee1e8844c726eeb1a515d"><div class="ttname"><a href="classvehicle.html#ab9b05f9729dee1e8844c726eeb1a515d">vehicle::leak_fuel</a></div><div class="ttdeci">void leak_fuel(vehicle_part &amp;pt)</div><div class="ttdoc">empty the contents of a tank, battery or turret spilling liquids randomly on the ground</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06500">vehicle.cpp:6500</a></div></div>
<div class="ttc" id="aclassvehicle_html_ad874a1fdccab8e70b60d887fc0d56b7e"><div class="ttname"><a href="classvehicle.html#ad874a1fdccab8e70b60d887fc0d56b7e">vehicle::invalidate_towing</a></div><div class="ttdeci">void invalidate_towing(bool first_vehicle=false)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05939">vehicle.cpp:5939</a></div></div>
<div class="ttc" id="aclassvehicle_html_ad95f42088a5fceef3fc215336649b4ee"><div class="ttname"><a href="classvehicle.html#ad95f42088a5fceef3fc215336649b4ee">vehicle::is_autodriving</a></div><div class="ttdeci">bool is_autodriving</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01923">vehicle.h:1923</a></div></div>
<div class="ttc" id="adamage_8h_html_ae63a2cf8429f9edf77b547d34ffe4e7aa64ca6840e504bdf899795e9e112d9077"><div class="ttname"><a href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa64ca6840e504bdf899795e9e112d9077">DT_TRUE</a></div><div class="ttdeci">@ DT_TRUE</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00022">damage.h:22</a></div></div>
<div class="ttc" id="adamage_8h_html_ae63a2cf8429f9edf77b547d34ffe4e7aae6af44cd6e0e8cafcc63cea198f627c9"><div class="ttname"><a href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aae6af44cd6e0e8cafcc63cea198f627c9">DT_HEAT</a></div><div class="ttdeci">@ DT_HEAT</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00028">damage.h:28</a></div></div>
<div class="ttc" id="anamespacecalendar_html_ae15fcbf1c971589eb49c1a657fb6a580"><div class="ttname"><a href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a></div><div class="ttdeci">time_point turn</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00036">calendar.cpp:36</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l06338">break_off()</a>, <a class="el" href="vehicle_8h_source.html#l01911">coeff_air_changed</a>, <a class="el" href="damage_8h_source.html#l00028">DT_HEAT</a>, <a class="el" href="damage_8h_source.html#l00022">DT_TRUE</a>, <a class="el" href="vehicle_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a>, <a class="el" href="vehicle_8cpp_source.html#l06409">explode_fuel()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l03082">get_pet()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="creature_8cpp_source.html#l01173">Creature::has_effect()</a>, <a class="el" href="vehicle_8h_source.html#l01944">insides_dirty</a>, <a class="el" href="vehicle_8cpp_source.html#l06778">invalidate_mass()</a>, <a class="el" href="vehicle_8cpp_source.html#l05939">invalidate_towing()</a>, <a class="el" href="vehicle_8h_source.html#l01923">is_autodriving</a>, <a class="el" href="vehicle_8cpp_source.html#l06500">leak_fuel()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00540">mod_hp()</a>, <a class="el" href="vehicle_8cpp_source.html#l02875">part_flag()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8h_source.html#l01899">pivot_dirty</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="creature_8cpp_source.html#l01130">Creature::remove_effect()</a>, <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l01292">stop_autodriving()</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, and <a class="el" href="vehicle_8h_source.html#l01798">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06173">damage()</a>, <a class="el" href="vehicle_8cpp_source.html#l06252">damage_all()</a>, <a class="el" href="vehicle_8cpp_source.html#l05018">do_engine_damage()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00845">handle_trap()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00492">smash_security_system()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>.</p>

</div>
</div>
<a id="abeeecc873ea4841652366d8ffc6c3bfe" name="abeeecc873ea4841652366d8ffc6c3bfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abeeecc873ea4841652366d8ffc6c3bfe">&#9670;&nbsp;</a></span>decrement_summon_timer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::decrement_summon_timer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05425">5425</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05426" name="l05426"></a><span class="lineno"> 5426</span>{</div>
<div class="line"><a id="l05427" name="l05427"></a><span class="lineno"> 5427</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#a975683a2a22bccef9e5e02f80661cf03">summon_time_limit</a> ) {</div>
<div class="line"><a id="l05428" name="l05428"></a><span class="lineno"> 5428</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05429" name="l05429"></a><span class="lineno"> 5429</span>    }</div>
<div class="line"><a id="l05430" name="l05430"></a><span class="lineno"> 5430</span>    <span class="keywordflow">if</span>( *<a class="code hl_variable" href="classvehicle.html#a975683a2a22bccef9e5e02f80661cf03">summon_time_limit</a> &lt;= 0_turns ) {</div>
<div class="line"><a id="l05431" name="l05431"></a><span class="lineno"> 5431</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a397b40aa92dd1fd09ee592aa279bc656">get_all_parts</a>() ) {</div>
<div class="line"><a id="l05432" name="l05432"></a><span class="lineno"> 5432</span>            <span class="keyword">const</span> <span class="keywordtype">size_t</span> p = vp.part_index();</div>
<div class="line"><a id="l05433" name="l05433"></a><span class="lineno"> 5433</span>            <a class="code hl_function" href="classvehicle.html#af1b0ab1a9d635577ecd14b02efe5655a">dump_items_from_part</a>( p );</div>
<div class="line"><a id="l05434" name="l05434"></a><span class="lineno"> 5434</span>        }</div>
<div class="line"><a id="l05435" name="l05435"></a><span class="lineno"> 5435</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>() ) ) {</div>
<div class="line"><a id="l05436" name="l05436"></a><span class="lineno"> 5436</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your %s winks out of existence.&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l05437" name="l05437"></a><span class="lineno"> 5437</span>        }</div>
<div class="line"><a id="l05438" name="l05438"></a><span class="lineno"> 5438</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.destroy_vehicle( <span class="keyword">this</span> );</div>
<div class="line"><a id="l05439" name="l05439"></a><span class="lineno"> 5439</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05440" name="l05440"></a><span class="lineno"> 5440</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05441" name="l05441"></a><span class="lineno"> 5441</span>        *<a class="code hl_variable" href="classvehicle.html#a975683a2a22bccef9e5e02f80661cf03">summon_time_limit</a> -= 1_turns;</div>
<div class="line"><a id="l05442" name="l05442"></a><span class="lineno"> 5442</span>    }</div>
<div class="line"><a id="l05443" name="l05443"></a><span class="lineno"> 5443</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05444" name="l05444"></a><span class="lineno"> 5444</span>}</div>
<div class="ttc" id="aclassvehicle_html_a975683a2a22bccef9e5e02f80661cf03"><div class="ttname"><a href="classvehicle.html#a975683a2a22bccef9e5e02f80661cf03">vehicle::summon_time_limit</a></div><div class="ttdeci">cata::optional&lt; time_duration &gt; summon_time_limit</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01811">vehicle.h:1811</a></div></div>
<div class="ttc" id="aclassvehicle_html_af1b0ab1a9d635577ecd14b02efe5655a"><div class="ttname"><a href="classvehicle.html#af1b0ab1a9d635577ecd14b02efe5655a">vehicle::dump_items_from_part</a></div><div class="ttdeci">void dump_items_from_part(size_t index)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05416">vehicle.cpp:5416</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="vehicle_8cpp_source.html#l05416">dump_items_from_part()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l06882">get_all_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l03101">global_pos3()</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, and <a class="el" href="vehicle_8h_source.html#l01811">summon_time_limit</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>.</p>

</div>
</div>
<a id="a3b4df7e5059e9684cb71feba1233c36f" name="a3b4df7e5059e9684cb71feba1233c36f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b4df7e5059e9684cb71feba1233c36f">&#9670;&nbsp;</a></span>deserialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::deserialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classJsonIn.html">JsonIn</a> &amp;&#160;</td>
          <td class="paramname"><em>jsin</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Legacy saved games did not store part enabled status within parts</p>

<p class="definition">Definition at line <a class="el" href="savegame__json_8cpp_source.html#l02585">2585</a> of file <a class="el" href="savegame__json_8cpp_source.html">savegame_json.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02586" name="l02586"></a><span class="lineno"> 2586</span>{</div>
<div class="line"><a id="l02587" name="l02587"></a><span class="lineno"> 2587</span>    <a class="code hl_class" href="classJsonObject.html">JsonObject</a> data = jsin.<a class="code hl_function" href="classJsonIn.html#af988f122efed0696d9d05f649e57c9b2">get_object</a>();</div>
<div class="line"><a id="l02588" name="l02588"></a><span class="lineno"> 2588</span>    data.<a class="code hl_function" href="classJsonObject.html#ae00f195360e3783cf50527cf07344202">allow_omitted_members</a>();</div>
<div class="line"><a id="l02589" name="l02589"></a><span class="lineno"> 2589</span> </div>
<div class="line"><a id="l02590" name="l02590"></a><span class="lineno"> 2590</span>    <span class="keywordtype">int</span> fdir = 0;</div>
<div class="line"><a id="l02591" name="l02591"></a><span class="lineno"> 2591</span>    <span class="keywordtype">int</span> mdir = 0;</div>
<div class="line"><a id="l02592" name="l02592"></a><span class="lineno"> 2592</span> </div>
<div class="line"><a id="l02593" name="l02593"></a><span class="lineno"> 2593</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;type&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a> );</div>
<div class="line"><a id="l02594" name="l02594"></a><span class="lineno"> 2594</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;posx&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> );</div>
<div class="line"><a id="l02595" name="l02595"></a><span class="lineno"> 2595</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;posy&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> );</div>
<div class="line"><a id="l02596" name="l02596"></a><span class="lineno"> 2596</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;om_id&quot;</span>, <a class="code hl_variable" href="classvehicle.html#abef886f9f8fbb643d84ef5c6ad86518d">om_id</a> );</div>
<div class="line"><a id="l02597" name="l02597"></a><span class="lineno"> 2597</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;faceDir&quot;</span>, fdir );</div>
<div class="line"><a id="l02598" name="l02598"></a><span class="lineno"> 2598</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;moveDir&quot;</span>, mdir );</div>
<div class="line"><a id="l02599" name="l02599"></a><span class="lineno"> 2599</span>    <span class="keywordtype">int</span> turn_dir_int;</div>
<div class="line"><a id="l02600" name="l02600"></a><span class="lineno"> 2600</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;turn_dir&quot;</span>, turn_dir_int );</div>
<div class="line"><a id="l02601" name="l02601"></a><span class="lineno"> 2601</span>    <a class="code hl_variable" href="classvehicle.html#af366981a584e12d25133fb479d47de33">turn_dir</a> = <a class="code hl_function" href="namespaceunits.html#a068cd98efba5fd1fbb936ce3597db23d">units::from_degrees</a>( turn_dir_int );</div>
<div class="line"><a id="l02602" name="l02602"></a><span class="lineno"> 2602</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;velocity&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> );</div>
<div class="line"><a id="l02603" name="l02603"></a><span class="lineno"> 2603</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;falling&quot;</span>, <a class="code hl_variable" href="classvehicle.html#aeafb913ad9b9d1341d51a4c51ba43a06">is_falling</a> );</div>
<div class="line"><a id="l02604" name="l02604"></a><span class="lineno"> 2604</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;floating&quot;</span>, <a class="code hl_variable" href="classvehicle.html#ae3cbbbb890aa9a12504ec3458746f3e1">is_floating</a> );</div>
<div class="line"><a id="l02605" name="l02605"></a><span class="lineno"> 2605</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;flying&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a0a35b7f917fdb08e70a78315cc968f86">is_flying</a> );</div>
<div class="line"><a id="l02606" name="l02606"></a><span class="lineno"> 2606</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;cruise_velocity&quot;</span>, <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> );</div>
<div class="line"><a id="l02607" name="l02607"></a><span class="lineno"> 2607</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;vertical_velocity&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a416a2bc9ee792663fced3344db322cb8">vertical_velocity</a> );</div>
<div class="line"><a id="l02608" name="l02608"></a><span class="lineno"> 2608</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;cruise_on&quot;</span>, <a class="code hl_variable" href="classvehicle.html#abdf6601268460dc437ef079590deb33b">cruise_on</a> );</div>
<div class="line"><a id="l02609" name="l02609"></a><span class="lineno"> 2609</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;engine_on&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> );</div>
<div class="line"><a id="l02610" name="l02610"></a><span class="lineno"> 2610</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;tracking_on&quot;</span>, <a class="code hl_variable" href="classvehicle.html#abe5f5ade599d2cd543a3e3c3860bc051">tracking_on</a> );</div>
<div class="line"><a id="l02611" name="l02611"></a><span class="lineno"> 2611</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;skidding&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a320ca34b5c38568efd801731cef78a35">skidding</a> );</div>
<div class="line"><a id="l02612" name="l02612"></a><span class="lineno"> 2612</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;of_turn_carry&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a3d2d513640544cb11fa826890b692e5a">of_turn_carry</a> );</div>
<div class="line"><a id="l02613" name="l02613"></a><span class="lineno"> 2613</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;is_locked&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a61be41a90435acf77c1c078c2966643b">is_locked</a> );</div>
<div class="line"><a id="l02614" name="l02614"></a><span class="lineno"> 2614</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;is_alarm_on&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a949775a37c7daa7a6b67e510f548bca3">is_alarm_on</a> );</div>
<div class="line"><a id="l02615" name="l02615"></a><span class="lineno"> 2615</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;camera_on&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a70a0f1b85b1b3eed228b92d7b70334b1">camera_on</a> );</div>
<div class="line"><a id="l02616" name="l02616"></a><span class="lineno"> 2616</span>    <span class="keywordflow">if</span>( !data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;last_update_turn&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a987b54408280dc6a74da8c857907faf2">last_update</a> ) ) {</div>
<div class="line"><a id="l02617" name="l02617"></a><span class="lineno"> 2617</span>        <a class="code hl_variable" href="classvehicle.html#a987b54408280dc6a74da8c857907faf2">last_update</a> = <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>;</div>
<div class="line"><a id="l02618" name="l02618"></a><span class="lineno"> 2618</span>    }</div>
<div class="line"><a id="l02619" name="l02619"></a><span class="lineno"> 2619</span> </div>
<div class="line"><a id="l02620" name="l02620"></a><span class="lineno"> 2620</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::angle</a> fdir_angle = <a class="code hl_function" href="namespaceunits.html#a068cd98efba5fd1fbb936ce3597db23d">units::from_degrees</a>( fdir );</div>
<div class="line"><a id="l02621" name="l02621"></a><span class="lineno"> 2621</span>    <a class="code hl_variable" href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">face</a>.<a class="code hl_function" href="classtileray.html#ab643ca3c50332c73009031331e7c8026">init</a>( fdir_angle );</div>
<div class="line"><a id="l02622" name="l02622"></a><span class="lineno"> 2622</span>    <a class="code hl_variable" href="classvehicle.html#a8bbdfb41ea75fdc007feab08e2137aa2">move</a>.<a class="code hl_function" href="classtileray.html#ab643ca3c50332c73009031331e7c8026">init</a>( <a class="code hl_function" href="namespaceunits.html#a068cd98efba5fd1fbb936ce3597db23d">units::from_degrees</a>( mdir ) );</div>
<div class="line"><a id="l02623" name="l02623"></a><span class="lineno"> 2623</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;name&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l02624" name="l02624"></a><span class="lineno"> 2624</span>    std::string temp_id;</div>
<div class="line"><a id="l02625" name="l02625"></a><span class="lineno"> 2625</span>    std::string temp_old_id;</div>
<div class="line"><a id="l02626" name="l02626"></a><span class="lineno"> 2626</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;owner&quot;</span>, temp_id );</div>
<div class="line"><a id="l02627" name="l02627"></a><span class="lineno"> 2627</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;old_owner&quot;</span>, temp_old_id );</div>
<div class="line"><a id="l02628" name="l02628"></a><span class="lineno"> 2628</span>    <span class="comment">// for savegames before the change to faction_id for ownership.</span></div>
<div class="line"><a id="l02629" name="l02629"></a><span class="lineno"> 2629</span>    <span class="keywordflow">if</span>( temp_id.empty() ) {</div>
<div class="line"><a id="l02630" name="l02630"></a><span class="lineno"> 2630</span>        <a class="code hl_variable" href="classvehicle.html#afb548b72a0c24d9f9c436f198040e052">owner</a> = <a class="code hl_function" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">faction_id::NULL_ID</a>();</div>
<div class="line"><a id="l02631" name="l02631"></a><span class="lineno"> 2631</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02632" name="l02632"></a><span class="lineno"> 2632</span>        <a class="code hl_variable" href="classvehicle.html#afb548b72a0c24d9f9c436f198040e052">owner</a> = <a class="code hl_typedef" href="clzones_8h.html#ab899db7b87cf958f079fe0f14793625b">faction_id</a>( temp_id );</div>
<div class="line"><a id="l02633" name="l02633"></a><span class="lineno"> 2633</span>    }</div>
<div class="line"><a id="l02634" name="l02634"></a><span class="lineno"> 2634</span>    <span class="keywordflow">if</span>( temp_old_id.empty() ) {</div>
<div class="line"><a id="l02635" name="l02635"></a><span class="lineno"> 2635</span>        <a class="code hl_variable" href="classvehicle.html#a0e6255388e73823374ec4bc9097f87c3">old_owner</a> = <a class="code hl_function" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">faction_id::NULL_ID</a>();</div>
<div class="line"><a id="l02636" name="l02636"></a><span class="lineno"> 2636</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02637" name="l02637"></a><span class="lineno"> 2637</span>        <a class="code hl_variable" href="classvehicle.html#a0e6255388e73823374ec4bc9097f87c3">old_owner</a> = <a class="code hl_typedef" href="clzones_8h.html#ab899db7b87cf958f079fe0f14793625b">faction_id</a>( temp_old_id );</div>
<div class="line"><a id="l02638" name="l02638"></a><span class="lineno"> 2638</span>    }</div>
<div class="line"><a id="l02639" name="l02639"></a><span class="lineno"> 2639</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;theft_time&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a191233eeb95ac9e660d5da83dd247a73">theft_time</a> );</div>
<div class="line"><a id="l02640" name="l02640"></a><span class="lineno"> 2640</span> </div>
<div class="line"><a id="l02641" name="l02641"></a><span class="lineno"> 2641</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;parts&quot;</span>, <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> );</div>
<div class="line"><a id="l02642" name="l02642"></a><span class="lineno"> 2642</span>    <span class="comment">// we persist the pivot anchor so that if the rules for finding</span></div>
<div class="line"><a id="l02643" name="l02643"></a><span class="lineno"> 2643</span>    <span class="comment">// the pivot change, existing vehicles do not shift around.</span></div>
<div class="line"><a id="l02644" name="l02644"></a><span class="lineno"> 2644</span>    <span class="comment">// Loading vehicles that predate the pivot logic is a special</span></div>
<div class="line"><a id="l02645" name="l02645"></a><span class="lineno"> 2645</span>    <span class="comment">// case of this, they will load with an anchor of (0,0) which</span></div>
<div class="line"><a id="l02646" name="l02646"></a><span class="lineno"> 2646</span>    <span class="comment">// is what they&#39;re expecting.</span></div>
<div class="line"><a id="l02647" name="l02647"></a><span class="lineno"> 2647</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;pivot&quot;</span>, <a class="code hl_variable" href="classvehicle.html#afd4e8e8471b17450205d827dee8a41a5">pivot_anchor</a>[0] );</div>
<div class="line"><a id="l02648" name="l02648"></a><span class="lineno"> 2648</span>    <a class="code hl_variable" href="classvehicle.html#afd4e8e8471b17450205d827dee8a41a5">pivot_anchor</a>[1] = <a class="code hl_variable" href="classvehicle.html#afd4e8e8471b17450205d827dee8a41a5">pivot_anchor</a>[0];</div>
<div class="line"><a id="l02649" name="l02649"></a><span class="lineno"> 2649</span>    <a class="code hl_variable" href="classvehicle.html#a709da7b758c18d51b79311eea6eaca59">pivot_rotation</a>[1] = <a class="code hl_variable" href="classvehicle.html#a709da7b758c18d51b79311eea6eaca59">pivot_rotation</a>[0] = fdir_angle;</div>
<div class="line"><a id="l02650" name="l02650"></a><span class="lineno"> 2650</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;is_following&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a26f98c384048e03538bca10e4f26905d">is_following</a> );</div>
<div class="line"><a id="l02651" name="l02651"></a><span class="lineno"> 2651</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;is_patrolling&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a953fed1abe9bacc2a7c98cee6425c5b2">is_patrolling</a> );</div>
<div class="line"><a id="l02652" name="l02652"></a><span class="lineno"> 2652</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;autodrive_local_target&quot;</span>, <a class="code hl_variable" href="classvehicle.html#acdbb2eec025972d86be23e90e9e92d22">autodrive_local_target</a> );</div>
<div class="line"><a id="l02653" name="l02653"></a><span class="lineno"> 2653</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;summon_time_limit&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a975683a2a22bccef9e5e02f80661cf03">summon_time_limit</a> );</div>
<div class="line"><a id="l02654" name="l02654"></a><span class="lineno"> 2654</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;magic&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a506fb7b0a17c1578498599e14c173710">magic</a> );</div>
<div class="line"><a id="l02655" name="l02655"></a><span class="lineno"> 2655</span> </div>
<div class="line"><a id="l02656" name="l02656"></a><span class="lineno"> 2656</span>    <span class="comment">// Loose items -&gt; count-by-charges migration</span></div>
<div class="line"><a id="l02657" name="l02657"></a><span class="lineno"> 2657</span>    <span class="keywordflow">for</span>( <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l02658" name="l02658"></a><span class="lineno"> 2658</span>        <a class="code hl_function" href="namespaceto__cbc__migration.html#aa2388f961ff14499d847777a40741d59">to_cbc_migration::migrate</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.<a class="code hl_variable" href="structvehicle__part.html#ad59383d4f9c006ff499082dd5a600d9f">items</a> );</div>
<div class="line"><a id="l02659" name="l02659"></a><span class="lineno"> 2659</span>    }</div>
<div class="line"><a id="l02660" name="l02660"></a><span class="lineno"> 2660</span> </div>
<div class="line"><a id="l02661" name="l02661"></a><span class="lineno"> 2661</span>    <span class="comment">// Need to manually backfill the active item cache since the part loader can&#39;t call its vehicle.</span></div>
<div class="line"><a id="l02662" name="l02662"></a><span class="lineno"> 2662</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#adfbc0794c9bb9a5f1d75e1c52a2e561a">get_any_parts</a>( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea563fb2626cff0acc6c8273fef3e3a8d0">VPFLAG_CARGO</a> ) ) {</div>
<div class="line"><a id="l02663" name="l02663"></a><span class="lineno"> 2663</span>        <span class="keyword">auto</span> it = vp.part().items.begin();</div>
<div class="line"><a id="l02664" name="l02664"></a><span class="lineno"> 2664</span>        <span class="keyword">auto</span> end = vp.part().items.end();</div>
<div class="line"><a id="l02665" name="l02665"></a><span class="lineno"> 2665</span>        <span class="keywordflow">for</span>( ; it != end; ++it ) {</div>
<div class="line"><a id="l02666" name="l02666"></a><span class="lineno"> 2666</span>            <span class="keywordflow">if</span>( it-&gt;needs_processing() ) {</div>
<div class="line"><a id="l02667" name="l02667"></a><span class="lineno"> 2667</span>                <a class="code hl_variable" href="classvehicle.html#ad7894d7d5b3a20fb16927cd95d4d2a04">active_items</a>.<a class="code hl_function" href="classactive__item__cache.html#a5fa98979f3b77cce8696282184928af3">add</a>( *it, vp.mount() );</div>
<div class="line"><a id="l02668" name="l02668"></a><span class="lineno"> 2668</span>            }</div>
<div class="line"><a id="l02669" name="l02669"></a><span class="lineno"> 2669</span>        }</div>
<div class="line"><a id="l02670" name="l02670"></a><span class="lineno"> 2670</span>    }</div>
<div class="line"><a id="l02671" name="l02671"></a><span class="lineno"> 2671</span> </div>
<div class="line"><a id="l02672" name="l02672"></a><span class="lineno"> 2672</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#adfbc0794c9bb9a5f1d75e1c52a2e561a">get_any_parts</a>( <span class="stringliteral">&quot;TURRET&quot;</span> ) ) {</div>
<div class="line"><a id="l02673" name="l02673"></a><span class="lineno"> 2673</span>        <a class="code hl_function" href="classvehicle.html#a720bcd814432de09323f4ca1dfb2eade">install_part</a>( vp.mount(), <a class="code hl_class" href="classstring__id.html">vpart_id</a>( <span class="stringliteral">&quot;turret_mount&quot;</span> ), <span class="keyword">false</span> );</div>
<div class="line"><a id="l02674" name="l02674"></a><span class="lineno"> 2674</span> </div>
<div class="line"><a id="l02675" name="l02675"></a><span class="lineno"> 2675</span>        <span class="comment">//Forcibly set turrets&#39; targeting mode to manual if no turret control unit is present on turret&#39;s tile on loading save</span></div>
<div class="line"><a id="l02676" name="l02676"></a><span class="lineno"> 2676</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( vp.part() ), <span class="stringliteral">&quot;TURRET_CONTROLS&quot;</span> ) ) {</div>
<div class="line"><a id="l02677" name="l02677"></a><span class="lineno"> 2677</span>            vp.part().enabled = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02678" name="l02678"></a><span class="lineno"> 2678</span>        }</div>
<div class="line"><a id="l02679" name="l02679"></a><span class="lineno"> 2679</span>        <span class="comment">//Set turret control unit&#39;s state equal to turret&#39;s targeting mode on loading save</span></div>
<div class="line"><a id="l02680" name="l02680"></a><span class="lineno"> 2680</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;turret_part : <a class="code hl_function" href="classvehicle.html#adfbc0794c9bb9a5f1d75e1c52a2e561a">get_any_parts</a>( <span class="stringliteral">&quot;TURRET_CONTROLS&quot;</span> ) ) {</div>
<div class="line"><a id="l02681" name="l02681"></a><span class="lineno"> 2681</span>            turret_part.part().enabled = vp.part().enabled;</div>
<div class="line"><a id="l02682" name="l02682"></a><span class="lineno"> 2682</span>        }</div>
<div class="line"><a id="l02683" name="l02683"></a><span class="lineno"> 2683</span>    }</div>
<div class="line"><a id="l02684" name="l02684"></a><span class="lineno"> 2684</span> </div>
<div class="line"><a id="l02685" name="l02685"></a><span class="lineno"> 2685</span>    <span class="comment">// Add vehicle mounts to cars that are missing them.</span></div>
<div class="line"><a id="l02686" name="l02686"></a><span class="lineno"> 2686</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#adfbc0794c9bb9a5f1d75e1c52a2e561a">get_any_parts</a>( <span class="stringliteral">&quot;NEEDS_WHEEL_MOUNT_LIGHT&quot;</span> ) ) {</div>
<div class="line"><a id="l02687" name="l02687"></a><span class="lineno"> 2687</span>        <span class="keywordflow">if</span>( vp.info().has_flag( <span class="stringliteral">&quot;STEERABLE&quot;</span> ) ) {</div>
<div class="line"><a id="l02688" name="l02688"></a><span class="lineno"> 2688</span>            <a class="code hl_function" href="classvehicle.html#a720bcd814432de09323f4ca1dfb2eade">install_part</a>( vp.mount(), <a class="code hl_class" href="classstring__id.html">vpart_id</a>( <span class="stringliteral">&quot;wheel_mount_light_steerable&quot;</span> ), <span class="keyword">false</span> );</div>
<div class="line"><a id="l02689" name="l02689"></a><span class="lineno"> 2689</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02690" name="l02690"></a><span class="lineno"> 2690</span>            <a class="code hl_function" href="classvehicle.html#a720bcd814432de09323f4ca1dfb2eade">install_part</a>( vp.mount(), <a class="code hl_class" href="classstring__id.html">vpart_id</a>( <span class="stringliteral">&quot;wheel_mount_light&quot;</span> ), <span class="keyword">false</span> );</div>
<div class="line"><a id="l02691" name="l02691"></a><span class="lineno"> 2691</span>        }</div>
<div class="line"><a id="l02692" name="l02692"></a><span class="lineno"> 2692</span>    }</div>
<div class="line"><a id="l02693" name="l02693"></a><span class="lineno"> 2693</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#adfbc0794c9bb9a5f1d75e1c52a2e561a">get_any_parts</a>( <span class="stringliteral">&quot;NEEDS_WHEEL_MOUNT_MEDIUM&quot;</span> ) ) {</div>
<div class="line"><a id="l02694" name="l02694"></a><span class="lineno"> 2694</span>        <span class="keywordflow">if</span>( vp.info().has_flag( <span class="stringliteral">&quot;STEERABLE&quot;</span> ) ) {</div>
<div class="line"><a id="l02695" name="l02695"></a><span class="lineno"> 2695</span>            <a class="code hl_function" href="classvehicle.html#a720bcd814432de09323f4ca1dfb2eade">install_part</a>( vp.mount(), <a class="code hl_class" href="classstring__id.html">vpart_id</a>( <span class="stringliteral">&quot;wheel_mount_medium_steerable&quot;</span> ), <span class="keyword">false</span> );</div>
<div class="line"><a id="l02696" name="l02696"></a><span class="lineno"> 2696</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02697" name="l02697"></a><span class="lineno"> 2697</span>            <a class="code hl_function" href="classvehicle.html#a720bcd814432de09323f4ca1dfb2eade">install_part</a>( vp.mount(), <a class="code hl_class" href="classstring__id.html">vpart_id</a>( <span class="stringliteral">&quot;wheel_mount_medium&quot;</span> ), <span class="keyword">false</span> );</div>
<div class="line"><a id="l02698" name="l02698"></a><span class="lineno"> 2698</span>        }</div>
<div class="line"><a id="l02699" name="l02699"></a><span class="lineno"> 2699</span>    }</div>
<div class="line"><a id="l02700" name="l02700"></a><span class="lineno"> 2700</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#adfbc0794c9bb9a5f1d75e1c52a2e561a">get_any_parts</a>( <span class="stringliteral">&quot;NEEDS_WHEEL_MOUNT_HEAVY&quot;</span> ) ) {</div>
<div class="line"><a id="l02701" name="l02701"></a><span class="lineno"> 2701</span>        <span class="keywordflow">if</span>( vp.info().has_flag( <span class="stringliteral">&quot;STEERABLE&quot;</span> ) ) {</div>
<div class="line"><a id="l02702" name="l02702"></a><span class="lineno"> 2702</span>            <a class="code hl_function" href="classvehicle.html#a720bcd814432de09323f4ca1dfb2eade">install_part</a>( vp.mount(), <a class="code hl_class" href="classstring__id.html">vpart_id</a>( <span class="stringliteral">&quot;wheel_mount_heavy_steerable&quot;</span> ), <span class="keyword">false</span> );</div>
<div class="line"><a id="l02703" name="l02703"></a><span class="lineno"> 2703</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02704" name="l02704"></a><span class="lineno"> 2704</span>            <a class="code hl_function" href="classvehicle.html#a720bcd814432de09323f4ca1dfb2eade">install_part</a>( vp.mount(), <a class="code hl_class" href="classstring__id.html">vpart_id</a>( <span class="stringliteral">&quot;wheel_mount_heavy&quot;</span> ), <span class="keyword">false</span> );</div>
<div class="line"><a id="l02705" name="l02705"></a><span class="lineno"> 2705</span>        }</div>
<div class="line"><a id="l02706" name="l02706"></a><span class="lineno"> 2706</span>    }</div>
<div class="line"><a id="l02707" name="l02707"></a><span class="lineno"> 2707</span> </div>
<div class="line"><a id="l02708" name="l02708"></a><span class="lineno"> 2708</span>    <span class="comment">/* After loading, check if the vehicle is from the old rules and is missing</span></div>
<div class="line"><a id="l02709" name="l02709"></a><span class="lineno"> 2709</span><span class="comment">     * frames. */</span></div>
<div class="line"><a id="l02710" name="l02710"></a><span class="lineno"> 2710</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8h.html#ad92349523462977f97edd9afbed2a996">savegame_loading_version</a> &lt; 11 ) {</div>
<div class="line"><a id="l02711" name="l02711"></a><span class="lineno"> 2711</span>        <a class="code hl_function" href="classvehicle.html#a970b2eebbb27e574f2b09132e8b4be2b">add_missing_frames</a>();</div>
<div class="line"><a id="l02712" name="l02712"></a><span class="lineno"> 2712</span>    }</div>
<div class="line"><a id="l02713" name="l02713"></a><span class="lineno"> 2713</span> </div>
<div class="line"><a id="l02714" name="l02714"></a><span class="lineno"> 2714</span>    <span class="comment">// Handle steering changes</span></div>
<div class="line"><a id="l02715" name="l02715"></a><span class="lineno"> 2715</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8h.html#ad92349523462977f97edd9afbed2a996">savegame_loading_version</a> &lt; 25 ) {</div>
<div class="line"><a id="l02716" name="l02716"></a><span class="lineno"> 2716</span>        <a class="code hl_function" href="classvehicle.html#a9f755028b23085cf45b0d3ea7c7c282b">add_steerable_wheels</a>();</div>
<div class="line"><a id="l02717" name="l02717"></a><span class="lineno"> 2717</span>    }</div>
<div class="line"><a id="l02718" name="l02718"></a><span class="lineno"> 2718</span> </div>
<div class="line"><a id="l02719" name="l02719"></a><span class="lineno"> 2719</span>    <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l02720" name="l02720"></a><span class="lineno"> 2720</span> </div>
<div class="line"><a id="l02721" name="l02721"></a><span class="lineno"> 2721</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;tags&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a0383bc21c8d6b5a3689124f3d286a004">tags</a> );</div>
<div class="line"><a id="l02722" name="l02722"></a><span class="lineno"> 2722</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;labels&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a7c2d668e2b8f48a53f5c5e94aa2bd408">labels</a> );</div>
<div class="line"><a id="l02723" name="l02723"></a><span class="lineno"> 2723</span> </div>
<div class="line"><a id="l02724" name="l02724"></a><span class="lineno"> 2724</span>    <a class="code hl_struct" href="structpoint.html">point</a> p;</div>
<div class="line"><a id="l02725" name="l02725"></a><span class="lineno"> 2725</span>    <a class="code hl_class" href="classzone__data.html">zone_data</a> zd;</div>
<div class="line"><a id="l02726" name="l02726"></a><span class="lineno"> 2726</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classJsonObject.html">JsonObject</a> sdata : data.<a class="code hl_function" href="classJsonObject.html#a69f62f59b5e39da6059b7c3cf8b12421">get_array</a>( <span class="stringliteral">&quot;zones&quot;</span> ) ) {</div>
<div class="line"><a id="l02727" name="l02727"></a><span class="lineno"> 2727</span>        sdata.allow_omitted_members();</div>
<div class="line"><a id="l02728" name="l02728"></a><span class="lineno"> 2728</span>        sdata.read( <span class="stringliteral">&quot;point&quot;</span>, p );</div>
<div class="line"><a id="l02729" name="l02729"></a><span class="lineno"> 2729</span>        sdata.read( <span class="stringliteral">&quot;zone&quot;</span>, zd );</div>
<div class="line"><a id="l02730" name="l02730"></a><span class="lineno"> 2730</span>        <a class="code hl_variable" href="classvehicle.html#a90b6f438b5ae343dab2b131c64293584">loot_zones</a>.emplace( p, zd );</div>
<div class="line"><a id="l02731" name="l02731"></a><span class="lineno"> 2731</span>    }</div>
<div class="line"><a id="l02732" name="l02732"></a><span class="lineno"> 2732</span>    data.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;other_tow_point&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_variable" href="classtowing__data.html#a84c94945b5acc65c357c9ab16adbd4e5">other_towing_point</a> );</div>
<div class="line"><a id="l02733" name="l02733"></a><span class="lineno"> 2733</span>    <span class="comment">// Note that it&#39;s possible for a vehicle to be loaded midway</span></div>
<div class="line"><a id="l02734" name="l02734"></a><span class="lineno"> 2734</span>    <span class="comment">// through a turn if the player is driving REALLY fast and their</span></div>
<div class="line"><a id="l02735" name="l02735"></a><span class="lineno"> 2735</span>    <span class="comment">// own vehicle motion takes them in range. An undefined value for</span></div>
<div class="line"><a id="l02736" name="l02736"></a><span class="lineno"> 2736</span>    <span class="comment">// on_turn caused occasional weirdness if the undefined value</span></div>
<div class="line"><a id="l02737" name="l02737"></a><span class="lineno"> 2737</span>    <span class="comment">// happened to be positive.</span></div>
<div class="line"><a id="l02738" name="l02738"></a><span class="lineno"> 2738</span>    <span class="comment">//</span></div>
<div class="line"><a id="l02739" name="l02739"></a><span class="lineno"> 2739</span>    <span class="comment">// Setting it to zero means it won&#39;t get to move until the start</span></div>
<div class="line"><a id="l02740" name="l02740"></a><span class="lineno"> 2740</span>    <span class="comment">// of the next turn, which is what happens anyway if it gets</span></div>
<div class="line"><a id="l02741" name="l02741"></a><span class="lineno"> 2741</span>    <span class="comment">// loaded anywhere but midway through a driving cycle.</span></div>
<div class="line"><a id="l02742" name="l02742"></a><span class="lineno"> 2742</span>    <span class="comment">//</span></div>
<div class="line"><a id="l02743" name="l02743"></a><span class="lineno"> 2743</span>    <span class="comment">// Something similar to vehicle::gain_moves() would be ideal, but</span></div>
<div class="line"><a id="l02744" name="l02744"></a><span class="lineno"> 2744</span>    <span class="comment">// that can&#39;t be used as it currently stands because it would also</span></div>
<div class="line"><a id="l02745" name="l02745"></a><span class="lineno"> 2745</span>    <span class="comment">// make it instantly fire all its turrets upon load.</span></div>
<div class="line"><a id="l02746" name="l02746"></a><span class="lineno"> 2746</span>    <a class="code hl_variable" href="classvehicle.html#af757f49411232815e121faa825d415f7">of_turn</a> = 0;</div>
<div class="line"><a id="l02747" name="l02747"></a><span class="lineno"> 2747</span><span class="comment"></span> </div>
<div class="line"><a id="l02748" name="l02748"></a><span class="lineno"> 2748</span><span class="comment">    /** Legacy saved games did not store part enabled status within parts */</span></div>
<div class="line"><a id="l02749" name="l02749"></a><span class="lineno"> 2749</span>    <span class="keyword">const</span> <span class="keyword">auto</span> set_legacy_state = [&amp;]( <span class="keyword">const</span> std::string &amp; var, <span class="keyword">const</span> std::string &amp; flag ) {</div>
<div class="line"><a id="l02750" name="l02750"></a><span class="lineno"> 2750</span>        <span class="keywordflow">if</span>( data.<a class="code hl_function" href="classJsonObject.html#a9e628525564a9e7ef3755c10e0c9fac4">get_bool</a>( var, <span class="keyword">false</span> ) ) {</div>
<div class="line"><a id="l02751" name="l02751"></a><span class="lineno"> 2751</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#adfbc0794c9bb9a5f1d75e1c52a2e561a">get_any_parts</a>( flag ) ) {</div>
<div class="line"><a id="l02752" name="l02752"></a><span class="lineno"> 2752</span>                vp.part().enabled = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02753" name="l02753"></a><span class="lineno"> 2753</span>            }</div>
<div class="line"><a id="l02754" name="l02754"></a><span class="lineno"> 2754</span>        }</div>
<div class="line"><a id="l02755" name="l02755"></a><span class="lineno"> 2755</span>    };</div>
<div class="line"><a id="l02756" name="l02756"></a><span class="lineno"> 2756</span> </div>
<div class="line"><a id="l02757" name="l02757"></a><span class="lineno"> 2757</span>    set_legacy_state( <span class="stringliteral">&quot;stereo_on&quot;</span>, <span class="stringliteral">&quot;STEREO&quot;</span> );</div>
<div class="line"><a id="l02758" name="l02758"></a><span class="lineno"> 2758</span>    set_legacy_state( <span class="stringliteral">&quot;chimes_on&quot;</span>, <span class="stringliteral">&quot;CHIMES&quot;</span> );</div>
<div class="line"><a id="l02759" name="l02759"></a><span class="lineno"> 2759</span>    set_legacy_state( <span class="stringliteral">&quot;fridge_on&quot;</span>, <span class="stringliteral">&quot;FRIDGE&quot;</span> );</div>
<div class="line"><a id="l02760" name="l02760"></a><span class="lineno"> 2760</span>    set_legacy_state( <span class="stringliteral">&quot;reaper_on&quot;</span>, <span class="stringliteral">&quot;REAPER&quot;</span> );</div>
<div class="line"><a id="l02761" name="l02761"></a><span class="lineno"> 2761</span>    set_legacy_state( <span class="stringliteral">&quot;planter_on&quot;</span>, <span class="stringliteral">&quot;PLANTER&quot;</span> );</div>
<div class="line"><a id="l02762" name="l02762"></a><span class="lineno"> 2762</span>    set_legacy_state( <span class="stringliteral">&quot;recharger_on&quot;</span>, <span class="stringliteral">&quot;RECHARGE&quot;</span> );</div>
<div class="line"><a id="l02763" name="l02763"></a><span class="lineno"> 2763</span>    set_legacy_state( <span class="stringliteral">&quot;scoop_on&quot;</span>, <span class="stringliteral">&quot;SCOOP&quot;</span> );</div>
<div class="line"><a id="l02764" name="l02764"></a><span class="lineno"> 2764</span>    set_legacy_state( <span class="stringliteral">&quot;plow_on&quot;</span>, <span class="stringliteral">&quot;PLOW&quot;</span> );</div>
<div class="line"><a id="l02765" name="l02765"></a><span class="lineno"> 2765</span>    set_legacy_state( <span class="stringliteral">&quot;reactor_on&quot;</span>, <span class="stringliteral">&quot;REACTOR&quot;</span> );</div>
<div class="line"><a id="l02766" name="l02766"></a><span class="lineno"> 2766</span>}</div>
<div class="ttc" id="aclassJsonIn_html_af988f122efed0696d9d05f649e57c9b2"><div class="ttname"><a href="classJsonIn.html#af988f122efed0696d9d05f649e57c9b2">JsonIn::get_object</a></div><div class="ttdeci">JsonObject get_object()</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l01364">json.cpp:1364</a></div></div>
<div class="ttc" id="aclassJsonObject_html"><div class="ttname"><a href="classJsonObject.html">JsonObject</a></div><div class="ttdef"><b>Definition:</b> <a href="json_8h_source.html#l00831">json.h:832</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a69f62f59b5e39da6059b7c3cf8b12421"><div class="ttname"><a href="classJsonObject.html#a69f62f59b5e39da6059b7c3cf8b12421">JsonObject::get_array</a></div><div class="ttdeci">JsonArray get_array(const std::string &amp;name) const</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l00332">json.cpp:332</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a9e628525564a9e7ef3755c10e0c9fac4"><div class="ttname"><a href="classJsonObject.html#a9e628525564a9e7ef3755c10e0c9fac4">JsonObject::get_bool</a></div><div class="ttdeci">bool get_bool(const std::string &amp;name) const</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l00266">json.cpp:266</a></div></div>
<div class="ttc" id="aclassJsonObject_html_ae00f195360e3783cf50527cf07344202"><div class="ttname"><a href="classJsonObject.html#ae00f195360e3783cf50527cf07344202">JsonObject::allow_omitted_members</a></div><div class="ttdeci">void allow_omitted_members() const</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l00150">json.cpp:150</a></div></div>
<div class="ttc" id="aclassJsonObject_html_ae66d47f9cb4993dfaf79819ec2aff2f8"><div class="ttname"><a href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">JsonObject::read</a></div><div class="ttdeci">bool read(const std::string &amp;name, T &amp;t, bool throw_on_error=true) const</div><div class="ttdef"><b>Definition:</b> <a href="json_8h_source.html#l00944">json.h:944</a></div></div>
<div class="ttc" id="aclassstring__id_html_ae29dd8ed38d2b5eb443a65ad46f10b2d"><div class="ttname"><a href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">string_id&lt; faction &gt;::NULL_ID</a></div><div class="ttdeci">static const string_id&lt; faction &gt; &amp; NULL_ID()</div><div class="ttdoc">Returns a null id whose string_id&lt;T&gt;::is_null() must always return true.</div></div>
<div class="ttc" id="aclasstowing__data_html_a84c94945b5acc65c357c9ab16adbd4e5"><div class="ttname"><a href="classtowing__data.html#a84c94945b5acc65c357c9ab16adbd4e5">towing_data::other_towing_point</a></div><div class="ttdeci">tripoint other_towing_point</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00167">vehicle.h:167</a></div></div>
<div class="ttc" id="aclassvehicle_html_a0383bc21c8d6b5a3689124f3d286a004"><div class="ttname"><a href="classvehicle.html#a0383bc21c8d6b5a3689124f3d286a004">vehicle::tags</a></div><div class="ttdeci">std::set&lt; std::string &gt; tags</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01802">vehicle.h:1802</a></div></div>
<div class="ttc" id="aclassvehicle_html_a0e6255388e73823374ec4bc9097f87c3"><div class="ttname"><a href="classvehicle.html#a0e6255388e73823374ec4bc9097f87c3">vehicle::old_owner</a></div><div class="ttdeci">faction_id old_owner</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01721">vehicle.h:1721</a></div></div>
<div class="ttc" id="aclassvehicle_html_a191233eeb95ac9e660d5da83dd247a73"><div class="ttname"><a href="classvehicle.html#a191233eeb95ac9e660d5da83dd247a73">vehicle::theft_time</a></div><div class="ttdeci">cata::optional&lt; time_point &gt; theft_time</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01881">vehicle.h:1881</a></div></div>
<div class="ttc" id="aclassvehicle_html_a61be41a90435acf77c1c078c2966643b"><div class="ttname"><a href="classvehicle.html#a61be41a90435acf77c1c078c2966643b">vehicle::is_locked</a></div><div class="ttdeci">bool is_locked</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01934">vehicle.h:1934</a></div></div>
<div class="ttc" id="aclassvehicle_html_a70a0f1b85b1b3eed228b92d7b70334b1"><div class="ttname"><a href="classvehicle.html#a70a0f1b85b1b3eed228b92d7b70334b1">vehicle::camera_on</a></div><div class="ttdeci">bool camera_on</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01937">vehicle.h:1937</a></div></div>
<div class="ttc" id="aclassvehicle_html_a720bcd814432de09323f4ca1dfb2eade"><div class="ttname"><a href="classvehicle.html#a720bcd814432de09323f4ca1dfb2eade">vehicle::install_part</a></div><div class="ttdeci">int install_part(const point &amp;dp, const vpart_id &amp;id, bool force=false)</div><div class="ttdoc">Installs a part into this vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01554">vehicle.cpp:1554</a></div></div>
<div class="ttc" id="aclassvehicle_html_a72a3e7b7f00c193446b29adee5d5aa9f"><div class="ttname"><a href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">vehicle::tow_data</a></div><div class="ttdeci">towing_data tow_data</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01887">vehicle.h:1887</a></div></div>
<div class="ttc" id="aclassvehicle_html_a7c2d668e2b8f48a53f5c5e94aa2bd408"><div class="ttname"><a href="classvehicle.html#a7c2d668e2b8f48a53f5c5e94aa2bd408">vehicle::labels</a></div><div class="ttdeci">std::set&lt; label &gt; labels</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01801">vehicle.h:1801</a></div></div>
<div class="ttc" id="aclassvehicle_html_a90b6f438b5ae343dab2b131c64293584"><div class="ttname"><a href="classvehicle.html#a90b6f438b5ae343dab2b131c64293584">vehicle::loot_zones</a></div><div class="ttdeci">std::unordered_multimap&lt; point, zone_data &gt; loot_zones</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01806">vehicle.h:1806</a></div></div>
<div class="ttc" id="aclassvehicle_html_a970b2eebbb27e574f2b09132e8b4be2b"><div class="ttname"><a href="classvehicle.html#a970b2eebbb27e574f2b09132e8b4be2b">vehicle::add_missing_frames</a></div><div class="ttdeci">void add_missing_frames()</div><div class="ttdoc">Checks all parts to see if frames are missing (as they might be when loading from a game saved before...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l00317">vehicle.cpp:317</a></div></div>
<div class="ttc" id="aclassvehicle_html_a987b54408280dc6a74da8c857907faf2"><div class="ttname"><a href="classvehicle.html#a987b54408280dc6a74da8c857907faf2">vehicle::last_update</a></div><div class="ttdeci">time_point last_update</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01851">vehicle.h:1851</a></div></div>
<div class="ttc" id="aclassvehicle_html_a9f755028b23085cf45b0d3ea7c7c282b"><div class="ttname"><a href="classvehicle.html#a9f755028b23085cf45b0d3ea7c7c282b">vehicle::add_steerable_wheels</a></div><div class="ttdeci">void add_steerable_wheels()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l00344">vehicle.cpp:344</a></div></div>
<div class="ttc" id="aclassvehicle_html_abdf6601268460dc437ef079590deb33b"><div class="ttname"><a href="classvehicle.html#abdf6601268460dc437ef079590deb33b">vehicle::cruise_on</a></div><div class="ttdeci">bool cruise_on</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01928">vehicle.h:1928</a></div></div>
<div class="ttc" id="aclassvehicle_html_abe5f5ade599d2cd543a3e3c3860bc051"><div class="ttname"><a href="classvehicle.html#abe5f5ade599d2cd543a3e3c3860bc051">vehicle::tracking_on</a></div><div class="ttdeci">bool tracking_on</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01932">vehicle.h:1932</a></div></div>
<div class="ttc" id="aclassvehicle_html_abef886f9f8fbb643d84ef5c6ad86518d"><div class="ttname"><a href="classvehicle.html#abef886f9f8fbb643d84ef5c6ad86518d">vehicle::om_id</a></div><div class="ttdeci">int om_id</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01867">vehicle.h:1867</a></div></div>
<div class="ttc" id="aclassvehicle_html_aca3ae013973cb492b14967e574189c1c"><div class="ttname"><a href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">vehicle::has_part</a></div><div class="ttdeci">bool has_part(const std::string &amp;flag, bool enabled=false) const</div><div class="ttdoc">Check if vehicle has at least one unbroken part with specified flag.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02558">vehicle.cpp:2558</a></div></div>
<div class="ttc" id="aclassvehicle_html_adfbc0794c9bb9a5f1d75e1c52a2e561a"><div class="ttname"><a href="classvehicle.html#adfbc0794c9bb9a5f1d75e1c52a2e561a">vehicle::get_any_parts</a></div><div class="ttdeci">vehicle_part_with_feature_range&lt; std::string &gt; get_any_parts(std::string feature) const</div><div class="ttdoc">Yields a range of parts of this vehicle that each have the given feature and not removed.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02708">vehicle.cpp:2708</a></div></div>
<div class="ttc" id="aclassvehicle_html_afb548b72a0c24d9f9c436f198040e052"><div class="ttname"><a href="classvehicle.html#afb548b72a0c24d9f9c436f198040e052">vehicle::owner</a></div><div class="ttdeci">faction_id owner</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01719">vehicle.h:1719</a></div></div>
<div class="ttc" id="aclasszone__data_html"><div class="ttname"><a href="classzone__data.html">zone_data</a></div><div class="ttdoc">These are zones the player can designate.</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8h_source.html#l00233">clzones.h:234</a></div></div>
<div class="ttc" id="aclzones_8h_html_ab899db7b87cf958f079fe0f14793625b"><div class="ttname"><a href="clzones_8h.html#ab899db7b87cf958f079fe0f14793625b">faction_id</a></div><div class="ttdeci">string_id&lt; faction &gt; faction_id</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8h_source.html#l00030">clzones.h:30</a></div></div>
<div class="ttc" id="agame_8h_html_ad92349523462977f97edd9afbed2a996"><div class="ttname"><a href="game_8h.html#ad92349523462977f97edd9afbed2a996">savegame_loading_version</a></div><div class="ttdeci">int savegame_loading_version</div><div class="ttdef"><b>Definition:</b> <a href="savegame_8cpp_source.html#l00066">savegame.cpp:66</a></div></div>
<div class="ttc" id="anamespaceto__cbc__migration_html_aa2388f961ff14499d847777a40741d59"><div class="ttname"><a href="namespaceto__cbc__migration.html#aa2388f961ff14499d847777a40741d59">to_cbc_migration::migrate</a></div><div class="ttdeci">static void migrate(cata::colony&lt; item &gt; &amp;stack)</div><div class="ttdoc">Merge old individual items into new count-by-charges items with same id.</div><div class="ttdef"><b>Definition:</b> <a href="savegame__json_8cpp_source.html#l02130">savegame_json.cpp:2130</a></div></div>
<div class="ttc" id="anamespaceunits_html_a068cd98efba5fd1fbb936ce3597db23d"><div class="ttname"><a href="namespaceunits.html#a068cd98efba5fd1fbb936ce3597db23d">units::from_degrees</a></div><div class="ttdeci">constexpr quantity&lt; double, angle_in_radians_tag &gt; from_degrees(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units__angle_8h_source.html#l00031">units_angle.h:31</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307ea563fb2626cff0acc6c8273fef3e3a8d0"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea563fb2626cff0acc6c8273fef3e3a8d0">VPFLAG_CARGO</a></div><div class="ttdeci">@ VPFLAG_CARGO</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00062">veh_type.h:62</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="json_8cpp_source.html#l00150">JsonObject::allow_omitted_members()</a>, <a class="el" href="units__angle_8h_source.html#l00031">units::from_degrees()</a>, <a class="el" href="json_8cpp_source.html#l00332">JsonObject::get_array()</a>, <a class="el" href="json_8cpp_source.html#l00266">JsonObject::get_bool()</a>, <a class="el" href="json_8cpp_source.html#l01364">JsonIn::get_object()</a>, <a class="el" href="character_8h_source.html#l01476">Character::magic</a>, <a class="el" href="savegame__json_8cpp_source.html#l02130">to_cbc_migration::migrate()</a>, <a class="el" href="avatar__action_8cpp_source.html#l00090">avatar_action::move()</a>, <a class="el" href="character_8h_source.html#l01568">Character::name</a>, <a class="el" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">string_id&lt; faction &gt;::NULL_ID()</a>, <a class="el" href="character_8cpp_source.html#l00707">Character::pos()</a>, <a class="el" href="json_8h_source.html#l00944">JsonObject::read()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00115">catacurses::refresh()</a>, <a class="el" href="savegame_8cpp_source.html#l00066">savegame_loading_version</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, <a class="el" href="enums_8h_source.html#l00075">type</a>, <a class="el" href="veh__type_8h_source.html#l00062">VPFLAG_CARGO</a>, <a class="el" href="point_8h_source.html#l00150">tripoint::x</a>, and <a class="el" href="point_8h_source.html#l00151">tripoint::y</a>.</p>

</div>
</div>
<a id="a050dcaa8958d866388b780738cf0e87d" name="a050dcaa8958d866388b780738cf0e87d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a050dcaa8958d866388b780738cf0e87d">&#9670;&nbsp;</a></span>dir_vec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrl__vec2d.html">rl_vec2d</a> vehicle::dir_vec </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__move_8cpp_source.html#l01225">1225</a> of file <a class="el" href="vehicle__move_8cpp_source.html">vehicle_move.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>{</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="vehicle__move_8cpp.html#a0039ad830efb94637bdc1dd04d0fa60c">angle_to_vec</a>( <a class="code hl_variable" href="classvehicle.html#af366981a584e12d25133fb479d47de33">turn_dir</a> );</div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>}</div>
<div class="ttc" id="avehicle__move_8cpp_html_a0039ad830efb94637bdc1dd04d0fa60c"><div class="ttname"><a href="vehicle__move_8cpp.html#a0039ad830efb94637bdc1dd04d0fa60c">angle_to_vec</a></div><div class="ttdeci">static rl_vec2d angle_to_vec(units::angle angle)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l01208">vehicle_move.cpp:1208</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle__move_8cpp_source.html#l01208">angle_to_vec()</a>, and <a class="el" href="vehicle_8h_source.html#l01870">turn_dir</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l03627">game::get_veh_dir_indicator_location()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04325">handling_difficulty()</a>.</p>

</div>
</div>
<a id="acb03f8288804b551378478137e9cea11" name="acb03f8288804b551378478137e9cea11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb03f8288804b551378478137e9cea11">&#9670;&nbsp;</a></span>discharge_battery()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::discharge_battery </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>amount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>recurse</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try to discharge our (and, optionally, connected vehicles') batteries by the given amount. </p>
<dl class="section return"><dt>Returns</dt><dd>amount of request unfulfilled (0 if totally successful). </dd></dl>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04973">4973</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04974" name="l04974"></a><span class="lineno"> 4974</span>{</div>
<div class="line"><a id="l04975" name="l04975"></a><span class="lineno"> 4975</span>    <span class="comment">// Key parts by percentage charge level.</span></div>
<div class="line"><a id="l04976" name="l04976"></a><span class="lineno"> 4976</span>    std::multimap&lt;int, vehicle_part *&gt; dischargeable_parts;</div>
<div class="line"><a id="l04977" name="l04977"></a><span class="lineno"> 4977</span>    <span class="keywordflow">for</span>( <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;p : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l04978" name="l04978"></a><span class="lineno"> 4978</span>        <span class="keywordflow">if</span>( p.is_available() &amp;&amp; p.is_battery() &amp;&amp; p.ammo_remaining() &gt; 0 ) {</div>
<div class="line"><a id="l04979" name="l04979"></a><span class="lineno"> 4979</span>            dischargeable_parts.insert( { ( p.ammo_remaining() * 100 ) / p.ammo_capacity(), &amp;p } );</div>
<div class="line"><a id="l04980" name="l04980"></a><span class="lineno"> 4980</span>        }</div>
<div class="line"><a id="l04981" name="l04981"></a><span class="lineno"> 4981</span>    }</div>
<div class="line"><a id="l04982" name="l04982"></a><span class="lineno"> 4982</span>    <span class="keywordflow">while</span>( amount &gt; 0 &amp;&amp; !dischargeable_parts.empty() ) {</div>
<div class="line"><a id="l04983" name="l04983"></a><span class="lineno"> 4983</span>        <span class="comment">// Grab first part, discharge until it reaches the next %, then re-insert with new % key.</span></div>
<div class="line"><a id="l04984" name="l04984"></a><span class="lineno"> 4984</span>        <span class="keyword">auto</span> iter = std::prev( dischargeable_parts.end() );</div>
<div class="line"><a id="l04985" name="l04985"></a><span class="lineno"> 4985</span>        <span class="keywordtype">int</span> charge_level = iter-&gt;first;</div>
<div class="line"><a id="l04986" name="l04986"></a><span class="lineno"> 4986</span>        <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> *p = iter-&gt;second;</div>
<div class="line"><a id="l04987" name="l04987"></a><span class="lineno"> 4987</span>        dischargeable_parts.erase( iter );</div>
<div class="line"><a id="l04988" name="l04988"></a><span class="lineno"> 4988</span>        <span class="comment">// Calculate number of charges to reach the previous %.</span></div>
<div class="line"><a id="l04989" name="l04989"></a><span class="lineno"> 4989</span>        <span class="keywordtype">int</span> prev_charge_level = ( ( charge_level - 1 ) * p-&gt;<a class="code hl_function" href="structvehicle__part.html#a3cdc75652e7509b56d164fe9e5c15231">ammo_capacity</a>() ) / 100;</div>
<div class="line"><a id="l04990" name="l04990"></a><span class="lineno"> 4990</span>        prev_charge_level = std::max( 0, prev_charge_level );</div>
<div class="line"><a id="l04991" name="l04991"></a><span class="lineno"> 4991</span>        <span class="keywordtype">int</span> amount_to_discharge = std::min( p-&gt;<a class="code hl_function" href="structvehicle__part.html#a9c6bf106558c9ed00536e2d7cb0e862d">ammo_remaining</a>() - prev_charge_level, amount );</div>
<div class="line"><a id="l04992" name="l04992"></a><span class="lineno"> 4992</span>        p-&gt;<a class="code hl_function" href="structvehicle__part.html#aba8156669b1112e8ff258878066505b9">ammo_consume</a>( amount_to_discharge, <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( *p ) );</div>
<div class="line"><a id="l04993" name="l04993"></a><span class="lineno"> 4993</span>        amount -= amount_to_discharge;</div>
<div class="line"><a id="l04994" name="l04994"></a><span class="lineno"> 4994</span>        <span class="keywordflow">if</span>( p-&gt;<a class="code hl_function" href="structvehicle__part.html#a9c6bf106558c9ed00536e2d7cb0e862d">ammo_remaining</a>() &gt; 0 ) {</div>
<div class="line"><a id="l04995" name="l04995"></a><span class="lineno"> 4995</span>            dischargeable_parts.insert( { ( p-&gt;<a class="code hl_function" href="structvehicle__part.html#a9c6bf106558c9ed00536e2d7cb0e862d">ammo_remaining</a>() * 100 ) / p-&gt;<a class="code hl_function" href="structvehicle__part.html#a3cdc75652e7509b56d164fe9e5c15231">ammo_capacity</a>(), p } );</div>
<div class="line"><a id="l04996" name="l04996"></a><span class="lineno"> 4996</span>        }</div>
<div class="line"><a id="l04997" name="l04997"></a><span class="lineno"> 4997</span>    }</div>
<div class="line"><a id="l04998" name="l04998"></a><span class="lineno"> 4998</span> </div>
<div class="line"><a id="l04999" name="l04999"></a><span class="lineno"> 4999</span>    <span class="keywordflow">if</span>( amount &gt; 0 &amp;&amp; recurse ) {</div>
<div class="line"><a id="l05000" name="l05000"></a><span class="lineno"> 5000</span>        <span class="comment">// need more power!</span></div>
<div class="line"><a id="l05001" name="l05001"></a><span class="lineno"> 5001</span>        <span class="keyword">using</span> tvr = <a class="code hl_enumeration" href="namespacedistribution__graph.html#a2693ab255ec1b2e508b6af35709ce9eb">distribution_graph::traverse_visitor_result</a>;</div>
<div class="line"><a id="l05002" name="l05002"></a><span class="lineno"> 5002</span>        <span class="keyword">auto</span> discharge_vehicle = [&amp;amount]( <a class="code hl_class" href="classvehicle.html">vehicle</a> &amp; veh ) {</div>
<div class="line"><a id="l05003" name="l05003"></a><span class="lineno"> 5003</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.add_msg_if_player( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;CHv: %d&quot;</span>, amount );</div>
<div class="line"><a id="l05004" name="l05004"></a><span class="lineno"> 5004</span>            amount = veh.discharge_battery( amount, <span class="keyword">false</span> );</div>
<div class="line"><a id="l05005" name="l05005"></a><span class="lineno"> 5005</span>            <span class="keywordflow">return</span> amount &gt; 0 ? tvr::continue_further : tvr::stop;</div>
<div class="line"><a id="l05006" name="l05006"></a><span class="lineno"> 5006</span>        };</div>
<div class="line"><a id="l05007" name="l05007"></a><span class="lineno"> 5007</span>        <span class="keyword">auto</span> discharge_grid = [&amp;amount]( <a class="code hl_class" href="classdistribution__grid.html">distribution_grid</a> &amp; grid ) {</div>
<div class="line"><a id="l05008" name="l05008"></a><span class="lineno"> 5008</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.add_msg_if_player( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;CHg: %d&quot;</span>, amount );</div>
<div class="line"><a id="l05009" name="l05009"></a><span class="lineno"> 5009</span>            amount = -grid.mod_resource( -amount, <span class="keyword">false</span> );</div>
<div class="line"><a id="l05010" name="l05010"></a><span class="lineno"> 5010</span>            <span class="keywordflow">return</span> amount &gt; 0 ? tvr::continue_further : tvr::stop;</div>
<div class="line"><a id="l05011" name="l05011"></a><span class="lineno"> 5011</span>        };</div>
<div class="line"><a id="l05012" name="l05012"></a><span class="lineno"> 5012</span>        <a class="code hl_function" href="namespacedistribution__graph.html#a27a7603aec9db0a5d334bbee275915d9">distribution_graph::traverse</a>( *<span class="keyword">this</span>, discharge_vehicle, discharge_grid );</div>
<div class="line"><a id="l05013" name="l05013"></a><span class="lineno"> 5013</span>    }</div>
<div class="line"><a id="l05014" name="l05014"></a><span class="lineno"> 5014</span> </div>
<div class="line"><a id="l05015" name="l05015"></a><span class="lineno"> 5015</span>    <span class="keywordflow">return</span> amount; <span class="comment">// non-zero if we weren&#39;t able to fulfill demand.</span></div>
<div class="line"><a id="l05016" name="l05016"></a><span class="lineno"> 5016</span>}</div>
<div class="ttc" id="astructvehicle__part_html_aba8156669b1112e8ff258878066505b9"><div class="ttname"><a href="structvehicle__part.html#aba8156669b1112e8ff258878066505b9">vehicle_part::ammo_consume</a></div><div class="ttdeci">int ammo_consume(int qty, const tripoint &amp;pos)</div><div class="ttdoc">Consume fuel, charges or ammunition (if available)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00288">vehicle_part.cpp:288</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle__part_8cpp_source.html#l00228">vehicle_part::ammo_capacity()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00288">vehicle_part::ammo_consume()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00241">vehicle_part::ammo_remaining()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="enums_8h_source.html#l00264">m_debug</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="vehicle_8cpp_source.html#l04802">distribution_graph::traverse()</a>.</p>

<p class="reference">Referenced by <a class="el" href="debug__menu_8cpp_source.html#l01325">debug_menu::debug()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l02695">activity_handlers::repair_activity_hack::anonymous_namespace{activity_handlers.cpp}::discharge_real_power_source()</a>, <a class="el" href="vehicle_8cpp_source.html#l03246">drain()</a>, <a class="el" href="vehicle_8cpp_source.html#l04371">drain_energy()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>, <a class="el" href="vehicle_8cpp_source.html#l04619">power_parts()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00918">start_engine()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06657">update_time()</a>.</p>

</div>
</div>
<a id="ace5c25f3faffd8848491570cfb89f086" name="ace5c25f3faffd8848491570cfb89f086"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace5c25f3faffd8848491570cfb89f086">&#9670;&nbsp;</a></span>disp_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string vehicle::disp_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__display_8cpp_source.html#l00029">29</a> of file <a class="el" href="vehicle__display_8cpp_source.html">vehicle_display.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>{</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;the %s&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, and <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05745">do_towing_move()</a>, <a class="el" href="iuse_8cpp_source.html#l06954">enumerate_objects_around_point()</a>, <a class="el" href="handle__liquid_8cpp_source.html#l00156">liquid_handler::get_liquid_target()</a>, <a class="el" href="vehicle_8cpp_source.html#l04179">get_owner_name()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l06005">no_towing_slack()</a>, <a class="el" href="monmove_8cpp_source.html#l02021">monster::shove_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l05973">tow_cable_too_far()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l01256">deploy_furn_actor::use()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l01764">use_harness()</a>.</p>

</div>
</div>
<a id="af00bcdd270607518a99b64f187397080" name="af00bcdd270607518a99b64f187397080"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af00bcdd270607518a99b64f187397080">&#9670;&nbsp;</a></span>do_autodrive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vehicle_8h.html#a120e32a2f241b5f666c5189a2f405eea">autodrive_result</a> vehicle::do_autodrive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>driver</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__autodrive_8cpp_source.html#l01206">1206</a> of file <a class="el" href="vehicle__autodrive_8cpp_source.html">vehicle_autodrive.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>{</div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#ad95f42088a5fceef3fc215336649b4ee">is_autodriving</a> ) {</div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="vehicle_8h.html#a120e32a2f241b5f666c5189a2f405eeaa5bb94a1c12413a2e5d14deabab29f2aa">autodrive_result::abort</a>;</div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span>    }</div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#a341515426011486c265d016c35f84de6">player_in_control</a>( driver ) || <a class="code hl_variable" href="classvehicle.html#a320ca34b5c38568efd801731cef78a35">skidding</a> ) {</div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span>        driver.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You lose control as the vehicle starts skidding.&quot;</span> ) );</div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span>        <a class="code hl_function" href="classvehicle.html#a8d23ce82d669c714795a2ed9b679e3b9">stop_autodriving</a>( <span class="keyword">false</span> );</div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="vehicle_8h.html#a120e32a2f241b5f666c5189a2f405eeaa5bb94a1c12413a2e5d14deabab29f2aa">autodrive_result::abort</a>;</div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span>    }</div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span>    <span class="keyword">const</span> <a class="code hl_class" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> veh_pos = <a class="code hl_function" href="classvehicle.html#a789289c4179f7677e45cb100ff5ffb9a">global_square_location</a>();</div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>    <span class="keyword">const</span> <a class="code hl_class" href="classcoords_1_1coord__point.html">tripoint_abs_omt</a> veh_omt = project_to&lt;coords::omt&gt;( veh_pos );</div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span>    std::vector&lt;tripoint_abs_omt&gt; &amp;omt_path = driver.<a class="code hl_variable" href="classCharacter.html#abf9fb0e53589386ea19d64a377ad6247">omt_path</a>;</div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span>    <span class="keywordflow">if</span>( !omt_path.empty() &amp;&amp; veh_omt == omt_path.back() ) {</div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span>        omt_path.pop_back();</div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>    }</div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span>    <span class="keywordflow">if</span>( omt_path.empty() ) {</div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span>        <a class="code hl_function" href="classvehicle.html#a8d23ce82d669c714795a2ed9b679e3b9">stop_autodriving</a>( <span class="keyword">false</span> );</div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="vehicle_8h.html#a120e32a2f241b5f666c5189a2f405eeaaa5d7ceb2c59b8cee46c2953fec9abc19">autodrive_result::finished</a>;</div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>    }</div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#a5a81aa92070897147fbed2c61bad4825">active_autodrive_controller</a> ) {</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>        <a class="code hl_variable" href="classvehicle.html#a5a81aa92070897147fbed2c61bad4825">active_autodrive_controller</a> = std::make_shared&lt;autodrive_controller&gt;( *<span class="keyword">this</span>, driver );</div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>    }</div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span>    <span class="keywordflow">if</span>( &amp;<a class="code hl_variable" href="classvehicle.html#a5a81aa92070897147fbed2c61bad4825">active_autodrive_controller</a>-&gt;get_driver() != &amp;driver ) {</div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Driver changed while auto-driving&quot;</span> );</div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span>        <a class="code hl_function" href="classvehicle.html#a8d23ce82d669c714795a2ed9b679e3b9">stop_autodriving</a>();</div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="vehicle_8h.html#a120e32a2f241b5f666c5189a2f405eeaa5bb94a1c12413a2e5d14deabab29f2aa">autodrive_result::abort</a>;</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>    }</div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>    <a class="code hl_variable" href="classvehicle.html#a5a81aa92070897147fbed2c61bad4825">active_autodrive_controller</a>-&gt;check_safe_speed();</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>    <a class="code hl_class" href="classcata_1_1optional.html">cata::optional&lt;navigation_step&gt;</a> next_step = <a class="code hl_variable" href="classvehicle.html#a5a81aa92070897147fbed2c61bad4825">active_autodrive_controller</a>-&gt;compute_next_step();</div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>    <span class="keywordflow">if</span>( !next_step ) {</div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>        <span class="comment">// message handles pathfinding failure either due to obstacles or inability to see</span></div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>        driver.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Can&#39;t see a path forward.&quot;</span> ) );</div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span>        <a class="code hl_function" href="classvehicle.html#a8d23ce82d669c714795a2ed9b679e3b9">stop_autodriving</a>( <span class="keyword">false</span> );</div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="vehicle_8h.html#a120e32a2f241b5f666c5189a2f405eeaa5bb94a1c12413a2e5d14deabab29f2aa">autodrive_result::abort</a>;</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>    }</div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span>    <span class="keywordflow">if</span>( next_step-&gt;pos != veh_pos ) {</div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;compute_next_step returned an invalid result&quot;</span> );</div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>        <a class="code hl_function" href="classvehicle.html#a8d23ce82d669c714795a2ed9b679e3b9">stop_autodriving</a>();</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="vehicle_8h.html#a120e32a2f241b5f666c5189a2f405eeaa5bb94a1c12413a2e5d14deabab29f2aa">autodrive_result::abort</a>;</div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>    }</div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>    <span class="keywordflow">if</span>( next_step-&gt;target_speed_tps == 0 &amp;&amp; <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> == 0 ) {</div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>        <a class="code hl_function" href="classvehicle.html#a8d23ce82d669c714795a2ed9b679e3b9">stop_autodriving</a>( <span class="keyword">false</span> );</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="vehicle_8h.html#a120e32a2f241b5f666c5189a2f405eeaaa5d7ceb2c59b8cee46c2953fec9abc19">autodrive_result::finished</a>;</div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>    }</div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>    <a class="code hl_variable" href="classvehicle.html#abdf6601268460dc437ef079590deb33b">cruise_on</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span>    <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> = next_step-&gt;target_speed_tps * <a class="code hl_variable" href="vehicle__autodrive_8cpp.html#a0ee7409e4bf5385fe52d020f204e5f71">VMIPH_PER_TPS</a>;</div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span> </div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span>    <span class="comment">// check for collisions before we steer, since steering may end our turn</span></div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span>    <span class="comment">// which would cause the vehicle to move and maybe crash</span></div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>    <span class="keywordflow">switch</span>( <a class="code hl_variable" href="classvehicle.html#a5a81aa92070897147fbed2c61bad4825">active_autodrive_controller</a>-&gt;check_collision_zone( next_step-&gt;steering_dir ) ) {</div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="vehicle__autodrive_8cpp.html#a2aaa9378c358066aabd13008fbfe1e3aaa6c423ccc42ca8a587c1fc432952f327">collision_check_result::no_visibility</a>:</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span>            driver.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You can&#39;t see anything in front of your vehicle!&quot;</span> ) );</div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>            <a class="code hl_function" href="classvehicle.html#a8d23ce82d669c714795a2ed9b679e3b9">stop_autodriving</a>();</div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="vehicle_8h.html#a120e32a2f241b5f666c5189a2f405eeaa5bb94a1c12413a2e5d14deabab29f2aa">autodrive_result::abort</a>;</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="vehicle__autodrive_8cpp.html#a2aaa9378c358066aabd13008fbfe1e3aa79c72afc5b76b7deae279594faeaffd5">collision_check_result::close_obstacle</a>:</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span>            driver.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You&#39;re about to crash into something!&quot;</span> ) );</div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>            <a class="code hl_function" href="classvehicle.html#a8d23ce82d669c714795a2ed9b679e3b9">stop_autodriving</a>( <span class="keyword">false</span> );</div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="vehicle_8h.html#a120e32a2f241b5f666c5189a2f405eeaa5bb94a1c12413a2e5d14deabab29f2aa">autodrive_result::abort</a>;</div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="vehicle__autodrive_8cpp.html#a2aaa9378c358066aabd13008fbfe1e3aa5a439578513520e7a5c859a7bef3daf6">collision_check_result::slow_down</a>:</div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>            <a class="code hl_variable" href="classvehicle.html#a5a81aa92070897147fbed2c61bad4825">active_autodrive_controller</a>-&gt;reduce_speed();</div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> &gt; <a class="code hl_variable" href="vehicle__autodrive_8cpp.html#a0ee7409e4bf5385fe52d020f204e5f71">VMIPH_PER_TPS</a> ) {</div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>                <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> = <a class="code hl_variable" href="vehicle__autodrive_8cpp.html#a0ee7409e4bf5385fe52d020f204e5f71">VMIPH_PER_TPS</a>;</div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span>            }</div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="vehicle__autodrive_8cpp.html#a2aaa9378c358066aabd13008fbfe1e3aa444bcb3a3fcf8389296c49467f27e1d6">collision_check_result::ok</a>:</div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>    }</div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span> </div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>    <span class="keywordtype">int</span> turn_delta = <a class="code hl_function" href="vehicle__autodrive_8cpp.html#ab0c677ebf6f9916a89398678da92c930">orientation_diff</a>( next_step-&gt;steering_dir, <a class="code hl_function" href="vehicle__autodrive_8cpp.html#ad379756baf633e6a2c8c5b9c808401bf">to_orientation</a>( <a class="code hl_variable" href="classvehicle.html#af366981a584e12d25133fb479d47de33">turn_dir</a> ) );</div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>    <span class="comment">// pldrive() does not handle steering multiple times in one call correctly</span></div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>    <span class="comment">// call it multiple times, matching how a player controls the vehicle</span></div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; std::abs( turn_delta ); i++ ) {</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>        <span class="keywordflow">if</span>( driver.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> &lt;= 0 ) {</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>            <span class="comment">// we couldn&#39;t steer as many times as we wanted to but there&#39;s</span></div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>            <span class="comment">// nothing we can do about it now, hope we don&#39;t crash!</span></div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>        }</div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>        <a class="code hl_function" href="classvehicle.html#a8ee4e09fef222f0db06421381be4a354">pldrive</a>( driver, { <a class="code hl_function" href="vehicle__autodrive_8cpp.html#aa2c67b81922eb1586f30dc940782f57b">signum</a>( turn_delta ), 0 } );</div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>    }</div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>    <span class="comment">// Don&#39;t do anything else below; the driver&#39;s turn may be over (moves &lt;= 0) so</span></div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>    <span class="comment">// any extra actions would be &quot;cheating&quot;.</span></div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span> </div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="vehicle_8h.html#a120e32a2f241b5f666c5189a2f405eeaa444bcb3a3fcf8389296c49467f27e1d6">autodrive_result::ok</a>;</div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>}</div>
<div class="ttc" id="aclassCharacter_html_abf9fb0e53589386ea19d64a377ad6247"><div class="ttname"><a href="classCharacter.html#abf9fb0e53589386ea19d64a377ad6247">Character::omt_path</a></div><div class="ttdeci">std::vector&lt; tripoint_abs_omt &gt; omt_path</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01030">character.h:1030</a></div></div>
<div class="ttc" id="aclassCreature_html_a8c5a392caa213bee9581b47e9f0e2052"><div class="ttname"><a href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">Creature::moves</a></div><div class="ttdeci">int moves</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00569">creature.h:569</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point_html"><div class="ttname"><a href="classcoords_1_1coord__point.html">coords::coord_point&lt; tripoint, coords::origin::abs, coords::ms &gt;</a></div></div>
<div class="ttc" id="aclassvehicle_html_a5a81aa92070897147fbed2c61bad4825"><div class="ttname"><a href="classvehicle.html#a5a81aa92070897147fbed2c61bad4825">vehicle::active_autodrive_controller</a></div><div class="ttdeci">std::shared_ptr&lt; autodrive_controller &gt; active_autodrive_controller</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01826">vehicle.h:1825</a></div></div>
<div class="ttc" id="aclassvehicle_html_a8ee4e09fef222f0db06421381be4a354"><div class="ttname"><a href="classvehicle.html#a8ee4e09fef222f0db06421381be4a354">vehicle::pldrive</a></div><div class="ttdeci">void pldrive(Character &amp;driver, const point &amp;p, int z=0)</div><div class="ttdoc">Player is driving the vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l01061">vehicle_move.cpp:1061</a></div></div>
<div class="ttc" id="avehicle_8h_html_a120e32a2f241b5f666c5189a2f405eeaa444bcb3a3fcf8389296c49467f27e1d6"><div class="ttname"><a href="vehicle_8h.html#a120e32a2f241b5f666c5189a2f405eeaa444bcb3a3fcf8389296c49467f27e1d6">autodrive_result::ok</a></div><div class="ttdeci">@ ok</div></div>
<div class="ttc" id="avehicle_8h_html_a120e32a2f241b5f666c5189a2f405eeaa5bb94a1c12413a2e5d14deabab29f2aa"><div class="ttname"><a href="vehicle_8h.html#a120e32a2f241b5f666c5189a2f405eeaa5bb94a1c12413a2e5d14deabab29f2aa">autodrive_result::abort</a></div><div class="ttdeci">@ abort</div></div>
<div class="ttc" id="avehicle_8h_html_a120e32a2f241b5f666c5189a2f405eeaaa5d7ceb2c59b8cee46c2953fec9abc19"><div class="ttname"><a href="vehicle_8h.html#a120e32a2f241b5f666c5189a2f405eeaaa5d7ceb2c59b8cee46c2953fec9abc19">autodrive_result::finished</a></div><div class="ttdeci">@ finished</div></div>
<div class="ttc" id="avehicle__autodrive_8cpp_html_a0ee7409e4bf5385fe52d020f204e5f71"><div class="ttname"><a href="vehicle__autodrive_8cpp.html#a0ee7409e4bf5385fe52d020f204e5f71">VMIPH_PER_TPS</a></div><div class="ttdeci">static constexpr int VMIPH_PER_TPS</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00142">vehicle_autodrive.cpp:142</a></div></div>
<div class="ttc" id="avehicle__autodrive_8cpp_html_a2aaa9378c358066aabd13008fbfe1e3aa444bcb3a3fcf8389296c49467f27e1d6"><div class="ttname"><a href="vehicle__autodrive_8cpp.html#a2aaa9378c358066aabd13008fbfe1e3aa444bcb3a3fcf8389296c49467f27e1d6">collision_check_result::ok</a></div><div class="ttdeci">@ ok</div></div>
<div class="ttc" id="avehicle__autodrive_8cpp_html_a2aaa9378c358066aabd13008fbfe1e3aa5a439578513520e7a5c859a7bef3daf6"><div class="ttname"><a href="vehicle__autodrive_8cpp.html#a2aaa9378c358066aabd13008fbfe1e3aa5a439578513520e7a5c859a7bef3daf6">collision_check_result::slow_down</a></div><div class="ttdeci">@ slow_down</div></div>
<div class="ttc" id="avehicle__autodrive_8cpp_html_a2aaa9378c358066aabd13008fbfe1e3aa79c72afc5b76b7deae279594faeaffd5"><div class="ttname"><a href="vehicle__autodrive_8cpp.html#a2aaa9378c358066aabd13008fbfe1e3aa79c72afc5b76b7deae279594faeaffd5">collision_check_result::close_obstacle</a></div><div class="ttdeci">@ close_obstacle</div></div>
<div class="ttc" id="avehicle__autodrive_8cpp_html_a2aaa9378c358066aabd13008fbfe1e3aaa6c423ccc42ca8a587c1fc432952f327"><div class="ttname"><a href="vehicle__autodrive_8cpp.html#a2aaa9378c358066aabd13008fbfe1e3aaa6c423ccc42ca8a587c1fc432952f327">collision_check_result::no_visibility</a></div><div class="ttdeci">@ no_visibility</div></div>
<div class="ttc" id="avehicle__autodrive_8cpp_html_aa2c67b81922eb1586f30dc940782f57b"><div class="ttname"><a href="vehicle__autodrive_8cpp.html#aa2c67b81922eb1586f30dc940782f57b">signum</a></div><div class="ttdeci">static int signum(int val)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00555">vehicle_autodrive.cpp:555</a></div></div>
<div class="ttc" id="avehicle__autodrive_8cpp_html_ab0c677ebf6f9916a89398678da92c930"><div class="ttname"><a href="vehicle__autodrive_8cpp.html#ab0c677ebf6f9916a89398678da92c930">orientation_diff</a></div><div class="ttdeci">static int orientation_diff(const orientation &amp;dir1, const orientation &amp;dir2)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00453">vehicle_autodrive.cpp:453</a></div></div>
<div class="ttc" id="avehicle__autodrive_8cpp_html_ad379756baf633e6a2c8c5b9c808401bf"><div class="ttname"><a href="vehicle__autodrive_8cpp.html#ad379756baf633e6a2c8c5b9c808401bf">to_orientation</a></div><div class="ttdeci">static orientation to_orientation(units::angle angle)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00386">vehicle_autodrive.cpp:386</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="vehicle_8h.html#a120e32a2f241b5f666c5189a2f405eeaa5bb94a1c12413a2e5d14deabab29f2aa">abort</a>, <a class="el" href="vehicle_8h_source.html#l01825">active_autodrive_controller</a>, <a class="el" href="creature_8h_source.html#l00593">Creature::add_msg_if_player()</a>, <a class="el" href="vehicle__autodrive_8cpp.html#a2aaa9378c358066aabd13008fbfe1e3aa79c72afc5b76b7deae279594faeaffd5">close_obstacle</a>, <a class="el" href="vehicle_8h_source.html#l01928">cruise_on</a>, <a class="el" href="vehicle_8h_source.html#l01863">cruise_velocity</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="vehicle_8h.html#a120e32a2f241b5f666c5189a2f405eeaaa5d7ceb2c59b8cee46c2953fec9abc19">finished</a>, <a class="el" href="vehicle_8cpp_source.html#l03091">global_square_location()</a>, <a class="el" href="vehicle_8h_source.html#l01923">is_autodriving</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="vehicle__autodrive_8cpp.html#a2aaa9378c358066aabd13008fbfe1e3aaa6c423ccc42ca8a587c1fc432952f327">no_visibility</a>, <a class="el" href="vehicle__autodrive_8cpp.html#a2aaa9378c358066aabd13008fbfe1e3aa444bcb3a3fcf8389296c49467f27e1d6">ok</a>, <a class="el" href="character_8h_source.html#l01030">Character::omt_path</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00453">orientation_diff()</a>, <a class="el" href="vehicle_8cpp_source.html#l00277">player_in_control()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01061">pldrive()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00555">signum()</a>, <a class="el" href="vehicle_8h_source.html#l01940">skidding</a>, <a class="el" href="vehicle__autodrive_8cpp.html#a2aaa9378c358066aabd13008fbfe1e3aa5a439578513520e7a5c859a7bef3daf6">slow_down</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l01292">stop_autodriving()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00386">to_orientation()</a>, <a class="el" href="vehicle_8h_source.html#l01870">turn_dir</a>, <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>, and <a class="el" href="vehicle__autodrive_8cpp_source.html#l00142">VMIPH_PER_TPS</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l00335">autodrive_activity_actor::do_turn()</a>.</p>

</div>
</div>
<a id="adaf4a073304f9f96f055094f700b0134" name="adaf4a073304f9f96f055094f700b0134"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaf4a073304f9f96f055094f700b0134">&#9670;&nbsp;</a></span>do_engine_damage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::do_engine_damage </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>strain</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05018">5018</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05019" name="l05019"></a><span class="lineno"> 5019</span>{</div>
<div class="line"><a id="l05020" name="l05020"></a><span class="lineno"> 5020</span>    <a class="code hl_function" href="classvehicle.html#ac49843abe67be6f7f9c3fdaf92e2f411">strain</a> = std::min( 25, <a class="code hl_function" href="classvehicle.html#ac49843abe67be6f7f9c3fdaf92e2f411">strain</a> );</div>
<div class="line"><a id="l05021" name="l05021"></a><span class="lineno"> 5021</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a4d73f86ddc3aafe3231c33c098b9d6c8">is_engine_on</a>( e ) &amp;&amp; !<a class="code hl_function" href="classvehicle.html#a850e134844078b5efa1084fc1ebbeec0">is_perpetual_type</a>( e ) &amp;&amp;</div>
<div class="line"><a id="l05022" name="l05022"></a><span class="lineno"> 5022</span>        <a class="code hl_function" href="classvehicle.html#af615cefb430470fc97b60635a382bc7a">engine_fuel_left</a>( e ) &amp;&amp; <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 100 ) &lt; <a class="code hl_function" href="classvehicle.html#ac49843abe67be6f7f9c3fdaf92e2f411">strain</a> ) {</div>
<div class="line"><a id="l05023" name="l05023"></a><span class="lineno"> 5023</span>        <span class="keywordtype">int</span> dmg = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, <a class="code hl_function" href="classvehicle.html#ac49843abe67be6f7f9c3fdaf92e2f411">strain</a> * 4 );</div>
<div class="line"><a id="l05024" name="l05024"></a><span class="lineno"> 5024</span>        <a class="code hl_function" href="classvehicle.html#ac2de625db1619f042c4a3a69d0995a6a">damage_direct</a>( <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e], dmg );</div>
<div class="line"><a id="l05025" name="l05025"></a><span class="lineno"> 5025</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) ) {</div>
<div class="line"><a id="l05026" name="l05026"></a><span class="lineno"> 5026</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your engine emits a high pitched whine.&quot;</span> ) );</div>
<div class="line"><a id="l05027" name="l05027"></a><span class="lineno"> 5027</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05028" name="l05028"></a><span class="lineno"> 5028</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your engine emits a loud grinding sound.&quot;</span> ) );</div>
<div class="line"><a id="l05029" name="l05029"></a><span class="lineno"> 5029</span>        }</div>
<div class="line"><a id="l05030" name="l05030"></a><span class="lineno"> 5030</span>    }</div>
<div class="line"><a id="l05031" name="l05031"></a><span class="lineno"> 5031</span>}</div>
<div class="ttc" id="aclassvehicle_html_a4d73f86ddc3aafe3231c33c098b9d6c8"><div class="ttname"><a href="classvehicle.html#a4d73f86ddc3aafe3231c33c098b9d6c8">vehicle::is_engine_on</a></div><div class="ttdeci">bool is_engine_on(int e) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01087">vehicle.cpp:1087</a></div></div>
<div class="ttc" id="aclassvehicle_html_af615cefb430470fc97b60635a382bc7a"><div class="ttname"><a href="classvehicle.html#af615cefb430470fc97b60635a382bc7a">vehicle::engine_fuel_left</a></div><div class="ttdeci">int engine_fuel_left(int e, bool recurse=false) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03230">vehicle.cpp:3230</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="vehicle_8cpp_source.html#l06437">damage_direct()</a>, <a class="el" href="vehicle_8cpp_source.html#l03230">engine_fuel_left()</a>, <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, <a class="el" href="vehicle_8cpp_source.html#l01087">is_engine_on()</a>, <a class="el" href="vehicle_8cpp_source.html#l01081">is_perpetual_type()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04126">strain()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>.</p>

</div>
</div>
<a id="aa47aa8d1a535f8fd42b96a377ef6b1ff" name="aa47aa8d1a535f8fd42b96a377ef6b1ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa47aa8d1a535f8fd42b96a377ef6b1ff">&#9670;&nbsp;</a></span>do_environmental_effects()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::do_environmental_effects </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03604">3604</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03605" name="l03605"></a><span class="lineno"> 3605</span>{</div>
<div class="line"><a id="l03606" name="l03606"></a><span class="lineno"> 3606</span>    <span class="keywordtype">bool</span> needed = <span class="keyword">false</span>;</div>
<div class="line"><a id="l03607" name="l03607"></a><span class="lineno"> 3607</span>    <span class="comment">// check for smoking parts</span></div>
<div class="line"><a id="l03608" name="l03608"></a><span class="lineno"> 3608</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a397b40aa92dd1fd09ee592aa279bc656">get_all_parts</a>() ) {</div>
<div class="line"><a id="l03609" name="l03609"></a><span class="lineno"> 3609</span>        <span class="comment">/* Only lower blood level if:</span></div>
<div class="line"><a id="l03610" name="l03610"></a><span class="lineno"> 3610</span><span class="comment">         * - The part is outside.</span></div>
<div class="line"><a id="l03611" name="l03611"></a><span class="lineno"> 3611</span><span class="comment">         * - The weather is any effect that would cause the player to be wet. */</span></div>
<div class="line"><a id="l03612" name="l03612"></a><span class="lineno"> 3612</span>        <span class="keywordflow">if</span>( vp.part().blood &gt; 0 &amp;&amp; <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.is_outside( vp.pos() ) ) {</div>
<div class="line"><a id="l03613" name="l03613"></a><span class="lineno"> 3613</span>            needed = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03614" name="l03614"></a><span class="lineno"> 3614</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="group__Weather.html#gaa7b33196bf530c8b26654a0adf355165">get_weather</a>().weather_id-&gt;rains &amp;&amp;</div>
<div class="line"><a id="l03615" name="l03615"></a><span class="lineno"> 3615</span>                <a class="code hl_function" href="group__Weather.html#gaa7b33196bf530c8b26654a0adf355165">get_weather</a>().weather_id-&gt;precip != <a class="code hl_enumvalue" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a88a3c9c96a37d4acfb7d67b760fb3b4f">precip_class::very_light</a> ) {</div>
<div class="line"><a id="l03616" name="l03616"></a><span class="lineno"> 3616</span>                vp.part().blood--;</div>
<div class="line"><a id="l03617" name="l03617"></a><span class="lineno"> 3617</span>            }</div>
<div class="line"><a id="l03618" name="l03618"></a><span class="lineno"> 3618</span>        }</div>
<div class="line"><a id="l03619" name="l03619"></a><span class="lineno"> 3619</span>    }</div>
<div class="line"><a id="l03620" name="l03620"></a><span class="lineno"> 3620</span>    <span class="keywordflow">return</span> needed;</div>
<div class="line"><a id="l03621" name="l03621"></a><span class="lineno"> 3621</span>}</div>
<div class="ttc" id="agroup__Weather_html_gaa7b33196bf530c8b26654a0adf355165"><div class="ttname"><a href="group__Weather.html#gaa7b33196bf530c8b26654a0adf355165">get_weather</a></div><div class="ttdeci">weather_manager &amp; get_weather()</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00064">weather.cpp:64</a></div></div>
<div class="ttc" id="aweather__type_8h_html_a0b78777ab367c0db919aacd8bba938f0a88a3c9c96a37d4acfb7d67b760fb3b4f"><div class="ttname"><a href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a88a3c9c96a37d4acfb7d67b760fb3b4f">precip_class::very_light</a></div><div class="ttdeci">@ very_light</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l06882">get_all_parts()</a>, <a class="el" href="weather_8cpp_source.html#l00064">get_weather()</a>, and <a class="el" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a88a3c9c96a37d4acfb7d67b760fb3b4f">very_light</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05361">gain_moves()</a>.</p>

</div>
</div>
<a id="af9246519a74be61ee9a8b4da2888c2ed" name="af9246519a74be61ee9a8b4da2888c2ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9246519a74be61ee9a8b4da2888c2ed">&#9670;&nbsp;</a></span>do_towing_move()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::do_towing_move </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05745">5745</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05746" name="l05746"></a><span class="lineno"> 5746</span>{</div>
<div class="line"><a id="l05747" name="l05747"></a><span class="lineno"> 5747</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#a49867729934087d3589ea7e9ca2ad75b">no_towing_slack</a>() || <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &lt;= 0 ) {</div>
<div class="line"><a id="l05748" name="l05748"></a><span class="lineno"> 5748</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05749" name="l05749"></a><span class="lineno"> 5749</span>    }</div>
<div class="line"><a id="l05750" name="l05750"></a><span class="lineno"> 5750</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="namespaceui__manager.html#ad37246d94ab9b88c0730eb02ba60643b">invalidate</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05751" name="l05751"></a><span class="lineno"> 5751</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a4cc6247530a16020db73b3af28e0024e">get_towed</a>() ) {</div>
<div class="line"><a id="l05752" name="l05752"></a><span class="lineno"> 5752</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;tried to do towing move, but no towed vehicle!&quot;</span> );</div>
<div class="line"><a id="l05753" name="l05753"></a><span class="lineno"> 5753</span>        <a class="code hl_function" href="namespaceui__manager.html#ad37246d94ab9b88c0730eb02ba60643b">invalidate</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05754" name="l05754"></a><span class="lineno"> 5754</span>    }</div>
<div class="line"><a id="l05755" name="l05755"></a><span class="lineno"> 5755</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> tow_index = <a class="code hl_function" href="classvehicle.html#adb9be9ceedf5b5922879fad1646da8fb">get_tow_part</a>();</div>
<div class="line"><a id="l05756" name="l05756"></a><span class="lineno"> 5756</span>    <span class="keywordflow">if</span>( tow_index == -1 ) {</div>
<div class="line"><a id="l05757" name="l05757"></a><span class="lineno"> 5757</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;tried to do towing move, but no tow part&quot;</span> );</div>
<div class="line"><a id="l05758" name="l05758"></a><span class="lineno"> 5758</span>        <a class="code hl_function" href="namespaceui__manager.html#ad37246d94ab9b88c0730eb02ba60643b">invalidate</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05759" name="l05759"></a><span class="lineno"> 5759</span>    }</div>
<div class="line"><a id="l05760" name="l05760"></a><span class="lineno"> 5760</span>    <a class="code hl_class" href="classvehicle.html">vehicle</a> *towed_veh = <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a4cc6247530a16020db73b3af28e0024e">get_towed</a>();</div>
<div class="line"><a id="l05761" name="l05761"></a><span class="lineno"> 5761</span>    <span class="keywordflow">if</span>( !towed_veh ) {</div>
<div class="line"><a id="l05762" name="l05762"></a><span class="lineno"> 5762</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;tried to do towing move, but towed vehicle dosnt exist.&quot;</span> );</div>
<div class="line"><a id="l05763" name="l05763"></a><span class="lineno"> 5763</span>        <a class="code hl_function" href="classvehicle.html#ad874a1fdccab8e70b60d887fc0d56b7e">invalidate_towing</a>();</div>
<div class="line"><a id="l05764" name="l05764"></a><span class="lineno"> 5764</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05765" name="l05765"></a><span class="lineno"> 5765</span>    }</div>
<div class="line"><a id="l05766" name="l05766"></a><span class="lineno"> 5766</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> other_tow_index = towed_veh-&gt;<a class="code hl_function" href="classvehicle.html#adb9be9ceedf5b5922879fad1646da8fb">get_tow_part</a>();</div>
<div class="line"><a id="l05767" name="l05767"></a><span class="lineno"> 5767</span>    <span class="keywordflow">if</span>( other_tow_index == -1 ) {</div>
<div class="line"><a id="l05768" name="l05768"></a><span class="lineno"> 5768</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;tried to do towing move but towed vehicle has no towing part&quot;</span> );</div>
<div class="line"><a id="l05769" name="l05769"></a><span class="lineno"> 5769</span>        <a class="code hl_function" href="namespaceui__manager.html#ad37246d94ab9b88c0730eb02ba60643b">invalidate</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05770" name="l05770"></a><span class="lineno"> 5770</span>    }</div>
<div class="line"><a id="l05771" name="l05771"></a><span class="lineno"> 5771</span>    <span class="keywordflow">if</span>( towed_veh-&gt;<a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>().<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> != <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>().z ) {</div>
<div class="line"><a id="l05772" name="l05772"></a><span class="lineno"> 5772</span>        <span class="comment">// how the hellicopter did this happen?</span></div>
<div class="line"><a id="l05773" name="l05773"></a><span class="lineno"> 5773</span>        <span class="comment">// yes, this can happen when towing over a bridge (see #47293)</span></div>
<div class="line"><a id="l05774" name="l05774"></a><span class="lineno"> 5774</span>        <a class="code hl_function" href="namespaceui__manager.html#ad37246d94ab9b88c0730eb02ba60643b">invalidate</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05775" name="l05775"></a><span class="lineno"> 5775</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A towing cable snaps off of %s.&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a4cc6247530a16020db73b3af28e0024e">get_towed</a>()-&gt;<a class="code hl_function" href="classvehicle.html#ace5c25f3faffd8848491570cfb89f086">disp_name</a>() );</div>
<div class="line"><a id="l05776" name="l05776"></a><span class="lineno"> 5776</span>    }</div>
<div class="line"><a id="l05777" name="l05777"></a><span class="lineno"> 5777</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespaceui__manager.html#ad37246d94ab9b88c0730eb02ba60643b">invalidate</a> ) {</div>
<div class="line"><a id="l05778" name="l05778"></a><span class="lineno"> 5778</span>        <a class="code hl_function" href="classvehicle.html#ad874a1fdccab8e70b60d887fc0d56b7e">invalidate_towing</a>( <span class="keyword">true</span> );</div>
<div class="line"><a id="l05779" name="l05779"></a><span class="lineno"> 5779</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05780" name="l05780"></a><span class="lineno"> 5780</span>    }</div>
<div class="line"><a id="l05781" name="l05781"></a><span class="lineno"> 5781</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> tower_tow_point = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.getabs( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( tow_index ) );</div>
<div class="line"><a id="l05782" name="l05782"></a><span class="lineno"> 5782</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> towed_tow_point = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.getabs( towed_veh-&gt;<a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( other_tow_index ) );</div>
<div class="line"><a id="l05783" name="l05783"></a><span class="lineno"> 5783</span>    <span class="comment">// same as above, but where the pulling vehicle is pulling from</span></div>
<div class="line"><a id="l05784" name="l05784"></a><span class="lineno"> 5784</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::angle</a> towing_veh_angle = towed_veh-&gt;<a class="code hl_function" href="classvehicle.html#a29bd874a59dfbdac6c6c9b5f0032680e">get_angle_from_targ</a>( tower_tow_point );</div>
<div class="line"><a id="l05785" name="l05785"></a><span class="lineno"> 5785</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> reverse = towed_veh-&gt;<a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_variable" href="classtowing__data.html#aad5a9d3c2915f325ea2d2eda09d146dd">tow_direction</a> == <a class="code hl_enumvalue" href="vehicle_8h.html#a39a3696f788e37c7c3e2231d358f1eacaf59e8ef77cbda2984ea39fa8c005c763">TOW_BACK</a>;</div>
<div class="line"><a id="l05786" name="l05786"></a><span class="lineno"> 5786</span>    <span class="keywordtype">int</span> accel_y = 0;</div>
<div class="line"><a id="l05787" name="l05787"></a><span class="lineno"> 5787</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> vehpos = <a class="code hl_function" href="classvehicle.html#a789289c4179f7677e45cb100ff5ffb9a">global_square_location</a>().<a class="code hl_function" href="classcoords_1_1coord__point.html#a3f9a44403c08f2eaf0d605b1d034c048">raw</a>();</div>
<div class="line"><a id="l05788" name="l05788"></a><span class="lineno"> 5788</span>    <span class="keywordtype">int</span> turn_x = <a class="code hl_function" href="vehicle_8cpp.html#a385c3efba8ad324cd42715ea90251a04">get_turn_from_angle</a>( towing_veh_angle, vehpos, tower_tow_point, reverse );</div>
<div class="line"><a id="l05789" name="l05789"></a><span class="lineno"> 5789</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( towed_tow_point, tower_tow_point ) &lt; 6 ) {</div>
<div class="line"><a id="l05790" name="l05790"></a><span class="lineno"> 5790</span>        accel_y = reverse ? -1 : 1;</div>
<div class="line"><a id="l05791" name="l05791"></a><span class="lineno"> 5791</span>    }</div>
<div class="line"><a id="l05792" name="l05792"></a><span class="lineno"> 5792</span>    <span class="keywordflow">if</span>( towed_veh-&gt;<a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &lt;= <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &amp;&amp; <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( towed_tow_point, tower_tow_point ) &gt;= 7 ) {</div>
<div class="line"><a id="l05793" name="l05793"></a><span class="lineno"> 5793</span>        accel_y = reverse ? 1 : -1;</div>
<div class="line"><a id="l05794" name="l05794"></a><span class="lineno"> 5794</span>    }</div>
<div class="line"><a id="l05795" name="l05795"></a><span class="lineno"> 5795</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( towed_tow_point, tower_tow_point ) &gt;= 12 ) {</div>
<div class="line"><a id="l05796" name="l05796"></a><span class="lineno"> 5796</span>        towed_veh-&gt;<a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> = <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> * 1.8;</div>
<div class="line"><a id="l05797" name="l05797"></a><span class="lineno"> 5797</span>        <span class="keywordflow">if</span>( reverse ) {</div>
<div class="line"><a id="l05798" name="l05798"></a><span class="lineno"> 5798</span>            towed_veh-&gt;<a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> = -towed_veh-&gt;<a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a>;</div>
<div class="line"><a id="l05799" name="l05799"></a><span class="lineno"> 5799</span>        }</div>
<div class="line"><a id="l05800" name="l05800"></a><span class="lineno"> 5800</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05801" name="l05801"></a><span class="lineno"> 5801</span>        towed_veh-&gt;<a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> = reverse ? -<a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> : <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a>;</div>
<div class="line"><a id="l05802" name="l05802"></a><span class="lineno"> 5802</span>    }</div>
<div class="line"><a id="l05803" name="l05803"></a><span class="lineno"> 5803</span>    <span class="keywordflow">if</span>( towed_veh-&gt;<a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_variable" href="classtowing__data.html#aad5a9d3c2915f325ea2d2eda09d146dd">tow_direction</a> == <a class="code hl_enumvalue" href="vehicle_8h.html#a39a3696f788e37c7c3e2231d358f1eacab6c366b229a91bf230e56f1ebbb466dc">TOW_FRONT</a> ) {</div>
<div class="line"><a id="l05804" name="l05804"></a><span class="lineno"> 5804</span>        towed_veh-&gt;<a class="code hl_function" href="classvehicle.html#ac8a5271d6aeae28a1bd341800cc5254d">selfdrive</a>( <a class="code hl_struct" href="structpoint.html">point</a>( turn_x, accel_y ) );</div>
<div class="line"><a id="l05805" name="l05805"></a><span class="lineno"> 5805</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( towed_veh-&gt;<a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_variable" href="classtowing__data.html#aad5a9d3c2915f325ea2d2eda09d146dd">tow_direction</a> == <a class="code hl_enumvalue" href="vehicle_8h.html#a39a3696f788e37c7c3e2231d358f1eacaf59e8ef77cbda2984ea39fa8c005c763">TOW_BACK</a> ) {</div>
<div class="line"><a id="l05806" name="l05806"></a><span class="lineno"> 5806</span>        accel_y = 10;</div>
<div class="line"><a id="l05807" name="l05807"></a><span class="lineno"> 5807</span>        towed_veh-&gt;<a class="code hl_function" href="classvehicle.html#ac8a5271d6aeae28a1bd341800cc5254d">selfdrive</a>( <a class="code hl_struct" href="structpoint.html">point</a>( turn_x, accel_y ) );</div>
<div class="line"><a id="l05808" name="l05808"></a><span class="lineno"> 5808</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05809" name="l05809"></a><span class="lineno"> 5809</span>        towed_veh-&gt;<a class="code hl_variable" href="classvehicle.html#a320ca34b5c38568efd801731cef78a35">skidding</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05810" name="l05810"></a><span class="lineno"> 5810</span>        std::vector&lt;tripoint&gt; lineto = <a class="code hl_function" href="coordinates_8h.html#a4a34f7ffa4c18effba7f8239c68c8738">line_to</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.getlocal( towed_tow_point ),</div>
<div class="line"><a id="l05811" name="l05811"></a><span class="lineno"> 5811</span>                                                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.getlocal( tower_tow_point ) );</div>
<div class="line"><a id="l05812" name="l05812"></a><span class="lineno"> 5812</span>        <a class="code hl_struct" href="structtripoint.html">tripoint</a> nearby_destination;</div>
<div class="line"><a id="l05813" name="l05813"></a><span class="lineno"> 5813</span>        <span class="keywordflow">if</span>( lineto.size() &gt;= 2 ) {</div>
<div class="line"><a id="l05814" name="l05814"></a><span class="lineno"> 5814</span>            nearby_destination = lineto[1];</div>
<div class="line"><a id="l05815" name="l05815"></a><span class="lineno"> 5815</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05816" name="l05816"></a><span class="lineno"> 5816</span>            nearby_destination = tower_tow_point;</div>
<div class="line"><a id="l05817" name="l05817"></a><span class="lineno"> 5817</span>        }</div>
<div class="line"><a id="l05818" name="l05818"></a><span class="lineno"> 5818</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> destination_delta_x = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.getlocal( tower_tow_point ).x - nearby_destination.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a>;</div>
<div class="line"><a id="l05819" name="l05819"></a><span class="lineno"> 5819</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> destination_delta_y = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.getlocal( tower_tow_point ).y - nearby_destination.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a>;</div>
<div class="line"><a id="l05820" name="l05820"></a><span class="lineno"> 5820</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> destination_delta_z = towed_veh-&gt;<a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>().<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>;</div>
<div class="line"><a id="l05821" name="l05821"></a><span class="lineno"> 5821</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> move_destination( <a class="code hl_function" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( destination_delta_x, -1, 1 ),</div>
<div class="line"><a id="l05822" name="l05822"></a><span class="lineno"> 5822</span>                                         <a class="code hl_function" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( destination_delta_y, -1, 1 ),</div>
<div class="line"><a id="l05823" name="l05823"></a><span class="lineno"> 5823</span>                                         <a class="code hl_function" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( destination_delta_z, -1, 1 ) );</div>
<div class="line"><a id="l05824" name="l05824"></a><span class="lineno"> 5824</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.move_vehicle( *towed_veh, move_destination, towed_veh-&gt;<a class="code hl_variable" href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">face</a> );</div>
<div class="line"><a id="l05825" name="l05825"></a><span class="lineno"> 5825</span>        towed_veh-&gt;<a class="code hl_variable" href="classvehicle.html#a8bbdfb41ea75fdc007feab08e2137aa2">move</a> = <a class="code hl_class" href="classtileray.html">tileray</a>( <a class="code hl_struct" href="structpoint.html">point</a>( destination_delta_x, destination_delta_y ) );</div>
<div class="line"><a id="l05826" name="l05826"></a><span class="lineno"> 5826</span>    }</div>
<div class="line"><a id="l05827" name="l05827"></a><span class="lineno"> 5827</span> </div>
<div class="line"><a id="l05828" name="l05828"></a><span class="lineno"> 5828</span>}</div>
<div class="ttc" id="acata__utility_8h_html_ad22b4a043b6eb4c2c06f87f83b720b15"><div class="ttname"><a href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a></div><div class="ttdeci">constexpr T clamp(const T &amp;val, const T &amp;min, const T &amp;max)</div><div class="ttdoc">Clamp first argument so that it is no lower than second and no higher than third.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00145">cata_utility.h:145</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point_html_a3f9a44403c08f2eaf0d605b1d034c048"><div class="ttname"><a href="classcoords_1_1coord__point.html#a3f9a44403c08f2eaf0d605b1d034c048">coords::coord_point::raw</a></div><div class="ttdeci">constexpr Point &amp; raw()</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00111">coordinates.h:111</a></div></div>
<div class="ttc" id="aclasstowing__data_html_a4cc6247530a16020db73b3af28e0024e"><div class="ttname"><a href="classtowing__data.html#a4cc6247530a16020db73b3af28e0024e">towing_data::get_towed</a></div><div class="ttdeci">vehicle * get_towed() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00158">vehicle.h:158</a></div></div>
<div class="ttc" id="aclasstowing__data_html_aad5a9d3c2915f325ea2d2eda09d146dd"><div class="ttname"><a href="classtowing__data.html#aad5a9d3c2915f325ea2d2eda09d146dd">towing_data::tow_direction</a></div><div class="ttdeci">towing_point_side tow_direction</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00165">vehicle.h:165</a></div></div>
<div class="ttc" id="aclassvehicle_html_a29bd874a59dfbdac6c6c9b5f0032680e"><div class="ttname"><a href="classvehicle.html#a29bd874a59dfbdac6c6c9b5f0032680e">vehicle::get_angle_from_targ</a></div><div class="ttdeci">units::angle get_angle_from_targ(const tripoint &amp;targ)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l00916">vehicle.cpp:916</a></div></div>
<div class="ttc" id="aclassvehicle_html_a49867729934087d3589ea7e9ca2ad75b"><div class="ttname"><a href="classvehicle.html#a49867729934087d3589ea7e9ca2ad75b">vehicle::no_towing_slack</a></div><div class="ttdeci">bool no_towing_slack() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06005">vehicle.cpp:6005</a></div></div>
<div class="ttc" id="aclassvehicle_html_ac8a5271d6aeae28a1bd341800cc5254d"><div class="ttname"><a href="classvehicle.html#ac8a5271d6aeae28a1bd341800cc5254d">vehicle::selfdrive</a></div><div class="ttdeci">void selfdrive(const point &amp;)</div><div class="ttdoc">vehicle is driving itself</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l00933">vehicle_move.cpp:933</a></div></div>
<div class="ttc" id="aclassvehicle_html_ace5c25f3faffd8848491570cfb89f086"><div class="ttname"><a href="classvehicle.html#ace5c25f3faffd8848491570cfb89f086">vehicle::disp_name</a></div><div class="ttdeci">std::string disp_name() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__display_8cpp_source.html#l00029">vehicle_display.cpp:29</a></div></div>
<div class="ttc" id="aclassvehicle_html_adb9be9ceedf5b5922879fad1646da8fb"><div class="ttname"><a href="classvehicle.html#adb9be9ceedf5b5922879fad1646da8fb">vehicle::get_tow_part</a></div><div class="ttdeci">int get_tow_part() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05874">vehicle.cpp:5874</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a4a34f7ffa4c18effba7f8239c68c8738"><div class="ttname"><a href="coordinates_8h.html#a4a34f7ffa4c18effba7f8239c68c8738">line_to</a></div><div class="ttdeci">std::vector&lt; coords::coord_point&lt; Point, Origin, Scale &gt; &gt; line_to(const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00548">coordinates.h:548</a></div></div>
<div class="ttc" id="anamespaceui__manager_html_ad37246d94ab9b88c0730eb02ba60643b"><div class="ttname"><a href="namespaceui__manager.html#ad37246d94ab9b88c0730eb02ba60643b">ui_manager::invalidate</a></div><div class="ttdeci">void invalidate(const rectangle&lt; point &gt; &amp;rect, const bool reenable_uis_below)</div><div class="ttdef"><b>Definition:</b> <a href="ui__manager_8cpp_source.html#l00280">ui_manager.cpp:280</a></div></div>
<div class="ttc" id="avehicle_8cpp_html_a385c3efba8ad324cd42715ea90251a04"><div class="ttname"><a href="vehicle_8cpp.html#a385c3efba8ad324cd42715ea90251a04">get_turn_from_angle</a></div><div class="ttdeci">static int get_turn_from_angle(const units::angle angle, const tripoint &amp;vehpos, const tripoint &amp;target, bool reverse=false)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l00793">vehicle.cpp:793</a></div></div>
<div class="ttc" id="avehicle_8h_html_a39a3696f788e37c7c3e2231d358f1eacab6c366b229a91bf230e56f1ebbb466dc"><div class="ttname"><a href="vehicle_8h.html#a39a3696f788e37c7c3e2231d358f1eacab6c366b229a91bf230e56f1ebbb466dc">TOW_FRONT</a></div><div class="ttdeci">@ TOW_FRONT</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00140">vehicle.h:140</a></div></div>
<div class="ttc" id="avehicle_8h_html_a39a3696f788e37c7c3e2231d358f1eacaf59e8ef77cbda2984ea39fa8c005c763"><div class="ttname"><a href="vehicle_8h.html#a39a3696f788e37c7c3e2231d358f1eacaf59e8ef77cbda2984ea39fa8c005c763">TOW_BACK</a></div><div class="ttdeci">@ TOW_BACK</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00142">vehicle.h:142</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="cata__utility_8h_source.html#l00145">clamp()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00029">disp_name()</a>, <a class="el" href="vehicle_8h_source.html#l01891">face</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l00916">get_angle_from_targ()</a>, <a class="el" href="vehicle_8cpp_source.html#l05874">get_tow_part()</a>, <a class="el" href="vehicle_8h_source.html#l00158">towing_data::get_towed()</a>, <a class="el" href="vehicle_8cpp_source.html#l00793">get_turn_from_angle()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l03101">global_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l03091">global_square_location()</a>, <a class="el" href="ui__manager_8cpp_source.html#l00280">ui_manager::invalidate()</a>, <a class="el" href="vehicle_8cpp_source.html#l05939">invalidate_towing()</a>, <a class="el" href="coordinates_8h_source.html#l00548">line_to()</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="vehicle_8h_source.html#l01893">move</a>, <a class="el" href="vehicle_8cpp_source.html#l06005">no_towing_slack()</a>, <a class="el" href="coordinates_8h_source.html#l00111">coords::coord_point&lt; Point, Origin, Scale &gt;::raw()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00933">selfdrive()</a>, <a class="el" href="vehicle_8h_source.html#l01940">skidding</a>, <a class="el" href="vehicle_8h_source.html#l00142">TOW_BACK</a>, <a class="el" href="vehicle_8h_source.html#l01887">tow_data</a>, <a class="el" href="vehicle_8h_source.html#l00165">towing_data::tow_direction</a>, <a class="el" href="vehicle_8h_source.html#l00140">TOW_FRONT</a>, <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>, <a class="el" href="point_8h_source.html#l00150">tripoint::x</a>, <a class="el" href="point_8h_source.html#l00151">tripoint::y</a>, and <a class="el" href="point_8h_source.html#l00152">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>.</p>

</div>
</div>
<a id="a2b28d63a4879b75d5a186289c54f6330" name="a2b28d63a4879b75d5a186289c54f6330"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b28d63a4879b75d5a186289c54f6330">&#9670;&nbsp;</a></span>drain() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::drain </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>ftype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>amount</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03246">3246</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03247" name="l03247"></a><span class="lineno"> 3247</span>{</div>
<div class="line"><a id="l03248" name="l03248"></a><span class="lineno"> 3248</span>    <span class="keywordflow">if</span>( ftype == <a class="code hl_variable" href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a> ) {</div>
<div class="line"><a id="l03249" name="l03249"></a><span class="lineno"> 3249</span>        <span class="comment">// Batteries get special handling to take advantage of jumper</span></div>
<div class="line"><a id="l03250" name="l03250"></a><span class="lineno"> 3250</span>        <span class="comment">// cables -- discharge_battery knows how to recurse properly</span></div>
<div class="line"><a id="l03251" name="l03251"></a><span class="lineno"> 3251</span>        <span class="comment">// (including taking cable power loss into account).</span></div>
<div class="line"><a id="l03252" name="l03252"></a><span class="lineno"> 3252</span>        <span class="keywordtype">int</span> remnant = <a class="code hl_function" href="classvehicle.html#acb03f8288804b551378478137e9cea11">discharge_battery</a>( amount, <span class="keyword">true</span> );</div>
<div class="line"><a id="l03253" name="l03253"></a><span class="lineno"> 3253</span> </div>
<div class="line"><a id="l03254" name="l03254"></a><span class="lineno"> 3254</span>        <span class="comment">// discharge_battery returns amount of charges that were not</span></div>
<div class="line"><a id="l03255" name="l03255"></a><span class="lineno"> 3255</span>        <span class="comment">// found anywhere in the power network, whereas this function</span></div>
<div class="line"><a id="l03256" name="l03256"></a><span class="lineno"> 3256</span>        <span class="comment">// returns amount of charges consumed; simple subtraction.</span></div>
<div class="line"><a id="l03257" name="l03257"></a><span class="lineno"> 3257</span>        <span class="keywordflow">return</span> amount - remnant;</div>
<div class="line"><a id="l03258" name="l03258"></a><span class="lineno"> 3258</span>    }</div>
<div class="line"><a id="l03259" name="l03259"></a><span class="lineno"> 3259</span> </div>
<div class="line"><a id="l03260" name="l03260"></a><span class="lineno"> 3260</span>    <span class="keywordtype">int</span> drained = 0;</div>
<div class="line"><a id="l03261" name="l03261"></a><span class="lineno"> 3261</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;p : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l03262" name="l03262"></a><span class="lineno"> 3262</span>        <span class="keywordflow">if</span>( amount &lt;= 0 ) {</div>
<div class="line"><a id="l03263" name="l03263"></a><span class="lineno"> 3263</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03264" name="l03264"></a><span class="lineno"> 3264</span>        }</div>
<div class="line"><a id="l03265" name="l03265"></a><span class="lineno"> 3265</span>        <span class="keywordflow">if</span>( p.ammo_current() == ftype ) {</div>
<div class="line"><a id="l03266" name="l03266"></a><span class="lineno"> 3266</span>            <span class="keywordtype">int</span> qty = p.ammo_consume( amount, <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( p ) );</div>
<div class="line"><a id="l03267" name="l03267"></a><span class="lineno"> 3267</span>            drained += qty;</div>
<div class="line"><a id="l03268" name="l03268"></a><span class="lineno"> 3268</span>            amount -= qty;</div>
<div class="line"><a id="l03269" name="l03269"></a><span class="lineno"> 3269</span>        }</div>
<div class="line"><a id="l03270" name="l03270"></a><span class="lineno"> 3270</span>    }</div>
<div class="line"><a id="l03271" name="l03271"></a><span class="lineno"> 3271</span> </div>
<div class="line"><a id="l03272" name="l03272"></a><span class="lineno"> 3272</span>    <a class="code hl_function" href="classvehicle.html#a8e8079a6591b3104191c881509f16d61">invalidate_mass</a>();</div>
<div class="line"><a id="l03273" name="l03273"></a><span class="lineno"> 3273</span>    <span class="keywordflow">return</span> drained;</div>
<div class="line"><a id="l03274" name="l03274"></a><span class="lineno"> 3274</span>}</div>
<div class="ttc" id="aclassvehicle_html_acb03f8288804b551378478137e9cea11"><div class="ttname"><a href="classvehicle.html#acb03f8288804b551378478137e9cea11">vehicle::discharge_battery</a></div><div class="ttdeci">int discharge_battery(int amount, bool recurse=true)</div><div class="ttdoc">Try to discharge our (and, optionally, connected vehicles') batteries by the given amount.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04973">vehicle.cpp:4973</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l04973">discharge_battery()</a>, <a class="el" href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l06778">invalidate_mass()</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02896">act_vehicle_siphon()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02928">act_vehicle_unload_fuel()</a>, <a class="el" href="veh__interact_8cpp_source.html#l01917">veh_interact::do_siphon()</a>, <a class="el" href="vehicle_8cpp_source.html#l03276">drain()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l01488">activity_handlers::fill_liquid_do_turn()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>, <a class="el" href="turret_8cpp_source.html#l00275">turret_data::post_fire()</a>, <a class="el" href="player_8cpp_source.html#l01380">player::siphon()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01556">use_autoclave()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01691">use_dishwasher()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l01606">use_washing_machine()</a>.</p>

</div>
</div>
<a id="af7b87d3b23c752e0c118a7fa913be276" name="af7b87d3b23c752e0c118a7fa913be276"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7b87d3b23c752e0c118a7fa913be276">&#9670;&nbsp;</a></span>drain() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::drain </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>amount</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03276">3276</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03277" name="l03277"></a><span class="lineno"> 3277</span>{</div>
<div class="line"><a id="l03278" name="l03278"></a><span class="lineno"> 3278</span>    <span class="keywordflow">if</span>( index &lt; 0 || index &gt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size() ) ) {</div>
<div class="line"><a id="l03279" name="l03279"></a><span class="lineno"> 3279</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to drain an invalid part index: %d&quot;</span>, index );</div>
<div class="line"><a id="l03280" name="l03280"></a><span class="lineno"> 3280</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l03281" name="l03281"></a><span class="lineno"> 3281</span>    }</div>
<div class="line"><a id="l03282" name="l03282"></a><span class="lineno"> 3282</span>    <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;pt = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_enumvalue" href="namespacedetail.html#ac4c79842ec549e8b02145d43a1fbc330a6a992d5529f459a44fee58c733255e86">index</a>];</div>
<div class="line"><a id="l03283" name="l03283"></a><span class="lineno"> 3283</span>    <span class="keywordflow">if</span>( pt.<a class="code hl_function" href="structvehicle__part.html#ad8e149b4d200656c134e3f90f82f3fe4">ammo_current</a>() == <a class="code hl_variable" href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a> ) {</div>
<div class="line"><a id="l03284" name="l03284"></a><span class="lineno"> 3284</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a2b28d63a4879b75d5a186289c54f6330">drain</a>( <a class="code hl_variable" href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, amount );</div>
<div class="line"><a id="l03285" name="l03285"></a><span class="lineno"> 3285</span>    }</div>
<div class="line"><a id="l03286" name="l03286"></a><span class="lineno"> 3286</span>    <span class="keywordflow">if</span>( !pt.<a class="code hl_function" href="structvehicle__part.html#a1acf6a662e684e35e9ef4c26f02b4a42">is_tank</a>() || !pt.<a class="code hl_function" href="structvehicle__part.html#a9c6bf106558c9ed00536e2d7cb0e862d">ammo_remaining</a>() ) {</div>
<div class="line"><a id="l03287" name="l03287"></a><span class="lineno"> 3287</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to drain something without any liquid: %s amount: %d ammo: %d&quot;</span>,</div>
<div class="line"><a id="l03288" name="l03288"></a><span class="lineno"> 3288</span>                  pt.<a class="code hl_function" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>(), amount, pt.<a class="code hl_function" href="structvehicle__part.html#a9c6bf106558c9ed00536e2d7cb0e862d">ammo_remaining</a>() );</div>
<div class="line"><a id="l03289" name="l03289"></a><span class="lineno"> 3289</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l03290" name="l03290"></a><span class="lineno"> 3290</span>    }</div>
<div class="line"><a id="l03291" name="l03291"></a><span class="lineno"> 3291</span> </div>
<div class="line"><a id="l03292" name="l03292"></a><span class="lineno"> 3292</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> drained = pt.<a class="code hl_function" href="structvehicle__part.html#aba8156669b1112e8ff258878066505b9">ammo_consume</a>( amount, <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( pt ) );</div>
<div class="line"><a id="l03293" name="l03293"></a><span class="lineno"> 3293</span>    <a class="code hl_function" href="classvehicle.html#a8e8079a6591b3104191c881509f16d61">invalidate_mass</a>();</div>
<div class="line"><a id="l03294" name="l03294"></a><span class="lineno"> 3294</span>    <span class="keywordflow">return</span> drained;</div>
<div class="line"><a id="l03295" name="l03295"></a><span class="lineno"> 3295</span>}</div>
<div class="ttc" id="aclassvehicle_html_a2b28d63a4879b75d5a186289c54f6330"><div class="ttname"><a href="classvehicle.html#a2b28d63a4879b75d5a186289c54f6330">vehicle::drain</a></div><div class="ttdeci">int drain(const itype_id &amp;ftype, int amount)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03246">vehicle.cpp:3246</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a1acf6a662e684e35e9ef4c26f02b4a42"><div class="ttname"><a href="structvehicle__part.html#a1acf6a662e684e35e9ef4c26f02b4a42">vehicle_part::is_tank</a></div><div class="ttdeci">bool is_tank() const</div><div class="ttdoc">Can this part contain liquid fuels?</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00489">vehicle_part.cpp:489</a></div></div>
<div class="ttc" id="astructvehicle__part_html_ad8e149b4d200656c134e3f90f82f3fe4"><div class="ttname"><a href="structvehicle__part.html#ad8e149b4d200656c134e3f90f82f3fe4">vehicle_part::ammo_current</a></div><div class="ttdeci">itype_id ammo_current() const</div><div class="ttdoc">Specific type of fuel, charges or ammunition currently contained by a part.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00211">vehicle_part.cpp:211</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle__part_8cpp_source.html#l00288">vehicle_part::ammo_consume()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00211">vehicle_part::ammo_current()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00241">vehicle_part::ammo_remaining()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="vehicle_8cpp_source.html#l03246">drain()</a>, <a class="el" href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l06778">invalidate_mass()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00489">vehicle_part::is_tank()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00105">vehicle_part::name()</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

</div>
</div>
<a id="a89d72d47c4284b751fd8bebf52febdc4" name="a89d72d47c4284b751fd8bebf52febdc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89d72d47c4284b751fd8bebf52febdc4">&#9670;&nbsp;</a></span>drain_energy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double vehicle::drain_energy </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>ftype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>energy_j</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Consumes enough fuel by energy content. </p>
<p >Does not support cable draining. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ftype</td><td>Type of fuel </td></tr>
    <tr><td class="paramname">energy_j</td><td>Desired amount of energy of fuel to consume </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Amount of energy actually consumed. May be more or less than energy. </dd></dl>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04371">4371</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04372" name="l04372"></a><span class="lineno"> 4372</span>{</div>
<div class="line"><a id="l04373" name="l04373"></a><span class="lineno"> 4373</span>    <span class="comment">// Consumption of battery power is done differently.</span></div>
<div class="line"><a id="l04374" name="l04374"></a><span class="lineno"> 4374</span>    <span class="comment">// From all batteries at once and doesn&#39;t change mass.</span></div>
<div class="line"><a id="l04375" name="l04375"></a><span class="lineno"> 4375</span>    <span class="keywordflow">if</span>( ftype == <a class="code hl_variable" href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a> ) {</div>
<div class="line"><a id="l04376" name="l04376"></a><span class="lineno"> 4376</span>        <span class="comment">// Batteries stored in kilojoules</span></div>
<div class="line"><a id="l04377" name="l04377"></a><span class="lineno"> 4377</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> total_kj_to_drain = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( energy_j / 1000.0 );</div>
<div class="line"><a id="l04378" name="l04378"></a><span class="lineno"> 4378</span>        <span class="keywordflow">if</span>( total_kj_to_drain &lt;= 0 ) {</div>
<div class="line"><a id="l04379" name="l04379"></a><span class="lineno"> 4379</span>            <span class="keywordflow">return</span> 0.0;</div>
<div class="line"><a id="l04380" name="l04380"></a><span class="lineno"> 4380</span>        }</div>
<div class="line"><a id="l04381" name="l04381"></a><span class="lineno"> 4381</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> not_fulfilled = <a class="code hl_function" href="classvehicle.html#acb03f8288804b551378478137e9cea11">discharge_battery</a>( total_kj_to_drain );</div>
<div class="line"><a id="l04382" name="l04382"></a><span class="lineno"> 4382</span>        <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( total_kj_to_drain - not_fulfilled ) * 1000.0;</div>
<div class="line"><a id="l04383" name="l04383"></a><span class="lineno"> 4383</span>    }</div>
<div class="line"><a id="l04384" name="l04384"></a><span class="lineno"> 4384</span> </div>
<div class="line"><a id="l04385" name="l04385"></a><span class="lineno"> 4385</span>    <span class="keywordtype">double</span> drained = 0.0f;</div>
<div class="line"><a id="l04386" name="l04386"></a><span class="lineno"> 4386</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;p : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l04387" name="l04387"></a><span class="lineno"> 4387</span>        <span class="keywordflow">if</span>( energy_j &lt;= 0.0f ) {</div>
<div class="line"><a id="l04388" name="l04388"></a><span class="lineno"> 4388</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04389" name="l04389"></a><span class="lineno"> 4389</span>        }</div>
<div class="line"><a id="l04390" name="l04390"></a><span class="lineno"> 4390</span> </div>
<div class="line"><a id="l04391" name="l04391"></a><span class="lineno"> 4391</span>        <span class="keyword">const</span> <span class="keywordtype">double</span> consumed = p.consume_energy( ftype, energy_j );</div>
<div class="line"><a id="l04392" name="l04392"></a><span class="lineno"> 4392</span>        drained += consumed;</div>
<div class="line"><a id="l04393" name="l04393"></a><span class="lineno"> 4393</span>        energy_j -= consumed;</div>
<div class="line"><a id="l04394" name="l04394"></a><span class="lineno"> 4394</span>    }</div>
<div class="line"><a id="l04395" name="l04395"></a><span class="lineno"> 4395</span> </div>
<div class="line"><a id="l04396" name="l04396"></a><span class="lineno"> 4396</span>    <a class="code hl_function" href="classvehicle.html#a8e8079a6591b3104191c881509f16d61">invalidate_mass</a>();</div>
<div class="line"><a id="l04397" name="l04397"></a><span class="lineno"> 4397</span>    <span class="keywordflow">return</span> drained;</div>
<div class="line"><a id="l04398" name="l04398"></a><span class="lineno"> 4398</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l04973">discharge_battery()</a>, <a class="el" href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, <a class="el" href="vehicle_8cpp_source.html#l06778">invalidate_mass()</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04400">consume_fuel()</a>.</p>

</div>
</div>
<a id="aa9bc38c7faa275ff2ea2f92be706da33" name="aa9bc38c7faa275ff2ea2f92be706da33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9bc38c7faa275ff2ea2f92be706da33">&#9670;&nbsp;</a></span>drive_to_local_target()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::drive_to_local_target </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>follow_protocol</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l00816">816</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>{</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>    <span class="keywordflow">if</span>( follow_protocol &amp;&amp; <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.in_vehicle ) {</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>        <a class="code hl_function" href="classvehicle.html#a8d23ce82d669c714795a2ed9b679e3b9">stop_autodriving</a>();</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>    }</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>    <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> vehpos = <a class="code hl_function" href="classvehicle.html#a789289c4179f7677e45cb100ff5ffb9a">global_square_location</a>().<a class="code hl_function" href="classcoords_1_1coord__point.html#a3f9a44403c08f2eaf0d605b1d034c048">raw</a>();</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::angle</a> <a class="code hl_typedef" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">angle</a> = <a class="code hl_function" href="classvehicle.html#a29bd874a59dfbdac6c6c9b5f0032680e">get_angle_from_targ</a>( target );</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>    <span class="comment">// now we got the angle to the target, we can work out when we are heading towards disaster.</span></div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>    <span class="comment">// Check the tileray in the direction we need to head towards.</span></div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>    std::set&lt;point&gt; points_to_check = <a class="code hl_function" href="classvehicle.html#a9b5b9d8cd2fc0b772daa3be20776e2ba">immediate_path</a>( <a class="code hl_typedef" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">angle</a> );</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classvehicle.html#ab3ca604dd9cd1907f37c8a888934a1d3">stop</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> &amp;pt_elem : points_to_check ) {</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>        <a class="code hl_struct" href="structpoint.html">point</a> elem = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.getlocal( pt_elem );</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#ab3ca604dd9cd1907f37c8a888934a1d3">stop</a> ) {</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>        }</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>        <span class="keyword">const</span> <a class="code hl_class" href="classoptional__vpart__position.html">optional_vpart_position</a> ovp = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.veh_at( <a class="code hl_struct" href="structtripoint.html">tripoint</a>( elem, <a class="code hl_variable" href="classvehicle.html#a34630935e46860003c616e0522316f02">sm_pos</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> ) );</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.impassable_ter_furn( <a class="code hl_struct" href="structtripoint.html">tripoint</a>( elem, <a class="code hl_variable" href="classvehicle.html#a34630935e46860003c616e0522316f02">sm_pos</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> ) ) || ( ovp &amp;&amp;</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>                &amp;ovp-&gt;vehicle() != <span class="keyword">this</span> ) ) {</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>            <a class="code hl_function" href="classvehicle.html#ab3ca604dd9cd1907f37c8a888934a1d3">stop</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>        }</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>        <span class="keywordflow">if</span>( elem == <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos().xy() ) {</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>            <span class="keywordflow">if</span>( follow_protocol || <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.in_vehicle ) {</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>                <a class="code hl_function" href="classvehicle.html#ab3ca604dd9cd1907f37c8a888934a1d3">stop</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>            }</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>        }</div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>        <span class="keywordtype">bool</span> its_a_pet = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at( <a class="code hl_struct" href="structtripoint.html">tripoint</a>( elem, <a class="code hl_variable" href="classvehicle.html#a34630935e46860003c616e0522316f02">sm_pos</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> ) ) ) {</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>            <a class="code hl_class" href="classnpc.html">npc</a> *guy = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at&lt;<a class="code hl_class" href="classnpc.html">npc</a>&gt;( <a class="code hl_struct" href="structtripoint.html">tripoint</a>( elem, <a class="code hl_variable" href="classvehicle.html#a34630935e46860003c616e0522316f02">sm_pos</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> ) );</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>            <span class="keywordflow">if</span>( guy &amp;&amp; !guy-&gt;<a class="code hl_variable" href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">in_vehicle</a> ) {</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>                <a class="code hl_function" href="classvehicle.html#ab3ca604dd9cd1907f37c8a888934a1d3">stop</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>            }</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;p : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>                <a class="code hl_class" href="classmonster.html">monster</a> *mon = <a class="code hl_function" href="classvehicle.html#ab266c3250ffece69b5c2ddc9897d80d3">get_pet</a>( <a class="code hl_function" href="classvehicle.html#a0ebc79bba42df4fea00ee3a4e495cbde">index_of_part</a>( &amp;p ) );</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>                <span class="keywordflow">if</span>( mon &amp;&amp; mon-&gt;<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>().<a class="code hl_function" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>() == elem ) {</div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>                    its_a_pet = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>                }</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>            }</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>            <span class="keywordflow">if</span>( !its_a_pet ) {</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>                <a class="code hl_function" href="classvehicle.html#ab3ca604dd9cd1907f37c8a888934a1d3">stop</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>            }</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>        }</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>    }</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#ab3ca604dd9cd1907f37c8a888934a1d3">stop</a> ) {</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#ab0ffd12faf770950ee7d2493ffaf9bd0">autopilot_on</a> ) {</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>(), 30, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f">sounds::sound_t::alert</a>,</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>                           <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;the %s emitting a beep and saying \&quot;Obstacle detected!\&quot;&quot;</span> ),</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>                                          <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> ) );</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>        }</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>        <a class="code hl_function" href="classvehicle.html#a8d23ce82d669c714795a2ed9b679e3b9">stop_autodriving</a>();</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>    }</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>    <span class="keywordtype">int</span> turn_x = <a class="code hl_function" href="vehicle_8cpp.html#a385c3efba8ad324cd42715ea90251a04">get_turn_from_angle</a>( <a class="code hl_typedef" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">angle</a>, vehpos, target );</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>    <span class="keywordtype">int</span> accel_y = 0;</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>    <span class="comment">// best to cruise around at a safe velocity or 40mph, whichever is lowest</span></div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>    <span class="comment">// accelerate when it dosnt need to turn.</span></div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>    <span class="comment">// when following player, take distance to player into account.</span></div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>    <span class="comment">// we really want to avoid running the player over.</span></div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>    <span class="comment">// If its a helicopter, we dont need to worry about airborne obstacles so much</span></div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>    <span class="comment">// And fuel efficiency is terrible at low speeds.</span></div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>    <span class="keywordtype">int</span> safe_player_follow_speed = 400;</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.movement_mode_is( <a class="code hl_enumvalue" href="character_8h.html#af749573d20b6327d21f9588ebdd5b19ba3d69a30a227d3f7bcd67e80d164cf786">CMM_RUN</a> ) ) {</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>        safe_player_follow_speed = 800;</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.movement_mode_is( <a class="code hl_enumvalue" href="character_8h.html#af749573d20b6327d21f9588ebdd5b19baa1885f8602d8a35017c4a310ed64e62b">CMM_CROUCH</a> ) ) {</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>        safe_player_follow_speed = 200;</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>    }</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>    <span class="keywordflow">if</span>( follow_protocol ) {</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>        <span class="keywordflow">if</span>( ( ( turn_x &gt; 0 || turn_x &lt; 0 ) &amp;&amp; <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &gt; safe_player_follow_speed ) ||</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>            <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( vehpos, <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.getabs( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() ) ) &lt; 7 + ( ( <a class="code hl_variable" href="classvehicle.html#a93c1c8baa5cd7ee79039fd5c7226b24e">mount_max</a>.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> * 3 ) + 4 ) ) {</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>            accel_y = 1;</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>        }</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>        <span class="keywordflow">if</span>( ( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &lt; std::min( <a class="code hl_function" href="classvehicle.html#ad38e05507056b3b3da5a5a5e482adba4">safe_velocity</a>(), safe_player_follow_speed ) &amp;&amp; turn_x == 0 &amp;&amp;</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>              <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( vehpos, <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.getabs( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() ) ) &gt; 8 + ( ( <a class="code hl_variable" href="classvehicle.html#a93c1c8baa5cd7ee79039fd5c7226b24e">mount_max</a>.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> * 3 ) + 4 ) ) ||</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>            <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &lt; 100 ) {</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>            accel_y = -1;</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>        }</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>        <span class="keywordflow">if</span>( ( turn_x &gt; 0 || turn_x &lt; 0 ) &amp;&amp; <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &gt; 1000 ) {</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>            accel_y = 1;</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>        }</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>        <span class="keywordflow">if</span>( ( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &lt; std::min( <a class="code hl_function" href="classvehicle.html#ad38e05507056b3b3da5a5a5e482adba4">safe_velocity</a>(), <a class="code hl_function" href="classvehicle.html#a292961ab33a42bf495d19b8692f6f105">is_rotorcraft</a>() &amp;&amp;</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>                                   <a class="code hl_function" href="classvehicle.html#a6ac15340cefeea4793448cdb34784011">is_flying_in_air</a>() ? 12000 : 32 * 100 ) &amp;&amp; turn_x == 0 ) || <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &lt; 500 ) {</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>            accel_y = -1;</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>        }</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a953fed1abe9bacc2a7c98cee6425c5b2">is_patrolling</a> &amp;&amp; <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &gt; 400 ) {</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>            accel_y = 1;</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>        }</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>    }</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>    <a class="code hl_function" href="classvehicle.html#ac8a5271d6aeae28a1bd341800cc5254d">selfdrive</a>( <a class="code hl_struct" href="structpoint.html">point</a>( turn_x, accel_y ) );</div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>}</div>
<div class="ttc" id="acharacter_8h_html_af749573d20b6327d21f9588ebdd5b19ba3d69a30a227d3f7bcd67e80d164cf786"><div class="ttname"><a href="character_8h.html#af749573d20b6327d21f9588ebdd5b19ba3d69a30a227d3f7bcd67e80d164cf786">CMM_RUN</a></div><div class="ttdeci">@ CMM_RUN</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00098">character.h:98</a></div></div>
<div class="ttc" id="acharacter_8h_html_af749573d20b6327d21f9588ebdd5b19baa1885f8602d8a35017c4a310ed64e62b"><div class="ttname"><a href="character_8h.html#af749573d20b6327d21f9588ebdd5b19baa1885f8602d8a35017c4a310ed64e62b">CMM_CROUCH</a></div><div class="ttdeci">@ CMM_CROUCH</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00099">character.h:99</a></div></div>
<div class="ttc" id="aclassCharacter_html_a61bc9422c35b63128532af268e52cb71"><div class="ttname"><a href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">Character::in_vehicle</a></div><div class="ttdeci">bool in_vehicle</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01575">character.h:1575</a></div></div>
<div class="ttc" id="aclassmonster_html_a55d95177d49525c0da7649f135a6306d"><div class="ttname"><a href="classmonster.html#a55d95177d49525c0da7649f135a6306d">monster::pos</a></div><div class="ttdeci">const tripoint &amp; pos() const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00255">monster.cpp:255</a></div></div>
<div class="ttc" id="aclassvehicle_html_a9b5b9d8cd2fc0b772daa3be20776e2ba"><div class="ttname"><a href="classvehicle.html#a9b5b9d8cd2fc0b772daa3be20776e2ba">vehicle::immediate_path</a></div><div class="ttdeci">std::set&lt; point &gt; immediate_path(units::angle rotate=0_degrees)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l00769">vehicle.cpp:769</a></div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f">sounds::sound_t::alert</a></div><div class="ttdeci">@ alert</div></div>
<div class="ttc" id="anamespaceunits_html_a2c7fe916bf04655f9fb4f2abdc5d28ed"><div class="ttname"><a href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">units::angle</a></div><div class="ttdeci">quantity&lt; double, angle_in_radians_tag &gt; angle</div><div class="ttdef"><b>Definition:</b> <a href="units__angle_8h_source.html#l00017">units_angle.h:17</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a7ed21143076d0cca420653d4345baa2f">sounds::alert</a>, <a class="el" href="vehicle_8h_source.html#l01938">autopilot_on</a>, <a class="el" href="character_8h_source.html#l00099">CMM_CROUCH</a>, <a class="el" href="character_8h_source.html#l00098">CMM_RUN</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l00916">get_angle_from_targ()</a>, <a class="el" href="vehicle_8cpp_source.html#l03082">get_pet()</a>, <a class="el" href="vehicle_8cpp_source.html#l00793">get_turn_from_angle()</a>, <a class="el" href="vehicle_8cpp_source.html#l03101">global_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l03091">global_square_location()</a>, <a class="el" href="vehicle_8cpp_source.html#l00769">immediate_path()</a>, <a class="el" href="character_8h_source.html#l01575">Character::in_vehicle</a>, <a class="el" href="vehicle_8cpp_source.html#l02911">index_of_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l04027">is_flying_in_air()</a>, <a class="el" href="vehicle_8h_source.html#l01925">is_patrolling</a>, <a class="el" href="vehicle_8cpp_source.html#l04017">is_rotorcraft()</a>, <a class="el" href="vehicle_8h_source.html#l01820">mount_max</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="monster_8cpp_source.html#l00255">monster::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00111">coords::coord_point&lt; Point, Origin, Scale &gt;::raw()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="vehicle_8cpp_source.html#l03593">safe_velocity()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00933">selfdrive()</a>, <a class="el" href="vehicle_8h_source.html#l01844">sm_pos</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00338">stop()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l01292">stop_autodriving()</a>, <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>, <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>, <a class="el" href="point_8h_source.html#l00220">tripoint::xy()</a>, <a class="el" href="point_8h_source.html#l00039">point::y</a>, and <a class="el" href="point_8h_source.html#l00152">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l00701">autopilot_patrol()</a>, and <a class="el" href="game_8cpp_source.html#l01751">game::autopilot_vehicles()</a>.</p>

</div>
</div>
<a id="af1b0ab1a9d635577ecd14b02efe5655a" name="af1b0ab1a9d635577ecd14b02efe5655a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1b0ab1a9d635577ecd14b02efe5655a">&#9670;&nbsp;</a></span>dump_items_from_part()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::dump_items_from_part </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05416">5416</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05417" name="l05417"></a><span class="lineno"> 5417</span>{</div>
<div class="line"><a id="l05418" name="l05418"></a><span class="lineno"> 5418</span>    <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_enumvalue" href="namespacedetail.html#ac4c79842ec549e8b02145d43a1fbc330a6a992d5529f459a44fee58c733255e86">index</a> ];</div>
<div class="line"><a id="l05419" name="l05419"></a><span class="lineno"> 5419</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classitem.html">item</a> &amp;e : vp.<a class="code hl_variable" href="structvehicle__part.html#ad59383d4f9c006ff499082dd5a600d9f">items</a> ) {</div>
<div class="line"><a id="l05420" name="l05420"></a><span class="lineno"> 5420</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_item_or_charges( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( vp ), e );</div>
<div class="line"><a id="l05421" name="l05421"></a><span class="lineno"> 5421</span>    }</div>
<div class="line"><a id="l05422" name="l05422"></a><span class="lineno"> 5422</span>    vp.<a class="code hl_variable" href="structvehicle__part.html#ad59383d4f9c006ff499082dd5a600d9f">items</a>.clear();</div>
<div class="line"><a id="l05423" name="l05423"></a><span class="lineno"> 5423</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8h_source.html#l00441">vehicle_part::items</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05425">decrement_summon_timer()</a>.</p>

</div>
</div>
<a id="a20879efe6f04d7de665ba3a57f73e0af" name="a20879efe6f04d7de665ba3a57f73e0af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20879efe6f04d7de665ba3a57f73e0af">&#9670;&nbsp;</a></span>enable_patrol()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::enable_patrol </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01104">1104</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>{</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>    <a class="code hl_variable" href="classvehicle.html#a953fed1abe9bacc2a7c98cee6425c5b2">is_patrolling</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>    <a class="code hl_variable" href="classvehicle.html#ab0ffd12faf770950ee7d2493ffaf9bd0">autopilot_on</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>    <a class="code hl_variable" href="classvehicle.html#acdbb2eec025972d86be23e90e9e92d22">autodrive_local_target</a> = <a class="code hl_variable" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a>;</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>    <a class="code hl_function" href="classvehicle.html#a7183b4a2eac4da678e316f5ca1d46e08">start_engines</a>();</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>    <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01824">autodrive_local_target</a>, <a class="el" href="vehicle_8h_source.html#l01938">autopilot_on</a>, <a class="el" href="vehicle_8h_source.html#l01925">is_patrolling</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01055">start_engines()</a>, and <a class="el" href="point_8h_source.html#l00273">tripoint_zero</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00542">autopilot_patrol_check()</a>.</p>

</div>
</div>
<a id="a649520b2771528912e35040ff307b6fb" name="a649520b2771528912e35040ff307b6fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a649520b2771528912e35040ff307b6fb">&#9670;&nbsp;</a></span>enable_refresh()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::enable_refresh </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05459">5459</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05460" name="l05460"></a><span class="lineno"> 5460</span>{</div>
<div class="line"><a id="l05461" name="l05461"></a><span class="lineno"> 5461</span>    <span class="comment">// force all caches to recalculate</span></div>
<div class="line"><a id="l05462" name="l05462"></a><span class="lineno"> 5462</span>    <a class="code hl_variable" href="classvehicle.html#a680decfc32d2eac704c5f3c890639821">no_refresh</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05463" name="l05463"></a><span class="lineno"> 5463</span>    <a class="code hl_variable" href="classvehicle.html#ac9c7234d3c2f5f0c42cc57b0931d21a6">mass_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05464" name="l05464"></a><span class="lineno"> 5464</span>    <a class="code hl_variable" href="classvehicle.html#a908223c2d250ba23fdbff51379cf2213">mass_center_precalc_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05465" name="l05465"></a><span class="lineno"> 5465</span>    <a class="code hl_variable" href="classvehicle.html#afa84e5e990b66ac1cedeba291ddc6028">mass_center_no_precalc_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05466" name="l05466"></a><span class="lineno"> 5466</span>    <a class="code hl_variable" href="classvehicle.html#a57285bb3b5dfda9f926bd3f99e3e1bad">coeff_rolling_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05467" name="l05467"></a><span class="lineno"> 5467</span>    <a class="code hl_variable" href="classvehicle.html#ac1e6fe4cf22c08ceb542a7a3d515268b">coeff_air_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05468" name="l05468"></a><span class="lineno"> 5468</span>    <a class="code hl_variable" href="classvehicle.html#a3bf02329db46b5a5dda2a0b35b8147fc">coeff_water_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05469" name="l05469"></a><span class="lineno"> 5469</span>    <a class="code hl_variable" href="classvehicle.html#a62e8354926b0f973a2a0ec1db3deb997">coeff_air_changed</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05470" name="l05470"></a><span class="lineno"> 5470</span>    <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l05471" name="l05471"></a><span class="lineno"> 5471</span>}</div>
<div class="ttc" id="aclassvehicle_html_a680decfc32d2eac704c5f3c890639821"><div class="ttname"><a href="classvehicle.html#a680decfc32d2eac704c5f3c890639821">vehicle::no_refresh</a></div><div class="ttdeci">bool no_refresh</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01896">vehicle.h:1896</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01911">coeff_air_changed</a>, <a class="el" href="vehicle_8h_source.html#l01905">coeff_air_dirty</a>, <a class="el" href="vehicle_8h_source.html#l01904">coeff_rolling_dirty</a>, <a class="el" href="vehicle_8h_source.html#l01906">coeff_water_dirty</a>, <a class="el" href="vehicle_8h_source.html#l01902">mass_center_no_precalc_dirty</a>, <a class="el" href="vehicle_8h_source.html#l01901">mass_center_precalc_dirty</a>, <a class="el" href="vehicle_8h_source.html#l01900">mass_dirty</a>, <a class="el" href="vehicle_8h_source.html#l01896">no_refresh</a>, and <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>.</p>

</div>
</div>
<a id="afccaeaa8277a4fbfc2c596682bf8b2d1" name="afccaeaa8277a4fbfc2c596682bf8b2d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afccaeaa8277a4fbfc2c596682bf8b2d1">&#9670;&nbsp;</a></span>enclosed_at()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::enclosed_at </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06095">6095</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06096" name="l06096"></a><span class="lineno"> 6096</span>{</div>
<div class="line"><a id="l06097" name="l06097"></a><span class="lineno"> 6097</span>    <a class="code hl_function" href="classvehicle.html#a8610ffeac8223a463ed316e3c3134662">refresh_insides</a>();</div>
<div class="line"><a id="l06098" name="l06098"></a><span class="lineno"> 6098</span>    std::vector&lt;vehicle_part *&gt; parts_here = <a class="code hl_function" href="classvehicle.html#a38ba5bdc99241568c83ada974ed73e07">get_parts_at</a>( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, <span class="stringliteral">&quot;BOARDABLE&quot;</span>,</div>
<div class="line"><a id="l06099" name="l06099"></a><span class="lineno"> 6099</span>            <a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cac327b49efdca2668f28cd7b4beee54b3">part_status_flag::working</a> );</div>
<div class="line"><a id="l06100" name="l06100"></a><span class="lineno"> 6100</span>    <span class="keywordflow">if</span>( !parts_here.empty() ) {</div>
<div class="line"><a id="l06101" name="l06101"></a><span class="lineno"> 6101</span>        <span class="keywordflow">return</span> parts_here.front()-&gt;inside;</div>
<div class="line"><a id="l06102" name="l06102"></a><span class="lineno"> 6102</span>    }</div>
<div class="line"><a id="l06103" name="l06103"></a><span class="lineno"> 6103</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l06104" name="l06104"></a><span class="lineno"> 6104</span>}</div>
<div class="ttc" id="aclassvehicle_html_a38ba5bdc99241568c83ada974ed73e07"><div class="ttname"><a href="classvehicle.html#a38ba5bdc99241568c83ada974ed73e07">vehicle::get_parts_at</a></div><div class="ttdeci">std::vector&lt; vehicle_part * &gt; get_parts_at(const tripoint &amp;pos, const std::string &amp;flag, part_status_flag condition)</div><div class="ttdoc">Get all enabled, available, unbroken vehicle parts at specified position.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02580">vehicle.cpp:2580</a></div></div>
<div class="ttc" id="aclassvehicle_html_a8610ffeac8223a463ed316e3c3134662"><div class="ttname"><a href="classvehicle.html#a8610ffeac8223a463ed316e3c3134662">vehicle::refresh_insides</a></div><div class="ttdeci">void refresh_insides()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06106">vehicle.cpp:6106</a></div></div>
<div class="ttc" id="avehicle_8h_html_ad9a221cee9ae7a69d6f09d4de701f02cac327b49efdca2668f28cd7b4beee54b3"><div class="ttname"><a href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cac327b49efdca2668f28cd7b4beee54b3">part_status_flag::working</a></div><div class="ttdeci">@ working</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l02580">get_parts_at()</a>, <a class="el" href="vehicle_8h_source.html#l01859">pos</a>, <a class="el" href="vehicle_8cpp_source.html#l06106">refresh_insides()</a>, and <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cac327b49efdca2668f28cd7b4beee54b3">working</a>.</p>

<p class="reference">Referenced by <a class="el" href="character_8cpp_source.html#l04759">Character::update_needs()</a>.</p>

</div>
</div>
<a id="ad8fcbea4632f523e20dfab4dc12b6c22" name="ad8fcbea4632f523e20dfab4dc12b6c22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8fcbea4632f523e20dfab4dc12b6c22">&#9670;&nbsp;</a></span>engine_cold_factor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double vehicle::engine_cold_factor </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l00885">885</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>{</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e] ).has_flag( <span class="stringliteral">&quot;E_COLD_START&quot;</span> ) ) {</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>        <span class="keywordflow">return</span> 0.0;</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>    }</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span> </div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>    <span class="keywordtype">int</span> eff_temp = <a class="code hl_function" href="group__Weather.html#gaa7b33196bf530c8b26654a0adf355165">get_weather</a>().<a class="code hl_function" href="group__Weather.html#ga956008349f0006ba8d76360e8b2d5283">get_temperature</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() );</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[ e ] ].faults().<a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#a39ad5e6128d1cd982830d65b95094a60">fault_glowplug</a> ) ) {</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>        eff_temp = std::min( eff_temp, 20 );</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>    }</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span> </div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>    <span class="keywordflow">return</span> 1.0 - ( std::max( 0, std::min( 30, eff_temp ) ) / 30.0 );</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>}</div>
<div class="ttc" id="agroup__Weather_html_ga956008349f0006ba8d76360e8b2d5283"><div class="ttname"><a href="group__Weather.html#ga956008349f0006ba8d76360e8b2d5283">weather_manager::get_temperature</a></div><div class="ttdeci">int get_temperature(const tripoint &amp;location) const</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l01107">weather.cpp:1107</a></div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a39ad5e6128d1cd982830d65b95094a60"><div class="ttname"><a href="vehicle__use_8cpp.html#a39ad5e6128d1cd982830d65b95094a60">fault_glowplug</a></div><div class="ttdeci">static const fault_id fault_glowplug(&quot;fault_engine_glow_plug&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="fmtlib__core_8h_source.html#l01073">detail::count()</a>, <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, <a class="el" href="vehicle__use_8cpp.html#a39ad5e6128d1cd982830d65b95094a60">fault_glowplug</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="weather_8cpp_source.html#l01107">weather_manager::get_temperature()</a>, <a class="el" href="weather_8cpp_source.html#l00064">get_weather()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00899">engine_start_time()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00918">start_engine()</a>.</p>

</div>
</div>
<a id="af615cefb430470fc97b60635a382bc7a" name="af615cefb430470fc97b60635a382bc7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af615cefb430470fc97b60635a382bc7a">&#9670;&nbsp;</a></span>engine_fuel_left()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::engine_fuel_left </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>recurse</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03230">3230</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03231" name="l03231"></a><span class="lineno"> 3231</span>{</div>
<div class="line"><a id="l03232" name="l03232"></a><span class="lineno"> 3232</span>    <span class="keywordflow">if</span>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( e ) &lt; <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.size() ) {</div>
<div class="line"><a id="l03233" name="l03233"></a><span class="lineno"> 3233</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[ e ] ].fuel_current(), recurse );</div>
<div class="line"><a id="l03234" name="l03234"></a><span class="lineno"> 3234</span>    }</div>
<div class="line"><a id="l03235" name="l03235"></a><span class="lineno"> 3235</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l03236" name="l03236"></a><span class="lineno"> 3236</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, <a class="el" href="vehicle_8cpp_source.html#l03179">fuel_left()</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05018">do_engine_damage()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00899">engine_start_time()</a>, <a class="el" href="vehicle_8cpp_source.html#l03644">noise_and_smoke()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00918">start_engine()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03333">total_power_w()</a>.</p>

</div>
</div>
<a id="a6faebde63c532754c7ca9875b9d1fef9" name="a6faebde63c532754c7ca9875b9d1fef9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6faebde63c532754c7ca9875b9d1fef9">&#9670;&nbsp;</a></span>engine_start_time()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::engine_start_time </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l00899">899</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>{</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#a4d73f86ddc3aafe3231c33c098b9d6c8">is_engine_on</a>( e ) || <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e] ).has_flag( <span class="stringliteral">&quot;E_STARTS_INSTANTLY&quot;</span> ) ||</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>        !<a class="code hl_function" href="classvehicle.html#af615cefb430470fc97b60635a382bc7a">engine_fuel_left</a>( e ) ) {</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>    }</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span> </div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> dmg = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e]].damage_percent();</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span> </div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>    <span class="comment">// non-linear range [100-1000]; f(0.0) = 100, f(0.6) = 250, f(0.8) = 500, f(0.9) = 1000</span></div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>    <span class="comment">// diesel engines with working glow plugs always start with f = 0.6 (or better)</span></div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code hl_variable" href="namespacetemperatures.html#a226cec67fad4075fe2cf6c31c355fbed">cold</a> = 100 / tanh( 1 - std::min( <a class="code hl_function" href="classvehicle.html#ad8fcbea4632f523e20dfab4dc12b6c22">engine_cold_factor</a>( e ), 0.9 ) );</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span> </div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>    <span class="comment">// watts to old vhp = watts / 373</span></div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>    <span class="comment">// divided by magic 16 = watts / 6000</span></div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> watts_per_time = 6000;</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a5246baeafa78272d858f6cce466579e4">part_vpower_w</a>( <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[ e ], <span class="keyword">true</span> ) / watts_per_time + 100 * dmg + <a class="code hl_variable" href="namespacetemperatures.html#a226cec67fad4075fe2cf6c31c355fbed">cold</a>;</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>}</div>
<div class="ttc" id="aclassvehicle_html_ad8fcbea4632f523e20dfab4dc12b6c22"><div class="ttname"><a href="classvehicle.html#ad8fcbea4632f523e20dfab4dc12b6c22">vehicle::engine_cold_factor</a></div><div class="ttdeci">double engine_cold_factor(int e) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00885">vehicle_use.cpp:885</a></div></div>
<div class="ttc" id="anamespacetemperatures_html_a226cec67fad4075fe2cf6c31c355fbed"><div class="ttname"><a href="namespacetemperatures.html#a226cec67fad4075fe2cf6c31c355fbed">temperatures::cold</a></div><div class="ttdeci">constexpr int cold</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00092">game_constants.h:92</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game__constants_8h_source.html#l00092">temperatures::cold</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00885">engine_cold_factor()</a>, <a class="el" href="vehicle_8cpp_source.html#l03230">engine_fuel_left()</a>, <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, <a class="el" href="vehicle_8cpp_source.html#l01087">is_engine_on()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8cpp_source.html#l01149">part_vpower_w()</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00918">start_engine()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l01055">start_engines()</a>.</p>

</div>
</div>
<a id="a3e9cbe7f2f60c477981d2a67e079d640" name="a3e9cbe7f2f60c477981d2a67e079d640"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e9cbe7f2f60c477981d2a67e079d640">&#9670;&nbsp;</a></span>enumerate_vehicles()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::enumerate_vehicles </td>
          <td>(</td>
          <td class="paramtype">std::map&lt; <a class="el" href="classvehicle.html">vehicle</a> *, bool &gt; &amp;&#160;</td>
          <td class="paramname"><em>connected_vehicles</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::set&lt; <a class="el" href="classvehicle.html">vehicle</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>vehicle_list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Use grid traversal to enumerate all connected vehicles. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">connected_vehicles</td><td>is an output map from vehicle pointers to a bool that is true if the vehicle is in the reality bubble. </td></tr>
    <tr><td class="paramname">vehicle_list</td><td>is a set of pointers to vehicles present in the reality bubble. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04747">4747</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04749" name="l04749"></a><span class="lineno"> 4749</span>{</div>
<div class="line"><a id="l04750" name="l04750"></a><span class="lineno"> 4750</span>    <span class="keyword">auto</span> enumerate_visitor = [&amp;connected_vehicles]( <a class="code hl_class" href="classvehicle.html">vehicle</a> &amp; veh ) {</div>
<div class="line"><a id="l04751" name="l04751"></a><span class="lineno"> 4751</span>        <span class="comment">// Only emplaces if element is not present already.</span></div>
<div class="line"><a id="l04752" name="l04752"></a><span class="lineno"> 4752</span>        connected_vehicles.emplace( &amp;veh, <span class="keyword">false</span> );</div>
<div class="line"><a id="l04753" name="l04753"></a><span class="lineno"> 4753</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespacedistribution__graph.html#a2693ab255ec1b2e508b6af35709ce9ebafc5160da2ee806f3e0776c874e26dbda">distribution_graph::traverse_visitor_result::continue_further</a>;</div>
<div class="line"><a id="l04754" name="l04754"></a><span class="lineno"> 4754</span>    };</div>
<div class="line"><a id="l04755" name="l04755"></a><span class="lineno"> 4755</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classvehicle.html">vehicle</a> *veh : vehicle_list ) {</div>
<div class="line"><a id="l04756" name="l04756"></a><span class="lineno"> 4756</span>        <span class="comment">// This autovivifies, and also overwrites the value if already present.</span></div>
<div class="line"><a id="l04757" name="l04757"></a><span class="lineno"> 4757</span>        connected_vehicles[veh] = <span class="keyword">true</span>;</div>
<div class="line"><a id="l04758" name="l04758"></a><span class="lineno"> 4758</span>        <a class="code hl_function" href="namespacedistribution__graph.html#a27a7603aec9db0a5d334bbee275915d9">distribution_graph::traverse</a>( *veh, enumerate_visitor, <a class="code hl_function" href="namespacedistribution__graph.html#a8587441bb8373685d759461840ef0373">distribution_graph::noop_visitor_grid</a> );</div>
<div class="line"><a id="l04759" name="l04759"></a><span class="lineno"> 4759</span>    }</div>
<div class="line"><a id="l04760" name="l04760"></a><span class="lineno"> 4760</span>}</div>
<div class="ttc" id="anamespacedistribution__graph_html_a2693ab255ec1b2e508b6af35709ce9ebafc5160da2ee806f3e0776c874e26dbda"><div class="ttname"><a href="namespacedistribution__graph.html#a2693ab255ec1b2e508b6af35709ce9ebafc5160da2ee806f3e0776c874e26dbda">distribution_graph::traverse_visitor_result::continue_further</a></div><div class="ttdeci">@ continue_further</div></div>
<div class="ttc" id="anamespacedistribution__graph_html_a8587441bb8373685d759461840ef0373"><div class="ttname"><a href="namespacedistribution__graph.html#a8587441bb8373685d759461840ef0373">distribution_graph::noop_visitor_grid</a></div><div class="ttdeci">constexpr traverse_visitor_result noop_visitor_grid(const distribution_grid &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="distribution__grid_8h_source.html#l00206">distribution_grid.h:206</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespacedistribution__graph.html#a2693ab255ec1b2e508b6af35709ce9ebafc5160da2ee806f3e0776c874e26dbda">distribution_graph::continue_further</a>, <a class="el" href="distribution__grid_8h_source.html#l00206">distribution_graph::noop_visitor_grid()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04802">distribution_graph::traverse()</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l00398">map::vehmove()</a>.</p>

</div>
</div>
<a id="a0a91f98959c5283578641ff7684869d7" name="a0a91f98959c5283578641ff7684869d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a91f98959c5283578641ff7684869d7">&#9670;&nbsp;</a></span>explode_fuel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::explode_fuel </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7a">damage_type</a>&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06409">6409</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06410" name="l06410"></a><span class="lineno"> 6410</span>{</div>
<div class="line"><a id="l06411" name="l06411"></a><span class="lineno"> 6411</span>    <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> &amp;ft = <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( p ).<a class="code hl_variable" href="classvpart__info.html#ae9c50d26b3cc88604ae85573ee6599cd">fuel_type</a>;</div>
<div class="line"><a id="l06412" name="l06412"></a><span class="lineno"> 6412</span>    <a class="code hl_class" href="classitem.html">item</a> fuel = <a class="code hl_class" href="classitem.html">item</a>( ft );</div>
<div class="line"><a id="l06413" name="l06413"></a><span class="lineno"> 6413</span>    <span class="keywordflow">if</span>( !fuel.<a class="code hl_function" href="classitem.html#a39e79f886f257aaaa199a7c2351993b7">has_explosion_data</a>() ) {</div>
<div class="line"><a id="l06414" name="l06414"></a><span class="lineno"> 6414</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l06415" name="l06415"></a><span class="lineno"> 6415</span>    }</div>
<div class="line"><a id="l06416" name="l06416"></a><span class="lineno"> 6416</span>    <a class="code hl_struct" href="structfuel__explosion.html">fuel_explosion</a> data = fuel.<a class="code hl_function" href="classitem.html#a474a143a408920b4bcecbe6a36c7287d">get_explosion_data</a>();</div>
<div class="line"><a id="l06417" name="l06417"></a><span class="lineno"> 6417</span> </div>
<div class="line"><a id="l06418" name="l06418"></a><span class="lineno"> 6418</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ p ].is_broken() ) {</div>
<div class="line"><a id="l06419" name="l06419"></a><span class="lineno"> 6419</span>        <a class="code hl_function" href="classvehicle.html#ab9b05f9729dee1e8844c726eeb1a515d">leak_fuel</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ p ] );</div>
<div class="line"><a id="l06420" name="l06420"></a><span class="lineno"> 6420</span>    }</div>
<div class="line"><a id="l06421" name="l06421"></a><span class="lineno"> 6421</span> </div>
<div class="line"><a id="l06422" name="l06422"></a><span class="lineno"> 6422</span>    <span class="keywordtype">int</span> explosion_chance = <a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a> == <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aae6af44cd6e0e8cafcc63cea198f627c9">DT_HEAT</a> ? data.<a class="code hl_variable" href="structfuel__explosion.html#a98a2472758ae57ec83d9a0232d444474">explosion_chance_hot</a> : data.<a class="code hl_variable" href="structfuel__explosion.html#adc2ad7f2f7acfc0a66e874a774cfc627">explosion_chance_cold</a>;</div>
<div class="line"><a id="l06423" name="l06423"></a><span class="lineno"> 6423</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( explosion_chance ) ) {</div>
<div class="line"><a id="l06424" name="l06424"></a><span class="lineno"> 6424</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;events().send&lt;<a class="code hl_enumvalue" href="event_8h.html#a430b444c74dd3fd1472a31714ec5f1ceabb9e0c17b2794d6b3adebc5f8354d0d8">event_type::fuel_tank_explodes</a>&gt;( <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l06425" name="l06425"></a><span class="lineno"> 6425</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> pow = 120 * ( 1 - std::exp( data.<a class="code hl_variable" href="structfuel__explosion.html#ac753c9614f85226b83eba0a04b398394">explosion_factor</a> / -5000 *</div>
<div class="line"><a id="l06426" name="l06426"></a><span class="lineno"> 6426</span>                                              ( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].ammo_remaining() * data.<a class="code hl_variable" href="structfuel__explosion.html#a0f2b4cba3125d69012b4ef15d8936515">fuel_size_factor</a> ) ) );</div>
<div class="line"><a id="l06427" name="l06427"></a><span class="lineno"> 6427</span>        <span class="comment">//debugmsg( &quot;damage check dmg=%d pow=%d amount=%d&quot;, dmg, pow, parts[p].amount );</span></div>
<div class="line"><a id="l06428" name="l06428"></a><span class="lineno"> 6428</span> </div>
<div class="line"><a id="l06429" name="l06429"></a><span class="lineno"> 6429</span>        <a class="code hl_function" href="namespaceexplosion__handler.html#aedf90c876bd69288b266c6a60dbc91dc">explosion_handler::explosion</a>( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( p ), pow, 0.7, data.<a class="code hl_variable" href="structfuel__explosion.html#aa919d40c33bd8f1021043c4e5b6fcad1">fiery_explosion</a> );</div>
<div class="line"><a id="l06430" name="l06430"></a><span class="lineno"> 6430</span>        <a class="code hl_function" href="classvehicle.html#a9c80007e6bb704ab32bd6c8adafff454">mod_hp</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p], 0 - <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ p ].hp(), <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aae6af44cd6e0e8cafcc63cea198f627c9">DT_HEAT</a> );</div>
<div class="line"><a id="l06431" name="l06431"></a><span class="lineno"> 6431</span>        <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].ammo_unset();</div>
<div class="line"><a id="l06432" name="l06432"></a><span class="lineno"> 6432</span>    }</div>
<div class="line"><a id="l06433" name="l06433"></a><span class="lineno"> 6433</span> </div>
<div class="line"><a id="l06434" name="l06434"></a><span class="lineno"> 6434</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l06435" name="l06435"></a><span class="lineno"> 6435</span>}</div>
<div class="ttc" id="aclassitem_html_a39e79f886f257aaaa199a7c2351993b7"><div class="ttname"><a href="classitem.html#a39e79f886f257aaaa199a7c2351993b7">item::has_explosion_data</a></div><div class="ttdeci">bool has_explosion_data() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06676">item.cpp:6676</a></div></div>
<div class="ttc" id="aclassitem_html_a474a143a408920b4bcecbe6a36c7287d"><div class="ttname"><a href="classitem.html#a474a143a408920b4bcecbe6a36c7287d">item::get_explosion_data</a></div><div class="ttdeci">struct fuel_explosion get_explosion_data()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06681">item.cpp:6681</a></div></div>
<div class="ttc" id="aevent_8h_html_a430b444c74dd3fd1472a31714ec5f1ceabb9e0c17b2794d6b3adebc5f8354d0d8"><div class="ttname"><a href="event_8h.html#a430b444c74dd3fd1472a31714ec5f1ceabb9e0c17b2794d6b3adebc5f8354d0d8">event_type::fuel_tank_explodes</a></div><div class="ttdeci">@ fuel_tank_explodes</div></div>
<div class="ttc" id="anamespaceexplosion__handler_html_aedf90c876bd69288b266c6a60dbc91dc"><div class="ttname"><a href="namespaceexplosion__handler.html#aedf90c876bd69288b266c6a60dbc91dc">explosion_handler::explosion</a></div><div class="ttdeci">void explosion(const tripoint &amp;p, float power, float factor, bool fire, int legacy_casing_mass, float)</div><div class="ttdoc">Legacy explosion function.</div><div class="ttdef"><b>Definition:</b> <a href="explosion_8cpp_source.html#l00684">explosion.cpp:684</a></div></div>
<div class="ttc" id="astructfuel__explosion_html"><div class="ttname"><a href="structfuel__explosion.html">fuel_explosion</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00441">itype.h:441</a></div></div>
<div class="ttc" id="astructfuel__explosion_html_a0f2b4cba3125d69012b4ef15d8936515"><div class="ttname"><a href="structfuel__explosion.html#a0f2b4cba3125d69012b4ef15d8936515">fuel_explosion::fuel_size_factor</a></div><div class="ttdeci">float fuel_size_factor</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00446">itype.h:446</a></div></div>
<div class="ttc" id="astructfuel__explosion_html_a98a2472758ae57ec83d9a0232d444474"><div class="ttname"><a href="structfuel__explosion.html#a98a2472758ae57ec83d9a0232d444474">fuel_explosion::explosion_chance_hot</a></div><div class="ttdeci">int explosion_chance_hot</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00442">itype.h:442</a></div></div>
<div class="ttc" id="astructfuel__explosion_html_aa919d40c33bd8f1021043c4e5b6fcad1"><div class="ttname"><a href="structfuel__explosion.html#aa919d40c33bd8f1021043c4e5b6fcad1">fuel_explosion::fiery_explosion</a></div><div class="ttdeci">bool fiery_explosion</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00445">itype.h:445</a></div></div>
<div class="ttc" id="astructfuel__explosion_html_ac753c9614f85226b83eba0a04b398394"><div class="ttname"><a href="structfuel__explosion.html#ac753c9614f85226b83eba0a04b398394">fuel_explosion::explosion_factor</a></div><div class="ttdeci">float explosion_factor</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00444">itype.h:444</a></div></div>
<div class="ttc" id="astructfuel__explosion_html_adc2ad7f2f7acfc0a66e874a774cfc627"><div class="ttname"><a href="structfuel__explosion.html#adc2ad7f2f7acfc0a66e874a774cfc627">fuel_explosion::explosion_chance_cold</a></div><div class="ttdeci">int explosion_chance_cold</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00443">itype.h:443</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="damage_8h_source.html#l00028">DT_HEAT</a>, <a class="el" href="explosion_8cpp_source.html#l00684">explosion_handler::explosion()</a>, <a class="el" href="itype_8h_source.html#l00443">fuel_explosion::explosion_chance_cold</a>, <a class="el" href="itype_8h_source.html#l00442">fuel_explosion::explosion_chance_hot</a>, <a class="el" href="itype_8h_source.html#l00444">fuel_explosion::explosion_factor</a>, <a class="el" href="itype_8h_source.html#l00445">fuel_explosion::fiery_explosion</a>, <a class="el" href="itype_8h_source.html#l00446">fuel_explosion::fuel_size_factor</a>, <a class="el" href="event_8h.html#a430b444c74dd3fd1472a31714ec5f1ceabb9e0c17b2794d6b3adebc5f8354d0d8">fuel_tank_explodes</a>, <a class="el" href="veh__type_8h_source.html#l00203">vpart_info::fuel_type</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="item_8cpp_source.html#l06681">item::get_explosion_data()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="item_8cpp_source.html#l06676">item::has_explosion_data()</a>, <a class="el" href="vehicle_8cpp_source.html#l06500">leak_fuel()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00540">mod_hp()</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="vehicle_8h_source.html#l01798">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06437">damage_direct()</a>.</p>

</div>
</div>
<a id="a2bc8dfdab1fadc47966b0a69520c737c" name="a2bc8dfdab1fadc47966b0a69520c737c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bc8dfdab1fadc47966b0a69520c737c">&#9670;&nbsp;</a></span>face_vec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrl__vec2d.html">rl_vec2d</a> vehicle::face_vec </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__move_8cpp_source.html#l01220">1220</a> of file <a class="el" href="vehicle__move_8cpp_source.html">vehicle_move.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>{</div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="vehicle__move_8cpp.html#a0039ad830efb94637bdc1dd04d0fa60c">angle_to_vec</a>( <a class="code hl_variable" href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">face</a>.<a class="code hl_function" href="classtileray.html#a91ed01227e1754597024f4916f8bd6af">dir</a>() );</div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle__move_8cpp_source.html#l01208">angle_to_vec()</a>, <a class="el" href="tileray_8cpp_source.html#l00074">tileray::dir()</a>, and <a class="el" href="vehicle_8h_source.html#l01891">face</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l01332">game::calc_driving_offset()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01187">forward_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l00916">get_angle_from_targ()</a>, <a class="el" href="game_8cpp_source.html#l03627">game::get_veh_dir_indicator_location()</a>, <a class="el" href="vehicle_8cpp_source.html#l04325">handling_difficulty()</a>, <a class="el" href="vehicle_8cpp_source.html#l01149">part_vpower_w()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01158">possibly_recover_from_skid()</a>, <a class="el" href="map_8cpp_source.html#l00741">map::vehicle_vehicle_collision()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l01195">velo_vec()</a>.</p>

</div>
</div>
<a id="ac6db05ed4285c46744bff75c3e767009" name="ac6db05ed4285c46744bff75c3e767009"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6db05ed4285c46744bff75c3e767009">&#9670;&nbsp;</a></span>find_all_ready_turrets()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="structvehicle__part.html">vehicle_part</a> * &gt; vehicle::find_all_ready_turrets </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>manual</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>automatic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="turret_8cpp_source.html#l00412">412</a> of file <a class="el" href="turret_8cpp_source.html">turret.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>{</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>    std::vector&lt;vehicle_part *&gt; res;</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>    <span class="keywordflow">for</span>( <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> *t : <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a>() ) {</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>        <span class="keywordflow">if</span>( ( t-&gt;enabled &amp;&amp; automatic ) || ( !t-&gt;enabled &amp;&amp; manual ) ) {</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#accfab81af66cd979bdfff4c39e5a3a8e">turret_query</a>( *t ).<a class="code hl_function" href="classturret__data.html#a585d18f2c33116bc1e9028210fccadbc">query</a>() == <a class="code hl_enumvalue" href="classturret__data.html#aa11f464b221b987d03a8859293e07ab6ab2fdab230a2c39f3595a947861863cb7">turret_data::status::ready</a> ) {</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>                res.push_back( t );</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>            }</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>        }</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>    }</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>    <span class="keywordflow">return</span> res;</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>}</div>
<div class="ttc" id="aclassvehicle_html_a10a4d598caa3405cac5ed2b77a5360cf"><div class="ttname"><a href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">vehicle::turrets</a></div><div class="ttdeci">std::vector&lt; vehicle_part * &gt; turrets()</div><div class="ttdoc">Get all vehicle turrets (excluding any that are destroyed)</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00032">turret.cpp:32</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="turret_8cpp_source.html#l00232">turret_data::query()</a>, <a class="el" href="classturret__data.html#aa11f464b221b987d03a8859293e07ab6ab2fdab230a2c39f3595a947861863cb7">turret_data::ready</a>, <a class="el" href="turret_8cpp_source.html#l00055">turret_query()</a>, and <a class="el" href="turret_8cpp_source.html#l00032">turrets()</a>.</p>

<p class="reference">Referenced by <a class="el" href="turret_8cpp_source.html#l00336">turrets_aim_and_fire_all_manual()</a>, and <a class="el" href="turret_8cpp_source.html#l00352">turrets_override_automatic_aim()</a>.</p>

</div>
</div>
<a id="a5732b3bce5414a290baedad25a85b2b4" name="a5732b3bce5414a290baedad25a85b2b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5732b3bce5414a290baedad25a85b2b4">&#9670;&nbsp;</a></span>find_and_split_vehicles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::find_and_split_vehicles </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>exclude</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02117">2117</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02118" name="l02118"></a><span class="lineno"> 2118</span>{</div>
<div class="line"><a id="l02119" name="l02119"></a><span class="lineno"> 2119</span>    std::vector&lt;int&gt; valid_parts = <a class="code hl_function" href="classvehicle.html#a2e1f54f4d34a2edb7ff3665e5eba7df9">all_parts_at_location</a>( <a class="code hl_function" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure</a> );</div>
<div class="line"><a id="l02120" name="l02120"></a><span class="lineno"> 2120</span>    std::set&lt;int&gt; checked_parts;</div>
<div class="line"><a id="l02121" name="l02121"></a><span class="lineno"> 2121</span>    checked_parts.insert( exclude );</div>
<div class="line"><a id="l02122" name="l02122"></a><span class="lineno"> 2122</span> </div>
<div class="line"><a id="l02123" name="l02123"></a><span class="lineno"> 2123</span>    std::vector&lt;std::vector &lt;int&gt;&gt; all_vehicles;</div>
<div class="line"><a id="l02124" name="l02124"></a><span class="lineno"> 2124</span> </div>
<div class="line"><a id="l02125" name="l02125"></a><span class="lineno"> 2125</span>    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> cnt = 0 ; cnt &lt; 4 ; cnt++ ) {</div>
<div class="line"><a id="l02126" name="l02126"></a><span class="lineno"> 2126</span>        <span class="keywordtype">int</span> test_part = -1;</div>
<div class="line"><a id="l02127" name="l02127"></a><span class="lineno"> 2127</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> p : valid_parts ) {</div>
<div class="line"><a id="l02128" name="l02128"></a><span class="lineno"> 2128</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ p ].removed ) {</div>
<div class="line"><a id="l02129" name="l02129"></a><span class="lineno"> 2129</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02130" name="l02130"></a><span class="lineno"> 2130</span>            }</div>
<div class="line"><a id="l02131" name="l02131"></a><span class="lineno"> 2131</span>            <span class="keywordflow">if</span>( checked_parts.find( p ) == checked_parts.end() ) {</div>
<div class="line"><a id="l02132" name="l02132"></a><span class="lineno"> 2132</span>                test_part = p;</div>
<div class="line"><a id="l02133" name="l02133"></a><span class="lineno"> 2133</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02134" name="l02134"></a><span class="lineno"> 2134</span>            }</div>
<div class="line"><a id="l02135" name="l02135"></a><span class="lineno"> 2135</span>        }</div>
<div class="line"><a id="l02136" name="l02136"></a><span class="lineno"> 2136</span>        <span class="keywordflow">if</span>( test_part == -1 || <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( test_part ) &gt; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size() ) {</div>
<div class="line"><a id="l02137" name="l02137"></a><span class="lineno"> 2137</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02138" name="l02138"></a><span class="lineno"> 2138</span>        }</div>
<div class="line"><a id="l02139" name="l02139"></a><span class="lineno"> 2139</span> </div>
<div class="line"><a id="l02140" name="l02140"></a><span class="lineno"> 2140</span>        std::queue&lt;std::pair&lt;int, std::vector&lt;int&gt;&gt;&gt; search_queue;</div>
<div class="line"><a id="l02141" name="l02141"></a><span class="lineno"> 2141</span> </div>
<div class="line"><a id="l02142" name="l02142"></a><span class="lineno"> 2142</span>        <span class="keyword">const</span> <span class="keyword">auto</span> push_neighbor = [&amp;]( <span class="keywordtype">int</span> p, <span class="keyword">const</span> std::vector&lt;int&gt; &amp;with_p ) {</div>
<div class="line"><a id="l02143" name="l02143"></a><span class="lineno"> 2143</span>            std::pair&lt;int, std::vector&lt;int&gt;&gt; data( p, with_p );</div>
<div class="line"><a id="l02144" name="l02144"></a><span class="lineno"> 2144</span>            search_queue.push( data );</div>
<div class="line"><a id="l02145" name="l02145"></a><span class="lineno"> 2145</span>        };</div>
<div class="line"><a id="l02146" name="l02146"></a><span class="lineno"> 2146</span>        <span class="keyword">auto</span> pop_neighbor = [&amp;]() {</div>
<div class="line"><a id="l02147" name="l02147"></a><span class="lineno"> 2147</span>            std::pair&lt;int, std::vector&lt;int&gt;&gt; <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a> = search_queue.front();</div>
<div class="line"><a id="l02148" name="l02148"></a><span class="lineno"> 2148</span>            search_queue.pop();</div>
<div class="line"><a id="l02149" name="l02149"></a><span class="lineno"> 2149</span>            <span class="keywordflow">return</span> <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>;</div>
<div class="line"><a id="l02150" name="l02150"></a><span class="lineno"> 2150</span>        };</div>
<div class="line"><a id="l02151" name="l02151"></a><span class="lineno"> 2151</span> </div>
<div class="line"><a id="l02152" name="l02152"></a><span class="lineno"> 2152</span>        std::vector&lt;int&gt; veh_parts;</div>
<div class="line"><a id="l02153" name="l02153"></a><span class="lineno"> 2153</span>        push_neighbor( test_part, <a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ test_part ].mount, <span class="keyword">true</span> ) );</div>
<div class="line"><a id="l02154" name="l02154"></a><span class="lineno"> 2154</span>        <span class="keywordflow">while</span>( !search_queue.empty() ) {</div>
<div class="line"><a id="l02155" name="l02155"></a><span class="lineno"> 2155</span>            std::pair&lt;int, std::vector&lt;int&gt;&gt; test_set = pop_neighbor();</div>
<div class="line"><a id="l02156" name="l02156"></a><span class="lineno"> 2156</span>            test_part = test_set.first;</div>
<div class="line"><a id="l02157" name="l02157"></a><span class="lineno"> 2157</span>            <span class="keywordflow">if</span>( checked_parts.find( test_part ) != checked_parts.end() ) {</div>
<div class="line"><a id="l02158" name="l02158"></a><span class="lineno"> 2158</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02159" name="l02159"></a><span class="lineno"> 2159</span>            }</div>
<div class="line"><a id="l02160" name="l02160"></a><span class="lineno"> 2160</span>            <span class="keywordflow">for</span>( <span class="keyword">auto</span> p : test_set.second ) {</div>
<div class="line"><a id="l02161" name="l02161"></a><span class="lineno"> 2161</span>                veh_parts.push_back( p );</div>
<div class="line"><a id="l02162" name="l02162"></a><span class="lineno"> 2162</span>            }</div>
<div class="line"><a id="l02163" name="l02163"></a><span class="lineno"> 2163</span>            checked_parts.insert( test_part );</div>
<div class="line"><a id="l02164" name="l02164"></a><span class="lineno"> 2164</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> &amp;offset : <a class="code hl_variable" href="point_8h.html#aad28d8d682bc8e5628fd2b04df87decd">four_adjacent_offsets</a> ) {</div>
<div class="line"><a id="l02165" name="l02165"></a><span class="lineno"> 2165</span>                <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> dp = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[test_part].mount + offset;</div>
<div class="line"><a id="l02166" name="l02166"></a><span class="lineno"> 2166</span>                std::vector&lt;int&gt; all_neighbor_parts = <a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( dp, <span class="keyword">true</span> );</div>
<div class="line"><a id="l02167" name="l02167"></a><span class="lineno"> 2167</span>                <span class="keywordtype">int</span> neighbor_struct_part = -1;</div>
<div class="line"><a id="l02168" name="l02168"></a><span class="lineno"> 2168</span>                <span class="keywordflow">for</span>( <span class="keywordtype">int</span> p : all_neighbor_parts ) {</div>
<div class="line"><a id="l02169" name="l02169"></a><span class="lineno"> 2169</span>                    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ p ].removed ) {</div>
<div class="line"><a id="l02170" name="l02170"></a><span class="lineno"> 2170</span>                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02171" name="l02171"></a><span class="lineno"> 2171</span>                    }</div>
<div class="line"><a id="l02172" name="l02172"></a><span class="lineno"> 2172</span>                    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( p ).location == <a class="code hl_function" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure</a> ) {</div>
<div class="line"><a id="l02173" name="l02173"></a><span class="lineno"> 2173</span>                        neighbor_struct_part = p;</div>
<div class="line"><a id="l02174" name="l02174"></a><span class="lineno"> 2174</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02175" name="l02175"></a><span class="lineno"> 2175</span>                    }</div>
<div class="line"><a id="l02176" name="l02176"></a><span class="lineno"> 2176</span>                }</div>
<div class="line"><a id="l02177" name="l02177"></a><span class="lineno"> 2177</span>                <span class="keywordflow">if</span>( neighbor_struct_part != -1 ) {</div>
<div class="line"><a id="l02178" name="l02178"></a><span class="lineno"> 2178</span>                    push_neighbor( neighbor_struct_part, all_neighbor_parts );</div>
<div class="line"><a id="l02179" name="l02179"></a><span class="lineno"> 2179</span>                }</div>
<div class="line"><a id="l02180" name="l02180"></a><span class="lineno"> 2180</span>            }</div>
<div class="line"><a id="l02181" name="l02181"></a><span class="lineno"> 2181</span>        }</div>
<div class="line"><a id="l02182" name="l02182"></a><span class="lineno"> 2182</span>        <span class="comment">// don&#39;t include the first vehicle&#39;s worth of parts</span></div>
<div class="line"><a id="l02183" name="l02183"></a><span class="lineno"> 2183</span>        <span class="keywordflow">if</span>( cnt &gt; 0 ) {</div>
<div class="line"><a id="l02184" name="l02184"></a><span class="lineno"> 2184</span>            all_vehicles.push_back( veh_parts );</div>
<div class="line"><a id="l02185" name="l02185"></a><span class="lineno"> 2185</span>        }</div>
<div class="line"><a id="l02186" name="l02186"></a><span class="lineno"> 2186</span>    }</div>
<div class="line"><a id="l02187" name="l02187"></a><span class="lineno"> 2187</span> </div>
<div class="line"><a id="l02188" name="l02188"></a><span class="lineno"> 2188</span>    <span class="keywordflow">if</span>( !all_vehicles.empty() ) {</div>
<div class="line"><a id="l02189" name="l02189"></a><span class="lineno"> 2189</span>        <span class="keywordtype">bool</span> <a class="code hl_enumvalue" href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a6ece335eed53daba50d8caceed1b5c4b">success</a> = <a class="code hl_function" href="classvehicle.html#a90e64bb680f1b708b645df8d06028366">split_vehicles</a>( all_vehicles );</div>
<div class="line"><a id="l02190" name="l02190"></a><span class="lineno"> 2190</span>        <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a6ece335eed53daba50d8caceed1b5c4b">success</a> ) {</div>
<div class="line"><a id="l02191" name="l02191"></a><span class="lineno"> 2191</span>            <span class="comment">// update the active cache</span></div>
<div class="line"><a id="l02192" name="l02192"></a><span class="lineno"> 2192</span>            <a class="code hl_function" href="classvehicle.html#a16b3772f72faa9f18472a45664b36463">shift_parts</a>( <a class="code hl_variable" href="point_8h.html#a0ee2195dcb488ae55fbf4316f5011172">point_zero</a> );</div>
<div class="line"><a id="l02193" name="l02193"></a><span class="lineno"> 2193</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02194" name="l02194"></a><span class="lineno"> 2194</span>        }</div>
<div class="line"><a id="l02195" name="l02195"></a><span class="lineno"> 2195</span>    }</div>
<div class="line"><a id="l02196" name="l02196"></a><span class="lineno"> 2196</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02197" name="l02197"></a><span class="lineno"> 2197</span>}</div>
<div class="ttc" id="aclassvehicle_html_a16b3772f72faa9f18472a45664b36463"><div class="ttname"><a href="classvehicle.html#a16b3772f72faa9f18472a45664b36463">vehicle::shift_parts</a></div><div class="ttdeci">void shift_parts(const point &amp;delta)</div><div class="ttdoc">Shifts all parts of the vehicle by the given amounts, and then shifts the vehicle itself in the oppos...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06279">vehicle.cpp:6279</a></div></div>
<div class="ttc" id="aclassvehicle_html_a90e64bb680f1b708b645df8d06028366"><div class="ttname"><a href="classvehicle.html#a90e64bb680f1b708b645df8d06028366">vehicle::split_vehicles</a></div><div class="ttdeci">bool split_vehicles(const std::vector&lt; std::vector&lt; int &gt; &gt; &amp;new_vehs, const std::vector&lt; vehicle * &gt; &amp;new_vehicles, const std::vector&lt; std::vector&lt; point &gt; &gt; &amp;new_mounts)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02222">vehicle.cpp:2222</a></div></div>
<div class="ttc" id="anamespacebehavior_html_af83204dc0162740f1458e4bbea975a07a6ece335eed53daba50d8caceed1b5c4b"><div class="ttname"><a href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a6ece335eed53daba50d8caceed1b5c4b">behavior::success</a></div><div class="ttdeci">@ success</div><div class="ttdef"><b>Definition:</b> <a href="behavior_8h_source.html#l00020">behavior.h:20</a></div></div>
<div class="ttc" id="anamespacedetail_1_1digits_html_aad69d2373aa047bdd9e81494bf3da5ae"><div class="ttname"><a href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">detail::digits::result</a></div><div class="ttdeci">result</div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__format-inl_8h_source.html#l01626">fmtlib_format-inl.h:1626</a></div></div>
<div class="ttc" id="apoint_8h_html_a0ee2195dcb488ae55fbf4316f5011172"><div class="ttname"><a href="point_8h.html#a0ee2195dcb488ae55fbf4316f5011172">point_zero</a></div><div class="ttdeci">static constexpr point point_zero</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00274">point.h:274</a></div></div>
<div class="ttc" id="apoint_8h_html_aad28d8d682bc8e5628fd2b04df87decd"><div class="ttname"><a href="point_8h.html#aad28d8d682bc8e5628fd2b04df87decd">four_adjacent_offsets</a></div><div class="ttdeci">static constexpr std::array&lt; point, 4 &gt; four_adjacent_offsets</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00358">point.h:358</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l02745">all_parts_at_location()</a>, <a class="el" href="point_8h_source.html#l00358">four_adjacent_offsets</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>, <a class="el" href="point_8h_source.html#l00274">point_zero</a>, <a class="el" href="vehicle_8cpp_source.html#l06279">shift_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>, and <a class="el" href="behavior_8h_source.html#l00020">behavior::success</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06338">break_off()</a>.</p>

</div>
</div>
<a id="af0f69e5e031ee2c64b5e4ea5b874b584" name="af0f69e5e031ee2c64b5e4ea5b874b584"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0f69e5e031ee2c64b5e4ea5b874b584">&#9670;&nbsp;</a></span>find_lines_of_parts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt; int &gt; &gt; vehicle::find_lines_of_parts </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>part</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>flag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns all parts in the vehicle that have the specified flag in their vpinfo and are on the same X-axis or Y-axis as the input part and are contiguous with each other. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">part</td><td>The part to find adjacent parts to </td></tr>
    <tr><td class="paramname">flag</td><td>The flag to match </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A list of lists of indices of all parts sharing the flag and contiguous with the part on the X or Y axis. Returns 0, 1, or 2 lists of indices. </dd></dl>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02789">2789</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02790" name="l02790"></a><span class="lineno"> 2790</span>{</div>
<div class="line"><a id="l02791" name="l02791"></a><span class="lineno"> 2791</span>    <span class="keyword">const</span> <span class="keyword">auto</span> possible_parts = <a class="code hl_function" href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">get_avail_parts</a>( flag );</div>
<div class="line"><a id="l02792" name="l02792"></a><span class="lineno"> 2792</span>    std::vector&lt;std::vector&lt;int&gt;&gt; ret_parts;</div>
<div class="line"><a id="l02793" name="l02793"></a><span class="lineno"> 2793</span>    <span class="keywordflow">if</span>( empty( possible_parts ) ) {</div>
<div class="line"><a id="l02794" name="l02794"></a><span class="lineno"> 2794</span>        <span class="keywordflow">return</span> ret_parts;</div>
<div class="line"><a id="l02795" name="l02795"></a><span class="lineno"> 2795</span>    }</div>
<div class="line"><a id="l02796" name="l02796"></a><span class="lineno"> 2796</span> </div>
<div class="line"><a id="l02797" name="l02797"></a><span class="lineno"> 2797</span>    std::vector&lt;int&gt; x_parts;</div>
<div class="line"><a id="l02798" name="l02798"></a><span class="lineno"> 2798</span>    std::vector&lt;int&gt; y_parts;</div>
<div class="line"><a id="l02799" name="l02799"></a><span class="lineno"> 2799</span>    <a class="code hl_class" href="classstring__id.html">vpart_id</a> part_id = <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ).<a class="code hl_function" href="classvpart__info.html#a3beec15086f138455d92d1897d867780">get_id</a>();</div>
<div class="line"><a id="l02800" name="l02800"></a><span class="lineno"> 2800</span>    <span class="comment">// create vectors of parts on the same X or Y axis</span></div>
<div class="line"><a id="l02801" name="l02801"></a><span class="lineno"> 2801</span>    <a class="code hl_struct" href="structpoint.html">point</a> target = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ].mount;</div>
<div class="line"><a id="l02802" name="l02802"></a><span class="lineno"> 2802</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : possible_parts ) {</div>
<div class="line"><a id="l02803" name="l02803"></a><span class="lineno"> 2803</span>        <span class="keywordflow">if</span>( vp.part().is_unavailable() ||</div>
<div class="line"><a id="l02804" name="l02804"></a><span class="lineno"> 2804</span>            !vp.has_feature( <span class="stringliteral">&quot;MULTISQUARE&quot;</span> ) ||</div>
<div class="line"><a id="l02805" name="l02805"></a><span class="lineno"> 2805</span>            vp.info().get_id() != part_id )  {</div>
<div class="line"><a id="l02806" name="l02806"></a><span class="lineno"> 2806</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02807" name="l02807"></a><span class="lineno"> 2807</span>        }</div>
<div class="line"><a id="l02808" name="l02808"></a><span class="lineno"> 2808</span>        <span class="keywordflow">if</span>( vp.mount().x == target.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> ) {</div>
<div class="line"><a id="l02809" name="l02809"></a><span class="lineno"> 2809</span>            x_parts.push_back( vp.part_index() );</div>
<div class="line"><a id="l02810" name="l02810"></a><span class="lineno"> 2810</span>        }</div>
<div class="line"><a id="l02811" name="l02811"></a><span class="lineno"> 2811</span>        <span class="keywordflow">if</span>( vp.mount().y == target.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> ) {</div>
<div class="line"><a id="l02812" name="l02812"></a><span class="lineno"> 2812</span>            y_parts.push_back( vp.part_index() );</div>
<div class="line"><a id="l02813" name="l02813"></a><span class="lineno"> 2813</span>        }</div>
<div class="line"><a id="l02814" name="l02814"></a><span class="lineno"> 2814</span>    }</div>
<div class="line"><a id="l02815" name="l02815"></a><span class="lineno"> 2815</span> </div>
<div class="line"><a id="l02816" name="l02816"></a><span class="lineno"> 2816</span>    <span class="keywordflow">if</span>( x_parts.size() &gt; 1 ) {</div>
<div class="line"><a id="l02817" name="l02817"></a><span class="lineno"> 2817</span>        std::vector&lt;int&gt; x_ret;</div>
<div class="line"><a id="l02818" name="l02818"></a><span class="lineno"> 2818</span>        <span class="comment">// sort by Y-axis, since they&#39;re all on the same X-axis</span></div>
<div class="line"><a id="l02819" name="l02819"></a><span class="lineno"> 2819</span>        <span class="keyword">const</span> <span class="keyword">auto</span> x_sorter = [&amp;]( <span class="keyword">const</span> <span class="keywordtype">int</span> lhs, <span class="keyword">const</span> <span class="keywordtype">int</span> rhs ) {</div>
<div class="line"><a id="l02820" name="l02820"></a><span class="lineno"> 2820</span>            <span class="keywordflow">return</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[lhs].mount.y &gt; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[rhs].mount.y );</div>
<div class="line"><a id="l02821" name="l02821"></a><span class="lineno"> 2821</span>        };</div>
<div class="line"><a id="l02822" name="l02822"></a><span class="lineno"> 2822</span>        std::sort( x_parts.begin(), x_parts.end(), x_sorter );</div>
<div class="line"><a id="l02823" name="l02823"></a><span class="lineno"> 2823</span>        <span class="keywordtype">int</span> first_part = 0;</div>
<div class="line"><a id="l02824" name="l02824"></a><span class="lineno"> 2824</span>        <span class="keywordtype">int</span> prev_y = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ x_parts[ 0 ] ].mount.y;</div>
<div class="line"><a id="l02825" name="l02825"></a><span class="lineno"> 2825</span>        <span class="keywordtype">int</span> i;</div>
<div class="line"><a id="l02826" name="l02826"></a><span class="lineno"> 2826</span>        <span class="keywordtype">bool</span> found_part = x_parts[ 0 ] == <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>;</div>
<div class="line"><a id="l02827" name="l02827"></a><span class="lineno"> 2827</span>        <span class="keywordflow">for</span>( i = 1; <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( i ) &lt; x_parts.size(); i++ ) {</div>
<div class="line"><a id="l02828" name="l02828"></a><span class="lineno"> 2828</span>            <span class="comment">// if the Y difference is &gt; 1, there&#39;s a break in the run</span></div>
<div class="line"><a id="l02829" name="l02829"></a><span class="lineno"> 2829</span>            <span class="keywordflow">if</span>( std::abs( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ x_parts[ i ] ].mount.y - prev_y )  &gt; 1 ) {</div>
<div class="line"><a id="l02830" name="l02830"></a><span class="lineno"> 2830</span>                <span class="comment">// if we found the part, this is the run we wanted</span></div>
<div class="line"><a id="l02831" name="l02831"></a><span class="lineno"> 2831</span>                <span class="keywordflow">if</span>( found_part ) {</div>
<div class="line"><a id="l02832" name="l02832"></a><span class="lineno"> 2832</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02833" name="l02833"></a><span class="lineno"> 2833</span>                }</div>
<div class="line"><a id="l02834" name="l02834"></a><span class="lineno"> 2834</span>                first_part = i;</div>
<div class="line"><a id="l02835" name="l02835"></a><span class="lineno"> 2835</span>            }</div>
<div class="line"><a id="l02836" name="l02836"></a><span class="lineno"> 2836</span>            found_part |= x_parts[ i ] == <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>;</div>
<div class="line"><a id="l02837" name="l02837"></a><span class="lineno"> 2837</span>            prev_y = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ x_parts[ i ] ].mount.y;</div>
<div class="line"><a id="l02838" name="l02838"></a><span class="lineno"> 2838</span>        }</div>
<div class="line"><a id="l02839" name="l02839"></a><span class="lineno"> 2839</span>        <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> j = first_part; j &lt; static_cast&lt;size_t&gt;( i ); j++ ) {</div>
<div class="line"><a id="l02840" name="l02840"></a><span class="lineno"> 2840</span>            x_ret.push_back( x_parts[ j ] );</div>
<div class="line"><a id="l02841" name="l02841"></a><span class="lineno"> 2841</span>        }</div>
<div class="line"><a id="l02842" name="l02842"></a><span class="lineno"> 2842</span>        ret_parts.push_back( x_ret );</div>
<div class="line"><a id="l02843" name="l02843"></a><span class="lineno"> 2843</span>    }</div>
<div class="line"><a id="l02844" name="l02844"></a><span class="lineno"> 2844</span>    <span class="keywordflow">if</span>( y_parts.size() &gt; 1 ) {</div>
<div class="line"><a id="l02845" name="l02845"></a><span class="lineno"> 2845</span>        std::vector&lt;int&gt; y_ret;</div>
<div class="line"><a id="l02846" name="l02846"></a><span class="lineno"> 2846</span>        <span class="keyword">const</span> <span class="keyword">auto</span> y_sorter = [&amp;]( <span class="keyword">const</span> <span class="keywordtype">int</span> lhs, <span class="keyword">const</span> <span class="keywordtype">int</span> rhs ) {</div>
<div class="line"><a id="l02847" name="l02847"></a><span class="lineno"> 2847</span>            <span class="keywordflow">return</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[lhs].mount.x &gt; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[rhs].mount.x );</div>
<div class="line"><a id="l02848" name="l02848"></a><span class="lineno"> 2848</span>        };</div>
<div class="line"><a id="l02849" name="l02849"></a><span class="lineno"> 2849</span>        std::sort( y_parts.begin(), y_parts.end(), y_sorter );</div>
<div class="line"><a id="l02850" name="l02850"></a><span class="lineno"> 2850</span>        <span class="keywordtype">int</span> first_part = 0;</div>
<div class="line"><a id="l02851" name="l02851"></a><span class="lineno"> 2851</span>        <span class="keywordtype">int</span> prev_x = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ y_parts[ 0 ] ].mount.x;</div>
<div class="line"><a id="l02852" name="l02852"></a><span class="lineno"> 2852</span>        <span class="keywordtype">int</span> i;</div>
<div class="line"><a id="l02853" name="l02853"></a><span class="lineno"> 2853</span>        <span class="keywordtype">bool</span> found_part = y_parts[ 0 ] == <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>;</div>
<div class="line"><a id="l02854" name="l02854"></a><span class="lineno"> 2854</span>        <span class="keywordflow">for</span>( i = 1; <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( i ) &lt; y_parts.size(); i++ ) {</div>
<div class="line"><a id="l02855" name="l02855"></a><span class="lineno"> 2855</span>            <span class="keywordflow">if</span>( std::abs( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ y_parts[ i ] ].mount.x - prev_x )  &gt; 1 ) {</div>
<div class="line"><a id="l02856" name="l02856"></a><span class="lineno"> 2856</span>                <span class="keywordflow">if</span>( found_part ) {</div>
<div class="line"><a id="l02857" name="l02857"></a><span class="lineno"> 2857</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02858" name="l02858"></a><span class="lineno"> 2858</span>                }</div>
<div class="line"><a id="l02859" name="l02859"></a><span class="lineno"> 2859</span>                first_part = i;</div>
<div class="line"><a id="l02860" name="l02860"></a><span class="lineno"> 2860</span>            }</div>
<div class="line"><a id="l02861" name="l02861"></a><span class="lineno"> 2861</span>            found_part |= y_parts[ i ] == <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>;</div>
<div class="line"><a id="l02862" name="l02862"></a><span class="lineno"> 2862</span>            prev_x = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ y_parts[ i ] ].mount.x;</div>
<div class="line"><a id="l02863" name="l02863"></a><span class="lineno"> 2863</span>        }</div>
<div class="line"><a id="l02864" name="l02864"></a><span class="lineno"> 2864</span>        <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> j = first_part; j &lt; static_cast&lt;size_t&gt;( i ); j++ ) {</div>
<div class="line"><a id="l02865" name="l02865"></a><span class="lineno"> 2865</span>            y_ret.push_back( y_parts[ j ] );</div>
<div class="line"><a id="l02866" name="l02866"></a><span class="lineno"> 2866</span>        }</div>
<div class="line"><a id="l02867" name="l02867"></a><span class="lineno"> 2867</span>        ret_parts.push_back( y_ret );</div>
<div class="line"><a id="l02868" name="l02868"></a><span class="lineno"> 2868</span>    }</div>
<div class="line"><a id="l02869" name="l02869"></a><span class="lineno"> 2869</span>    <span class="keywordflow">if</span>( y_parts.size() == 1 &amp;&amp; x_parts.size() == 1 ) {</div>
<div class="line"><a id="l02870" name="l02870"></a><span class="lineno"> 2870</span>        ret_parts.push_back( x_parts );</div>
<div class="line"><a id="l02871" name="l02871"></a><span class="lineno"> 2871</span>    }</div>
<div class="line"><a id="l02872" name="l02872"></a><span class="lineno"> 2872</span>    <span class="keywordflow">return</span> ret_parts;</div>
<div class="line"><a id="l02873" name="l02873"></a><span class="lineno"> 2873</span>}</div>
<div class="ttc" id="aclassvpart__info_html_a3beec15086f138455d92d1897d867780"><div class="ttname"><a href="classvpart__info.html#a3beec15086f138455d92d1897d867780">vpart_info::get_id</a></div><div class="ttdeci">vpart_id get_id() const</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00147">veh_type.h:147</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l02678">get_avail_parts()</a>, <a class="el" href="veh__type_8h_source.html#l00147">vpart_info::get_id()</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="point_8h_source.html#l00038">point::x</a>, and <a class="el" href="point_8h_source.html#l00039">point::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l01493">can_close()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01532">open_or_close()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l01823">use_bike_rack()</a>.</p>

</div>
</div>
<a id="abc38c6f89711eb77b77fa955d4e24040" name="abc38c6f89711eb77b77fa955d4e24040"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc38c6f89711eb77b77fa955d4e24040">&#9670;&nbsp;</a></span>find_part()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::find_part </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>it</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get index of part with matching base item or INT_MIN if not found. </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02395">2395</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02396" name="l02396"></a><span class="lineno"> 2396</span>{</div>
<div class="line"><a id="l02397" name="l02397"></a><span class="lineno"> 2397</span>    <span class="keyword">auto</span> idx = std::find_if( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.begin(), <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.end(), [&amp;it]( <span class="keyword">const</span> <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp; e ) {</div>
<div class="line"><a id="l02398" name="l02398"></a><span class="lineno"> 2398</span>        return &amp;e.base == &amp;it;</div>
<div class="line"><a id="l02399" name="l02399"></a><span class="lineno"> 2399</span>    } );</div>
<div class="line"><a id="l02400" name="l02400"></a><span class="lineno"> 2400</span>    <span class="keywordflow">return</span> idx != <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.end() ? std::distance( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.begin(), idx ) : INT_MIN;</div>
<div class="line"><a id="l02401" name="l02401"></a><span class="lineno"> 2401</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02896">act_vehicle_siphon()</a>, and <a class="el" href="veh__interact_8cpp_source.html#l01917">veh_interact::do_siphon()</a>.</p>

</div>
</div>
<a id="a9f7d91110eca49a43877317c08a99bf9" name="a9f7d91110eca49a43877317c08a99bf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f7d91110eca49a43877317c08a99bf9">&#9670;&nbsp;</a></span>find_vehicle() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classvehicle.html">vehicle</a> * vehicle::find_vehicle </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>where</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find a possibly off-map vehicle. </p>
<p >If necessary, loads up its submap through the global MAPBUFFER and pulls it from there. For this reason, you should only give it the coordinates of the origin tile of a target vehicle. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">where</td><td>Location of the other vehicle's origin tile. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04720">4720</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04721" name="l04721"></a><span class="lineno"> 4721</span>{</div>
<div class="line"><a id="l04722" name="l04722"></a><span class="lineno"> 4722</span>    <span class="comment">// Is it in the reality bubble?</span></div>
<div class="line"><a id="l04723" name="l04723"></a><span class="lineno"> 4723</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> veh_local = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.getlocal( where );</div>
<div class="line"><a id="l04724" name="l04724"></a><span class="lineno"> 4724</span>    <span class="keywordflow">if</span>( <span class="keyword">const</span> <a class="code hl_class" href="classoptional__vpart__position.html">optional_vpart_position</a> vp = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.veh_at( veh_local ) ) {</div>
<div class="line"><a id="l04725" name="l04725"></a><span class="lineno"> 4725</span>        <span class="keywordflow">return</span> &amp;vp-&gt;vehicle();</div>
<div class="line"><a id="l04726" name="l04726"></a><span class="lineno"> 4726</span>    }</div>
<div class="line"><a id="l04727" name="l04727"></a><span class="lineno"> 4727</span> </div>
<div class="line"><a id="l04728" name="l04728"></a><span class="lineno"> 4728</span>    <span class="comment">// Nope. Load up its submap...</span></div>
<div class="line"><a id="l04729" name="l04729"></a><span class="lineno"> 4729</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> veh_in_sm = where;</div>
<div class="line"><a id="l04730" name="l04730"></a><span class="lineno"> 4730</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> veh_sm = <a class="code hl_function" href="coordinate__conversions_8cpp.html#a841adeceebc3fbb8f2a4d3b63dd00632">ms_to_sm_remain</a>( veh_in_sm );</div>
<div class="line"><a id="l04731" name="l04731"></a><span class="lineno"> 4731</span> </div>
<div class="line"><a id="l04732" name="l04732"></a><span class="lineno"> 4732</span>    <span class="keyword">auto</span> <a class="code hl_variable" href="namespacecoords.html#a7457d0a4e8c8e6407a2c0ee89d275962">sm</a> = <a class="code hl_variable" href="mapbuffer_8cpp.html#abc900a0fe17d282e0e4717540106e608">MAPBUFFER</a>.<a class="code hl_function" href="classmapbuffer.html#a84df91661b328060eb44b4e4eaba0dcd">lookup_submap</a>( veh_sm );</div>
<div class="line"><a id="l04733" name="l04733"></a><span class="lineno"> 4733</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="namespacecoords.html#a7457d0a4e8c8e6407a2c0ee89d275962">sm</a> == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l04734" name="l04734"></a><span class="lineno"> 4734</span>        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l04735" name="l04735"></a><span class="lineno"> 4735</span>    }</div>
<div class="line"><a id="l04736" name="l04736"></a><span class="lineno"> 4736</span> </div>
<div class="line"><a id="l04737" name="l04737"></a><span class="lineno"> 4737</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;elem : <a class="code hl_variable" href="namespacecoords.html#a7457d0a4e8c8e6407a2c0ee89d275962">sm</a>-&gt;vehicles ) {</div>
<div class="line"><a id="l04738" name="l04738"></a><span class="lineno"> 4738</span>        <a class="code hl_class" href="classvehicle.html">vehicle</a> *found_veh = elem.get();</div>
<div class="line"><a id="l04739" name="l04739"></a><span class="lineno"> 4739</span>        <span class="keywordflow">if</span>( veh_in_sm.<a class="code hl_function" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>() == found_veh-&gt;<a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> ) {</div>
<div class="line"><a id="l04740" name="l04740"></a><span class="lineno"> 4740</span>            <span class="keywordflow">return</span> found_veh;</div>
<div class="line"><a id="l04741" name="l04741"></a><span class="lineno"> 4741</span>        }</div>
<div class="line"><a id="l04742" name="l04742"></a><span class="lineno"> 4742</span>    }</div>
<div class="line"><a id="l04743" name="l04743"></a><span class="lineno"> 4743</span> </div>
<div class="line"><a id="l04744" name="l04744"></a><span class="lineno"> 4744</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l04745" name="l04745"></a><span class="lineno"> 4745</span>}</div>
<div class="ttc" id="aclassmapbuffer_html_a84df91661b328060eb44b4e4eaba0dcd"><div class="ttname"><a href="classmapbuffer.html#a84df91661b328060eb44b4e4eaba0dcd">mapbuffer::lookup_submap</a></div><div class="ttdeci">submap * lookup_submap(const tripoint &amp;p)</div><div class="ttdoc">Get a submap stored in this buffer.</div><div class="ttdef"><b>Definition:</b> <a href="mapbuffer_8cpp_source.html#l00088">mapbuffer.cpp:88</a></div></div>
<div class="ttc" id="acoordinate__conversions_8cpp_html_a841adeceebc3fbb8f2a4d3b63dd00632"><div class="ttname"><a href="coordinate__conversions_8cpp.html#a841adeceebc3fbb8f2a4d3b63dd00632">ms_to_sm_remain</a></div><div class="ttdeci">point ms_to_sm_remain(int &amp;x, int &amp;y)</div><div class="ttdef"><b>Definition:</b> <a href="coordinate__conversions_8cpp_source.html#l00141">coordinate_conversions.cpp:141</a></div></div>
<div class="ttc" id="amapbuffer_8cpp_html_abc900a0fe17d282e0e4717540106e608"><div class="ttname"><a href="mapbuffer_8cpp.html#abc900a0fe17d282e0e4717540106e608">MAPBUFFER</a></div><div class="ttdeci">mapbuffer MAPBUFFER</div><div class="ttdef"><b>Definition:</b> <a href="mapbuffer_8cpp_source.html#l00040">mapbuffer.cpp:40</a></div></div>
<div class="ttc" id="anamespacecoords_html_a7457d0a4e8c8e6407a2c0ee89d275962"><div class="ttname"><a href="namespacecoords.html#a7457d0a4e8c8e6407a2c0ee89d275962">coords::sm</a></div><div class="ttdeci">constexpr scale sm</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00031">coordinates.h:31</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="mapbuffer_8cpp_source.html#l00088">mapbuffer::lookup_submap()</a>, <a class="el" href="mapbuffer_8cpp_source.html#l00040">MAPBUFFER</a>, <a class="el" href="coordinate__conversions_8cpp_source.html#l00141">ms_to_sm_remain()</a>, <a class="el" href="vehicle_8h_source.html#l01859">pos</a>, <a class="el" href="coordinates_8h_source.html#l00031">coords::sm</a>, and <a class="el" href="point_8h_source.html#l00220">tripoint::xy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8h_source.html#l00746">find_vehicle()</a>, <a class="el" href="distribution__grid_8cpp_source.html#l00121">distribution_grid::get_resource()</a>, <a class="el" href="distribution__grid_8cpp_source.html#l00072">distribution_grid::mod_resource()</a>, <a class="el" href="vehicle_8cpp_source.html#l06035">remove_remote_part()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04802">distribution_graph::traverse()</a>.</p>

</div>
</div>
<a id="a59e1530025754fa2879e9530ba022e85" name="a59e1530025754fa2879e9530ba022e85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59e1530025754fa2879e9530ba022e85">&#9670;&nbsp;</a></span>find_vehicle() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classvehicle.html">vehicle</a> * vehicle::find_vehicle </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="coordinates_8h.html#a25195af12949fae51d496c1fbd549871">tripoint_abs_ms</a> &amp;&#160;</td>
          <td class="paramname"><em>where</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l00746">746</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>                                                                     {</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a9f7d91110eca49a43877317c08a99bf9">find_vehicle</a>( where.<a class="code hl_function" href="classcoords_1_1coord__point.html#a3f9a44403c08f2eaf0d605b1d034c048">raw</a>() );</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>        }</div>
<div class="ttc" id="aclassvehicle_html_a9f7d91110eca49a43877317c08a99bf9"><div class="ttname"><a href="classvehicle.html#a9f7d91110eca49a43877317c08a99bf9">vehicle::find_vehicle</a></div><div class="ttdeci">static vehicle * find_vehicle(const tripoint &amp;where)</div><div class="ttdoc">Find a possibly off-map vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04720">vehicle.cpp:4720</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l04720">find_vehicle()</a>, and <a class="el" href="coordinates_8h_source.html#l00111">coords::coord_point&lt; Point, Origin, Scale &gt;::raw()</a>.</p>

</div>
</div>
<a id="aac5f2a0e58f59b3cc5020d9bb7216bdd" name="aac5f2a0e58f59b3cc5020d9bb7216bdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac5f2a0e58f59b3cc5020d9bb7216bdd">&#9670;&nbsp;</a></span>fold_up()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::fold_up </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l00801">801</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>{</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> can_be_folded = <a class="code hl_function" href="classvehicle.html#ad9e5f31113c5dda6b76442cbd7b8429f">is_foldable</a>();</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> is_convertible = ( <a class="code hl_variable" href="classvehicle.html#a0383bc21c8d6b5a3689124f3d286a004">tags</a>.count( <span class="stringliteral">&quot;convertible&quot;</span> ) &gt; 0 );</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>    <span class="keywordflow">if</span>( !( can_be_folded || is_convertible ) ) {</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Tried to fold non-folding vehicle %s&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>    }</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span> </div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.controlling_vehicle ) {</div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>,</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;As the pitiless metal bars close on your nether regions, you reconsider trying to fold the %s while riding it.&quot;</span> ),</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>                 <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>    }</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span> </div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &gt; 0 ) {</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You can&#39;t fold the %s while it&#39;s in motion.&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>    }</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span> </div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You painstakingly pack the %s into a portable configuration.&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span> </div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.get_grab_type() != <a class="code hl_enumvalue" href="enums_8h.html#af54461b7c3322b2256322f7b545bd623a4935756997f731df406a527a22af531c">OBJECT_NONE</a> ) {</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.grab( <a class="code hl_enumvalue" href="enums_8h.html#af54461b7c3322b2256322f7b545bd623a4935756997f731df406a527a22af531c">OBJECT_NONE</a> );</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You let go of %s as you fold it.&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>    }</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span> </div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>    std::string <a class="code hl_class" href="classstring__id.html">itype_id</a> = <span class="stringliteral">&quot;folding_bicycle&quot;</span>;</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;elem : <a class="code hl_variable" href="classvehicle.html#a0383bc21c8d6b5a3689124f3d286a004">tags</a> ) {</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>        <span class="keywordflow">if</span>( elem.compare( 0, 12, <span class="stringliteral">&quot;convertible:&quot;</span> ) == 0 ) {</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>            <a class="code hl_class" href="classstring__id.html">itype_id</a> = elem.substr( 12 );</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>        }</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>    }</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span> </div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>    <span class="comment">// create a folding [non]bicycle item</span></div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>    <a class="code hl_class" href="classitem.html">item</a> bicycle( can_be_folded ? <span class="stringliteral">&quot;generic_folded_vehicle&quot;</span> : <span class="stringliteral">&quot;folding_bicycle&quot;</span>, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span> </div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>    <span class="comment">// Drop stuff in containers on ground</span></div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#adfbc0794c9bb9a5f1d75e1c52a2e561a">get_any_parts</a>( <span class="stringliteral">&quot;CARGO&quot;</span> ) ) {</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> p = vp.part_index();</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;elem : <a class="code hl_function" href="classvehicle.html#a983dd9db3cd64078b176a82289e0b260">get_items</a>( p ) ) {</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_item_or_charges( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos(), elem );</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>        }</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>        <span class="keywordflow">while</span>( !<a class="code hl_function" href="classvehicle.html#a983dd9db3cd64078b176a82289e0b260">get_items</a>( p ).empty() ) {</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>            <a class="code hl_function" href="classvehicle.html#a983dd9db3cd64078b176a82289e0b260">get_items</a>( p ).<a class="code hl_function" href="classvehicle__stack.html#a7d4bd966fe8cb78325aeaa8873672146">erase</a>( <a class="code hl_function" href="classvehicle.html#a983dd9db3cd64078b176a82289e0b260">get_items</a>( p ).begin() );</div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>        }</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>    }</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span> </div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>    <a class="code hl_function" href="classvehicle.html#a222ab75111163098b53f34a28e017dad">unboard_all</a>();</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span> </div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>    <span class="comment">// Store data of all parts, iuse::unfold_bicyle only loads</span></div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>    <span class="comment">// some of them, some are expect to be</span></div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>    <span class="comment">// vehicle specific and therefore constant (like id, mount).</span></div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>    <span class="comment">// Writing everything here is easier to manage, as only</span></div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>    <span class="comment">// iuse::unfold_bicyle has to adopt to changes.</span></div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>        std::ostringstream veh_data;</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>        <a class="code hl_class" href="classJsonOut.html">JsonOut</a> json( veh_data );</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>        json.write( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> );</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>        bicycle.set_var( <span class="stringliteral">&quot;folding_bicycle_parts&quot;</span>, veh_data.str() );</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>    } <span class="keywordflow">catch</span>( <span class="keyword">const</span> <a class="code hl_class" href="classJsonError.html">JsonError</a> &amp;e ) {</div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Error storing vehicle: %s&quot;</span>, e.<a class="code hl_function" href="classJsonError.html#a6e7c0db4458ef6049d21735fb443e212">c_str</a>() );</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>    }</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span> </div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>    <span class="keywordflow">if</span>( can_be_folded ) {</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>        bicycle.set_var( <span class="stringliteral">&quot;weight&quot;</span>, <a class="code hl_function" href="namespaceunits.html#a45d721a4da124440a894d4c2bebf40f0">to_milligram</a>( <a class="code hl_function" href="classvehicle.html#a5a7d83716bf73d4b58d265b626872d01">total_mass</a>() ) );</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>        bicycle.set_var( <span class="stringliteral">&quot;volume&quot;</span>, <a class="code hl_function" href="classvehicle.html#a8beceeb67e5a0355b3737efa24638a15">total_folded_volume</a>() / <a class="code hl_variable" href="namespaceunits.html#a58e7d31fbaa28a1dd45fb598f8d1fba9">units::legacy_volume_factor</a> );</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>        bicycle.set_var( <span class="stringliteral">&quot;name&quot;</span>, <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;folded %s&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> ) );</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>        bicycle.set_var( <span class="stringliteral">&quot;vehicle_name&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>        <span class="comment">// TODO: a better description?</span></div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>        bicycle.set_var( <span class="stringliteral">&quot;description&quot;</span>, <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A folded %s.&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> ) );</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>    }</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span> </div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_item_or_charges( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( 0 ), bicycle );</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.destroy_vehicle( <span class="keyword">this</span> );</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span> </div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>    <span class="comment">// TODO: take longer to fold bigger vehicles</span></div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>    <span class="comment">// TODO: make this interruptible</span></div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.moves -= 500;</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>}</div>
<div class="ttc" id="aclassJsonError_html"><div class="ttname"><a href="classJsonError.html">JsonError</a></div><div class="ttdef"><b>Definition:</b> <a href="json_8h_source.html#l00050">json.h:51</a></div></div>
<div class="ttc" id="aclassJsonError_html_a6e7c0db4458ef6049d21735fb443e212"><div class="ttname"><a href="classJsonError.html#a6e7c0db4458ef6049d21735fb443e212">JsonError::c_str</a></div><div class="ttdeci">const char * c_str() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="json_8h_source.html#l00054">json.h:54</a></div></div>
<div class="ttc" id="aclassJsonOut_html"><div class="ttname"><a href="classJsonOut.html">JsonOut</a></div><div class="ttdef"><b>Definition:</b> <a href="json_8h_source.html#l00579">json.h:580</a></div></div>
<div class="ttc" id="aclassvehicle__stack_html_a7d4bd966fe8cb78325aeaa8873672146"><div class="ttname"><a href="classvehicle__stack.html#a7d4bd966fe8cb78325aeaa8873672146">vehicle_stack::erase</a></div><div class="ttdeci">iterator erase(const_iterator it) override</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l00230">vehicle.cpp:230</a></div></div>
<div class="ttc" id="aclassvehicle_html_a8beceeb67e5a0355b3737efa24638a15"><div class="ttname"><a href="classvehicle.html#a8beceeb67e5a0355b3737efa24638a15">vehicle::total_folded_volume</a></div><div class="ttdeci">units::volume total_folded_volume() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03135">vehicle.cpp:3135</a></div></div>
<div class="ttc" id="aclassvehicle_html_ad9e5f31113c5dda6b76442cbd7b8429f"><div class="ttname"><a href="classvehicle.html#ad9e5f31113c5dda6b76442cbd7b8429f">vehicle::is_foldable</a></div><div class="ttdeci">bool is_foldable() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06537">vehicle.cpp:6537</a></div></div>
<div class="ttc" id="aenums_8h_html_af54461b7c3322b2256322f7b545bd623a4935756997f731df406a527a22af531c"><div class="ttname"><a href="enums_8h.html#af54461b7c3322b2256322f7b545bd623a4935756997f731df406a527a22af531c">OBJECT_NONE</a></div><div class="ttdeci">@ OBJECT_NONE</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00187">enums.h:187</a></div></div>
<div class="ttc" id="anamespaceunits_html_a45d721a4da124440a894d4c2bebf40f0"><div class="ttname"><a href="namespaceunits.html#a45d721a4da124440a894d4c2bebf40f0">units::to_milligram</a></div><div class="ttdeci">constexpr value_type to_milligram(const quantity&lt; value_type, mass_in_milligram_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units__mass_8h_source.html#l00061">units_mass.h:61</a></div></div>
<div class="ttc" id="anamespaceunits_html_a58e7d31fbaa28a1dd45fb598f8d1fba9"><div class="ttname"><a href="namespaceunits.html#a58e7d31fbaa28a1dd45fb598f8d1fba9">units::legacy_volume_factor</a></div><div class="ttdeci">static constexpr volume legacy_volume_factor</div><div class="ttdef"><b>Definition:</b> <a href="units__volume_8h_source.html#l00050">units_volume.h:50</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="json_8h_source.html#l00054">JsonError::c_str()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="vehicle_8cpp_source.html#l00230">vehicle_stack::erase()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l02708">get_any_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l05288">get_items()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l06537">is_foldable()</a>, <a class="el" href="units__volume_8h_source.html#l00050">units::legacy_volume_factor</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="enums_8h_source.html#l00187">OBJECT_NONE</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="item_8cpp_source.html#l00992">item::set_var()</a>, <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>, <a class="el" href="vehicle_8h_source.html#l01802">tags</a>, <a class="el" href="units__mass_8h_source.html#l00061">units::to_milligram()</a>, <a class="el" href="vehicle_8cpp_source.html#l03135">total_folded_volume()</a>, <a class="el" href="vehicle_8cpp_source.html#l03126">total_mass()</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, <a class="el" href="vehicle_8cpp_source.html#l06165">unboard_all()</a>, <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>, and <a class="el" href="json_8h_source.html#l00620">JsonOut::write()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="a8e7305881802ea38e07925826da63b82" name="a8e7305881802ea38e07925826da63b82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e7305881802ea38e07925826da63b82">&#9670;&nbsp;</a></span>forward_velocity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float vehicle::forward_velocity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__move_8cpp_source.html#l01187">1187</a> of file <a class="el" href="vehicle__move_8cpp_source.html">vehicle_move.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span>{</div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>    <a class="code hl_struct" href="structrl__vec2d.html">rl_vec2d</a> mv = <a class="code hl_function" href="classvehicle.html#a0e308fcc9e8b3b08ccf622825e94c9cc">move_vec</a>();</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span>    <a class="code hl_struct" href="structrl__vec2d.html">rl_vec2d</a> fv = <a class="code hl_function" href="classvehicle.html#a2bc8dfdab1fadc47966b0a69520c737c">face_vec</a>();</div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>    <span class="keywordtype">float</span> <a class="code hl_function" href="simplexnoise_8cpp.html#ac09abdb6d0f634024e3f63d92542e38f">dot</a> = mv.<a class="code hl_function" href="structrl__vec2d.html#acc0292005168ba5d844ab15cfe961d72">dot_product</a>( fv );</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> * <a class="code hl_function" href="simplexnoise_8cpp.html#ac09abdb6d0f634024e3f63d92542e38f">dot</a>;</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>}</div>
<div class="ttc" id="aclassvehicle_html_a0e308fcc9e8b3b08ccf622825e94c9cc"><div class="ttname"><a href="classvehicle.html#a0e308fcc9e8b3b08ccf622825e94c9cc">vehicle::move_vec</a></div><div class="ttdeci">rl_vec2d move_vec() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l01214">vehicle_move.cpp:1214</a></div></div>
<div class="ttc" id="aclassvehicle_html_a2bc8dfdab1fadc47966b0a69520c737c"><div class="ttname"><a href="classvehicle.html#a2bc8dfdab1fadc47966b0a69520c737c">vehicle::face_vec</a></div><div class="ttdeci">rl_vec2d face_vec() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l01220">vehicle_move.cpp:1220</a></div></div>
<div class="ttc" id="asimplexnoise_8cpp_html_ac09abdb6d0f634024e3f63d92542e38f"><div class="ttname"><a href="simplexnoise_8cpp.html#ac09abdb6d0f634024e3f63d92542e38f">dot</a></div><div class="ttdeci">float dot(const int *g, const float x, const float y)</div><div class="ttdef"><b>Definition:</b> <a href="simplexnoise_8cpp_source.html#l00540">simplexnoise.cpp:540</a></div></div>
<div class="ttc" id="astructrl__vec2d_html"><div class="ttname"><a href="structrl__vec2d.html">rl_vec2d</a></div><div class="ttdef"><b>Definition:</b> <a href="point__float_8h_source.html#l00010">point_float.h:10</a></div></div>
<div class="ttc" id="astructrl__vec2d_html_acc0292005168ba5d844ab15cfe961d72"><div class="ttname"><a href="structrl__vec2d.html#acc0292005168ba5d844ab15cfe961d72">rl_vec2d::dot_product</a></div><div class="ttdeci">float dot_product(const rl_vec2d &amp;v) const</div><div class="ttdef"><b>Definition:</b> <a href="line_8cpp_source.html#l00664">line.cpp:664</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="simplexnoise_8cpp_source.html#l00540">dot()</a>, <a class="el" href="line_8cpp_source.html#l00664">rl_vec2d::dot_product()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01220">face_vec()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01214">move_vec()</a>, and <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l05855">map::draw_maptile()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01061">pldrive()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00933">selfdrive()</a>.</p>

</div>
</div>
<a id="ad2d0a1cc3c320adad08d7034f4f18683" name="ad2d0a1cc3c320adad08d7034f4f18683"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2d0a1cc3c320adad08d7034f4f18683">&#9670;&nbsp;</a></span>free_volume()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceunits.html#a5d16607c866588620acb381e7dbbf0a6">units::volume</a> vehicle::free_volume </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05163">5163</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05164" name="l05164"></a><span class="lineno"> 5164</span>{</div>
<div class="line"><a id="l05165" name="l05165"></a><span class="lineno"> 5165</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a983dd9db3cd64078b176a82289e0b260">get_items</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ).<a class="code hl_function" href="classitem__stack.html#a543c766f2325b9f5ad03824a8047c97b">free_volume</a>();</div>
<div class="line"><a id="l05166" name="l05166"></a><span class="lineno"> 5166</span>}</div>
<div class="ttc" id="aclassitem__stack_html_a543c766f2325b9f5ad03824a8047c97b"><div class="ttname"><a href="classitem__stack.html#a543c766f2325b9f5ad03824a8047c97b">item_stack::free_volume</a></div><div class="ttdeci">units::volume free_volume() const</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00141">item_stack.cpp:141</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__stack_8cpp_source.html#l00141">item_stack::free_volume()</a>, <a class="el" href="vehicle_8cpp_source.html#l05288">get_items()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>, <a class="el" href="advanced__inv__area_8cpp_source.html#l00198">advanced_inv_area::free_volume()</a>, and <a class="el" href="activity__item__handling_8cpp_source.html#l00888">move_cost()</a>.</p>

</div>
</div>
<a id="a2d14b343f954d77dd649891fefd221de" name="a2d14b343f954d77dd649891fefd221de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d14b343f954d77dd649891fefd221de">&#9670;&nbsp;</a></span>fuel_capacity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::fuel_capacity </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>ftype</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03238">3238</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03239" name="l03239"></a><span class="lineno"> 3239</span>{</div>
<div class="line"><a id="l03240" name="l03240"></a><span class="lineno"> 3240</span>    <span class="keywordflow">return</span> std::accumulate( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.begin(), <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.end(), 0, [&amp;ftype]( <span class="keyword">const</span> <span class="keywordtype">int</span> &amp;lhs,</div>
<div class="line"><a id="l03241" name="l03241"></a><span class="lineno"> 3241</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp; rhs ) {</div>
<div class="line"><a id="l03242" name="l03242"></a><span class="lineno"> 3242</span>        return lhs + ( rhs.ammo_current() == ftype ? rhs.ammo_capacity() : 0 );</div>
<div class="line"><a id="l03243" name="l03243"></a><span class="lineno"> 3243</span>    } );</div>
<div class="line"><a id="l03244" name="l03244"></a><span class="lineno"> 3244</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="faction__camp_8cpp_source.html#l03822">camp_car_description()</a>, <a class="el" href="vehicle_8cpp_source.html#l04619">power_parts()</a>, and <a class="el" href="vehicle__display_8cpp_source.html#l00398">print_fuel_indicator()</a>.</p>

</div>
</div>
<a id="a5b3c37a197c21cdd469e7779f8c1db50" name="a5b3c37a197c21cdd469e7779f8c1db50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b3c37a197c21cdd469e7779f8c1db50">&#9670;&nbsp;</a></span>fuel_left() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::fuel_left </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>ftype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>recurse</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03179">3179</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03180" name="l03180"></a><span class="lineno"> 3180</span>{</div>
<div class="line"><a id="l03181" name="l03181"></a><span class="lineno"> 3181</span>    <span class="keywordtype">int</span> fl = std::accumulate( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.begin(), <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.end(), 0, [&amp;ftype]( <span class="keyword">const</span> <span class="keywordtype">int</span> &amp;lhs,</div>
<div class="line"><a id="l03182" name="l03182"></a><span class="lineno"> 3182</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp; rhs ) {</div>
<div class="line"><a id="l03183" name="l03183"></a><span class="lineno"> 3183</span>        return lhs + ( rhs.ammo_current() == ftype ? rhs.ammo_remaining() : 0 );</div>
<div class="line"><a id="l03184" name="l03184"></a><span class="lineno"> 3184</span>    } );</div>
<div class="line"><a id="l03185" name="l03185"></a><span class="lineno"> 3185</span> </div>
<div class="line"><a id="l03186" name="l03186"></a><span class="lineno"> 3186</span>    <span class="keywordflow">if</span>( recurse &amp;&amp; ftype == <a class="code hl_variable" href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a> ) {</div>
<div class="line"><a id="l03187" name="l03187"></a><span class="lineno"> 3187</span>        <span class="keyword">using</span> tvr = <a class="code hl_enumeration" href="namespacedistribution__graph.html#a2693ab255ec1b2e508b6af35709ce9eb">distribution_graph::traverse_visitor_result</a>;</div>
<div class="line"><a id="l03188" name="l03188"></a><span class="lineno"> 3188</span>        <span class="keyword">auto</span> fuel_counting_visitor = [&amp;fl, &amp;ftype]( <a class="code hl_class" href="classvehicle.html">vehicle</a> <span class="keyword">const</span> &amp; veh ) {</div>
<div class="line"><a id="l03189" name="l03189"></a><span class="lineno"> 3189</span>            fl += veh.fuel_left( ftype, <span class="keyword">false</span> );</div>
<div class="line"><a id="l03190" name="l03190"></a><span class="lineno"> 3190</span>            <span class="keywordflow">return</span> tvr::continue_further;</div>
<div class="line"><a id="l03191" name="l03191"></a><span class="lineno"> 3191</span>        };</div>
<div class="line"><a id="l03192" name="l03192"></a><span class="lineno"> 3192</span>        <span class="keyword">auto</span> power_counting_visitor = [&amp;fl]( <a class="code hl_class" href="classdistribution__grid.html">distribution_grid</a> <span class="keyword">const</span> &amp; grid ) {</div>
<div class="line"><a id="l03193" name="l03193"></a><span class="lineno"> 3193</span>            fl += grid.get_resource( <span class="keyword">false</span> );</div>
<div class="line"><a id="l03194" name="l03194"></a><span class="lineno"> 3194</span>            <span class="keywordflow">return</span> tvr::continue_further;</div>
<div class="line"><a id="l03195" name="l03195"></a><span class="lineno"> 3195</span>        };</div>
<div class="line"><a id="l03196" name="l03196"></a><span class="lineno"> 3196</span> </div>
<div class="line"><a id="l03197" name="l03197"></a><span class="lineno"> 3197</span>        <a class="code hl_function" href="namespacedistribution__graph.html#a27a7603aec9db0a5d334bbee275915d9">distribution_graph::traverse</a>( *<span class="keyword">this</span>, fuel_counting_visitor, power_counting_visitor );</div>
<div class="line"><a id="l03198" name="l03198"></a><span class="lineno"> 3198</span>    }</div>
<div class="line"><a id="l03199" name="l03199"></a><span class="lineno"> 3199</span> </div>
<div class="line"><a id="l03200" name="l03200"></a><span class="lineno"> 3200</span>    <span class="comment">//muscle engines have infinite fuel</span></div>
<div class="line"><a id="l03201" name="l03201"></a><span class="lineno"> 3201</span>    <span class="keywordflow">if</span>( ftype == <a class="code hl_variable" href="vehicle_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a> ) {</div>
<div class="line"><a id="l03202" name="l03202"></a><span class="lineno"> 3202</span>        <span class="comment">// TODO: Allow NPCs to power those</span></div>
<div class="line"><a id="l03203" name="l03203"></a><span class="lineno"> 3203</span>        <span class="keyword">const</span> <a class="code hl_class" href="classoptional__vpart__position.html">optional_vpart_position</a> vp = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.veh_at( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() );</div>
<div class="line"><a id="l03204" name="l03204"></a><span class="lineno"> 3204</span>        <span class="keywordtype">bool</span> player_controlling = <a class="code hl_function" href="classvehicle.html#a341515426011486c265d016c35f84de6">player_in_control</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u );</div>
<div class="line"><a id="l03205" name="l03205"></a><span class="lineno"> 3205</span> </div>
<div class="line"><a id="l03206" name="l03206"></a><span class="lineno"> 3206</span>        <span class="comment">//if the engine in the player tile is a muscle engine, and player is controlling vehicle</span></div>
<div class="line"><a id="l03207" name="l03207"></a><span class="lineno"> 3207</span>        <span class="keywordflow">if</span>( vp &amp;&amp; &amp;vp-&gt;vehicle() == <span class="keyword">this</span> &amp;&amp; player_controlling ) {</div>
<div class="line"><a id="l03208" name="l03208"></a><span class="lineno"> 3208</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> p = <a class="code hl_function" href="classvehicle.html#aad22641da003beff80194f7127280bc5">avail_part_with_feature</a>( vp-&gt;part_index(), <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea29303a852c248ddb989e3ea9b8e95354">VPFLAG_ENGINE</a>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l03209" name="l03209"></a><span class="lineno"> 3209</span>            <span class="keywordflow">if</span>( p &gt;= 0 &amp;&amp; <a class="code hl_function" href="classvehicle.html#a625ad56bb7c71b7305ccbdb411d650db">is_part_on</a>( p ) &amp;&amp; <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( p ).fuel_type == <a class="code hl_variable" href="vehicle_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a> ) {</div>
<div class="line"><a id="l03210" name="l03210"></a><span class="lineno"> 3210</span>                <span class="comment">//Broken limbs prevent muscle engines from working</span></div>
<div class="line"><a id="l03211" name="l03211"></a><span class="lineno"> 3211</span>                <span class="keywordflow">if</span>( ( <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( p ).has_flag( <span class="stringliteral">&quot;MUSCLE_LEGS&quot;</span> ) &amp;&amp; ( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.get_working_leg_count() &gt;= 2 ) ) ||</div>
<div class="line"><a id="l03212" name="l03212"></a><span class="lineno"> 3212</span>                    ( <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( p ).has_flag( <span class="stringliteral">&quot;MUSCLE_ARMS&quot;</span> ) &amp;&amp;</div>
<div class="line"><a id="l03213" name="l03213"></a><span class="lineno"> 3213</span>                      ( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.get_working_arm_count() &gt;= 2 ) ) ) {</div>
<div class="line"><a id="l03214" name="l03214"></a><span class="lineno"> 3214</span>                    fl += 10;</div>
<div class="line"><a id="l03215" name="l03215"></a><span class="lineno"> 3215</span>                }</div>
<div class="line"><a id="l03216" name="l03216"></a><span class="lineno"> 3216</span>            }</div>
<div class="line"><a id="l03217" name="l03217"></a><span class="lineno"> 3217</span>        }</div>
<div class="line"><a id="l03218" name="l03218"></a><span class="lineno"> 3218</span>        <span class="comment">// As do any other engine flagged as perpetual</span></div>
<div class="line"><a id="l03219" name="l03219"></a><span class="lineno"> 3219</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_class" href="classitem.html">item</a>( ftype ).has_flag( <span class="stringliteral">&quot;PERPETUAL&quot;</span> ) ) {</div>
<div class="line"><a id="l03220" name="l03220"></a><span class="lineno"> 3220</span>        fl += 10;</div>
<div class="line"><a id="l03221" name="l03221"></a><span class="lineno"> 3221</span>    }</div>
<div class="line"><a id="l03222" name="l03222"></a><span class="lineno"> 3222</span> </div>
<div class="line"><a id="l03223" name="l03223"></a><span class="lineno"> 3223</span>    <span class="keywordflow">return</span> fl;</div>
<div class="line"><a id="l03224" name="l03224"></a><span class="lineno"> 3224</span>}</div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307ea29303a852c248ddb989e3ea9b8e95354"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea29303a852c248ddb989e3ea9b8e95354">VPFLAG_ENGINE</a></div><div class="ttdeci">@ VPFLAG_ENGINE</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00056">veh_type.h:56</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l02543">avail_part_with_feature()</a>, <a class="el" href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, <a class="el" href="vehicle_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l01092">is_part_on()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8cpp_source.html#l00277">player_in_control()</a>, <a class="el" href="vehicle_8cpp_source.html#l04802">distribution_graph::traverse()</a>, and <a class="el" href="veh__type_8h_source.html#l00056">VPFLAG_ENGINE</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02928">act_vehicle_unload_fuel()</a>, <a class="el" href="turret_8cpp_source.html#l00094">turret_data::ammo_remaining()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l01175">are_requirements_nearby()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01191">beeper_sound()</a>, <a class="el" href="faction__camp_8cpp_source.html#l03822">camp_car_description()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00549">can_enable()</a>, <a class="el" href="vehicle_8cpp_source.html#l04400">consume_fuel()</a>, <a class="el" href="vehicle_8cpp_source.html#l03230">engine_fuel_left()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l01488">activity_handlers::fill_liquid_do_turn()</a>, <a class="el" href="inventory_8cpp_source.html#l00508">inventory::form_from_map()</a>, <a class="el" href="vehicle_8cpp_source.html#l03225">fuel_left()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l02645">activity_handlers::repair_activity_hack::anonymous_namespace{activity_handlers.cpp}::get_fake_tool()</a>, <a class="el" href="vehicle_8cpp_source.html#l01112">has_security_working()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01113">honk_horn()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>, <a class="el" href="vehicle_8cpp_source.html#l04619">power_parts()</a>, <a class="el" href="turret_8cpp_source.html#l00257">turret_data::prepare_fire()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00398">print_fuel_indicator()</a>, <a class="el" href="turret_8cpp_source.html#l00232">turret_data::query()</a>, <a class="el" href="game_8cpp_source.html#l02560">game::remoteveh()</a>, <a class="el" href="iuse_8cpp_source.html#l08258">iuse::remoteveh()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00433">select_engine()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00266">set_electronics_menu_options()</a>, <a class="el" href="player_8cpp_source.html#l01380">player::siphon()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00918">start_engine()</a>, <a class="el" href="vehicle_8cpp_source.html#l06657">update_time()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01556">use_autoclave()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01691">use_dishwasher()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l01606">use_washing_machine()</a>.</p>

</div>
</div>
<a id="a07977db91bd20b5731d38764671102ed" name="a07977db91bd20b5731d38764671102ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07977db91bd20b5731d38764671102ed">&#9670;&nbsp;</a></span>fuel_left() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::fuel_left </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>recurse</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03225">3225</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03226" name="l03226"></a><span class="lineno"> 3226</span>{</div>
<div class="line"><a id="l03227" name="l03227"></a><span class="lineno"> 3227</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ p ].fuel_current(), recurse );</div>
<div class="line"><a id="l03228" name="l03228"></a><span class="lineno"> 3228</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l03179">fuel_left()</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

</div>
</div>
<a id="a97eca7e230437aa8792f1db63919c44f" name="a97eca7e230437aa8792f1db63919c44f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97eca7e230437aa8792f1db63919c44f">&#9670;&nbsp;</a></span>fuel_usage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, int &gt; vehicle::fuel_usage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maps used fuel to its basic (unscaled by load/strain) consumption. </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04340">4340</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04341" name="l04341"></a><span class="lineno"> 4341</span>{</div>
<div class="line"><a id="l04342" name="l04342"></a><span class="lineno"> 4342</span>    std::map&lt;itype_id, int&gt; <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l04343" name="l04343"></a><span class="lineno"> 4343</span>    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.size(); i++ ) {</div>
<div class="line"><a id="l04344" name="l04344"></a><span class="lineno"> 4344</span>        <span class="comment">// Note: functions with &quot;engine&quot; in name do NOT take part indices</span></div>
<div class="line"><a id="l04345" name="l04345"></a><span class="lineno"> 4345</span>        <span class="comment">// TODO: Use part indices and not engine vector indices</span></div>
<div class="line"><a id="l04346" name="l04346"></a><span class="lineno"> 4346</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#a4d73f86ddc3aafe3231c33c098b9d6c8">is_engine_on</a>( i ) ) {</div>
<div class="line"><a id="l04347" name="l04347"></a><span class="lineno"> 4347</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04348" name="l04348"></a><span class="lineno"> 4348</span>        }</div>
<div class="line"><a id="l04349" name="l04349"></a><span class="lineno"> 4349</span> </div>
<div class="line"><a id="l04350" name="l04350"></a><span class="lineno"> 4350</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> e = <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[ i ];</div>
<div class="line"><a id="l04351" name="l04351"></a><span class="lineno"> 4351</span>        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;info = <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( e );</div>
<div class="line"><a id="l04352" name="l04352"></a><span class="lineno"> 4352</span>        <span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> null_fuel_type( <span class="stringliteral">&quot;null&quot;</span> );</div>
<div class="line"><a id="l04353" name="l04353"></a><span class="lineno"> 4353</span>        <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> &amp;cur_fuel = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ e ].fuel_current();</div>
<div class="line"><a id="l04354" name="l04354"></a><span class="lineno"> 4354</span>        <span class="keywordflow">if</span>( cur_fuel  == null_fuel_type ) {</div>
<div class="line"><a id="l04355" name="l04355"></a><span class="lineno"> 4355</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04356" name="l04356"></a><span class="lineno"> 4356</span>        }</div>
<div class="line"><a id="l04357" name="l04357"></a><span class="lineno"> 4357</span> </div>
<div class="line"><a id="l04358" name="l04358"></a><span class="lineno"> 4358</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#a850e134844078b5efa1084fc1ebbeec0">is_perpetual_type</a>( i ) ) {</div>
<div class="line"><a id="l04359" name="l04359"></a><span class="lineno"> 4359</span>            <span class="keywordtype">int</span> <a class="code hl_enumeration" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726">usage</a> = info.energy_consumption;</div>
<div class="line"><a id="l04360" name="l04360"></a><span class="lineno"> 4360</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ e ].faults().<a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a>( <a class="code hl_variable" href="vehicle_8cpp.html#a0c862ae2786ce8dbc0d67cb723601d2d">fault_filter_air</a> ) ) {</div>
<div class="line"><a id="l04361" name="l04361"></a><span class="lineno"> 4361</span>                <a class="code hl_enumeration" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726">usage</a> *= 2;</div>
<div class="line"><a id="l04362" name="l04362"></a><span class="lineno"> 4362</span>            }</div>
<div class="line"><a id="l04363" name="l04363"></a><span class="lineno"> 4363</span> </div>
<div class="line"><a id="l04364" name="l04364"></a><span class="lineno"> 4364</span>            <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>[ cur_fuel ] += <a class="code hl_enumeration" href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726">usage</a>;</div>
<div class="line"><a id="l04365" name="l04365"></a><span class="lineno"> 4365</span>        }</div>
<div class="line"><a id="l04366" name="l04366"></a><span class="lineno"> 4366</span>    }</div>
<div class="line"><a id="l04367" name="l04367"></a><span class="lineno"> 4367</span> </div>
<div class="line"><a id="l04368" name="l04368"></a><span class="lineno"> 4368</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l04369" name="l04369"></a><span class="lineno"> 4369</span>}</div>
<div class="ttc" id="acraft__command_8h_html_a5684f219761d78b4f98e7b2869dd1726"><div class="ttname"><a href="craft__command_8h.html#a5684f219761d78b4f98e7b2869dd1726">usage</a></div><div class="ttdeci">usage</div><div class="ttdoc">enum used by comp_selection to indicate where a component should be consumed from.</div><div class="ttdef"><b>Definition:</b> <a href="craft__command_8h_source.html#l00023">craft_command.h:23</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="fmtlib__core_8h_source.html#l01073">detail::count()</a>, <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, <a class="el" href="vehicle_8cpp.html#a0c862ae2786ce8dbc0d67cb723601d2d">fault_filter_air</a>, <a class="el" href="vehicle_8cpp_source.html#l01087">is_engine_on()</a>, <a class="el" href="vehicle_8cpp_source.html#l01081">is_perpetual_type()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04400">consume_fuel()</a>.</p>

</div>
</div>
<a id="af104b67f7b35e092414fd2efa9f2da05" name="af104b67f7b35e092414fd2efa9f2da05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af104b67f7b35e092414fd2efa9f2da05">&#9670;&nbsp;</a></span>fuels_left()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, int &gt; vehicle::fuels_left </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>All the fuels that are in all the tanks in the vehicle, nicely summed up. </p>
<p >Note that empty tanks don't count at all. The value is the amount as it would be reported by <a class="el" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>, it is always greater than 0. The key is the fuel item type. </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06526">6526</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06527" name="l06527"></a><span class="lineno"> 6527</span>{</div>
<div class="line"><a id="l06528" name="l06528"></a><span class="lineno"> 6528</span>    std::map&lt;itype_id, int&gt; <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>;</div>
<div class="line"><a id="l06529" name="l06529"></a><span class="lineno"> 6529</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;p : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l06530" name="l06530"></a><span class="lineno"> 6530</span>        <span class="keywordflow">if</span>( p.is_fuel_store() &amp;&amp; !p.ammo_current().is_null() ) {</div>
<div class="line"><a id="l06531" name="l06531"></a><span class="lineno"> 6531</span>            <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>[ p.ammo_current() ] += p.ammo_remaining();</div>
<div class="line"><a id="l06532" name="l06532"></a><span class="lineno"> 6532</span>        }</div>
<div class="line"><a id="l06533" name="l06533"></a><span class="lineno"> 6533</span>    }</div>
<div class="line"><a id="l06534" name="l06534"></a><span class="lineno"> 6534</span>    <span class="keywordflow">return</span> <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>;</div>
<div class="line"><a id="l06535" name="l06535"></a><span class="lineno"> 6535</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02928">act_vehicle_unload_fuel()</a>, <a class="el" href="turret_8cpp_source.html#l00139">turret_data::ammo_options()</a>, <a class="el" href="faction__camp_8cpp_source.html#l03822">camp_car_description()</a>, <a class="el" href="veh__interact_8cpp_source.html#l00536">veh_interact::cant_do()</a>, and <a class="el" href="inventory_8cpp_source.html#l00508">inventory::form_from_map()</a>.</p>

</div>
</div>
<a id="ad2ece6ea045b084d7296473e67022325" name="ad2ece6ea045b084d7296473e67022325"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2ece6ea045b084d7296473e67022325">&#9670;&nbsp;</a></span>gain_moves()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::gain_moves </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05361">5361</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05362" name="l05362"></a><span class="lineno"> 5362</span>{</div>
<div class="line"><a id="l05363" name="l05363"></a><span class="lineno"> 5363</span>    <a class="code hl_variable" href="classvehicle.html#ad9047841099276d5de5a6771be72233a">fuel_used_last_turn</a>.clear();</div>
<div class="line"><a id="l05364" name="l05364"></a><span class="lineno"> 5364</span>    <a class="code hl_function" href="classvehicle.html#a63b06a1d61d0c44f460077314bb742a8">check_falling_or_floating</a>();</div>
<div class="line"><a id="l05365" name="l05365"></a><span class="lineno"> 5365</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> pl_control = <a class="code hl_function" href="classvehicle.html#a341515426011486c265d016c35f84de6">player_in_control</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u );</div>
<div class="line"><a id="l05366" name="l05366"></a><span class="lineno"> 5366</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aec9a1faa6740b681867d48878e37d7bb">is_moving</a>() || <a class="code hl_variable" href="classvehicle.html#aeafb913ad9b9d1341d51a4c51ba43a06">is_falling</a> ) {</div>
<div class="line"><a id="l05367" name="l05367"></a><span class="lineno"> 5367</span>        <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#afd84ace26c98ea5025d6a7cbbfff66e1">loose_parts</a>.empty() ) {</div>
<div class="line"><a id="l05368" name="l05368"></a><span class="lineno"> 5368</span>            <a class="code hl_function" href="classvehicle.html#a853f20e405b2934d63fcb43b052f8461">shed_loose_parts</a>();</div>
<div class="line"><a id="l05369" name="l05369"></a><span class="lineno"> 5369</span>        }</div>
<div class="line"><a id="l05370" name="l05370"></a><span class="lineno"> 5370</span>        <a class="code hl_variable" href="classvehicle.html#af757f49411232815e121faa825d415f7">of_turn</a> = 1 + <a class="code hl_variable" href="classvehicle.html#a3d2d513640544cb11fa826890b692e5a">of_turn_carry</a>;</div>
<div class="line"><a id="l05371" name="l05371"></a><span class="lineno"> 5371</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> vslowdown = <a class="code hl_function" href="classvehicle.html#a09364942b91a344a94af82fad1702918">slowdown</a>( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> );</div>
<div class="line"><a id="l05372" name="l05372"></a><span class="lineno"> 5372</span>        <span class="keywordflow">if</span>( vslowdown &gt; std::abs( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> ) ) {</div>
<div class="line"><a id="l05373" name="l05373"></a><span class="lineno"> 5373</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#abdf6601268460dc437ef079590deb33b">cruise_on</a> &amp;&amp; <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> &amp;&amp; pl_control ) {</div>
<div class="line"><a id="l05374" name="l05374"></a><span class="lineno"> 5374</span>                <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> = <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &gt; 0 ? 1 : -1;</div>
<div class="line"><a id="l05375" name="l05375"></a><span class="lineno"> 5375</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05376" name="l05376"></a><span class="lineno"> 5376</span>                <a class="code hl_function" href="classvehicle.html#ab3ca604dd9cd1907f37c8a888934a1d3">stop</a>();</div>
<div class="line"><a id="l05377" name="l05377"></a><span class="lineno"> 5377</span>            }</div>
<div class="line"><a id="l05378" name="l05378"></a><span class="lineno"> 5378</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &lt; 0 ) {</div>
<div class="line"><a id="l05379" name="l05379"></a><span class="lineno"> 5379</span>            <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> += vslowdown;</div>
<div class="line"><a id="l05380" name="l05380"></a><span class="lineno"> 5380</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05381" name="l05381"></a><span class="lineno"> 5381</span>            <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> -= vslowdown;</div>
<div class="line"><a id="l05382" name="l05382"></a><span class="lineno"> 5382</span>        }</div>
<div class="line"><a id="l05383" name="l05383"></a><span class="lineno"> 5383</span>        <a class="code hl_variable" href="classvehicle.html#a2bbb34d03303f8e298a26ab614f35adc">is_on_ramp</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05384" name="l05384"></a><span class="lineno"> 5384</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05385" name="l05385"></a><span class="lineno"> 5385</span>        <a class="code hl_variable" href="classvehicle.html#af757f49411232815e121faa825d415f7">of_turn</a> = .001;</div>
<div class="line"><a id="l05386" name="l05386"></a><span class="lineno"> 5386</span>    }</div>
<div class="line"><a id="l05387" name="l05387"></a><span class="lineno"> 5387</span>    <a class="code hl_variable" href="classvehicle.html#a3d2d513640544cb11fa826890b692e5a">of_turn_carry</a> = 0;</div>
<div class="line"><a id="l05388" name="l05388"></a><span class="lineno"> 5388</span>    <span class="comment">// cruise control TODO: enable for NPC?</span></div>
<div class="line"><a id="l05389" name="l05389"></a><span class="lineno"> 5389</span>    <span class="keywordflow">if</span>( ( pl_control || <a class="code hl_variable" href="classvehicle.html#a26f98c384048e03538bca10e4f26905d">is_following</a> || <a class="code hl_variable" href="classvehicle.html#a953fed1abe9bacc2a7c98cee6425c5b2">is_patrolling</a> ) &amp;&amp; <a class="code hl_variable" href="classvehicle.html#abdf6601268460dc437ef079590deb33b">cruise_on</a> &amp;&amp; <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> != <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> ) {</div>
<div class="line"><a id="l05390" name="l05390"></a><span class="lineno"> 5390</span>        <a class="code hl_function" href="classvehicle.html#a0b298dcb96f6d82ac696f38d9a89868b">thrust</a>( ( <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> ) &gt; <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> ? 1 : -1 );</div>
<div class="line"><a id="l05391" name="l05391"></a><span class="lineno"> 5391</span>    }</div>
<div class="line"><a id="l05392" name="l05392"></a><span class="lineno"> 5392</span> </div>
<div class="line"><a id="l05393" name="l05393"></a><span class="lineno"> 5393</span>    <span class="comment">// Force off-map vehicles to load by visiting them every time we gain moves.</span></div>
<div class="line"><a id="l05394" name="l05394"></a><span class="lineno"> 5394</span>    <span class="comment">// Shouldn&#39;t be too expensive if there aren&#39;t fifty trillion vehicles in the graph...</span></div>
<div class="line"><a id="l05395" name="l05395"></a><span class="lineno"> 5395</span>    <span class="comment">// ...and if there are, it&#39;s the player&#39;s fault for putting them there.</span></div>
<div class="line"><a id="l05396" name="l05396"></a><span class="lineno"> 5396</span>    <a class="code hl_function" href="namespacedistribution__graph.html#a27a7603aec9db0a5d334bbee275915d9">distribution_graph::traverse</a>( *<span class="keyword">this</span>, <a class="code hl_function" href="namespacedistribution__graph.html#a555a29678b9ab2411b51cf4ea4e0f368">distribution_graph::noop_visitor_veh</a>,</div>
<div class="line"><a id="l05397" name="l05397"></a><span class="lineno"> 5397</span>                                  <a class="code hl_function" href="namespacedistribution__graph.html#a8587441bb8373685d759461840ef0373">distribution_graph::noop_visitor_grid</a> );</div>
<div class="line"><a id="l05398" name="l05398"></a><span class="lineno"> 5398</span> </div>
<div class="line"><a id="l05399" name="l05399"></a><span class="lineno"> 5399</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#ac82426b9ed349941fde4e5af18038735">check_environmental_effects</a> ) {</div>
<div class="line"><a id="l05400" name="l05400"></a><span class="lineno"> 5400</span>        <a class="code hl_variable" href="classvehicle.html#ac82426b9ed349941fde4e5af18038735">check_environmental_effects</a> = <a class="code hl_function" href="classvehicle.html#aa47aa8d1a535f8fd42b96a377ef6b1ff">do_environmental_effects</a>();</div>
<div class="line"><a id="l05401" name="l05401"></a><span class="lineno"> 5401</span>    }</div>
<div class="line"><a id="l05402" name="l05402"></a><span class="lineno"> 5402</span> </div>
<div class="line"><a id="l05403" name="l05403"></a><span class="lineno"> 5403</span>    <span class="comment">// turrets which are enabled will try to reload and then automatically fire</span></div>
<div class="line"><a id="l05404" name="l05404"></a><span class="lineno"> 5404</span>    <span class="comment">// Turrets which are disabled but have targets set are a special case</span></div>
<div class="line"><a id="l05405" name="l05405"></a><span class="lineno"> 5405</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> e : <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a>() ) {</div>
<div class="line"><a id="l05406" name="l05406"></a><span class="lineno"> 5406</span>        <span class="keywordflow">if</span>( e-&gt;enabled || e-&gt;target.second != e-&gt;target.first ) {</div>
<div class="line"><a id="l05407" name="l05407"></a><span class="lineno"> 5407</span>            <a class="code hl_function" href="classvehicle.html#a30b8e7b1d09c18caa89f069d64d37205">automatic_fire_turret</a>( *e );</div>
<div class="line"><a id="l05408" name="l05408"></a><span class="lineno"> 5408</span>        }</div>
<div class="line"><a id="l05409" name="l05409"></a><span class="lineno"> 5409</span>    }</div>
<div class="line"><a id="l05410" name="l05410"></a><span class="lineno"> 5410</span> </div>
<div class="line"><a id="l05411" name="l05411"></a><span class="lineno"> 5411</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &lt; 0 ) {</div>
<div class="line"><a id="l05412" name="l05412"></a><span class="lineno"> 5412</span>        <a class="code hl_function" href="classvehicle.html#a2eb76e28ca0f8caf364eaa4a79f1eaa0">beeper_sound</a>();</div>
<div class="line"><a id="l05413" name="l05413"></a><span class="lineno"> 5413</span>    }</div>
<div class="line"><a id="l05414" name="l05414"></a><span class="lineno"> 5414</span>}</div>
<div class="ttc" id="aclassvehicle_html_a09364942b91a344a94af82fad1702918"><div class="ttname"><a href="classvehicle.html#a09364942b91a344a94af82fad1702918">vehicle::slowdown</a></div><div class="ttdeci">int slowdown(int velocity) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l00087">vehicle_move.cpp:87</a></div></div>
<div class="ttc" id="aclassvehicle_html_a0b298dcb96f6d82ac696f38d9a89868b"><div class="ttname"><a href="classvehicle.html#a0b298dcb96f6d82ac696f38d9a89868b">vehicle::thrust</a></div><div class="ttdeci">void thrust(int thd, int z=0)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l00129">vehicle_move.cpp:129</a></div></div>
<div class="ttc" id="aclassvehicle_html_a2bbb34d03303f8e298a26ab614f35adc"><div class="ttname"><a href="classvehicle.html#a2bbb34d03303f8e298a26ab614f35adc">vehicle::is_on_ramp</a></div><div class="ttdeci">bool is_on_ramp</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01921">vehicle.h:1921</a></div></div>
<div class="ttc" id="aclassvehicle_html_a2eb76e28ca0f8caf364eaa4a79f1eaa0"><div class="ttname"><a href="classvehicle.html#a2eb76e28ca0f8caf364eaa4a79f1eaa0">vehicle::beeper_sound</a></div><div class="ttdeci">void beeper_sound()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01191">vehicle_use.cpp:1191</a></div></div>
<div class="ttc" id="aclassvehicle_html_a30b8e7b1d09c18caa89f069d64d37205"><div class="ttname"><a href="classvehicle.html#a30b8e7b1d09c18caa89f069d64d37205">vehicle::automatic_fire_turret</a></div><div class="ttdeci">int automatic_fire_turret(vehicle_part &amp;pt)</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00542">turret.cpp:542</a></div></div>
<div class="ttc" id="aclassvehicle_html_a63b06a1d61d0c44f460077314bb742a8"><div class="ttname"><a href="classvehicle.html#a63b06a1d61d0c44f460077314bb742a8">vehicle::check_falling_or_floating</a></div><div class="ttdeci">void check_falling_or_floating()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l01461">vehicle_move.cpp:1461</a></div></div>
<div class="ttc" id="aclassvehicle_html_a853f20e405b2934d63fcb43b052f8461"><div class="ttname"><a href="classvehicle.html#a853f20e405b2934d63fcb43b052f8461">vehicle::shed_loose_parts</a></div><div class="ttdeci">void shed_loose_parts()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06067">vehicle.cpp:6067</a></div></div>
<div class="ttc" id="aclassvehicle_html_aa47aa8d1a535f8fd42b96a377ef6b1ff"><div class="ttname"><a href="classvehicle.html#aa47aa8d1a535f8fd42b96a377ef6b1ff">vehicle::do_environmental_effects</a></div><div class="ttdeci">bool do_environmental_effects()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03604">vehicle.cpp:3604</a></div></div>
<div class="ttc" id="aclassvehicle_html_ac82426b9ed349941fde4e5af18038735"><div class="ttname"><a href="classvehicle.html#ac82426b9ed349941fde4e5af18038735">vehicle::check_environmental_effects</a></div><div class="ttdeci">bool check_environmental_effects</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01942">vehicle.h:1942</a></div></div>
<div class="ttc" id="aclassvehicle_html_aec9a1faa6740b681867d48878e37d7bb"><div class="ttname"><a href="classvehicle.html#aec9a1faa6740b681867d48878e37d7bb">vehicle::is_moving</a></div><div class="ttdeci">bool is_moving() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03364">vehicle.cpp:3364</a></div></div>
<div class="ttc" id="aclassvehicle_html_afd84ace26c98ea5025d6a7cbbfff66e1"><div class="ttname"><a href="classvehicle.html#afd84ace26c98ea5025d6a7cbbfff66e1">vehicle::loose_parts</a></div><div class="ttdeci">std::vector&lt; int &gt; loose_parts</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01760">vehicle.h:1760</a></div></div>
<div class="ttc" id="anamespacedistribution__graph_html_a555a29678b9ab2411b51cf4ea4e0f368"><div class="ttname"><a href="namespacedistribution__graph.html#a555a29678b9ab2411b51cf4ea4e0f368">distribution_graph::noop_visitor_veh</a></div><div class="ttdeci">constexpr traverse_visitor_result noop_visitor_veh(const vehicle &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="distribution__grid_8h_source.html#l00212">distribution_grid.h:212</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="turret_8cpp_source.html#l00542">automatic_fire_turret()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01191">beeper_sound()</a>, <a class="el" href="vehicle_8h_source.html#l01942">check_environmental_effects</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01461">check_falling_or_floating()</a>, <a class="el" href="vehicle_8h_source.html#l01928">cruise_on</a>, <a class="el" href="vehicle_8h_source.html#l01863">cruise_velocity</a>, <a class="el" href="vehicle_8cpp_source.html#l03604">do_environmental_effects()</a>, <a class="el" href="vehicle_8h_source.html#l01805">fuel_used_last_turn</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8h_source.html#l01946">is_falling</a>, <a class="el" href="vehicle_8h_source.html#l01924">is_following</a>, <a class="el" href="vehicle_8cpp_source.html#l03364">is_moving()</a>, <a class="el" href="vehicle_8h_source.html#l01921">is_on_ramp</a>, <a class="el" href="vehicle_8h_source.html#l01925">is_patrolling</a>, <a class="el" href="vehicle_8h_source.html#l01760">loose_parts</a>, <a class="el" href="distribution__grid_8h_source.html#l00206">distribution_graph::noop_visitor_grid()</a>, <a class="el" href="distribution__grid_8h_source.html#l00212">distribution_graph::noop_visitor_veh()</a>, <a class="el" href="vehicle_8h_source.html#l01874">of_turn</a>, <a class="el" href="vehicle_8h_source.html#l01876">of_turn_carry</a>, <a class="el" href="vehicle_8cpp_source.html#l00277">player_in_control()</a>, <a class="el" href="vehicle_8cpp_source.html#l06067">shed_loose_parts()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00087">slowdown()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00338">stop()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>, <a class="el" href="vehicle_8cpp_source.html#l04802">distribution_graph::traverse()</a>, <a class="el" href="turret_8cpp_source.html#l00032">turrets()</a>, and <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l00398">map::vehmove()</a>.</p>

</div>
</div>
<a id="a397b40aa92dd1fd09ee592aa279bc656" name="a397b40aa92dd1fd09ee592aa279bc656"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a397b40aa92dd1fd09ee592aa279bc656">&#9670;&nbsp;</a></span>get_all_parts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classvehicle__part__range.html">vehicle_part_range</a> vehicle::get_all_parts </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Yields a range containing all parts (including broken ones) that can be iterated over. </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06882">6882</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06883" name="l06883"></a><span class="lineno"> 6883</span>{</div>
<div class="line"><a id="l06884" name="l06884"></a><span class="lineno"> 6884</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="classvehicle__part__range.html">vehicle_part_range</a>( <span class="keyword">const_cast&lt;</span><a class="code hl_class" href="classvehicle.html">vehicle</a> &amp;<span class="keyword">&gt;</span>( *<span class="keyword">this</span> ) );</div>
<div class="line"><a id="l06885" name="l06885"></a><span class="lineno"> 6885</span>}</div>
<div class="ttc" id="aclassvehicle__part__range_html"><div class="ttname"><a href="classvehicle__part__range.html">vehicle_part_range</a></div><div class="ttdoc">A range that contains all parts of the vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="vpart__range_8h_source.html#l00143">vpart_range.h:144</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l00344">add_steerable_wheels()</a>, <a class="el" href="map_8cpp_source.html#l00261">map::add_vehicle_to_cache()</a>, <a class="el" href="mapgen_8cpp_source.html#l05671">map::add_vehicle_to_map()</a>, <a class="el" href="vehicle_8cpp_source.html#l06794">calc_mass_center()</a>, <a class="el" href="veh__interact_8cpp_source.html#l01355">veh_interact::calc_overview()</a>, <a class="el" href="faction__camp_8cpp_source.html#l03822">camp_car_description()</a>, <a class="el" href="veh__interact_8cpp_source.html#l00536">veh_interact::cant_do()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02859">veh_interact::count_durability()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01230">crash_terrain_around()</a>, <a class="el" href="vehicle_8cpp_source.html#l06252">damage_all()</a>, <a class="el" href="vehicle_8cpp_source.html#l05425">decrement_summon_timer()</a>, <a class="el" href="vehicle_8cpp_source.html#l03604">do_environmental_effects()</a>, <a class="el" href="map_8cpp_source.html#l07991">map::do_vehicle_caching()</a>, <a class="el" href="lightmap_8cpp_source.html#l00369">map::generate_lightmap()</a>, <a class="el" href="veh__interact_8cpp_source.html#l01730">veh_interact::get_most_damaged_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l05874">get_tow_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l05889">has_tow_attached()</a>, <a class="el" href="vehicle_8cpp_source.html#l02911">index_of_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l00386">init_state()</a>, <a class="el" href="vehicle_8cpp_source.html#l05939">invalidate_towing()</a>, <a class="el" href="vehicle_8cpp_source.html#l06537">is_foldable()</a>, <a class="el" href="vehicle_8cpp_source.html#l01254">is_structural_part_removed()</a>, <a class="el" href="veh__utils_8cpp_source.html#l00055">veh_utils::most_repairable_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l02893">part_at()</a>, <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l06106">refresh_insides()</a>, <a class="el" href="veh__interact_8cpp_source.html#l00172">veh_interact::select_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l06310">shift_if_needed()</a>, <a class="el" href="npctalk_8cpp_source.html#l00376">tell_magic_veh_stop_following()</a>, <a class="el" href="npctalk_8cpp_source.html#l00360">tell_magic_veh_to_follow()</a>, <a class="el" href="vehicle_8cpp_source.html#l03135">total_folded_volume()</a>, <a class="el" href="iuse_8cpp_source.html#l05639">iuse::unfold_generic()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l00633">unfold_vehicle_iuse::use()</a>, and <a class="el" href="npc_8cpp_source.html#l01370">npc::vehicle_danger()</a>.</p>

</div>
</div>
<a id="a29bd874a59dfbdac6c6c9b5f0032680e" name="a29bd874a59dfbdac6c6c9b5f0032680e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29bd874a59dfbdac6c6c9b5f0032680e">&#9670;&nbsp;</a></span>get_angle_from_targ()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">units::angle</a> vehicle::get_angle_from_targ </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>targ</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l00916">916</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>{</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> vehpos = <a class="code hl_function" href="classvehicle.html#a789289c4179f7677e45cb100ff5ffb9a">global_square_location</a>().<a class="code hl_function" href="classcoords_1_1coord__point.html#a3f9a44403c08f2eaf0d605b1d034c048">raw</a>();</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>    <a class="code hl_struct" href="structrl__vec2d.html">rl_vec2d</a> facevec = <a class="code hl_function" href="classvehicle.html#a2bc8dfdab1fadc47966b0a69520c737c">face_vec</a>();</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>    <a class="code hl_struct" href="structpoint.html">point</a> rel_pos_target = targ.<a class="code hl_function" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>() - vehpos.<a class="code hl_function" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>();</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>    <a class="code hl_struct" href="structrl__vec2d.html">rl_vec2d</a> targetvec = <a class="code hl_struct" href="structrl__vec2d.html">rl_vec2d</a>( rel_pos_target.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a>, rel_pos_target.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> );</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>    <span class="comment">// cross product</span></div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>    <span class="keywordtype">double</span> crossy = ( facevec.<a class="code hl_variable" href="structrl__vec2d.html#abdf36ab3ac90fa0979c7cebfd8ffdb58">x</a> * targetvec.<a class="code hl_variable" href="structrl__vec2d.html#ab858570e73d0c1cf161f8c228e18cf56">y</a> ) - ( targetvec.<a class="code hl_variable" href="structrl__vec2d.html#abdf36ab3ac90fa0979c7cebfd8ffdb58">x</a> * facevec.<a class="code hl_variable" href="structrl__vec2d.html#ab858570e73d0c1cf161f8c228e18cf56">y</a> );</div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>    <span class="comment">// dot product.</span></div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>    <span class="keywordtype">double</span> dotx = ( facevec.<a class="code hl_variable" href="structrl__vec2d.html#abdf36ab3ac90fa0979c7cebfd8ffdb58">x</a> * targetvec.<a class="code hl_variable" href="structrl__vec2d.html#abdf36ab3ac90fa0979c7cebfd8ffdb58">x</a> ) + ( facevec.<a class="code hl_variable" href="structrl__vec2d.html#ab858570e73d0c1cf161f8c228e18cf56">y</a> * targetvec.<a class="code hl_variable" href="structrl__vec2d.html#ab858570e73d0c1cf161f8c228e18cf56">y</a> );</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span> </div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespaceunits.html#a69513b1c48b5d7da935832d5d25b2e11">units::atan2</a>( crossy, dotx );</div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>}</div>
<div class="ttc" id="anamespaceunits_html_a69513b1c48b5d7da935832d5d25b2e11"><div class="ttname"><a href="namespaceunits.html#a69513b1c48b5d7da935832d5d25b2e11">units::atan2</a></div><div class="ttdeci">units::angle atan2(double y, double x)</div><div class="ttdef"><b>Definition:</b> <a href="units__angle_8h_source.html#l00067">units_angle.h:67</a></div></div>
<div class="ttc" id="astructrl__vec2d_html_ab858570e73d0c1cf161f8c228e18cf56"><div class="ttname"><a href="structrl__vec2d.html#ab858570e73d0c1cf161f8c228e18cf56">rl_vec2d::y</a></div><div class="ttdeci">float y</div><div class="ttdef"><b>Definition:</b> <a href="point__float_8h_source.html#l00013">point_float.h:13</a></div></div>
<div class="ttc" id="astructrl__vec2d_html_abdf36ab3ac90fa0979c7cebfd8ffdb58"><div class="ttname"><a href="structrl__vec2d.html#abdf36ab3ac90fa0979c7cebfd8ffdb58">rl_vec2d::x</a></div><div class="ttdeci">float x</div><div class="ttdef"><b>Definition:</b> <a href="point__float_8h_source.html#l00012">point_float.h:12</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="units__angle_8h_source.html#l00067">units::atan2()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01220">face_vec()</a>, <a class="el" href="vehicle_8cpp_source.html#l03091">global_square_location()</a>, <a class="el" href="coordinates_8h_source.html#l00111">coords::coord_point&lt; Point, Origin, Scale &gt;::raw()</a>, <a class="el" href="point_8h_source.html#l00038">point::x</a>, <a class="el" href="point__float_8h_source.html#l00012">rl_vec2d::x</a>, <a class="el" href="point_8h_source.html#l00220">tripoint::xy()</a>, <a class="el" href="point_8h_source.html#l00039">point::y</a>, and <a class="el" href="point__float_8h_source.html#l00013">rl_vec2d::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05745">do_towing_move()</a>, and <a class="el" href="vehicle_8cpp_source.html#l00816">drive_to_local_target()</a>.</p>

</div>
</div>
<a id="adfbc0794c9bb9a5f1d75e1c52a2e561a" name="adfbc0794c9bb9a5f1d75e1c52a2e561a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfbc0794c9bb9a5f1d75e1c52a2e561a">&#9670;&nbsp;</a></span>get_any_parts() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classvehicle__part__with__feature__range.html">vehicle_part_with_feature_range</a>&lt; std::string &gt; vehicle::get_any_parts </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>feature</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Yields a range of parts of this vehicle that each have the given feature and not removed. </p>
<p >The enabled status of the part is ignored. </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02708">2708</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02709" name="l02709"></a><span class="lineno"> 2709</span>{</div>
<div class="line"><a id="l02710" name="l02710"></a><span class="lineno"> 2710</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="classvehicle__part__with__feature__range.html">vehicle_part_with_feature_range&lt;std::string&gt;</a>( <span class="keyword">const_cast&lt;</span><a class="code hl_class" href="classvehicle.html">vehicle</a> &amp;<span class="keyword">&gt;</span>( *<span class="keyword">this</span> ),</div>
<div class="line"><a id="l02711" name="l02711"></a><span class="lineno"> 2711</span>            <a class="code hl_function" href="namespaceavatar__action.html#a76ba74774376a08222b8cdcce08f7304">std::move</a>( <a class="code hl_function" href="editmap_8cpp.html#a14e7362458bb23f8c57511c0d71d3c22">feature</a> ), <a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02ca100b8cad7cf2a56f6df78f171f97a1ec">part_status_flag::any</a> );</div>
<div class="line"><a id="l02712" name="l02712"></a><span class="lineno"> 2712</span>}</div>
<div class="ttc" id="aclassvehicle__part__with__feature__range_html"><div class="ttname"><a href="classvehicle__part__with__feature__range.html">vehicle_part_with_feature_range</a></div><div class="ttdoc">A range that contains parts that have a given feature and (optionally) are not broken.</div><div class="ttdef"><b>Definition:</b> <a href="vpart__range_8h_source.html#l00155">vpart_range.h:157</a></div></div>
<div class="ttc" id="aeditmap_8cpp_html_a14e7362458bb23f8c57511c0d71d3c22"><div class="ttname"><a href="editmap_8cpp.html#a14e7362458bb23f8c57511c0d71d3c22">feature</a></div><div class="ttdeci">static T_id feature(const tripoint &amp;p)</div></div>
<div class="ttc" id="anamespaceavatar__action_html_a76ba74774376a08222b8cdcce08f7304"><div class="ttname"><a href="namespaceavatar__action.html#a76ba74774376a08222b8cdcce08f7304">avatar_action::move</a></div><div class="ttdeci">bool move(avatar &amp;you, map &amp;m, const tripoint &amp;d)</div><div class="ttdef"><b>Definition:</b> <a href="avatar__action_8cpp_source.html#l00090">avatar_action.cpp:90</a></div></div>
<div class="ttc" id="avehicle_8h_html_ad9a221cee9ae7a69d6f09d4de701f02ca100b8cad7cf2a56f6df78f171f97a1ec"><div class="ttname"><a href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02ca100b8cad7cf2a56f6df78f171f97a1ec">part_status_flag::any</a></div><div class="ttdeci">@ any</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02ca100b8cad7cf2a56f6df78f171f97a1ec">any</a>, <a class="el" href="editmap_8cpp.html#a14e7362458bb23f8c57511c0d71d3c22">feature()</a>, and <a class="el" href="avatar__action_8cpp_source.html#l00090">avatar_action::move()</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02896">act_vehicle_siphon()</a>, <a class="el" href="faction__camp_8cpp_source.html#l03822">camp_car_description()</a>, <a class="el" href="veh__interact_8cpp_source.html#l00536">veh_interact::cant_do()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00801">fold_up()</a>, <a class="el" href="map__extras_8cpp_source.html#l00336">MapExtras::mx_helicopter()</a>, <a class="el" href="map_8cpp_source.html#l04677">map::process_items_in_vehicle()</a>, and <a class="el" href="map_8cpp_source.html#l08332">map::scent_blockers()</a>.</p>

</div>
</div>
<a id="ac36da718dfd43c629c5be476af1fcaae" name="ac36da718dfd43c629c5be476af1fcaae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac36da718dfd43c629c5be476af1fcaae">&#9670;&nbsp;</a></span>get_any_parts() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classvehicle__part__with__feature__range.html">vehicle_part_with_feature_range</a>&lt; <a class="el" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307e">vpart_bitflags</a> &gt; vehicle::get_any_parts </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307e">vpart_bitflags</a>&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02714">2714</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02716" name="l02716"></a><span class="lineno"> 2716</span>{</div>
<div class="line"><a id="l02717" name="l02717"></a><span class="lineno"> 2717</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="classvehicle__part__with__feature__range.html">vehicle_part_with_feature_range&lt;vpart_bitflags&gt;</a>( <span class="keyword">const_cast&lt;</span><a class="code hl_class" href="classvehicle.html">vehicle</a> &amp;<span class="keyword">&gt;</span>( *<span class="keyword">this</span> ), <a class="code hl_function" href="editmap_8cpp.html#a14e7362458bb23f8c57511c0d71d3c22">feature</a>,</div>
<div class="line"><a id="l02718" name="l02718"></a><span class="lineno"> 2718</span>            <a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02ca100b8cad7cf2a56f6df78f171f97a1ec">part_status_flag::any</a> );</div>
<div class="line"><a id="l02719" name="l02719"></a><span class="lineno"> 2719</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02ca100b8cad7cf2a56f6df78f171f97a1ec">any</a>, and <a class="el" href="editmap_8cpp.html#a14e7362458bb23f8c57511c0d71d3c22">feature()</a>.</p>

</div>
</div>
<a id="adb4c50c8656b06d74e63a19b3d72308b" name="adb4c50c8656b06d74e63a19b3d72308b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb4c50c8656b06d74e63a19b3d72308b">&#9670;&nbsp;</a></span>get_autodrive_target()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtripoint.html">tripoint</a> vehicle::get_autodrive_target </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l00849">849</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>                                        {</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#acdbb2eec025972d86be23e90e9e92d22">autodrive_local_target</a>;</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01824">autodrive_local_target</a>.</p>

</div>
</div>
<a id="a1b64eabc86039e338bf054c96f5a26ff" name="a1b64eabc86039e338bf054c96f5a26ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b64eabc86039e338bf054c96f5a26ff">&#9670;&nbsp;</a></span>get_avail_parts() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classvehicle__part__with__feature__range.html">vehicle_part_with_feature_range</a>&lt; std::string &gt; vehicle::get_avail_parts </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>feature</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Yields a range of parts of this vehicle that each have the given feature and are available: not broken, removed, or part of a carried vehicle. </p>
<p >The enabled status of the part is ignored. </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02678">2678</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02679" name="l02679"></a><span class="lineno"> 2679</span>{</div>
<div class="line"><a id="l02680" name="l02680"></a><span class="lineno"> 2680</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="classvehicle__part__with__feature__range.html">vehicle_part_with_feature_range&lt;std::string&gt;</a>( <span class="keyword">const_cast&lt;</span><a class="code hl_class" href="classvehicle.html">vehicle</a> &amp;<span class="keyword">&gt;</span>( *<span class="keyword">this</span> ),</div>
<div class="line"><a id="l02681" name="l02681"></a><span class="lineno"> 2681</span>            <a class="code hl_function" href="namespaceavatar__action.html#a76ba74774376a08222b8cdcce08f7304">std::move</a>( <a class="code hl_function" href="editmap_8cpp.html#a14e7362458bb23f8c57511c0d71d3c22">feature</a> ),</div>
<div class="line"><a id="l02682" name="l02682"></a><span class="lineno"> 2682</span>            <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02c">part_status_flag</a><span class="keyword">&gt;</span>( <a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cac327b49efdca2668f28cd7b4beee54b3">part_status_flag::working</a> |</div>
<div class="line"><a id="l02683" name="l02683"></a><span class="lineno"> 2683</span>                                           <a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cae4894ca167b08880bfc35862f18575eb">part_status_flag::available</a> ) );</div>
<div class="line"><a id="l02684" name="l02684"></a><span class="lineno"> 2684</span>}</div>
<div class="ttc" id="avehicle_8h_html_ad9a221cee9ae7a69d6f09d4de701f02c"><div class="ttname"><a href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02c">part_status_flag</a></div><div class="ttdeci">part_status_flag</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00083">vehicle.h:83</a></div></div>
<div class="ttc" id="avehicle_8h_html_ad9a221cee9ae7a69d6f09d4de701f02cae4894ca167b08880bfc35862f18575eb"><div class="ttname"><a href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cae4894ca167b08880bfc35862f18575eb">part_status_flag::available</a></div><div class="ttdeci">@ available</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cae4894ca167b08880bfc35862f18575eb">available</a>, <a class="el" href="editmap_8cpp.html#a14e7362458bb23f8c57511c0d71d3c22">feature()</a>, <a class="el" href="avatar__action_8cpp_source.html#l00090">avatar_action::move()</a>, and <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cac327b49efdca2668f28cd7b4beee54b3">working</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00100">add_toggle_to_opts()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01191">beeper_sound()</a>, <a class="el" href="vehicle_8cpp_source.html#l03047">boarded_parts()</a>, <a class="el" href="lightmap_8cpp_source.html#l01224">map::build_seen_cache()</a>, <a class="el" href="veh__interact_8cpp_source.html#l00691">veh_interact::can_self_jack()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00173">control_doors()</a>, <a class="el" href="map_8cpp_source.html#l00340">map::detach_vehicle()</a>, <a class="el" href="npcmove_8cpp_source.html#l00952">npc::execute_action()</a>, <a class="el" href="vehicle_8cpp_source.html#l02789">find_lines_of_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l03058">get_riders()</a>, <a class="el" href="iuse_8cpp_source.html#l08161">hackveh()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01113">honk_horn()</a>, <a class="el" href="vehicle_8cpp_source.html#l00386">init_state()</a>, <a class="el" href="vehicle_8cpp_source.html#l03644">noise_and_smoke()</a>, <a class="el" href="handle__action_8cpp_source.html#l00439">pldrive()</a>, <a class="el" href="vehicle_8cpp_source.html#l02199">relocate_passengers()</a>, <a class="el" href="vehicle_8cpp_source.html#l00297">remote_controlled()</a>, <a class="el" href="iuse_8cpp_source.html#l08258">iuse::remoteveh()</a>, <a class="el" href="turret_8cpp_source.html#l00425">turrets_set_targeting()</a>, <a class="el" href="iuse_8cpp_source.html#l05639">iuse::unfold_generic()</a>, and <a class="el" href="veh__interact_8cpp_source.html#l00703">veh_interact::update_part_requirements()</a>.</p>

</div>
</div>
<a id="a92e221d5173d88af6ac2097fa7f81c10" name="a92e221d5173d88af6ac2097fa7f81c10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92e221d5173d88af6ac2097fa7f81c10">&#9670;&nbsp;</a></span>get_avail_parts() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classvehicle__part__with__feature__range.html">vehicle_part_with_feature_range</a>&lt; <a class="el" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307e">vpart_bitflags</a> &gt; vehicle::get_avail_parts </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307e">vpart_bitflags</a>&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02686">2686</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02688" name="l02688"></a><span class="lineno"> 2688</span>{</div>
<div class="line"><a id="l02689" name="l02689"></a><span class="lineno"> 2689</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="classvehicle__part__with__feature__range.html">vehicle_part_with_feature_range&lt;vpart_bitflags&gt;</a>( <span class="keyword">const_cast&lt;</span><a class="code hl_class" href="classvehicle.html">vehicle</a> &amp;<span class="keyword">&gt;</span>( *<span class="keyword">this</span> ), <a class="code hl_function" href="editmap_8cpp.html#a14e7362458bb23f8c57511c0d71d3c22">feature</a>,</div>
<div class="line"><a id="l02690" name="l02690"></a><span class="lineno"> 2690</span>            <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02c">part_status_flag</a><span class="keyword">&gt;</span>( <a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cac327b49efdca2668f28cd7b4beee54b3">part_status_flag::working</a> |</div>
<div class="line"><a id="l02691" name="l02691"></a><span class="lineno"> 2691</span>                                           <a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cae4894ca167b08880bfc35862f18575eb">part_status_flag::available</a> ) );</div>
<div class="line"><a id="l02692" name="l02692"></a><span class="lineno"> 2692</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cae4894ca167b08880bfc35862f18575eb">available</a>, <a class="el" href="editmap_8cpp.html#a14e7362458bb23f8c57511c0d71d3c22">feature()</a>, and <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cac327b49efdca2668f28cd7b4beee54b3">working</a>.</p>

</div>
</div>
<a id="a2c20fa57030f23110c4b7f446a0c1f17" name="a2c20fa57030f23110c4b7f446a0c1f17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c20fa57030f23110c4b7f446a0c1f17">&#9670;&nbsp;</a></span>get_bounding_box()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structbounding__box.html">bounding_box</a> vehicle::get_bounding_box </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06849">6849</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06850" name="l06850"></a><span class="lineno"> 6850</span>{</div>
<div class="line"><a id="l06851" name="l06851"></a><span class="lineno"> 6851</span>    <span class="keywordtype">int</span> min_x = INT_MAX;</div>
<div class="line"><a id="l06852" name="l06852"></a><span class="lineno"> 6852</span>    <span class="keywordtype">int</span> max_x = INT_MIN;</div>
<div class="line"><a id="l06853" name="l06853"></a><span class="lineno"> 6853</span>    <span class="keywordtype">int</span> min_y = INT_MAX;</div>
<div class="line"><a id="l06854" name="l06854"></a><span class="lineno"> 6854</span>    <span class="keywordtype">int</span> max_y = INT_MIN;</div>
<div class="line"><a id="l06855" name="l06855"></a><span class="lineno"> 6855</span> </div>
<div class="line"><a id="l06856" name="l06856"></a><span class="lineno"> 6856</span>    <a class="code hl_variable" href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">face</a>.<a class="code hl_function" href="classtileray.html#ab643ca3c50332c73009031331e7c8026">init</a>( <a class="code hl_variable" href="classvehicle.html#af366981a584e12d25133fb479d47de33">turn_dir</a> );</div>
<div class="line"><a id="l06857" name="l06857"></a><span class="lineno"> 6857</span> </div>
<div class="line"><a id="l06858" name="l06858"></a><span class="lineno"> 6858</span>    <a class="code hl_function" href="classvehicle.html#a3df213ef35c4a1801ef30d1f65195f40">precalc_mounts</a>( 0, <a class="code hl_variable" href="classvehicle.html#af366981a584e12d25133fb479d47de33">turn_dir</a>, <a class="code hl_struct" href="structpoint.html">point</a>() );</div>
<div class="line"><a id="l06859" name="l06859"></a><span class="lineno"> 6859</span> </div>
<div class="line"><a id="l06860" name="l06860"></a><span class="lineno"> 6860</span>    <span class="keywordtype">int</span> i_use = 0;</div>
<div class="line"><a id="l06861" name="l06861"></a><span class="lineno"> 6861</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;p : <a class="code hl_function" href="classvehicle.html#a2e80dafb2c03147b569688658843d9d6">get_points</a>( <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l06862" name="l06862"></a><span class="lineno"> 6862</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> pt = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#ae4f6d4393384b656bd9c12e14cb6e2cb">part_at</a>( p.xy() )].precalc[i_use].xy();</div>
<div class="line"><a id="l06863" name="l06863"></a><span class="lineno"> 6863</span>        <span class="keywordflow">if</span>( pt.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> &lt; min_x ) {</div>
<div class="line"><a id="l06864" name="l06864"></a><span class="lineno"> 6864</span>            min_x = pt.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a>;</div>
<div class="line"><a id="l06865" name="l06865"></a><span class="lineno"> 6865</span>        }</div>
<div class="line"><a id="l06866" name="l06866"></a><span class="lineno"> 6866</span>        <span class="keywordflow">if</span>( pt.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> &gt; max_x ) {</div>
<div class="line"><a id="l06867" name="l06867"></a><span class="lineno"> 6867</span>            max_x = pt.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a>;</div>
<div class="line"><a id="l06868" name="l06868"></a><span class="lineno"> 6868</span>        }</div>
<div class="line"><a id="l06869" name="l06869"></a><span class="lineno"> 6869</span>        <span class="keywordflow">if</span>( pt.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> &lt; min_y ) {</div>
<div class="line"><a id="l06870" name="l06870"></a><span class="lineno"> 6870</span>            min_y = pt.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a>;</div>
<div class="line"><a id="l06871" name="l06871"></a><span class="lineno"> 6871</span>        }</div>
<div class="line"><a id="l06872" name="l06872"></a><span class="lineno"> 6872</span>        <span class="keywordflow">if</span>( pt.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> &gt; max_y ) {</div>
<div class="line"><a id="l06873" name="l06873"></a><span class="lineno"> 6873</span>            max_y = pt.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a>;</div>
<div class="line"><a id="l06874" name="l06874"></a><span class="lineno"> 6874</span>        }</div>
<div class="line"><a id="l06875" name="l06875"></a><span class="lineno"> 6875</span>    }</div>
<div class="line"><a id="l06876" name="l06876"></a><span class="lineno"> 6876</span>    <a class="code hl_struct" href="structbounding__box.html">bounding_box</a> <a class="code hl_variable" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>;</div>
<div class="line"><a id="l06877" name="l06877"></a><span class="lineno"> 6877</span>    <a class="code hl_variable" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>.p1 = <a class="code hl_struct" href="structpoint.html">point</a>( min_x, min_y );</div>
<div class="line"><a id="l06878" name="l06878"></a><span class="lineno"> 6878</span>    <a class="code hl_variable" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>.p2 = <a class="code hl_struct" href="structpoint.html">point</a>( max_x, max_y );</div>
<div class="line"><a id="l06879" name="l06879"></a><span class="lineno"> 6879</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>;</div>
<div class="line"><a id="l06880" name="l06880"></a><span class="lineno"> 6880</span>}</div>
<div class="ttc" id="aclassvehicle_html_ae4f6d4393384b656bd9c12e14cb6e2cb"><div class="ttname"><a href="classvehicle.html#ae4f6d4393384b656bd9c12e14cb6e2cb">vehicle::part_at</a></div><div class="ttdeci">int part_at(const point &amp;dp) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02893">vehicle.cpp:2893</a></div></div>
<div class="ttc" id="amagic_8cpp_html_aa93a189fb7bbbf87be54bcc7bd11bb6f"><div class="ttname"><a href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a></div><div class="ttdeci">constexpr double b</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01030">magic.cpp:1030</a></div></div>
<div class="ttc" id="astructbounding__box_html"><div class="ttname"><a href="structbounding__box.html">bounding_box</a></div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00170">vehicle.h:170</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01030">b</a>, <a class="el" href="vehicle_8h_source.html#l01891">face</a>, <a class="el" href="vehicle_8cpp_source.html#l06568">get_points()</a>, <a class="el" href="tileray_8cpp_source.html#l00027">tileray::init()</a>, <a class="el" href="vehicle_8cpp_source.html#l02893">part_at()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8cpp_source.html#l03024">precalc_mounts()</a>, <a class="el" href="vehicle_8h_source.html#l01870">turn_dir</a>, <a class="el" href="point_8h_source.html#l00038">point::x</a>, and <a class="el" href="point_8h_source.html#l00039">point::y</a>.</p>

</div>
</div>
<a id="af60dc22f3846d5dabbf7877f44ebf6f5" name="af60dc22f3846d5dabbf7877f44ebf6f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af60dc22f3846d5dabbf7877f44ebf6f5">&#9670;&nbsp;</a></span>get_debug_overlay_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::tuple&lt; <a class="el" href="structpoint.html">point</a>, int, std::string &gt; &gt; vehicle::get_debug_overlay_data </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__autodrive_8cpp_source.html#l01123">1123</a> of file <a class="el" href="vehicle__autodrive_8cpp_source.html">vehicle_autodrive.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>{</div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>    <span class="keyword">static</span> <span class="keyword">const</span> std::vector&lt;std::string&gt; debug_what = { <span class="stringliteral">&quot;valid_position&quot;</span>, <span class="stringliteral">&quot;omt&quot;</span> };</div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>    std::vector&lt;std::tuple&lt;point, int, std::string&gt;&gt; <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span> </div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>    <span class="keyword">const</span> <a class="code hl_class" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> veh_pos = <a class="code hl_function" href="classvehicle.html#a789289c4179f7677e45cb100ff5ffb9a">global_square_location</a>();</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#acdbb2eec025972d86be23e90e9e92d22">autodrive_local_target</a> != <a class="code hl_variable" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a> ) {</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>        <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.emplace_back( ( <a class="code hl_variable" href="classvehicle.html#acdbb2eec025972d86be23e90e9e92d22">autodrive_local_target</a> - veh_pos.<a class="code hl_function" href="classcoords_1_1coord__point.html#a3f9a44403c08f2eaf0d605b1d034c048">raw</a>() ).xy(), <a class="code hl_enumvalue" href="namespacecatacurses.html#a2181be54a83455ed99a7b7fab4fb46e8a2b607ba9b2b7edd76f3d0a07e9dca9fc">catacurses::red</a>, <span class="stringliteral">&quot;T&quot;</span> );</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>    }</div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> &amp;pt_elem : <a class="code hl_variable" href="classvehicle.html#a5ee50a8425f281ee825025aaf1ef2ba4">collision_check_points</a> ) {</div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>        <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.emplace_back( pt_elem - veh_pos.<a class="code hl_function" href="classcoords_1_1coord__point.html#a3f9a44403c08f2eaf0d605b1d034c048">raw</a>().<a class="code hl_function" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>(), <a class="code hl_enumvalue" href="namespacecatacurses.html#a2181be54a83455ed99a7b7fab4fb46e8a26b496339c95a340a6b34734deec5bd1">catacurses::yellow</a>, <span class="stringliteral">&quot;C&quot;</span> );</div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>    }</div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span> </div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#a5a81aa92070897147fbed2c61bad4825">active_autodrive_controller</a> ) {</div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>    }</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structauto__navigation__data.html">auto_navigation_data</a> &amp;data = <a class="code hl_variable" href="classvehicle.html#a5a81aa92070897147fbed2c61bad4825">active_autodrive_controller</a>-&gt;get_data();</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span> </div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>    <span class="keyword">const</span> <a class="code hl_enumeration" href="vehicle__autodrive_8cpp.html#a8a8ef3bbd9ed2a52dac59671e4bcb210">orientation</a> dir = <a class="code hl_function" href="vehicle__autodrive_8cpp.html#ad379756baf633e6a2c8c5b9c808401bf">to_orientation</a>( <a class="code hl_variable" href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">face</a>.<a class="code hl_function" href="classtileray.html#a91ed01227e1754597024f4916f8bd6af">dir</a>() );</div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;debug_str : debug_what ) {</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>        <span class="keywordflow">if</span>( debug_str == <span class="stringliteral">&quot;profiles&quot;</span> ) {</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structvehicle__profile.html">vehicle_profile</a> &amp;profile = data.<a class="code hl_function" href="structauto__navigation__data.html#a4dbae03d1403203dab1ca7f51ebd449d">profile</a>( dir );</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> &amp;p : profile.<a class="code hl_variable" href="structvehicle__profile.html#a7e0d8388338e8a81a49cc3b42a540ba9">occupied_zone</a> ) {</div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>                <span class="keywordflow">if</span>( p.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> == 0 &amp;&amp; p.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> == 0 ) {</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>                    <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.emplace_back( p, <a class="code hl_enumvalue" href="namespacecatacurses.html#a2181be54a83455ed99a7b7fab4fb46e8a2f9b8cb89753ef803e048e78c598c15d">catacurses::cyan</a>, <a class="code hl_function" href="vehicle__autodrive_8cpp.html#a4c1fb3a0da47bc44487e0b5f5e5beaf4">to_string</a>( dir ) );</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>                    <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.emplace_back( p, <a class="code hl_enumvalue" href="namespacecatacurses.html#a2181be54a83455ed99a7b7fab4fb46e8aaf95aa6d65219dcc01457b82df1be8fd">catacurses::green</a>, <span class="stringliteral">&quot;x&quot;</span> );</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>                }</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>            }</div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> &amp;p : profile.<a class="code hl_variable" href="structvehicle__profile.html#a73e001a2e933b803bef266ffb880cd0d">collision_points</a> ) {</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>                <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.emplace_back( p, <a class="code hl_enumvalue" href="namespacecatacurses.html#a2181be54a83455ed99a7b7fab4fb46e8a2b607ba9b2b7edd76f3d0a07e9dca9fc">catacurses::red</a>, <span class="stringliteral">&quot;o&quot;</span> );</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>            }</div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( debug_str == <span class="stringliteral">&quot;is_obstacle&quot;</span> ) {</div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> dx = 0; dx &lt; <a class="code hl_variable" href="vehicle__autodrive_8cpp.html#aebb947e8e2ee25d01dd437f4217f3a75">NAV_VIEW_SIZE_X</a>; dx++ ) {</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>                <span class="keywordflow">for</span>( <span class="keywordtype">int</span> dy = 0; dy &lt; <a class="code hl_variable" href="vehicle__autodrive_8cpp.html#ad901ed07aa394f03c53eb94823b66302">NAV_VIEW_SIZE_Y</a>; dy++ ) {</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>                    <span class="keyword">const</span> <span class="keywordtype">bool</span> obstacle = data.<a class="code hl_variable" href="structauto__navigation__data.html#ad5665e526f21e9503269f9bfbf1a67b0">is_obstacle</a>[dx][dy];</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>                    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_function" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> = obstacle ? <a class="code hl_enumvalue" href="namespacecatacurses.html#a2181be54a83455ed99a7b7fab4fb46e8a2b607ba9b2b7edd76f3d0a07e9dca9fc">catacurses::red</a> : <a class="code hl_enumvalue" href="namespacecatacurses.html#a2181be54a83455ed99a7b7fab4fb46e8aaf95aa6d65219dcc01457b82df1be8fd">catacurses::green</a>;</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>                    <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> pt = data.<a class="code hl_variable" href="structauto__navigation__data.html#a9f1b4eba0b0d641b45edb8f28a897f8e">view_to_map</a>.<a class="code hl_function" href="structcoord__transformation.html#a5d954bb1fe1ad68dcdfaf2079cec6caa">transform</a>( <a class="code hl_struct" href="structpoint.html">point</a>( dx, dy ) ) - veh_pos.<a class="code hl_function" href="classcoords_1_1coord__point.html#a3f9a44403c08f2eaf0d605b1d034c048">raw</a>().<a class="code hl_function" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>();</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>                    <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.emplace_back( pt, <a class="code hl_function" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a>, obstacle ? <span class="stringliteral">&quot;o&quot;</span> : <span class="stringliteral">&quot;x&quot;</span> );</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>                }</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>            }</div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( debug_str == <span class="stringliteral">&quot;valid_position&quot;</span> ) {</div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>            <span class="keyword">const</span> <a class="code hl_enumeration" href="vehicle__autodrive_8cpp.html#a8a8ef3bbd9ed2a52dac59671e4bcb210">orientation</a> tdir = data.<a class="code hl_variable" href="structauto__navigation__data.html#a2323dae6401126f26925c0bb3c12be14">nav_to_map</a>.<a class="code hl_function" href="structcoord__transformation.html#a8201710eeddf3eff494c268dd9991575">inverse</a>().<a class="code hl_function" href="structcoord__transformation.html#a5d954bb1fe1ad68dcdfaf2079cec6caa">transform</a>( dir );</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> dx = 0; dx &lt; <a class="code hl_variable" href="vehicle__autodrive_8cpp.html#a614ae4ace7c3c57f251157a731475e32">NAV_MAP_SIZE_X</a>; dx++ ) {</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>                <span class="keywordflow">for</span>( <span class="keywordtype">int</span> dy = 0; dy &lt; <a class="code hl_variable" href="vehicle__autodrive_8cpp.html#a73d398b05c4c7316597d23213e7e3235">NAV_MAP_SIZE_Y</a>; dy++ ) {</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>                    <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> nav_pt( dx, dy );</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span>                    <span class="keyword">const</span> <span class="keywordtype">bool</span> valid = data.<a class="code hl_function" href="structauto__navigation__data.html#a154fd958c556163e5870ab2a75a37671">valid_position</a>( tdir, nav_pt );</div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>                    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_function" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> = valid ? <a class="code hl_enumvalue" href="namespacecatacurses.html#a2181be54a83455ed99a7b7fab4fb46e8aaf95aa6d65219dcc01457b82df1be8fd">catacurses::green</a> : <a class="code hl_enumvalue" href="namespacecatacurses.html#a2181be54a83455ed99a7b7fab4fb46e8a2b607ba9b2b7edd76f3d0a07e9dca9fc">catacurses::red</a>;</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>                    <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> pt = data.<a class="code hl_variable" href="structauto__navigation__data.html#a2323dae6401126f26925c0bb3c12be14">nav_to_map</a>.<a class="code hl_function" href="structcoord__transformation.html#a5d954bb1fe1ad68dcdfaf2079cec6caa">transform</a>( nav_pt ) - veh_pos.<a class="code hl_function" href="classcoords_1_1coord__point.html#a3f9a44403c08f2eaf0d605b1d034c048">raw</a>().<a class="code hl_function" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>();</div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>                    <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.emplace_back( pt, <a class="code hl_function" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a>, <a class="code hl_function" href="vehicle__autodrive_8cpp.html#a4c1fb3a0da47bc44487e0b5f5e5beaf4">to_string</a>( dir ) );</div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span>                }</div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>            }</div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( debug_str == <span class="stringliteral">&quot;goal_zone&quot;</span> ) {</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span>            std::unordered_map&lt;point, bool&gt; goal_map;</div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structnode__address.html">node_address</a> &amp;addr : data.<a class="code hl_variable" href="structauto__navigation__data.html#a46c1c150245432310cd0e280e5c06d55">goal_zone</a> ) {</div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>                goal_map[addr.<a class="code hl_function" href="structnode__address.html#ab251b0b2bfb50ad14394ff43880a29c3">get_point</a>()] |= data.<a class="code hl_variable" href="structauto__navigation__data.html#a2323dae6401126f26925c0bb3c12be14">nav_to_map</a>.<a class="code hl_function" href="structcoord__transformation.html#a5d954bb1fe1ad68dcdfaf2079cec6caa">transform</a>( addr.<a class="code hl_variable" href="structnode__address.html#a0ffafc5d0b0e8bccdf6b2c243fd91287">facing_dir</a> ) == dir;</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>            }</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;entry : goal_map ) {</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span>                <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> pt = data.<a class="code hl_variable" href="structauto__navigation__data.html#a2323dae6401126f26925c0bb3c12be14">nav_to_map</a>.<a class="code hl_function" href="structcoord__transformation.html#a5d954bb1fe1ad68dcdfaf2079cec6caa">transform</a>( entry.first ) - veh_pos.<a class="code hl_function" href="classcoords_1_1coord__point.html#a3f9a44403c08f2eaf0d605b1d034c048">raw</a>().<a class="code hl_function" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>();</div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>                <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_function" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> = entry.second ? <a class="code hl_enumvalue" href="namespacecatacurses.html#a2181be54a83455ed99a7b7fab4fb46e8aaf95aa6d65219dcc01457b82df1be8fd">catacurses::green</a> : <a class="code hl_enumvalue" href="namespacecatacurses.html#a2181be54a83455ed99a7b7fab4fb46e8a26b496339c95a340a6b34734deec5bd1">catacurses::yellow</a> + 8;</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>                <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.emplace_back( pt, <a class="code hl_function" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a>, <span class="stringliteral">&quot;g&quot;</span> );</div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>            }</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( debug_str == <span class="stringliteral">&quot;goal_points&quot;</span> ) {</div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span>            <span class="keywordflow">for</span>( <a class="code hl_struct" href="structpoint.html">point</a> p : data.<a class="code hl_variable" href="structauto__navigation__data.html#a1624d7b2bb951fe71eca03aadddce81b">goal_points</a> ) {</div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>                <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> pt = data.<a class="code hl_variable" href="structauto__navigation__data.html#a2323dae6401126f26925c0bb3c12be14">nav_to_map</a>.<a class="code hl_function" href="structcoord__transformation.html#a5d954bb1fe1ad68dcdfaf2079cec6caa">transform</a>( p ) - veh_pos.<a class="code hl_function" href="classcoords_1_1coord__point.html#a3f9a44403c08f2eaf0d605b1d034c048">raw</a>().<a class="code hl_function" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>();</div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span>                <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.emplace_back( pt, <a class="code hl_enumvalue" href="namespacecatacurses.html#a2181be54a83455ed99a7b7fab4fb46e8a00c94a3341257be62e4db78730c88356">catacurses::white</a>, <span class="stringliteral">&quot;G&quot;</span> );</div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>            }</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( debug_str == <span class="stringliteral">&quot;path&quot;</span> ) {</div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;step : data.<a class="code hl_variable" href="structauto__navigation__data.html#a512aaf8e5431889e367d4caab2b2eb1a">path</a> ) {</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>                <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.emplace_back( ( step.pos - veh_pos ).raw().xy(), 8 + <a class="code hl_enumvalue" href="namespacecatacurses.html#a2181be54a83455ed99a7b7fab4fb46e8a26b496339c95a340a6b34734deec5bd1">catacurses::yellow</a>,</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>                                  <a class="code hl_function" href="vehicle__autodrive_8cpp.html#a4c1fb3a0da47bc44487e0b5f5e5beaf4">to_string</a>( step.steering_dir ) );</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span>            }</div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( debug_str == <span class="stringliteral">&quot;omt&quot;</span> ) {</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> offset = ( project_to&lt;coords::ms&gt;( data.<a class="code hl_variable" href="structauto__navigation__data.html#ad960c7e63b757edfbae1c896c212268e">current_omt</a> ) - veh_pos ).raw().xy();</div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>            <span class="keyword">static</span> <span class="keyword">const</span> std::vector&lt;point&gt; corners = {<a class="code hl_variable" href="point_8h.html#a0ee2195dcb488ae55fbf4316f5011172">point_zero</a>, {0, <a class="code hl_variable" href="vehicle__autodrive_8cpp.html#a540c8a7c7eb0f210f85a2f12fd5aff67">OMT_SIZE</a> - 1}, {<a class="code hl_variable" href="vehicle__autodrive_8cpp.html#a540c8a7c7eb0f210f85a2f12fd5aff67">OMT_SIZE</a> - 1, 0}, {<a class="code hl_variable" href="vehicle__autodrive_8cpp.html#a540c8a7c7eb0f210f85a2f12fd5aff67">OMT_SIZE</a> - 1, <a class="code hl_variable" href="vehicle__autodrive_8cpp.html#a540c8a7c7eb0f210f85a2f12fd5aff67">OMT_SIZE</a> - 1}};</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span>            <span class="keywordflow">for</span>( <a class="code hl_struct" href="structpoint.html">point</a> <a class="code hl_enumvalue" href="enums_8h.html#a00763863874f01b868849b27ceee73c9aaff35d0e26ed8830cf708063bac9c834">corner</a> : corners ) {</div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>                <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.emplace_back( <a class="code hl_enumvalue" href="enums_8h.html#a00763863874f01b868849b27ceee73c9aaff35d0e26ed8830cf708063bac9c834">corner</a> + offset, <a class="code hl_enumvalue" href="namespacecatacurses.html#a2181be54a83455ed99a7b7fab4fb46e8a2f9b8cb89753ef803e048e78c598c15d">catacurses::cyan</a>, <span class="stringliteral">&quot;+&quot;</span> );</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>            }</div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span>        }</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span>    }</div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span>}</div>
<div class="ttc" id="aclassvehicle_html_a5ee50a8425f281ee825025aaf1ef2ba4"><div class="ttname"><a href="classvehicle.html#a5ee50a8425f281ee825025aaf1ef2ba4">vehicle::collision_check_points</a></div><div class="ttdeci">std::set&lt; point &gt; collision_check_points</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00845">vehicle.h:845</a></div></div>
<div class="ttc" id="aeditmap_8cpp_html_a025a5c063205294df20818edc4cfe355"><div class="ttname"><a href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a></div><div class="ttdeci">static nc_color color(const T_t &amp;t)</div></div>
<div class="ttc" id="aenums_8h_html_a00763863874f01b868849b27ceee73c9aaff35d0e26ed8830cf708063bac9c834"><div class="ttname"><a href="enums_8h.html#a00763863874f01b868849b27ceee73c9aaff35d0e26ed8830cf708063bac9c834">corner</a></div><div class="ttdeci">@ corner</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00317">enums.h:317</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_a2181be54a83455ed99a7b7fab4fb46e8a00c94a3341257be62e4db78730c88356"><div class="ttname"><a href="namespacecatacurses.html#a2181be54a83455ed99a7b7fab4fb46e8a00c94a3341257be62e4db78730c88356">catacurses::white</a></div><div class="ttdeci">@ white</div><div class="ttdef"><b>Definition:</b> <a href="cursesdef_8h_source.html#l00086">cursesdef.h:86</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_a2181be54a83455ed99a7b7fab4fb46e8a26b496339c95a340a6b34734deec5bd1"><div class="ttname"><a href="namespacecatacurses.html#a2181be54a83455ed99a7b7fab4fb46e8a26b496339c95a340a6b34734deec5bd1">catacurses::yellow</a></div><div class="ttdeci">@ yellow</div><div class="ttdef"><b>Definition:</b> <a href="cursesdef_8h_source.html#l00082">cursesdef.h:82</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_a2181be54a83455ed99a7b7fab4fb46e8a2b607ba9b2b7edd76f3d0a07e9dca9fc"><div class="ttname"><a href="namespacecatacurses.html#a2181be54a83455ed99a7b7fab4fb46e8a2b607ba9b2b7edd76f3d0a07e9dca9fc">catacurses::red</a></div><div class="ttdeci">@ red</div><div class="ttdef"><b>Definition:</b> <a href="cursesdef_8h_source.html#l00080">cursesdef.h:80</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_a2181be54a83455ed99a7b7fab4fb46e8a2f9b8cb89753ef803e048e78c598c15d"><div class="ttname"><a href="namespacecatacurses.html#a2181be54a83455ed99a7b7fab4fb46e8a2f9b8cb89753ef803e048e78c598c15d">catacurses::cyan</a></div><div class="ttdeci">@ cyan</div><div class="ttdef"><b>Definition:</b> <a href="cursesdef_8h_source.html#l00085">cursesdef.h:85</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_a2181be54a83455ed99a7b7fab4fb46e8aaf95aa6d65219dcc01457b82df1be8fd"><div class="ttname"><a href="namespacecatacurses.html#a2181be54a83455ed99a7b7fab4fb46e8aaf95aa6d65219dcc01457b82df1be8fd">catacurses::green</a></div><div class="ttdeci">@ green</div><div class="ttdef"><b>Definition:</b> <a href="cursesdef_8h_source.html#l00081">cursesdef.h:81</a></div></div>
<div class="ttc" id="astructauto__navigation__data_html"><div class="ttname"><a href="structauto__navigation__data.html">auto_navigation_data</a></div><div class="ttdoc">Data structure that caches all the data needed in order to navigate from one OMT to the next OMT alon...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00256">vehicle_autodrive.cpp:256</a></div></div>
<div class="ttc" id="astructauto__navigation__data_html_a154fd958c556163e5870ab2a75a37671"><div class="ttname"><a href="structauto__navigation__data.html#a154fd958c556163e5870ab2a75a37671">auto_navigation_data::valid_position</a></div><div class="ttdeci">bool &amp; valid_position(orientation dir, point p)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00307">vehicle_autodrive.cpp:307</a></div></div>
<div class="ttc" id="astructauto__navigation__data_html_a1624d7b2bb951fe71eca03aadddce81b"><div class="ttname"><a href="structauto__navigation__data.html#a1624d7b2bb951fe71eca03aadddce81b">auto_navigation_data::goal_points</a></div><div class="ttdeci">std::array&lt; point, NAV_MAP_NUM_OMT &gt; goal_points</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00292">vehicle_autodrive.cpp:292</a></div></div>
<div class="ttc" id="astructauto__navigation__data_html_a2323dae6401126f26925c0bb3c12be14"><div class="ttname"><a href="structauto__navigation__data.html#a2323dae6401126f26925c0bb3c12be14">auto_navigation_data::nav_to_map</a></div><div class="ttdeci">coord_transformation nav_to_map</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00268">vehicle_autodrive.cpp:268</a></div></div>
<div class="ttc" id="astructauto__navigation__data_html_a46c1c150245432310cd0e280e5c06d55"><div class="ttname"><a href="structauto__navigation__data.html#a46c1c150245432310cd0e280e5c06d55">auto_navigation_data::goal_zone</a></div><div class="ttdeci">std::unordered_set&lt; node_address, node_address_hasher &gt; goal_zone</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00290">vehicle_autodrive.cpp:290</a></div></div>
<div class="ttc" id="astructauto__navigation__data_html_a4dbae03d1403203dab1ca7f51ebd449d"><div class="ttname"><a href="structauto__navigation__data.html#a4dbae03d1403203dab1ca7f51ebd449d">auto_navigation_data::profile</a></div><div class="ttdeci">vehicle_profile &amp; profile(orientation dir)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00301">vehicle_autodrive.cpp:301</a></div></div>
<div class="ttc" id="astructauto__navigation__data_html_a512aaf8e5431889e367d4caab2b2eb1a"><div class="ttname"><a href="structauto__navigation__data.html#a512aaf8e5431889e367d4caab2b2eb1a">auto_navigation_data::path</a></div><div class="ttdeci">std::vector&lt; navigation_step &gt; path</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00295">vehicle_autodrive.cpp:295</a></div></div>
<div class="ttc" id="astructauto__navigation__data_html_a9f1b4eba0b0d641b45edb8f28a897f8e"><div class="ttname"><a href="structauto__navigation__data.html#a9f1b4eba0b0d641b45edb8f28a897f8e">auto_navigation_data::view_to_map</a></div><div class="ttdeci">coord_transformation view_to_map</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00270">vehicle_autodrive.cpp:270</a></div></div>
<div class="ttc" id="astructauto__navigation__data_html_ad5665e526f21e9503269f9bfbf1a67b0"><div class="ttname"><a href="structauto__navigation__data.html#ad5665e526f21e9503269f9bfbf1a67b0">auto_navigation_data::is_obstacle</a></div><div class="ttdeci">bool is_obstacle[NAV_VIEW_SIZE_X][NAV_VIEW_SIZE_Y]</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00286">vehicle_autodrive.cpp:286</a></div></div>
<div class="ttc" id="astructauto__navigation__data_html_ad960c7e63b757edfbae1c896c212268e"><div class="ttname"><a href="structauto__navigation__data.html#ad960c7e63b757edfbae1c896c212268e">auto_navigation_data::current_omt</a></div><div class="ttdeci">tripoint_abs_omt current_omt</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00257">vehicle_autodrive.cpp:257</a></div></div>
<div class="ttc" id="astructcoord__transformation_html_a5d954bb1fe1ad68dcdfaf2079cec6caa"><div class="ttname"><a href="structcoord__transformation.html#a5d954bb1fe1ad68dcdfaf2079cec6caa">coord_transformation::transform</a></div><div class="ttdeci">point transform(const point &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00530">vehicle_autodrive.cpp:530</a></div></div>
<div class="ttc" id="astructcoord__transformation_html_a8201710eeddf3eff494c268dd9991575"><div class="ttname"><a href="structcoord__transformation.html#a8201710eeddf3eff494c268dd9991575">coord_transformation::inverse</a></div><div class="ttdeci">coord_transformation inverse() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00550">vehicle_autodrive.cpp:550</a></div></div>
<div class="ttc" id="astructnode__address_html"><div class="ttname"><a href="structnode__address.html">node_address</a></div><div class="ttdoc">The address of a navigation node, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00187">vehicle_autodrive.cpp:187</a></div></div>
<div class="ttc" id="astructnode__address_html_a0ffafc5d0b0e8bccdf6b2c243fd91287"><div class="ttname"><a href="structnode__address.html#a0ffafc5d0b0e8bccdf6b2c243fd91287">node_address::facing_dir</a></div><div class="ttdeci">orientation facing_dir</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00190">vehicle_autodrive.cpp:190</a></div></div>
<div class="ttc" id="astructnode__address_html_ab251b0b2bfb50ad14394ff43880a29c3"><div class="ttname"><a href="structnode__address.html#ab251b0b2bfb50ad14394ff43880a29c3">node_address::get_point</a></div><div class="ttdeci">point get_point() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00194">vehicle_autodrive.cpp:194</a></div></div>
<div class="ttc" id="astructvehicle__profile_html"><div class="ttname"><a href="structvehicle__profile.html">vehicle_profile</a></div><div class="ttdoc">Data type representing the convex hull of a vehicle under a particular rotation.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00163">vehicle_autodrive.cpp:163</a></div></div>
<div class="ttc" id="astructvehicle__profile_html_a73e001a2e933b803bef266ffb880cd0d"><div class="ttname"><a href="structvehicle__profile.html#a73e001a2e933b803bef266ffb880cd0d">vehicle_profile::collision_points</a></div><div class="ttdeci">std::vector&lt; point &gt; collision_points</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00169">vehicle_autodrive.cpp:169</a></div></div>
<div class="ttc" id="astructvehicle__profile_html_a7e0d8388338e8a81a49cc3b42a540ba9"><div class="ttname"><a href="structvehicle__profile.html#a7e0d8388338e8a81a49cc3b42a540ba9">vehicle_profile::occupied_zone</a></div><div class="ttdeci">std::vector&lt; point &gt; occupied_zone</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00166">vehicle_autodrive.cpp:166</a></div></div>
<div class="ttc" id="avehicle__autodrive_8cpp_html_a4c1fb3a0da47bc44487e0b5f5e5beaf4"><div class="ttname"><a href="vehicle__autodrive_8cpp.html#a4c1fb3a0da47bc44487e0b5f5e5beaf4">to_string</a></div><div class="ttdeci">static std::string to_string(orientation dir)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00392">vehicle_autodrive.cpp:392</a></div></div>
<div class="ttc" id="avehicle__autodrive_8cpp_html_a540c8a7c7eb0f210f85a2f12fd5aff67"><div class="ttname"><a href="vehicle__autodrive_8cpp.html#a540c8a7c7eb0f210f85a2f12fd5aff67">OMT_SIZE</a></div><div class="ttdeci">static constexpr int OMT_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00130">vehicle_autodrive.cpp:130</a></div></div>
<div class="ttc" id="avehicle__autodrive_8cpp_html_a614ae4ace7c3c57f251157a731475e32"><div class="ttname"><a href="vehicle__autodrive_8cpp.html#a614ae4ace7c3c57f251157a731475e32">NAV_MAP_SIZE_X</a></div><div class="ttdeci">static constexpr int NAV_MAP_SIZE_X</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00132">vehicle_autodrive.cpp:132</a></div></div>
<div class="ttc" id="avehicle__autodrive_8cpp_html_a73d398b05c4c7316597d23213e7e3235"><div class="ttname"><a href="vehicle__autodrive_8cpp.html#a73d398b05c4c7316597d23213e7e3235">NAV_MAP_SIZE_Y</a></div><div class="ttdeci">static constexpr int NAV_MAP_SIZE_Y</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00133">vehicle_autodrive.cpp:133</a></div></div>
<div class="ttc" id="avehicle__autodrive_8cpp_html_a8a8ef3bbd9ed2a52dac59671e4bcb210"><div class="ttname"><a href="vehicle__autodrive_8cpp.html#a8a8ef3bbd9ed2a52dac59671e4bcb210">orientation</a></div><div class="ttdeci">orientation</div><div class="ttdoc">Data type representing a vehicle orientation, which corresponds to an angle that is a multiple of TUR...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00149">vehicle_autodrive.cpp:149</a></div></div>
<div class="ttc" id="avehicle__autodrive_8cpp_html_ad901ed07aa394f03c53eb94823b66302"><div class="ttname"><a href="vehicle__autodrive_8cpp.html#ad901ed07aa394f03c53eb94823b66302">NAV_VIEW_SIZE_Y</a></div><div class="ttdeci">static constexpr int NAV_VIEW_SIZE_Y</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00136">vehicle_autodrive.cpp:136</a></div></div>
<div class="ttc" id="avehicle__autodrive_8cpp_html_aebb947e8e2ee25d01dd437f4217f3a75"><div class="ttname"><a href="vehicle__autodrive_8cpp.html#aebb947e8e2ee25d01dd437f4217f3a75">NAV_VIEW_SIZE_X</a></div><div class="ttdeci">static constexpr int NAV_VIEW_SIZE_X</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00135">vehicle_autodrive.cpp:135</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01825">active_autodrive_controller</a>, <a class="el" href="vehicle_8h_source.html#l01824">autodrive_local_target</a>, <a class="el" href="vehicle_8h_source.html#l00845">collision_check_points</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00169">vehicle_profile::collision_points</a>, <a class="el" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color()</a>, <a class="el" href="enums_8h_source.html#l00317">corner</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00257">auto_navigation_data::current_omt</a>, <a class="el" href="cursesdef_8h_source.html#l00085">catacurses::cyan</a>, <a class="el" href="tileray_8cpp_source.html#l00074">tileray::dir()</a>, <a class="el" href="vehicle_8h_source.html#l01891">face</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00190">node_address::facing_dir</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00194">node_address::get_point()</a>, <a class="el" href="vehicle_8cpp_source.html#l03091">global_square_location()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00292">auto_navigation_data::goal_points</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00290">auto_navigation_data::goal_zone</a>, <a class="el" href="cursesdef_8h_source.html#l00081">catacurses::green</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00550">coord_transformation::inverse()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00286">auto_navigation_data::is_obstacle</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00132">NAV_MAP_SIZE_X</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00133">NAV_MAP_SIZE_Y</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00268">auto_navigation_data::nav_to_map</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00135">NAV_VIEW_SIZE_X</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00136">NAV_VIEW_SIZE_Y</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00166">vehicle_profile::occupied_zone</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00130">OMT_SIZE</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00295">auto_navigation_data::path</a>, <a class="el" href="point_8h_source.html#l00274">point_zero</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00301">auto_navigation_data::profile()</a>, <a class="el" href="coordinates_8h_source.html#l00111">coords::coord_point&lt; Point, Origin, Scale &gt;::raw()</a>, <a class="el" href="cursesdef_8h_source.html#l00080">catacurses::red</a>, <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00386">to_orientation()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00392">to_string()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00530">coord_transformation::transform()</a>, <a class="el" href="point_8h_source.html#l00273">tripoint_zero</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00307">auto_navigation_data::valid_position()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00270">auto_navigation_data::view_to_map</a>, <a class="el" href="cursesdef_8h_source.html#l00086">catacurses::white</a>, <a class="el" href="point_8h_source.html#l00038">point::x</a>, <a class="el" href="point_8h_source.html#l00220">tripoint::xy()</a>, <a class="el" href="point_8h_source.html#l00039">point::y</a>, and <a class="el" href="cursesdef_8h_source.html#l00082">catacurses::yellow</a>.</p>

</div>
</div>
<a id="a791413b7697a0ef434df0fe73d85b9fe" name="a791413b7697a0ef434df0fe73d85b9fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a791413b7697a0ef434df0fe73d85b9fe">&#9670;&nbsp;</a></span>get_enabled_parts() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classvehicle__part__with__feature__range.html">vehicle_part_with_feature_range</a>&lt; std::string &gt; vehicle::get_enabled_parts </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>feature</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Yields a range of parts of this vehicle that each have the given feature and are enabled and available: not broken, removed, or part of a carried vehicle. </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02721">2721</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02722" name="l02722"></a><span class="lineno"> 2722</span>{</div>
<div class="line"><a id="l02723" name="l02723"></a><span class="lineno"> 2723</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="classvehicle__part__with__feature__range.html">vehicle_part_with_feature_range&lt;std::string&gt;</a>( <span class="keyword">const_cast&lt;</span><a class="code hl_class" href="classvehicle.html">vehicle</a> &amp;<span class="keyword">&gt;</span>( *<span class="keyword">this</span> ),</div>
<div class="line"><a id="l02724" name="l02724"></a><span class="lineno"> 2724</span>            <a class="code hl_function" href="namespaceavatar__action.html#a76ba74774376a08222b8cdcce08f7304">std::move</a>( <a class="code hl_function" href="editmap_8cpp.html#a14e7362458bb23f8c57511c0d71d3c22">feature</a> ),</div>
<div class="line"><a id="l02725" name="l02725"></a><span class="lineno"> 2725</span>            <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02c">part_status_flag</a><span class="keyword">&gt;</span>( <a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">part_status_flag::enabled</a> |</div>
<div class="line"><a id="l02726" name="l02726"></a><span class="lineno"> 2726</span>                                           <a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cac327b49efdca2668f28cd7b4beee54b3">part_status_flag::working</a> |</div>
<div class="line"><a id="l02727" name="l02727"></a><span class="lineno"> 2727</span>                                           <a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cae4894ca167b08880bfc35862f18575eb">part_status_flag::available</a> ) );</div>
<div class="line"><a id="l02728" name="l02728"></a><span class="lineno"> 2728</span>}</div>
<div class="ttc" id="avehicle_8h_html_ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423"><div class="ttname"><a href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">part_status_flag::enabled</a></div><div class="ttdeci">@ enabled</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cae4894ca167b08880bfc35862f18575eb">available</a>, <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a>, <a class="el" href="editmap_8cpp.html#a14e7362458bb23f8c57511c0d71d3c22">feature()</a>, <a class="el" href="avatar__action_8cpp_source.html#l00090">avatar_action::move()</a>, and <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cac327b49efdca2668f28cd7b4beee54b3">working</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l01230">crash_terrain_around()</a>, <a class="el" href="vehicle_8cpp_source.html#l05033">idle()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01343">operate_planter()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01299">operate_reaper()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01380">operate_scoop()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01218">play_chimes()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01211">play_music()</a>, <a class="el" href="vehicle_8cpp_source.html#l04619">power_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l04473">total_accessory_epower_w()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l01264">transform_terrain()</a>.</p>

</div>
</div>
<a id="add733f278420b147ef4802deca9a66a3" name="add733f278420b147ef4802deca9a66a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add733f278420b147ef4802deca9a66a3">&#9670;&nbsp;</a></span>get_enabled_parts() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classvehicle__part__with__feature__range.html">vehicle_part_with_feature_range</a>&lt; <a class="el" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307e">vpart_bitflags</a> &gt; vehicle::get_enabled_parts </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307e">vpart_bitflags</a>&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02730">2730</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02732" name="l02732"></a><span class="lineno"> 2732</span>{</div>
<div class="line"><a id="l02733" name="l02733"></a><span class="lineno"> 2733</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="classvehicle__part__with__feature__range.html">vehicle_part_with_feature_range&lt;vpart_bitflags&gt;</a>( <span class="keyword">const_cast&lt;</span><a class="code hl_class" href="classvehicle.html">vehicle</a> &amp;<span class="keyword">&gt;</span>( *<span class="keyword">this</span> ), <a class="code hl_function" href="editmap_8cpp.html#a14e7362458bb23f8c57511c0d71d3c22">feature</a>,</div>
<div class="line"><a id="l02734" name="l02734"></a><span class="lineno"> 2734</span>            <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02c">part_status_flag</a><span class="keyword">&gt;</span>( <a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">part_status_flag::enabled</a> |</div>
<div class="line"><a id="l02735" name="l02735"></a><span class="lineno"> 2735</span>                                           <a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cac327b49efdca2668f28cd7b4beee54b3">part_status_flag::working</a> |</div>
<div class="line"><a id="l02736" name="l02736"></a><span class="lineno"> 2736</span>                                           <a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cae4894ca167b08880bfc35862f18575eb">part_status_flag::available</a> ) );</div>
<div class="line"><a id="l02737" name="l02737"></a><span class="lineno"> 2737</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cae4894ca167b08880bfc35862f18575eb">available</a>, <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a>, <a class="el" href="editmap_8cpp.html#a14e7362458bb23f8c57511c0d71d3c22">feature()</a>, and <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cac327b49efdca2668f28cd7b4beee54b3">working</a>.</p>

</div>
</div>
<a id="ab6247bd2a7ca94ef2528e50397281c30" name="ab6247bd2a7ca94ef2528e50397281c30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6247bd2a7ca94ef2528e50397281c30">&#9670;&nbsp;</a></span>get_items() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classvehicle__stack.html">vehicle_stack</a> vehicle::get_items </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05282">5282</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05283" name="l05283"></a><span class="lineno"> 5283</span>{</div>
<div class="line"><a id="l05284" name="l05284"></a><span class="lineno"> 5284</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> = <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> );</div>
<div class="line"><a id="l05285" name="l05285"></a><span class="lineno"> 5285</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="classvehicle__stack.html">vehicle_stack</a>( &amp;<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].items, <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>.xy(), <span class="keyword">this</span>, <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> );</div>
<div class="line"><a id="l05286" name="l05286"></a><span class="lineno"> 5286</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="vehicle_8h_source.html#l01859">pos</a>.</p>

</div>
</div>
<a id="a983dd9db3cd64078b176a82289e0b260" name="a983dd9db3cd64078b176a82289e0b260"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a983dd9db3cd64078b176a82289e0b260">&#9670;&nbsp;</a></span>get_items() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classvehicle__stack.html">vehicle_stack</a> vehicle::get_items </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05288">5288</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05289" name="l05289"></a><span class="lineno"> 5289</span>{</div>
<div class="line"><a id="l05290" name="l05290"></a><span class="lineno"> 5290</span>    <span class="comment">// HACK: callers could modify items through this</span></div>
<div class="line"><a id="l05291" name="l05291"></a><span class="lineno"> 5291</span>    <span class="comment">// TODO: a const version of vehicle_stack is needed</span></div>
<div class="line"><a id="l05292" name="l05292"></a><span class="lineno"> 5292</span>    <span class="keywordflow">return</span> <span class="keyword">const_cast&lt;</span><a class="code hl_class" href="classvehicle.html">vehicle</a> *<span class="keyword">&gt;</span>( this )-&gt;<a class="code hl_function" href="classvehicle.html#a983dd9db3cd64078b176a82289e0b260">get_items</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> );</div>
<div class="line"><a id="l05293" name="l05293"></a><span class="lineno"> 5293</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l05288">get_items()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05183">add_charges()</a>, <a class="el" href="vehicle_8cpp_source.html#l05209">add_item()</a>, <a class="el" href="inventory__ui_8cpp_source.html#l01221">inventory_selector::add_vehicle_items()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l01175">are_requirements_nearby()</a>, <a class="el" href="vehicle_8cpp_source.html#l06794">calc_mass_center()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02986">veh_interact::complete_vehicle()</a>, <a class="el" href="editmap_8cpp_source.html#l00503">editmap::draw_main_ui_overlay()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l01977">fetch_activity()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l03102">find_auto_consume()</a>, <a class="el" href="character_8cpp_source.html#l09465">Character::floor_item_warmth()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00801">fold_up()</a>, <a class="el" href="inventory_8cpp_source.html#l00508">inventory::form_from_map()</a>, <a class="el" href="vehicle_8cpp_source.html#l05163">free_volume()</a>, <a class="el" href="lightmap_8cpp_source.html#l00369">map::generate_lightmap()</a>, <a class="el" href="advanced__inv__area_8cpp_source.html#l00247">advanced_inv_area::get_container()</a>, <a class="el" href="advanced__inv__area_8cpp_source.html#l00034">advanced_inv_area::get_item_count()</a>, <a class="el" href="vehicle_8cpp_source.html#l05288">get_items()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>, <a class="el" href="character_8cpp_source.html#l09301">Character::is_snuggling()</a>, <a class="el" href="vehicle_8cpp_source.html#l05158">max_volume()</a>, <a class="el" href="iuse_8cpp_source.html#l05094">iuse::mop()</a>, <a class="el" href="map_8cpp_source.html#l02803">map::mop_spills()</a>, <a class="el" href="advanced__inv_8cpp_source.html#l00709">advanced_inventory::move_all_items()</a>, <a class="el" href="map__extras_8cpp_source.html#l00336">MapExtras::mx_helicopter()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01343">operate_planter()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00082">part_color()</a>, <a class="el" href="vehicle_8cpp_source.html#l01940">part_removal_cleanup()</a>, <a class="el" href="pickup_8cpp_source.html#l00571">pickup::pick_up()</a>, <a class="el" href="npcmove_8cpp_source.html#l03106">npc::pick_up_item_vehicle()</a>, <a class="el" href="map_8cpp_source.html#l04677">map::process_items_in_vehicle()</a>, <a class="el" href="map_8cpp_source.html#l04474">process_vehicle_items()</a>, <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>, <a class="el" href="faction__camp_8cpp_source.html#l02446">basecamp::start_garage_chop()</a>, <a class="el" href="vehicle_8cpp_source.html#l05153">stored_volume()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01556">use_autoclave()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01691">use_dishwasher()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l01606">use_washing_machine()</a>.</p>

</div>
</div>
<a id="a2fd45081157bdeb69cec2567bf2cbeaa" name="a2fd45081157bdeb69cec2567bf2cbeaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fd45081157bdeb69cec2567bf2cbeaa">&#9670;&nbsp;</a></span>get_next_shifted_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::get_next_shifted_index </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>original_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02760">2760</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02761" name="l02761"></a><span class="lineno"> 2761</span>{</div>
<div class="line"><a id="l02762" name="l02762"></a><span class="lineno"> 2762</span>    <span class="keywordtype">int</span> ret_index = original_index;</div>
<div class="line"><a id="l02763" name="l02763"></a><span class="lineno"> 2763</span>    <span class="keywordtype">bool</span> found_shifted_index = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02764" name="l02764"></a><span class="lineno"> 2764</span>    <span class="keywordflow">for</span>( std::vector&lt;vehicle_part&gt;::reverse_iterator it = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.rbegin(); it != <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.rend(); ++it ) {</div>
<div class="line"><a id="l02765" name="l02765"></a><span class="lineno"> 2765</span>        <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classCreature.html#a2acb6e1e19bcb775748403d07d8dc3f0">get_value</a>( <span class="stringliteral">&quot;veh_index_type&quot;</span> ) == it-&gt;info().name() ) {</div>
<div class="line"><a id="l02766" name="l02766"></a><span class="lineno"> 2766</span>            ret_index = <a class="code hl_function" href="classvehicle.html#a0ebc79bba42df4fea00ee3a4e495cbde">index_of_part</a>( &amp;*it );</div>
<div class="line"><a id="l02767" name="l02767"></a><span class="lineno"> 2767</span>            found_shifted_index = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02768" name="l02768"></a><span class="lineno"> 2768</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02769" name="l02769"></a><span class="lineno"> 2769</span>        }</div>
<div class="line"><a id="l02770" name="l02770"></a><span class="lineno"> 2770</span>    }</div>
<div class="line"><a id="l02771" name="l02771"></a><span class="lineno"> 2771</span>    <span class="keywordflow">if</span>( !found_shifted_index ) {</div>
<div class="line"><a id="l02772" name="l02772"></a><span class="lineno"> 2772</span>        <span class="comment">// we are probably down to a few parts left, and things get messy here, so an alternative index maybe can&#39;t be found</span></div>
<div class="line"><a id="l02773" name="l02773"></a><span class="lineno"> 2773</span>        <span class="comment">// if loads of npcs are all removing parts at the same time.</span></div>
<div class="line"><a id="l02774" name="l02774"></a><span class="lineno"> 2774</span>        <span class="comment">// if that&#39;s the case, just bail out and give up, somebody else is probably doing the job right now anyway.</span></div>
<div class="line"><a id="l02775" name="l02775"></a><span class="lineno"> 2775</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l02776" name="l02776"></a><span class="lineno"> 2776</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02777" name="l02777"></a><span class="lineno"> 2777</span>        <span class="keywordflow">return</span> ret_index;</div>
<div class="line"><a id="l02778" name="l02778"></a><span class="lineno"> 2778</span>    }</div>
<div class="line"><a id="l02779" name="l02779"></a><span class="lineno"> 2779</span>}</div>
<div class="ttc" id="aclassCreature_html_a2acb6e1e19bcb775748403d07d8dc3f0"><div class="ttname"><a href="classCreature.html#a2acb6e1e19bcb775748403d07d8dc3f0">Creature::get_value</a></div><div class="ttdeci">std::string get_value(const std::string &amp;key) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01335">creature.cpp:1335</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature_8cpp_source.html#l01335">Creature::get_value()</a>, <a class="el" href="vehicle_8cpp_source.html#l02911">index_of_part()</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02986">veh_interact::complete_vehicle()</a>, and <a class="el" href="activity__item__handling_8cpp_source.html#l00908">vehicle_activity()</a>.</p>

</div>
</div>
<a id="a75b7a6e603fe0fe7c2d8f950c397d87e" name="a75b7a6e603fe0fe7c2d8f950c397d87e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75b7a6e603fe0fe7c2d8f950c397d87e">&#9670;&nbsp;</a></span>get_old_owner()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="clzones_8h.html#ab899db7b87cf958f079fe0f14793625b">faction_id</a> vehicle::get_old_owner </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l00833">833</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>                                         {</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#a0e6255388e73823374ec4bc9097f87c3">old_owner</a>;</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01721">old_owner</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04167">is_old_owner()</a>.</p>

</div>
</div>
<a id="a070fe172db0a71f8ab874a18a1d88d10" name="a070fe172db0a71f8ab874a18a1d88d10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a070fe172db0a71f8ab874a18a1d88d10">&#9670;&nbsp;</a></span>get_owner()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="clzones_8h.html#ab899db7b87cf958f079fe0f14793625b">faction_id</a> vehicle::get_owner </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l00830">830</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>                                     {</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#afb548b72a0c24d9f9c436f198040e052">owner</a>;</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01719">owner</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l00398">veh_interact::do_main_loop()</a>, <a class="el" href="turret_8cpp_source.html#l00519">get_targeting_npc()</a>, <a class="el" href="vehicle_8cpp_source.html#l04197">handle_potential_theft()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04155">is_owned_by()</a>.</p>

</div>
</div>
<a id="a48d4c51cef53131283d0ff6c64a2fe5f" name="a48d4c51cef53131283d0ff6c64a2fe5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48d4c51cef53131283d0ff6c64a2fe5f">&#9670;&nbsp;</a></span>get_owner_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string vehicle::get_owner_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04179">4179</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04180" name="l04180"></a><span class="lineno"> 4180</span>{</div>
<div class="line"><a id="l04181" name="l04181"></a><span class="lineno"> 4181</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;faction_manager_ptr-&gt;get( <a class="code hl_variable" href="classvehicle.html#afb548b72a0c24d9f9c436f198040e052">owner</a> ) ) {</div>
<div class="line"><a id="l04182" name="l04182"></a><span class="lineno"> 4182</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;vehicle::get_owner_name() vehicle %s has no valid nor null faction id &quot;</span>, <a class="code hl_function" href="classvehicle.html#ace5c25f3faffd8848491570cfb89f086">disp_name</a>() );</div>
<div class="line"><a id="l04183" name="l04183"></a><span class="lineno"> 4183</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;no owner&quot;</span> );</div>
<div class="line"><a id="l04184" name="l04184"></a><span class="lineno"> 4184</span>    }</div>
<div class="line"><a id="l04185" name="l04185"></a><span class="lineno"> 4185</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;faction_manager_ptr-&gt;get( <a class="code hl_variable" href="classvehicle.html#afb548b72a0c24d9f9c436f198040e052">owner</a> )-&gt;name );</div>
<div class="line"><a id="l04186" name="l04186"></a><span class="lineno"> 4186</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00029">disp_name()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, and <a class="el" href="vehicle_8h_source.html#l01719">owner</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02586">veh_interact::display_name()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04197">handle_potential_theft()</a>.</p>

</div>
</div>
<a id="a38ba5bdc99241568c83ada974ed73e07" name="a38ba5bdc99241568c83ada974ed73e07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38ba5bdc99241568c83ada974ed73e07">&#9670;&nbsp;</a></span>get_parts_at() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="structvehicle__part.html">vehicle_part</a> * &gt; vehicle::get_parts_at </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02c">part_status_flag</a>&#160;</td>
          <td class="paramname"><em>condition</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get all enabled, available, unbroken vehicle parts at specified position. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pos</td><td>position to check </td></tr>
    <tr><td class="paramname">flag</td><td>if set only flags with this part will be considered </td></tr>
    <tr><td class="paramname">condition</td><td>enum to include unabled, unavailable, and broken parts </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02580">2580</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02582" name="l02582"></a><span class="lineno"> 2582</span>{</div>
<div class="line"><a id="l02583" name="l02583"></a><span class="lineno"> 2583</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> relative_pos = <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> - <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>();</div>
<div class="line"><a id="l02584" name="l02584"></a><span class="lineno"> 2584</span>    std::vector&lt;vehicle_part *&gt; res;</div>
<div class="line"><a id="l02585" name="l02585"></a><span class="lineno"> 2585</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;e : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l02586" name="l02586"></a><span class="lineno"> 2586</span>        <span class="keywordflow">if</span>( e.precalc[ 0 ] != relative_pos ) {</div>
<div class="line"><a id="l02587" name="l02587"></a><span class="lineno"> 2587</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02588" name="l02588"></a><span class="lineno"> 2588</span>        }</div>
<div class="line"><a id="l02589" name="l02589"></a><span class="lineno"> 2589</span>        <span class="keywordflow">if</span>( !e.removed &amp;&amp;</div>
<div class="line"><a id="l02590" name="l02590"></a><span class="lineno"> 2590</span>            ( flag.empty() || e.info().has_flag( flag ) ) &amp;&amp;</div>
<div class="line"><a id="l02591" name="l02591"></a><span class="lineno"> 2591</span>            ( !( condition &amp; <a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">part_status_flag::enabled</a> ) || e.enabled ) &amp;&amp;</div>
<div class="line"><a id="l02592" name="l02592"></a><span class="lineno"> 2592</span>            ( !( condition &amp; <a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cac327b49efdca2668f28cd7b4beee54b3">part_status_flag::working</a> ) || !e.is_broken() ) ) {</div>
<div class="line"><a id="l02593" name="l02593"></a><span class="lineno"> 2593</span>            res.push_back( &amp;e );</div>
<div class="line"><a id="l02594" name="l02594"></a><span class="lineno"> 2594</span>        }</div>
<div class="line"><a id="l02595" name="l02595"></a><span class="lineno"> 2595</span>    }</div>
<div class="line"><a id="l02596" name="l02596"></a><span class="lineno"> 2596</span>    <span class="keywordflow">return</span> res;</div>
<div class="line"><a id="l02597" name="l02597"></a><span class="lineno"> 2597</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a>, <a class="el" href="vehicle_8cpp_source.html#l03101">global_pos3()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8h_source.html#l01859">pos</a>, and <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cac327b49efdca2668f28cd7b4beee54b3">working</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__item__handling_8cpp_source.html#l01273">can_do_activity_there()</a>, <a class="el" href="vehicle_8cpp_source.html#l06095">enclosed_at()</a>, <a class="el" href="vehicle_8cpp_source.html#l05168">make_active()</a>, <a class="el" href="map__extras_8cpp_source.html#l00336">MapExtras::mx_helicopter()</a>, <a class="el" href="turret_8cpp_source.html#l00068">turret_query()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="aee3df9c68359219bc6fbcbe6fcec2e48" name="aee3df9c68359219bc6fbcbe6fcec2e48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee3df9c68359219bc6fbcbe6fcec2e48">&#9670;&nbsp;</a></span>get_parts_at() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; const <a class="el" href="structvehicle__part.html">vehicle_part</a> * &gt; vehicle::get_parts_at </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02c">part_status_flag</a>&#160;</td>
          <td class="paramname"><em>condition</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02599">2599</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02602" name="l02602"></a><span class="lineno"> 2602</span>{</div>
<div class="line"><a id="l02603" name="l02603"></a><span class="lineno"> 2603</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> relative_pos = <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> - <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>();</div>
<div class="line"><a id="l02604" name="l02604"></a><span class="lineno"> 2604</span>    std::vector&lt;const vehicle_part *&gt; res;</div>
<div class="line"><a id="l02605" name="l02605"></a><span class="lineno"> 2605</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l02606" name="l02606"></a><span class="lineno"> 2606</span>        <span class="keywordflow">if</span>( e.precalc[ 0 ] != relative_pos ) {</div>
<div class="line"><a id="l02607" name="l02607"></a><span class="lineno"> 2607</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02608" name="l02608"></a><span class="lineno"> 2608</span>        }</div>
<div class="line"><a id="l02609" name="l02609"></a><span class="lineno"> 2609</span>        <span class="keywordflow">if</span>( !e.removed &amp;&amp;</div>
<div class="line"><a id="l02610" name="l02610"></a><span class="lineno"> 2610</span>            ( flag.empty() || e.info().has_flag( flag ) ) &amp;&amp;</div>
<div class="line"><a id="l02611" name="l02611"></a><span class="lineno"> 2611</span>            ( !( condition &amp; <a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">part_status_flag::enabled</a> ) || e.enabled ) &amp;&amp;</div>
<div class="line"><a id="l02612" name="l02612"></a><span class="lineno"> 2612</span>            ( !( condition &amp; <a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cac327b49efdca2668f28cd7b4beee54b3">part_status_flag::working</a> ) || !e.is_broken() ) ) {</div>
<div class="line"><a id="l02613" name="l02613"></a><span class="lineno"> 2613</span>            res.push_back( &amp;e );</div>
<div class="line"><a id="l02614" name="l02614"></a><span class="lineno"> 2614</span>        }</div>
<div class="line"><a id="l02615" name="l02615"></a><span class="lineno"> 2615</span>    }</div>
<div class="line"><a id="l02616" name="l02616"></a><span class="lineno"> 2616</span>    <span class="keywordflow">return</span> res;</div>
<div class="line"><a id="l02617" name="l02617"></a><span class="lineno"> 2617</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a>, <a class="el" href="vehicle_8cpp_source.html#l03101">global_pos3()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8h_source.html#l01859">pos</a>, and <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cac327b49efdca2668f28cd7b4beee54b3">working</a>.</p>

</div>
</div>
<a id="a7465f91fe80f1cf5df317d2ccebeaae7" name="a7465f91fe80f1cf5df317d2ccebeaae7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7465f91fe80f1cf5df317d2ccebeaae7">&#9670;&nbsp;</a></span>get_parts_including_carried() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classvehicle__part__with__feature__range.html">vehicle_part_with_feature_range</a>&lt; std::string &gt; vehicle::get_parts_including_carried </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>feature</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Yields a range of parts of this vehicle that each have the given feature and are not broken or removed. </p>
<p >The enabled status of the part is ignored. </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02694">2694</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02696" name="l02696"></a><span class="lineno"> 2696</span>{</div>
<div class="line"><a id="l02697" name="l02697"></a><span class="lineno"> 2697</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="classvehicle__part__with__feature__range.html">vehicle_part_with_feature_range&lt;std::string&gt;</a>( <span class="keyword">const_cast&lt;</span><a class="code hl_class" href="classvehicle.html">vehicle</a> &amp;<span class="keyword">&gt;</span>( *<span class="keyword">this</span> ),</div>
<div class="line"><a id="l02698" name="l02698"></a><span class="lineno"> 2698</span>            <a class="code hl_function" href="namespaceavatar__action.html#a76ba74774376a08222b8cdcce08f7304">std::move</a>( <a class="code hl_function" href="editmap_8cpp.html#a14e7362458bb23f8c57511c0d71d3c22">feature</a> ), <a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cac327b49efdca2668f28cd7b4beee54b3">part_status_flag::working</a> );</div>
<div class="line"><a id="l02699" name="l02699"></a><span class="lineno"> 2699</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="editmap_8cpp.html#a14e7362458bb23f8c57511c0d71d3c22">feature()</a>, <a class="el" href="avatar__action_8cpp_source.html#l00090">avatar_action::move()</a>, and <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cac327b49efdca2668f28cd7b4beee54b3">working</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l00386">init_state()</a>, and <a class="el" href="map_8cpp_source.html#l04677">map::process_items_in_vehicle()</a>.</p>

</div>
</div>
<a id="a1c3e2d419018f6ca5cf6a2b17fc8fb98" name="a1c3e2d419018f6ca5cf6a2b17fc8fb98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c3e2d419018f6ca5cf6a2b17fc8fb98">&#9670;&nbsp;</a></span>get_parts_including_carried() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classvehicle__part__with__feature__range.html">vehicle_part_with_feature_range</a>&lt; <a class="el" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307e">vpart_bitflags</a> &gt; vehicle::get_parts_including_carried </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307e">vpart_bitflags</a>&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02701">2701</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02703" name="l02703"></a><span class="lineno"> 2703</span>{</div>
<div class="line"><a id="l02704" name="l02704"></a><span class="lineno"> 2704</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="classvehicle__part__with__feature__range.html">vehicle_part_with_feature_range&lt;vpart_bitflags&gt;</a>( <span class="keyword">const_cast&lt;</span><a class="code hl_class" href="classvehicle.html">vehicle</a> &amp;<span class="keyword">&gt;</span>( *<span class="keyword">this</span> ), <a class="code hl_function" href="editmap_8cpp.html#a14e7362458bb23f8c57511c0d71d3c22">feature</a>,</div>
<div class="line"><a id="l02705" name="l02705"></a><span class="lineno"> 2705</span>            <a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cac327b49efdca2668f28cd7b4beee54b3">part_status_flag::working</a> );</div>
<div class="line"><a id="l02706" name="l02706"></a><span class="lineno"> 2706</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="editmap_8cpp.html#a14e7362458bb23f8c57511c0d71d3c22">feature()</a>, and <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cac327b49efdca2668f28cd7b4beee54b3">working</a>.</p>

</div>
</div>
<a id="af02a0418851ddf50fcc810951d77b076" name="af02a0418851ddf50fcc810951d77b076"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af02a0418851ddf50fcc810951d77b076">&#9670;&nbsp;</a></span>get_passenger()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classplayer.html">player</a> * vehicle::get_passenger </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03073">3073</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03074" name="l03074"></a><span class="lineno"> 3074</span>{</div>
<div class="line"><a id="l03075" name="l03075"></a><span class="lineno"> 3075</span>    p = <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( p, <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eaebc2a9d9402e04973e4ee469daddeda5">VPFLAG_BOARDABLE</a>, <span class="keyword">false</span> );</div>
<div class="line"><a id="l03076" name="l03076"></a><span class="lineno"> 3076</span>    <span class="keywordflow">if</span>( p &gt;= 0 &amp;&amp; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].has_flag( <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaacbdd8bab66369a907eb2edbd4b209752">vehicle_part::passenger_flag</a> ) ) {</div>
<div class="line"><a id="l03077" name="l03077"></a><span class="lineno"> 3077</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_by_id&lt;<a class="code hl_class" href="classplayer.html">player</a>&gt;( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].passenger_id );</div>
<div class="line"><a id="l03078" name="l03078"></a><span class="lineno"> 3078</span>    }</div>
<div class="line"><a id="l03079" name="l03079"></a><span class="lineno"> 3079</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l03080" name="l03080"></a><span class="lineno"> 3080</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l02518">part_with_feature()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8h_source.html#l00192">vehicle_part::passenger_flag</a>, and <a class="el" href="veh__type_8h_source.html#l00039">VPFLAG_BOARDABLE</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, <a class="el" href="vehicle_8cpp_source.html#l06794">calc_mass_center()</a>, <a class="el" href="npcmove_8cpp_source.html#l00952">npc::execute_action()</a>, <a class="el" href="vehicle_8cpp_source.html#l06592">vpart_reference::get_passenger()</a>, <a class="el" href="vehicle_8cpp_source.html#l02934">part_displayed_at()</a>, and <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>.</p>

</div>
</div>
<a id="ab266c3250ffece69b5c2ddc9897d80d3" name="ab266c3250ffece69b5c2ddc9897d80d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab266c3250ffece69b5c2ddc9897d80d3">&#9670;&nbsp;</a></span>get_pet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmonster.html">monster</a> * vehicle::get_pet </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03082">3082</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03083" name="l03083"></a><span class="lineno"> 3083</span>{</div>
<div class="line"><a id="l03084" name="l03084"></a><span class="lineno"> 3084</span>    p = <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( p, <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eaebc2a9d9402e04973e4ee469daddeda5">VPFLAG_BOARDABLE</a>, <span class="keyword">false</span> );</div>
<div class="line"><a id="l03085" name="l03085"></a><span class="lineno"> 3085</span>    <span class="keywordflow">if</span>( p &gt;= 0 ) {</div>
<div class="line"><a id="l03086" name="l03086"></a><span class="lineno"> 3086</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at&lt;<a class="code hl_class" href="classmonster.html">monster</a>&gt;( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( p ), true );</div>
<div class="line"><a id="l03087" name="l03087"></a><span class="lineno"> 3087</span>    }</div>
<div class="line"><a id="l03088" name="l03088"></a><span class="lineno"> 3088</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l03089" name="l03089"></a><span class="lineno"> 3089</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l02518">part_with_feature()</a>, and <a class="el" href="veh__type_8h_source.html#l00039">VPFLAG_BOARDABLE</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l00683">activate_animal_follow()</a>, <a class="el" href="vehicle_8cpp_source.html#l06437">damage_direct()</a>, <a class="el" href="vehicle_8cpp_source.html#l00816">drive_to_local_target()</a>, <a class="el" href="grab_8cpp_source.html#l00021">game::grabbed_veh_move()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00919">has_harnessed_animal()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00470">part_collision()</a>, <a class="el" href="vehicle_8cpp_source.html#l01149">part_vpower_w()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00933">selfdrive()</a>, <a class="el" href="vehicle_8cpp_source.html#l04284">steering_effectiveness()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>.</p>

</div>
</div>
<a id="a2e80dafb2c03147b569688658843d9d6" name="a2e80dafb2c03147b569688658843d9d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e80dafb2c03147b569688658843d9d6">&#9670;&nbsp;</a></span>get_points()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt; &amp; vehicle::get_points </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>force_refresh</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06568">6568</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06569" name="l06569"></a><span class="lineno"> 6569</span>{</div>
<div class="line"><a id="l06570" name="l06570"></a><span class="lineno"> 6570</span>    <span class="keywordflow">if</span>( force_refresh || <a class="code hl_variable" href="classvehicle.html#a7769b4dac262f6ff8bd328eb1b8f022c">occupied_cache_time</a> != <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> ) {</div>
<div class="line"><a id="l06571" name="l06571"></a><span class="lineno"> 6571</span>        <a class="code hl_variable" href="classvehicle.html#a7769b4dac262f6ff8bd328eb1b8f022c">occupied_cache_time</a> = <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>;</div>
<div class="line"><a id="l06572" name="l06572"></a><span class="lineno"> 6572</span>        <a class="code hl_variable" href="classvehicle.html#af3b0c13142af91fa64a5db922af2669a">occupied_points</a>.clear();</div>
<div class="line"><a id="l06573" name="l06573"></a><span class="lineno"> 6573</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;p : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l06574" name="l06574"></a><span class="lineno"> 6574</span>            <a class="code hl_variable" href="classvehicle.html#af3b0c13142af91fa64a5db922af2669a">occupied_points</a>.insert( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( p ) );</div>
<div class="line"><a id="l06575" name="l06575"></a><span class="lineno"> 6575</span>        }</div>
<div class="line"><a id="l06576" name="l06576"></a><span class="lineno"> 6576</span>    }</div>
<div class="line"><a id="l06577" name="l06577"></a><span class="lineno"> 6577</span> </div>
<div class="line"><a id="l06578" name="l06578"></a><span class="lineno"> 6578</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#af3b0c13142af91fa64a5db922af2669a">occupied_points</a>;</div>
<div class="line"><a id="l06579" name="l06579"></a><span class="lineno"> 6579</span>}</div>
<div class="ttc" id="aclassvehicle_html_af3b0c13142af91fa64a5db922af2669a"><div class="ttname"><a href="classvehicle.html#af3b0c13142af91fa64a5db922af2669a">vehicle::occupied_points</a></div><div class="ttdeci">std::set&lt; tripoint &gt; occupied_points</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01731">vehicle.h:1731</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8h_source.html#l01849">occupied_cache_time</a>, <a class="el" href="vehicle_8h_source.html#l01731">occupied_points</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="creature_8cpp_source.html#l00330">Creature::auto_find_hostile_target()</a>, <a class="el" href="map__extras_8cpp_source.html#l02069">MapExtras::burned_ground_parser()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01461">check_falling_or_floating()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01031">check_heli_ascend()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00996">check_heli_descend()</a>, <a class="el" href="game_8cpp_source.html#l05443">game::control_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l06849">get_bounding_box()</a>, <a class="el" href="overmap__ui_8cpp_source.html#l01830">overmap_ui::get_overmap_path_to()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="map__extras_8cpp_source.html#l02199">MapExtras::mx_burned_ground()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00470">part_collision()</a>, <a class="el" href="map_8cpp_source.html#l00496">sees_veh()</a>, <a class="el" href="veh__interact_8cpp_source.html#l00111">veh_interact::serialize_activity()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00338">stop()</a>, <a class="el" href="vehicle_8cpp_source.html#l01622">try_to_rack_nearby_vehicle()</a>, and <a class="el" href="activity__item__handling_8cpp_source.html#l00908">vehicle_activity()</a>.</p>

</div>
</div>
<a id="a574a15ae1c2572a6dafa55be0c7f3b25" name="a574a15ae1c2572a6dafa55be0c7f3b25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a574a15ae1c2572a6dafa55be0c7f3b25">&#9670;&nbsp;</a></span>get_printable_fuel_types()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &gt; vehicle::get_printable_fuel_types </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns an array of fuel types that can be printed. </p>
<dl class="section return"><dt>Returns</dt><dd>An array of printable fuel type ids </dd></dl>

<p class="definition">Definition at line <a class="el" href="vehicle__display_8cpp_source.html#l00314">314</a> of file <a class="el" href="vehicle__display_8cpp_source.html">vehicle_display.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>{</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>    std::set&lt;itype_id&gt; opts;</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;pt : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>        <span class="keywordflow">if</span>( pt.is_fuel_store() &amp;&amp; !pt.ammo_current().is_null() ) {</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>            opts.emplace( pt.ammo_current() );</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>        }</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>    }</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span> </div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>    std::vector&lt;itype_id&gt; res( opts.begin(), opts.end() );</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span> </div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>    std::sort( res.begin(), res.end(), [&amp;]( <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> &amp; lhs, <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> &amp; rhs ) {</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>        return basic_consumption( rhs ) &lt; basic_consumption( lhs );</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>    } );</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span> </div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>    <span class="keywordflow">return</span> res;</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l00873">veh_interact::move_fuel_cursor()</a>, and <a class="el" href="vehicle__display_8cpp_source.html#l00343">print_fuel_indicators()</a>.</p>

</div>
</div>
<a id="a8df35c3f329b78ad0b912181f9e479e5" name="a8df35c3f329b78ad0b912181f9e479e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8df35c3f329b78ad0b912181f9e479e5">&#9670;&nbsp;</a></span>get_riders()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="structrider__data.html">rider_data</a> &gt; vehicle::get_riders </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03058">3058</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03059" name="l03059"></a><span class="lineno"> 3059</span>{</div>
<div class="line"><a id="l03060" name="l03060"></a><span class="lineno"> 3060</span>    std::vector&lt;rider_data&gt; res;</div>
<div class="line"><a id="l03061" name="l03061"></a><span class="lineno"> 3061</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">get_avail_parts</a>( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eaebc2a9d9402e04973e4ee469daddeda5">VPFLAG_BOARDABLE</a> ) ) {</div>
<div class="line"><a id="l03062" name="l03062"></a><span class="lineno"> 3062</span>        <a class="code hl_class" href="classCreature.html">Creature</a> *rider = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at( vp.pos() );</div>
<div class="line"><a id="l03063" name="l03063"></a><span class="lineno"> 3063</span>        <span class="keywordflow">if</span>( rider ) {</div>
<div class="line"><a id="l03064" name="l03064"></a><span class="lineno"> 3064</span>            <a class="code hl_struct" href="structrider__data.html">rider_data</a> r;</div>
<div class="line"><a id="l03065" name="l03065"></a><span class="lineno"> 3065</span>            r.<a class="code hl_variable" href="structrider__data.html#a9ae66253eae863fc4bc841f955faf41b">prt</a> = vp.part_index();</div>
<div class="line"><a id="l03066" name="l03066"></a><span class="lineno"> 3066</span>            r.<a class="code hl_variable" href="structrider__data.html#ab0573d036860b6da4dc0a3641c61591e">psg</a> = rider;</div>
<div class="line"><a id="l03067" name="l03067"></a><span class="lineno"> 3067</span>            res.emplace_back( r );</div>
<div class="line"><a id="l03068" name="l03068"></a><span class="lineno"> 3068</span>        }</div>
<div class="line"><a id="l03069" name="l03069"></a><span class="lineno"> 3069</span>    }</div>
<div class="line"><a id="l03070" name="l03070"></a><span class="lineno"> 3070</span>    <span class="keywordflow">return</span> res;</div>
<div class="line"><a id="l03071" name="l03071"></a><span class="lineno"> 3071</span>}</div>
<div class="ttc" id="astructrider__data_html"><div class="ttname"><a href="structrider__data.html">rider_data</a></div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00070">vehicle.h:70</a></div></div>
<div class="ttc" id="astructrider__data_html_a9ae66253eae863fc4bc841f955faf41b"><div class="ttname"><a href="structrider__data.html#a9ae66253eae863fc4bc841f955faf41b">rider_data::prt</a></div><div class="ttdeci">int prt</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00072">vehicle.h:72</a></div></div>
<div class="ttc" id="astructrider__data_html_ab0573d036860b6da4dc0a3641c61591e"><div class="ttname"><a href="structrider__data.html#ab0573d036860b6da4dc0a3641c61591e">rider_data::psg</a></div><div class="ttdeci">Creature * psg</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00071">vehicle.h:71</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l02678">get_avail_parts()</a>, <a class="el" href="vehicle_8h_source.html#l00072">rider_data::prt</a>, <a class="el" href="vehicle_8h_source.html#l00071">rider_data::psg</a>, and <a class="el" href="veh__type_8h_source.html#l00039">VPFLAG_BOARDABLE</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l01098">map::displace_vehicle()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l01565">map::shake_vehicle()</a>.</p>

</div>
</div>
<a id="afa21321fd8f1d85fbc252aad2c1156da" name="afa21321fd8f1d85fbc252aad2c1156da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa21321fd8f1d85fbc252aad2c1156da">&#9670;&nbsp;</a></span>get_targeting_npc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classnpc.html">npc</a> vehicle::get_targeting_npc </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;&#160;</td>
          <td class="paramname"><em>pt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="turret_8cpp_source.html#l00519">519</a> of file <a class="el" href="turret_8cpp_source.html">turret.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>{</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>    <span class="comment">// Make a fake NPC to represent the targeting system</span></div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>    <a class="code hl_class" href="classnpc.html">npc</a> cpu;</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>    cpu.<a class="code hl_function" href="classCreature.html#ad76a5de4e1a09c774c1fea1c3405075b">set_fake</a>( <span class="keyword">true</span> );</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>    cpu.<a class="code hl_variable" href="classCharacter.html#a6592c35167738421f3e04ca8808d37db">name</a> = <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s turret&quot;</span> ), pt.<a class="code hl_function" href="structvehicle__part.html#a25fd3f3b373aafdda4dc9b057172e492">get_base</a>().<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>( 1 ) );</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>    <span class="comment">// turrets are subject only to recoil_vehicle()</span></div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>    cpu.<a class="code hl_variable" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> = 0;</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span> </div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>    <span class="comment">// These might all be affected by vehicle part damage, weather effects, etc.</span></div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>    cpu.<a class="code hl_function" href="classCharacter.html#aac28618b387cf4ce36252e47699938d5">set_skill_level</a>( pt.<a class="code hl_function" href="structvehicle__part.html#a25fd3f3b373aafdda4dc9b057172e492">get_base</a>().<a class="code hl_function" href="classitem.html#a3d8542661f2e2a82e8cb3792584912f3">gun_skill</a>(), 8 );</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>    cpu.<a class="code hl_function" href="classCharacter.html#aac28618b387cf4ce36252e47699938d5">set_skill_level</a>( <a class="code hl_enumvalue" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4ad38d4c395846ba5367acc27e08bc248d">skill_id</a>( <span class="stringliteral">&quot;gun&quot;</span> ), 4 );</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span> </div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>    cpu.<a class="code hl_variable" href="classCharacter.html#a26369a0a81eef76cfe75214d22ed32b4">str_cur</a> = 16;</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>    cpu.<a class="code hl_variable" href="classCharacter.html#a4065ac02745befad248425d307b71849">dex_cur</a> = 8;</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>    cpu.<a class="code hl_variable" href="classCharacter.html#ad8a2bb942a756787aced3b83319176ff">per_cur</a> = 12;</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>    cpu.<a class="code hl_function" href="classnpc.html#a9ab738e033b07c3f40e3f77097503760">setpos</a>( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( pt ) );</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>    <span class="comment">// Assume vehicle turrets are friendly to the player.</span></div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>    cpu.<a class="code hl_function" href="classnpc.html#a53c9eb784312e0594c5a9922668d630e">set_attitude</a>( <a class="code hl_enumvalue" href="npc_8h.html#a0b36e2ae8f588616c1fd7a3788452cd4aee568a181e2bf1f4ef5122e0674b162d">NPCATT_FOLLOW</a> );</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>    cpu.<a class="code hl_function" href="classnpc.html#ae4ee8462177eb0d0d5b4447b74d436d8">set_fac</a>( <a class="code hl_function" href="classvehicle.html#a070fe172db0a71f8ab874a18a1d88d10">get_owner</a>() );</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>    <span class="keywordflow">return</span> cpu;</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>}</div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4ad38d4c395846ba5367acc27e08bc248d"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4ad38d4c395846ba5367acc27e08bc248d">cata_variant_type::skill_id</a></div><div class="ttdeci">@ skill_id</div></div>
<div class="ttc" id="aclassCharacter_html_a057d68671b298012a18f4e289b39935d"><div class="ttname"><a href="classCharacter.html#a057d68671b298012a18f4e289b39935d">Character::recoil</a></div><div class="ttdeci">double recoil</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00618">character.h:618</a></div></div>
<div class="ttc" id="aclassCharacter_html_a26369a0a81eef76cfe75214d22ed32b4"><div class="ttname"><a href="classCharacter.html#a26369a0a81eef76cfe75214d22ed32b4">Character::str_cur</a></div><div class="ttdeci">int str_cur</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00304">character.h:304</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4065ac02745befad248425d307b71849"><div class="ttname"><a href="classCharacter.html#a4065ac02745befad248425d307b71849">Character::dex_cur</a></div><div class="ttdeci">int dex_cur</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00305">character.h:305</a></div></div>
<div class="ttc" id="aclassCharacter_html_aac28618b387cf4ce36252e47699938d5"><div class="ttname"><a href="classCharacter.html#aac28618b387cf4ce36252e47699938d5">Character::set_skill_level</a></div><div class="ttdeci">void set_skill_level(const skill_id &amp;ident, int level)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03337">character.cpp:3337</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad8a2bb942a756787aced3b83319176ff"><div class="ttname"><a href="classCharacter.html#ad8a2bb942a756787aced3b83319176ff">Character::per_cur</a></div><div class="ttdeci">int per_cur</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00307">character.h:307</a></div></div>
<div class="ttc" id="aclassCreature_html_ad76a5de4e1a09c774c1fea1c3405075b"><div class="ttname"><a href="classCreature.html#ad76a5de4e1a09c774c1fea1c3405075b">Creature::set_fake</a></div><div class="ttdeci">virtual void set_fake(bool fake_value)</div><div class="ttdoc">Sets a Creature's fake boolean.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00969">creature.cpp:969</a></div></div>
<div class="ttc" id="aclassitem_html_a3d8542661f2e2a82e8cb3792584912f3"><div class="ttname"><a href="classitem.html#a3d8542661f2e2a82e8cb3792584912f3">item::gun_skill</a></div><div class="ttdeci">skill_id gun_skill() const</div><div class="ttdoc">The skill used to operate the gun.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07026">item.cpp:7026</a></div></div>
<div class="ttc" id="aclassitem_html_a7e78e26dcf9b357cda769c3ca2938eda"><div class="ttname"><a href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">item::tname</a></div><div class="ttdeci">std::string tname(unsigned int quantity=1, bool with_prefix=true, unsigned int truncate=0) const</div><div class="ttdoc">Return the (translated) item name.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04440">item.cpp:4440</a></div></div>
<div class="ttc" id="aclassnpc_html_a53c9eb784312e0594c5a9922668d630e"><div class="ttname"><a href="classnpc.html#a53c9eb784312e0594c5a9922668d630e">npc::set_attitude</a></div><div class="ttdeci">void set_attitude(npc_attitude new_attitude)</div><div class="ttdef"><b>Definition:</b> <a href="npc_8cpp_source.html#l03141">npc.cpp:3141</a></div></div>
<div class="ttc" id="aclassnpc_html_a9ab738e033b07c3f40e3f77097503760"><div class="ttname"><a href="classnpc.html#a9ab738e033b07c3f40e3f77097503760">npc::setpos</a></div><div class="ttdeci">void setpos(const tripoint &amp;pos) override</div><div class="ttdoc">Note: this places NPC on a given position in CURRENT MAP coordinates.</div><div class="ttdef"><b>Definition:</b> <a href="npc_8cpp_source.html#l00680">npc.cpp:680</a></div></div>
<div class="ttc" id="aclassnpc_html_ae4ee8462177eb0d0d5b4447b74d436d8"><div class="ttname"><a href="classnpc.html#ae4ee8462177eb0d0d5b4447b74d436d8">npc::set_fac</a></div><div class="ttdeci">void set_fac(const faction_id &amp;id)</div><div class="ttdef"><b>Definition:</b> <a href="npc_8cpp_source.html#l00465">npc.cpp:465</a></div></div>
<div class="ttc" id="aclassvehicle_html_a070fe172db0a71f8ab874a18a1d88d10"><div class="ttname"><a href="classvehicle.html#a070fe172db0a71f8ab874a18a1d88d10">vehicle::get_owner</a></div><div class="ttdeci">faction_id get_owner() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00830">vehicle.h:830</a></div></div>
<div class="ttc" id="anpc_8h_html_a0b36e2ae8f588616c1fd7a3788452cd4aee568a181e2bf1f4ef5122e0674b162d"><div class="ttname"><a href="npc_8h.html#a0b36e2ae8f588616c1fd7a3788452cd4aee568a181e2bf1f4ef5122e0674b162d">NPCATT_FOLLOW</a></div><div class="ttdeci">@ NPCATT_FOLLOW</div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l00084">npc.h:84</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a25fd3f3b373aafdda4dc9b057172e492"><div class="ttname"><a href="structvehicle__part.html#a25fd3f3b373aafdda4dc9b057172e492">vehicle_part::get_base</a></div><div class="ttdeci">const item &amp; get_base() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00057">vehicle_part.cpp:57</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="character_8h_source.html#l00305">Character::dex_cur</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00057">vehicle_part::get_base()</a>, <a class="el" href="vehicle_8h_source.html#l00830">get_owner()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="item_8cpp_source.html#l07026">item::gun_skill()</a>, <a class="el" href="character_8h_source.html#l01568">Character::name</a>, <a class="el" href="npc_8h_source.html#l00084">NPCATT_FOLLOW</a>, <a class="el" href="character_8h_source.html#l00307">Character::per_cur</a>, <a class="el" href="character_8h_source.html#l00618">Character::recoil</a>, <a class="el" href="npc_8cpp_source.html#l03141">npc::set_attitude()</a>, <a class="el" href="npc_8cpp_source.html#l00465">npc::set_fac()</a>, <a class="el" href="creature_8cpp_source.html#l00969">Creature::set_fake()</a>, <a class="el" href="character_8cpp_source.html#l03337">Character::set_skill_level()</a>, <a class="el" href="npc_8cpp_source.html#l00680">npc::setpos()</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4ad38d4c395846ba5367acc27e08bc248d">skill_id</a>, <a class="el" href="character_8h_source.html#l00304">Character::str_cur</a>, <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>, and <a class="el" href="item_8cpp_source.html#l04440">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="turret_8cpp_source.html#l00542">automatic_fire_turret()</a>, and <a class="el" href="turret_8cpp_source.html#l00365">turrets_aim_and_fire()</a>.</p>

</div>
</div>
<a id="adb9be9ceedf5b5922879fad1646da8fb" name="adb9be9ceedf5b5922879fad1646da8fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb9be9ceedf5b5922879fad1646da8fb">&#9670;&nbsp;</a></span>get_tow_part()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::get_tow_part </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05874">5874</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05875" name="l05875"></a><span class="lineno"> 5875</span>{</div>
<div class="line"><a id="l05876" name="l05876"></a><span class="lineno"> 5876</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a397b40aa92dd1fd09ee592aa279bc656">get_all_parts</a>() ) {</div>
<div class="line"><a id="l05877" name="l05877"></a><span class="lineno"> 5877</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> p = vp.part_index();</div>
<div class="line"><a id="l05878" name="l05878"></a><span class="lineno"> 5878</span>        <span class="keywordflow">if</span>( vp.part().removed ) {</div>
<div class="line"><a id="l05879" name="l05879"></a><span class="lineno"> 5879</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05880" name="l05880"></a><span class="lineno"> 5880</span>        }</div>
<div class="line"><a id="l05881" name="l05881"></a><span class="lineno"> 5881</span> </div>
<div class="line"><a id="l05882" name="l05882"></a><span class="lineno"> 5882</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( p, <span class="stringliteral">&quot;TOW_CABLE&quot;</span>, <span class="keyword">true</span> ) &gt;= 0 &amp;&amp; vp.part().is_available() ) {</div>
<div class="line"><a id="l05883" name="l05883"></a><span class="lineno"> 5883</span>            <span class="keywordflow">return</span> p;</div>
<div class="line"><a id="l05884" name="l05884"></a><span class="lineno"> 5884</span>        }</div>
<div class="line"><a id="l05885" name="l05885"></a><span class="lineno"> 5885</span>    }</div>
<div class="line"><a id="l05886" name="l05886"></a><span class="lineno"> 5886</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l05887" name="l05887"></a><span class="lineno"> 5887</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l06882">get_all_parts()</a>, and <a class="el" href="vehicle_8cpp_source.html#l02518">part_with_feature()</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02986">veh_interact::complete_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l05745">do_towing_move()</a>, <a class="el" href="vehicle_8cpp_source.html#l06005">no_towing_slack()</a>, <a class="el" href="savegame__json_8cpp_source.html#l02768">serialize()</a>, <a class="el" href="vehicle_8cpp_source.html#l05906">set_tow_directions()</a>, <a class="el" href="vehicle_8cpp_source.html#l06067">shed_loose_parts()</a>, and <a class="el" href="vehicle_8cpp_source.html#l05973">tow_cable_too_far()</a>.</p>

</div>
</div>
<a id="a97363e7e97605021a562f60187205e11" name="a97363e7e97605021a562f60187205e11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97363e7e97605021a562f60187205e11">&#9670;&nbsp;</a></span>get_z_change()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::get_z_change </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04022">4022</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04023" name="l04023"></a><span class="lineno"> 4023</span>{</div>
<div class="line"><a id="l04024" name="l04024"></a><span class="lineno"> 4024</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#aeb404e5f18eee80d104a7bb0680ac169">requested_z_change</a>;</div>
<div class="line"><a id="l04025" name="l04025"></a><span class="lineno"> 4025</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01918">requested_z_change</a>.</p>

</div>
</div>
<a id="aec200af03ac3aa401024514d9cfd60ee" name="aec200af03ac3aa401024514d9cfd60ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec200af03ac3aa401024514d9cfd60ee">&#9670;&nbsp;</a></span>global_omt_location()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="coordinates_8h.html#a383a8345c0282c087ef788e4421c3ded">tripoint_abs_omt</a> vehicle::global_omt_location </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03096">3096</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03097" name="l03097"></a><span class="lineno"> 3097</span>{</div>
<div class="line"><a id="l03098" name="l03098"></a><span class="lineno"> 3098</span>    <span class="keywordflow">return</span> project_to&lt;coords::omt&gt;( <a class="code hl_function" href="classvehicle.html#a789289c4179f7677e45cb100ff5ffb9a">global_square_location</a>() );</div>
<div class="line"><a id="l03099" name="l03099"></a><span class="lineno"> 3099</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l03091">global_square_location()</a>.</p>

<p class="reference">Referenced by <a class="el" href="overmapbuffer_8cpp_source.html#l00609">overmapbuffer::add_vehicle()</a>, <a class="el" href="overmap__ui_8cpp_source.html#l01830">overmap_ui::get_overmap_path_to()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l00598">overmapbuffer::remove_vehicle()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04536">total_wind_epower_w()</a>.</p>

</div>
</div>
<a id="ae8132c34a1ea24866889e6e599796adc" name="ae8132c34a1ea24866889e6e599796adc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8132c34a1ea24866889e6e599796adc">&#9670;&nbsp;</a></span>global_part_pos3() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtripoint.html">tripoint</a> vehicle::global_part_pos3 </td>
          <td>(</td>
          <td class="paramtype">const int &amp;&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the coordinates of the studied part of the vehicle. </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03106">3106</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03107" name="l03107"></a><span class="lineno"> 3107</span>{</div>
<div class="line"><a id="l03108" name="l03108"></a><span class="lineno"> 3108</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ index ] );</div>
<div class="line"><a id="l03109" name="l03109"></a><span class="lineno"> 3109</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05209">add_item()</a>, <a class="el" href="map_8cpp_source.html#l00261">map::add_vehicle_to_cache()</a>, <a class="el" href="mapgen_8cpp_source.html#l05671">map::add_vehicle_to_map()</a>, <a class="el" href="turret_8cpp_source.html#l00542">automatic_fire_turret()</a>, <a class="el" href="vehicle_8cpp_source.html#l01126">backfire()</a>, <a class="el" href="vehicle_8cpp_source.html#l06338">break_off()</a>, <a class="el" href="lightmap_8cpp_source.html#l01224">map::build_seen_cache()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01493">can_close()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02986">veh_interact::complete_vehicle()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00173">control_doors()</a>, <a class="el" href="vehicle_8cpp_source.html#l06437">damage_direct()</a>, <a class="el" href="vehicle_8cpp_source.html#l04973">discharge_battery()</a>, <a class="el" href="map_8cpp_source.html#l01098">map::displace_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l05745">do_towing_move()</a>, <a class="el" href="map_8cpp_source.html#l07991">map::do_vehicle_caching()</a>, <a class="el" href="vehicle_8cpp_source.html#l03246">drain()</a>, <a class="el" href="vehicle_8cpp_source.html#l05416">dump_items_from_part()</a>, <a class="el" href="npcmove_8cpp_source.html#l00952">npc::execute_action()</a>, <a class="el" href="vehicle_8cpp_source.html#l06409">explode_fuel()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00801">fold_up()</a>, <a class="el" href="lightmap_8cpp_source.html#l00369">map::generate_lightmap()</a>, <a class="el" href="vehicle_8cpp_source.html#l05282">get_items()</a>, <a class="el" href="vehicle_8cpp_source.html#l03082">get_pet()</a>, <a class="el" href="vehicle_8cpp_source.html#l06568">get_points()</a>, <a class="el" href="turret_8cpp_source.html#l00519">get_targeting_npc()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="grab_8cpp_source.html#l00021">game::grabbed_veh_move()</a>, <a class="el" href="turret_8cpp_source.html#l00202">turret_data::in_range()</a>, <a class="el" href="vehicle_8cpp_source.html#l05939">invalidate_towing()</a>, <a class="el" href="vehicle_8cpp_source.html#l06500">leak_fuel()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01413">level_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l01654">merge_rackable_vehicle()</a>, <a class="el" href="ranged_8cpp_source.html#l00464">target_handler::mode_turrets()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l06005">no_towing_slack()</a>, <a class="el" href="item__location_8cpp_source.html#l00479">item_location::impl::item_on_vehicle::obtain_cost()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01380">operate_scoop()</a>, <a class="el" href="vehicle_8cpp_source.html#l01940">part_removal_cleanup()</a>, <a class="el" href="vehicle_8cpp_source.html#l06602">vpart_position::pos()</a>, <a class="el" href="item__location_8cpp_source.html#l00445">item_location::impl::item_on_vehicle::position()</a>, <a class="el" href="vehicle_8cpp_source.html#l04619">power_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l06764">process_emitters()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00160">put_into_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l06971">refresh_zones()</a>, <a class="el" href="vehicle_8cpp_source.html#l02004">remove_carried_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l06035">remove_remote_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l00151">DefaultRemovePartHandler::removed()</a>, <a class="el" href="savegame__json_8cpp_source.html#l02768">serialize()</a>, <a class="el" href="handle__liquid_8cpp_source.html#l00044">serialize_liquid_source()</a>, <a class="el" href="handle__liquid_8cpp_source.html#l00072">serialize_liquid_target()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01565">map::shake_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l06067">shed_loose_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l05114">slow_leak()</a>, <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00918">start_engine()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01055">start_engines()</a>, <a class="el" href="faction__camp_8cpp_source.html#l02446">basecamp::start_garage_chop()</a>, <a class="el" href="vehicle_8cpp_source.html#l04514">total_solar_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04561">total_water_wheel_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04536">total_wind_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l05973">tow_cable_too_far()</a>, <a class="el" href="vehicle_8cpp_source.html#l01622">try_to_rack_nearby_vehicle()</a>, <a class="el" href="turret_8cpp_source.html#l00382">turrets_aim()</a>, <a class="el" href="turret_8cpp_source.html#l00365">turrets_aim_and_fire()</a>, <a class="el" href="turret_8cpp_source.html#l00481">turrets_set_mode()</a>, <a class="el" href="turret_8cpp_source.html#l00425">turrets_set_targeting()</a>, <a class="el" href="vehicle_8cpp_source.html#l06165">unboard_all()</a>, <a class="el" href="vehicle_8cpp_source.html#l06657">update_time()</a>, <a class="el" href="ranged_8cpp_source.html#l02902">target_ui::update_turrets_in_range()</a>, <a class="el" href="map_8cpp_source.html#l07953">vehicle_caching_internal()</a>, <a class="el" href="map_8cpp_source.html#l07982">vehicle_caching_internal_above()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l01501">map::vehicle_wheel_traction()</a>.</p>

</div>
</div>
<a id="a6c8497dcb7aebc85a5c56780c1e90f49" name="a6c8497dcb7aebc85a5c56780c1e90f49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c8497dcb7aebc85a5c56780c1e90f49">&#9670;&nbsp;</a></span>global_part_pos3() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtripoint.html">tripoint</a> vehicle::global_part_pos3 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;&#160;</td>
          <td class="paramname"><em>pt</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03111">3111</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03112" name="l03112"></a><span class="lineno"> 3112</span>{</div>
<div class="line"><a id="l03113" name="l03113"></a><span class="lineno"> 3113</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>() + pt.<a class="code hl_variable" href="structvehicle__part.html#a59d594dfb3854c67c2a04065c947cc3c">precalc</a>[ 0 ];</div>
<div class="line"><a id="l03114" name="l03114"></a><span class="lineno"> 3114</span>}</div>
<div class="ttc" id="astructvehicle__part_html_a59d594dfb3854c67c2a04065c947cc3c"><div class="ttname"><a href="structvehicle__part.html#a59d594dfb3854c67c2a04065c947cc3c">vehicle_part::precalc</a></div><div class="ttdeci">std::array&lt; tripoint, 2 &gt; precalc</div><div class="ttdoc">mount translated to face.dir [0] and turn_dir [1]</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00371">vehicle.h:371</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l03101">global_pos3()</a>, and <a class="el" href="vehicle_8h_source.html#l00371">vehicle_part::precalc</a>.</p>

</div>
</div>
<a id="a3900ee345be0453828a955a200154db1" name="a3900ee345be0453828a955a200154db1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3900ee345be0453828a955a200154db1">&#9670;&nbsp;</a></span>global_pos3()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtripoint.html">tripoint</a> vehicle::global_pos3 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03101">3101</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03102" name="l03102"></a><span class="lineno"> 3102</span>{</div>
<div class="line"><a id="l03103" name="l03103"></a><span class="lineno"> 3103</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="coordinate__conversions_8cpp.html#a1d4d395199c6d078e5d1deca53b5b912">sm_to_ms_copy</a>( <a class="code hl_variable" href="classvehicle.html#a34630935e46860003c616e0522316f02">sm_pos</a> ) + <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>;</div>
<div class="line"><a id="l03104" name="l03104"></a><span class="lineno"> 3104</span>}</div>
<div class="ttc" id="acoordinate__conversions_8cpp_html_a1d4d395199c6d078e5d1deca53b5b912"><div class="ttname"><a href="coordinate__conversions_8cpp.html#a1d4d395199c6d078e5d1deca53b5b912">sm_to_ms_copy</a></div><div class="ttdeci">point sm_to_ms_copy(const point &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="coordinate__conversions_8cpp_source.html#l00146">coordinate_conversions.cpp:146</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01859">pos</a>, <a class="el" href="vehicle_8h_source.html#l01844">sm_pos</a>, and <a class="el" href="coordinate__conversions_8cpp_source.html#l00146">sm_to_ms_copy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01435">alarm()</a>, <a class="el" href="iuse_8cpp_source.html#l08909">iuse::cable_attach()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00985">check_is_heli_landed()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00354">collision()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02986">veh_interact::complete_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l05425">decrement_summon_timer()</a>, <a class="el" href="map_8cpp_source.html#l01098">map::displace_vehicle()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02239">veh_interact::display_veh()</a>, <a class="el" href="vehicle_8cpp_source.html#l05745">do_towing_move()</a>, <a class="el" href="vehicle_8cpp_source.html#l00816">drive_to_local_target()</a>, <a class="el" href="vehicle_8cpp_source.html#l02580">get_parts_at()</a>, <a class="el" href="map_8cpp_source.html#l00959">map::get_vehicles()</a>, <a class="el" href="vehicle_8cpp_source.html#l03111">global_part_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l03091">global_square_location()</a>, <a class="el" href="grab_8cpp_source.html#l00021">game::grabbed_veh_move()</a>, <a class="el" href="vehicle_8cpp_source.html#l02565">has_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l05033">idle()</a>, <a class="el" href="vehicle_8cpp_source.html#l00769">immediate_path()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01413">level_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l03017">mount_to_tripoint()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02122">veh_interact::move_cursor()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l03644">noise_and_smoke()</a>, <a class="el" href="vehicle_8cpp_source.html#l04619">power_parts()</a>, <a class="el" href="map_8cpp_source.html#l04598">map::process_items()</a>, <a class="el" href="vehicle_8cpp_source.html#l06035">remove_remote_part()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01687">vehicle_movement::scan_rails_at_shift()</a>, <a class="el" href="veh__interact_8cpp_source.html#l00111">veh_interact::serialize_activity()</a>, <a class="el" href="game_8cpp_source.html#l02583">game::setremoteveh()</a>, <a class="el" href="vehicle_8cpp_source.html#l05114">slow_leak()</a>, <a class="el" href="vehicle_8cpp_source.html#l03623">spew_field()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01055">start_engines()</a>, <a class="el" href="vehicle_8cpp_source.html#l04514">total_solar_epower_w()</a>, <a class="el" href="npc_8cpp_source.html#l01370">npc::vehicle_danger()</a>, and <a class="el" href="map_8cpp_source.html#l00741">map::vehicle_vehicle_collision()</a>.</p>

</div>
</div>
<a id="a789289c4179f7677e45cb100ff5ffb9a" name="a789289c4179f7677e45cb100ff5ffb9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a789289c4179f7677e45cb100ff5ffb9a">&#9670;&nbsp;</a></span>global_square_location()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="coordinates_8h.html#a25195af12949fae51d496c1fbd549871">tripoint_abs_ms</a> vehicle::global_square_location </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03091">3091</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03092" name="l03092"></a><span class="lineno"> 3092</span>{</div>
<div class="line"><a id="l03093" name="l03093"></a><span class="lineno"> 3093</span>    <span class="keywordflow">return</span> <a class="code hl_typedef" href="coordinates_8h.html#a25195af12949fae51d496c1fbd549871">tripoint_abs_ms</a>( <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().getabs( <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>() ) );</div>
<div class="line"><a id="l03094" name="l03094"></a><span class="lineno"> 3094</span>}</div>
<div class="ttc" id="acoordinates_8h_html_a25195af12949fae51d496c1fbd549871"><div class="ttname"><a href="coordinates_8h.html#a25195af12949fae51d496c1fbd549871">tripoint_abs_ms</a></div><div class="ttdeci">coords::coord_point&lt; tripoint, coords::origin::abs, coords::ms &gt; tripoint_abs_ms</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00486">coordinates.h:486</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="map_8cpp_source.html#l00141">get_map()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03101">global_pos3()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l00701">autopilot_patrol()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00542">autopilot_patrol_check()</a>, <a class="el" href="iuse_8cpp_source.html#l08909">iuse::cable_attach()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l01206">do_autodrive()</a>, <a class="el" href="vehicle_8cpp_source.html#l05745">do_towing_move()</a>, <a class="el" href="vehicle_8cpp_source.html#l00816">drive_to_local_target()</a>, <a class="el" href="vehicle_8cpp_source.html#l00916">get_angle_from_targ()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l01123">get_debug_overlay_data()</a>, <a class="el" href="vehicle_8cpp_source.html#l03096">global_omt_location()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00454">interact_vehicle_locked()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l00570">overmapbuffer::move_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l03116">set_submap_moved()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06657">update_time()</a>.</p>

</div>
</div>
<a id="a864572607b3e016a73c6e3b421021a84" name="a864572607b3e016a73c6e3b421021a84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a864572607b3e016a73c6e3b421021a84">&#9670;&nbsp;</a></span>ground_acceleration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::ground_acceleration </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fueled</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>at_vel_in_vmi</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03375">3375</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03376" name="l03376"></a><span class="lineno"> 3376</span>{</div>
<div class="line"><a id="l03377" name="l03377"></a><span class="lineno"> 3377</span>    <span class="keywordflow">if</span>( !( <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> || <a class="code hl_variable" href="classvehicle.html#a320ca34b5c38568efd801731cef78a35">skidding</a> ) ) {</div>
<div class="line"><a id="l03378" name="l03378"></a><span class="lineno"> 3378</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l03379" name="l03379"></a><span class="lineno"> 3379</span>    }</div>
<div class="line"><a id="l03380" name="l03380"></a><span class="lineno"> 3380</span>    <span class="keywordtype">int</span> target_vmiph = std::max( at_vel_in_vmi, std::max( 1000, <a class="code hl_function" href="classvehicle.html#a8ae7b8e43449ee574a6fd266f4773892">max_velocity</a>( fueled ) / 4 ) );</div>
<div class="line"><a id="l03381" name="l03381"></a><span class="lineno"> 3381</span>    <span class="keywordtype">int</span> cmps = <a class="code hl_function" href="vehicle_8h.html#ab3c28976bd7014b628437d061f7dc6c7">vmiph_to_cmps</a>( target_vmiph );</div>
<div class="line"><a id="l03382" name="l03382"></a><span class="lineno"> 3382</span>    <span class="keywordtype">double</span> weight = <a class="code hl_function" href="namespaceunits.html#afbf21a7601bd939c196667fc0b020111">to_kilogram</a>( <a class="code hl_function" href="classvehicle.html#a5a7d83716bf73d4b58d265b626872d01">total_mass</a>() );</div>
<div class="line"><a id="l03383" name="l03383"></a><span class="lineno"> 3383</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a40b149ccb2383cb1a263f3e3d88f3469">is_towing</a>() ) {</div>
<div class="line"><a id="l03384" name="l03384"></a><span class="lineno"> 3384</span>        <a class="code hl_class" href="classvehicle.html">vehicle</a> *other_veh = <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a4cc6247530a16020db73b3af28e0024e">get_towed</a>();</div>
<div class="line"><a id="l03385" name="l03385"></a><span class="lineno"> 3385</span>        <span class="keywordflow">if</span>( other_veh ) {</div>
<div class="line"><a id="l03386" name="l03386"></a><span class="lineno"> 3386</span>            weight = weight + <a class="code hl_function" href="namespaceunits.html#afbf21a7601bd939c196667fc0b020111">to_kilogram</a>( other_veh-&gt;<a class="code hl_function" href="classvehicle.html#a5a7d83716bf73d4b58d265b626872d01">total_mass</a>() );</div>
<div class="line"><a id="l03387" name="l03387"></a><span class="lineno"> 3387</span>        }</div>
<div class="line"><a id="l03388" name="l03388"></a><span class="lineno"> 3388</span>    }</div>
<div class="line"><a id="l03389" name="l03389"></a><span class="lineno"> 3389</span>    <span class="keywordtype">int</span> engine_power_ratio = <a class="code hl_function" href="classvehicle.html#a73db9a09464720b32da8e3f214475a8e">total_power_w</a>( fueled ) / weight;</div>
<div class="line"><a id="l03390" name="l03390"></a><span class="lineno"> 3390</span>    <span class="keywordtype">int</span> accel_at_vel = 100 * 100 * engine_power_ratio / cmps;</div>
<div class="line"><a id="l03391" name="l03391"></a><span class="lineno"> 3391</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;%s: accel at %d vimph is %d&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, target_vmiph,</div>
<div class="line"><a id="l03392" name="l03392"></a><span class="lineno"> 3392</span>             <a class="code hl_function" href="vehicle_8h.html#a8001239e356cfe527444f6019ee90205">cmps_to_vmiph</a>( accel_at_vel ) );</div>
<div class="line"><a id="l03393" name="l03393"></a><span class="lineno"> 3393</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="vehicle_8h.html#a8001239e356cfe527444f6019ee90205">cmps_to_vmiph</a>( accel_at_vel );</div>
<div class="line"><a id="l03394" name="l03394"></a><span class="lineno"> 3394</span>}</div>
<div class="ttc" id="aclassvehicle_html_a40b149ccb2383cb1a263f3e3d88f3469"><div class="ttname"><a href="classvehicle.html#a40b149ccb2383cb1a263f3e3d88f3469">vehicle::is_towing</a></div><div class="ttdeci">bool is_towing() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05844">vehicle.cpp:5844</a></div></div>
<div class="ttc" id="avehicle_8h_html_a8001239e356cfe527444f6019ee90205"><div class="ttname"><a href="vehicle_8h.html#a8001239e356cfe527444f6019ee90205">cmps_to_vmiph</a></div><div class="ttdeci">int cmps_to_vmiph(int cmps)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l00077">vehicle_move.cpp:77</a></div></div>
<div class="ttc" id="avehicle_8h_html_ab3c28976bd7014b628437d061f7dc6c7"><div class="ttname"><a href="vehicle_8h.html#ab3c28976bd7014b628437d061f7dc6c7">vmiph_to_cmps</a></div><div class="ttdeci">int vmiph_to_cmps(int vmiph)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l00082">vehicle_move.cpp:82</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00077">cmps_to_vmiph()</a>, <a class="el" href="vehicle_8h_source.html#l01930">engine_on</a>, <a class="el" href="vehicle_8h_source.html#l00158">towing_data::get_towed()</a>, <a class="el" href="vehicle_8cpp_source.html#l05844">is_towing()</a>, <a class="el" href="enums_8h_source.html#l00264">m_debug</a>, <a class="el" href="vehicle_8cpp_source.html#l03543">max_velocity()</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="vehicle_8h_source.html#l01940">skidding</a>, <a class="el" href="units__mass_8h_source.html#l00073">units::to_kilogram()</a>, <a class="el" href="vehicle_8cpp_source.html#l03126">total_mass()</a>, <a class="el" href="vehicle_8cpp_source.html#l03333">total_power_w()</a>, <a class="el" href="vehicle_8h_source.html#l01887">tow_data</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00082">vmiph_to_cmps()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03462">acceleration()</a>, and <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>.</p>

</div>
</div>
<a id="a2f52c81265462fd7eee8fd158666f9be" name="a2f52c81265462fd7eee8fd158666f9be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f52c81265462fd7eee8fd158666f9be">&#9670;&nbsp;</a></span>handle_potential_theft()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::handle_potential_theft </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classplayer.html">player</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>check_only</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>prompt</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04197">4197</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04198" name="l04198"></a><span class="lineno"> 4198</span>{</div>
<div class="line"><a id="l04199" name="l04199"></a><span class="lineno"> 4199</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> is_owned_by_player = <a class="code hl_function" href="classvehicle.html#a0f2357d1540b058495b554c1b5593611">is_owned_by</a>( p );</div>
<div class="line"><a id="l04200" name="l04200"></a><span class="lineno"> 4200</span>    std::vector&lt;npc *&gt; witnesses;</div>
<div class="line"><a id="l04201" name="l04201"></a><span class="lineno"> 4201</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classnpc.html">npc</a> &amp;elem : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;all_npcs() ) {</div>
<div class="line"><a id="l04202" name="l04202"></a><span class="lineno"> 4202</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( elem.pos(), p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() ) &lt; <a class="code hl_variable" href="game__constants_8h.html#a745392436b19cce3012d4d8dc0fe422c">MAX_VIEW_DISTANCE</a> &amp;&amp; <a class="code hl_function" href="classvehicle.html#a16754f112125d292839bf0c10a99d7ae">has_owner</a>() &amp;&amp;</div>
<div class="line"><a id="l04203" name="l04203"></a><span class="lineno"> 4203</span>            !is_owned_by_player &amp;&amp; elem.sees( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() ) ) {</div>
<div class="line"><a id="l04204" name="l04204"></a><span class="lineno"> 4204</span>            witnesses.push_back( &amp;elem );</div>
<div class="line"><a id="l04205" name="l04205"></a><span class="lineno"> 4205</span>        }</div>
<div class="line"><a id="l04206" name="l04206"></a><span class="lineno"> 4206</span>    }</div>
<div class="line"><a id="l04207" name="l04207"></a><span class="lineno"> 4207</span>    <span class="comment">// the vehicle is yours, that&#39;s fine.</span></div>
<div class="line"><a id="l04208" name="l04208"></a><span class="lineno"> 4208</span>    <span class="keywordflow">if</span>( is_owned_by_player ) {</div>
<div class="line"><a id="l04209" name="l04209"></a><span class="lineno"> 4209</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04210" name="l04210"></a><span class="lineno"> 4210</span>        <span class="comment">// if There is no owner</span></div>
<div class="line"><a id="l04211" name="l04211"></a><span class="lineno"> 4211</span>        <span class="comment">// handle transfer of ownership</span></div>
<div class="line"><a id="l04212" name="l04212"></a><span class="lineno"> 4212</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#a16754f112125d292839bf0c10a99d7ae">has_owner</a>() ) {</div>
<div class="line"><a id="l04213" name="l04213"></a><span class="lineno"> 4213</span>        <a class="code hl_function" href="classvehicle.html#ae57a59ca3ca669ce217f98094101b2ef">set_owner</a>( p.<a class="code hl_function" href="classCharacter.html#a4576a50adcb91041db4cabea0955d8ea">get_faction</a>()-&gt;<a class="code hl_variable" href="classfaction__template.html#a649fcecca332d594911fed59607d4ee7">id</a> );</div>
<div class="line"><a id="l04214" name="l04214"></a><span class="lineno"> 4214</span>        <a class="code hl_function" href="classvehicle.html#aae4c2a7de2fba2e7808904f8e39bd12e">remove_old_owner</a>();</div>
<div class="line"><a id="l04215" name="l04215"></a><span class="lineno"> 4215</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04216" name="l04216"></a><span class="lineno"> 4216</span>        <span class="comment">// if there is a marker for having been stolen, but 15 minutes have passed, then officially transfer ownership</span></div>
<div class="line"><a id="l04217" name="l04217"></a><span class="lineno"> 4217</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( witnesses.empty() &amp;&amp; <a class="code hl_function" href="classvehicle.html#a075fec953ade4b95c94b4cc1f80fe4e9">has_old_owner</a>() &amp;&amp; !<a class="code hl_function" href="classvehicle.html#abf454e2521b991a5b45f920be43fc5c1">is_old_owner</a>( p ) &amp;&amp; <a class="code hl_variable" href="classvehicle.html#a191233eeb95ac9e660d5da83dd247a73">theft_time</a> &amp;&amp;</div>
<div class="line"><a id="l04218" name="l04218"></a><span class="lineno"> 4218</span>               <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> - *<a class="code hl_variable" href="classvehicle.html#a191233eeb95ac9e660d5da83dd247a73">theft_time</a> &gt; 15_minutes ) {</div>
<div class="line"><a id="l04219" name="l04219"></a><span class="lineno"> 4219</span>        <a class="code hl_function" href="classvehicle.html#ae57a59ca3ca669ce217f98094101b2ef">set_owner</a>( p.<a class="code hl_function" href="classCharacter.html#a4576a50adcb91041db4cabea0955d8ea">get_faction</a>()-&gt;<a class="code hl_variable" href="classfaction__template.html#a649fcecca332d594911fed59607d4ee7">id</a> );</div>
<div class="line"><a id="l04220" name="l04220"></a><span class="lineno"> 4220</span>        <a class="code hl_function" href="classvehicle.html#aae4c2a7de2fba2e7808904f8e39bd12e">remove_old_owner</a>();</div>
<div class="line"><a id="l04221" name="l04221"></a><span class="lineno"> 4221</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04222" name="l04222"></a><span class="lineno"> 4222</span>        <span class="comment">// No witnesses? then don&#39;t need to prompt, we assume the player is in process of stealing it.</span></div>
<div class="line"><a id="l04223" name="l04223"></a><span class="lineno"> 4223</span>        <span class="comment">// Ownership transfer checking is handled above, and warnings handled below.</span></div>
<div class="line"><a id="l04224" name="l04224"></a><span class="lineno"> 4224</span>        <span class="comment">// This is just to perform interaction with the vehicle without a prompt.</span></div>
<div class="line"><a id="l04225" name="l04225"></a><span class="lineno"> 4225</span>        <span class="comment">// It will prompt first-time, even with no witnesses, to inform player it is owned by someone else</span></div>
<div class="line"><a id="l04226" name="l04226"></a><span class="lineno"> 4226</span>        <span class="comment">// subsequently, no further prompts, the player should know by then.</span></div>
<div class="line"><a id="l04227" name="l04227"></a><span class="lineno"> 4227</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( witnesses.empty() &amp;&amp; <a class="code hl_variable" href="classvehicle.html#a0e6255388e73823374ec4bc9097f87c3">old_owner</a> ) {</div>
<div class="line"><a id="l04228" name="l04228"></a><span class="lineno"> 4228</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04229" name="l04229"></a><span class="lineno"> 4229</span>    }</div>
<div class="line"><a id="l04230" name="l04230"></a><span class="lineno"> 4230</span>    <span class="comment">// if we are just checking if we could continue without problems, then the rest is assumed false</span></div>
<div class="line"><a id="l04231" name="l04231"></a><span class="lineno"> 4231</span>    <span class="keywordflow">if</span>( check_only ) {</div>
<div class="line"><a id="l04232" name="l04232"></a><span class="lineno"> 4232</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04233" name="l04233"></a><span class="lineno"> 4233</span>    }</div>
<div class="line"><a id="l04234" name="l04234"></a><span class="lineno"> 4234</span>    <span class="comment">// if we got here, there&#39;s some theft occurring</span></div>
<div class="line"><a id="l04235" name="l04235"></a><span class="lineno"> 4235</span>    <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="namespacepickup.html#a03a2e6f98be01a67be0ad42cb7aa4c61a29ea7ce63137484da296feacfa4f021c">prompt</a> ) {</div>
<div class="line"><a id="l04236" name="l04236"></a><span class="lineno"> 4236</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>(</div>
<div class="line"><a id="l04237" name="l04237"></a><span class="lineno"> 4237</span>                <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This vehicle belongs to: %s, there may be consequences if you are observed interacting with it, continue?&quot;</span> ),</div>
<div class="line"><a id="l04238" name="l04238"></a><span class="lineno"> 4238</span>                <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <a class="code hl_function" href="classvehicle.html#a48d4c51cef53131283d0ff6c64a2fe5f">get_owner_name</a>() ) ) ) {</div>
<div class="line"><a id="l04239" name="l04239"></a><span class="lineno"> 4239</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04240" name="l04240"></a><span class="lineno"> 4240</span>        }</div>
<div class="line"><a id="l04241" name="l04241"></a><span class="lineno"> 4241</span>    }</div>
<div class="line"><a id="l04242" name="l04242"></a><span class="lineno"> 4242</span>    <span class="comment">// set old owner so that we can restore ownership if there are witnesses.</span></div>
<div class="line"><a id="l04243" name="l04243"></a><span class="lineno"> 4243</span>    <a class="code hl_function" href="classvehicle.html#aad68498a5e732d7d0912f25f989e0356">set_old_owner</a>( <a class="code hl_function" href="classvehicle.html#a070fe172db0a71f8ab874a18a1d88d10">get_owner</a>() );</div>
<div class="line"><a id="l04244" name="l04244"></a><span class="lineno"> 4244</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classnpc.html">npc</a> *elem : witnesses ) {</div>
<div class="line"><a id="l04245" name="l04245"></a><span class="lineno"> 4245</span>        elem-&gt;say( <span class="stringliteral">&quot;&lt;witnessed_thievery&gt;&quot;</span>, 7 );</div>
<div class="line"><a id="l04246" name="l04246"></a><span class="lineno"> 4246</span>    }</div>
<div class="line"><a id="l04247" name="l04247"></a><span class="lineno"> 4247</span>    <span class="keywordflow">if</span>( !witnesses.empty() ) {</div>
<div class="line"><a id="l04248" name="l04248"></a><span class="lineno"> 4248</span>        <span class="keywordflow">if</span>( p.<a class="code hl_function" href="classplayer.html#ae1827f3e149c8cbbfdf6ba1803cbf80d">add_faction_warning</a>( <a class="code hl_function" href="classvehicle.html#a070fe172db0a71f8ab874a18a1d88d10">get_owner</a>() ) ) {</div>
<div class="line"><a id="l04249" name="l04249"></a><span class="lineno"> 4249</span>            <span class="keywordflow">for</span>( <a class="code hl_class" href="classnpc.html">npc</a> *elem : witnesses ) {</div>
<div class="line"><a id="l04250" name="l04250"></a><span class="lineno"> 4250</span>                elem-&gt;make_angry();</div>
<div class="line"><a id="l04251" name="l04251"></a><span class="lineno"> 4251</span>            }</div>
<div class="line"><a id="l04252" name="l04252"></a><span class="lineno"> 4252</span>        }</div>
<div class="line"><a id="l04253" name="l04253"></a><span class="lineno"> 4253</span>        <span class="comment">// remove the temporary marker for a successful theft, as it was witnessed.</span></div>
<div class="line"><a id="l04254" name="l04254"></a><span class="lineno"> 4254</span>        <a class="code hl_function" href="classvehicle.html#aae4c2a7de2fba2e7808904f8e39bd12e">remove_old_owner</a>();</div>
<div class="line"><a id="l04255" name="l04255"></a><span class="lineno"> 4255</span>    }</div>
<div class="line"><a id="l04256" name="l04256"></a><span class="lineno"> 4256</span>    <span class="comment">// if we got here, then the action will proceed after the previous warning</span></div>
<div class="line"><a id="l04257" name="l04257"></a><span class="lineno"> 4257</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04258" name="l04258"></a><span class="lineno"> 4258</span>}</div>
<div class="ttc" id="aclassCharacter_html_a4576a50adcb91041db4cabea0955d8ea"><div class="ttname"><a href="classCharacter.html#a4576a50adcb91041db4cabea0955d8ea">Character::get_faction</a></div><div class="ttdeci">virtual faction * get_faction() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00405">character.h:405</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad24859164517ed6e392e21df69527199"><div class="ttname"><a href="classCharacter.html#ad24859164517ed6e392e21df69527199">Character::pos</a></div><div class="ttdeci">const tripoint &amp; pos() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00707">character.cpp:707</a></div></div>
<div class="ttc" id="aclassfaction__template_html_a649fcecca332d594911fed59607d4ee7"><div class="ttname"><a href="classfaction__template.html#a649fcecca332d594911fed59607d4ee7">faction_template::id</a></div><div class="ttdeci">faction_id id</div><div class="ttdef"><b>Definition:</b> <a href="faction_8h_source.html#l00082">faction.h:82</a></div></div>
<div class="ttc" id="aclassplayer_html_ae1827f3e149c8cbbfdf6ba1803cbf80d"><div class="ttname"><a href="classplayer.html#ae1827f3e149c8cbbfdf6ba1803cbf80d">player::add_faction_warning</a></div><div class="ttdeci">bool add_faction_warning(const faction_id &amp;id)</div><div class="ttdef"><b>Definition:</b> <a href="player_8cpp_source.html#l02107">player.cpp:2107</a></div></div>
<div class="ttc" id="aclassvehicle_html_a075fec953ade4b95c94b4cc1f80fe4e9"><div class="ttname"><a href="classvehicle.html#a075fec953ade4b95c94b4cc1f80fe4e9">vehicle::has_old_owner</a></div><div class="ttdeci">bool has_old_owner() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00839">vehicle.h:839</a></div></div>
<div class="ttc" id="aclassvehicle_html_a0f2357d1540b058495b554c1b5593611"><div class="ttname"><a href="classvehicle.html#a0f2357d1540b058495b554c1b5593611">vehicle::is_owned_by</a></div><div class="ttdeci">bool is_owned_by(const Character &amp;c, bool available_to_take=false) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04155">vehicle.cpp:4155</a></div></div>
<div class="ttc" id="aclassvehicle_html_a16754f112125d292839bf0c10a99d7ae"><div class="ttname"><a href="classvehicle.html#a16754f112125d292839bf0c10a99d7ae">vehicle::has_owner</a></div><div class="ttdeci">bool has_owner() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00836">vehicle.h:836</a></div></div>
<div class="ttc" id="aclassvehicle_html_a48d4c51cef53131283d0ff6c64a2fe5f"><div class="ttname"><a href="classvehicle.html#a48d4c51cef53131283d0ff6c64a2fe5f">vehicle::get_owner_name</a></div><div class="ttdeci">std::string get_owner_name() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04179">vehicle.cpp:4179</a></div></div>
<div class="ttc" id="aclassvehicle_html_aad68498a5e732d7d0912f25f989e0356"><div class="ttname"><a href="classvehicle.html#aad68498a5e732d7d0912f25f989e0356">vehicle::set_old_owner</a></div><div class="ttdeci">void set_old_owner(const faction_id &amp;temp_owner)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00815">vehicle.h:815</a></div></div>
<div class="ttc" id="aclassvehicle_html_aae4c2a7de2fba2e7808904f8e39bd12e"><div class="ttname"><a href="classvehicle.html#aae4c2a7de2fba2e7808904f8e39bd12e">vehicle::remove_old_owner</a></div><div class="ttdeci">void remove_old_owner()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00819">vehicle.h:819</a></div></div>
<div class="ttc" id="aclassvehicle_html_abf454e2521b991a5b45f920be43fc5c1"><div class="ttname"><a href="classvehicle.html#abf454e2521b991a5b45f920be43fc5c1">vehicle::is_old_owner</a></div><div class="ttdeci">bool is_old_owner(const Character &amp;c, bool available_to_take=false) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04167">vehicle.cpp:4167</a></div></div>
<div class="ttc" id="aclassvehicle_html_ae57a59ca3ca669ce217f98094101b2ef"><div class="ttname"><a href="classvehicle.html#ae57a59ca3ca669ce217f98094101b2ef">vehicle::set_owner</a></div><div class="ttdeci">void set_owner(const faction_id &amp;new_owner)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00823">vehicle.h:823</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a745392436b19cce3012d4d8dc0fe422c"><div class="ttname"><a href="game__constants_8h.html#a745392436b19cce3012d4d8dc0fe422c">MAX_VIEW_DISTANCE</a></div><div class="ttdeci">static constexpr int MAX_VIEW_DISTANCE</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00045">game_constants.h:45</a></div></div>
<div class="ttc" id="anamespacepickup_html_a03a2e6f98be01a67be0ad42cb7aa4c61a29ea7ce63137484da296feacfa4f021c"><div class="ttname"><a href="namespacepickup.html#a03a2e6f98be01a67be0ad42cb7aa4c61a29ea7ce63137484da296feacfa4f021c">pickup::prompt</a></div><div class="ttdeci">@ prompt</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8h_source.html#l00031">pickup.h:30</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ab62599a77867b8f416669b92f60f4900"><div class="ttname"><a href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a></div><div class="ttdeci">bool query_yn(const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00698">output.cpp:698</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="player_8cpp_source.html#l02107">player::add_faction_warning()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="character_8h_source.html#l00405">Character::get_faction()</a>, <a class="el" href="vehicle_8h_source.html#l00830">get_owner()</a>, <a class="el" href="vehicle_8cpp_source.html#l04179">get_owner_name()</a>, <a class="el" href="vehicle_8h_source.html#l00839">has_old_owner()</a>, <a class="el" href="vehicle_8h_source.html#l00836">has_owner()</a>, <a class="el" href="faction_8h_source.html#l00082">faction_template::id</a>, <a class="el" href="vehicle_8cpp_source.html#l04167">is_old_owner()</a>, <a class="el" href="vehicle_8cpp_source.html#l04155">is_owned_by()</a>, <a class="el" href="game__constants_8h_source.html#l00045">MAX_VIEW_DISTANCE</a>, <a class="el" href="vehicle_8h_source.html#l01721">old_owner</a>, <a class="el" href="character_8cpp_source.html#l00707">Character::pos()</a>, <a class="el" href="pickup_8h_source.html#l00030">pickup::prompt</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="vehicle_8h_source.html#l00819">remove_old_owner()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="vehicle_8h_source.html#l00815">set_old_owner()</a>, <a class="el" href="vehicle_8h_source.html#l00823">set_owner()</a>, <a class="el" href="vehicle_8h_source.html#l01881">theft_time</a>, and <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="gates_8cpp_source.html#l00255">doors::close_door()</a>, <a class="el" href="game_8cpp_source.html#l05443">game::control_vehicle()</a>, <a class="el" href="veh__interact_8cpp_source.html#l00398">veh_interact::do_main_loop()</a>, <a class="el" href="game_8cpp_source.html#l01434">game::do_turn()</a>, <a class="el" href="grab_8cpp_source.html#l00021">game::grabbed_veh_move()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>, <a class="el" href="avatar__action_8cpp_source.html#l00090">avatar_action::move()</a>, <a class="el" href="handle__action_8cpp_source.html#l00510">open()</a>, <a class="el" href="handle__action_8cpp_source.html#l00671">smash()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="ae4630e42613cfd4129edd33828c10dc4" name="ae4630e42613cfd4129edd33828c10dc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4630e42613cfd4129edd33828c10dc4">&#9670;&nbsp;</a></span>handle_trap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::handle_trap </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>part</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__move_8cpp_source.html#l00845">845</a> of file <a class="el" href="vehicle__move_8cpp_source.html">vehicle_move.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>{</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>    <span class="keywordtype">int</span> pwh = <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eae36e04cd704cf1a4a2ae645809e24e1b">VPFLAG_WHEEL</a>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>    <span class="keywordflow">if</span>( pwh &lt; 0 ) {</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>    }</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>    <a class="code hl_class" href="classCharacter.html">Character</a> &amp;player_character = <a class="code hl_function" href="character_8cpp.html#a2fcb25d686f4a35fca374c6f71280311">get_player_character</a>();</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span> </div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structtrap.html">trap</a> &amp;tr = here.<a class="code hl_function" href="classmap.html#a30ccb67ed3651d350f2caf214e0b5176">tr_at</a>( p );</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>    <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">trap_id</a> t = tr.<a class="code hl_variable" href="structtrap.html#ab2767aee5179ad23b3ad0b6b4b2415af">loadid</a>;</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span> </div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>    <span class="keywordflow">if</span>( t == <a class="code hl_variable" href="trap_8cpp.html#a7b8e40eb2b50e3841e2d9f2d0531226a">tr_null</a> ) {</div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>        <span class="comment">// If the trap doesn&#39;t exist, we can&#39;t interact with it, so just return</span></div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>    }</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>    <a class="code hl_struct" href="structvehicle__handle__trap__data.html">vehicle_handle_trap_data</a> veh_data = tr.<a class="code hl_variable" href="structtrap.html#a03491b6455522e29bcbd457283b88c6d">vehicle_data</a>;</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span> </div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>    <span class="keywordflow">if</span>( veh_data.<a class="code hl_variable" href="structvehicle__handle__trap__data.html#aff743c43f98a9a30f15b33bab668b9f3">is_falling</a> ) {</div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>    }</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span> </div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> seen = player_character.<a class="code hl_function" href="classCharacter.html#aba9bd7517b334e6ed4149889ed32377a">sees</a>( p );</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> known = player_character.<a class="code hl_function" href="classCharacter.html#a7cf3a039fed01ee44525ea41940cb00d">knows_trap</a>( p );</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>    <span class="keywordflow">if</span>( seen ) {</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>        <span class="keywordflow">if</span>( known ) {</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>            <span class="comment">//~ %1$s: name of the vehicle; %2$s: name of the related vehicle part; %3$s: trap name</span></div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s&#39;s %2$s runs over %3$s.&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ].<a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>(), tr.<a class="code hl_function" href="structtrap.html#a01b0ef8443ac5ba4e7455880ca2dc44b">name</a>() );</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %1$s&#39;s %2$s runs over something.&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ].<a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>() );</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>        }</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>    }</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span> </div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>    <span class="keywordflow">if</span>( veh_data.<a class="code hl_variable" href="structvehicle__handle__trap__data.html#a4720c8fd0a5120c5e73999d630a441b9">chance</a> &gt;= <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 100 ) ) {</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>        <span class="keywordflow">if</span>( veh_data.<a class="code hl_variable" href="structvehicle__handle__trap__data.html#a0c5bf103091c4d3af6e05554dfb4ea06">sound_volume</a> &gt; 0 ) {</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( p, veh_data.<a class="code hl_variable" href="structvehicle__handle__trap__data.html#a0c5bf103091c4d3af6e05554dfb4ea06">sound_volume</a>, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, veh_data.<a class="code hl_variable" href="structvehicle__handle__trap__data.html#a5a19d024919f0e4b3e470b85ceee7557">sound</a>, <span class="keyword">false</span>,</div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>                           veh_data.<a class="code hl_variable" href="structvehicle__handle__trap__data.html#a8fc4e74b6409f9616968d445b17c3955">sound_type</a>, veh_data.<a class="code hl_variable" href="structvehicle__handle__trap__data.html#a6f9a3d0f9d4799259b30a03fd1598c4d">sound_variant</a> );</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>        }</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>        <span class="keywordflow">if</span>( veh_data.<a class="code hl_variable" href="structvehicle__handle__trap__data.html#a2ce8428df648cdf20dc6ac59effcb757">do_explosion</a> ) {</div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>            <a class="code hl_function" href="namespaceexplosion__handler.html#aedf90c876bd69288b266c6a60dbc91dc">explosion_handler::explosion</a>( p, veh_data.<a class="code hl_variable" href="structvehicle__handle__trap__data.html#a12a8a69fabc09c46c94a872c3deabfc3">damage</a>, 0.5f, <span class="keyword">false</span>, veh_data.<a class="code hl_variable" href="structvehicle__handle__trap__data.html#ad34f1fa0ddea2be0516fe52076755d28">shrapnel</a> );</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>            <span class="comment">// Hit the wheel directly since it ran right over the trap.</span></div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>            <a class="code hl_function" href="classvehicle.html#ac2de625db1619f042c4a3a69d0995a6a">damage_direct</a>( pwh, veh_data.<a class="code hl_variable" href="structvehicle__handle__trap__data.html#a12a8a69fabc09c46c94a872c3deabfc3">damage</a> );</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>        }</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>        <span class="keywordtype">bool</span> still_has_trap = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>        <span class="keywordflow">if</span>( veh_data.<a class="code hl_variable" href="structvehicle__handle__trap__data.html#acf9ea314f7998e6a589bb3187c6ae6a2">remove_trap</a> || veh_data.<a class="code hl_variable" href="structvehicle__handle__trap__data.html#a2ce8428df648cdf20dc6ac59effcb757">do_explosion</a> ) {</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>            here.<a class="code hl_function" href="classmap.html#ae6be5b2b977897215861971bf64fb502">remove_trap</a>( p );</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>            still_has_trap = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>        }</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;it : veh_data.<a class="code hl_variable" href="structvehicle__handle__trap__data.html#a85267d7b741db092465b148b86e023a7">spawn_items</a> ) {</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>            <span class="keywordtype">int</span> cnt = <a class="code hl_function" href="rng_8cpp.html#acd19ae79e3590a99c9eaf0389318b686">roll_remainder</a>( it.second );</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>            <span class="keywordflow">if</span>( cnt &gt; 0 ) {</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>                here.<a class="code hl_function" href="classmap.html#acfe43259087397daac52876165a3120c">spawn_item</a>( p, it.first, cnt );</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>            }</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>        }</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>        <span class="keywordflow">if</span>( veh_data.<a class="code hl_variable" href="structvehicle__handle__trap__data.html#ab19712f6fbd3b157f986b29925197dd3">set_trap</a> ) {</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>            here.<a class="code hl_function" href="classmap.html#ade82e480520c05f5a4e8917df19cef8c">trap_set</a>( p, veh_data.<a class="code hl_variable" href="structvehicle__handle__trap__data.html#ab19712f6fbd3b157f986b29925197dd3">set_trap</a>.<a class="code hl_function" href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">id</a>() );</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>            still_has_trap = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>        }</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>        <span class="keywordflow">if</span>( still_has_trap ) {</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structtrap.html">trap</a> &amp;tr = here.<a class="code hl_function" href="classmap.html#a30ccb67ed3651d350f2caf214e0b5176">tr_at</a>( p );</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>            <span class="keywordflow">if</span>( seen || known ) {</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>                <span class="comment">// known status has been reset by map::trap_set()</span></div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>                player_character.<a class="code hl_function" href="classCharacter.html#ada34ca3fb472a8b1816e297ead2b31df">add_known_trap</a>( p, tr );</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>            }</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>            <span class="keywordflow">if</span>( seen &amp;&amp; !known ) {</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>                <span class="comment">// hard to miss!</span></div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>                <span class="keyword">const</span> std::string <a class="code hl_enumeration" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> = <a class="code hl_function" href="line_8cpp.html#a19634ed59e09da9312d6fa110a38539c">direction_name</a>( <a class="code hl_function" href="coordinates_8h.html#a00be0762df7b46da965e55caffac53db">direction_from</a>( player_character.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), p ) );</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You&#39;ve spotted a %1$s to the %2$s!&quot;</span> ), tr.<a class="code hl_function" href="structtrap.html#a01b0ef8443ac5ba4e7455880ca2dc44b">name</a>(), <a class="code hl_enumeration" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> );</div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>            }</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>        }</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>    }</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>}</div>
<div class="ttc" id="aclassCharacter_html_a7cf3a039fed01ee44525ea41940cb00d"><div class="ttname"><a href="classCharacter.html#a7cf3a039fed01ee44525ea41940cb00d">Character::knows_trap</a></div><div class="ttdeci">bool knows_trap(const tripoint &amp;pos) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10214">character.cpp:10214</a></div></div>
<div class="ttc" id="aclassCharacter_html_aba9bd7517b334e6ed4149889ed32377a"><div class="ttname"><a href="classCharacter.html#aba9bd7517b334e6ed4149889ed32377a">Character::sees</a></div><div class="ttdeci">bool sees(const tripoint &amp;t, bool is_player=false, int range_mod=0) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10384">character.cpp:10384</a></div></div>
<div class="ttc" id="aclassCharacter_html_ada34ca3fb472a8b1816e297ead2b31df"><div class="ttname"><a href="classCharacter.html#ada34ca3fb472a8b1816e297ead2b31df">Character::add_known_trap</a></div><div class="ttdeci">void add_known_trap(const tripoint &amp;pos, const trap &amp;t)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10220">character.cpp:10220</a></div></div>
<div class="ttc" id="aclassint__id_html"><div class="ttname"><a href="classint__id.html">int_id&lt; trap &gt;</a></div></div>
<div class="ttc" id="aclassmap_html_a30ccb67ed3651d350f2caf214e0b5176"><div class="ttname"><a href="classmap.html#a30ccb67ed3651d350f2caf214e0b5176">map::tr_at</a></div><div class="ttdeci">const trap &amp; tr_at(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05135">map.cpp:5135</a></div></div>
<div class="ttc" id="aclassmap_html_acfe43259087397daac52876165a3120c"><div class="ttname"><a href="classmap.html#acfe43259087397daac52876165a3120c">map::spawn_item</a></div><div class="ttdeci">void spawn_item(const tripoint &amp;p, const itype_id &amp;type_id, unsigned quantity=1, int charges=0, const time_point &amp;birthday=calendar::start_of_cataclysm, int damlevel=0)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04187">map.cpp:4187</a></div></div>
<div class="ttc" id="aclassmap_html_ade82e480520c05f5a4e8917df19cef8c"><div class="ttname"><a href="classmap.html#ade82e480520c05f5a4e8917df19cef8c">map::trap_set</a></div><div class="ttdeci">void trap_set(const tripoint &amp;p, const trap_id &amp;type)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05187">map.cpp:5187</a></div></div>
<div class="ttc" id="aclassmap_html_ae6be5b2b977897215861971bf64fb502"><div class="ttname"><a href="classmap.html#ae6be5b2b977897215861971bf64fb502">map::remove_trap</a></div><div class="ttdeci">void remove_trap(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05271">map.cpp:5271</a></div></div>
<div class="ttc" id="aclassstring__id_html_aa3cde2bfb58efa9621289c0a70d24c5a"><div class="ttname"><a href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">string_id::id</a></div><div class="ttdeci">int_id&lt; T &gt; id() const</div><div class="ttdoc">Translate the string based it to the matching integer based id.</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00054">ammo_effect.cpp:54</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a00be0762df7b46da965e55caffac53db"><div class="ttname"><a href="coordinates_8h.html#a00be0762df7b46da965e55caffac53db">direction_from</a></div><div class="ttdeci">direction direction_from(const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00540">coordinates.h:540</a></div></div>
<div class="ttc" id="aline_8cpp_html_a19634ed59e09da9312d6fa110a38539c"><div class="ttname"><a href="line_8cpp.html#a19634ed59e09da9312d6fa110a38539c">direction_name</a></div><div class="ttdeci">std::string direction_name(const direction dir)</div><div class="ttdef"><b>Definition:</b> <a href="line_8cpp_source.html#l00528">line.cpp:528</a></div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a></div><div class="ttdeci">direction</div><div class="ttdef"><b>Definition:</b> <a href="line_8h_source.html#l00039">line.h:39</a></div></div>
<div class="ttc" id="arng_8cpp_html_acd19ae79e3590a99c9eaf0389318b686"><div class="ttname"><a href="rng_8cpp.html#acd19ae79e3590a99c9eaf0389318b686">roll_remainder</a></div><div class="ttdeci">int roll_remainder(double value)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00096">rng.cpp:96</a></div></div>
<div class="ttc" id="astructtrap_html"><div class="ttname"><a href="structtrap.html">trap</a></div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00086">trap.h:86</a></div></div>
<div class="ttc" id="astructtrap_html_a01b0ef8443ac5ba4e7455880ca2dc44b"><div class="ttname"><a href="structtrap.html#a01b0ef8443ac5ba4e7455880ca2dc44b">trap::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00177">trap.cpp:177</a></div></div>
<div class="ttc" id="astructtrap_html_a03491b6455522e29bcbd457283b88c6d"><div class="ttname"><a href="structtrap.html#a03491b6455522e29bcbd457283b88c6d">trap::vehicle_data</a></div><div class="ttdeci">vehicle_handle_trap_data vehicle_data</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00122">trap.h:122</a></div></div>
<div class="ttc" id="astructtrap_html_ab2767aee5179ad23b3ad0b6b4b2415af"><div class="ttname"><a href="structtrap.html#ab2767aee5179ad23b3ad0b6b4b2415af">trap::loadid</a></div><div class="ttdeci">trap_id loadid</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00088">trap.h:88</a></div></div>
<div class="ttc" id="astructvehicle__handle__trap__data_html"><div class="ttname"><a href="structvehicle__handle__trap__data.html">vehicle_handle_trap_data</a></div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00068">trap.h:68</a></div></div>
<div class="ttc" id="astructvehicle__handle__trap__data_html_a0c5bf103091c4d3af6e05554dfb4ea06"><div class="ttname"><a href="structvehicle__handle__trap__data.html#a0c5bf103091c4d3af6e05554dfb4ea06">vehicle_handle_trap_data::sound_volume</a></div><div class="ttdeci">int sound_volume</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00075">trap.h:75</a></div></div>
<div class="ttc" id="astructvehicle__handle__trap__data_html_a12a8a69fabc09c46c94a872c3deabfc3"><div class="ttname"><a href="structvehicle__handle__trap__data.html#a12a8a69fabc09c46c94a872c3deabfc3">vehicle_handle_trap_data::damage</a></div><div class="ttdeci">int damage</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00073">trap.h:73</a></div></div>
<div class="ttc" id="astructvehicle__handle__trap__data_html_a2ce8428df648cdf20dc6ac59effcb757"><div class="ttname"><a href="structvehicle__handle__trap__data.html#a2ce8428df648cdf20dc6ac59effcb757">vehicle_handle_trap_data::do_explosion</a></div><div class="ttdeci">bool do_explosion</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00070">trap.h:70</a></div></div>
<div class="ttc" id="astructvehicle__handle__trap__data_html_a4720c8fd0a5120c5e73999d630a441b9"><div class="ttname"><a href="structvehicle__handle__trap__data.html#a4720c8fd0a5120c5e73999d630a441b9">vehicle_handle_trap_data::chance</a></div><div class="ttdeci">int chance</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00072">trap.h:72</a></div></div>
<div class="ttc" id="astructvehicle__handle__trap__data_html_a5a19d024919f0e4b3e470b85ceee7557"><div class="ttname"><a href="structvehicle__handle__trap__data.html#a5a19d024919f0e4b3e470b85ceee7557">vehicle_handle_trap_data::sound</a></div><div class="ttdeci">translation sound</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00076">trap.h:76</a></div></div>
<div class="ttc" id="astructvehicle__handle__trap__data_html_a6f9a3d0f9d4799259b30a03fd1598c4d"><div class="ttname"><a href="structvehicle__handle__trap__data.html#a6f9a3d0f9d4799259b30a03fd1598c4d">vehicle_handle_trap_data::sound_variant</a></div><div class="ttdeci">std::string sound_variant</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00078">trap.h:78</a></div></div>
<div class="ttc" id="astructvehicle__handle__trap__data_html_a85267d7b741db092465b148b86e023a7"><div class="ttname"><a href="structvehicle__handle__trap__data.html#a85267d7b741db092465b148b86e023a7">vehicle_handle_trap_data::spawn_items</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; itype_id, double &gt; &gt; spawn_items</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00080">trap.h:80</a></div></div>
<div class="ttc" id="astructvehicle__handle__trap__data_html_a8fc4e74b6409f9616968d445b17c3955"><div class="ttname"><a href="structvehicle__handle__trap__data.html#a8fc4e74b6409f9616968d445b17c3955">vehicle_handle_trap_data::sound_type</a></div><div class="ttdeci">std::string sound_type</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00077">trap.h:77</a></div></div>
<div class="ttc" id="astructvehicle__handle__trap__data_html_ab19712f6fbd3b157f986b29925197dd3"><div class="ttname"><a href="structvehicle__handle__trap__data.html#ab19712f6fbd3b157f986b29925197dd3">vehicle_handle_trap_data::set_trap</a></div><div class="ttdeci">trap_str_id set_trap</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00081">trap.h:81</a></div></div>
<div class="ttc" id="astructvehicle__handle__trap__data_html_acf9ea314f7998e6a589bb3187c6ae6a2"><div class="ttname"><a href="structvehicle__handle__trap__data.html#acf9ea314f7998e6a589bb3187c6ae6a2">vehicle_handle_trap_data::remove_trap</a></div><div class="ttdeci">bool remove_trap</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00069">trap.h:69</a></div></div>
<div class="ttc" id="astructvehicle__handle__trap__data_html_ad34f1fa0ddea2be0516fe52076755d28"><div class="ttname"><a href="structvehicle__handle__trap__data.html#ad34f1fa0ddea2be0516fe52076755d28">vehicle_handle_trap_data::shrapnel</a></div><div class="ttdeci">int shrapnel</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00074">trap.h:74</a></div></div>
<div class="ttc" id="astructvehicle__handle__trap__data_html_aff743c43f98a9a30f15b33bab668b9f3"><div class="ttname"><a href="structvehicle__handle__trap__data.html#aff743c43f98a9a30f15b33bab668b9f3">vehicle_handle_trap_data::is_falling</a></div><div class="ttdeci">bool is_falling</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00071">trap.h:71</a></div></div>
<div class="ttc" id="atrap_8cpp_html_a7b8e40eb2b50e3841e2d9f2d0531226a"><div class="ttname"><a href="trap_8cpp.html#a7b8e40eb2b50e3841e2d9f2d0531226a">tr_null</a></div><div class="ttdeci">trap_id tr_null</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00276">trap.cpp:276</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="character_8cpp_source.html#l10220">Character::add_known_trap()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="trap_8h_source.html#l00072">vehicle_handle_trap_data::chance</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::combat</a>, <a class="el" href="trap_8h_source.html#l00073">vehicle_handle_trap_data::damage</a>, <a class="el" href="vehicle_8cpp_source.html#l06437">damage_direct()</a>, <a class="el" href="coordinates_8h_source.html#l00540">direction_from()</a>, <a class="el" href="line_8cpp_source.html#l00528">direction_name()</a>, <a class="el" href="trap_8h_source.html#l00070">vehicle_handle_trap_data::do_explosion</a>, <a class="el" href="explosion_8cpp_source.html#l00684">explosion_handler::explosion()</a>, <a class="el" href="map_8cpp_source.html#l00141">get_map()</a>, <a class="el" href="character_8cpp_source.html#l00381">get_player_character()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00054">string_id&lt; T &gt;::id()</a>, <a class="el" href="trap_8h_source.html#l00071">vehicle_handle_trap_data::is_falling</a>, <a class="el" href="character_8cpp_source.html#l10214">Character::knows_trap()</a>, <a class="el" href="trap_8h_source.html#l00088">trap::loadid</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="trap_8cpp_source.html#l00177">trap::name()</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8cpp_source.html#l02518">part_with_feature()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="character_8cpp_source.html#l00707">Character::pos()</a>, <a class="el" href="map_8cpp_source.html#l05271">map::remove_trap()</a>, <a class="el" href="trap_8h_source.html#l00069">vehicle_handle_trap_data::remove_trap</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="rng_8cpp_source.html#l00096">roll_remainder()</a>, <a class="el" href="character_8cpp_source.html#l10384">Character::sees()</a>, <a class="el" href="trap_8h_source.html#l00081">vehicle_handle_trap_data::set_trap</a>, <a class="el" href="trap_8h_source.html#l00074">vehicle_handle_trap_data::shrapnel</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, <a class="el" href="trap_8h_source.html#l00076">vehicle_handle_trap_data::sound</a>, <a class="el" href="trap_8h_source.html#l00077">vehicle_handle_trap_data::sound_type</a>, <a class="el" href="trap_8h_source.html#l00078">vehicle_handle_trap_data::sound_variant</a>, <a class="el" href="trap_8h_source.html#l00075">vehicle_handle_trap_data::sound_volume</a>, <a class="el" href="map_8cpp_source.html#l04187">map::spawn_item()</a>, <a class="el" href="trap_8h_source.html#l00080">vehicle_handle_trap_data::spawn_items</a>, <a class="el" href="map_8cpp_source.html#l05135">map::tr_at()</a>, <a class="el" href="trap_8cpp_source.html#l00276">tr_null</a>, <a class="el" href="map_8cpp_source.html#l05187">map::trap_set()</a>, <a class="el" href="trap_8h_source.html#l00122">trap::vehicle_data</a>, and <a class="el" href="veh__type_8h_source.html#l00048">VPFLAG_WHEEL</a>.</p>

<p class="reference">Referenced by <a class="el" href="grab_8cpp_source.html#l00021">game::grabbed_veh_move()</a>, and <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>.</p>

</div>
</div>
<a id="aedeb37c9ce1c25bd8b9765e91ef6e502" name="aedeb37c9ce1c25bd8b9765e91ef6e502"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedeb37c9ce1c25bd8b9765e91ef6e502">&#9670;&nbsp;</a></span>handling_difficulty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float vehicle::handling_difficulty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns roughly driving skill level at which there is no chance of fumbling. </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04325">4325</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04326" name="l04326"></a><span class="lineno"> 4326</span>{</div>
<div class="line"><a id="l04327" name="l04327"></a><span class="lineno"> 4327</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> steer = std::max( 0.0f, <a class="code hl_function" href="classvehicle.html#aec2fcbe01499d105316d14c8b99107a2">steering_effectiveness</a>() );</div>
<div class="line"><a id="l04328" name="l04328"></a><span class="lineno"> 4328</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> ktraction = <a class="code hl_function" href="classvehicle.html#a9d41a3f9a7969c40ca5a9b7b5a3fdebe">k_traction</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.vehicle_wheel_traction( *<span class="keyword">this</span> ) );</div>
<div class="line"><a id="l04329" name="l04329"></a><span class="lineno"> 4329</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> aligned = std::max( 0.0f, 1.0f - ( <a class="code hl_function" href="classvehicle.html#a2bc8dfdab1fadc47966b0a69520c737c">face_vec</a>() - <a class="code hl_function" href="classvehicle.html#a050dcaa8958d866388b780738cf0e87d">dir_vec</a>() ).magnitude() );</div>
<div class="line"><a id="l04330" name="l04330"></a><span class="lineno"> 4330</span> </div>
<div class="line"><a id="l04331" name="l04331"></a><span class="lineno"> 4331</span>    <span class="comment">// TestVehicle: perfect steering, moving on road at 100 mph (25 tiles per turn) = 0.0</span></div>
<div class="line"><a id="l04332" name="l04332"></a><span class="lineno"> 4332</span>    <span class="comment">// TestVehicle but on grass (0.75 friction) = 2.5</span></div>
<div class="line"><a id="l04333" name="l04333"></a><span class="lineno"> 4333</span>    <span class="comment">// TestVehicle but with bad steering (0.5 steer) = 5</span></div>
<div class="line"><a id="l04334" name="l04334"></a><span class="lineno"> 4334</span>    <span class="comment">// TestVehicle but on fungal bed (0.5 friction) and bad steering = 10</span></div>
<div class="line"><a id="l04335" name="l04335"></a><span class="lineno"> 4335</span>    <span class="comment">// TestVehicle but turned 90 degrees during this turn (0 align) = 10</span></div>
<div class="line"><a id="l04336" name="l04336"></a><span class="lineno"> 4336</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> diff_mod = ( ( 1.0f - steer ) + ( 1.0f - ktraction ) + ( 1.0f - aligned ) );</div>
<div class="line"><a id="l04337" name="l04337"></a><span class="lineno"> 4337</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> * diff_mod / <a class="code hl_variable" href="namespacevehicles.html#a002783f4304f09443cfa9fa8efa9f6d4">vehicles::vmiph_per_tile</a>;</div>
<div class="line"><a id="l04338" name="l04338"></a><span class="lineno"> 4338</span>}</div>
<div class="ttc" id="aclassvehicle_html_a050dcaa8958d866388b780738cf0e87d"><div class="ttname"><a href="classvehicle.html#a050dcaa8958d866388b780738cf0e87d">vehicle::dir_vec</a></div><div class="ttdeci">rl_vec2d dir_vec() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l01225">vehicle_move.cpp:1225</a></div></div>
<div class="ttc" id="aclassvehicle_html_aec2fcbe01499d105316d14c8b99107a2"><div class="ttname"><a href="classvehicle.html#aec2fcbe01499d105316d14c8b99107a2">vehicle::steering_effectiveness</a></div><div class="ttdeci">float steering_effectiveness() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04284">vehicle.cpp:4284</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle__move_8cpp_source.html#l01225">dir_vec()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01220">face_vec()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l04097">k_traction()</a>, <a class="el" href="vehicle_8cpp_source.html#l04284">steering_effectiveness()</a>, <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>, and <a class="el" href="vehicle_8h_source.html#l00068">vehicles::vmiph_per_tile</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01061">pldrive()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00933">selfdrive()</a>.</p>

</div>
</div>
<a id="a6632253ff56fbb0b5eaee359011d1e3c" name="a6632253ff56fbb0b5eaee359011d1e3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6632253ff56fbb0b5eaee359011d1e3c">&#9670;&nbsp;</a></span>has_engine_conflict()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::has_engine_conflict </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classvpart__info.html">vpart_info</a> *&#160;</td>
          <td class="paramname"><em>possible_conflict</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>conflict_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01050">1050</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>{</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>    std::vector&lt;std::string&gt; new_excludes = possible_conflict-&gt;<a class="code hl_function" href="classvpart__info.html#a7cac583d9774af9d7721fdcfc9a08645">engine_excludes</a>();</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>    <span class="comment">// skip expensive string comparisons if there are no exclusions</span></div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>    <span class="keywordflow">if</span>( new_excludes.empty() ) {</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>    }</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span> </div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>    <span class="keywordtype">bool</span> has_conflict = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span> </div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> engine : <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a> ) {</div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>        std::vector&lt;std::string&gt; install_excludes = <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( engine ).<a class="code hl_function" href="classvpart__info.html#a7cac583d9774af9d7721fdcfc9a08645">engine_excludes</a>();</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>        std::vector&lt;std::string&gt; conflicts;</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>        std::set_intersection( new_excludes.begin(), new_excludes.end(), install_excludes.begin(),</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>                               install_excludes.end(), back_inserter( conflicts ) );</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>        <span class="keywordflow">if</span>( !conflicts.empty() ) {</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>            has_conflict = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>            conflict_type = conflicts.front();</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>        }</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>    }</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>    <span class="keywordflow">return</span> has_conflict;</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>}</div>
<div class="ttc" id="aclassvpart__info_html_a7cac583d9774af9d7721fdcfc9a08645"><div class="ttname"><a href="classvpart__info.html#a7cac583d9774af9d7721fdcfc9a08645">vpart_info::engine_excludes</a></div><div class="ttdeci">std::vector&lt; std::string &gt; engine_excludes() const</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8cpp_source.html#l00872">veh_type.cpp:872</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="veh__type_8cpp_source.html#l00872">vpart_info::engine_excludes()</a>, <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, and <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l01271">can_mount()</a>, and <a class="el" href="veh__interact_8cpp_source.html#l00678">veh_interact::is_drive_conflict()</a>.</p>

</div>
</div>
<a id="a603b71f04b9fdb63f400ac93fb4bea88" name="a603b71f04b9fdb63f400ac93fb4bea88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a603b71f04b9fdb63f400ac93fb4bea88">&#9670;&nbsp;</a></span>has_engine_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::has_engine_type </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>ft</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enabled</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01031">1031</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>{</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> e = 0; e &lt; <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.size(); ++e ) {</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aaea77fa5cfb98d7b1aadb0e71ee7a671">is_engine_type</a>( e, ft ) &amp;&amp; ( !<a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a> || <a class="code hl_function" href="classvehicle.html#a4d73f86ddc3aafe3231c33c098b9d6c8">is_engine_on</a>( e ) ) ) {</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>        }</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>    }</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>}</div>
<div class="ttc" id="aclassvehicle_html_aaea77fa5cfb98d7b1aadb0e71ee7a671"><div class="ttname"><a href="classvehicle.html#aaea77fa5cfb98d7b1aadb0e71ee7a671">vehicle::is_engine_type</a></div><div class="ttdeci">bool is_engine_type(int e, const itype_id &amp;ft) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01075">vehicle.cpp:1075</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a>, <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, <a class="el" href="vehicle_8cpp_source.html#l01087">is_engine_on()</a>, and <a class="el" href="vehicle_8cpp_source.html#l01075">is_engine_type()</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l00350">assign_veh_to_follow()</a>, <a class="el" href="game_8cpp_source.html#l05443">game::control_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l03554">max_reverse_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l00277">player_in_control()</a>, <a class="el" href="handle__action_8cpp_source.html#l00439">pldrive()</a>, <a class="el" href="npctalk_8cpp_source.html#l00339">tell_veh_stop_following()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>.</p>

</div>
</div>
<a id="a39ef96d5220fa3c0bde366f463039c21" name="a39ef96d5220fa3c0bde366f463039c21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39ef96d5220fa3c0bde366f463039c21">&#9670;&nbsp;</a></span>has_engine_type_not()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::has_engine_type_not </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>ft</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enabled</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01040">1040</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>{</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> e = 0; e &lt; <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.size(); ++e ) {</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#aaea77fa5cfb98d7b1aadb0e71ee7a671">is_engine_type</a>( e, ft ) &amp;&amp; ( !<a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a> || <a class="code hl_function" href="classvehicle.html#a4d73f86ddc3aafe3231c33c098b9d6c8">is_engine_on</a>( e ) ) ) {</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>        }</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>    }</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a>, <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, <a class="el" href="vehicle_8cpp_source.html#l01087">is_engine_on()</a>, and <a class="el" href="vehicle_8cpp_source.html#l01075">is_engine_type()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05033">idle()</a>, <a class="el" href="vehicle_8cpp_source.html#l00386">init_state()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="a8c4e8182afb214351822aa818e919c52" name="a8c4e8182afb214351822aa818e919c52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c4e8182afb214351822aa818e919c52">&#9670;&nbsp;</a></span>has_harnessed_animal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::has_harnessed_animal </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__move_8cpp_source.html#l00919">919</a> of file <a class="el" href="vehicle__move_8cpp_source.html">vehicle_move.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>{</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> e = 0; e &lt; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size(); e++ ) {</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ e ];</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>        <span class="keywordflow">if</span>( vp.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_variable" href="classvpart__info.html#ae9c50d26b3cc88604ae85573ee6599cd">fuel_type</a> == <a class="code hl_variable" href="vehicle__move_8cpp.html#a944ba9be1d911a61e9ca62af989355fd">fuel_type_animal</a> ) {</div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>            <a class="code hl_class" href="classmonster.html">monster</a> *mon = <a class="code hl_function" href="classvehicle.html#ab266c3250ffece69b5c2ddc9897d80d3">get_pet</a>( e );</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>            <span class="keywordflow">if</span>( mon &amp;&amp; mon-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="vehicle__move_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a> ) &amp;&amp; mon-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="vehicle__move_8cpp.html#a02a4844a7fb68c13a34dc40b0a9e94d8">effect_pet</a> ) ) {</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>            }</div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>        }</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>    }</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>}</div>
<div class="ttc" id="avehicle__move_8cpp_html_a02a4844a7fb68c13a34dc40b0a9e94d8"><div class="ttname"><a href="vehicle__move_8cpp.html#a02a4844a7fb68c13a34dc40b0a9e94d8">effect_pet</a></div><div class="ttdeci">static const efftype_id effect_pet(&quot;pet&quot;)</div></div>
<div class="ttc" id="avehicle__move_8cpp_html_a7697771dc47ecaeff36785ff20c9aa33"><div class="ttname"><a href="vehicle__move_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a></div><div class="ttdeci">static const efftype_id effect_harnessed(&quot;harnessed&quot;)</div></div>
<div class="ttc" id="avehicle__move_8cpp_html_a944ba9be1d911a61e9ca62af989355fd"><div class="ttname"><a href="vehicle__move_8cpp.html#a944ba9be1d911a61e9ca62af989355fd">fuel_type_animal</a></div><div class="ttdeci">static const itype_id fuel_type_animal(&quot;animal&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle__move_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a>, <a class="el" href="vehicle__move_8cpp.html#a02a4844a7fb68c13a34dc40b0a9e94d8">effect_pet</a>, <a class="el" href="veh__type_8h_source.html#l00203">vpart_info::fuel_type</a>, <a class="el" href="vehicle__move_8cpp.html#a944ba9be1d911a61e9ca62af989355fd">fuel_type_animal</a>, <a class="el" href="vehicle_8cpp_source.html#l03082">get_pet()</a>, <a class="el" href="creature_8cpp_source.html#l01173">Creature::has_effect()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00519">vehicle_part::info()</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l05443">game::control_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l00277">player_in_control()</a>, and <a class="el" href="handle__action_8cpp_source.html#l00439">pldrive()</a>.</p>

</div>
</div>
<a id="a075fec953ade4b95c94b4cc1f80fe4e9" name="a075fec953ade4b95c94b4cc1f80fe4e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a075fec953ade4b95c94b4cc1f80fe4e9">&#9670;&nbsp;</a></span>has_old_owner()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::has_old_owner </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l00839">839</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>                                   {</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>            <span class="keywordflow">return</span> !<a class="code hl_variable" href="classvehicle.html#a0e6255388e73823374ec4bc9097f87c3">old_owner</a>.<a class="code hl_function" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>();</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>        }</div>
<div class="ttc" id="aclassstring__id_html_a3ca78345025397b3d3ac22729ba1684b"><div class="ttname"><a href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">string_id::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdoc">Returns whether this represents the id of the null-object (in which case it's the null-id).</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00317">string_id.h:317</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="string__id_8h_source.html#l00317">string_id&lt; T &gt;::is_null()</a>, and <a class="el" href="vehicle_8h_source.html#l01721">old_owner</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04197">handle_potential_theft()</a>.</p>

</div>
</div>
<a id="a16754f112125d292839bf0c10a99d7ae" name="a16754f112125d292839bf0c10a99d7ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16754f112125d292839bf0c10a99d7ae">&#9670;&nbsp;</a></span>has_owner()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::has_owner </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l00836">836</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>                               {</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>            <span class="keywordflow">return</span> !<a class="code hl_variable" href="classvehicle.html#afb548b72a0c24d9f9c436f198040e052">owner</a>.<a class="code hl_function" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>();</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="string__id_8h_source.html#l00317">string_id&lt; T &gt;::is_null()</a>, and <a class="el" href="vehicle_8h_source.html#l01719">owner</a>.</p>

<p class="reference">Referenced by <a class="el" href="mapgen_8cpp_source.html#l05494">map::apply_faction_ownership()</a>, <a class="el" href="veh__interact_8cpp_source.html#l00398">veh_interact::do_main_loop()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04197">handle_potential_theft()</a>.</p>

</div>
</div>
<a id="aca3ae013973cb492b14967e574189c1c" name="aca3ae013973cb492b14967e574189c1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca3ae013973cb492b14967e574189c1c">&#9670;&nbsp;</a></span>has_part() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::has_part </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enabled</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if vehicle has at least one unbroken part with specified flag. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flag</td><td>Specified flag to search parts for </td></tr>
    <tr><td class="paramname">enabled</td><td>if set part must also be enabled to be considered </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if part is found </dd></dl>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02558">2558</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02559" name="l02559"></a><span class="lineno"> 2559</span>{</div>
<div class="line"><a id="l02560" name="l02560"></a><span class="lineno"> 2560</span>    <span class="keywordflow">return</span> std::any_of( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.begin(), <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.end(), [&amp;flag, &amp;<a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a>]( <span class="keyword">const</span> <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp; e ) {</div>
<div class="line"><a id="l02561" name="l02561"></a><span class="lineno"> 2561</span>        return !e.removed &amp;&amp; ( !enabled || e.enabled ) &amp;&amp; !e.is_broken() &amp;&amp; e.info().has_flag( flag );</div>
<div class="line"><a id="l02562" name="l02562"></a><span class="lineno"> 2562</span>    } );</div>
<div class="line"><a id="l02563" name="l02563"></a><span class="lineno"> 2563</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>, <a class="el" href="vehicle_8cpp_source.html#l05033">idle()</a>, <a class="el" href="vehicle_8cpp_source.html#l01570">install_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l04017">is_rotorcraft()</a>, <a class="el" href="vehicle_8cpp_source.html#l05096">on_move()</a>, <a class="el" href="map_8cpp_source.html#l04677">map::process_items_in_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00266">set_electronics_menu_options()</a>, <a class="el" href="turret_8cpp_source.html#l00425">turrets_set_targeting()</a>, <a class="el" href="vehicle_8cpp_source.html#l06657">update_time()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="acfb71c4f46718a813eb4f29a0bd0b3db" name="acfb71c4f46718a813eb4f29a0bd0b3db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfb71c4f46718a813eb4f29a0bd0b3db">&#9670;&nbsp;</a></span>has_part() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::has_part </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enabled</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if vehicle has at least one unbroken part with specified flag. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pos</td><td>limit check for parts to this global position </td></tr>
    <tr><td class="paramname">flag</td><td>The specified flag </td></tr>
    <tr><td class="paramname">enabled</td><td>if set part must also be enabled to be considered </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02565">2565</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02566" name="l02566"></a><span class="lineno"> 2566</span>{</div>
<div class="line"><a id="l02567" name="l02567"></a><span class="lineno"> 2567</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> relative_pos = <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> - <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>();</div>
<div class="line"><a id="l02568" name="l02568"></a><span class="lineno"> 2568</span> </div>
<div class="line"><a id="l02569" name="l02569"></a><span class="lineno"> 2569</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l02570" name="l02570"></a><span class="lineno"> 2570</span>        <span class="keywordflow">if</span>( e.precalc[0] != relative_pos ) {</div>
<div class="line"><a id="l02571" name="l02571"></a><span class="lineno"> 2571</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02572" name="l02572"></a><span class="lineno"> 2572</span>        }</div>
<div class="line"><a id="l02573" name="l02573"></a><span class="lineno"> 2573</span>        <span class="keywordflow">if</span>( !e.removed &amp;&amp; ( !<a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a> || e.enabled ) &amp;&amp; !e.is_broken() &amp;&amp; e.info().has_flag( flag ) ) {</div>
<div class="line"><a id="l02574" name="l02574"></a><span class="lineno"> 2574</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02575" name="l02575"></a><span class="lineno"> 2575</span>        }</div>
<div class="line"><a id="l02576" name="l02576"></a><span class="lineno"> 2576</span>    }</div>
<div class="line"><a id="l02577" name="l02577"></a><span class="lineno"> 2577</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02578" name="l02578"></a><span class="lineno"> 2578</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a>, <a class="el" href="vehicle_8cpp_source.html#l03101">global_pos3()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="vehicle_8h_source.html#l01859">pos</a>.</p>

</div>
</div>
<a id="a450b5dd0e3c8e21773995962f381157b" name="a450b5dd0e3c8e21773995962f381157b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a450b5dd0e3c8e21773995962f381157b">&#9670;&nbsp;</a></span>has_security_working()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::has_security_working </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01112">1112</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>{</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>    <span class="keywordtype">bool</span> found_security = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a> ) &gt; 0 ) {</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> s : <a class="code hl_variable" href="classvehicle.html#aa33bd32301526128292da1ec7f78be55">speciality</a> ) {</div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( s, <span class="stringliteral">&quot;SECURITY&quot;</span> ) &amp;&amp; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ s ].is_available() ) {</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>                found_security = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>            }</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>        }</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>    }</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>    <span class="keywordflow">return</span> found_security;</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>}</div>
<div class="ttc" id="aclassvehicle_html_aa33bd32301526128292da1ec7f78be55"><div class="ttname"><a href="classvehicle.html#aa33bd32301526128292da1ec7f78be55">vehicle::speciality</a></div><div class="ttdeci">std::vector&lt; int &gt; speciality</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01766">vehicle.h:1766</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l03179">fuel_left()</a>, <a class="el" href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, <a class="el" href="vehicle_8cpp_source.html#l02875">part_flag()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="vehicle_8h_source.html#l01766">speciality</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l01435">alarm()</a>, <a class="el" href="iuse_8cpp_source.html#l08161">hackveh()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l01786">activity_handlers::hotwire_finish()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00454">interact_vehicle_locked()</a>.</p>

</div>
</div>
<a id="a6afe452e4097f52337af003011c59568" name="a6afe452e4097f52337af003011c59568"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6afe452e4097f52337af003011c59568">&#9670;&nbsp;</a></span>has_structural_part()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::has_structural_part </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>dp</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01239">1239</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>{</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keywordtype">int</span> elem : <a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( dp, <span class="keyword">false</span> ) ) {</div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( elem ).location == <a class="code hl_function" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure</a> &amp;&amp;</div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>            !<a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( elem ).has_flag( <span class="stringliteral">&quot;PROTRUSION&quot;</span> ) ) {</div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>        }</div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>    }</div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure()</a>, and <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l01271">can_mount()</a>.</p>

</div>
</div>
<a id="ae080ba753c5c752d846ec95df31d4bdd" name="ae080ba753c5c752d846ec95df31d4bdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae080ba753c5c752d846ec95df31d4bdd">&#9670;&nbsp;</a></span>has_sufficient_rotorlift()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::has_sufficient_rotorlift </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04011">4011</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04012" name="l04012"></a><span class="lineno"> 4012</span>{</div>
<div class="line"><a id="l04013" name="l04013"></a><span class="lineno"> 4013</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#af531084b2df70f7d6458cb7c3093bbcf">lift_thrust_of_rotorcraft</a>( <span class="keyword">true</span> ) &gt; <a class="code hl_function" href="namespaceunits.html#a8c82ba4d3b63fad2ed53671ae708056e">to_newton</a>( <a class="code hl_function" href="classvehicle.html#a5a7d83716bf73d4b58d265b626872d01">total_mass</a>() );</div>
<div class="line"><a id="l04014" name="l04014"></a><span class="lineno"> 4014</span>}</div>
<div class="ttc" id="aclassvehicle_html_af531084b2df70f7d6458cb7c3093bbcf"><div class="ttname"><a href="classvehicle.html#af531084b2df70f7d6458cb7c3093bbcf">vehicle::lift_thrust_of_rotorcraft</a></div><div class="ttdeci">double lift_thrust_of_rotorcraft(bool fuelled, bool safe=false) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03995">vehicle.cpp:3995</a></div></div>
<div class="ttc" id="anamespaceunits_html_a8c82ba4d3b63fad2ed53671ae708056e"><div class="ttname"><a href="namespaceunits.html#a8c82ba4d3b63fad2ed53671ae708056e">units::to_newton</a></div><div class="ttdeci">constexpr value_type to_newton(const quantity&lt; value_type, mass_in_milligram_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units__mass_8h_source.html#l00079">units_mass.h:79</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l03995">lift_thrust_of_rotorcraft()</a>, <a class="el" href="units__mass_8h_source.html#l00079">units::to_newton()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03126">total_mass()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04017">is_rotorcraft()</a>.</p>

</div>
</div>
<a id="a35d54e8a51e9571f03c0e192c70af09f" name="a35d54e8a51e9571f03c0e192c70af09f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35d54e8a51e9571f03c0e192c70af09f">&#9670;&nbsp;</a></span>has_tow_attached()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::has_tow_attached </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05889">5889</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05890" name="l05890"></a><span class="lineno"> 5890</span>{</div>
<div class="line"><a id="l05891" name="l05891"></a><span class="lineno"> 5891</span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05892" name="l05892"></a><span class="lineno"> 5892</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a397b40aa92dd1fd09ee592aa279bc656">get_all_parts</a>() ) {</div>
<div class="line"><a id="l05893" name="l05893"></a><span class="lineno"> 5893</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> p = vp.part_index();</div>
<div class="line"><a id="l05894" name="l05894"></a><span class="lineno"> 5894</span>        <span class="keywordflow">if</span>( vp.part().removed ) {</div>
<div class="line"><a id="l05895" name="l05895"></a><span class="lineno"> 5895</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05896" name="l05896"></a><span class="lineno"> 5896</span>        }</div>
<div class="line"><a id="l05897" name="l05897"></a><span class="lineno"> 5897</span> </div>
<div class="line"><a id="l05898" name="l05898"></a><span class="lineno"> 5898</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( p, <span class="stringliteral">&quot;TOW_CABLE&quot;</span>, <span class="keyword">true</span> ) &gt;= 0 &amp;&amp; vp.part().is_available() ) {</div>
<div class="line"><a id="l05899" name="l05899"></a><span class="lineno"> 5899</span>            <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05900" name="l05900"></a><span class="lineno"> 5900</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05901" name="l05901"></a><span class="lineno"> 5901</span>        }</div>
<div class="line"><a id="l05902" name="l05902"></a><span class="lineno"> 5902</span>    }</div>
<div class="line"><a id="l05903" name="l05903"></a><span class="lineno"> 5903</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l05904" name="l05904"></a><span class="lineno"> 5904</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l06882">get_all_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l02518">part_with_feature()</a>, and <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse_8cpp_source.html#l08782">iuse::tow_attach()</a>.</p>

</div>
</div>
<a id="ad842343ffa2e67bbd0ad708bf7f7bf93" name="ad842343ffa2e67bbd0ad708bf7f7bf93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad842343ffa2e67bbd0ad708bf7f7bf93">&#9670;&nbsp;</a></span>honk_horn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::honk_horn </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01113">1113</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>{</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> no_power = !<a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>    <span class="keywordtype">bool</span> honked = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span> </div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">get_avail_parts</a>( <span class="stringliteral">&quot;HORN&quot;</span> ) ) {</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>        <span class="comment">//Only bicycle horn doesn&#39;t need electricity to work</span></div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>        <span class="keyword">const</span> <a class="code hl_class" href="classvpart__info.html">vpart_info</a> &amp;horn_type = vp.info();</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>        <span class="keywordflow">if</span>( ( horn_type.<a class="code hl_function" href="classvpart__info.html#a3beec15086f138455d92d1897d867780">get_id</a>() != <a class="code hl_class" href="classstring__id.html">vpart_id</a>( <span class="stringliteral">&quot;horn_bicycle&quot;</span> ) ) &amp;&amp; no_power ) {</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>        }</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>        <span class="keywordflow">if</span>( !honked ) {</div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You honk the horn!&quot;</span> ) );</div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>            honked = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>        }</div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>        <span class="comment">//Get global position of horn</span></div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> horn_pos = vp.pos();</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>        <span class="comment">//Determine sound</span></div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>        <span class="keywordflow">if</span>( horn_type.<a class="code hl_variable" href="classvpart__info.html#a160cad4578895aa1f7006436dd57f5cd">bonus</a> &gt;= 110 ) {</div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>            <span class="comment">//~ Loud horn sound</span></div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( horn_pos, horn_type.<a class="code hl_variable" href="classvpart__info.html#a160cad4578895aa1f7006436dd57f5cd">bonus</a>, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;HOOOOORNK!&quot;</span> ), <span class="keyword">false</span>,</div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>                           <span class="stringliteral">&quot;vehicle&quot;</span>, <span class="stringliteral">&quot;horn_loud&quot;</span> );</div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( horn_type.<a class="code hl_variable" href="classvpart__info.html#a160cad4578895aa1f7006436dd57f5cd">bonus</a> &gt;= 80 ) {</div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>            <span class="comment">//~ Moderate horn sound</span></div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( horn_pos, horn_type.<a class="code hl_variable" href="classvpart__info.html#a160cad4578895aa1f7006436dd57f5cd">bonus</a>, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;BEEEP!&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;vehicle&quot;</span>,</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>                           <span class="stringliteral">&quot;horn_medium&quot;</span> );</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>            <span class="comment">//~ Weak horn sound</span></div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( horn_pos, horn_type.<a class="code hl_variable" href="classvpart__info.html#a160cad4578895aa1f7006436dd57f5cd">bonus</a>, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;honk.&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;vehicle&quot;</span>,</div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>                           <span class="stringliteral">&quot;horn_low&quot;</span> );</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>        }</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>    }</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span> </div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>    <span class="keywordflow">if</span>( !honked ) {</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You honk the horn, but nothing happens.&quot;</span> ) );</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>    }</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>}</div>
<div class="ttc" id="aclassvpart__info_html_a160cad4578895aa1f7006436dd57f5cd"><div class="ttname"><a href="classvpart__info.html#a160cad4578895aa1f7006436dd57f5cd">vpart_info::bonus</a></div><div class="ttdeci">int bonus</div><div class="ttdoc">seatbelt (str), muffler (%), horn (vol), light (intensity), recharing (power)</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00269">veh_type.h:269</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::alarm</a>, <a class="el" href="veh__type_8h_source.html#l00269">vpart_info::bonus</a>, <a class="el" href="vehicle_8cpp_source.html#l03179">fuel_left()</a>, <a class="el" href="vehicle__use_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, <a class="el" href="vehicle_8cpp_source.html#l02678">get_avail_parts()</a>, <a class="el" href="veh__type_8h_source.html#l00147">vpart_info::get_id()</a>, and <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="aa99cb04cc85e3bd40d2e93197194284c" name="aa99cb04cc85e3bd40d2e93197194284c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa99cb04cc85e3bd40d2e93197194284c">&#9670;&nbsp;</a></span>idle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::idle </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>on_map</em> = <code>true</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05033">5033</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05034" name="l05034"></a><span class="lineno"> 5034</span>{</div>
<div class="line"><a id="l05035" name="l05035"></a><span class="lineno"> 5035</span>    <a class="code hl_function" href="classvehicle.html#aaafc01747fef78702c196ca9cf39a1bd">power_parts</a>();</div>
<div class="line"><a id="l05036" name="l05036"></a><span class="lineno"> 5036</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> &amp;&amp; <a class="code hl_function" href="classvehicle.html#a73db9a09464720b32da8e3f214475a8e">total_power_w</a>() &gt; 0 ) {</div>
<div class="line"><a id="l05037" name="l05037"></a><span class="lineno"> 5037</span>        <span class="keywordtype">int</span> idle_rate = <a class="code hl_variable" href="classvehicle.html#a6df763082e71eb21a793372711c907fa">alternator_load</a>;</div>
<div class="line"><a id="l05038" name="l05038"></a><span class="lineno"> 5038</span>        <span class="keywordflow">if</span>( idle_rate &lt; 10 ) {</div>
<div class="line"><a id="l05039" name="l05039"></a><span class="lineno"> 5039</span>            idle_rate = 10;    <span class="comment">// minimum idle is 1% of full throttle</span></div>
<div class="line"><a id="l05040" name="l05040"></a><span class="lineno"> 5040</span>        }</div>
<div class="line"><a id="l05041" name="l05041"></a><span class="lineno"> 5041</span>        <span class="comment">// Helicopters use extra power just to stay in the air</span></div>
<div class="line"><a id="l05042" name="l05042"></a><span class="lineno"> 5042</span>        <span class="comment">// 100 means 10% of power</span></div>
<div class="line"><a id="l05043" name="l05043"></a><span class="lineno"> 5043</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a292961ab33a42bf495d19b8692f6f105">is_rotorcraft</a>() &amp;&amp; <a class="code hl_function" href="classvehicle.html#a6ac15340cefeea4793448cdb34784011">is_flying_in_air</a>() ) {</div>
<div class="line"><a id="l05044" name="l05044"></a><span class="lineno"> 5044</span>            idle_rate = 100;</div>
<div class="line"><a id="l05045" name="l05045"></a><span class="lineno"> 5045</span>        }</div>
<div class="line"><a id="l05046" name="l05046"></a><span class="lineno"> 5046</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a39ef96d5220fa3c0bde366f463039c21">has_engine_type_not</a>( <a class="code hl_variable" href="vehicle_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l05047" name="l05047"></a><span class="lineno"> 5047</span>            <a class="code hl_function" href="classvehicle.html#a69a37e32958ea0bffc377cc3e0ece913">consume_fuel</a>( idle_rate, to_turns&lt;int&gt;( 1_turns ), <span class="keyword">true</span> );</div>
<div class="line"><a id="l05048" name="l05048"></a><span class="lineno"> 5048</span>        }</div>
<div class="line"><a id="l05049" name="l05049"></a><span class="lineno"> 5049</span> </div>
<div class="line"><a id="l05050" name="l05050"></a><span class="lineno"> 5050</span>        <span class="keywordflow">if</span>( on_map ) {</div>
<div class="line"><a id="l05051" name="l05051"></a><span class="lineno"> 5051</span>            <a class="code hl_function" href="classvehicle.html#a8bdc82052e35e69dd5f65e1177a13a95">noise_and_smoke</a>( idle_rate, 1_turns );</div>
<div class="line"><a id="l05052" name="l05052"></a><span class="lineno"> 5052</span>        }</div>
<div class="line"><a id="l05053" name="l05053"></a><span class="lineno"> 5053</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05054" name="l05054"></a><span class="lineno"> 5054</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> &amp;&amp; <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>() ) &amp;&amp;</div>
<div class="line"><a id="l05055" name="l05055"></a><span class="lineno"> 5055</span>            ( <a class="code hl_function" href="classvehicle.html#a39ef96d5220fa3c0bde366f463039c21">has_engine_type_not</a>( <a class="code hl_variable" href="vehicle_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a>, <span class="keyword">true</span> ) &amp;&amp; <a class="code hl_function" href="classvehicle.html#a39ef96d5220fa3c0bde366f463039c21">has_engine_type_not</a>( <a class="code hl_variable" href="vehicle_8cpp.html#a944ba9be1d911a61e9ca62af989355fd">fuel_type_animal</a>, <span class="keyword">true</span> ) &amp;&amp;</div>
<div class="line"><a id="l05056" name="l05056"></a><span class="lineno"> 5056</span>              <a class="code hl_function" href="classvehicle.html#a39ef96d5220fa3c0bde366f463039c21">has_engine_type_not</a>( <a class="code hl_variable" href="vehicle_8cpp.html#aacae8af2b949fe924016b5e370170fc8">fuel_type_wind</a>, <span class="keyword">true</span> ) &amp;&amp; <a class="code hl_function" href="classvehicle.html#a39ef96d5220fa3c0bde366f463039c21">has_engine_type_not</a>( <a class="code hl_variable" href="vehicle_8cpp.html#adf09e0f2410a6b0b61ebc369b0ce462c">fuel_type_mana</a>, <span class="keyword">true</span> ) ) ) {</div>
<div class="line"><a id="l05057" name="l05057"></a><span class="lineno"> 5057</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s&#39;s engine dies!&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l05058" name="l05058"></a><span class="lineno"> 5058</span>        }</div>
<div class="line"><a id="l05059" name="l05059"></a><span class="lineno"> 5059</span>        <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05060" name="l05060"></a><span class="lineno"> 5060</span>    }</div>
<div class="line"><a id="l05061" name="l05061"></a><span class="lineno"> 5061</span> </div>
<div class="line"><a id="l05062" name="l05062"></a><span class="lineno"> 5062</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="group__Weather.html#gadb21721b572a715148778ab71405819a">warm_enough_to_plant</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() ) ) {</div>
<div class="line"><a id="l05063" name="l05063"></a><span class="lineno"> 5063</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a791413b7697a0ef434df0fe73d85b9fe">get_enabled_parts</a>( <span class="stringliteral">&quot;PLANTER&quot;</span> ) ) {</div>
<div class="line"><a id="l05064" name="l05064"></a><span class="lineno"> 5064</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>() ) ) {</div>
<div class="line"><a id="l05065" name="l05065"></a><span class="lineno"> 5065</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s&#39;s planter turns off due to low temperature.&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l05066" name="l05066"></a><span class="lineno"> 5066</span>            }</div>
<div class="line"><a id="l05067" name="l05067"></a><span class="lineno"> 5067</span>            vp.part().enabled = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05068" name="l05068"></a><span class="lineno"> 5068</span>        }</div>
<div class="line"><a id="l05069" name="l05069"></a><span class="lineno"> 5069</span>    }</div>
<div class="line"><a id="l05070" name="l05070"></a><span class="lineno"> 5070</span> </div>
<div class="line"><a id="l05071" name="l05071"></a><span class="lineno"> 5071</span>    <span class="keywordflow">if</span>( !on_map ) {</div>
<div class="line"><a id="l05072" name="l05072"></a><span class="lineno"> 5072</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05073" name="l05073"></a><span class="lineno"> 5073</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05074" name="l05074"></a><span class="lineno"> 5074</span>        <a class="code hl_function" href="classvehicle.html#a43595d99bbf7a719529147ce12c0b959">update_time</a>( <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l05075" name="l05075"></a><span class="lineno"> 5075</span>    }</div>
<div class="line"><a id="l05076" name="l05076"></a><span class="lineno"> 5076</span> </div>
<div class="line"><a id="l05077" name="l05077"></a><span class="lineno"> 5077</span>    <a class="code hl_function" href="classvehicle.html#ab1a357d8a761eee6126a31549e5a2267">process_emitters</a>();</div>
<div class="line"><a id="l05078" name="l05078"></a><span class="lineno"> 5078</span> </div>
<div class="line"><a id="l05079" name="l05079"></a><span class="lineno"> 5079</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;STEREO&quot;</span>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l05080" name="l05080"></a><span class="lineno"> 5080</span>        <a class="code hl_function" href="classvehicle.html#a872c70ddff1081cf426fa695bcdf4153">play_music</a>();</div>
<div class="line"><a id="l05081" name="l05081"></a><span class="lineno"> 5081</span>    }</div>
<div class="line"><a id="l05082" name="l05082"></a><span class="lineno"> 5082</span> </div>
<div class="line"><a id="l05083" name="l05083"></a><span class="lineno"> 5083</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;CHIMES&quot;</span>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l05084" name="l05084"></a><span class="lineno"> 5084</span>        <a class="code hl_function" href="classvehicle.html#af878a8bbb20a0b7db5c776067c7a1a40">play_chimes</a>();</div>
<div class="line"><a id="l05085" name="l05085"></a><span class="lineno"> 5085</span>    }</div>
<div class="line"><a id="l05086" name="l05086"></a><span class="lineno"> 5086</span> </div>
<div class="line"><a id="l05087" name="l05087"></a><span class="lineno"> 5087</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;CRASH_TERRAIN_AROUND&quot;</span>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l05088" name="l05088"></a><span class="lineno"> 5088</span>        <a class="code hl_function" href="classvehicle.html#a1a59e5df3ef43114973413525dcafaa9">crash_terrain_around</a>();</div>
<div class="line"><a id="l05089" name="l05089"></a><span class="lineno"> 5089</span>    }</div>
<div class="line"><a id="l05090" name="l05090"></a><span class="lineno"> 5090</span> </div>
<div class="line"><a id="l05091" name="l05091"></a><span class="lineno"> 5091</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a949775a37c7daa7a6b67e510f548bca3">is_alarm_on</a> ) {</div>
<div class="line"><a id="l05092" name="l05092"></a><span class="lineno"> 5092</span>        <a class="code hl_function" href="classvehicle.html#aa0eb12133195f158fb7f903572e4afcc">alarm</a>();</div>
<div class="line"><a id="l05093" name="l05093"></a><span class="lineno"> 5093</span>    }</div>
<div class="line"><a id="l05094" name="l05094"></a><span class="lineno"> 5094</span>}</div>
<div class="ttc" id="aclassvehicle_html_a1a59e5df3ef43114973413525dcafaa9"><div class="ttname"><a href="classvehicle.html#a1a59e5df3ef43114973413525dcafaa9">vehicle::crash_terrain_around</a></div><div class="ttdeci">void crash_terrain_around()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01230">vehicle_use.cpp:1230</a></div></div>
<div class="ttc" id="aclassvehicle_html_a39ef96d5220fa3c0bde366f463039c21"><div class="ttname"><a href="classvehicle.html#a39ef96d5220fa3c0bde366f463039c21">vehicle::has_engine_type_not</a></div><div class="ttdeci">bool has_engine_type_not(const itype_id &amp;ft, bool enabled) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01040">vehicle.cpp:1040</a></div></div>
<div class="ttc" id="aclassvehicle_html_a43595d99bbf7a719529147ce12c0b959"><div class="ttname"><a href="classvehicle.html#a43595d99bbf7a719529147ce12c0b959">vehicle::update_time</a></div><div class="ttdeci">void update_time(const time_point &amp;update_to)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06657">vehicle.cpp:6657</a></div></div>
<div class="ttc" id="aclassvehicle_html_a69a37e32958ea0bffc377cc3e0ece913"><div class="ttname"><a href="classvehicle.html#a69a37e32958ea0bffc377cc3e0ece913">vehicle::consume_fuel</a></div><div class="ttdeci">void consume_fuel(int load, int t_seconds=6, bool skip_electric=false)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04400">vehicle.cpp:4400</a></div></div>
<div class="ttc" id="aclassvehicle_html_a6df763082e71eb21a793372711c907fa"><div class="ttname"><a href="classvehicle.html#a6df763082e71eb21a793372711c907fa">vehicle::alternator_load</a></div><div class="ttdeci">int alternator_load</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01847">vehicle.h:1847</a></div></div>
<div class="ttc" id="aclassvehicle_html_a872c70ddff1081cf426fa695bcdf4153"><div class="ttname"><a href="classvehicle.html#a872c70ddff1081cf426fa695bcdf4153">vehicle::play_music</a></div><div class="ttdeci">void play_music()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01211">vehicle_use.cpp:1211</a></div></div>
<div class="ttc" id="aclassvehicle_html_a8bdc82052e35e69dd5f65e1177a13a95"><div class="ttname"><a href="classvehicle.html#a8bdc82052e35e69dd5f65e1177a13a95">vehicle::noise_and_smoke</a></div><div class="ttdeci">void noise_and_smoke(int load, time_duration time=1_turns)</div><div class="ttdoc">Generate noise or smoke from a vehicle with engines turned on load = how hard the engines are working...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03644">vehicle.cpp:3644</a></div></div>
<div class="ttc" id="aclassvehicle_html_aa0eb12133195f158fb7f903572e4afcc"><div class="ttname"><a href="classvehicle.html#aa0eb12133195f158fb7f903572e4afcc">vehicle::alarm</a></div><div class="ttdeci">void alarm()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01435">vehicle_use.cpp:1435</a></div></div>
<div class="ttc" id="aclassvehicle_html_aaafc01747fef78702c196ca9cf39a1bd"><div class="ttname"><a href="classvehicle.html#aaafc01747fef78702c196ca9cf39a1bd">vehicle::power_parts</a></div><div class="ttdeci">void power_parts()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04619">vehicle.cpp:4619</a></div></div>
<div class="ttc" id="aclassvehicle_html_ab1a357d8a761eee6126a31549e5a2267"><div class="ttname"><a href="classvehicle.html#ab1a357d8a761eee6126a31549e5a2267">vehicle::process_emitters</a></div><div class="ttdeci">void process_emitters()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06764">vehicle.cpp:6764</a></div></div>
<div class="ttc" id="aclassvehicle_html_af878a8bbb20a0b7db5c776067c7a1a40"><div class="ttname"><a href="classvehicle.html#af878a8bbb20a0b7db5c776067c7a1a40">vehicle::play_chimes</a></div><div class="ttdeci">void play_chimes()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01218">vehicle_use.cpp:1218</a></div></div>
<div class="ttc" id="avehicle_8cpp_html_aacae8af2b949fe924016b5e370170fc8"><div class="ttname"><a href="vehicle_8cpp.html#aacae8af2b949fe924016b5e370170fc8">fuel_type_wind</a></div><div class="ttdeci">static const itype_id fuel_type_wind(&quot;wind&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01435">alarm()</a>, <a class="el" href="vehicle_8h_source.html#l01847">alternator_load</a>, <a class="el" href="vehicle_8cpp_source.html#l04400">consume_fuel()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01230">crash_terrain_around()</a>, <a class="el" href="vehicle_8h_source.html#l01930">engine_on</a>, <a class="el" href="vehicle_8cpp.html#a944ba9be1d911a61e9ca62af989355fd">fuel_type_animal</a>, <a class="el" href="vehicle_8cpp.html#adf09e0f2410a6b0b61ebc369b0ce462c">fuel_type_mana</a>, <a class="el" href="vehicle_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a>, <a class="el" href="vehicle_8cpp.html#aacae8af2b949fe924016b5e370170fc8">fuel_type_wind</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l02721">get_enabled_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l03101">global_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l01040">has_engine_type_not()</a>, <a class="el" href="vehicle_8cpp_source.html#l02558">has_part()</a>, <a class="el" href="vehicle_8h_source.html#l01936">is_alarm_on</a>, <a class="el" href="vehicle_8cpp_source.html#l04027">is_flying_in_air()</a>, <a class="el" href="vehicle_8cpp_source.html#l04017">is_rotorcraft()</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="vehicle_8cpp_source.html#l03644">noise_and_smoke()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01218">play_chimes()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01211">play_music()</a>, <a class="el" href="vehicle_8cpp_source.html#l04619">power_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l06764">process_emitters()</a>, <a class="el" href="vehicle_8cpp_source.html#l03333">total_power_w()</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, <a class="el" href="vehicle_8cpp_source.html#l06657">update_time()</a>, and <a class="el" href="weather_8cpp_source.html#l01027">warm_enough_to_plant()</a>.</p>

</div>
</div>
<a id="a9b5b9d8cd2fc0b772daa3be20776e2ba" name="a9b5b9d8cd2fc0b772daa3be20776e2ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b5b9d8cd2fc0b772daa3be20776e2ba">&#9670;&nbsp;</a></span>immediate_path()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt; <a class="el" href="structpoint.html">point</a> &gt; vehicle::immediate_path </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">units::angle</a>&#160;</td>
          <td class="paramname"><em>rotate</em> = <code>0_degrees</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l00769">769</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>{</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>    std::set&lt;point&gt; points_to_check;</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> distance_to_check = 10 + ( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> / 800 );</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::angle</a> adjusted_angle = <a class="code hl_function" href="namespacedetail.html#a955ad02ade4f07084391a60ed80701bf">normalize</a>( <a class="code hl_variable" href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">face</a>.<a class="code hl_function" href="classtileray.html#a91ed01227e1754597024f4916f8bd6af">dir</a>() + <a class="code hl_function" href="vehicle__autodrive_8cpp.html#affed6d9410facda00cc52b22abf797ba">rotate</a> );</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>    <span class="comment">// clamp to multiples of 15.</span></div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>    adjusted_angle = <a class="code hl_function" href="units__utility_8h.html#a0ff5ed49bfcc963d25c49bd38df494e3">round_to_multiple_of</a>( adjusted_angle, 15_degrees );</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>    <a class="code hl_class" href="classtileray.html">tileray</a> collision_vector;</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>    collision_vector.<a class="code hl_function" href="classtileray.html#ab643ca3c50332c73009031331e7c8026">init</a>( adjusted_angle );</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>    <a class="code hl_struct" href="structpoint.html">point</a> top_left_actual = <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>().<a class="code hl_function" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>() + <a class="code hl_function" href="classvehicle.html#ad45ae53f6326f7fde4d8e59848470457">coord_translate</a>( <a class="code hl_variable" href="classvehicle.html#acfae2101cfd7f4b68d64157d8d6e0a4a">front_left</a> );</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>    <a class="code hl_struct" href="structpoint.html">point</a> top_right_actual = <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>().<a class="code hl_function" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>() + <a class="code hl_function" href="classvehicle.html#ad45ae53f6326f7fde4d8e59848470457">coord_translate</a>( <a class="code hl_variable" href="classvehicle.html#a94fa253f6f0ceedf40843bd249eca56e">front_right</a> );</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>    std::vector&lt;point&gt; front_row = <a class="code hl_function" href="coordinates_8h.html#a4a34f7ffa4c18effba7f8239c68c8738">line_to</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.getabs( top_left_actual ),</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>                                            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.getabs( top_right_actual ) );</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> &amp;elem : front_row ) {</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; distance_to_check; ++i ) {</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>            collision_vector.<a class="code hl_function" href="classtileray.html#a283722bbdbde0af59bbda1a26adc5b88">advance</a>( i );</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>            <a class="code hl_struct" href="structpoint.html">point</a> point_to_add = elem + <a class="code hl_struct" href="structpoint.html">point</a>( collision_vector.<a class="code hl_function" href="classtileray.html#aefd7fd88fdbfecf5731bbff553a7aab8">dx</a>(), collision_vector.<a class="code hl_function" href="classtileray.html#a27e3f200a89812a3d2fbc2e0e5710722">dy</a>() );</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>            points_to_check.emplace( point_to_add );</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>        }</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>    }</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>    <a class="code hl_variable" href="classvehicle.html#a5ee50a8425f281ee825025aaf1ef2ba4">collision_check_points</a> = points_to_check;</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>    <span class="keywordflow">return</span> points_to_check;</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>}</div>
<div class="ttc" id="aclassvehicle_html_a94fa253f6f0ceedf40843bd249eca56e"><div class="ttname"><a href="classvehicle.html#a94fa253f6f0ceedf40843bd249eca56e">vehicle::front_right</a></div><div class="ttdeci">point front_right</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01886">vehicle.h:1886</a></div></div>
<div class="ttc" id="aclassvehicle_html_acfae2101cfd7f4b68d64157d8d6e0a4a"><div class="ttname"><a href="classvehicle.html#acfae2101cfd7f4b68d64157d8d6e0a4a">vehicle::front_left</a></div><div class="ttdeci">point front_left</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01885">vehicle.h:1885</a></div></div>
<div class="ttc" id="anamespacedetail_html_a955ad02ade4f07084391a60ed80701bf"><div class="ttname"><a href="namespacedetail.html#a955ad02ade4f07084391a60ed80701bf">detail::normalize</a></div><div class="ttdeci">fp normalize(fp value)</div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__format-inl_8h_source.html#l01223">fmtlib_format-inl.h:1223</a></div></div>
<div class="ttc" id="aunits__utility_8h_html_a0ff5ed49bfcc963d25c49bd38df494e3"><div class="ttname"><a href="units__utility_8h.html#a0ff5ed49bfcc963d25c49bd38df494e3">round_to_multiple_of</a></div><div class="ttdeci">units::quantity&lt; T, U &gt; round_to_multiple_of(units::quantity&lt; T, U &gt; val, units::quantity&lt; T, U &gt; of)</div><div class="ttdef"><b>Definition:</b> <a href="units__utility_8h_source.html#l00038">units_utility.h:38</a></div></div>
<div class="ttc" id="avehicle__autodrive_8cpp_html_affed6d9410facda00cc52b22abf797ba"><div class="ttname"><a href="vehicle__autodrive_8cpp.html#affed6d9410facda00cc52b22abf797ba">rotate</a></div><div class="ttdeci">static point rotate(point p, quad_rotation rotation)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00515">vehicle_autodrive.cpp:515</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tileray_8cpp_source.html#l00194">tileray::advance()</a>, <a class="el" href="vehicle_8h_source.html#l00845">collision_check_points</a>, <a class="el" href="vehicle_8cpp_source.html#l02988">coord_translate()</a>, <a class="el" href="tileray_8cpp_source.html#l00074">tileray::dir()</a>, <a class="el" href="tileray_8cpp_source.html#l00064">tileray::dx()</a>, <a class="el" href="tileray_8cpp_source.html#l00069">tileray::dy()</a>, <a class="el" href="vehicle_8h_source.html#l01891">face</a>, <a class="el" href="vehicle_8h_source.html#l01885">front_left</a>, <a class="el" href="vehicle_8h_source.html#l01886">front_right</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l03101">global_pos3()</a>, <a class="el" href="tileray_8cpp_source.html#l00027">tileray::init()</a>, <a class="el" href="coordinates_8h_source.html#l00548">line_to()</a>, <a class="el" href="fmtlib__format-inl_8h_source.html#l01223">detail::normalize()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00515">rotate()</a>, <a class="el" href="units__utility_8h_source.html#l00038">round_to_multiple_of()</a>, <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>, and <a class="el" href="point_8h_source.html#l00220">tripoint::xy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l00816">drive_to_local_target()</a>.</p>

</div>
</div>
<a id="a0ebc79bba42df4fea00ee3a4e495cbde" name="a0ebc79bba42df4fea00ee3a4e495cbde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ebc79bba42df4fea00ee3a4e495cbde">&#9670;&nbsp;</a></span>index_of_part()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::index_of_part </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structvehicle__part.html">vehicle_part</a> *&#160;</td>
          <td class="paramname"><em>part</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>check_removed</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a vehicle part which is inside of this vehicle, returns the index of that part. </p>
<p >This exists solely because activities relating to vehicle editing require the index of the vehicle part to be passed around. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">part</td><td>The part to find. </td></tr>
    <tr><td class="paramname">check_removed</td><td>Check whether this part can be removed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The part index, -1 if it is not part of this vehicle. </dd></dl>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02911">2911</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02912" name="l02912"></a><span class="lineno"> 2912</span>{</div>
<div class="line"><a id="l02913" name="l02913"></a><span class="lineno"> 2913</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l02914" name="l02914"></a><span class="lineno"> 2914</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a397b40aa92dd1fd09ee592aa279bc656">get_all_parts</a>() ) {</div>
<div class="line"><a id="l02915" name="l02915"></a><span class="lineno"> 2915</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;next_part = vp.part();</div>
<div class="line"><a id="l02916" name="l02916"></a><span class="lineno"> 2916</span>            <span class="keywordflow">if</span>( !check_removed &amp;&amp; next_part.<a class="code hl_variable" href="structvehicle__part.html#ab1d4873f1384392595a1e01c463543a5">removed</a> ) {</div>
<div class="line"><a id="l02917" name="l02917"></a><span class="lineno"> 2917</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02918" name="l02918"></a><span class="lineno"> 2918</span>            }</div>
<div class="line"><a id="l02919" name="l02919"></a><span class="lineno"> 2919</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>-&gt;<a class="code hl_variable" href="structvehicle__part.html#a758f0754f2dd769001ab331eadeb55de">id</a> == next_part.<a class="code hl_variable" href="structvehicle__part.html#a758f0754f2dd769001ab331eadeb55de">id</a> &amp;&amp; <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>-&gt;<a class="code hl_variable" href="structvehicle__part.html#ac6e2dfa7178b8bed91baea3543961a86">mount</a> == vp.mount() ) {</div>
<div class="line"><a id="l02920" name="l02920"></a><span class="lineno"> 2920</span>                <span class="keywordflow">return</span> vp.part_index();</div>
<div class="line"><a id="l02921" name="l02921"></a><span class="lineno"> 2921</span>            }</div>
<div class="line"><a id="l02922" name="l02922"></a><span class="lineno"> 2922</span>        }</div>
<div class="line"><a id="l02923" name="l02923"></a><span class="lineno"> 2923</span>    }</div>
<div class="line"><a id="l02924" name="l02924"></a><span class="lineno"> 2924</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l02925" name="l02925"></a><span class="lineno"> 2925</span>}</div>
<div class="ttc" id="astructvehicle__part_html_a758f0754f2dd769001ab331eadeb55de"><div class="ttname"><a href="structvehicle__part.html#a758f0754f2dd769001ab331eadeb55de">vehicle_part::id</a></div><div class="ttdeci">vpart_id id</div><div class="ttdoc">What type of part is this?</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00435">vehicle.h:435</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l06882">get_all_parts()</a>, <a class="el" href="vehicle_8h_source.html#l00435">vehicle_part::id</a>, <a class="el" href="vehicle_8h_source.html#l00367">vehicle_part::mount</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, and <a class="el" href="vehicle_8h_source.html#l00410">vehicle_part::removed</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05199">add_item()</a>, <a class="el" href="turret_8cpp_source.html#l00084">turret_data::base()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l01273">can_do_activity_there()</a>, <a class="el" href="veh__interact_8cpp_source.html#l01270">veh_interact::do_mend()</a>, <a class="el" href="vehicle_8cpp_source.html#l00816">drive_to_local_target()</a>, <a class="el" href="vehicle_8cpp_source.html#l02760">get_next_shifted_index()</a>, <a class="el" href="veh__utils_8cpp_source.html#l00109">veh_utils::repair_part()</a>, <a class="el" href="veh__interact_8cpp_source.html#l00111">veh_interact::serialize_activity()</a>, and <a class="el" href="activity__item__handling_8cpp_source.html#l00908">vehicle_activity()</a>.</p>

</div>
</div>
<a id="a9d5520a059111acb3427c98580b713a8" name="a9d5520a059111acb3427c98580b713a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d5520a059111acb3427c98580b713a8">&#9670;&nbsp;</a></span>init_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::init_state </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>init_veh_fuel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>init_veh_status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l00386">386</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>{</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>    <span class="comment">// vehicle parts excluding engines are by default turned off</span></div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;pt : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>        pt.enabled = pt.base.is_engine();</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>    }</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span> </div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>    <span class="keywordtype">bool</span> destroySeats = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>    <span class="keywordtype">bool</span> destroyControls = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>    <span class="keywordtype">bool</span> destroyTank = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>    <span class="keywordtype">bool</span> destroyEngine = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>    <span class="keywordtype">bool</span> destroyTires = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>    <span class="keywordtype">bool</span> blood_covered = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>    <span class="keywordtype">bool</span> blood_inside = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>    <span class="keywordtype">bool</span> has_no_key = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>    <span class="keywordtype">bool</span> destroyAlarm = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span> </div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>    <span class="comment">// More realistically it should be -5 days old</span></div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>    <a class="code hl_variable" href="classvehicle.html#a987b54408280dc6a74da8c857907faf2">last_update</a> = <a class="code hl_variable" href="namespacecalendar.html#ab01178b933b4f1c62bd75b2edfdbaf79">calendar::start_of_cataclysm</a>;</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span> </div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>    <span class="comment">// veh_fuel_multiplier is percentage of fuel</span></div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>    <span class="comment">// 0 is empty, 100 is full tank, -1 is random 7% to 35%</span></div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>    <span class="keywordtype">int</span> veh_fuel_mult = init_veh_fuel;</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>    <span class="keywordflow">if</span>( init_veh_fuel == - 1 ) {</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>        veh_fuel_mult = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 7 );</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>    }</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>    <span class="keywordflow">if</span>( init_veh_fuel &gt; 100 ) {</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>        veh_fuel_mult = 100;</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>    }</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span> </div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>    <span class="comment">// veh_status is initial vehicle damage</span></div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>    <span class="comment">// -1 = light damage (DEFAULT)</span></div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>    <span class="comment">//  0 = undamaged</span></div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>    <span class="comment">//  1 = disabled, destroyed tires OR engine</span></div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>    <span class="keywordtype">int</span> veh_status = -1;</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>    <span class="keywordflow">if</span>( init_veh_status == 0 ) {</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>        veh_status = 0;</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>    }</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>    <span class="keywordflow">if</span>( init_veh_status == 1 ) {</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>        <span class="keywordtype">int</span> rand = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 100 );</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>        veh_status = 1;</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span> </div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>        <span class="keywordflow">if</span>( rand &lt;= 5 ) {          <span class="comment">//  seats are destroyed 5%</span></div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>            destroySeats = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( rand &lt;= 15 ) {  <span class="comment">// controls are destroyed 10%</span></div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>            destroyControls = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>            veh_fuel_mult += <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 7 );   <span class="comment">// add 0-7% more fuel if controls are destroyed</span></div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( rand &lt;= 23 ) {  <span class="comment">// battery, minireactor or gasoline tank are destroyed 8%</span></div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>            destroyTank = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( rand &lt;= 29 ) {  <span class="comment">// engine are destroyed 6%</span></div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>            destroyEngine = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>            veh_fuel_mult += <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 3, 12 );  <span class="comment">// add 3-12% more fuel if engine is destroyed</span></div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( rand &lt;= 66 ) {  <span class="comment">// tires are destroyed 37%</span></div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>            destroyTires = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>            veh_fuel_mult += <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 18 );  <span class="comment">// add 0-18% more fuel if tires are destroyed</span></div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>        } <span class="keywordflow">else</span> {                   <span class="comment">// vehicle locked 34%</span></div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>            has_no_key = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>        }</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>    }</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>    <span class="comment">// if locked, 16% chance something damaged</span></div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 6 ) &amp;&amp; has_no_key ) {</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>            destroyTank = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) ) {</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>            destroyEngine = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>            destroyTires = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>        }</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>        <span class="comment">//most cars should have a destroyed alarm</span></div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>        destroyAlarm = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>    }</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span> </div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>    <span class="comment">//Provide some variety to non-mint vehicles</span></div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>    <span class="keywordflow">if</span>( veh_status != 0 ) {</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>        <span class="comment">//Leave engine running in some vehicles, if the engine has not been destroyed</span></div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>        <span class="comment">//chance decays from 1 in 4 vehicles on day 0 to 1 in (day + 4) in the future.</span></div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>        <span class="keywordtype">int</span> current_day = std::max( to_days&lt;int&gt;( <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> - <a class="code hl_variable" href="namespacecalendar.html#a2ad145a605c70358e73fdd4a802ba21a">calendar::turn_zero</a> ), 0 );</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>        <span class="keywordflow">if</span>( veh_fuel_mult &gt; 0 &amp;&amp; !empty( <a class="code hl_function" href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">get_avail_parts</a>( <span class="stringliteral">&quot;ENGINE&quot;</span> ) ) &amp;&amp;</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>            <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( current_day + 4 ) &amp;&amp; !destroyEngine &amp;&amp; !has_no_key &amp;&amp;</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>            <a class="code hl_function" href="classvehicle.html#a39ef96d5220fa3c0bde366f463039c21">has_engine_type_not</a>( <a class="code hl_variable" href="vehicle_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>            <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>        }</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span> </div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>        <span class="keyword">auto</span> light_head  = <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 20 );</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>        <span class="keyword">auto</span> light_whead  = <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 20 ); <span class="comment">// wide-angle headlight</span></div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>        <span class="keyword">auto</span> light_dome  = <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 16 );</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>        <span class="keyword">auto</span> light_aisle = <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 8 );</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>        <span class="keyword">auto</span> light_hoverh = <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ); <span class="comment">// half circle overhead light</span></div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>        <span class="keyword">auto</span> light_overh = <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 );</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>        <span class="keyword">auto</span> light_atom  = <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 );</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;pt : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>            <span class="keywordflow">if</span>( pt.has_flag( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea0e5ba370df41b42336b154cd7fde38ec">VPFLAG_CONE_LIGHT</a> ) ) {</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>                pt.enabled = light_head;</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( pt.has_flag( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eac068ca47063a40941d3b0561a2f3be51">VPFLAG_WIDE_CONE_LIGHT</a> ) ) {</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>                pt.enabled = light_whead;</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( pt.has_flag( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eaf3126248fc27b984c14efbdd7c6c5c1e">VPFLAG_DOME_LIGHT</a> ) ) {</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>                pt.enabled = light_dome;</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( pt.has_flag( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea720126c390476258c46f0a80304004c6">VPFLAG_AISLE_LIGHT</a> ) ) {</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>                pt.enabled = light_aisle;</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( pt.has_flag( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eaf0ce59d9e0d42526c7e45dd7ca9aa571">VPFLAG_HALF_CIRCLE_LIGHT</a> ) ) {</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>                pt.enabled = light_hoverh;</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( pt.has_flag( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea3140fae054e4ead8de3f3c96b13df546">VPFLAG_CIRCLE_LIGHT</a> ) ) {</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>                pt.enabled = light_overh;</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( pt.has_flag( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea85a6cb3a255060849cba7b60f861c850">VPFLAG_ATOMIC_LIGHT</a> ) ) {</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>                pt.enabled = light_atom;</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>            }</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>        }</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span> </div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 10 ) ) {</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>            blood_covered = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>        }</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span> </div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 8 ) ) {</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>            blood_inside = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>        }</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span> </div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a7465f91fe80f1cf5df317d2ccebeaae7">get_parts_including_carried</a>( <span class="stringliteral">&quot;FRIDGE&quot;</span> ) ) {</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>            vp.part().enabled = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>        }</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span> </div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a7465f91fe80f1cf5df317d2ccebeaae7">get_parts_including_carried</a>( <span class="stringliteral">&quot;FREEZER&quot;</span> ) ) {</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>            vp.part().enabled = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>        }</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span> </div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a7465f91fe80f1cf5df317d2ccebeaae7">get_parts_including_carried</a>( <span class="stringliteral">&quot;WATER_PURIFIER&quot;</span> ) ) {</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>            vp.part().enabled = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>        }</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>    }</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span> </div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>    <a class="code hl_class" href="classcata_1_1optional.html">cata::optional&lt;point&gt;</a> blood_inside_pos;</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a397b40aa92dd1fd09ee592aa279bc656">get_all_parts</a>() ) {</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> p = vp.part_index();</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>        <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;pt = vp.part();</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span> </div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>        <span class="keywordflow">if</span>( vp.has_feature( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea1f5dd6711452a7442f76b7eeee387c8a">VPFLAG_REACTOR</a> ) ) {</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>            <span class="comment">// De-hardcoded reactors. Should always start active</span></div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>            pt.<a class="code hl_variable" href="structvehicle__part.html#a27a7cba7268cb7d3550ed2b7c9adc323">enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>        }</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span> </div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>        <span class="keywordflow">if</span>( pt.<a class="code hl_function" href="structvehicle__part.html#a545a18a0b04909ad7e0f51d971349b4b">is_reactor</a>() ) {</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>            <span class="keywordflow">if</span>( veh_fuel_mult == 100 ) { <span class="comment">// Mint condition vehicle</span></div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>                pt.<a class="code hl_function" href="structvehicle__part.html#ab16185500ef5d69edf04ffc7df422049">ammo_set</a>( <a class="code hl_variable" href="vehicle_8cpp.html#ae0a6efc65dd587028e5fbf37af06bdfc">itype_plut_cell</a>, pt.<a class="code hl_function" href="structvehicle__part.html#a3cdc75652e7509b56d164fe9e5c15231">ammo_capacity</a>() );</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) &amp;&amp; veh_fuel_mult &gt; 0 ) { <span class="comment">// Randomize charge a bit</span></div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>                pt.<a class="code hl_function" href="structvehicle__part.html#ab16185500ef5d69edf04ffc7df422049">ammo_set</a>( <a class="code hl_variable" href="vehicle_8cpp.html#ae0a6efc65dd587028e5fbf37af06bdfc">itype_plut_cell</a>, pt.<a class="code hl_function" href="structvehicle__part.html#a3cdc75652e7509b56d164fe9e5c15231">ammo_capacity</a>() * ( veh_fuel_mult + <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 10 ) ) / 100 );</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) &amp;&amp; veh_fuel_mult &gt; 0 ) {</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>                pt.<a class="code hl_function" href="structvehicle__part.html#ab16185500ef5d69edf04ffc7df422049">ammo_set</a>( <a class="code hl_variable" href="vehicle_8cpp.html#ae0a6efc65dd587028e5fbf37af06bdfc">itype_plut_cell</a>, pt.<a class="code hl_function" href="structvehicle__part.html#a3cdc75652e7509b56d164fe9e5c15231">ammo_capacity</a>() * ( veh_fuel_mult - <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 10 ) ) / 100 );</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>                pt.<a class="code hl_function" href="structvehicle__part.html#ab16185500ef5d69edf04ffc7df422049">ammo_set</a>( <a class="code hl_variable" href="vehicle_8cpp.html#ae0a6efc65dd587028e5fbf37af06bdfc">itype_plut_cell</a>, pt.<a class="code hl_function" href="structvehicle__part.html#a3cdc75652e7509b56d164fe9e5c15231">ammo_capacity</a>() * veh_fuel_mult / 100 );</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>            }</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>        }</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span> </div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>        <span class="keywordflow">if</span>( pt.<a class="code hl_function" href="structvehicle__part.html#afdff588649a9e481b9ba1fb3d5568c29">is_battery</a>() ) {</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>            <span class="keywordflow">if</span>( veh_fuel_mult == 100 ) { <span class="comment">// Mint condition vehicle</span></div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>                pt.<a class="code hl_function" href="structvehicle__part.html#ab16185500ef5d69edf04ffc7df422049">ammo_set</a>( <a class="code hl_variable" href="vehicle_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a>, pt.<a class="code hl_function" href="structvehicle__part.html#a3cdc75652e7509b56d164fe9e5c15231">ammo_capacity</a>() );</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) &amp;&amp; veh_fuel_mult &gt; 0 ) { <span class="comment">// Randomize battery ammo a bit</span></div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>                pt.<a class="code hl_function" href="structvehicle__part.html#ab16185500ef5d69edf04ffc7df422049">ammo_set</a>( <a class="code hl_variable" href="vehicle_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a>, pt.<a class="code hl_function" href="structvehicle__part.html#a3cdc75652e7509b56d164fe9e5c15231">ammo_capacity</a>() * ( veh_fuel_mult + <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 10 ) ) / 100 );</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) &amp;&amp; veh_fuel_mult &gt; 0 ) {</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>                pt.<a class="code hl_function" href="structvehicle__part.html#ab16185500ef5d69edf04ffc7df422049">ammo_set</a>( <a class="code hl_variable" href="vehicle_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a>, pt.<a class="code hl_function" href="structvehicle__part.html#a3cdc75652e7509b56d164fe9e5c15231">ammo_capacity</a>() * ( veh_fuel_mult - <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 10 ) ) / 100 );</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>                pt.<a class="code hl_function" href="structvehicle__part.html#ab16185500ef5d69edf04ffc7df422049">ammo_set</a>( <a class="code hl_variable" href="vehicle_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a>, pt.<a class="code hl_function" href="structvehicle__part.html#a3cdc75652e7509b56d164fe9e5c15231">ammo_capacity</a>() * veh_fuel_mult / 100 );</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>            }</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>        }</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span> </div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>        <span class="keywordflow">if</span>( pt.<a class="code hl_function" href="structvehicle__part.html#a1acf6a662e684e35e9ef4c26f02b4a42">is_tank</a>() &amp;&amp; !<a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a>-&gt;<a class="code hl_variable" href="structvehicle__prototype.html#a06a6007fba7df08c566fa470dd07385c">parts</a>[p].fuel.is_null() ) {</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>            <span class="keywordtype">int</span> qty = pt.<a class="code hl_function" href="structvehicle__part.html#a3cdc75652e7509b56d164fe9e5c15231">ammo_capacity</a>() * veh_fuel_mult / 100;</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>            qty *= std::max( <a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a>-&gt;<a class="code hl_variable" href="structvehicle__prototype.html#a06a6007fba7df08c566fa470dd07385c">parts</a>[p].fuel-&gt;stack_size, 1 );</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>            qty /= <a class="code hl_function" href="namespaceunits.html#a144476d36f26d6e1916493c3636d54dc">to_milliliter</a>( <a class="code hl_variable" href="namespaceunits.html#a58e7d31fbaa28a1dd45fb598f8d1fba9">units::legacy_volume_factor</a> );</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>            pt.<a class="code hl_function" href="structvehicle__part.html#ab16185500ef5d69edf04ffc7df422049">ammo_set</a>( <a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a>-&gt;<a class="code hl_variable" href="structvehicle__prototype.html#a06a6007fba7df08c566fa470dd07385c">parts</a>[ p ].fuel, qty );</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( pt.<a class="code hl_function" href="structvehicle__part.html#a212238a594301bf7ff4a1264421b6152">is_fuel_store</a>() &amp;&amp; !<a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a>-&gt;<a class="code hl_variable" href="structvehicle__prototype.html#a06a6007fba7df08c566fa470dd07385c">parts</a>[p].fuel.is_null() ) {</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>            <span class="keywordtype">int</span> qty = pt.<a class="code hl_function" href="structvehicle__part.html#a3cdc75652e7509b56d164fe9e5c15231">ammo_capacity</a>() * veh_fuel_mult / 100;</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>            pt.<a class="code hl_function" href="structvehicle__part.html#ab16185500ef5d69edf04ffc7df422049">ammo_set</a>( <a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a>-&gt;<a class="code hl_variable" href="structvehicle__prototype.html#a06a6007fba7df08c566fa470dd07385c">parts</a>[ p ].fuel, qty );</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>        }</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span> </div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>        <span class="keywordflow">if</span>( vp.has_feature( <span class="stringliteral">&quot;OPENABLE&quot;</span> ) ) { <span class="comment">// doors are closed</span></div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>            <span class="keywordflow">if</span>( !pt.<a class="code hl_variable" href="structvehicle__part.html#a4b540ba2ddca7ce064674398be48ae68">open</a> &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>                <a class="code hl_function" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">open</a>( p );</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>            }</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>        }</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>        <span class="keywordflow">if</span>( vp.has_feature( <span class="stringliteral">&quot;BOARDABLE&quot;</span> ) ) {   <span class="comment">// no passengers</span></div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>            pt.<a class="code hl_function" href="structvehicle__part.html#a86c3ad22b1284273f14e63ce726d685d">remove_flag</a>( <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaacbdd8bab66369a907eb2edbd4b209752">vehicle_part::passenger_flag</a> );</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>        }</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span> </div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>        <span class="comment">// initial vehicle damage</span></div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>        <span class="keywordflow">if</span>( veh_status == 0 ) {</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>            <span class="comment">// Completely mint condition vehicle</span></div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>            <a class="code hl_function" href="classvehicle.html#a84a1f3fed2f2075a8f8814e74de888c7">set_hp</a>( pt, vp.info().durability );</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>            <span class="comment">//a bit of initial damage :)</span></div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>            <span class="comment">//clamp 4d8 to the range of [8,20]. 8=broken, 20=undamaged.</span></div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>            <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="enums_8h.html#a00763863874f01b868849b27ceee73c9a1f85e94c05010d1308d67d1d918944e4">broken</a> = 8;</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>            <span class="keywordtype">int</span> unhurt = 20;</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>            <span class="keywordtype">int</span> roll = <a class="code hl_function" href="rng_8cpp.html#a7ba03e7147e43d808dc29c54bce9e57f">dice</a>( 4, 8 );</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>            <span class="keywordflow">if</span>( roll &lt; unhurt ) {</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>                <span class="keywordflow">if</span>( roll &lt;= <a class="code hl_enumvalue" href="enums_8h.html#a00763863874f01b868849b27ceee73c9a1f85e94c05010d1308d67d1d918944e4">broken</a> ) {</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>                    <a class="code hl_function" href="classvehicle.html#a84a1f3fed2f2075a8f8814e74de888c7">set_hp</a>( pt, 0 );</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>                    pt.<a class="code hl_function" href="structvehicle__part.html#a6f491190dc49841d818e4987e66ddbb4">ammo_unset</a>(); <span class="comment">//empty broken batteries and fuel tanks</span></div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>                    <a class="code hl_function" href="classvehicle.html#a84a1f3fed2f2075a8f8814e74de888c7">set_hp</a>( pt, ( roll - <a class="code hl_enumvalue" href="enums_8h.html#a00763863874f01b868849b27ceee73c9a1f85e94c05010d1308d67d1d918944e4">broken</a> ) / <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( unhurt - <a class="code hl_enumvalue" href="enums_8h.html#a00763863874f01b868849b27ceee73c9a1f85e94c05010d1308d67d1d918944e4">broken</a> ) * vp.info().durability );</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>                }</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>                <a class="code hl_function" href="classvehicle.html#a84a1f3fed2f2075a8f8814e74de888c7">set_hp</a>( pt, vp.info().durability );</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>            }</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span> </div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>            <span class="keywordflow">if</span>( vp.has_feature( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea29303a852c248ddb989e3ea9b8e95354">VPFLAG_ENGINE</a> ) ) {</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>                <span class="comment">// If possible set an engine fault rather than destroying the engine outright</span></div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>                <span class="keywordflow">if</span>( destroyEngine &amp;&amp; pt.<a class="code hl_function" href="structvehicle__part.html#a5dcc5fea1cf3a7b5cdc43c977cf6ddec">faults_potential</a>().empty() ) {</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>                    <a class="code hl_function" href="classvehicle.html#a84a1f3fed2f2075a8f8814e74de888c7">set_hp</a>( pt, 0 );</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( destroyEngine || <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>                    <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>                        pt.<a class="code hl_function" href="structvehicle__part.html#a633d16477878c952ed9775a43f2c8776">fault_set</a>( <a class="code hl_function" href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a>( pt.<a class="code hl_function" href="structvehicle__part.html#a5dcc5fea1cf3a7b5cdc43c977cf6ddec">faults_potential</a>() ) );</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>                    } <span class="keywordflow">while</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) );</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>                }</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span> </div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ( destroySeats &amp;&amp; ( vp.has_feature( <span class="stringliteral">&quot;SEAT&quot;</span> ) || vp.has_feature( <span class="stringliteral">&quot;SEATBELT&quot;</span> ) ) ) ||</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>                       ( destroyControls &amp;&amp; ( vp.has_feature( <span class="stringliteral">&quot;CONTROLS&quot;</span> ) || vp.has_feature( <span class="stringliteral">&quot;SECURITY&quot;</span> ) ) ) ||</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>                       ( destroyAlarm &amp;&amp; vp.has_feature( <span class="stringliteral">&quot;SECURITY&quot;</span> ) ) ) {</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>                <a class="code hl_function" href="classvehicle.html#a84a1f3fed2f2075a8f8814e74de888c7">set_hp</a>( pt, 0 );</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>            }</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span> </div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>            <span class="comment">// Fuel tanks should be emptied as well</span></div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>            <span class="keywordflow">if</span>( destroyTank &amp;&amp; pt.<a class="code hl_function" href="structvehicle__part.html#a212238a594301bf7ff4a1264421b6152">is_fuel_store</a>() ) {</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>                <a class="code hl_function" href="classvehicle.html#a84a1f3fed2f2075a8f8814e74de888c7">set_hp</a>( pt, 0 );</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>                pt.<a class="code hl_function" href="structvehicle__part.html#a6f491190dc49841d818e4987e66ddbb4">ammo_unset</a>();</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>            }</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span> </div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>            <span class="comment">//Solar panels have 25% of being destroyed</span></div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>            <span class="keywordflow">if</span>( vp.has_feature( <span class="stringliteral">&quot;SOLAR_PANEL&quot;</span> ) &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>                <a class="code hl_function" href="classvehicle.html#a84a1f3fed2f2075a8f8814e74de888c7">set_hp</a>( pt, 0 );</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>            }</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span> </div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>            <span class="comment">/* Bloodsplatter the front-end parts. Assume anything with x &gt; 0 is</span></div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span><span class="comment">            * the &quot;front&quot; of the vehicle (since the driver&#39;s seat is at (0, 0).</span></div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span><span class="comment">            * We&#39;ll be generous with the blood, since some may disappear before</span></div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span><span class="comment">            * the player gets a chance to see the vehicle. */</span></div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>            <span class="keywordflow">if</span>( blood_covered &amp;&amp; vp.mount().x &gt; 0 ) {</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>                    <span class="comment">//Loads of blood. (200 = completely red vehicle part)</span></div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>                    pt.<a class="code hl_variable" href="structvehicle__part.html#ad2b0eaca45327195e5ac1f9ee9f228bd">blood</a> = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 200, 600 );</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>                    <span class="comment">//Some blood</span></div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>                    pt.<a class="code hl_variable" href="structvehicle__part.html#ad2b0eaca45327195e5ac1f9ee9f228bd">blood</a> = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 50, 200 );</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>                }</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>            }</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span> </div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>            <span class="keywordflow">if</span>( blood_inside ) {</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>                <span class="comment">// blood is splattered around (blood_inside_pos),</span></div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>                <span class="comment">// coordinates relative to mount point; the center is always a seat</span></div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>                <span class="keywordflow">if</span>( blood_inside_pos ) {</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>                    <span class="keyword">const</span> <span class="keywordtype">int</span> distSq = std::pow( blood_inside_pos-&gt;x - vp.mount().x, 2 ) +</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>                                       std::pow( blood_inside_pos-&gt;y - vp.mount().y, 2 );</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>                    <span class="keywordflow">if</span>( distSq &lt;= 1 ) {</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>                        pt.<a class="code hl_variable" href="structvehicle__part.html#ad2b0eaca45327195e5ac1f9ee9f228bd">blood</a> = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 200, 400 ) - distSq * 100;</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>                    }</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( vp.has_feature( <span class="stringliteral">&quot;SEAT&quot;</span> ) ) {</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>                    <span class="comment">// Set the center of the bloody mess inside</span></div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>                    blood_inside_pos.<a class="code hl_function" href="classcata_1_1optional.html#ac0ebbf4addb3dacf63f8ff0217341174">emplace</a>( vp.mount() );</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>                }</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>            }</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>        }</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>        <span class="comment">//sets the vehicle to locked, if there is no key and an alarm part exists</span></div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>        <span class="keywordflow">if</span>( vp.has_feature( <span class="stringliteral">&quot;SECURITY&quot;</span> ) &amp;&amp; has_no_key &amp;&amp; pt.<a class="code hl_function" href="structvehicle__part.html#a4e3ef0215ad9ed276d592161518b7f0b">is_available</a>() ) {</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>            <a class="code hl_variable" href="classvehicle.html#a61be41a90435acf77c1c078c2966643b">is_locked</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span> </div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) ) {</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>                <span class="comment">// if vehicle has immobilizer 50% chance to add additional fault</span></div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>                pt.<a class="code hl_function" href="structvehicle__part.html#a633d16477878c952ed9775a43f2c8776">fault_set</a>( <a class="code hl_variable" href="vehicle_8cpp.html#abdff65814bacc115b63402844460a99e">fault_immobiliser</a> );</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>            }</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>        }</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>    }</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>    <span class="comment">// destroy tires until the vehicle is not drivable</span></div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>    <span class="keywordflow">if</span>( destroyTires &amp;&amp; !<a class="code hl_variable" href="classvehicle.html#a5c432c0da0ff47a483e3aa74548bd435">wheelcache</a>.empty() ) {</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>        <span class="keywordtype">int</span> tries = 0;</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>        <span class="keywordflow">while</span>( <a class="code hl_function" href="classvehicle.html#a578c681656be6b419c62799006008035">valid_wheel_config</a>() &amp;&amp; tries &lt; 100 ) {</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>            <span class="comment">// wheel config is still valid, destroy the tire.</span></div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>            <a class="code hl_function" href="classvehicle.html#a84a1f3fed2f2075a8f8814e74de888c7">set_hp</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a>( <a class="code hl_variable" href="classvehicle.html#a5c432c0da0ff47a483e3aa74548bd435">wheelcache</a> )], 0 );</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>            tries++;</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>        }</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>    }</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span> </div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>    <a class="code hl_function" href="classvehicle.html#a8e8079a6591b3104191c881509f16d61">invalidate_mass</a>();</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>}</div>
<div class="ttc" id="aclasscata_1_1optional_html_ac0ebbf4addb3dacf63f8ff0217341174"><div class="ttname"><a href="classcata_1_1optional.html#ac0ebbf4addb3dacf63f8ff0217341174">cata::optional::emplace</a></div><div class="ttdeci">T &amp; emplace(Args &amp;&amp;... args)</div><div class="ttdef"><b>Definition:</b> <a href="optional_8h_source.html#l00143">optional.h:143</a></div></div>
<div class="ttc" id="aclassvehicle_html_a578c681656be6b419c62799006008035"><div class="ttname"><a href="classvehicle.html#a578c681656be6b419c62799006008035">vehicle::valid_wheel_config</a></div><div class="ttdeci">bool valid_wheel_config() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04279">vehicle.cpp:4279</a></div></div>
<div class="ttc" id="aclassvehicle_html_a7465f91fe80f1cf5df317d2ccebeaae7"><div class="ttname"><a href="classvehicle.html#a7465f91fe80f1cf5df317d2ccebeaae7">vehicle::get_parts_including_carried</a></div><div class="ttdeci">vehicle_part_with_feature_range&lt; std::string &gt; get_parts_including_carried(std::string feature) const</div><div class="ttdoc">Yields a range of parts of this vehicle that each have the given feature and are not broken or remove...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02694">vehicle.cpp:2694</a></div></div>
<div class="ttc" id="aclassvehicle_html_a84a1f3fed2f2075a8f8814e74de888c7"><div class="ttname"><a href="classvehicle.html#a84a1f3fed2f2075a8f8814e74de888c7">vehicle::set_hp</a></div><div class="ttdeci">void set_hp(vehicle_part &amp;pt, int qty)</div><div class="ttdoc">Set stat for part constrained by range [0,durability].</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00527">vehicle_part.cpp:527</a></div></div>
<div class="ttc" id="aenums_8h_html_a00763863874f01b868849b27ceee73c9a1f85e94c05010d1308d67d1d918944e4"><div class="ttname"><a href="enums_8h.html#a00763863874f01b868849b27ceee73c9a1f85e94c05010d1308d67d1d918944e4">broken</a></div><div class="ttdeci">@ broken</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00323">enums.h:323</a></div></div>
<div class="ttc" id="anamespacecalendar_html_a2ad145a605c70358e73fdd4a802ba21a"><div class="ttname"><a href="namespacecalendar.html#a2ad145a605c70358e73fdd4a802ba21a">calendar::turn_zero</a></div><div class="ttdeci">const time_point turn_zero</div><div class="ttdoc">Represents time point 0.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00026">calendar.cpp:26</a></div></div>
<div class="ttc" id="anamespacecalendar_html_ab01178b933b4f1c62bd75b2edfdbaf79"><div class="ttname"><a href="namespacecalendar.html#ab01178b933b4f1c62bd75b2edfdbaf79">calendar::start_of_cataclysm</a></div><div class="ttdeci">const time_point &amp; start_of_cataclysm</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00033">calendar.cpp:33</a></div></div>
<div class="ttc" id="anamespaceunits_html_a144476d36f26d6e1916493c3636d54dc"><div class="ttname"><a href="namespaceunits.html#a144476d36f26d6e1916493c3636d54dc">units::to_milliliter</a></div><div class="ttdeci">constexpr value_type to_milliliter(const quantity&lt; value_type, volume_in_milliliter_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units__volume_8h_source.html#l00038">units_volume.h:38</a></div></div>
<div class="ttc" id="arng_8cpp_html_a7ba03e7147e43d808dc29c54bce9e57f"><div class="ttname"><a href="rng_8cpp.html#a7ba03e7147e43d808dc29c54bce9e57f">dice</a></div><div class="ttdeci">int dice(int number, int sides)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00085">rng.cpp:85</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a212238a594301bf7ff4a1264421b6152"><div class="ttname"><a href="structvehicle__part.html#a212238a594301bf7ff4a1264421b6152">vehicle_part::is_fuel_store</a></div><div class="ttdeci">bool is_fuel_store(bool skip_broke=true) const</div><div class="ttdoc">Can this part store fuel of any type @skip_broke exclude broken parts.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00481">vehicle_part.cpp:481</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a4b540ba2ddca7ce064674398be48ae68"><div class="ttname"><a href="structvehicle__part.html#a4b540ba2ddca7ce064674398be48ae68">vehicle_part::open</a></div><div class="ttdeci">bool open</div><div class="ttdoc">door is open</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00418">vehicle.h:418</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a545a18a0b04909ad7e0f51d971349b4b"><div class="ttname"><a href="structvehicle__part.html#a545a18a0b04909ad7e0f51d971349b4b">vehicle_part::is_reactor</a></div><div class="ttdeci">bool is_reactor() const</div><div class="ttdoc">Is this part a reactor?</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00499">vehicle_part.cpp:499</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a5dcc5fea1cf3a7b5cdc43c977cf6ddec"><div class="ttname"><a href="structvehicle__part.html#a5dcc5fea1cf3a7b5cdc43c977cf6ddec">vehicle_part::faults_potential</a></div><div class="ttdeci">std::set&lt; fault_id &gt; faults_potential() const</div><div class="ttdoc">Faults which could potentially occur with this part (if any)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00397">vehicle_part.cpp:397</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a633d16477878c952ed9775a43f2c8776"><div class="ttname"><a href="structvehicle__part.html#a633d16477878c952ed9775a43f2c8776">vehicle_part::fault_set</a></div><div class="ttdeci">bool fault_set(const fault_id &amp;f)</div><div class="ttdoc">Try to set fault returning false if specified fault cannot occur with this item.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00402">vehicle_part.cpp:402</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a6f491190dc49841d818e4987e66ddbb4"><div class="ttname"><a href="structvehicle__part.html#a6f491190dc49841d818e4987e66ddbb4">vehicle_part::ammo_unset</a></div><div class="ttdeci">void ammo_unset()</div><div class="ttdoc">Remove all fuel, charges or ammunition (if any) from this part.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00279">vehicle_part.cpp:279</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a86c3ad22b1284273f14e63ce726d685d"><div class="ttname"><a href="structvehicle__part.html#a86c3ad22b1284273f14e63ce726d685d">vehicle_part::remove_flag</a></div><div class="ttdeci">int remove_flag(const int flag) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00214">vehicle.h:214</a></div></div>
<div class="ttc" id="astructvehicle__part_html_ad2b0eaca45327195e5ac1f9ee9f228bd"><div class="ttname"><a href="structvehicle__part.html#ad2b0eaca45327195e5ac1f9ee9f228bd">vehicle_part::blood</a></div><div class="ttdeci">int blood</div><div class="ttdoc">how much blood covers part (in turns).</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00398">vehicle.h:398</a></div></div>
<div class="ttc" id="astructvehicle__part_html_afdff588649a9e481b9ba1fb3d5568c29"><div class="ttname"><a href="structvehicle__part.html#afdff588649a9e481b9ba1fb3d5568c29">vehicle_part::is_battery</a></div><div class="ttdeci">bool is_battery() const</div><div class="ttdoc">Can this part store electrical charge?</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00494">vehicle_part.cpp:494</a></div></div>
<div class="ttc" id="astructvehicle__prototype_html_a06a6007fba7df08c566fa470dd07385c"><div class="ttname"><a href="structvehicle__prototype.html#a06a6007fba7df08c566fa470dd07385c">vehicle_prototype::parts</a></div><div class="ttdeci">std::vector&lt; part_def &gt; parts</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00392">veh_type.h:392</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307ea0e5ba370df41b42336b154cd7fde38ec"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea0e5ba370df41b42336b154cd7fde38ec">VPFLAG_CONE_LIGHT</a></div><div class="ttdeci">@ VPFLAG_CONE_LIGHT</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00035">veh_type.h:35</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307ea1f5dd6711452a7442f76b7eeee387c8a"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea1f5dd6711452a7442f76b7eeee387c8a">VPFLAG_REACTOR</a></div><div class="ttdeci">@ VPFLAG_REACTOR</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00074">veh_type.h:74</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307ea3140fae054e4ead8de3f3c96b13df546"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea3140fae054e4ead8de3f3c96b13df546">VPFLAG_CIRCLE_LIGHT</a></div><div class="ttdeci">@ VPFLAG_CIRCLE_LIGHT</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00038">veh_type.h:38</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307ea720126c390476258c46f0a80304004c6"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea720126c390476258c46f0a80304004c6">VPFLAG_AISLE_LIGHT</a></div><div class="ttdeci">@ VPFLAG_AISLE_LIGHT</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00053">veh_type.h:53</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307ea85a6cb3a255060849cba7b60f861c850"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea85a6cb3a255060849cba7b60f861c850">VPFLAG_ATOMIC_LIGHT</a></div><div class="ttdeci">@ VPFLAG_ATOMIC_LIGHT</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00054">veh_type.h:54</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307eac068ca47063a40941d3b0561a2f3be51"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eac068ca47063a40941d3b0561a2f3be51">VPFLAG_WIDE_CONE_LIGHT</a></div><div class="ttdeci">@ VPFLAG_WIDE_CONE_LIGHT</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00036">veh_type.h:36</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307eaf0ce59d9e0d42526c7e45dd7ca9aa571"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eaf0ce59d9e0d42526c7e45dd7ca9aa571">VPFLAG_HALF_CIRCLE_LIGHT</a></div><div class="ttdeci">@ VPFLAG_HALF_CIRCLE_LIGHT</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00037">veh_type.h:37</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307eaf3126248fc27b984c14efbdd7c6c5c1e"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eaf3126248fc27b984c14efbdd7c6c5c1e">VPFLAG_DOME_LIGHT</a></div><div class="ttdeci">@ VPFLAG_DOME_LIGHT</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00052">veh_type.h:52</a></div></div>
<div class="ttc" id="avehicle_8cpp_html_ab5f267c571dc194e5b7e0b10b5136a33"><div class="ttname"><a href="vehicle_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a></div><div class="ttdeci">static const itype_id itype_battery(&quot;battery&quot;)</div></div>
<div class="ttc" id="avehicle_8cpp_html_abdff65814bacc115b63402844460a99e"><div class="ttname"><a href="vehicle_8cpp.html#abdff65814bacc115b63402844460a99e">fault_immobiliser</a></div><div class="ttdeci">static const fault_id fault_immobiliser(&quot;fault_engine_immobiliser&quot;)</div></div>
<div class="ttc" id="avehicle_8cpp_html_ae0a6efc65dd587028e5fbf37af06bdfc"><div class="ttname"><a href="vehicle_8cpp.html#ae0a6efc65dd587028e5fbf37af06bdfc">itype_plut_cell</a></div><div class="ttdeci">static const itype_id itype_plut_cell(&quot;plut_cell&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle__part_8cpp_source.html#l00228">vehicle_part::ammo_capacity()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00254">vehicle_part::ammo_set()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00279">vehicle_part::ammo_unset()</a>, <a class="el" href="vehicle_8h_source.html#l00398">vehicle_part::blood</a>, <a class="el" href="enums_8h_source.html#l00323">broken</a>, <a class="el" href="rng_8cpp_source.html#l00085">dice()</a>, <a class="el" href="veh__type_8h_source.html#l00173">vpart_info::durability</a>, <a class="el" href="optional_8h_source.html#l00143">cata::optional&lt; T &gt;::emplace()</a>, <a class="el" href="vehicle_8h_source.html#l00411">vehicle_part::enabled</a>, <a class="el" href="vehicle_8h_source.html#l01930">engine_on</a>, <a class="el" href="vehicle_8cpp.html#abdff65814bacc115b63402844460a99e">fault_immobiliser</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00402">vehicle_part::fault_set()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00397">vehicle_part::faults_potential()</a>, <a class="el" href="vehicle_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a>, <a class="el" href="vehicle_8cpp_source.html#l06882">get_all_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l02678">get_avail_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l02694">get_parts_including_carried()</a>, <a class="el" href="vehicle_8cpp_source.html#l01040">has_engine_type_not()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00519">vehicle_part::info()</a>, <a class="el" href="vehicle_8cpp_source.html#l06778">invalidate_mass()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00180">vehicle_part::is_available()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00494">vehicle_part::is_battery()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00481">vehicle_part::is_fuel_store()</a>, <a class="el" href="vehicle_8h_source.html#l01934">is_locked</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00499">vehicle_part::is_reactor()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00489">vehicle_part::is_tank()</a>, <a class="el" href="vehicle_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a>, <a class="el" href="vehicle_8cpp.html#ae0a6efc65dd587028e5fbf37af06bdfc">itype_plut_cell</a>, <a class="el" href="vehicle_8h_source.html#l01851">last_update</a>, <a class="el" href="units__volume_8h_source.html#l00050">units::legacy_volume_factor</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="vehicle_8h_source.html#l00418">vehicle_part::open</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01463">open()</a>, <a class="el" href="veh__type_8h_source.html#l00392">vehicle_prototype::parts</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8h_source.html#l00192">vehicle_part::passenger_flag</a>, <a class="el" href="rng_8h_source.html#l00088">random_entry()</a>, <a class="el" href="vehicle_8h_source.html#l00214">vehicle_part::remove_flag()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00527">set_hp()</a>, <a class="el" href="calendar_8cpp_source.html#l00033">calendar::start_of_cataclysm</a>, <a class="el" href="units__volume_8h_source.html#l00038">units::to_milliliter()</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, <a class="el" href="calendar_8cpp_source.html#l00026">calendar::turn_zero</a>, <a class="el" href="vehicle_8h_source.html#l01798">type</a>, <a class="el" href="vehicle_8cpp_source.html#l04279">valid_wheel_config()</a>, <a class="el" href="veh__type_8h_source.html#l00053">VPFLAG_AISLE_LIGHT</a>, <a class="el" href="veh__type_8h_source.html#l00054">VPFLAG_ATOMIC_LIGHT</a>, <a class="el" href="veh__type_8h_source.html#l00038">VPFLAG_CIRCLE_LIGHT</a>, <a class="el" href="veh__type_8h_source.html#l00035">VPFLAG_CONE_LIGHT</a>, <a class="el" href="veh__type_8h_source.html#l00052">VPFLAG_DOME_LIGHT</a>, <a class="el" href="veh__type_8h_source.html#l00056">VPFLAG_ENGINE</a>, <a class="el" href="veh__type_8h_source.html#l00037">VPFLAG_HALF_CIRCLE_LIGHT</a>, <a class="el" href="veh__type_8h_source.html#l00074">VPFLAG_REACTOR</a>, <a class="el" href="veh__type_8h_source.html#l00036">VPFLAG_WIDE_CONE_LIGHT</a>, and <a class="el" href="vehicle_8h_source.html#l01761">wheelcache</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l00251">vehicle()</a>.</p>

</div>
</div>
<a id="aae5fcaf3c41d87b4a0534b6649e0e05c" name="aae5fcaf3c41d87b4a0534b6649e0e05c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae5fcaf3c41d87b4a0534b6649e0e05c">&#9670;&nbsp;</a></span>install_part() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::install_part </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>dp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;&#160;</td>
          <td class="paramname"><em>part</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01570">1570</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01571" name="l01571"></a><span class="lineno"> 1571</span>{</div>
<div class="line"><a id="l01572" name="l01572"></a><span class="lineno"> 1572</span>    <span class="comment">// Should be checked before installing the part</span></div>
<div class="line"><a id="l01573" name="l01573"></a><span class="lineno"> 1573</span>    <span class="keywordtype">bool</span> enable = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01574" name="l01574"></a><span class="lineno"> 1574</span>    <span class="keywordflow">if</span>( new_part.is_engine() ) {</div>
<div class="line"><a id="l01575" name="l01575"></a><span class="lineno"> 1575</span>        enable = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01576" name="l01576"></a><span class="lineno"> 1576</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01577" name="l01577"></a><span class="lineno"> 1577</span>        <span class="comment">// TODO: read toggle groups from JSON</span></div>
<div class="line"><a id="l01578" name="l01578"></a><span class="lineno"> 1578</span>        <span class="keyword">static</span> <span class="keyword">const</span> std::vector&lt;std::string&gt; enable_like = {{</div>
<div class="line"><a id="l01579" name="l01579"></a><span class="lineno"> 1579</span>                <span class="stringliteral">&quot;CONE_LIGHT&quot;</span>,</div>
<div class="line"><a id="l01580" name="l01580"></a><span class="lineno"> 1580</span>                <span class="stringliteral">&quot;CIRCLE_LIGHT&quot;</span>,</div>
<div class="line"><a id="l01581" name="l01581"></a><span class="lineno"> 1581</span>                <span class="stringliteral">&quot;AISLE_LIGHT&quot;</span>,</div>
<div class="line"><a id="l01582" name="l01582"></a><span class="lineno"> 1582</span>                <span class="stringliteral">&quot;AUTOPILOT&quot;</span>,</div>
<div class="line"><a id="l01583" name="l01583"></a><span class="lineno"> 1583</span>                <span class="stringliteral">&quot;DOME_LIGHT&quot;</span>,</div>
<div class="line"><a id="l01584" name="l01584"></a><span class="lineno"> 1584</span>                <span class="stringliteral">&quot;ATOMIC_LIGHT&quot;</span>,</div>
<div class="line"><a id="l01585" name="l01585"></a><span class="lineno"> 1585</span>                <span class="stringliteral">&quot;STEREO&quot;</span>,</div>
<div class="line"><a id="l01586" name="l01586"></a><span class="lineno"> 1586</span>                <span class="stringliteral">&quot;CHIMES&quot;</span>,</div>
<div class="line"><a id="l01587" name="l01587"></a><span class="lineno"> 1587</span>                <span class="stringliteral">&quot;FRIDGE&quot;</span>,</div>
<div class="line"><a id="l01588" name="l01588"></a><span class="lineno"> 1588</span>                <span class="stringliteral">&quot;FREEZER&quot;</span>,</div>
<div class="line"><a id="l01589" name="l01589"></a><span class="lineno"> 1589</span>                <span class="stringliteral">&quot;RECHARGE&quot;</span>,</div>
<div class="line"><a id="l01590" name="l01590"></a><span class="lineno"> 1590</span>                <span class="stringliteral">&quot;PLOW&quot;</span>,</div>
<div class="line"><a id="l01591" name="l01591"></a><span class="lineno"> 1591</span>                <span class="stringliteral">&quot;REAPER&quot;</span>,</div>
<div class="line"><a id="l01592" name="l01592"></a><span class="lineno"> 1592</span>                <span class="stringliteral">&quot;PLANTER&quot;</span>,</div>
<div class="line"><a id="l01593" name="l01593"></a><span class="lineno"> 1593</span>                <span class="stringliteral">&quot;SCOOP&quot;</span>,</div>
<div class="line"><a id="l01594" name="l01594"></a><span class="lineno"> 1594</span>                <span class="stringliteral">&quot;SPACE_HEATER&quot;</span>,</div>
<div class="line"><a id="l01595" name="l01595"></a><span class="lineno"> 1595</span>                <span class="stringliteral">&quot;COOLER&quot;</span>,</div>
<div class="line"><a id="l01596" name="l01596"></a><span class="lineno"> 1596</span>                <span class="stringliteral">&quot;WATER_PURIFIER&quot;</span>,</div>
<div class="line"><a id="l01597" name="l01597"></a><span class="lineno"> 1597</span>                <span class="stringliteral">&quot;ROCKWHEEL&quot;</span>,</div>
<div class="line"><a id="l01598" name="l01598"></a><span class="lineno"> 1598</span>                <span class="stringliteral">&quot;ROADHEAD&quot;</span></div>
<div class="line"><a id="l01599" name="l01599"></a><span class="lineno"> 1599</span>            }</div>
<div class="line"><a id="l01600" name="l01600"></a><span class="lineno"> 1600</span>        };</div>
<div class="line"><a id="l01601" name="l01601"></a><span class="lineno"> 1601</span> </div>
<div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;flag : enable_like ) {</div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span>            <span class="keywordflow">if</span>( new_part.info().has_flag( flag ) ) {</div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span>                enable = <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( flag, <span class="keyword">true</span> );</div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01606" name="l01606"></a><span class="lineno"> 1606</span>            }</div>
<div class="line"><a id="l01607" name="l01607"></a><span class="lineno"> 1607</span>        }</div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span>    }</div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"> 1609</span> </div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span>    <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.push_back( new_part );</div>
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"> 1611</span>    <span class="keyword">auto</span> &amp;pt = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.back();</div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span> </div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span>    pt.enabled = enable;</div>
<div class="line"><a id="l01614" name="l01614"></a><span class="lineno"> 1614</span> </div>
<div class="line"><a id="l01615" name="l01615"></a><span class="lineno"> 1615</span>    pt.mount = dp;</div>
<div class="line"><a id="l01616" name="l01616"></a><span class="lineno"> 1616</span> </div>
<div class="line"><a id="l01617" name="l01617"></a><span class="lineno"> 1617</span>    <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l01618" name="l01618"></a><span class="lineno"> 1618</span>    <a class="code hl_variable" href="classvehicle.html#a62e8354926b0f973a2a0ec1db3deb997">coeff_air_changed</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01619" name="l01619"></a><span class="lineno"> 1619</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size() - 1;</div>
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"> 1620</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01911">coeff_air_changed</a>, <a class="el" href="veh__type_8h_source.html#l00336">vpart_info::has_flag()</a>, <a class="el" href="vehicle_8cpp_source.html#l02558">has_part()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00519">vehicle_part::info()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00464">vehicle_part::is_engine()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>.</p>

</div>
</div>
<a id="a720bcd814432de09323f4ca1dfb2eade" name="a720bcd814432de09323f4ca1dfb2eade"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a720bcd814432de09323f4ca1dfb2eade">&#9670;&nbsp;</a></span>install_part() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::install_part </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>dp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a01bb48ae3e1e67dbfa6a3a9679dc1b13">vpart_id</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>force</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Installs a part into this vehicle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dp</td><td>The coordinate of where to install the part. </td></tr>
    <tr><td class="paramname">id</td><td>The string ID of the part to install. (see vehicle_parts.json) </td></tr>
    <tr><td class="paramname">force</td><td>Skip check of whether we can mount the part here. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>false if the part could not be installed, true otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01554">1554</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01555" name="l01555"></a><span class="lineno"> 1555</span>{</div>
<div class="line"><a id="l01556" name="l01556"></a><span class="lineno"> 1556</span>    <span class="keywordflow">if</span>( !( force || <a class="code hl_function" href="classvehicle.html#ace12ee882e4b3b71b7679ff9b01efe9c">can_mount</a>( dp, <span class="keywordtype">id</span> ) ) ) {</div>
<div class="line"><a id="l01557" name="l01557"></a><span class="lineno"> 1557</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l01558" name="l01558"></a><span class="lineno"> 1558</span>    }</div>
<div class="line"><a id="l01559" name="l01559"></a><span class="lineno"> 1559</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a720bcd814432de09323f4ca1dfb2eade">install_part</a>( dp, <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a>( <span class="keywordtype">id</span>, dp, <a class="code hl_class" href="classitem.html">item</a>( <span class="keywordtype">id</span>.obj().<a class="code hl_class" href="classitem.html">item</a> ) ) );</div>
<div class="line"><a id="l01560" name="l01560"></a><span class="lineno"> 1560</span>}</div>
<div class="ttc" id="aclassvehicle_html_ace12ee882e4b3b71b7679ff9b01efe9c"><div class="ttname"><a href="classvehicle.html#ace12ee882e4b3b71b7679ff9b01efe9c">vehicle::can_mount</a></div><div class="ttdeci">bool can_mount(const point &amp;dp, const vpart_id &amp;id) const</div><div class="ttdoc">Returns whether or not the vehicle part with the given id can be mounted in the specified square.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01271">vehicle.cpp:1271</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l01271">can_mount()</a>, and <a class="el" href="vehicle_8cpp_source.html#l01554">install_part()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse_8cpp_source.html#l08909">iuse::cable_attach()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02986">veh_interact::complete_vehicle()</a>, <a class="el" href="construction_8cpp_source.html#l01219">construct::done_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l01554">install_part()</a>, <a class="el" href="veh__utils_8cpp_source.html#l00109">veh_utils::repair_part()</a>, and <a class="el" href="iuse_8cpp_source.html#l08782">iuse::tow_attach()</a>.</p>

</div>
</div>
<a id="a28c6af2e367a807dca353289f8d7fabb" name="a28c6af2e367a807dca353289f8d7fabb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28c6af2e367a807dca353289f8d7fabb">&#9670;&nbsp;</a></span>install_part() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::install_part </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>dp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a01bb48ae3e1e67dbfa6a3a9679dc1b13">vpart_id</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>force</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>install item specified item to vehicle as a vehicle part </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01562">1562</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01563" name="l01563"></a><span class="lineno"> 1563</span>{</div>
<div class="line"><a id="l01564" name="l01564"></a><span class="lineno"> 1564</span>    <span class="keywordflow">if</span>( !( force || <a class="code hl_function" href="classvehicle.html#ace12ee882e4b3b71b7679ff9b01efe9c">can_mount</a>( dp, <span class="keywordtype">id</span> ) ) ) {</div>
<div class="line"><a id="l01565" name="l01565"></a><span class="lineno"> 1565</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l01566" name="l01566"></a><span class="lineno"> 1566</span>    }</div>
<div class="line"><a id="l01567" name="l01567"></a><span class="lineno"> 1567</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a720bcd814432de09323f4ca1dfb2eade">install_part</a>( dp, <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a>( <span class="keywordtype">id</span>, dp, <a class="code hl_function" href="namespaceavatar__action.html#a76ba74774376a08222b8cdcce08f7304">std::move</a>( obj ) ) );</div>
<div class="line"><a id="l01568" name="l01568"></a><span class="lineno"> 1568</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l01271">can_mount()</a>, <a class="el" href="vehicle_8cpp_source.html#l01554">install_part()</a>, and <a class="el" href="avatar__action_8cpp_source.html#l00090">avatar_action::move()</a>.</p>

</div>
</div>
<a id="a961aba2c257491888731b7806a103d1a" name="a961aba2c257491888731b7806a103d1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a961aba2c257491888731b7806a103d1a">&#9670;&nbsp;</a></span>interact_vehicle_locked()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::interact_vehicle_locked </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
Mechanics speeds up vehicle hotwiring 
<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l00454">454</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>{</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a61be41a90435acf77c1c078c2966643b">is_locked</a> ) {</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>        <span class="keyword">const</span> <a class="code hl_class" href="classinventory.html">inventory</a> &amp;crafting_inv = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.crafting_inventory();</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You don&#39;t find any keys in the %s.&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>        <span class="keywordflow">if</span>( crafting_inv.<a class="code hl_function" href="classvisitable.html#a62ad0b8f7866ec171a709c56e4a25ff2">has_quality</a>( <a class="code hl_class" href="classstring__id.html">quality_id</a>( <span class="stringliteral">&quot;SCREW&quot;</span> ) ) ) {</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You don&#39;t find any keys in the %s. Attempt to hotwire vehicle?&quot;</span> ),</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>                          <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> ) ) {<span class="comment"></span></div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span><span class="comment">                ///\EFFECT_MECHANICS speeds up vehicle hotwiring</span></div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span><span class="comment"></span>                <span class="keywordtype">int</span> mechanics_skill = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.get_skill_level( <a class="code hl_variable" href="vehicle__use_8cpp.html#a53a27ba882bb24158d8752e53158bf46">skill_mechanics</a> );</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>                <span class="keyword">const</span> <span class="keywordtype">int</span> hotwire_time = 6000 / ( ( mechanics_skill &gt; 0 ) ? mechanics_skill : 1 );</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>                <span class="keyword">const</span> <span class="keywordtype">int</span> moves = to_moves&lt;int&gt;( <a class="code hl_function" href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a>( hotwire_time ) );</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>                <span class="comment">//assign long activity</span></div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.assign_activity( <a class="code hl_variable" href="vehicle__use_8cpp.html#a9ba9cd3ad30d2cfa0c96098fa98e24f2">ACT_HOTWIRE_CAR</a>, moves, -1, INT_MIN, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Hotwire&quot;</span> ) );</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>                <span class="comment">// use part 0 as the reference point</span></div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>                <a class="code hl_struct" href="structpoint.html">point</a> q = <a class="code hl_function" href="classvehicle.html#ad45ae53f6326f7fde4d8e59848470457">coord_translate</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[0].mount );</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>                <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> abs_veh_pos = <a class="code hl_function" href="classvehicle.html#a789289c4179f7677e45cb100ff5ffb9a">global_square_location</a>().<a class="code hl_function" href="classcoords_1_1coord__point.html#a3f9a44403c08f2eaf0d605b1d034c048">raw</a>();</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>                <span class="comment">//[0]</span></div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.activity.values.push_back( abs_veh_pos.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> + q.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> );</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>                <span class="comment">//[1]</span></div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.activity.values.push_back( abs_veh_pos.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> + q.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> );</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>                <span class="comment">//[2]</span></div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.activity.values.push_back( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.get_skill_level( <a class="code hl_variable" href="vehicle__use_8cpp.html#a53a27ba882bb24158d8752e53158bf46">skill_mechanics</a> ) );</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a450b5dd0e3c8e21773995962f381157b">has_security_working</a>() &amp;&amp; <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Trigger the %s&#39;s Alarm?&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> ) ) {</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>                    <a class="code hl_variable" href="classvehicle.html#a949775a37c7daa7a6b67e510f548bca3">is_alarm_on</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You leave the controls alone.&quot;</span> ) );</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>                }</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>            }</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You could use a screwdriver to hotwire it.&quot;</span> ) );</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>        }</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>    }</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span> </div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>    <span class="keywordflow">return</span> !( <a class="code hl_variable" href="classvehicle.html#a61be41a90435acf77c1c078c2966643b">is_locked</a> );</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>}</div>
<div class="ttc" id="aclassinventory_html"><div class="ttname"><a href="classinventory.html">inventory</a></div><div class="ttdef"><b>Definition:</b> <a href="inventory_8h_source.html#l00089">inventory.h:90</a></div></div>
<div class="ttc" id="aclassvisitable_html_a62ad0b8f7866ec171a709c56e4a25ff2"><div class="ttname"><a href="classvisitable.html#a62ad0b8f7866ec171a709c56e4a25ff2">visitable::has_quality</a></div><div class="ttdeci">bool has_quality(const quality_id &amp;qual, int level=1, int qty=1) const</div><div class="ttdoc">Returns true if instance has amount (or more) items of at least quality level.</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00170">visitable.cpp:170</a></div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a53a27ba882bb24158d8752e53158bf46"><div class="ttname"><a href="vehicle__use_8cpp.html#a53a27ba882bb24158d8752e53158bf46">skill_mechanics</a></div><div class="ttdeci">static const skill_id skill_mechanics(&quot;mechanics&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a9ba9cd3ad30d2cfa0c96098fa98e24f2"><div class="ttname"><a href="vehicle__use_8cpp.html#a9ba9cd3ad30d2cfa0c96098fa98e24f2">ACT_HOTWIRE_CAR</a></div><div class="ttdeci">static const activity_id ACT_HOTWIRE_CAR(&quot;ACT_HOTWIRE_CAR&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="vehicle__use_8cpp.html#a9ba9cd3ad30d2cfa0c96098fa98e24f2">ACT_HOTWIRE_CAR</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="vehicle_8cpp_source.html#l02988">coord_translate()</a>, <a class="el" href="calendar_8h_source.html#l00204">time_duration::from_turns()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l03091">global_square_location()</a>, <a class="el" href="visitable_8cpp_source.html#l00170">visitable&lt; T &gt;::has_quality()</a>, <a class="el" href="vehicle_8cpp_source.html#l01112">has_security_working()</a>, <a class="el" href="vehicle_8h_source.html#l01936">is_alarm_on</a>, <a class="el" href="vehicle_8h_source.html#l01934">is_locked</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>, <a class="el" href="coordinates_8h_source.html#l00111">coords::coord_point&lt; Point, Origin, Scale &gt;::raw()</a>, <a class="el" href="vehicle__use_8cpp.html#a53a27ba882bb24158d8752e53158bf46">skill_mechanics</a>, <a class="el" href="point_8h_source.html#l00038">point::x</a>, <a class="el" href="point_8h_source.html#l00150">tripoint::x</a>, <a class="el" href="point_8h_source.html#l00039">point::y</a>, and <a class="el" href="point_8h_source.html#l00151">tripoint::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00344">control_electronics()</a>, <a class="el" href="game_8cpp_source.html#l05443">game::control_vehicle()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="a16b7eb7b51337edc374ce0cd6aa623e0" name="a16b7eb7b51337edc374ce0cd6aa623e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16b7eb7b51337edc374ce0cd6aa623e0">&#9670;&nbsp;</a></span>interact_with()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::interact_with </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>interact_part</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01921">1921</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01922" name="l01922"></a><span class="lineno"> 1922</span>{</div>
<div class="line"><a id="l01923" name="l01923"></a><span class="lineno"> 1923</span>    std::vector&lt;std::string&gt; menu_items;</div>
<div class="line"><a id="l01924" name="l01924"></a><span class="lineno"> 1924</span>    std::vector&lt;uilist_entry&gt; options_message;</div>
<div class="line"><a id="l01925" name="l01925"></a><span class="lineno"> 1925</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_items_on_ground = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.sees_some_items( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u );</div>
<div class="line"><a id="l01926" name="l01926"></a><span class="lineno"> 1926</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> items_are_sealed = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.has_flag( <span class="stringliteral">&quot;SEALED&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> );</div>
<div class="line"><a id="l01927" name="l01927"></a><span class="lineno"> 1927</span> </div>
<div class="line"><a id="l01928" name="l01928"></a><span class="lineno"> 1928</span>    <span class="keyword">auto</span> turret = <a class="code hl_function" href="classvehicle.html#accfab81af66cd979bdfff4c39e5a3a8e">turret_query</a>( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> );</div>
<div class="line"><a id="l01929" name="l01929"></a><span class="lineno"> 1929</span> </div>
<div class="line"><a id="l01930" name="l01930"></a><span class="lineno"> 1930</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> curtain_part = <a class="code hl_function" href="classvehicle.html#aad22641da003beff80194f7127280bc5">avail_part_with_feature</a>( interact_part, <span class="stringliteral">&quot;CURTAIN&quot;</span>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l01931" name="l01931"></a><span class="lineno"> 1931</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> curtain_closed = ( curtain_part == -1 ) ? <span class="keyword">false</span> : !<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[curtain_part].<a class="code hl_function" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">open</a>;</div>
<div class="line"><a id="l01932" name="l01932"></a><span class="lineno"> 1932</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_kitchen = <a class="code hl_function" href="classvehicle.html#aad22641da003beff80194f7127280bc5">avail_part_with_feature</a>( interact_part, <span class="stringliteral">&quot;KITCHEN&quot;</span>, <span class="keyword">true</span> ) &gt;= 0;</div>
<div class="line"><a id="l01933" name="l01933"></a><span class="lineno"> 1933</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_faucet = <a class="code hl_function" href="classvehicle.html#aad22641da003beff80194f7127280bc5">avail_part_with_feature</a>( interact_part, <span class="stringliteral">&quot;FAUCET&quot;</span>, <span class="keyword">true</span> ) &gt;= 0;</div>
<div class="line"><a id="l01934" name="l01934"></a><span class="lineno"> 1934</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_towel = <a class="code hl_function" href="classvehicle.html#aad22641da003beff80194f7127280bc5">avail_part_with_feature</a>( interact_part, <span class="stringliteral">&quot;TOWEL&quot;</span>, <span class="keyword">true</span> ) &gt;= 0;</div>
<div class="line"><a id="l01935" name="l01935"></a><span class="lineno"> 1935</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_weldrig = <a class="code hl_function" href="classvehicle.html#aad22641da003beff80194f7127280bc5">avail_part_with_feature</a>( interact_part, <span class="stringliteral">&quot;WELDRIG&quot;</span>, <span class="keyword">true</span> ) &gt;= 0;</div>
<div class="line"><a id="l01936" name="l01936"></a><span class="lineno"> 1936</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_chemlab = <a class="code hl_function" href="classvehicle.html#aad22641da003beff80194f7127280bc5">avail_part_with_feature</a>( interact_part, <span class="stringliteral">&quot;CHEMLAB&quot;</span>, <span class="keyword">true</span> ) &gt;= 0;</div>
<div class="line"><a id="l01937" name="l01937"></a><span class="lineno"> 1937</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_purify = <a class="code hl_function" href="classvehicle.html#aad22641da003beff80194f7127280bc5">avail_part_with_feature</a>( interact_part, <span class="stringliteral">&quot;WATER_PURIFIER&quot;</span>, <span class="keyword">true</span> ) &gt;= 0;</div>
<div class="line"><a id="l01938" name="l01938"></a><span class="lineno"> 1938</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_controls = <a class="code hl_function" href="classvehicle.html#aad22641da003beff80194f7127280bc5">avail_part_with_feature</a>( interact_part, <span class="stringliteral">&quot;CONTROLS&quot;</span>, <span class="keyword">true</span> ) &gt;= 0;</div>
<div class="line"><a id="l01939" name="l01939"></a><span class="lineno"> 1939</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_electronics = <a class="code hl_function" href="classvehicle.html#aad22641da003beff80194f7127280bc5">avail_part_with_feature</a>( interact_part, <span class="stringliteral">&quot;CTRL_ELECTRONIC&quot;</span>, <span class="keyword">true</span> ) &gt;= 0;</div>
<div class="line"><a id="l01940" name="l01940"></a><span class="lineno"> 1940</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> cargo_part = <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( interact_part, <span class="stringliteral">&quot;CARGO&quot;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a id="l01941" name="l01941"></a><span class="lineno"> 1941</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> from_vehicle = cargo_part &gt;= 0 &amp;&amp; !<a class="code hl_function" href="classvehicle.html#a983dd9db3cd64078b176a82289e0b260">get_items</a>( cargo_part ).<a class="code hl_function" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>();</div>
<div class="line"><a id="l01942" name="l01942"></a><span class="lineno"> 1942</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> can_be_folded = <a class="code hl_function" href="classvehicle.html#ad9e5f31113c5dda6b76442cbd7b8429f">is_foldable</a>();</div>
<div class="line"><a id="l01943" name="l01943"></a><span class="lineno"> 1943</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> is_convertible = <a class="code hl_variable" href="classvehicle.html#a0383bc21c8d6b5a3689124f3d286a004">tags</a>.count( <span class="stringliteral">&quot;convertible&quot;</span> ) &gt; 0;</div>
<div class="line"><a id="l01944" name="l01944"></a><span class="lineno"> 1944</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> remotely_controlled = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;remoteveh() == <span class="keyword">this</span>;</div>
<div class="line"><a id="l01945" name="l01945"></a><span class="lineno"> 1945</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> autoclave_part = <a class="code hl_function" href="classvehicle.html#aad22641da003beff80194f7127280bc5">avail_part_with_feature</a>( interact_part, <span class="stringliteral">&quot;AUTOCLAVE&quot;</span>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l01946" name="l01946"></a><span class="lineno"> 1946</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_autoclave = autoclave_part &gt;= 0;</div>
<div class="line"><a id="l01947" name="l01947"></a><span class="lineno"> 1947</span>    <span class="keywordtype">bool</span> autoclave_on = ( autoclave_part == -1 ) ? <span class="keyword">false</span> :</div>
<div class="line"><a id="l01948" name="l01948"></a><span class="lineno"> 1948</span>                        <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[autoclave_part].<a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a>;</div>
<div class="line"><a id="l01949" name="l01949"></a><span class="lineno"> 1949</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> washing_machine_part = <a class="code hl_function" href="classvehicle.html#aad22641da003beff80194f7127280bc5">avail_part_with_feature</a>( interact_part, <span class="stringliteral">&quot;WASHING_MACHINE&quot;</span>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l01950" name="l01950"></a><span class="lineno"> 1950</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_washmachine = washing_machine_part &gt;= 0;</div>
<div class="line"><a id="l01951" name="l01951"></a><span class="lineno"> 1951</span>    <span class="keywordtype">bool</span> washing_machine_on = ( washing_machine_part == -1 ) ? <span class="keyword">false</span> :</div>
<div class="line"><a id="l01952" name="l01952"></a><span class="lineno"> 1952</span>                              <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[washing_machine_part].<a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a>;</div>
<div class="line"><a id="l01953" name="l01953"></a><span class="lineno"> 1953</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> dishwasher_part = <a class="code hl_function" href="classvehicle.html#aad22641da003beff80194f7127280bc5">avail_part_with_feature</a>( interact_part, <span class="stringliteral">&quot;DISHWASHER&quot;</span>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l01954" name="l01954"></a><span class="lineno"> 1954</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_dishwasher = dishwasher_part &gt;= 0;</div>
<div class="line"><a id="l01955" name="l01955"></a><span class="lineno"> 1955</span>    <span class="keywordtype">bool</span> dishwasher_on = ( dishwasher_part == -1 ) ? <span class="keyword">false</span> :</div>
<div class="line"><a id="l01956" name="l01956"></a><span class="lineno"> 1956</span>                         <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[dishwasher_part].<a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a>;</div>
<div class="line"><a id="l01957" name="l01957"></a><span class="lineno"> 1957</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> monster_capture_part = <a class="code hl_function" href="classvehicle.html#aad22641da003beff80194f7127280bc5">avail_part_with_feature</a>( interact_part, <span class="stringliteral">&quot;CAPTURE_MONSTER_VEH&quot;</span>,</div>
<div class="line"><a id="l01958" name="l01958"></a><span class="lineno"> 1958</span>                                     <span class="keyword">true</span> );</div>
<div class="line"><a id="l01959" name="l01959"></a><span class="lineno"> 1959</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_monster_capture = monster_capture_part &gt;= 0;</div>
<div class="line"><a id="l01960" name="l01960"></a><span class="lineno"> 1960</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> bike_rack_part = <a class="code hl_function" href="classvehicle.html#aad22641da003beff80194f7127280bc5">avail_part_with_feature</a>( interact_part, <span class="stringliteral">&quot;BIKE_RACK_VEH&quot;</span>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l01961" name="l01961"></a><span class="lineno"> 1961</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> harness_part = <a class="code hl_function" href="classvehicle.html#aad22641da003beff80194f7127280bc5">avail_part_with_feature</a>( interact_part, <span class="stringliteral">&quot;ANIMAL_CTRL&quot;</span>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l01962" name="l01962"></a><span class="lineno"> 1962</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_harness = harness_part &gt;= 0;</div>
<div class="line"><a id="l01963" name="l01963"></a><span class="lineno"> 1963</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_bike_rack = bike_rack_part &gt;= 0;</div>
<div class="line"><a id="l01964" name="l01964"></a><span class="lineno"> 1964</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_planter = <a class="code hl_function" href="classvehicle.html#aad22641da003beff80194f7127280bc5">avail_part_with_feature</a>( interact_part, <span class="stringliteral">&quot;PLANTER&quot;</span>, <span class="keyword">true</span> ) &gt;= 0;</div>
<div class="line"><a id="l01965" name="l01965"></a><span class="lineno"> 1965</span> </div>
<div class="line"><a id="l01966" name="l01966"></a><span class="lineno"> 1966</span>    <span class="keyword">enum</span> {</div>
<div class="line"><a id="l01967" name="l01967"></a><span class="lineno"> 1967</span>        EXAMINE, TRACK, HANDBRAKE, CONTROL, CONTROL_ELECTRONICS, GET_ITEMS, GET_ITEMS_ON_GROUND, FOLD_VEHICLE, UNLOAD_TURRET,</div>
<div class="line"><a id="l01968" name="l01968"></a><span class="lineno"> 1968</span>        RELOAD_TURRET, USE_HOTPLATE, FILL_CONTAINER, DRINK, USE_WELDER, USE_PURIFIER, PURIFY_TANK, USE_AUTOCLAVE, USE_WASHMACHINE,</div>
<div class="line"><a id="l01969" name="l01969"></a><span class="lineno"> 1969</span>        USE_DISHWASHER, USE_MONSTER_CAPTURE, USE_BIKE_RACK, USE_HARNESS, RELOAD_PLANTER, USE_TOWEL, PEEK_CURTAIN,</div>
<div class="line"><a id="l01970" name="l01970"></a><span class="lineno"> 1970</span>    };</div>
<div class="line"><a id="l01971" name="l01971"></a><span class="lineno"> 1971</span>    <a class="code hl_class" href="classuilist.html">uilist</a> selectmenu;</div>
<div class="line"><a id="l01972" name="l01972"></a><span class="lineno"> 1972</span> </div>
<div class="line"><a id="l01973" name="l01973"></a><span class="lineno"> 1973</span>    selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( EXAMINE, <span class="keyword">true</span>, <span class="charliteral">&#39;e&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Examine vehicle&quot;</span> ) );</div>
<div class="line"><a id="l01974" name="l01974"></a><span class="lineno"> 1974</span>    selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( TRACK, <span class="keyword">true</span>, <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_TRACKING&quot;</span> ), <a class="code hl_function" href="classvehicle.html#a75e144a47baea76ae92c0f6fc1e7c780">tracking_toggle_string</a>() );</div>
<div class="line"><a id="l01975" name="l01975"></a><span class="lineno"> 1975</span>    <span class="keywordflow">if</span>( has_controls ) {</div>
<div class="line"><a id="l01976" name="l01976"></a><span class="lineno"> 1976</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( HANDBRAKE, <span class="keyword">true</span>, <span class="charliteral">&#39;h&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Pull handbrake&quot;</span> ) );</div>
<div class="line"><a id="l01977" name="l01977"></a><span class="lineno"> 1977</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( CONTROL, <span class="keyword">true</span>, <span class="charliteral">&#39;v&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Control vehicle&quot;</span> ) );</div>
<div class="line"><a id="l01978" name="l01978"></a><span class="lineno"> 1978</span>    }</div>
<div class="line"><a id="l01979" name="l01979"></a><span class="lineno"> 1979</span>    <span class="keywordflow">if</span>( has_electronics ) {</div>
<div class="line"><a id="l01980" name="l01980"></a><span class="lineno"> 1980</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( CONTROL_ELECTRONICS, <span class="keyword">true</span>, <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;CONTROL_MANY_ELECTRONICS&quot;</span> ),</div>
<div class="line"><a id="l01981" name="l01981"></a><span class="lineno"> 1981</span>                             <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Control multiple electronics&quot;</span> ) );</div>
<div class="line"><a id="l01982" name="l01982"></a><span class="lineno"> 1982</span>    }</div>
<div class="line"><a id="l01983" name="l01983"></a><span class="lineno"> 1983</span>    <span class="keywordflow">if</span>( has_autoclave ) {</div>
<div class="line"><a id="l01984" name="l01984"></a><span class="lineno"> 1984</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( USE_AUTOCLAVE, <span class="keyword">true</span>, <span class="charliteral">&#39;a&#39;</span>,</div>
<div class="line"><a id="l01985" name="l01985"></a><span class="lineno"> 1985</span>                             autoclave_on ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Deactivate the autoclave&quot;</span> ) :</div>
<div class="line"><a id="l01986" name="l01986"></a><span class="lineno"> 1986</span>                             <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Activate the autoclave (1.5 hours)&quot;</span> ) );</div>
<div class="line"><a id="l01987" name="l01987"></a><span class="lineno"> 1987</span>    }</div>
<div class="line"><a id="l01988" name="l01988"></a><span class="lineno"> 1988</span>    <span class="keywordflow">if</span>( has_washmachine ) {</div>
<div class="line"><a id="l01989" name="l01989"></a><span class="lineno"> 1989</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( USE_WASHMACHINE, <span class="keyword">true</span>, <span class="charliteral">&#39;W&#39;</span>,</div>
<div class="line"><a id="l01990" name="l01990"></a><span class="lineno"> 1990</span>                             washing_machine_on ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Deactivate the washing machine&quot;</span> ) :</div>
<div class="line"><a id="l01991" name="l01991"></a><span class="lineno"> 1991</span>                             <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Activate the washing machine (1.5 hours)&quot;</span> ) );</div>
<div class="line"><a id="l01992" name="l01992"></a><span class="lineno"> 1992</span>    }</div>
<div class="line"><a id="l01993" name="l01993"></a><span class="lineno"> 1993</span>    <span class="keywordflow">if</span>( has_dishwasher ) {</div>
<div class="line"><a id="l01994" name="l01994"></a><span class="lineno"> 1994</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( USE_DISHWASHER, <span class="keyword">true</span>, <span class="charliteral">&#39;D&#39;</span>,</div>
<div class="line"><a id="l01995" name="l01995"></a><span class="lineno"> 1995</span>                             dishwasher_on ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Deactivate the dishwasher&quot;</span> ) :</div>
<div class="line"><a id="l01996" name="l01996"></a><span class="lineno"> 1996</span>                             <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Activate the dishwasher (1.5 hours)&quot;</span> ) );</div>
<div class="line"><a id="l01997" name="l01997"></a><span class="lineno"> 1997</span>    }</div>
<div class="line"><a id="l01998" name="l01998"></a><span class="lineno"> 1998</span>    <span class="keywordflow">if</span>( from_vehicle &amp;&amp; !washing_machine_on &amp;&amp; !dishwasher_on ) {</div>
<div class="line"><a id="l01999" name="l01999"></a><span class="lineno"> 1999</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( GET_ITEMS, <span class="keyword">true</span>, <span class="charliteral">&#39;g&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Get items&quot;</span> ) );</div>
<div class="line"><a id="l02000" name="l02000"></a><span class="lineno"> 2000</span>    }</div>
<div class="line"><a id="l02001" name="l02001"></a><span class="lineno"> 2001</span>    <span class="keywordflow">if</span>( has_items_on_ground &amp;&amp; !items_are_sealed ) {</div>
<div class="line"><a id="l02002" name="l02002"></a><span class="lineno"> 2002</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( GET_ITEMS_ON_GROUND, <span class="keyword">true</span>, <span class="charliteral">&#39;i&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Get items on the ground&quot;</span> ) );</div>
<div class="line"><a id="l02003" name="l02003"></a><span class="lineno"> 2003</span>    }</div>
<div class="line"><a id="l02004" name="l02004"></a><span class="lineno"> 2004</span>    <span class="keywordflow">if</span>( ( can_be_folded || is_convertible ) &amp;&amp; !remotely_controlled ) {</div>
<div class="line"><a id="l02005" name="l02005"></a><span class="lineno"> 2005</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( FOLD_VEHICLE, <span class="keyword">true</span>, <span class="charliteral">&#39;f&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Fold vehicle&quot;</span> ) );</div>
<div class="line"><a id="l02006" name="l02006"></a><span class="lineno"> 2006</span>    }</div>
<div class="line"><a id="l02007" name="l02007"></a><span class="lineno"> 2007</span>    <span class="keywordflow">if</span>( turret.can_unload() ) {</div>
<div class="line"><a id="l02008" name="l02008"></a><span class="lineno"> 2008</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( UNLOAD_TURRET, <span class="keyword">true</span>, <span class="charliteral">&#39;u&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Unload %s&quot;</span> ), turret.name() );</div>
<div class="line"><a id="l02009" name="l02009"></a><span class="lineno"> 2009</span>    }</div>
<div class="line"><a id="l02010" name="l02010"></a><span class="lineno"> 2010</span>    <span class="keywordflow">if</span>( turret.can_reload() ) {</div>
<div class="line"><a id="l02011" name="l02011"></a><span class="lineno"> 2011</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( RELOAD_TURRET, <span class="keyword">true</span>, <span class="charliteral">&#39;r&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Reload %s&quot;</span> ), turret.name() );</div>
<div class="line"><a id="l02012" name="l02012"></a><span class="lineno"> 2012</span>    }</div>
<div class="line"><a id="l02013" name="l02013"></a><span class="lineno"> 2013</span>    <span class="keywordflow">if</span>( curtain_part &gt;= 0 &amp;&amp; curtain_closed ) {</div>
<div class="line"><a id="l02014" name="l02014"></a><span class="lineno"> 2014</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( PEEK_CURTAIN, <span class="keyword">true</span>, <span class="charliteral">&#39;p&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Peek through the closed curtains&quot;</span> ) );</div>
<div class="line"><a id="l02015" name="l02015"></a><span class="lineno"> 2015</span>    }</div>
<div class="line"><a id="l02016" name="l02016"></a><span class="lineno"> 2016</span>    <span class="keywordflow">if</span>( ( has_kitchen || has_chemlab ) &amp;&amp; <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a>, <span class="keyword">true</span> ) &gt; 0 ) {</div>
<div class="line"><a id="l02017" name="l02017"></a><span class="lineno"> 2017</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( USE_HOTPLATE, <span class="keyword">true</span>, <span class="charliteral">&#39;h&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Use the hotplate&quot;</span> ) );</div>
<div class="line"><a id="l02018" name="l02018"></a><span class="lineno"> 2018</span>    }</div>
<div class="line"><a id="l02019" name="l02019"></a><span class="lineno"> 2019</span>    <span class="keywordflow">if</span>( has_faucet &amp;&amp; <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a> ) &gt; 0 ) {</div>
<div class="line"><a id="l02020" name="l02020"></a><span class="lineno"> 2020</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( FILL_CONTAINER, <span class="keyword">true</span>, <span class="charliteral">&#39;c&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Fill a container with water&quot;</span> ) );</div>
<div class="line"><a id="l02021" name="l02021"></a><span class="lineno"> 2021</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( DRINK, <span class="keyword">true</span>, <span class="charliteral">&#39;d&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Have a drink&quot;</span> ) );</div>
<div class="line"><a id="l02022" name="l02022"></a><span class="lineno"> 2022</span>    }</div>
<div class="line"><a id="l02023" name="l02023"></a><span class="lineno"> 2023</span>    <span class="keywordflow">if</span>( has_towel ) {</div>
<div class="line"><a id="l02024" name="l02024"></a><span class="lineno"> 2024</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( USE_TOWEL, <span class="keyword">true</span>, <span class="charliteral">&#39;t&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Use a towel&quot;</span> ) );</div>
<div class="line"><a id="l02025" name="l02025"></a><span class="lineno"> 2025</span>    }</div>
<div class="line"><a id="l02026" name="l02026"></a><span class="lineno"> 2026</span>    <span class="keywordflow">if</span>( has_weldrig &amp;&amp; <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a>, <span class="keyword">true</span> ) &gt; 0 ) {</div>
<div class="line"><a id="l02027" name="l02027"></a><span class="lineno"> 2027</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( USE_WELDER, <span class="keyword">true</span>, <span class="charliteral">&#39;w&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Use the welding rig&quot;</span> ) );</div>
<div class="line"><a id="l02028" name="l02028"></a><span class="lineno"> 2028</span>    }</div>
<div class="line"><a id="l02029" name="l02029"></a><span class="lineno"> 2029</span>    <span class="keywordflow">if</span>( has_purify ) {</div>
<div class="line"><a id="l02030" name="l02030"></a><span class="lineno"> 2030</span>        <span class="keywordtype">bool</span> can_purify = <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a>, <span class="keyword">true</span> ) &gt;=</div>
<div class="line"><a id="l02031" name="l02031"></a><span class="lineno"> 2031</span>                          <a class="code hl_variable" href="vehicle__use_8cpp.html#a23c8190c3fbddc3ba5596ce2b31d8ce6">itype_water_purifier</a>-&gt;<a class="code hl_function" href="structitype.html#a953828c9c01185fef0f619ecdcd7f3b1">charges_to_use</a>();</div>
<div class="line"><a id="l02032" name="l02032"></a><span class="lineno"> 2032</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( USE_PURIFIER, can_purify,</div>
<div class="line"><a id="l02033" name="l02033"></a><span class="lineno"> 2033</span>                             <span class="charliteral">&#39;p&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Purify water in carried container&quot;</span> ) );</div>
<div class="line"><a id="l02034" name="l02034"></a><span class="lineno"> 2034</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( PURIFY_TANK, can_purify &amp;&amp; <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a> ),</div>
<div class="line"><a id="l02035" name="l02035"></a><span class="lineno"> 2035</span>                             <span class="charliteral">&#39;P&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Purify water in vehicle tank&quot;</span> ) );</div>
<div class="line"><a id="l02036" name="l02036"></a><span class="lineno"> 2036</span>    }</div>
<div class="line"><a id="l02037" name="l02037"></a><span class="lineno"> 2037</span>    <span class="keywordflow">if</span>( has_monster_capture ) {</div>
<div class="line"><a id="l02038" name="l02038"></a><span class="lineno"> 2038</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( USE_MONSTER_CAPTURE, <span class="keyword">true</span>, <span class="charliteral">&#39;G&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Capture or release a creature&quot;</span> ) );</div>
<div class="line"><a id="l02039" name="l02039"></a><span class="lineno"> 2039</span>    }</div>
<div class="line"><a id="l02040" name="l02040"></a><span class="lineno"> 2040</span>    <span class="keywordflow">if</span>( has_bike_rack ) {</div>
<div class="line"><a id="l02041" name="l02041"></a><span class="lineno"> 2041</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( USE_BIKE_RACK, <span class="keyword">true</span>, <span class="charliteral">&#39;R&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Load or unload a vehicle&quot;</span> ) );</div>
<div class="line"><a id="l02042" name="l02042"></a><span class="lineno"> 2042</span>    }</div>
<div class="line"><a id="l02043" name="l02043"></a><span class="lineno"> 2043</span>    <span class="keywordflow">if</span>( has_harness ) {</div>
<div class="line"><a id="l02044" name="l02044"></a><span class="lineno"> 2044</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( USE_HARNESS, <span class="keyword">true</span>, <span class="charliteral">&#39;H&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Harness an animal&quot;</span> ) );</div>
<div class="line"><a id="l02045" name="l02045"></a><span class="lineno"> 2045</span>    }</div>
<div class="line"><a id="l02046" name="l02046"></a><span class="lineno"> 2046</span>    <span class="keywordflow">if</span>( has_planter ) {</div>
<div class="line"><a id="l02047" name="l02047"></a><span class="lineno"> 2047</span>        selectmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( RELOAD_PLANTER, <span class="keyword">true</span>, <span class="charliteral">&#39;s&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Reload seed drill with seeds&quot;</span> ) );</div>
<div class="line"><a id="l02048" name="l02048"></a><span class="lineno"> 2048</span>    }</div>
<div class="line"><a id="l02049" name="l02049"></a><span class="lineno"> 2049</span> </div>
<div class="line"><a id="l02050" name="l02050"></a><span class="lineno"> 2050</span>    <span class="keywordtype">int</span> choice;</div>
<div class="line"><a id="l02051" name="l02051"></a><span class="lineno"> 2051</span>    <span class="keywordflow">if</span>( selectmenu.<a class="code hl_variable" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.size() == 1 ) {</div>
<div class="line"><a id="l02052" name="l02052"></a><span class="lineno"> 2052</span>        choice = selectmenu.<a class="code hl_variable" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.front().retval;</div>
<div class="line"><a id="l02053" name="l02053"></a><span class="lineno"> 2053</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02054" name="l02054"></a><span class="lineno"> 2054</span>        selectmenu.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Select an action&quot;</span> );</div>
<div class="line"><a id="l02055" name="l02055"></a><span class="lineno"> 2055</span>        selectmenu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l02056" name="l02056"></a><span class="lineno"> 2056</span>        choice = selectmenu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a id="l02057" name="l02057"></a><span class="lineno"> 2057</span>    }</div>
<div class="line"><a id="l02058" name="l02058"></a><span class="lineno"> 2058</span>    <span class="keywordflow">if</span>( choice != EXAMINE &amp;&amp; choice != TRACK &amp;&amp; choice != GET_ITEMS_ON_GROUND ) {</div>
<div class="line"><a id="l02059" name="l02059"></a><span class="lineno"> 2059</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#a2f52c81265462fd7eee8fd158666f9be">handle_potential_theft</a>( <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classplayer.html">player</a> &amp;<span class="keyword">&gt;</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ) ) ) {</div>
<div class="line"><a id="l02060" name="l02060"></a><span class="lineno"> 2060</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02061" name="l02061"></a><span class="lineno"> 2061</span>        }</div>
<div class="line"><a id="l02062" name="l02062"></a><span class="lineno"> 2062</span>    }</div>
<div class="line"><a id="l02063" name="l02063"></a><span class="lineno"> 2063</span>    <span class="keyword">auto</span> veh_tool = [&amp;]( <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> &amp; obj ) {</div>
<div class="line"><a id="l02064" name="l02064"></a><span class="lineno"> 2064</span>        <a class="code hl_class" href="classitem.html">item</a> pseudo( obj );</div>
<div class="line"><a id="l02065" name="l02065"></a><span class="lineno"> 2065</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a>, <span class="keyword">true</span> ) &lt; pseudo.ammo_required() ) {</div>
<div class="line"><a id="l02066" name="l02066"></a><span class="lineno"> 2066</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02067" name="l02067"></a><span class="lineno"> 2067</span>        }</div>
<div class="line"><a id="l02068" name="l02068"></a><span class="lineno"> 2068</span>        <span class="keyword">auto</span> capacity = pseudo.ammo_capacity( <span class="keyword">true</span> );</div>
<div class="line"><a id="l02069" name="l02069"></a><span class="lineno"> 2069</span>        <span class="keyword">auto</span> qty = capacity - <a class="code hl_function" href="classvehicle.html#acb03f8288804b551378478137e9cea11">discharge_battery</a>( capacity );</div>
<div class="line"><a id="l02070" name="l02070"></a><span class="lineno"> 2070</span>        pseudo.ammo_set( <a class="code hl_variable" href="vehicle__use_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a>, qty );</div>
<div class="line"><a id="l02071" name="l02071"></a><span class="lineno"> 2071</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.invoke_item( &amp;pseudo );</div>
<div class="line"><a id="l02072" name="l02072"></a><span class="lineno"> 2072</span>        <a class="code hl_function" href="classvehicle.html#a46d22a6712ad986ed60917c367be83eb">charge_battery</a>( pseudo.ammo_remaining() );</div>
<div class="line"><a id="l02073" name="l02073"></a><span class="lineno"> 2073</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02074" name="l02074"></a><span class="lineno"> 2074</span>    };</div>
<div class="line"><a id="l02075" name="l02075"></a><span class="lineno"> 2075</span> </div>
<div class="line"><a id="l02076" name="l02076"></a><span class="lineno"> 2076</span>    <span class="keywordflow">switch</span>( choice ) {</div>
<div class="line"><a id="l02077" name="l02077"></a><span class="lineno"> 2077</span>        <span class="keywordflow">case</span> USE_BIKE_RACK: {</div>
<div class="line"><a id="l02078" name="l02078"></a><span class="lineno"> 2078</span>            <a class="code hl_function" href="classvehicle.html#a418ad39b520d156f334cb08132fe472e">use_bike_rack</a>( bike_rack_part );</div>
<div class="line"><a id="l02079" name="l02079"></a><span class="lineno"> 2079</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02080" name="l02080"></a><span class="lineno"> 2080</span>        }</div>
<div class="line"><a id="l02081" name="l02081"></a><span class="lineno"> 2081</span>        <span class="keywordflow">case</span> USE_HARNESS: {</div>
<div class="line"><a id="l02082" name="l02082"></a><span class="lineno"> 2082</span>            <a class="code hl_function" href="classvehicle.html#a8c5c783aa99f2c3cab059be7a72e80c4">use_harness</a>( harness_part, <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> );</div>
<div class="line"><a id="l02083" name="l02083"></a><span class="lineno"> 2083</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02084" name="l02084"></a><span class="lineno"> 2084</span>        }</div>
<div class="line"><a id="l02085" name="l02085"></a><span class="lineno"> 2085</span>        <span class="keywordflow">case</span> USE_MONSTER_CAPTURE: {</div>
<div class="line"><a id="l02086" name="l02086"></a><span class="lineno"> 2086</span>            <a class="code hl_function" href="classvehicle.html#a5b4729ccb92667a95c0682c31b4d44c4">use_monster_capture</a>( monster_capture_part, <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> );</div>
<div class="line"><a id="l02087" name="l02087"></a><span class="lineno"> 2087</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02088" name="l02088"></a><span class="lineno"> 2088</span>        }</div>
<div class="line"><a id="l02089" name="l02089"></a><span class="lineno"> 2089</span>        <span class="keywordflow">case</span> PEEK_CURTAIN: {</div>
<div class="line"><a id="l02090" name="l02090"></a><span class="lineno"> 2090</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You carefully peek through the curtains.&quot;</span> ) );</div>
<div class="line"><a id="l02091" name="l02091"></a><span class="lineno"> 2091</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;peek( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> );</div>
<div class="line"><a id="l02092" name="l02092"></a><span class="lineno"> 2092</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02093" name="l02093"></a><span class="lineno"> 2093</span>        }</div>
<div class="line"><a id="l02094" name="l02094"></a><span class="lineno"> 2094</span>        <span class="keywordflow">case</span> USE_HOTPLATE: {</div>
<div class="line"><a id="l02095" name="l02095"></a><span class="lineno"> 2095</span>            veh_tool( <a class="code hl_variable" href="vehicle__use_8cpp.html#a6341843b361543b335aaf869a0e7bb7d">itype_hotplate</a> );</div>
<div class="line"><a id="l02096" name="l02096"></a><span class="lineno"> 2096</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02097" name="l02097"></a><span class="lineno"> 2097</span>        }</div>
<div class="line"><a id="l02098" name="l02098"></a><span class="lineno"> 2098</span>        <span class="keywordflow">case</span> USE_TOWEL: {</div>
<div class="line"><a id="l02099" name="l02099"></a><span class="lineno"> 2099</span>            <a class="code hl_function" href="namespaceiuse.html#a6cc5282019b1f6e24f9c91976a643427">iuse::towel_common</a>( &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u, <span class="keyword">nullptr</span>, <span class="keyword">false</span> );</div>
<div class="line"><a id="l02100" name="l02100"></a><span class="lineno"> 2100</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02101" name="l02101"></a><span class="lineno"> 2101</span>        }</div>
<div class="line"><a id="l02102" name="l02102"></a><span class="lineno"> 2102</span>        <span class="keywordflow">case</span> USE_AUTOCLAVE: {</div>
<div class="line"><a id="l02103" name="l02103"></a><span class="lineno"> 2103</span>            <a class="code hl_function" href="classvehicle.html#a370afbdd3c703760b7f2c9f04d1a05ce">use_autoclave</a>( autoclave_part );</div>
<div class="line"><a id="l02104" name="l02104"></a><span class="lineno"> 2104</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02105" name="l02105"></a><span class="lineno"> 2105</span>        }</div>
<div class="line"><a id="l02106" name="l02106"></a><span class="lineno"> 2106</span>        <span class="keywordflow">case</span> USE_WASHMACHINE: {</div>
<div class="line"><a id="l02107" name="l02107"></a><span class="lineno"> 2107</span>            <a class="code hl_function" href="classvehicle.html#ad7ee1f39dba42cbe13f9afe26ffc8405">use_washing_machine</a>( washing_machine_part );</div>
<div class="line"><a id="l02108" name="l02108"></a><span class="lineno"> 2108</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02109" name="l02109"></a><span class="lineno"> 2109</span>        }</div>
<div class="line"><a id="l02110" name="l02110"></a><span class="lineno"> 2110</span>        <span class="keywordflow">case</span> USE_DISHWASHER: {</div>
<div class="line"><a id="l02111" name="l02111"></a><span class="lineno"> 2111</span>            <a class="code hl_function" href="classvehicle.html#a0cada0f94f36c1bbaf243d6ff82426ed">use_dishwasher</a>( dishwasher_part );</div>
<div class="line"><a id="l02112" name="l02112"></a><span class="lineno"> 2112</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02113" name="l02113"></a><span class="lineno"> 2113</span>        }</div>
<div class="line"><a id="l02114" name="l02114"></a><span class="lineno"> 2114</span>        <span class="keywordflow">case</span> FILL_CONTAINER: {</div>
<div class="line"><a id="l02115" name="l02115"></a><span class="lineno"> 2115</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.siphon( *<span class="keyword">this</span>, <a class="code hl_variable" href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a> );</div>
<div class="line"><a id="l02116" name="l02116"></a><span class="lineno"> 2116</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02117" name="l02117"></a><span class="lineno"> 2117</span>        }</div>
<div class="line"><a id="l02118" name="l02118"></a><span class="lineno"> 2118</span>        <span class="keywordflow">case</span> DRINK: {</div>
<div class="line"><a id="l02119" name="l02119"></a><span class="lineno"> 2119</span>            <a class="code hl_class" href="classitem.html">item</a> water( <a class="code hl_variable" href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a>, <a class="code hl_variable" href="namespacecalendar.html#ab01178b933b4f1c62bd75b2edfdbaf79">calendar::start_of_cataclysm</a> );</div>
<div class="line"><a id="l02120" name="l02120"></a><span class="lineno"> 2120</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.eat( water ) ) {</div>
<div class="line"><a id="l02121" name="l02121"></a><span class="lineno"> 2121</span>                <a class="code hl_function" href="classvehicle.html#a2b28d63a4879b75d5a186289c54f6330">drain</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a>, 1 );</div>
<div class="line"><a id="l02122" name="l02122"></a><span class="lineno"> 2122</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.moves -= 250;</div>
<div class="line"><a id="l02123" name="l02123"></a><span class="lineno"> 2123</span>            }</div>
<div class="line"><a id="l02124" name="l02124"></a><span class="lineno"> 2124</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02125" name="l02125"></a><span class="lineno"> 2125</span>        }</div>
<div class="line"><a id="l02126" name="l02126"></a><span class="lineno"> 2126</span>        <span class="keywordflow">case</span> USE_WELDER: {</div>
<div class="line"><a id="l02127" name="l02127"></a><span class="lineno"> 2127</span>            <span class="keywordflow">if</span>( veh_tool( <a class="code hl_variable" href="vehicle__use_8cpp.html#af8e36ab370766d9dc7c2da5461285f61">itype_welder</a> ) ) {</div>
<div class="line"><a id="l02128" name="l02128"></a><span class="lineno"> 2128</span>                <span class="comment">// HACK: Evil hack incoming</span></div>
<div class="line"><a id="l02129" name="l02129"></a><span class="lineno"> 2129</span>                <a class="code hl_function" href="namespaceactivity__handlers_1_1repair__activity__hack.html#a5a06628fc3bbbfafb38b9b5b44e819d3">activity_handlers::repair_activity_hack::patch_activity_for_vehicle_welder</a>(</div>
<div class="line"><a id="l02130" name="l02130"></a><span class="lineno"> 2130</span>                    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.activity,</div>
<div class="line"><a id="l02131" name="l02131"></a><span class="lineno"> 2131</span>                    <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, *<span class="keyword">this</span>, interact_part</div>
<div class="line"><a id="l02132" name="l02132"></a><span class="lineno"> 2132</span>                );</div>
<div class="line"><a id="l02133" name="l02133"></a><span class="lineno"> 2133</span>            }</div>
<div class="line"><a id="l02134" name="l02134"></a><span class="lineno"> 2134</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02135" name="l02135"></a><span class="lineno"> 2135</span>        }</div>
<div class="line"><a id="l02136" name="l02136"></a><span class="lineno"> 2136</span>        <span class="keywordflow">case</span> USE_PURIFIER: {</div>
<div class="line"><a id="l02137" name="l02137"></a><span class="lineno"> 2137</span>            veh_tool( <a class="code hl_variable" href="vehicle__use_8cpp.html#a23c8190c3fbddc3ba5596ce2b31d8ce6">itype_water_purifier</a> );</div>
<div class="line"><a id="l02138" name="l02138"></a><span class="lineno"> 2138</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02139" name="l02139"></a><span class="lineno"> 2139</span>        }</div>
<div class="line"><a id="l02140" name="l02140"></a><span class="lineno"> 2140</span>        <span class="keywordflow">case</span> PURIFY_TANK: {</div>
<div class="line"><a id="l02141" name="l02141"></a><span class="lineno"> 2141</span>            <span class="keyword">auto</span> sel = []( <span class="keyword">const</span> <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp; pt ) {</div>
<div class="line"><a id="l02142" name="l02142"></a><span class="lineno"> 2142</span>                <span class="keywordflow">return</span> pt.is_tank() &amp;&amp; pt.ammo_current() == <a class="code hl_variable" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>;</div>
<div class="line"><a id="l02143" name="l02143"></a><span class="lineno"> 2143</span>            };</div>
<div class="line"><a id="l02144" name="l02144"></a><span class="lineno"> 2144</span>            <span class="keyword">auto</span> <a class="code hl_function" href="namespacePATH__INFO.html#af9a3ed879d4c10c8494ba4934c8ec678">title</a> = <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>(</div>
<div class="line"><a id="l02145" name="l02145"></a><span class="lineno"> 2145</span>                             <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Purify &lt;color_%s&gt;water&lt;/color&gt; in tank&quot;</span> ),</div>
<div class="line"><a id="l02146" name="l02146"></a><span class="lineno"> 2146</span>                             <a class="code hl_function" href="color_8cpp.html#a9f25347577eb0520b52ab6cfa1b06d97">get_all_colors</a>().get_name( <a class="code hl_variable" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>-&gt;<a class="code hl_variable" href="structitype.html#af4d6fc9396d1e09f23d2008f974ac757">color</a> ) );</div>
<div class="line"><a id="l02147" name="l02147"></a><span class="lineno"> 2147</span>            <span class="keyword">auto</span> &amp;tank = <a class="code hl_function" href="classveh__interact.html#a460d20d8b68251b506a59bbb54f59292">veh_interact::select_part</a>( *<span class="keyword">this</span>, sel, <a class="code hl_function" href="namespacePATH__INFO.html#af9a3ed879d4c10c8494ba4934c8ec678">title</a> );</div>
<div class="line"><a id="l02148" name="l02148"></a><span class="lineno"> 2148</span>            <span class="keywordflow">if</span>( tank ) {</div>
<div class="line"><a id="l02149" name="l02149"></a><span class="lineno"> 2149</span>                <span class="keywordtype">double</span> cost = <a class="code hl_variable" href="vehicle__use_8cpp.html#a23c8190c3fbddc3ba5596ce2b31d8ce6">itype_water_purifier</a>-&gt;<a class="code hl_function" href="structitype.html#a953828c9c01185fef0f619ecdcd7f3b1">charges_to_use</a>();</div>
<div class="line"><a id="l02150" name="l02150"></a><span class="lineno"> 2150</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a>, <span class="keyword">true</span> ) &lt; tank.ammo_remaining() * cost ) {</div>
<div class="line"><a id="l02151" name="l02151"></a><span class="lineno"> 2151</span>                    <span class="comment">//~ $1 - vehicle name, $2 - part name</span></div>
<div class="line"><a id="l02152" name="l02152"></a><span class="lineno"> 2152</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Insufficient power to purify the contents of the %1$s&#39;s %2$s&quot;</span> ),</div>
<div class="line"><a id="l02153" name="l02153"></a><span class="lineno"> 2153</span>                             <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, tank.name() );</div>
<div class="line"><a id="l02154" name="l02154"></a><span class="lineno"> 2154</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02155" name="l02155"></a><span class="lineno"> 2155</span>                    <span class="comment">//~ $1 - vehicle name, $2 - part name</span></div>
<div class="line"><a id="l02156" name="l02156"></a><span class="lineno"> 2156</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You purify the contents of the %1$s&#39;s %2$s&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, tank.name() );</div>
<div class="line"><a id="l02157" name="l02157"></a><span class="lineno"> 2157</span>                    <a class="code hl_function" href="classvehicle.html#acb03f8288804b551378478137e9cea11">discharge_battery</a>( tank.ammo_remaining() * cost );</div>
<div class="line"><a id="l02158" name="l02158"></a><span class="lineno"> 2158</span>                    tank.ammo_set( <a class="code hl_variable" href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a>, tank.ammo_remaining() );</div>
<div class="line"><a id="l02159" name="l02159"></a><span class="lineno"> 2159</span>                }</div>
<div class="line"><a id="l02160" name="l02160"></a><span class="lineno"> 2160</span>            }</div>
<div class="line"><a id="l02161" name="l02161"></a><span class="lineno"> 2161</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02162" name="l02162"></a><span class="lineno"> 2162</span>        }</div>
<div class="line"><a id="l02163" name="l02163"></a><span class="lineno"> 2163</span>        <span class="keywordflow">case</span> UNLOAD_TURRET: {</div>
<div class="line"><a id="l02164" name="l02164"></a><span class="lineno"> 2164</span>            <a class="code hl_class" href="classitem__location.html">item_location</a> loc = turret.base();</div>
<div class="line"><a id="l02165" name="l02165"></a><span class="lineno"> 2165</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;unload( loc );</div>
<div class="line"><a id="l02166" name="l02166"></a><span class="lineno"> 2166</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02167" name="l02167"></a><span class="lineno"> 2167</span>        }</div>
<div class="line"><a id="l02168" name="l02168"></a><span class="lineno"> 2168</span>        <span class="keywordflow">case</span> RELOAD_TURRET: {</div>
<div class="line"><a id="l02169" name="l02169"></a><span class="lineno"> 2169</span>            <a class="code hl_class" href="classitem_1_1reload__option.html">item::reload_option</a> opt = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.select_ammo( *turret.base(), <span class="keyword">true</span> );</div>
<div class="line"><a id="l02170" name="l02170"></a><span class="lineno"> 2170</span>            <span class="keywordflow">if</span>( opt ) {</div>
<div class="line"><a id="l02171" name="l02171"></a><span class="lineno"> 2171</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.assign_activity( <a class="code hl_variable" href="vehicle__use_8cpp.html#a475d61c972bace437e3341103ee5e17c">ACT_RELOAD</a>, opt.<a class="code hl_function" href="classitem_1_1reload__option.html#ab7102268fec39b1a9104321e4f2c98f5">moves</a>(), opt.<a class="code hl_function" href="classitem_1_1reload__option.html#af99909229b18cb529592856884124187">qty</a>() );</div>
<div class="line"><a id="l02172" name="l02172"></a><span class="lineno"> 2172</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.activity.targets.emplace_back( turret.base() );</div>
<div class="line"><a id="l02173" name="l02173"></a><span class="lineno"> 2173</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.activity.targets.push_back( <a class="code hl_function" href="namespaceavatar__action.html#a76ba74774376a08222b8cdcce08f7304">std::move</a>( opt.<a class="code hl_variable" href="classitem_1_1reload__option.html#afec3eb8ab3dff71940912db4a84ae7ea">ammo</a> ) );</div>
<div class="line"><a id="l02174" name="l02174"></a><span class="lineno"> 2174</span>            }</div>
<div class="line"><a id="l02175" name="l02175"></a><span class="lineno"> 2175</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02176" name="l02176"></a><span class="lineno"> 2176</span>        }</div>
<div class="line"><a id="l02177" name="l02177"></a><span class="lineno"> 2177</span>        <span class="keywordflow">case</span> FOLD_VEHICLE: {</div>
<div class="line"><a id="l02178" name="l02178"></a><span class="lineno"> 2178</span>            <a class="code hl_function" href="classvehicle.html#aac5f2a0e58f59b3cc5020d9bb7216bdd">fold_up</a>();</div>
<div class="line"><a id="l02179" name="l02179"></a><span class="lineno"> 2179</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02180" name="l02180"></a><span class="lineno"> 2180</span>        }</div>
<div class="line"><a id="l02181" name="l02181"></a><span class="lineno"> 2181</span>        <span class="keywordflow">case</span> HANDBRAKE: {</div>
<div class="line"><a id="l02182" name="l02182"></a><span class="lineno"> 2182</span>            <a class="code hl_function" href="vehicle__use_8cpp.html#af62204c610c3c22a0ca114864a5f2822">handbrake</a>();</div>
<div class="line"><a id="l02183" name="l02183"></a><span class="lineno"> 2183</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02184" name="l02184"></a><span class="lineno"> 2184</span>        }</div>
<div class="line"><a id="l02185" name="l02185"></a><span class="lineno"> 2185</span>        <span class="keywordflow">case</span> CONTROL: {</div>
<div class="line"><a id="l02186" name="l02186"></a><span class="lineno"> 2186</span>            <a class="code hl_function" href="classvehicle.html#a7872008545efae65aac7a6d9582bbd3b">use_controls</a>( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> );</div>
<div class="line"><a id="l02187" name="l02187"></a><span class="lineno"> 2187</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02188" name="l02188"></a><span class="lineno"> 2188</span>        }</div>
<div class="line"><a id="l02189" name="l02189"></a><span class="lineno"> 2189</span>        <span class="keywordflow">case</span> CONTROL_ELECTRONICS: {</div>
<div class="line"><a id="l02190" name="l02190"></a><span class="lineno"> 2190</span>            <a class="code hl_function" href="classvehicle.html#a905234356e91951db1fe65d212a0d89d">control_electronics</a>();</div>
<div class="line"><a id="l02191" name="l02191"></a><span class="lineno"> 2191</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02192" name="l02192"></a><span class="lineno"> 2192</span>        }</div>
<div class="line"><a id="l02193" name="l02193"></a><span class="lineno"> 2193</span>        <span class="keywordflow">case</span> EXAMINE: {</div>
<div class="line"><a id="l02194" name="l02194"></a><span class="lineno"> 2194</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;exam_vehicle( *<span class="keyword">this</span> );</div>
<div class="line"><a id="l02195" name="l02195"></a><span class="lineno"> 2195</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02196" name="l02196"></a><span class="lineno"> 2196</span>        }</div>
<div class="line"><a id="l02197" name="l02197"></a><span class="lineno"> 2197</span>        <span class="keywordflow">case</span> TRACK: {</div>
<div class="line"><a id="l02198" name="l02198"></a><span class="lineno"> 2198</span>            <a class="code hl_function" href="classvehicle.html#af215ec0fe4b4e7a8a8bf7e03e5874678">toggle_tracking</a>( );</div>
<div class="line"><a id="l02199" name="l02199"></a><span class="lineno"> 2199</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02200" name="l02200"></a><span class="lineno"> 2200</span>        }</div>
<div class="line"><a id="l02201" name="l02201"></a><span class="lineno"> 2201</span>        <span class="keywordflow">case</span> GET_ITEMS_ON_GROUND: {</div>
<div class="line"><a id="l02202" name="l02202"></a><span class="lineno"> 2202</span>            <a class="code hl_function" href="namespacepickup.html#a4346ea9e7a9b05efee7cef2fa3838f16">pickup::pick_up</a>( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, 0, <a class="code hl_enumvalue" href="namespacepickup.html#a03a2e6f98be01a67be0ad42cb7aa4c61a1119d052d90f503b8132a5a75b545a7b">pickup::from_ground</a> );</div>
<div class="line"><a id="l02203" name="l02203"></a><span class="lineno"> 2203</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02204" name="l02204"></a><span class="lineno"> 2204</span>        }</div>
<div class="line"><a id="l02205" name="l02205"></a><span class="lineno"> 2205</span>        <span class="keywordflow">case</span> GET_ITEMS: {</div>
<div class="line"><a id="l02206" name="l02206"></a><span class="lineno"> 2206</span>            <span class="keywordflow">if</span>( from_vehicle ) {</div>
<div class="line"><a id="l02207" name="l02207"></a><span class="lineno"> 2207</span>                <a class="code hl_function" href="namespacepickup.html#a4346ea9e7a9b05efee7cef2fa3838f16">pickup::pick_up</a>( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, 0, <a class="code hl_enumvalue" href="namespacepickup.html#a03a2e6f98be01a67be0ad42cb7aa4c61ad7cbf6c6b02403167fa72ebc0f4d2e50">pickup::from_cargo</a> );</div>
<div class="line"><a id="l02208" name="l02208"></a><span class="lineno"> 2208</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02209" name="l02209"></a><span class="lineno"> 2209</span>                <a class="code hl_function" href="namespacepickup.html#a4346ea9e7a9b05efee7cef2fa3838f16">pickup::pick_up</a>( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, 0, <a class="code hl_enumvalue" href="namespacepickup.html#a03a2e6f98be01a67be0ad42cb7aa4c61a1119d052d90f503b8132a5a75b545a7b">pickup::from_ground</a> );</div>
<div class="line"><a id="l02210" name="l02210"></a><span class="lineno"> 2210</span>            }</div>
<div class="line"><a id="l02211" name="l02211"></a><span class="lineno"> 2211</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02212" name="l02212"></a><span class="lineno"> 2212</span>        }</div>
<div class="line"><a id="l02213" name="l02213"></a><span class="lineno"> 2213</span>        <span class="keywordflow">case</span> RELOAD_PLANTER: {</div>
<div class="line"><a id="l02214" name="l02214"></a><span class="lineno"> 2214</span>            <a class="code hl_function" href="classvehicle.html#af1374dea5212a7c1311a1fd5bb3d1f0f">reload_seeds</a>( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> );</div>
<div class="line"><a id="l02215" name="l02215"></a><span class="lineno"> 2215</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02216" name="l02216"></a><span class="lineno"> 2216</span>        }</div>
<div class="line"><a id="l02217" name="l02217"></a><span class="lineno"> 2217</span>    }</div>
<div class="line"><a id="l02218" name="l02218"></a><span class="lineno"> 2218</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02219" name="l02219"></a><span class="lineno"> 2219</span>}</div>
<div class="ttc" id="aclassitem_1_1reload__option_html"><div class="ttname"><a href="classitem_1_1reload__option.html">item::reload_option</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00470">item.h:471</a></div></div>
<div class="ttc" id="aclassitem_1_1reload__option_html_ab7102268fec39b1a9104321e4f2c98f5"><div class="ttname"><a href="classitem_1_1reload__option.html#ab7102268fec39b1a9104321e4f2c98f5">item::reload_option::moves</a></div><div class="ttdeci">int moves() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07876">item.cpp:7876</a></div></div>
<div class="ttc" id="aclassitem_1_1reload__option_html_af99909229b18cb529592856884124187"><div class="ttname"><a href="classitem_1_1reload__option.html#af99909229b18cb529592856884124187">item::reload_option::qty</a></div><div class="ttdeci">int qty() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00485">item.h:485</a></div></div>
<div class="ttc" id="aclassitem_1_1reload__option_html_afec3eb8ab3dff71940912db4a84ae7ea"><div class="ttname"><a href="classitem_1_1reload__option.html#afec3eb8ab3dff71940912db4a84ae7ea">item::reload_option::ammo</a></div><div class="ttdeci">item_location ammo</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00483">item.h:483</a></div></div>
<div class="ttc" id="aclassitem__location_html"><div class="ttname"><a href="classitem__location.html">item_location</a></div><div class="ttdoc">A lightweight handle to an item independent of it's location Unlike a raw pointer can be (de-)seriali...</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8h_source.html#l00022">item_location.h:23</a></div></div>
<div class="ttc" id="aclassitem__stack_html_a83fd3bd296c75326b3709280804acef4"><div class="ttname"><a href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">item_stack::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00015">item_stack.cpp:15</a></div></div>
<div class="ttc" id="aclassveh__interact_html_a460d20d8b68251b506a59bbb54f59292"><div class="ttname"><a href="classveh__interact.html#a460d20d8b68251b506a59bbb54f59292">veh_interact::select_part</a></div><div class="ttdeci">static vehicle_part &amp; select_part(const vehicle &amp;veh, const part_selector &amp;sel, const std::string &amp;title=std::string())</div><div class="ttdoc">Prompt for a part matching the selector function.</div><div class="ttdef"><b>Definition:</b> <a href="veh__interact_8cpp_source.html#l00172">veh_interact.cpp:172</a></div></div>
<div class="ttc" id="aclassvehicle_html_a0cada0f94f36c1bbaf243d6ff82426ed"><div class="ttname"><a href="classvehicle.html#a0cada0f94f36c1bbaf243d6ff82426ed">vehicle::use_dishwasher</a></div><div class="ttdeci">void use_dishwasher(int p)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01691">vehicle_use.cpp:1691</a></div></div>
<div class="ttc" id="aclassvehicle_html_a2f52c81265462fd7eee8fd158666f9be"><div class="ttname"><a href="classvehicle.html#a2f52c81265462fd7eee8fd158666f9be">vehicle::handle_potential_theft</a></div><div class="ttdeci">bool handle_potential_theft(player &amp;p, bool check_only=false, bool prompt=true)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04197">vehicle.cpp:4197</a></div></div>
<div class="ttc" id="aclassvehicle_html_a370afbdd3c703760b7f2c9f04d1a05ce"><div class="ttname"><a href="classvehicle.html#a370afbdd3c703760b7f2c9f04d1a05ce">vehicle::use_autoclave</a></div><div class="ttdeci">void use_autoclave(int p)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01556">vehicle_use.cpp:1556</a></div></div>
<div class="ttc" id="aclassvehicle_html_a418ad39b520d156f334cb08132fe472e"><div class="ttname"><a href="classvehicle.html#a418ad39b520d156f334cb08132fe472e">vehicle::use_bike_rack</a></div><div class="ttdeci">void use_bike_rack(int part)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01823">vehicle_use.cpp:1823</a></div></div>
<div class="ttc" id="aclassvehicle_html_a46d22a6712ad986ed60917c367be83eb"><div class="ttname"><a href="classvehicle.html#a46d22a6712ad986ed60917c367be83eb">vehicle::charge_battery</a></div><div class="ttdeci">int charge_battery(int amount, bool include_other_vehicles=true)</div><div class="ttdoc">Try to charge our (and, optionally, connected vehicles') batteries by the given amount.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04926">vehicle.cpp:4926</a></div></div>
<div class="ttc" id="aclassvehicle_html_a5b4729ccb92667a95c0682c31b4d44c4"><div class="ttname"><a href="classvehicle.html#a5b4729ccb92667a95c0682c31b4d44c4">vehicle::use_monster_capture</a></div><div class="ttdeci">void use_monster_capture(int part, const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01748">vehicle_use.cpp:1748</a></div></div>
<div class="ttc" id="aclassvehicle_html_a75e144a47baea76ae92c0f6fc1e7c780"><div class="ttname"><a href="classvehicle.html#a75e144a47baea76ae92c0f6fc1e7c780">vehicle::tracking_toggle_string</a></div><div class="ttdeci">std::string tracking_toggle_string()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00537">vehicle_use.cpp:537</a></div></div>
<div class="ttc" id="aclassvehicle_html_a7872008545efae65aac7a6d9582bbd3b"><div class="ttname"><a href="classvehicle.html#a7872008545efae65aac7a6d9582bbd3b">vehicle::use_controls</a></div><div class="ttdeci">void use_controls(const tripoint &amp;pos)</div><div class="ttdoc">Operate vehicle controls.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00606">vehicle_use.cpp:606</a></div></div>
<div class="ttc" id="aclassvehicle_html_a8c5c783aa99f2c3cab059be7a72e80c4"><div class="ttname"><a href="classvehicle.html#a8c5c783aa99f2c3cab059be7a72e80c4">vehicle::use_harness</a></div><div class="ttdeci">void use_harness(int part, const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01764">vehicle_use.cpp:1764</a></div></div>
<div class="ttc" id="aclassvehicle_html_a905234356e91951db1fe65d212a0d89d"><div class="ttname"><a href="classvehicle.html#a905234356e91951db1fe65d212a0d89d">vehicle::control_electronics</a></div><div class="ttdeci">void control_electronics()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00344">vehicle_use.cpp:344</a></div></div>
<div class="ttc" id="aclassvehicle_html_aac5f2a0e58f59b3cc5020d9bb7216bdd"><div class="ttname"><a href="classvehicle.html#aac5f2a0e58f59b3cc5020d9bb7216bdd">vehicle::fold_up</a></div><div class="ttdeci">bool fold_up()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00801">vehicle_use.cpp:801</a></div></div>
<div class="ttc" id="aclassvehicle_html_ad7ee1f39dba42cbe13f9afe26ffc8405"><div class="ttname"><a href="classvehicle.html#ad7ee1f39dba42cbe13f9afe26ffc8405">vehicle::use_washing_machine</a></div><div class="ttdeci">void use_washing_machine(int p)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01606">vehicle_use.cpp:1606</a></div></div>
<div class="ttc" id="aclassvehicle_html_af1374dea5212a7c1311a1fd5bb3d1f0f"><div class="ttname"><a href="classvehicle.html#af1374dea5212a7c1311a1fd5bb3d1f0f">vehicle::reload_seeds</a></div><div class="ttdeci">void reload_seeds(const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01151">vehicle_use.cpp:1151</a></div></div>
<div class="ttc" id="aclassvehicle_html_af215ec0fe4b4e7a8a8bf7e03e5874678"><div class="ttname"><a href="classvehicle.html#af215ec0fe4b4e7a8a8bf7e03e5874678">vehicle::toggle_tracking</a></div><div class="ttdeci">void toggle_tracking()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00593">vehicle_use.cpp:593</a></div></div>
<div class="ttc" id="acolor_8cpp_html_a9f25347577eb0520b52ab6cfa1b06d97"><div class="ttname"><a href="color_8cpp.html#a9f25347577eb0520b52ab6cfa1b06d97">get_all_colors</a></div><div class="ttdeci">color_manager &amp; get_all_colors()</div><div class="ttdef"><b>Definition:</b> <a href="color_8cpp_source.html#l00045">color.cpp:45</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a></div><div class="ttdeci">@ m_good</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00253">enums.h:253</a></div></div>
<div class="ttc" id="anamespacePATH__INFO_html_af9a3ed879d4c10c8494ba4934c8ec678"><div class="ttname"><a href="namespacePATH__INFO.html#af9a3ed879d4c10c8494ba4934c8ec678">PATH_INFO::title</a></div><div class="ttdeci">std::string title(holiday current_holiday)</div><div class="ttdef"><b>Definition:</b> <a href="path__info_8cpp_source.html#l00330">path_info.cpp:330</a></div></div>
<div class="ttc" id="anamespaceactivity__handlers_1_1repair__activity__hack_html_a5a06628fc3bbbfafb38b9b5b44e819d3"><div class="ttname"><a href="namespaceactivity__handlers_1_1repair__activity__hack.html#a5a06628fc3bbbfafb38b9b5b44e819d3">activity_handlers::repair_activity_hack::patch_activity_for_vehicle_welder</a></div><div class="ttdeci">void patch_activity_for_vehicle_welder(player_activity &amp;activity, const tripoint &amp;veh_part_position, const vehicle &amp;veh, int interact_part_idx)</div><div class="ttdef"><b>Definition:</b> <a href="activity__handlers_8cpp_source.html#l02738">activity_handlers.cpp:2738</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a6cc5282019b1f6e24f9c91976a643427"><div class="ttname"><a href="namespaceiuse.html#a6cc5282019b1f6e24f9c91976a643427">iuse::towel_common</a></div><div class="ttdeci">int towel_common(player *, item *, bool)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l05571">iuse.cpp:5571</a></div></div>
<div class="ttc" id="anamespacepickup_html_a03a2e6f98be01a67be0ad42cb7aa4c61a1119d052d90f503b8132a5a75b545a7b"><div class="ttname"><a href="namespacepickup.html#a03a2e6f98be01a67be0ad42cb7aa4c61a1119d052d90f503b8132a5a75b545a7b">pickup::from_ground</a></div><div class="ttdeci">@ from_ground</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8h_source.html#l00029">pickup.h:29</a></div></div>
<div class="ttc" id="anamespacepickup_html_a03a2e6f98be01a67be0ad42cb7aa4c61ad7cbf6c6b02403167fa72ebc0f4d2e50"><div class="ttname"><a href="namespacepickup.html#a03a2e6f98be01a67be0ad42cb7aa4c61ad7cbf6c6b02403167fa72ebc0f4d2e50">pickup::from_cargo</a></div><div class="ttdeci">@ from_cargo</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8h_source.html#l00028">pickup.h:28</a></div></div>
<div class="ttc" id="anamespacepickup_html_a4346ea9e7a9b05efee7cef2fa3838f16"><div class="ttname"><a href="namespacepickup.html#a4346ea9e7a9b05efee7cef2fa3838f16">pickup::pick_up</a></div><div class="ttdeci">void pick_up(const tripoint &amp;p, int min, from_where get_items_from=prompt)</div><div class="ttdoc">Pick up items; 'g' or ',' or via examine()</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00571">pickup.cpp:571</a></div></div>
<div class="ttc" id="astructitype_html_a953828c9c01185fef0f619ecdcd7f3b1"><div class="ttname"><a href="structitype.html#a953828c9c01185fef0f619ecdcd7f3b1">itype::charges_to_use</a></div><div class="ttdeci">int charges_to_use() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01089">itype.h:1089</a></div></div>
<div class="ttc" id="astructitype_html_af4d6fc9396d1e09f23d2008f974ac757"><div class="ttname"><a href="structitype.html#af4d6fc9396d1e09f23d2008f974ac757">itype::color</a></div><div class="ttdeci">nc_color color</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01006">itype.h:1006</a></div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a04c0f30be5943072fbaecacc8a0cf848"><div class="ttname"><a href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a></div><div class="ttdeci">static const itype_id itype_water_clean(&quot;water_clean&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a23c8190c3fbddc3ba5596ce2b31d8ce6"><div class="ttname"><a href="vehicle__use_8cpp.html#a23c8190c3fbddc3ba5596ce2b31d8ce6">itype_water_purifier</a></div><div class="ttdeci">static const itype_id itype_water_purifier(&quot;water_purifier&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a475d61c972bace437e3341103ee5e17c"><div class="ttname"><a href="vehicle__use_8cpp.html#a475d61c972bace437e3341103ee5e17c">ACT_RELOAD</a></div><div class="ttdeci">static const activity_id ACT_RELOAD(&quot;ACT_RELOAD&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a6341843b361543b335aaf869a0e7bb7d"><div class="ttname"><a href="vehicle__use_8cpp.html#a6341843b361543b335aaf869a0e7bb7d">itype_hotplate</a></div><div class="ttdeci">static const itype_id itype_hotplate(&quot;hotplate&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_aa2ceccc4206df9156875336ef6a593de"><div class="ttname"><a href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a></div><div class="ttdeci">char keybind(const std::string &amp;opt, const std::string &amp;context)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00094">vehicle_use.cpp:94</a></div></div>
<div class="ttc" id="avehicle__use_8cpp_html_ab5f267c571dc194e5b7e0b10b5136a33"><div class="ttname"><a href="vehicle__use_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a></div><div class="ttdeci">static const itype_id itype_battery(&quot;battery&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_abfd8b1d23930a50d7f122f0d39538649"><div class="ttname"><a href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a></div><div class="ttdeci">static const itype_id itype_water(&quot;water&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_af62204c610c3c22a0ca114864a5f2822"><div class="ttname"><a href="vehicle__use_8cpp.html#af62204c610c3c22a0ca114864a5f2822">handbrake</a></div><div class="ttdeci">void handbrake()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00144">vehicle_use.cpp:144</a></div></div>
<div class="ttc" id="avehicle__use_8cpp_html_af8e36ab370766d9dc7c2da5461285f61"><div class="ttname"><a href="vehicle__use_8cpp.html#af8e36ab370766d9dc7c2da5461285f61">itype_welder</a></div><div class="ttdeci">static const itype_id itype_welder(&quot;welder&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="vehicle__use_8cpp.html#a475d61c972bace437e3341103ee5e17c">ACT_RELOAD</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="ui_8cpp_source.html#l00932">uilist::addentry()</a>, <a class="el" href="item_8h_source.html#l00483">item::reload_option::ammo</a>, <a class="el" href="item_8cpp_source.html#l07253">item::ammo_capacity()</a>, <a class="el" href="item_8cpp_source.html#l07226">item::ammo_remaining()</a>, <a class="el" href="item_8cpp_source.html#l07296">item::ammo_required()</a>, <a class="el" href="item_8cpp_source.html#l00587">item::ammo_set()</a>, <a class="el" href="vehicle_8cpp_source.html#l02543">avail_part_with_feature()</a>, <a class="el" href="vehicle_8cpp_source.html#l04926">charge_battery()</a>, <a class="el" href="itype_8h_source.html#l01089">itype::charges_to_use()</a>, <a class="el" href="itype_8h_source.html#l01006">itype::color</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00344">control_electronics()</a>, <a class="el" href="vehicle_8cpp_source.html#l04973">discharge_battery()</a>, <a class="el" href="vehicle_8cpp_source.html#l03246">drain()</a>, <a class="el" href="item__stack_8cpp_source.html#l00015">item_stack::empty()</a>, <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a>, <a class="el" href="ui_8h_source.html#l00323">uilist::entries</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00801">fold_up()</a>, <a class="el" href="pickup_8h_source.html#l00028">pickup::from_cargo</a>, <a class="el" href="pickup_8h_source.html#l00029">pickup::from_ground</a>, <a class="el" href="vehicle_8cpp_source.html#l03179">fuel_left()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="color_8cpp_source.html#l00045">get_all_colors()</a>, <a class="el" href="vehicle_8cpp_source.html#l05288">get_items()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00144">handbrake()</a>, <a class="el" href="vehicle_8cpp_source.html#l04197">handle_potential_theft()</a>, <a class="el" href="vehicle_8cpp_source.html#l06537">is_foldable()</a>, <a class="el" href="vehicle__use_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a>, <a class="el" href="vehicle__use_8cpp.html#a6341843b361543b335aaf869a0e7bb7d">itype_hotplate</a>, <a class="el" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>, <a class="el" href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a>, <a class="el" href="vehicle__use_8cpp.html#a23c8190c3fbddc3ba5596ce2b31d8ce6">itype_water_purifier</a>, <a class="el" href="vehicle__use_8cpp.html#af8e36ab370766d9dc7c2da5461285f61">itype_welder</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00094">keybind()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00253">m_good</a>, <a class="el" href="avatar__action_8cpp_source.html#l00090">avatar_action::move()</a>, <a class="el" href="item_8cpp_source.html#l07876">item::reload_option::moves()</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01463">open()</a>, <a class="el" href="vehicle_8cpp_source.html#l02518">part_with_feature()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="activity__handlers_8cpp_source.html#l02738">activity_handlers::repair_activity_hack::patch_activity_for_vehicle_welder()</a>, <a class="el" href="pickup_8cpp_source.html#l00571">pickup::pick_up()</a>, <a class="el" href="vehicle_8h_source.html#l01859">pos</a>, <a class="el" href="item_8h_source.html#l00485">item::reload_option::qty()</a>, <a class="el" href="ui_8cpp_source.html#l00828">uilist::query()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01151">reload_seeds()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="veh__interact_8cpp_source.html#l00172">veh_interact::select_part()</a>, <a class="el" href="calendar_8cpp_source.html#l00033">calendar::start_of_cataclysm</a>, <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>, <a class="el" href="vehicle_8h_source.html#l01802">tags</a>, <a class="el" href="ui_8h_source.html#l00320">uilist::text</a>, <a class="el" href="path__info_8cpp_source.html#l00330">PATH_INFO::title()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00593">toggle_tracking()</a>, <a class="el" href="iuse_8cpp_source.html#l05571">iuse::towel_common()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00537">tracking_toggle_string()</a>, <a class="el" href="turret_8cpp_source.html#l00055">turret_query()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01556">use_autoclave()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01823">use_bike_rack()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01691">use_dishwasher()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01764">use_harness()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01748">use_monster_capture()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l01606">use_washing_machine()</a>.</p>

</div>
</div>
<a id="a8e8079a6591b3104191c881509f16d61" name="a8e8079a6591b3104191c881509f16d61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e8079a6591b3104191c881509f16d61">&#9670;&nbsp;</a></span>invalidate_mass()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::invalidate_mass </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mark mass caches and pivot cache as dirty. </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06778">6778</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06779" name="l06779"></a><span class="lineno"> 6779</span>{</div>
<div class="line"><a id="l06780" name="l06780"></a><span class="lineno"> 6780</span>    <a class="code hl_variable" href="classvehicle.html#ac9c7234d3c2f5f0c42cc57b0931d21a6">mass_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l06781" name="l06781"></a><span class="lineno"> 6781</span>    <a class="code hl_variable" href="classvehicle.html#a908223c2d250ba23fdbff51379cf2213">mass_center_precalc_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l06782" name="l06782"></a><span class="lineno"> 6782</span>    <a class="code hl_variable" href="classvehicle.html#afa84e5e990b66ac1cedeba291ddc6028">mass_center_no_precalc_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l06783" name="l06783"></a><span class="lineno"> 6783</span>    <span class="comment">// Anything that affects mass will also affect the pivot</span></div>
<div class="line"><a id="l06784" name="l06784"></a><span class="lineno"> 6784</span>    <a class="code hl_variable" href="classvehicle.html#a4618e6b69581e93ab96d66fc889659c5">pivot_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l06785" name="l06785"></a><span class="lineno"> 6785</span>    <a class="code hl_variable" href="classvehicle.html#a57285bb3b5dfda9f926bd3f99e3e1bad">coeff_rolling_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l06786" name="l06786"></a><span class="lineno"> 6786</span>    <a class="code hl_variable" href="classvehicle.html#a3bf02329db46b5a5dda2a0b35b8147fc">coeff_water_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l06787" name="l06787"></a><span class="lineno"> 6787</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01904">coeff_rolling_dirty</a>, <a class="el" href="vehicle_8h_source.html#l01906">coeff_water_dirty</a>, <a class="el" href="vehicle_8h_source.html#l01902">mass_center_no_precalc_dirty</a>, <a class="el" href="vehicle_8h_source.html#l01901">mass_center_precalc_dirty</a>, <a class="el" href="vehicle_8h_source.html#l01900">mass_dirty</a>, and <a class="el" href="vehicle_8h_source.html#l01899">pivot_dirty</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02896">act_vehicle_siphon()</a>, <a class="el" href="vehicle_8cpp_source.html#l05209">add_item()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02986">veh_interact::complete_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l06437">damage_direct()</a>, <a class="el" href="vehicle_8cpp_source.html#l03246">drain()</a>, <a class="el" href="vehicle_8cpp_source.html#l04371">drain_energy()</a>, <a class="el" href="grab_8cpp_source.html#l00021">game::grabbed_veh_move()</a>, <a class="el" href="vehicle_8cpp_source.html#l00386">init_state()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="item__location_8cpp_source.html#l00499">item_location::impl::item_on_vehicle::remove_item()</a>, <a class="el" href="vehicle_8cpp_source.html#l05271">remove_item()</a>, <a class="el" href="map_8cpp_source.html#l01060">map::unboard_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l06657">update_time()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l01748">use_monster_capture()</a>.</p>

</div>
</div>
<a id="ad874a1fdccab8e70b60d887fc0d56b7e" name="ad874a1fdccab8e70b60d887fc0d56b7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad874a1fdccab8e70b60d887fc0d56b7e">&#9670;&nbsp;</a></span>invalidate_towing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::invalidate_towing </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>first_vehicle</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05939">5939</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05940" name="l05940"></a><span class="lineno"> 5940</span>{</div>
<div class="line"><a id="l05941" name="l05941"></a><span class="lineno"> 5941</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#a40b149ccb2383cb1a263f3e3d88f3469">is_towing</a>() &amp;&amp; !<a class="code hl_function" href="classvehicle.html#ac24aba962fd53d1a87bf57b52ce40508">is_towed</a>() ) {</div>
<div class="line"><a id="l05942" name="l05942"></a><span class="lineno"> 5942</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05943" name="l05943"></a><span class="lineno"> 5943</span>    }</div>
<div class="line"><a id="l05944" name="l05944"></a><span class="lineno"> 5944</span>    <a class="code hl_class" href="classvehicle.html">vehicle</a> *other_veh = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l05945" name="l05945"></a><span class="lineno"> 5945</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a40b149ccb2383cb1a263f3e3d88f3469">is_towing</a>() ) {</div>
<div class="line"><a id="l05946" name="l05946"></a><span class="lineno"> 5946</span>        other_veh = <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a4cc6247530a16020db73b3af28e0024e">get_towed</a>();</div>
<div class="line"><a id="l05947" name="l05947"></a><span class="lineno"> 5947</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#ac24aba962fd53d1a87bf57b52ce40508">is_towed</a>() ) {</div>
<div class="line"><a id="l05948" name="l05948"></a><span class="lineno"> 5948</span>        other_veh = <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a5f5e060b9d76c409ae99c49fbdeda88f">get_towed_by</a>();</div>
<div class="line"><a id="l05949" name="l05949"></a><span class="lineno"> 5949</span>    }</div>
<div class="line"><a id="l05950" name="l05950"></a><span class="lineno"> 5950</span>    <span class="keywordflow">if</span>( other_veh &amp;&amp; first_vehicle ) {</div>
<div class="line"><a id="l05951" name="l05951"></a><span class="lineno"> 5951</span>        other_veh-&gt;<a class="code hl_function" href="classvehicle.html#ad874a1fdccab8e70b60d887fc0d56b7e">invalidate_towing</a>();</div>
<div class="line"><a id="l05952" name="l05952"></a><span class="lineno"> 5952</span>    }</div>
<div class="line"><a id="l05953" name="l05953"></a><span class="lineno"> 5953</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a397b40aa92dd1fd09ee592aa279bc656">get_all_parts</a>() ) {</div>
<div class="line"><a id="l05954" name="l05954"></a><span class="lineno"> 5954</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> p = vp.part_index();</div>
<div class="line"><a id="l05955" name="l05955"></a><span class="lineno"> 5955</span>        <span class="keywordflow">if</span>( vp.part().removed ) {</div>
<div class="line"><a id="l05956" name="l05956"></a><span class="lineno"> 5956</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05957" name="l05957"></a><span class="lineno"> 5957</span>        }</div>
<div class="line"><a id="l05958" name="l05958"></a><span class="lineno"> 5958</span> </div>
<div class="line"><a id="l05959" name="l05959"></a><span class="lineno"> 5959</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( p, <span class="stringliteral">&quot;TOW_CABLE&quot;</span>, <span class="keyword">true</span> ) &gt;= 0 ) {</div>
<div class="line"><a id="l05960" name="l05960"></a><span class="lineno"> 5960</span>            <span class="keywordflow">if</span>( first_vehicle ) {</div>
<div class="line"><a id="l05961" name="l05961"></a><span class="lineno"> 5961</span>                <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> *<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> = &amp;<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( p, <span class="stringliteral">&quot;TOW_CABLE&quot;</span>, <span class="keyword">true</span> )];</div>
<div class="line"><a id="l05962" name="l05962"></a><span class="lineno"> 5962</span>                <a class="code hl_class" href="classitem.html">item</a> drop = <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>-&gt;<a class="code hl_function" href="structvehicle__part.html#a22e79d75d5b28798979df9e8cf774c0c">properties_to_item</a>();</div>
<div class="line"><a id="l05963" name="l05963"></a><span class="lineno"> 5963</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_item_or_charges( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( *<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ), drop );</div>
<div class="line"><a id="l05964" name="l05964"></a><span class="lineno"> 5964</span>            }</div>
<div class="line"><a id="l05965" name="l05965"></a><span class="lineno"> 5965</span>            <a class="code hl_function" href="classvehicle.html#a04638c5234928c4ccca14ddc2059fb11">remove_part</a>( <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( p, <span class="stringliteral">&quot;TOW_CABLE&quot;</span>, <span class="keyword">true</span> ) );</div>
<div class="line"><a id="l05966" name="l05966"></a><span class="lineno"> 5966</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05967" name="l05967"></a><span class="lineno"> 5967</span>        }</div>
<div class="line"><a id="l05968" name="l05968"></a><span class="lineno"> 5968</span>    }</div>
<div class="line"><a id="l05969" name="l05969"></a><span class="lineno"> 5969</span>    <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a3be8540079c1ba0e07c594fc6e210bf3">clear_towing</a>();</div>
<div class="line"><a id="l05970" name="l05970"></a><span class="lineno"> 5970</span>}</div>
<div class="ttc" id="aclasstowing__data_html_a3be8540079c1ba0e07c594fc6e210bf3"><div class="ttname"><a href="classtowing__data.html#a3be8540079c1ba0e07c594fc6e210bf3">towing_data::clear_towing</a></div><div class="ttdeci">void clear_towing()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00161">vehicle.h:161</a></div></div>
<div class="ttc" id="aclasstowing__data_html_a5f5e060b9d76c409ae99c49fbdeda88f"><div class="ttname"><a href="classtowing__data.html#a5f5e060b9d76c409ae99c49fbdeda88f">towing_data::get_towed_by</a></div><div class="ttdeci">vehicle * get_towed_by() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00154">vehicle.h:154</a></div></div>
<div class="ttc" id="aclassvehicle_html_ac24aba962fd53d1a87bf57b52ce40508"><div class="ttname"><a href="classvehicle.html#ac24aba962fd53d1a87bf57b52ce40508">vehicle::is_towed</a></div><div class="ttdeci">bool is_towed() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05859">vehicle.cpp:5859</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a22e79d75d5b28798979df9e8cf774c0c"><div class="ttname"><a href="structvehicle__part.html#a22e79d75d5b28798979df9e8cf774c0c">vehicle_part::properties_to_item</a></div><div class="ttdeci">item properties_to_item() const</div><div class="ttdoc">Generate the corresponding item from this vehicle part.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00067">vehicle_part.cpp:67</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l00161">towing_data::clear_towing()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l06882">get_all_parts()</a>, <a class="el" href="vehicle_8h_source.html#l00158">towing_data::get_towed()</a>, <a class="el" href="vehicle_8h_source.html#l00154">towing_data::get_towed_by()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l05939">invalidate_towing()</a>, <a class="el" href="vehicle_8cpp_source.html#l05859">is_towed()</a>, <a class="el" href="vehicle_8cpp_source.html#l05844">is_towing()</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8cpp_source.html#l02518">part_with_feature()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00067">vehicle_part::properties_to_item()</a>, <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>, and <a class="el" href="vehicle_8h_source.html#l01887">tow_data</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06437">damage_direct()</a>, <a class="el" href="map_8cpp_source.html#l00340">map::detach_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l05745">do_towing_move()</a>, <a class="el" href="vehicle_8cpp_source.html#l05939">invalidate_towing()</a>, <a class="el" href="vehicle_8cpp_source.html#l01654">merge_rackable_vehicle()</a>, and <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>.</p>

</div>
</div>
<a id="af73c2981a9b17d7e67d37568f7ce0401" name="af73c2981a9b17d7e67d37568f7ce0401"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af73c2981a9b17d7e67d37568f7ce0401">&#9670;&nbsp;</a></span>is_alternator_on()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_alternator_on </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01097">1097</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>{</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>    <span class="keyword">auto</span> alt = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="classvehicle.html#ab4dee440f50b7e9a412faf4dab9796c0">alternators</a> [ <a class="code hl_variable" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> ] ];</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>    <span class="keywordflow">if</span>( alt.is_unavailable() ) {</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>    }</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span> </div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>    <span class="keywordflow">return</span> std::any_of( <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.begin(), <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.end(), [<span class="keyword">this</span>, &amp;alt]( <span class="keywordtype">int</span> idx ) {</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>        auto &amp;eng = parts [ idx ];</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>        <span class="comment">//fuel_left checks that the engine can produce power to be absorbed</span></div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>        return eng.is_available() &amp;&amp; eng.enabled &amp;&amp; fuel_left( eng.fuel_current() ) &amp;&amp;</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>               eng.mount == alt.mount &amp;&amp; !eng.faults().count( fault_belt );</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>    } );</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>}</div>
<div class="ttc" id="aclassvehicle_html_ab4dee440f50b7e9a412faf4dab9796c0"><div class="ttname"><a href="classvehicle.html#ab4dee440f50b7e9a412faf4dab9796c0">vehicle::alternators</a></div><div class="ttdeci">std::vector&lt; int &gt; alternators</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01751">vehicle.h:1751</a></div></div>
<div class="ttc" id="amagic_8cpp_html_a188caae18b60b66f9f44214c7e28ac1f"><div class="ttname"><a href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a></div><div class="ttdeci">constexpr double a</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01029">magic.cpp:1029</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01029">a</a>, <a class="el" href="vehicle_8h_source.html#l01751">alternators</a>, <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04482">total_alternator_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l03333">total_power_w()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04594">update_alternator_load()</a>.</p>

</div>
</div>
<a id="afbada90fa3188ed391fcd80023f1148f" name="afbada90fa3188ed391fcd80023f1148f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbada90fa3188ed391fcd80023f1148f">&#9670;&nbsp;</a></span>is_connected()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_connected </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;&#160;</td>
          <td class="paramname"><em>excluded_part</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Performs a breadth-first search from one part to another, to see if a path exists between the two without going through the excluded part. </p>
<p >Used to see if a part can be legally removed. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">to</td><td>The part to reach. </td></tr>
    <tr><td class="paramname">from</td><td>The part to start the search from. </td></tr>
    <tr><td class="paramname">excluded_part</td><td>The part that is being removed and, therefore, should not be included in the path. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if a path exists without the excluded part, false otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01484">1484</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01486" name="l01486"></a><span class="lineno"> 1486</span>{</div>
<div class="line"><a id="l01487" name="l01487"></a><span class="lineno"> 1487</span>    <span class="keyword">const</span> <span class="keyword">auto</span> target = to.<a class="code hl_variable" href="structvehicle__part.html#ac6e2dfa7178b8bed91baea3543961a86">mount</a>;</div>
<div class="line"><a id="l01488" name="l01488"></a><span class="lineno"> 1488</span>    <span class="keyword">const</span> <span class="keyword">auto</span> excluded = excluded_part.<a class="code hl_variable" href="structvehicle__part.html#ac6e2dfa7178b8bed91baea3543961a86">mount</a>;</div>
<div class="line"><a id="l01489" name="l01489"></a><span class="lineno"> 1489</span> </div>
<div class="line"><a id="l01490" name="l01490"></a><span class="lineno"> 1490</span>    <span class="comment">//Breadth-first-search components</span></div>
<div class="line"><a id="l01491" name="l01491"></a><span class="lineno"> 1491</span>    std::list&lt;vehicle_part&gt; discovered;</div>
<div class="line"><a id="l01492" name="l01492"></a><span class="lineno"> 1492</span>    std::list&lt;vehicle_part&gt; searched;</div>
<div class="line"><a id="l01493" name="l01493"></a><span class="lineno"> 1493</span> </div>
<div class="line"><a id="l01494" name="l01494"></a><span class="lineno"> 1494</span>    <span class="comment">//We begin with just the start point</span></div>
<div class="line"><a id="l01495" name="l01495"></a><span class="lineno"> 1495</span>    discovered.push_back( from );</div>
<div class="line"><a id="l01496" name="l01496"></a><span class="lineno"> 1496</span> </div>
<div class="line"><a id="l01497" name="l01497"></a><span class="lineno"> 1497</span>    <span class="keywordflow">while</span>( !discovered.empty() ) {</div>
<div class="line"><a id="l01498" name="l01498"></a><span class="lineno"> 1498</span>        <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> current_part = discovered.front();</div>
<div class="line"><a id="l01499" name="l01499"></a><span class="lineno"> 1499</span>        discovered.pop_front();</div>
<div class="line"><a id="l01500" name="l01500"></a><span class="lineno"> 1500</span>        <span class="keyword">auto</span> current = current_part.<a class="code hl_variable" href="structvehicle__part.html#ac6e2dfa7178b8bed91baea3543961a86">mount</a>;</div>
<div class="line"><a id="l01501" name="l01501"></a><span class="lineno"> 1501</span> </div>
<div class="line"><a id="l01502" name="l01502"></a><span class="lineno"> 1502</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> &amp;offset : <a class="code hl_variable" href="point_8h.html#aad28d8d682bc8e5628fd2b04df87decd">four_adjacent_offsets</a> ) {</div>
<div class="line"><a id="l01503" name="l01503"></a><span class="lineno"> 1503</span>            <a class="code hl_struct" href="structpoint.html">point</a> next = current + offset;</div>
<div class="line"><a id="l01504" name="l01504"></a><span class="lineno"> 1504</span> </div>
<div class="line"><a id="l01505" name="l01505"></a><span class="lineno"> 1505</span>            <span class="keywordflow">if</span>( next == target ) {</div>
<div class="line"><a id="l01506" name="l01506"></a><span class="lineno"> 1506</span>                <span class="comment">//Success!</span></div>
<div class="line"><a id="l01507" name="l01507"></a><span class="lineno"> 1507</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01508" name="l01508"></a><span class="lineno"> 1508</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( next == excluded ) {</div>
<div class="line"><a id="l01509" name="l01509"></a><span class="lineno"> 1509</span>                <span class="comment">//There might be a path, but we&#39;re not allowed to go that way</span></div>
<div class="line"><a id="l01510" name="l01510"></a><span class="lineno"> 1510</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01511" name="l01511"></a><span class="lineno"> 1511</span>            }</div>
<div class="line"><a id="l01512" name="l01512"></a><span class="lineno"> 1512</span> </div>
<div class="line"><a id="l01513" name="l01513"></a><span class="lineno"> 1513</span>            std::vector&lt;int&gt; parts_there = <a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( next, <span class="keyword">true</span> );</div>
<div class="line"><a id="l01514" name="l01514"></a><span class="lineno"> 1514</span> </div>
<div class="line"><a id="l01515" name="l01515"></a><span class="lineno"> 1515</span>            <span class="keywordflow">if</span>( !parts_there.empty() &amp;&amp; !<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ parts_there[ 0 ] ].removed &amp;&amp;</div>
<div class="line"><a id="l01516" name="l01516"></a><span class="lineno"> 1516</span>                <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( parts_there[ 0 ] ).location == <span class="stringliteral">&quot;structure&quot;</span> &amp;&amp;</div>
<div class="line"><a id="l01517" name="l01517"></a><span class="lineno"> 1517</span>                !<a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( parts_there[ 0 ] ).has_flag( <span class="stringliteral">&quot;PROTRUSION&quot;</span> ) ) {</div>
<div class="line"><a id="l01518" name="l01518"></a><span class="lineno"> 1518</span>                <span class="comment">//Only add the part if we haven&#39;t been here before</span></div>
<div class="line"><a id="l01519" name="l01519"></a><span class="lineno"> 1519</span>                <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01520" name="l01520"></a><span class="lineno"> 1520</span>                <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;elem : discovered ) {</div>
<div class="line"><a id="l01521" name="l01521"></a><span class="lineno"> 1521</span>                    <span class="keywordflow">if</span>( elem.mount == next ) {</div>
<div class="line"><a id="l01522" name="l01522"></a><span class="lineno"> 1522</span>                        found = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01523" name="l01523"></a><span class="lineno"> 1523</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01524" name="l01524"></a><span class="lineno"> 1524</span>                    }</div>
<div class="line"><a id="l01525" name="l01525"></a><span class="lineno"> 1525</span>                }</div>
<div class="line"><a id="l01526" name="l01526"></a><span class="lineno"> 1526</span>                <span class="keywordflow">if</span>( !found ) {</div>
<div class="line"><a id="l01527" name="l01527"></a><span class="lineno"> 1527</span>                    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;elem : searched ) {</div>
<div class="line"><a id="l01528" name="l01528"></a><span class="lineno"> 1528</span>                        <span class="keywordflow">if</span>( elem.mount == next ) {</div>
<div class="line"><a id="l01529" name="l01529"></a><span class="lineno"> 1529</span>                            found = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01530" name="l01530"></a><span class="lineno"> 1530</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01531" name="l01531"></a><span class="lineno"> 1531</span>                        }</div>
<div class="line"><a id="l01532" name="l01532"></a><span class="lineno"> 1532</span>                    }</div>
<div class="line"><a id="l01533" name="l01533"></a><span class="lineno"> 1533</span>                }</div>
<div class="line"><a id="l01534" name="l01534"></a><span class="lineno"> 1534</span>                <span class="keywordflow">if</span>( !found ) {</div>
<div class="line"><a id="l01535" name="l01535"></a><span class="lineno"> 1535</span>                    <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> next_part = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[parts_there[0]];</div>
<div class="line"><a id="l01536" name="l01536"></a><span class="lineno"> 1536</span>                    discovered.push_back( next_part );</div>
<div class="line"><a id="l01537" name="l01537"></a><span class="lineno"> 1537</span>                }</div>
<div class="line"><a id="l01538" name="l01538"></a><span class="lineno"> 1538</span>            }</div>
<div class="line"><a id="l01539" name="l01539"></a><span class="lineno"> 1539</span>        }</div>
<div class="line"><a id="l01540" name="l01540"></a><span class="lineno"> 1540</span>        <span class="comment">//Now that that&#39;s done, we&#39;ve finished exploring here</span></div>
<div class="line"><a id="l01541" name="l01541"></a><span class="lineno"> 1541</span>        searched.push_back( current_part );</div>
<div class="line"><a id="l01542" name="l01542"></a><span class="lineno"> 1542</span>    }</div>
<div class="line"><a id="l01543" name="l01543"></a><span class="lineno"> 1543</span>    <span class="comment">//If we completely exhaust the discovered list, there&#39;s no path</span></div>
<div class="line"><a id="l01544" name="l01544"></a><span class="lineno"> 1544</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01545" name="l01545"></a><span class="lineno"> 1545</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="point_8h_source.html#l00358">four_adjacent_offsets</a>, <a class="el" href="vehicle_8h_source.html#l00367">vehicle_part::mount</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l01388">can_unmount()</a>.</p>

</div>
</div>
<a id="a4d73f86ddc3aafe3231c33c098b9d6c8" name="a4d73f86ddc3aafe3231c33c098b9d6c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d73f86ddc3aafe3231c33c098b9d6c8">&#9670;&nbsp;</a></span>is_engine_on()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_engine_on </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01087">1087</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>{</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[ e ] ].is_available() &amp;&amp; <a class="code hl_function" href="classvehicle.html#a625ad56bb7c71b7305ccbdb411d650db">is_part_on</a>( <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[ e ] );</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, <a class="el" href="vehicle_8cpp_source.html#l01092">is_part_on()</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05018">do_engine_damage()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00899">engine_start_time()</a>, <a class="el" href="vehicle_8cpp_source.html#l04340">fuel_usage()</a>, <a class="el" href="vehicle_8cpp_source.html#l01031">has_engine_type()</a>, <a class="el" href="vehicle_8cpp_source.html#l01040">has_engine_type_not()</a>, <a class="el" href="vehicle_8cpp_source.html#l01026">is_engine_type_on()</a>, <a class="el" href="vehicle_8cpp_source.html#l03644">noise_and_smoke()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00343">print_fuel_indicators()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00918">start_engine()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01055">start_engines()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l02356">activity_handlers::start_engines_finish()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01033">stop_engines()</a>, <a class="el" href="vehicle_8cpp_source.html#l04496">total_engine_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l03333">total_power_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04594">update_alternator_load()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="aaea77fa5cfb98d7b1aadb0e71ee7a671" name="aaea77fa5cfb98d7b1aadb0e71ee7a671"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaea77fa5cfb98d7b1aadb0e71ee7a671">&#9670;&nbsp;</a></span>is_engine_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_engine_type </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>ft</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01075">1075</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>{</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e]].ammo_current().is_null() ? <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e]].fuel_current() == ft :</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>           <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e]].ammo_current() == ft;</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l01031">has_engine_type()</a>, <a class="el" href="vehicle_8cpp_source.html#l01040">has_engine_type_not()</a>, <a class="el" href="vehicle_8cpp_source.html#l01026">is_engine_type_on()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00343">print_fuel_indicators()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00918">start_engine()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l02356">activity_handlers::start_engines_finish()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01033">stop_engines()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="ad220b3180a33f66aa420dfa24b1d3ee4" name="ad220b3180a33f66aa420dfa24b1d3ee4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad220b3180a33f66aa420dfa24b1d3ee4">&#9670;&nbsp;</a></span>is_engine_type_on()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_engine_type_on </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>ft</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01026">1026</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>{</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a4d73f86ddc3aafe3231c33c098b9d6c8">is_engine_on</a>( e ) &amp;&amp; <a class="code hl_function" href="classvehicle.html#aaea77fa5cfb98d7b1aadb0e71ee7a671">is_engine_type</a>( e, ft );</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l01087">is_engine_on()</a>, and <a class="el" href="vehicle_8cpp_source.html#l01075">is_engine_type()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03297">basic_consumption()</a>.</p>

</div>
</div>
<a id="adb993252c4c4131ced3d47e37ac0f811" name="adb993252c4c4131ced3d47e37ac0f811"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb993252c4c4131ced3d47e37ac0f811">&#9670;&nbsp;</a></span>is_external_part()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_external_part </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>part_pt</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05830">5830</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05831" name="l05831"></a><span class="lineno"> 5831</span>{</div>
<div class="line"><a id="l05832" name="l05832"></a><span class="lineno"> 5832</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;elem : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( part_pt, 1 ) ) {</div>
<div class="line"><a id="l05833" name="l05833"></a><span class="lineno"> 5833</span>        <span class="keyword">const</span> <a class="code hl_class" href="classoptional__vpart__position.html">optional_vpart_position</a> vp = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.veh_at( elem );</div>
<div class="line"><a id="l05834" name="l05834"></a><span class="lineno"> 5834</span>        <span class="keywordflow">if</span>( !vp ) {</div>
<div class="line"><a id="l05835" name="l05835"></a><span class="lineno"> 5835</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05836" name="l05836"></a><span class="lineno"> 5836</span>        }</div>
<div class="line"><a id="l05837" name="l05837"></a><span class="lineno"> 5837</span>        <span class="keywordflow">if</span>( vp &amp;&amp; &amp;vp-&gt;vehicle() != <span class="keyword">this</span> ) {</div>
<div class="line"><a id="l05838" name="l05838"></a><span class="lineno"> 5838</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05839" name="l05839"></a><span class="lineno"> 5839</span>        }</div>
<div class="line"><a id="l05840" name="l05840"></a><span class="lineno"> 5840</span>    }</div>
<div class="line"><a id="l05841" name="l05841"></a><span class="lineno"> 5841</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05842" name="l05842"></a><span class="lineno"> 5842</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l00267">g</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse_8cpp_source.html#l08782">iuse::tow_attach()</a>.</p>

</div>
</div>
<a id="a6ac15340cefeea4793448cdb34784011" name="a6ac15340cefeea4793448cdb34784011"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ac15340cefeea4793448cdb34784011">&#9670;&nbsp;</a></span>is_flying_in_air()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_flying_in_air </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04027">4027</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04028" name="l04028"></a><span class="lineno"> 4028</span>{</div>
<div class="line"><a id="l04029" name="l04029"></a><span class="lineno"> 4029</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#a0a35b7f917fdb08e70a78315cc968f86">is_flying</a>;</div>
<div class="line"><a id="l04030" name="l04030"></a><span class="lineno"> 4030</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01917">is_flying</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01031">check_heli_ascend()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>, <a class="el" href="vehicle_8cpp_source.html#l00816">drive_to_local_target()</a>, <a class="el" href="overmap__ui_8cpp_source.html#l01830">overmap_ui::get_overmap_path_to()</a>, <a class="el" href="vehicle_8cpp_source.html#l05033">idle()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>.</p>

</div>
</div>
<a id="ad9e5f31113c5dda6b76442cbd7b8429f" name="ad9e5f31113c5dda6b76442cbd7b8429f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9e5f31113c5dda6b76442cbd7b8429f">&#9670;&nbsp;</a></span>is_foldable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_foldable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06537">6537</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06538" name="l06538"></a><span class="lineno"> 6538</span>{</div>
<div class="line"><a id="l06539" name="l06539"></a><span class="lineno"> 6539</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a397b40aa92dd1fd09ee592aa279bc656">get_all_parts</a>() ) {</div>
<div class="line"><a id="l06540" name="l06540"></a><span class="lineno"> 6540</span>        <span class="keywordflow">if</span>( !vp.has_feature( <span class="stringliteral">&quot;FOLDABLE&quot;</span> ) ) {</div>
<div class="line"><a id="l06541" name="l06541"></a><span class="lineno"> 6541</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l06542" name="l06542"></a><span class="lineno"> 6542</span>        }</div>
<div class="line"><a id="l06543" name="l06543"></a><span class="lineno"> 6543</span>    }</div>
<div class="line"><a id="l06544" name="l06544"></a><span class="lineno"> 6544</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l06545" name="l06545"></a><span class="lineno"> 6545</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l06882">get_all_parts()</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l00915">veh_interact::do_install()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00801">fold_up()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="a80d02aa674786172d2d8a7ec8f39a4b3" name="a80d02aa674786172d2d8a7ec8f39a4b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80d02aa674786172d2d8a7ec8f39a4b3">&#9670;&nbsp;</a></span>is_in_water()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_in_water </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>deep_water</em> = <code>false</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>is the vehicle mostly in water or mostly on fairly dry land? </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04042">4042</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04043" name="l04043"></a><span class="lineno"> 4043</span>{</div>
<div class="line"><a id="l04044" name="l04044"></a><span class="lineno"> 4044</span>    <span class="keywordflow">return</span> deep_water ? <a class="code hl_variable" href="classvehicle.html#ae3cbbbb890aa9a12504ec3458746f3e1">is_floating</a> : <a class="code hl_variable" href="classvehicle.html#a3cfee06c49af306085cad6bbf3326319">in_water</a>;</div>
<div class="line"><a id="l04045" name="l04045"></a><span class="lineno"> 4045</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01915">in_water</a>, and <a class="el" href="vehicle_8h_source.html#l01913">is_floating</a>.</p>

<p class="reference">Referenced by <a class="el" href="avatar__action_8cpp_source.html#l00090">avatar_action::move()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l01501">map::vehicle_wheel_traction()</a>.</p>

</div>
</div>
<a id="aec9a1faa6740b681867d48878e37d7bb" name="aec9a1faa6740b681867d48878e37d7bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec9a1faa6740b681867d48878e37d7bb">&#9670;&nbsp;</a></span>is_moving()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_moving </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03364">3364</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03365" name="l03365"></a><span class="lineno"> 3365</span>{</div>
<div class="line"><a id="l03366" name="l03366"></a><span class="lineno"> 3366</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> != 0;</div>
<div class="line"><a id="l03367" name="l03367"></a><span class="lineno"> 3367</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05361">gain_moves()</a>, <a class="el" href="player_8cpp_source.html#l00756">player::pause()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>, and <a class="el" href="npc_8cpp_source.html#l01370">npc::vehicle_danger()</a>.</p>

</div>
</div>
<a id="abf454e2521b991a5b45f920be43fc5c1" name="abf454e2521b991a5b45f920be43fc5c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf454e2521b991a5b45f920be43fc5c1">&#9670;&nbsp;</a></span>is_old_owner()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_old_owner </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>available_to_take</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04167">4167</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04168" name="l04168"></a><span class="lineno"> 4168</span>{</div>
<div class="line"><a id="l04169" name="l04169"></a><span class="lineno"> 4169</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a0e6255388e73823374ec4bc9097f87c3">old_owner</a>.<a class="code hl_function" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) {</div>
<div class="line"><a id="l04170" name="l04170"></a><span class="lineno"> 4170</span>        <span class="keywordflow">return</span> available_to_take;</div>
<div class="line"><a id="l04171" name="l04171"></a><span class="lineno"> 4171</span>    }</div>
<div class="line"><a id="l04172" name="l04172"></a><span class="lineno"> 4172</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.get_faction() ) {</div>
<div class="line"><a id="l04173" name="l04173"></a><span class="lineno"> 4173</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;vehicle::is_old_owner() player %s has no faction&quot;</span>, <a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.disp_name() );</div>
<div class="line"><a id="l04174" name="l04174"></a><span class="lineno"> 4174</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04175" name="l04175"></a><span class="lineno"> 4175</span>    }</div>
<div class="line"><a id="l04176" name="l04176"></a><span class="lineno"> 4176</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.get_faction()-&gt;id == <a class="code hl_function" href="classvehicle.html#a75b7a6e603fe0fe7c2d8f950c397d87e">get_old_owner</a>();</div>
<div class="line"><a id="l04177" name="l04177"></a><span class="lineno"> 4177</span>}</div>
<div class="ttc" id="aclassvehicle_html_a75b7a6e603fe0fe7c2d8f950c397d87e"><div class="ttname"><a href="classvehicle.html#a75b7a6e603fe0fe7c2d8f950c397d87e">vehicle::get_old_owner</a></div><div class="ttdeci">faction_id get_old_owner() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00833">vehicle.h:833</a></div></div>
<div class="ttc" id="amagic_8cpp_html_a6753ecfe87da659675b18c2f81d6ec12"><div class="ttname"><a href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a></div><div class="ttdeci">constexpr double c</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01031">magic.cpp:1031</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01031">c</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="vehicle_8h_source.html#l00833">get_old_owner()</a>, <a class="el" href="string__id_8h_source.html#l00317">string_id&lt; T &gt;::is_null()</a>, and <a class="el" href="vehicle_8h_source.html#l01721">old_owner</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04197">handle_potential_theft()</a>.</p>

</div>
</div>
<a id="a6a00ad9624b9f73a4e62cca6df292f9f" name="a6a00ad9624b9f73a4e62cca6df292f9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a00ad9624b9f73a4e62cca6df292f9f">&#9670;&nbsp;</a></span>is_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_open </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>part_index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01488">1488</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01489" name="l01489"></a><span class="lineno"> 1489</span>{</div>
<div class="line"><a id="l01490" name="l01490"></a><span class="lineno"> 1490</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[part_index].open;</div>
<div class="line"><a id="l01491" name="l01491"></a><span class="lineno"> 1491</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

</div>
</div>
<a id="a0f2357d1540b058495b554c1b5593611" name="a0f2357d1540b058495b554c1b5593611"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f2357d1540b058495b554c1b5593611">&#9670;&nbsp;</a></span>is_owned_by()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_owned_by </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>available_to_take</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04155">4155</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04156" name="l04156"></a><span class="lineno"> 4156</span>{</div>
<div class="line"><a id="l04157" name="l04157"></a><span class="lineno"> 4157</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afb548b72a0c24d9f9c436f198040e052">owner</a>.<a class="code hl_function" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) {</div>
<div class="line"><a id="l04158" name="l04158"></a><span class="lineno"> 4158</span>        <span class="keywordflow">return</span> available_to_take;</div>
<div class="line"><a id="l04159" name="l04159"></a><span class="lineno"> 4159</span>    }</div>
<div class="line"><a id="l04160" name="l04160"></a><span class="lineno"> 4160</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.get_faction() ) {</div>
<div class="line"><a id="l04161" name="l04161"></a><span class="lineno"> 4161</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;vehicle::is_owned_by() player %s has no faction&quot;</span>, <a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.disp_name() );</div>
<div class="line"><a id="l04162" name="l04162"></a><span class="lineno"> 4162</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04163" name="l04163"></a><span class="lineno"> 4163</span>    }</div>
<div class="line"><a id="l04164" name="l04164"></a><span class="lineno"> 4164</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.get_faction()-&gt;id == <a class="code hl_function" href="classvehicle.html#a070fe172db0a71f8ab874a18a1d88d10">get_owner</a>();</div>
<div class="line"><a id="l04165" name="l04165"></a><span class="lineno"> 4165</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01031">c</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="vehicle_8h_source.html#l00830">get_owner()</a>, <a class="el" href="string__id_8h_source.html#l00317">string_id&lt; T &gt;::is_null()</a>, and <a class="el" href="vehicle_8h_source.html#l01719">owner</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l00350">assign_veh_to_follow()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02586">veh_interact::display_name()</a>, <a class="el" href="vehicle_8cpp_source.html#l04197">handle_potential_theft()</a>, <a class="el" href="npctalk_8cpp_source.html#l00360">tell_magic_veh_to_follow()</a>, and <a class="el" href="npctalk_8cpp_source.html#l00339">tell_veh_stop_following()</a>.</p>

</div>
</div>
<a id="a625ad56bb7c71b7305ccbdb411d650db" name="a625ad56bb7c71b7305ccbdb411d650db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a625ad56bb7c71b7305ccbdb411d650db">&#9670;&nbsp;</a></span>is_part_on()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_part_on </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01092">1092</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>{</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].enabled;</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00369">control_engines()</a>, <a class="el" href="vehicle_8cpp_source.html#l03179">fuel_left()</a>, <a class="el" href="vehicle_8cpp_source.html#l01087">is_engine_on()</a>, <a class="el" href="vehicle_8cpp_source.html#l04585">max_reactor_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04619">power_parts()</a>, <a class="el" href="map_8cpp_source.html#l04474">process_vehicle_items()</a>, and <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>.</p>

</div>
</div>
<a id="a850e134844078b5efa1084fc1ebbeec0" name="a850e134844078b5efa1084fc1ebbeec0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a850e134844078b5efa1084fc1ebbeec0">&#9670;&nbsp;</a></span>is_perpetual_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_perpetual_type </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01081">1081</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>{</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>    <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a>  &amp;ft = <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e] ).<a class="code hl_variable" href="classvpart__info.html#ae9c50d26b3cc88604ae85573ee6599cd">fuel_type</a>;</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="classitem.html">item</a>( ft ).<a class="code hl_function" href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">has_flag</a>( <span class="stringliteral">&quot;PERPETUAL&quot;</span> );</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, <a class="el" href="veh__type_8h_source.html#l00203">vpart_info::fuel_type</a>, <a class="el" href="item_8cpp_source.html#l05192">item::has_flag()</a>, and <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03297">basic_consumption()</a>, <a class="el" href="vehicle_8cpp_source.html#l05018">do_engine_damage()</a>, <a class="el" href="vehicle_8cpp_source.html#l04340">fuel_usage()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00343">print_fuel_indicators()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00433">select_engine()</a>.</p>

</div>
</div>
<a id="a292961ab33a42bf495d19b8692f6f105" name="a292961ab33a42bf495d19b8692f6f105"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a292961ab33a42bf495d19b8692f6f105">&#9670;&nbsp;</a></span>is_rotorcraft()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_rotorcraft </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>is the vehicle flying? is it a rotorcraft? </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04017">4017</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04018" name="l04018"></a><span class="lineno"> 4018</span>{</div>
<div class="line"><a id="l04019" name="l04019"></a><span class="lineno"> 4019</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;ROTOR&quot;</span> ) &amp;&amp; <a class="code hl_function" href="classvehicle.html#ae080ba753c5c752d846ec95df31d4bdd">has_sufficient_rotorlift</a>() &amp;&amp; <a class="code hl_function" href="classvehicle.html#a341515426011486c265d016c35f84de6">player_in_control</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u );</div>
<div class="line"><a id="l04020" name="l04020"></a><span class="lineno"> 4020</span>}</div>
<div class="ttc" id="aclassvehicle_html_ae080ba753c5c752d846ec95df31d4bdd"><div class="ttname"><a href="classvehicle.html#ae080ba753c5c752d846ec95df31d4bdd">vehicle::has_sufficient_rotorlift</a></div><div class="ttdeci">bool has_sufficient_rotorlift() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04011">vehicle.cpp:4011</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l02558">has_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l04011">has_sufficient_rotorlift()</a>, and <a class="el" href="vehicle_8cpp_source.html#l00277">player_in_control()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03462">acceleration()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01461">check_falling_or_floating()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01031">check_heli_ascend()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00996">check_heli_descend()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00354">collision()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>, <a class="el" href="vehicle_8cpp_source.html#l00816">drive_to_local_target()</a>, <a class="el" href="overmap__ui_8cpp_source.html#l01830">overmap_ui::get_overmap_path_to()</a>, <a class="el" href="vehicle_8cpp_source.html#l05033">idle()</a>, <a class="el" href="vehicle_8cpp_source.html#l04097">k_traction()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01413">level_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l03543">max_velocity()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l03644">noise_and_smoke()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01061">pldrive()</a>, <a class="el" href="vehicle_8cpp_source.html#l03593">safe_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l04284">steering_effectiveness()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>.</p>

</div>
</div>
<a id="a0cf6ac345daa4073fb6e0629e2066d17" name="a0cf6ac345daa4073fb6e0629e2066d17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cf6ac345daa4073fb6e0629e2066d17">&#9670;&nbsp;</a></span>is_structural_part_removed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_structural_part_removed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns whether or not the vehicle has a structural part queued for removal,. </p>
<dl class="section return"><dt>Returns</dt><dd>true if a structural is queue for removal, false if not. </dd></dl>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01254">1254</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span>{</div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a397b40aa92dd1fd09ee592aa279bc656">get_all_parts</a>() ) {</div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span>        <span class="keywordflow">if</span>( vp.part().removed &amp;&amp; vp.info().location == <a class="code hl_function" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure</a> ) {</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>        }</div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>    }</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l06882">get_all_parts()</a>, and <a class="el" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l01271">can_mount()</a>.</p>

</div>
</div>
<a id="ac24aba962fd53d1a87bf57b52ce40508" name="ac24aba962fd53d1a87bf57b52ce40508"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac24aba962fd53d1a87bf57b52ce40508">&#9670;&nbsp;</a></span>is_towed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_towed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05859">5859</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05860" name="l05860"></a><span class="lineno"> 5860</span>{</div>
<div class="line"><a id="l05861" name="l05861"></a><span class="lineno"> 5861</span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05862" name="l05862"></a><span class="lineno"> 5862</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a5f5e060b9d76c409ae99c49fbdeda88f">get_towed_by</a>() ) {</div>
<div class="line"><a id="l05863" name="l05863"></a><span class="lineno"> 5863</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l05864" name="l05864"></a><span class="lineno"> 5864</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05865" name="l05865"></a><span class="lineno"> 5865</span>        <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a5f5e060b9d76c409ae99c49fbdeda88f">get_towed_by</a>()-&gt;<a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a4cc6247530a16020db73b3af28e0024e">get_towed</a>() ) {</div>
<div class="line"><a id="l05866" name="l05866"></a><span class="lineno"> 5866</span>            <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;vehicle %s is marked as towed, but the tower vehicle has no towed defined&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l05867" name="l05867"></a><span class="lineno"> 5867</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l05868" name="l05868"></a><span class="lineno"> 5868</span>        }</div>
<div class="line"><a id="l05869" name="l05869"></a><span class="lineno"> 5869</span>        <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05870" name="l05870"></a><span class="lineno"> 5870</span>    }</div>
<div class="line"><a id="l05871" name="l05871"></a><span class="lineno"> 5871</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l05872" name="l05872"></a><span class="lineno"> 5872</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="vehicle_8h_source.html#l00158">towing_data::get_towed()</a>, <a class="el" href="vehicle_8h_source.html#l00154">towing_data::get_towed_by()</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>, and <a class="el" href="vehicle_8h_source.html#l01887">tow_data</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02986">veh_interact::complete_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l05939">invalidate_towing()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00933">selfdrive()</a>, <a class="el" href="vehicle_8cpp_source.html#l06067">shed_loose_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>, <a class="el" href="vehicle_8cpp_source.html#l04121">static_drag()</a>, and <a class="el" href="iuse_8cpp_source.html#l08782">iuse::tow_attach()</a>.</p>

</div>
</div>
<a id="a40b149ccb2383cb1a263f3e3d88f3469" name="a40b149ccb2383cb1a263f3e3d88f3469"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40b149ccb2383cb1a263f3e3d88f3469">&#9670;&nbsp;</a></span>is_towing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_towing </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05844">5844</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05845" name="l05845"></a><span class="lineno"> 5845</span>{</div>
<div class="line"><a id="l05846" name="l05846"></a><span class="lineno"> 5846</span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05847" name="l05847"></a><span class="lineno"> 5847</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a4cc6247530a16020db73b3af28e0024e">get_towed</a>() ) {</div>
<div class="line"><a id="l05848" name="l05848"></a><span class="lineno"> 5848</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l05849" name="l05849"></a><span class="lineno"> 5849</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05850" name="l05850"></a><span class="lineno"> 5850</span>        <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a4cc6247530a16020db73b3af28e0024e">get_towed</a>()-&gt;<a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a5f5e060b9d76c409ae99c49fbdeda88f">get_towed_by</a>() ) {</div>
<div class="line"><a id="l05851" name="l05851"></a><span class="lineno"> 5851</span>            <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;vehicle %s is towing, but the towed vehicle has no tower defined&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l05852" name="l05852"></a><span class="lineno"> 5852</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l05853" name="l05853"></a><span class="lineno"> 5853</span>        }</div>
<div class="line"><a id="l05854" name="l05854"></a><span class="lineno"> 5854</span>        <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05855" name="l05855"></a><span class="lineno"> 5855</span>    }</div>
<div class="line"><a id="l05856" name="l05856"></a><span class="lineno"> 5856</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l05857" name="l05857"></a><span class="lineno"> 5857</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="vehicle_8h_source.html#l00158">towing_data::get_towed()</a>, <a class="el" href="vehicle_8h_source.html#l00154">towing_data::get_towed_by()</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>, and <a class="el" href="vehicle_8h_source.html#l01887">tow_data</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02986">veh_interact::complete_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l03375">ground_acceleration()</a>, <a class="el" href="vehicle_8cpp_source.html#l05939">invalidate_towing()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l06067">shed_loose_parts()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00087">slowdown()</a>, <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>, <a class="el" href="iuse_8cpp_source.html#l08782">iuse::tow_attach()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03406">water_acceleration()</a>.</p>

</div>
</div>
<a id="a0ede4cc2a97a8305b1f06817d0d6cdf8" name="a0ede4cc2a97a8305b1f06817d0d6cdf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ede4cc2a97a8305b1f06817d0d6cdf8">&#9670;&nbsp;</a></span>is_watercraft()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_watercraft </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04037">4037</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04038" name="l04038"></a><span class="lineno"> 4038</span>{</div>
<div class="line"><a id="l04039" name="l04039"></a><span class="lineno"> 4039</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#ae3cbbbb890aa9a12504ec3458746f3e1">is_floating</a> || ( <a class="code hl_variable" href="classvehicle.html#a3cfee06c49af306085cad6bbf3326319">in_water</a> &amp;&amp; <a class="code hl_variable" href="classvehicle.html#a5c432c0da0ff47a483e3aa74548bd435">wheelcache</a>.empty() );</div>
<div class="line"><a id="l04040" name="l04040"></a><span class="lineno"> 4040</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01915">in_water</a>, <a class="el" href="vehicle_8h_source.html#l01913">is_floating</a>, and <a class="el" href="vehicle_8h_source.html#l01761">wheelcache</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03462">acceleration()</a>, <a class="el" href="vehicle_8cpp_source.html#l04097">k_traction()</a>, <a class="el" href="vehicle_8cpp_source.html#l03543">max_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l03593">safe_velocity()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00087">slowdown()</a>, <a class="el" href="vehicle_8cpp_source.html#l04284">steering_effectiveness()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l01501">map::vehicle_wheel_traction()</a>.</p>

</div>
</div>
<a id="a9d41a3f9a7969c40ca5a9b7b5a3fdebe" name="a9d41a3f9a7969c40ca5a9b7b5a3fdebe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d41a3f9a7969c40ca5a9b7b5a3fdebe">&#9670;&nbsp;</a></span>k_traction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float vehicle::k_traction </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>wheel_traction_area</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Traction coefficient of the vehicle. </p>
<p >1.0 on road. Outside roads, depends on mass divided by wheel area and the surface beneath wheels.</p>
<p >Affects safe velocity, acceleration and handling difficulty. </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04097">4097</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04098" name="l04098"></a><span class="lineno"> 4098</span>{</div>
<div class="line"><a id="l04099" name="l04099"></a><span class="lineno"> 4099</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#ae3cbbbb890aa9a12504ec3458746f3e1">is_floating</a> ) {</div>
<div class="line"><a id="l04100" name="l04100"></a><span class="lineno"> 4100</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#ac460f925a21efb9dea1dc0fc2f930609">can_float</a>() ? 1.0f : -1.0f;</div>
<div class="line"><a id="l04101" name="l04101"></a><span class="lineno"> 4101</span>    }</div>
<div class="line"><a id="l04102" name="l04102"></a><span class="lineno"> 4102</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a0a35b7f917fdb08e70a78315cc968f86">is_flying</a> ) {</div>
<div class="line"><a id="l04103" name="l04103"></a><span class="lineno"> 4103</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a292961ab33a42bf495d19b8692f6f105">is_rotorcraft</a>() ? 1.0f : -1.0f;</div>
<div class="line"><a id="l04104" name="l04104"></a><span class="lineno"> 4104</span>    }</div>
<div class="line"><a id="l04105" name="l04105"></a><span class="lineno"> 4105</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a0ede4cc2a97a8305b1f06817d0d6cdf8">is_watercraft</a>() &amp;&amp; <a class="code hl_function" href="classvehicle.html#ac460f925a21efb9dea1dc0fc2f930609">can_float</a>() ) {</div>
<div class="line"><a id="l04106" name="l04106"></a><span class="lineno"> 4106</span>        <span class="keywordflow">return</span> 1.0f;</div>
<div class="line"><a id="l04107" name="l04107"></a><span class="lineno"> 4107</span>    }</div>
<div class="line"><a id="l04108" name="l04108"></a><span class="lineno"> 4108</span> </div>
<div class="line"><a id="l04109" name="l04109"></a><span class="lineno"> 4109</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> fraction_without_traction = 1.0f - wheel_traction_area / <a class="code hl_function" href="classvehicle.html#ab738fb6279eb3c198c96dfc2ff1207ff">wheel_area</a>();</div>
<div class="line"><a id="l04110" name="l04110"></a><span class="lineno"> 4110</span>    <span class="keywordflow">if</span>( fraction_without_traction == 0 ) {</div>
<div class="line"><a id="l04111" name="l04111"></a><span class="lineno"> 4111</span>        <span class="keywordflow">return</span> 1.0f;</div>
<div class="line"><a id="l04112" name="l04112"></a><span class="lineno"> 4112</span>    }</div>
<div class="line"><a id="l04113" name="l04113"></a><span class="lineno"> 4113</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> mass_penalty = fraction_without_traction * <a class="code hl_function" href="namespaceunits.html#afbf21a7601bd939c196667fc0b020111">to_kilogram</a>( <a class="code hl_function" href="classvehicle.html#a5a7d83716bf73d4b58d265b626872d01">total_mass</a>() );</div>
<div class="line"><a id="l04114" name="l04114"></a><span class="lineno"> 4114</span>    <span class="keywordtype">float</span> traction = std::min( 1.0f, wheel_traction_area / mass_penalty );</div>
<div class="line"><a id="l04115" name="l04115"></a><span class="lineno"> 4115</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;%s has traction %.2f&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, traction );</div>
<div class="line"><a id="l04116" name="l04116"></a><span class="lineno"> 4116</span> </div>
<div class="line"><a id="l04117" name="l04117"></a><span class="lineno"> 4117</span>    <span class="comment">// For now make it easy until it gets properly balanced: add a low cap of 0.1</span></div>
<div class="line"><a id="l04118" name="l04118"></a><span class="lineno"> 4118</span>    <span class="keywordflow">return</span> std::max( 0.1f, traction );</div>
<div class="line"><a id="l04119" name="l04119"></a><span class="lineno"> 4119</span>}</div>
<div class="ttc" id="aclassvehicle_html_ab738fb6279eb3c198c96dfc2ff1207ff"><div class="ttname"><a href="classvehicle.html#ab738fb6279eb3c198c96dfc2ff1207ff">vehicle::wheel_area</a></div><div class="ttdeci">int wheel_area() const</div><div class="ttdoc">Calculates the sum of the area under the wheels of the vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03737">vehicle.cpp:3737</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="vehicle_8cpp_source.html#l03974">can_float()</a>, <a class="el" href="vehicle_8h_source.html#l01913">is_floating</a>, <a class="el" href="vehicle_8h_source.html#l01917">is_flying</a>, <a class="el" href="vehicle_8cpp_source.html#l04017">is_rotorcraft()</a>, <a class="el" href="vehicle_8cpp_source.html#l04037">is_watercraft()</a>, <a class="el" href="enums_8h_source.html#l00264">m_debug</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="units__mass_8h_source.html#l00073">units::to_kilogram()</a>, <a class="el" href="vehicle_8cpp_source.html#l03126">total_mass()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03737">wheel_area()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>, <a class="el" href="overmap__ui_8cpp_source.html#l01830">overmap_ui::get_overmap_path_to()</a>, <a class="el" href="vehicle_8cpp_source.html#l04325">handling_difficulty()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>.</p>

</div>
</div>
<a id="ab9b05f9729dee1e8844c726eeb1a515d" name="ab9b05f9729dee1e8844c726eeb1a515d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9b05f9729dee1e8844c726eeb1a515d">&#9670;&nbsp;</a></span>leak_fuel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::leak_fuel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;&#160;</td>
          <td class="paramname"><em>pt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>empty the contents of a tank, battery or turret spilling liquids randomly on the ground </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06500">6500</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06501" name="l06501"></a><span class="lineno"> 6501</span>{</div>
<div class="line"><a id="l06502" name="l06502"></a><span class="lineno"> 6502</span>    <span class="comment">// only liquid fuels from non-empty tanks can leak out onto map tiles</span></div>
<div class="line"><a id="l06503" name="l06503"></a><span class="lineno"> 6503</span>    <span class="keywordflow">if</span>( !pt.<a class="code hl_function" href="structvehicle__part.html#a1acf6a662e684e35e9ef4c26f02b4a42">is_tank</a>() || pt.<a class="code hl_function" href="structvehicle__part.html#a9c6bf106558c9ed00536e2d7cb0e862d">ammo_remaining</a>() &lt;= 0 ) {</div>
<div class="line"><a id="l06504" name="l06504"></a><span class="lineno"> 6504</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l06505" name="l06505"></a><span class="lineno"> 6505</span>    }</div>
<div class="line"><a id="l06506" name="l06506"></a><span class="lineno"> 6506</span> </div>
<div class="line"><a id="l06507" name="l06507"></a><span class="lineno"> 6507</span>    <span class="comment">// leak in random directions but prefer closest tiles and avoid walls or other obstacles</span></div>
<div class="line"><a id="l06508" name="l06508"></a><span class="lineno"> 6508</span>    std::vector&lt;tripoint&gt; tiles = <a class="code hl_function" href="coordinates_8h.html#a13a12943d34d5f17e6c3b4e730659fc6">closest_points_first</a>( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( pt ), 1 );</div>
<div class="line"><a id="l06509" name="l06509"></a><span class="lineno"> 6509</span>    tiles.erase( std::remove_if( tiles.begin(), tiles.end(), []( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp; e ) {</div>
<div class="line"><a id="l06510" name="l06510"></a><span class="lineno"> 6510</span>        return !g-&gt;m.passable( e );</div>
<div class="line"><a id="l06511" name="l06511"></a><span class="lineno"> 6511</span>    } ), tiles.end() );</div>
<div class="line"><a id="l06512" name="l06512"></a><span class="lineno"> 6512</span> </div>
<div class="line"><a id="l06513" name="l06513"></a><span class="lineno"> 6513</span>    <span class="comment">// leak up to 1/3 of remaining fuel per iteration and continue until the part is empty</span></div>
<div class="line"><a id="l06514" name="l06514"></a><span class="lineno"> 6514</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structitype.html">itype</a> *fuel = &amp;*pt.<a class="code hl_function" href="structvehicle__part.html#ad8e149b4d200656c134e3f90f82f3fe4">ammo_current</a>();</div>
<div class="line"><a id="l06515" name="l06515"></a><span class="lineno"> 6515</span>    <span class="keywordflow">while</span>( !tiles.empty() &amp;&amp; pt.<a class="code hl_function" href="structvehicle__part.html#a9c6bf106558c9ed00536e2d7cb0e862d">ammo_remaining</a>() ) {</div>
<div class="line"><a id="l06516" name="l06516"></a><span class="lineno"> 6516</span>        <span class="keywordtype">int</span> qty = pt.<a class="code hl_function" href="structvehicle__part.html#aba8156669b1112e8ff258878066505b9">ammo_consume</a>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, std::max( pt.<a class="code hl_function" href="structvehicle__part.html#a9c6bf106558c9ed00536e2d7cb0e862d">ammo_remaining</a>() / 3, 1 ) ),</div>
<div class="line"><a id="l06517" name="l06517"></a><span class="lineno"> 6517</span>                                   <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( pt ) );</div>
<div class="line"><a id="l06518" name="l06518"></a><span class="lineno"> 6518</span>        <span class="keywordflow">if</span>( qty &gt; 0 ) {</div>
<div class="line"><a id="l06519" name="l06519"></a><span class="lineno"> 6519</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_item_or_charges( <a class="code hl_function" href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a>( tiles ), <a class="code hl_class" href="classitem.html">item</a>( fuel, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, qty ) );</div>
<div class="line"><a id="l06520" name="l06520"></a><span class="lineno"> 6520</span>        }</div>
<div class="line"><a id="l06521" name="l06521"></a><span class="lineno"> 6521</span>    }</div>
<div class="line"><a id="l06522" name="l06522"></a><span class="lineno"> 6522</span> </div>
<div class="line"><a id="l06523" name="l06523"></a><span class="lineno"> 6523</span>    pt.<a class="code hl_function" href="structvehicle__part.html#a6f491190dc49841d818e4987e66ddbb4">ammo_unset</a>();</div>
<div class="line"><a id="l06524" name="l06524"></a><span class="lineno"> 6524</span>}</div>
<div class="ttc" id="acoordinates_8h_html_a13a12943d34d5f17e6c3b4e730659fc6"><div class="ttname"><a href="coordinates_8h.html#a13a12943d34d5f17e6c3b4e730659fc6">closest_points_first</a></div><div class="ttdeci">std::vector&lt; coords::coord_point&lt; Point, Origin, Scale &gt; &gt; closest_points_first(const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc, int min_dist, int max_dist)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00596">coordinates.h:596</a></div></div>
<div class="ttc" id="astructitype_html"><div class="ttname"><a href="structitype.html">itype</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00836">itype.h:836</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle__part_8cpp_source.html#l00288">vehicle_part::ammo_consume()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00211">vehicle_part::ammo_current()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00241">vehicle_part::ammo_remaining()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00279">vehicle_part::ammo_unset()</a>, <a class="el" href="coordinates_8h_source.html#l00596">closest_points_first()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00489">vehicle_part::is_tank()</a>, <a class="el" href="rng_8h_source.html#l00088">random_entry()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, and <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06437">damage_direct()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06409">explode_fuel()</a>.</p>

</div>
</div>
<a id="a300054370bb18b67094b827f8c586896" name="a300054370bb18b67094b827f8c586896"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a300054370bb18b67094b827f8c586896">&#9670;&nbsp;</a></span>level_vehicle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::level_vehicle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__move_8cpp_source.html#l01413">1413</a> of file <a class="el" href="vehicle__move_8cpp_source.html">vehicle_move.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01414" name="l01414"></a><span class="lineno"> 1414</span>{</div>
<div class="line"><a id="l01415" name="l01415"></a><span class="lineno"> 1415</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01416" name="l01416"></a><span class="lineno"> 1416</span>    <span class="keywordflow">if</span>( !here.<a class="code hl_function" href="classmap.html#abff2fded83a8e96e5e20084c3cb59579">has_zlevels</a>() || ( <a class="code hl_variable" href="classvehicle.html#a0a35b7f917fdb08e70a78315cc968f86">is_flying</a> &amp;&amp; <a class="code hl_function" href="classvehicle.html#a292961ab33a42bf495d19b8692f6f105">is_rotorcraft</a>() ) ) {</div>
<div class="line"><a id="l01417" name="l01417"></a><span class="lineno"> 1417</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01418" name="l01418"></a><span class="lineno"> 1418</span>    }</div>
<div class="line"><a id="l01419" name="l01419"></a><span class="lineno"> 1419</span>    <span class="comment">// make sure that all parts are either supported across levels or on the same level</span></div>
<div class="line"><a id="l01420" name="l01420"></a><span class="lineno"> 1420</span>    std::map&lt;int, bool&gt; no_support;</div>
<div class="line"><a id="l01421" name="l01421"></a><span class="lineno"> 1421</span>    <span class="keywordflow">for</span>( <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;prt : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l01422" name="l01422"></a><span class="lineno"> 1422</span>        <span class="keywordflow">if</span>( prt.info().location != <a class="code hl_function" href="vehicle__move_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure</a> ) {</div>
<div class="line"><a id="l01423" name="l01423"></a><span class="lineno"> 1423</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01424" name="l01424"></a><span class="lineno"> 1424</span>        }</div>
<div class="line"><a id="l01425" name="l01425"></a><span class="lineno"> 1425</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> part_pos = <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( prt );</div>
<div class="line"><a id="l01426" name="l01426"></a><span class="lineno"> 1426</span>        <span class="keywordflow">if</span>( no_support.find( part_pos.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> ) == no_support.end() ) {</div>
<div class="line"><a id="l01427" name="l01427"></a><span class="lineno"> 1427</span>            no_support[part_pos.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>] = part_pos.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> &gt; -<a class="code hl_variable" href="game__constants_8h.html#aad0eacfa516a8f7e005674027d7640fe">OVERMAP_DEPTH</a>;</div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span>        }</div>
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"> 1429</span>        <span class="keywordflow">if</span>( no_support[part_pos.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>] ) {</div>
<div class="line"><a id="l01430" name="l01430"></a><span class="lineno"> 1430</span>            no_support[part_pos.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>] = here.<a class="code hl_function" href="classmap.html#a516c0764134cc86b57297811520395f7">has_flag_ter_or_furn</a>( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a7ae3043cdc343c2784d644bcafe86269">TFLAG_NO_FLOOR</a>, part_pos ) &amp;&amp;</div>
<div class="line"><a id="l01431" name="l01431"></a><span class="lineno"> 1431</span>                                     !here.<a class="code hl_function" href="classmap.html#a3779768673ad08004a999b1ac440421c">supports_above</a>( part_pos + <a class="code hl_variable" href="point_8h.html#a53f9f23b765219169daffe4c54ad5b8f">tripoint_below</a> );</div>
<div class="line"><a id="l01432" name="l01432"></a><span class="lineno"> 1432</span>        }</div>
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"> 1433</span>    }</div>
<div class="line"><a id="l01434" name="l01434"></a><span class="lineno"> 1434</span>    std::set&lt;int&gt; dropped_parts;</div>
<div class="line"><a id="l01435" name="l01435"></a><span class="lineno"> 1435</span>    <span class="comment">// if it&#39;s unsupported but on the same level, just let it fall</span></div>
<div class="line"><a id="l01436" name="l01436"></a><span class="lineno"> 1436</span>    <span class="keywordtype">bool</span> center_drop = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"> 1437</span>    <span class="keywordtype">bool</span> adjust_level = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01438" name="l01438"></a><span class="lineno"> 1438</span>    <span class="keywordflow">if</span>( no_support.size() &gt; 1 ) {</div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> zlevel = -<a class="code hl_variable" href="game__constants_8h.html#aad0eacfa516a8f7e005674027d7640fe">OVERMAP_DEPTH</a>; zlevel &lt;= <a class="code hl_variable" href="game__constants_8h.html#aad0eacfa516a8f7e005674027d7640fe">OVERMAP_DEPTH</a>; zlevel++ ) {</div>
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"> 1440</span>            <span class="keywordflow">if</span>( no_support.find( zlevel ) == no_support.end() || !no_support[zlevel] ) {</div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"> 1441</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"> 1442</span>            }</div>
<div class="line"><a id="l01443" name="l01443"></a><span class="lineno"> 1443</span>            center_drop |= <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>().<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> == zlevel;</div>
<div class="line"><a id="l01444" name="l01444"></a><span class="lineno"> 1444</span>            adjust_level = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span>            <span class="comment">// drop unsupported parts 1 zlevel</span></div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span>            <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> prt = 0; prt &lt; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size(); prt++ ) {</div>
<div class="line"><a id="l01447" name="l01447"></a><span class="lineno"> 1447</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( prt ).z == zlevel ) {</div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"> 1448</span>                    dropped_parts.insert( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( prt ) );</div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span>                }</div>
<div class="line"><a id="l01450" name="l01450"></a><span class="lineno"> 1450</span>            }</div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"> 1451</span>        }</div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"> 1452</span>    }</div>
<div class="line"><a id="l01453" name="l01453"></a><span class="lineno"> 1453</span>    <span class="keywordflow">if</span>( adjust_level ) {</div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span>        here.<a class="code hl_function" href="classmap.html#abeefac00972febd607e98bb0431bd5a9">displace_vehicle</a>( *<span class="keyword">this</span>, <a class="code hl_variable" href="point_8h.html#a53f9f23b765219169daffe4c54ad5b8f">tripoint_below</a>, center_drop, dropped_parts );</div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"> 1455</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01456" name="l01456"></a><span class="lineno"> 1456</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01457" name="l01457"></a><span class="lineno"> 1457</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01458" name="l01458"></a><span class="lineno"> 1458</span>    }</div>
<div class="line"><a id="l01459" name="l01459"></a><span class="lineno"> 1459</span>}</div>
<div class="ttc" id="aclassmap_html_abeefac00972febd607e98bb0431bd5a9"><div class="ttname"><a href="classmap.html#abeefac00972febd607e98bb0431bd5a9">map::displace_vehicle</a></div><div class="ttdeci">bool displace_vehicle(vehicle &amp;veh, const tripoint &amp;dp, bool adjust_pos=true, const std::set&lt; int &gt; &amp;parts_to_move={})</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01098">map.cpp:1098</a></div></div>
<div class="ttc" id="apoint_8h_html_a53f9f23b765219169daffe4c54ad5b8f"><div class="ttname"><a href="point_8h.html#a53f9f23b765219169daffe4c54ad5b8f">tripoint_below</a></div><div class="ttdeci">static constexpr tripoint tripoint_below</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00295">point.h:295</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="map_8cpp_source.html#l01098">map::displace_vehicle()</a>, <a class="el" href="map_8cpp_source.html#l00141">get_map()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l03101">global_pos3()</a>, <a class="el" href="map_8cpp_source.html#l02333">map::has_flag_ter_or_furn()</a>, <a class="el" href="map_8h_source.html#l01657">map::has_zlevels()</a>, <a class="el" href="vehicle_8h_source.html#l01917">is_flying</a>, <a class="el" href="vehicle_8cpp_source.html#l04017">is_rotorcraft()</a>, <a class="el" href="game__constants_8h_source.html#l00061">OVERMAP_DEPTH</a>, <a class="el" href="vehicle__move_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="map_8cpp_source.html#l02031">map::supports_above()</a>, <a class="el" href="mapdata_8h_source.html#l00310">TFLAG_NO_FLOOR</a>, <a class="el" href="point_8h_source.html#l00295">tripoint_below</a>, and <a class="el" href="point_8h_source.html#l00152">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l01282">map::level_vehicle()</a>.</p>

</div>
</div>
<a id="aa436025a9aedf758df007b1c132b3f7d" name="aa436025a9aedf758df007b1c132b3f7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa436025a9aedf758df007b1c132b3f7d">&#9670;&nbsp;</a></span>lift_strength()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::lift_strength </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Required strength to be able to successfully lift the vehicle unaided by equipment. </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01012">1012</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>{</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::mass</a> <a class="code hl_typedef" href="namespaceunits.html#af4f3159f510e2b4372187d8fb4746e23">mass</a> = <a class="code hl_function" href="classvehicle.html#a5a7d83716bf73d4b58d265b626872d01">total_mass</a>();</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>    <span class="keywordflow">return</span> std::max&lt;std::int64_t&gt;( <a class="code hl_typedef" href="namespaceunits.html#af4f3159f510e2b4372187d8fb4746e23">mass</a> / 10000_gram, 1 );</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>}</div>
<div class="ttc" id="anamespaceunits_html_af4f3159f510e2b4372187d8fb4746e23"><div class="ttname"><a href="namespaceunits.html#af4f3159f510e2b4372187d8fb4746e23">units::mass</a></div><div class="ttdeci">quantity&lt; std::int64_t, mass_in_milligram_tag &gt; mass</div><div class="ttdef"><b>Definition:</b> <a href="units__mass_8h_source.html#l00022">units_mass.h:22</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l03126">total_mass()</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l01753">veh_interact::can_remove_part()</a>, and <a class="el" href="veh__interact_8cpp_source.html#l00703">veh_interact::update_part_requirements()</a>.</p>

</div>
</div>
<a id="af531084b2df70f7d6458cb7c3093bbcf" name="af531084b2df70f7d6458cb7c3093bbcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af531084b2df70f7d6458cb7c3093bbcf">&#9670;&nbsp;</a></span>lift_thrust_of_rotorcraft()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double vehicle::lift_thrust_of_rotorcraft </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fuelled</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>safe</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03995">3995</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03996" name="l03996"></a><span class="lineno"> 3996</span>{</div>
<div class="line"><a id="l03997" name="l03997"></a><span class="lineno"> 3997</span>    <span class="keyword">constexpr</span> <span class="keywordtype">double</span> coeffiicient {0.8642};</div>
<div class="line"><a id="l03998" name="l03998"></a><span class="lineno"> 3998</span>    <span class="keyword">constexpr</span> <span class="keywordtype">double</span> exponentiation {-0.3107};</div>
<div class="line"><a id="l03999" name="l03999"></a><span class="lineno"> 3999</span> </div>
<div class="line"><a id="l04000" name="l04000"></a><span class="lineno"> 4000</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> rotor_area {<a class="code hl_function" href="classvehicle.html#a05d21beabf48728a05a9c202dd3972ee">total_rotor_area</a>()};</div>
<div class="line"><a id="l04001" name="l04001"></a><span class="lineno"> 4001</span>    <span class="comment">// take off 15 % due to the imaginary tail rotor power?</span></div>
<div class="line"><a id="l04002" name="l04002"></a><span class="lineno"> 4002</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> engine_power {<a class="code hl_function" href="classvehicle.html#a73db9a09464720b32da8e3f214475a8e">total_power_w</a>( fuelled, <a class="code hl_function" href="namespaceiexamine.html#ac7d5f75dd77cb40f322824cb59244bd7">safe</a> )};</div>
<div class="line"><a id="l04003" name="l04003"></a><span class="lineno"> 4003</span> </div>
<div class="line"><a id="l04004" name="l04004"></a><span class="lineno"> 4004</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> power_load {engine_power / rotor_area};</div>
<div class="line"><a id="l04005" name="l04005"></a><span class="lineno"> 4005</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> lift_thrust = coeffiicient * engine_power * std::pow( power_load, exponentiation );</div>
<div class="line"><a id="l04006" name="l04006"></a><span class="lineno"> 4006</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;lift thrust(N) of %s: %f, rotor area (m^2): %f, engine power (w): %f&quot;</span>,</div>
<div class="line"><a id="l04007" name="l04007"></a><span class="lineno"> 4007</span>             <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, lift_thrust, rotor_area, engine_power );</div>
<div class="line"><a id="l04008" name="l04008"></a><span class="lineno"> 4008</span>    <span class="keywordflow">return</span> lift_thrust;</div>
<div class="line"><a id="l04009" name="l04009"></a><span class="lineno"> 4009</span>}</div>
<div class="ttc" id="aclassvehicle_html_a05d21beabf48728a05a9c202dd3972ee"><div class="ttname"><a href="classvehicle.html#a05d21beabf48728a05a9c202dd3972ee">vehicle::total_rotor_area</a></div><div class="ttdeci">double total_rotor_area() const</div><div class="ttdoc">total area of every rotors in m^2</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03984">vehicle.cpp:3984</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_ac7d5f75dd77cb40f322824cb59244bd7"><div class="ttname"><a href="namespaceiexamine.html#ac7d5f75dd77cb40f322824cb59244bd7">iexamine::safe</a></div><div class="ttdeci">void safe(player &amp;p, const tripoint &amp;examp)</div><div class="ttdoc">Attempt to crack safe through audio-feedback manual lock manipulation.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01398">iexamine.cpp:1398</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="enums_8h_source.html#l00264">m_debug</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="iexamine_8cpp_source.html#l01398">iexamine::safe()</a>, <a class="el" href="vehicle_8cpp_source.html#l03333">total_power_w()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03984">total_rotor_area()</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>, <a class="el" href="vehicle_8cpp_source.html#l04011">has_sufficient_rotorlift()</a>, <a class="el" href="vehicle_8cpp_source.html#l03534">max_rotor_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l03396">rotor_acceleration()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03577">safe_rotor_velocity()</a>.</p>

</div>
</div>
<a id="a35c5a1a0f58f678e8a34e338b1b5187d" name="a35c5a1a0f58f678e8a34e338b1b5187d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35c5a1a0f58f678e8a34e338b1b5187d">&#9670;&nbsp;</a></span>lights()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="structvehicle__part.html">vehicle_part</a> * &gt; vehicle::lights </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>active</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get all vehicle lights (excluding any that are destroyed) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">active</td><td>if true return only lights which are enabled </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04462">4462</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04463" name="l04463"></a><span class="lineno"> 4463</span>{</div>
<div class="line"><a id="l04464" name="l04464"></a><span class="lineno"> 4464</span>    std::vector&lt;vehicle_part *&gt; res;</div>
<div class="line"><a id="l04465" name="l04465"></a><span class="lineno"> 4465</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;e : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l04466" name="l04466"></a><span class="lineno"> 4466</span>        <span class="keywordflow">if</span>( ( !<a class="code hl_enumvalue" href="mutation__ui_8cpp.html#a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79">active</a> || e.enabled ) &amp;&amp; e.is_available() &amp;&amp; e.is_light() ) {</div>
<div class="line"><a id="l04467" name="l04467"></a><span class="lineno"> 4467</span>            res.push_back( &amp;e );</div>
<div class="line"><a id="l04468" name="l04468"></a><span class="lineno"> 4468</span>        }</div>
<div class="line"><a id="l04469" name="l04469"></a><span class="lineno"> 4469</span>    }</div>
<div class="line"><a id="l04470" name="l04470"></a><span class="lineno"> 4470</span>    <span class="keywordflow">return</span> res;</div>
<div class="line"><a id="l04471" name="l04471"></a><span class="lineno"> 4471</span>}</div>
<div class="ttc" id="amutation__ui_8cpp_html_a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79"><div class="ttname"><a href="mutation__ui_8cpp.html#a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79">mutation_tab_mode::active</a></div><div class="ttdeci">@ active</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mutation__ui_8cpp.html#a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79">active</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="lightmap_8cpp_source.html#l00369">map::generate_lightmap()</a>, and <a class="el" href="game_8cpp_source.html#l01314">veh_lumi()</a>.</p>

</div>
</div>
<a id="a8e52e13cf66fa7ebbe89c16687bae54b" name="a8e52e13cf66fa7ebbe89c16687bae54b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e52e13cf66fa7ebbe89c16687bae54b">&#9670;&nbsp;</a></span>local_center_of_mass()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structpoint.html">point</a> &amp; vehicle::local_center_of_mass </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03155">3155</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03156" name="l03156"></a><span class="lineno"> 3156</span>{</div>
<div class="line"><a id="l03157" name="l03157"></a><span class="lineno"> 3157</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afa84e5e990b66ac1cedeba291ddc6028">mass_center_no_precalc_dirty</a> ) {</div>
<div class="line"><a id="l03158" name="l03158"></a><span class="lineno"> 3158</span>        <a class="code hl_function" href="classvehicle.html#af3bb85693d41273a49e87ab79cb61462">calc_mass_center</a>( <span class="keyword">false</span> );</div>
<div class="line"><a id="l03159" name="l03159"></a><span class="lineno"> 3159</span>    }</div>
<div class="line"><a id="l03160" name="l03160"></a><span class="lineno"> 3160</span> </div>
<div class="line"><a id="l03161" name="l03161"></a><span class="lineno"> 3161</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#ade9fbb951e5a6ab5e65708aeef3cb4e2">mass_center_no_precalc</a>;</div>
<div class="line"><a id="l03162" name="l03162"></a><span class="lineno"> 3162</span>}</div>
<div class="ttc" id="aclassvehicle_html_af3bb85693d41273a49e87ab79cb61462"><div class="ttname"><a href="classvehicle.html#af3bb85693d41273a49e87ab79cb61462">vehicle::calc_mass_center</a></div><div class="ttdeci">void calc_mass_center(bool precalc) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06794">vehicle.cpp:6794</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l06794">calc_mass_center()</a>, <a class="el" href="vehicle_8h_source.html#l01823">mass_center_no_precalc</a>, and <a class="el" href="vehicle_8h_source.html#l01902">mass_center_no_precalc_dirty</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04260">balanced_wheel_config()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02239">veh_interact::display_veh()</a>, and <a class="el" href="vehicle_8cpp_source.html#l05645">refresh_pivot()</a>.</p>

</div>
</div>
<a id="acf67680c34af48b743af08f5f18b2748" name="acf67680c34af48b743af08f5f18b2748"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf67680c34af48b743af08f5f18b2748">&#9670;&nbsp;</a></span>make_active()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::make_active </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classitem__location.html">item_location</a> &amp;&#160;</td>
          <td class="paramname"><em>loc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update an item's active status, for example when adding hot or perishable liquid to a container. </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05168">5168</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05169" name="l05169"></a><span class="lineno"> 5169</span>{</div>
<div class="line"><a id="l05170" name="l05170"></a><span class="lineno"> 5170</span>    <a class="code hl_class" href="classitem.html">item</a> &amp;target = *loc;</div>
<div class="line"><a id="l05171" name="l05171"></a><span class="lineno"> 5171</span>    <span class="keywordflow">if</span>( !target.<a class="code hl_function" href="classitem.html#a22d1f85c07bab6621bbd16d301b22bbf">needs_processing</a>() ) {</div>
<div class="line"><a id="l05172" name="l05172"></a><span class="lineno"> 5172</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05173" name="l05173"></a><span class="lineno"> 5173</span>    }</div>
<div class="line"><a id="l05174" name="l05174"></a><span class="lineno"> 5174</span>    <span class="keyword">auto</span> cargo_parts = <a class="code hl_function" href="classvehicle.html#a38ba5bdc99241568c83ada974ed73e07">get_parts_at</a>( loc.<a class="code hl_function" href="classitem__location.html#a7c2a92227d0946b673eb95b0a53c766c">position</a>(), <span class="stringliteral">&quot;CARGO&quot;</span>, <a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02ca100b8cad7cf2a56f6df78f171f97a1ec">part_status_flag::any</a> );</div>
<div class="line"><a id="l05175" name="l05175"></a><span class="lineno"> 5175</span>    <span class="keywordflow">if</span>( cargo_parts.empty() ) {</div>
<div class="line"><a id="l05176" name="l05176"></a><span class="lineno"> 5176</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05177" name="l05177"></a><span class="lineno"> 5177</span>    }</div>
<div class="line"><a id="l05178" name="l05178"></a><span class="lineno"> 5178</span>    <span class="comment">// System insures that there is only one part in this vector.</span></div>
<div class="line"><a id="l05179" name="l05179"></a><span class="lineno"> 5179</span>    <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> *cargo_part = cargo_parts.front();</div>
<div class="line"><a id="l05180" name="l05180"></a><span class="lineno"> 5180</span>    <a class="code hl_variable" href="classvehicle.html#ad7894d7d5b3a20fb16927cd95d4d2a04">active_items</a>.<a class="code hl_function" href="classactive__item__cache.html#a5fa98979f3b77cce8696282184928af3">add</a>( target, cargo_part-&gt;<a class="code hl_variable" href="structvehicle__part.html#ac6e2dfa7178b8bed91baea3543961a86">mount</a> );</div>
<div class="line"><a id="l05181" name="l05181"></a><span class="lineno"> 5181</span>}</div>
<div class="ttc" id="aclassitem__location_html_a7c2a92227d0946b673eb95b0a53c766c"><div class="ttname"><a href="classitem__location.html#a7c2a92227d0946b673eb95b0a53c766c">item_location::position</a></div><div class="ttdeci">tripoint position() const</div><div class="ttdoc">Returns the position where the item is found.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l00734">item_location.cpp:734</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01807">active_items</a>, <a class="el" href="active__item__cache_8cpp_source.html#l00030">active_item_cache::add()</a>, <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02ca100b8cad7cf2a56f6df78f171f97a1ec">any</a>, <a class="el" href="vehicle_8cpp_source.html#l02580">get_parts_at()</a>, <a class="el" href="vehicle_8h_source.html#l00367">vehicle_part::mount</a>, <a class="el" href="item_8cpp_source.html#l08772">item::needs_processing()</a>, and <a class="el" href="item__location_8cpp_source.html#l00734">item_location::position()</a>.</p>

</div>
</div>
<a id="a6f48439c388d9f7a75515eee70adf0ee" name="a6f48439c388d9f7a75515eee70adf0ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f48439c388d9f7a75515eee70adf0ee">&#9670;&nbsp;</a></span>max_ground_velocity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::max_ground_velocity </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fueled</em> = <code>true</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03502">3502</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03503" name="l03503"></a><span class="lineno"> 3503</span>{</div>
<div class="line"><a id="l03504" name="l03504"></a><span class="lineno"> 3504</span>    <span class="keywordtype">int</span> total_engine_w = <a class="code hl_function" href="classvehicle.html#a73db9a09464720b32da8e3f214475a8e">total_power_w</a>( fueled );</div>
<div class="line"><a id="l03505" name="l03505"></a><span class="lineno"> 3505</span>    <span class="keywordtype">double</span> c_rolling_drag = <a class="code hl_function" href="classvehicle.html#acc7fb8b935b2f6f3d26efaf0fae16230">coeff_rolling_drag</a>();</div>
<div class="line"><a id="l03506" name="l03506"></a><span class="lineno"> 3506</span>    <span class="keywordtype">double</span> max_in_mps = <a class="code hl_function" href="vehicle_8cpp.html#a1c1bd01d6fc9c8984a106aef75ae294a">simple_cubic_solution</a>( <a class="code hl_function" href="classvehicle.html#a8997e3518316057cde55f9ecb444b8f0">coeff_air_drag</a>(), c_rolling_drag,</div>
<div class="line"><a id="l03507" name="l03507"></a><span class="lineno"> 3507</span>                        c_rolling_drag * <a class="code hl_variable" href="namespacevehicles.html#a38d998781d2493479832c6bff33e2f32">vehicles::rolling_constant_to_variable</a>,</div>
<div class="line"><a id="l03508" name="l03508"></a><span class="lineno"> 3508</span>                        -total_engine_w );</div>
<div class="line"><a id="l03509" name="l03509"></a><span class="lineno"> 3509</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;%s: power %d, c_air %3.2f, c_rolling %3.2f, max_in_mps %3.2f&quot;</span>,</div>
<div class="line"><a id="l03510" name="l03510"></a><span class="lineno"> 3510</span>             <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, total_engine_w, <a class="code hl_function" href="classvehicle.html#a8997e3518316057cde55f9ecb444b8f0">coeff_air_drag</a>(), c_rolling_drag, max_in_mps );</div>
<div class="line"><a id="l03511" name="l03511"></a><span class="lineno"> 3511</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="vehicle_8h.html#a3bf51af37129f24d376a74ca56b2644e">mps_to_vmiph</a>( max_in_mps );</div>
<div class="line"><a id="l03512" name="l03512"></a><span class="lineno"> 3512</span>}</div>
<div class="ttc" id="aclassvehicle_html_a8997e3518316057cde55f9ecb444b8f0"><div class="ttname"><a href="classvehicle.html#a8997e3518316057cde55f9ecb444b8f0">vehicle::coeff_air_drag</a></div><div class="ttdeci">double coeff_air_drag() const</div><div class="ttdoc">Physical coefficients used for vehicle calculations.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03789">vehicle.cpp:3789</a></div></div>
<div class="ttc" id="aclassvehicle_html_acc7fb8b935b2f6f3d26efaf0fae16230"><div class="ttname"><a href="classvehicle.html#acc7fb8b935b2f6f3d26efaf0fae16230">vehicle::coeff_rolling_drag</a></div><div class="ttdeci">double coeff_rolling_drag() const</div><div class="ttdoc">coefficient of rolling resistance multiplied by velocity to get the variable part of rolling resistan...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03928">vehicle.cpp:3928</a></div></div>
<div class="ttc" id="anamespacevehicles_html_a38d998781d2493479832c6bff33e2f32"><div class="ttname"><a href="namespacevehicles.html#a38d998781d2493479832c6bff33e2f32">vehicles::rolling_constant_to_variable</a></div><div class="ttdeci">constexpr double rolling_constant_to_variable</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00067">vehicle.h:67</a></div></div>
<div class="ttc" id="avehicle_8cpp_html_a1c1bd01d6fc9c8984a106aef75ae294a"><div class="ttname"><a href="vehicle_8cpp.html#a1c1bd01d6fc9c8984a106aef75ae294a">simple_cubic_solution</a></div><div class="ttdeci">static double simple_cubic_solution(double a, double b, double c, double d)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03431">vehicle.cpp:3431</a></div></div>
<div class="ttc" id="avehicle_8h_html_a3bf51af37129f24d376a74ca56b2644e"><div class="ttname"><a href="vehicle_8h.html#a3bf51af37129f24d376a74ca56b2644e">mps_to_vmiph</a></div><div class="ttdeci">int mps_to_vmiph(double mps)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l00066">vehicle_move.cpp:66</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="vehicle_8cpp_source.html#l03789">coeff_air_drag()</a>, <a class="el" href="vehicle_8cpp_source.html#l03928">coeff_rolling_drag()</a>, <a class="el" href="enums_8h_source.html#l00264">m_debug</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00066">mps_to_vmiph()</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="vehicle_8h_source.html#l00067">vehicles::rolling_constant_to_variable</a>, <a class="el" href="vehicle_8cpp_source.html#l03431">simple_cubic_solution()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03333">total_power_w()</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03543">max_velocity()</a>.</p>

</div>
</div>
<a id="abd0ed862a967a9016de37a47b1ac8043" name="abd0ed862a967a9016de37a47b1ac8043"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd0ed862a967a9016de37a47b1ac8043">&#9670;&nbsp;</a></span>max_reactor_epower_w()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::max_reactor_epower_w </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04585">4585</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04586" name="l04586"></a><span class="lineno"> 4586</span>{</div>
<div class="line"><a id="l04587" name="l04587"></a><span class="lineno"> 4587</span>    <span class="keywordtype">int</span> epower_w = 0;</div>
<div class="line"><a id="l04588" name="l04588"></a><span class="lineno"> 4588</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> elem : <a class="code hl_variable" href="classvehicle.html#a2423efb46e19d1801498f9ea0c06f576">reactors</a> ) {</div>
<div class="line"><a id="l04589" name="l04589"></a><span class="lineno"> 4589</span>        epower_w += <a class="code hl_function" href="classvehicle.html#a625ad56bb7c71b7305ccbdb411d650db">is_part_on</a>( elem ) ? <a class="code hl_function" href="classvehicle.html#a27cec1366be7bf296d9c483a40833120">part_epower_w</a>( elem ) : 0;</div>
<div class="line"><a id="l04590" name="l04590"></a><span class="lineno"> 4590</span>    }</div>
<div class="line"><a id="l04591" name="l04591"></a><span class="lineno"> 4591</span>    <span class="keywordflow">return</span> epower_w;</div>
<div class="line"><a id="l04592" name="l04592"></a><span class="lineno"> 4592</span>}</div>
<div class="ttc" id="aclassvehicle_html_a2423efb46e19d1801498f9ea0c06f576"><div class="ttname"><a href="classvehicle.html#a2423efb46e19d1801498f9ea0c06f576">vehicle::reactors</a></div><div class="ttdeci">std::vector&lt; int &gt; reactors</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01753">vehicle.h:1753</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l01092">is_part_on()</a>, <a class="el" href="vehicle_8cpp_source.html#l01208">part_epower_w()</a>, and <a class="el" href="vehicle_8h_source.html#l01753">reactors</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l01355">veh_interact::calc_overview()</a>.</p>

</div>
</div>
<a id="ad845fa8ba69c4b41cf6a0fc35db7f01d" name="ad845fa8ba69c4b41cf6a0fc35db7f01d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad845fa8ba69c4b41cf6a0fc35db7f01d">&#9670;&nbsp;</a></span>max_reverse_velocity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::max_reverse_velocity </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fueled</em> = <code>true</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03554">3554</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03555" name="l03555"></a><span class="lineno"> 3555</span>{</div>
<div class="line"><a id="l03556" name="l03556"></a><span class="lineno"> 3556</span>    <span class="keywordtype">int</span> max_vel = <a class="code hl_function" href="classvehicle.html#a8ae7b8e43449ee574a6fd266f4773892">max_velocity</a>( fueled );</div>
<div class="line"><a id="l03557" name="l03557"></a><span class="lineno"> 3557</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a603b71f04b9fdb63f400ac93fb4bea88">has_engine_type</a>( <a class="code hl_variable" href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l03558" name="l03558"></a><span class="lineno"> 3558</span>        <span class="comment">// Electric motors can go in reverse as well as forward</span></div>
<div class="line"><a id="l03559" name="l03559"></a><span class="lineno"> 3559</span>        <span class="keywordflow">return</span> -max_vel;</div>
<div class="line"><a id="l03560" name="l03560"></a><span class="lineno"> 3560</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03561" name="l03561"></a><span class="lineno"> 3561</span>        <span class="comment">// All other motive powers do poorly in reverse</span></div>
<div class="line"><a id="l03562" name="l03562"></a><span class="lineno"> 3562</span>        <span class="keywordflow">return</span> -max_vel / 4;</div>
<div class="line"><a id="l03563" name="l03563"></a><span class="lineno"> 3563</span>    }</div>
<div class="line"><a id="l03564" name="l03564"></a><span class="lineno"> 3564</span>}</div>
<div class="ttc" id="aclassvehicle_html_a603b71f04b9fdb63f400ac93fb4bea88"><div class="ttname"><a href="classvehicle.html#a603b71f04b9fdb63f400ac93fb4bea88">vehicle::has_engine_type</a></div><div class="ttdeci">bool has_engine_type(const itype_id &amp;ft, bool enabled) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01031">vehicle.cpp:1031</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, <a class="el" href="vehicle_8cpp_source.html#l01031">has_engine_type()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03543">max_velocity()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l00285">cruise_thrust()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>.</p>

</div>
</div>
<a id="ade874af0ba61fbce41b10b05e9095e11" name="ade874af0ba61fbce41b10b05e9095e11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade874af0ba61fbce41b10b05e9095e11">&#9670;&nbsp;</a></span>max_rotor_velocity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::max_rotor_velocity </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fueled</em> = <code>true</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03534">3534</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03535" name="l03535"></a><span class="lineno"> 3535</span>{</div>
<div class="line"><a id="l03536" name="l03536"></a><span class="lineno"> 3536</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> max_air_mps = std::sqrt( <a class="code hl_function" href="classvehicle.html#af531084b2df70f7d6458cb7c3093bbcf">lift_thrust_of_rotorcraft</a>( fueled ) / <a class="code hl_function" href="classvehicle.html#a8997e3518316057cde55f9ecb444b8f0">coeff_air_drag</a>() );</div>
<div class="line"><a id="l03537" name="l03537"></a><span class="lineno"> 3537</span>    <span class="comment">// helicopters just cannot go over 250mph at very maximum</span></div>
<div class="line"><a id="l03538" name="l03538"></a><span class="lineno"> 3538</span>    <span class="comment">// weird things start happening to their rotors if they do.</span></div>
<div class="line"><a id="l03539" name="l03539"></a><span class="lineno"> 3539</span>    <span class="comment">// due to the rotor tips going supersonic.</span></div>
<div class="line"><a id="l03540" name="l03540"></a><span class="lineno"> 3540</span>    <span class="keywordflow">return</span> std::min( 25501, <a class="code hl_function" href="vehicle_8h.html#a3bf51af37129f24d376a74ca56b2644e">mps_to_vmiph</a>( max_air_mps ) );</div>
<div class="line"><a id="l03541" name="l03541"></a><span class="lineno"> 3541</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l03789">coeff_air_drag()</a>, <a class="el" href="vehicle_8cpp_source.html#l03995">lift_thrust_of_rotorcraft()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00066">mps_to_vmiph()</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03543">max_velocity()</a>.</p>

</div>
</div>
<a id="a8ae7b8e43449ee574a6fd266f4773892" name="a8ae7b8e43449ee574a6fd266f4773892"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ae7b8e43449ee574a6fd266f4773892">&#9670;&nbsp;</a></span>max_velocity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::max_velocity </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fueled</em> = <code>true</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03543">3543</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03544" name="l03544"></a><span class="lineno"> 3544</span>{</div>
<div class="line"><a id="l03545" name="l03545"></a><span class="lineno"> 3545</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a0a35b7f917fdb08e70a78315cc968f86">is_flying</a> &amp;&amp; <a class="code hl_function" href="classvehicle.html#a292961ab33a42bf495d19b8692f6f105">is_rotorcraft</a>() ) {</div>
<div class="line"><a id="l03546" name="l03546"></a><span class="lineno"> 3546</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#ade874af0ba61fbce41b10b05e9095e11">max_rotor_velocity</a>( fueled );</div>
<div class="line"><a id="l03547" name="l03547"></a><span class="lineno"> 3547</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a0ede4cc2a97a8305b1f06817d0d6cdf8">is_watercraft</a>() ) {</div>
<div class="line"><a id="l03548" name="l03548"></a><span class="lineno"> 3548</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#aa288156b4f46f46ba4791073cbaf4c1b">max_water_velocity</a>( fueled );</div>
<div class="line"><a id="l03549" name="l03549"></a><span class="lineno"> 3549</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03550" name="l03550"></a><span class="lineno"> 3550</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a6f48439c388d9f7a75515eee70adf0ee">max_ground_velocity</a>( fueled );</div>
<div class="line"><a id="l03551" name="l03551"></a><span class="lineno"> 3551</span>    }</div>
<div class="line"><a id="l03552" name="l03552"></a><span class="lineno"> 3552</span>}</div>
<div class="ttc" id="aclassvehicle_html_a6f48439c388d9f7a75515eee70adf0ee"><div class="ttname"><a href="classvehicle.html#a6f48439c388d9f7a75515eee70adf0ee">vehicle::max_ground_velocity</a></div><div class="ttdeci">int max_ground_velocity(bool fueled=true) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03502">vehicle.cpp:3502</a></div></div>
<div class="ttc" id="aclassvehicle_html_aa288156b4f46f46ba4791073cbaf4c1b"><div class="ttname"><a href="classvehicle.html#aa288156b4f46f46ba4791073cbaf4c1b">vehicle::max_water_velocity</a></div><div class="ttdeci">int max_water_velocity(bool fueled=true) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03524">vehicle.cpp:3524</a></div></div>
<div class="ttc" id="aclassvehicle_html_ade874af0ba61fbce41b10b05e9095e11"><div class="ttname"><a href="classvehicle.html#ade874af0ba61fbce41b10b05e9095e11">vehicle::max_rotor_velocity</a></div><div class="ttdeci">int max_rotor_velocity(bool fueled=true) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03534">vehicle.cpp:3534</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01917">is_flying</a>, <a class="el" href="vehicle_8cpp_source.html#l04017">is_rotorcraft()</a>, <a class="el" href="vehicle_8cpp_source.html#l04037">is_watercraft()</a>, <a class="el" href="vehicle_8cpp_source.html#l03502">max_ground_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l03534">max_rotor_velocity()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03524">max_water_velocity()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l00285">cruise_thrust()</a>, <a class="el" href="vehicle_8cpp_source.html#l03375">ground_acceleration()</a>, <a class="el" href="vehicle_8cpp_source.html#l03554">max_reverse_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l04126">strain()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>.</p>

</div>
</div>
<a id="a197b7a92e0fe24d69d2b3368df720059" name="a197b7a92e0fe24d69d2b3368df720059"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a197b7a92e0fe24d69d2b3368df720059">&#9670;&nbsp;</a></span>max_volume()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceunits.html#a5d16607c866588620acb381e7dbbf0a6">units::volume</a> vehicle::max_volume </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05158">5158</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05159" name="l05159"></a><span class="lineno"> 5159</span>{</div>
<div class="line"><a id="l05160" name="l05160"></a><span class="lineno"> 5160</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a983dd9db3cd64078b176a82289e0b260">get_items</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ).<a class="code hl_function" href="classvehicle__stack.html#abfa4eb15309e56b94c5d51475d525268">max_volume</a>();</div>
<div class="line"><a id="l05161" name="l05161"></a><span class="lineno"> 5161</span>}</div>
<div class="ttc" id="aclassvehicle__stack_html_abfa4eb15309e56b94c5d51475d525268"><div class="ttname"><a href="classvehicle__stack.html#abfa4eb15309e56b94c5d51475d525268">vehicle_stack::max_volume</a></div><div class="ttdeci">units::volume max_volume() const override</div><div class="ttdoc">Maximum volume allowed here.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l00240">vehicle.cpp:240</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l05288">get_items()</a>, <a class="el" href="vehicle_8cpp_source.html#l00240">vehicle_stack::max_volume()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>, and <a class="el" href="vehicle__display_8cpp_source.html#l00149">print_part_list()</a>.</p>

</div>
</div>
<a id="aa288156b4f46f46ba4791073cbaf4c1b" name="aa288156b4f46f46ba4791073cbaf4c1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa288156b4f46f46ba4791073cbaf4c1b">&#9670;&nbsp;</a></span>max_water_velocity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::max_water_velocity </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fueled</em> = <code>true</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03524">3524</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03525" name="l03525"></a><span class="lineno"> 3525</span>{</div>
<div class="line"><a id="l03526" name="l03526"></a><span class="lineno"> 3526</span>    <span class="keywordtype">int</span> total_engine_w = <a class="code hl_function" href="classvehicle.html#a73db9a09464720b32da8e3f214475a8e">total_power_w</a>( fueled );</div>
<div class="line"><a id="l03527" name="l03527"></a><span class="lineno"> 3527</span>    <span class="keywordtype">double</span> total_drag = <a class="code hl_function" href="classvehicle.html#ae97aeac27584b839105a68f12eb1f7a1">coeff_water_drag</a>() + <a class="code hl_function" href="classvehicle.html#a8997e3518316057cde55f9ecb444b8f0">coeff_air_drag</a>();</div>
<div class="line"><a id="l03528" name="l03528"></a><span class="lineno"> 3528</span>    <span class="keywordtype">double</span> max_in_mps = std::cbrt( total_engine_w / total_drag );</div>
<div class="line"><a id="l03529" name="l03529"></a><span class="lineno"> 3529</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;%s: power %d, c_air %3.2f, c_water %3.2f, water max_in_mps %3.2f&quot;</span>,</div>
<div class="line"><a id="l03530" name="l03530"></a><span class="lineno"> 3530</span>             <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, total_engine_w, <a class="code hl_function" href="classvehicle.html#a8997e3518316057cde55f9ecb444b8f0">coeff_air_drag</a>(), <a class="code hl_function" href="classvehicle.html#ae97aeac27584b839105a68f12eb1f7a1">coeff_water_drag</a>(), max_in_mps );</div>
<div class="line"><a id="l03531" name="l03531"></a><span class="lineno"> 3531</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="vehicle_8h.html#a3bf51af37129f24d376a74ca56b2644e">mps_to_vmiph</a>( max_in_mps );</div>
<div class="line"><a id="l03532" name="l03532"></a><span class="lineno"> 3532</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="vehicle_8cpp_source.html#l03789">coeff_air_drag()</a>, <a class="el" href="vehicle_8cpp_source.html#l04047">coeff_water_drag()</a>, <a class="el" href="enums_8h_source.html#l00264">m_debug</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00066">mps_to_vmiph()</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, and <a class="el" href="vehicle_8cpp_source.html#l03333">total_power_w()</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>, <a class="el" href="vehicle_8cpp_source.html#l03543">max_velocity()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03406">water_acceleration()</a>.</p>

</div>
</div>
<a id="a2fcad9b54e438d79b12f2e369511ffa8" name="a2fcad9b54e438d79b12f2e369511ffa8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fcad9b54e438d79b12f2e369511ffa8">&#9670;&nbsp;</a></span>merge_rackable_vehicle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::merge_rackable_vehicle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classvehicle.html">vehicle</a> *&#160;</td>
          <td class="paramname"><em>carry_veh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>rack_parts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01654">1654</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01655" name="l01655"></a><span class="lineno"> 1655</span>{</div>
<div class="line"><a id="l01656" name="l01656"></a><span class="lineno"> 1656</span>    <span class="comment">// Mapping between the old vehicle and new vehicle mounting points</span></div>
<div class="line"><a id="l01657" name="l01657"></a><span class="lineno"> 1657</span>    <span class="keyword">struct </span>mapping {</div>
<div class="line"><a id="l01658" name="l01658"></a><span class="lineno"> 1658</span>        <span class="comment">// All the parts attached to this mounting point</span></div>
<div class="line"><a id="l01659" name="l01659"></a><span class="lineno"> 1659</span>        std::vector&lt;int&gt; carry_parts_here;</div>
<div class="line"><a id="l01660" name="l01660"></a><span class="lineno"> 1660</span> </div>
<div class="line"><a id="l01661" name="l01661"></a><span class="lineno"> 1661</span>        <span class="comment">// the index where the racking part is on the vehicle with the rack</span></div>
<div class="line"><a id="l01662" name="l01662"></a><span class="lineno"> 1662</span>        <span class="keywordtype">int</span> rack_part;</div>
<div class="line"><a id="l01663" name="l01663"></a><span class="lineno"> 1663</span> </div>
<div class="line"><a id="l01664" name="l01664"></a><span class="lineno"> 1664</span>        <span class="comment">// the mount point we are going to add to the vehicle with the rack</span></div>
<div class="line"><a id="l01665" name="l01665"></a><span class="lineno"> 1665</span>        <a class="code hl_struct" href="structpoint.html">point</a> carry_mount;</div>
<div class="line"><a id="l01666" name="l01666"></a><span class="lineno"> 1666</span> </div>
<div class="line"><a id="l01667" name="l01667"></a><span class="lineno"> 1667</span>        <span class="comment">// the mount point on the old vehicle (carry_veh) that will be destroyed</span></div>
<div class="line"><a id="l01668" name="l01668"></a><span class="lineno"> 1668</span>        <a class="code hl_struct" href="structpoint.html">point</a> old_mount;</div>
<div class="line"><a id="l01669" name="l01669"></a><span class="lineno"> 1669</span>    };</div>
<div class="line"><a id="l01670" name="l01670"></a><span class="lineno"> 1670</span>    <a class="code hl_function" href="classvehicle.html#ad874a1fdccab8e70b60d887fc0d56b7e">invalidate_towing</a>( <span class="keyword">true</span> );</div>
<div class="line"><a id="l01671" name="l01671"></a><span class="lineno"> 1671</span>    <span class="comment">// By structs, we mean all the parts of the carry vehicle that are at the structure location</span></div>
<div class="line"><a id="l01672" name="l01672"></a><span class="lineno"> 1672</span>    <span class="comment">// of the vehicle (i.e. frames)</span></div>
<div class="line"><a id="l01673" name="l01673"></a><span class="lineno"> 1673</span>    std::vector&lt;int&gt; carry_veh_structs = carry_veh-&gt;<a class="code hl_function" href="classvehicle.html#a2e1f54f4d34a2edb7ff3665e5eba7df9">all_parts_at_location</a>( <a class="code hl_function" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure</a> );</div>
<div class="line"><a id="l01674" name="l01674"></a><span class="lineno"> 1674</span>    std::vector&lt;mapping&gt; carry_data;</div>
<div class="line"><a id="l01675" name="l01675"></a><span class="lineno"> 1675</span>    carry_data.reserve( carry_veh_structs.size() );</div>
<div class="line"><a id="l01676" name="l01676"></a><span class="lineno"> 1676</span> </div>
<div class="line"><a id="l01677" name="l01677"></a><span class="lineno"> 1677</span>    <span class="comment">//X is forward/backward, Y is left/right</span></div>
<div class="line"><a id="l01678" name="l01678"></a><span class="lineno"> 1678</span>    std::string axis;</div>
<div class="line"><a id="l01679" name="l01679"></a><span class="lineno"> 1679</span>    <span class="keywordflow">if</span>( carry_veh_structs.size() == 1 ) {</div>
<div class="line"><a id="l01680" name="l01680"></a><span class="lineno"> 1680</span>        axis = <span class="stringliteral">&quot;X&quot;</span>;</div>
<div class="line"><a id="l01681" name="l01681"></a><span class="lineno"> 1681</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01682" name="l01682"></a><span class="lineno"> 1682</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> carry_part : carry_veh_structs ) {</div>
<div class="line"><a id="l01683" name="l01683"></a><span class="lineno"> 1683</span>            <span class="keywordflow">if</span>( carry_veh-&gt;<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ carry_part ].mount.x || carry_veh-&gt;<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ carry_part ].mount.y ) {</div>
<div class="line"><a id="l01684" name="l01684"></a><span class="lineno"> 1684</span>                axis = carry_veh-&gt;<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ carry_part ].mount.x ? <span class="stringliteral">&quot;X&quot;</span> : <span class="stringliteral">&quot;Y&quot;</span>;</div>
<div class="line"><a id="l01685" name="l01685"></a><span class="lineno"> 1685</span>            }</div>
<div class="line"><a id="l01686" name="l01686"></a><span class="lineno"> 1686</span>        }</div>
<div class="line"><a id="l01687" name="l01687"></a><span class="lineno"> 1687</span>    }</div>
<div class="line"><a id="l01688" name="l01688"></a><span class="lineno"> 1688</span> </div>
<div class="line"><a id="l01689" name="l01689"></a><span class="lineno"> 1689</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::angle</a> relative_dir = <a class="code hl_function" href="namespacedetail.html#a955ad02ade4f07084391a60ed80701bf">normalize</a>( carry_veh-&gt;<a class="code hl_variable" href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">face</a>.<a class="code hl_function" href="classtileray.html#a91ed01227e1754597024f4916f8bd6af">dir</a>() - <a class="code hl_variable" href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">face</a>.<a class="code hl_function" href="classtileray.html#a91ed01227e1754597024f4916f8bd6af">dir</a>() );</div>
<div class="line"><a id="l01690" name="l01690"></a><span class="lineno"> 1690</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::angle</a> relative_180 = <a class="code hl_function" href="namespaceunits.html#ab81e1b17660904a3d8baed6859e79337">units::fmod</a>( relative_dir, 180_degrees );</div>
<div class="line"><a id="l01691" name="l01691"></a><span class="lineno"> 1691</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::angle</a> face_dir_180 = <a class="code hl_function" href="namespacedetail.html#a955ad02ade4f07084391a60ed80701bf">normalize</a>( <a class="code hl_variable" href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">face</a>.<a class="code hl_function" href="classtileray.html#a91ed01227e1754597024f4916f8bd6af">dir</a>(), 180_degrees );</div>
<div class="line"><a id="l01692" name="l01692"></a><span class="lineno"> 1692</span> </div>
<div class="line"><a id="l01693" name="l01693"></a><span class="lineno"> 1693</span>    <span class="comment">// if the carrier is skewed N/S and the carried vehicle isn&#39;t aligned with</span></div>
<div class="line"><a id="l01694" name="l01694"></a><span class="lineno"> 1694</span>    <span class="comment">// the carrier, force the carried vehicle to be at a right angle</span></div>
<div class="line"><a id="l01695" name="l01695"></a><span class="lineno"> 1695</span>    <span class="keywordflow">if</span>( face_dir_180 &gt;= 45_degrees &amp;&amp; face_dir_180 &lt;= 135_degrees ) {</div>
<div class="line"><a id="l01696" name="l01696"></a><span class="lineno"> 1696</span>        <span class="keywordflow">if</span>( relative_180 &gt;= 45_degrees &amp;&amp; relative_180 &lt;= 135_degrees ) {</div>
<div class="line"><a id="l01697" name="l01697"></a><span class="lineno"> 1697</span>            <span class="keywordflow">if</span>( relative_dir &lt; 180_degrees ) {</div>
<div class="line"><a id="l01698" name="l01698"></a><span class="lineno"> 1698</span>                relative_dir = 90_degrees;</div>
<div class="line"><a id="l01699" name="l01699"></a><span class="lineno"> 1699</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01700" name="l01700"></a><span class="lineno"> 1700</span>                relative_dir = 270_degrees;</div>
<div class="line"><a id="l01701" name="l01701"></a><span class="lineno"> 1701</span>            }</div>
<div class="line"><a id="l01702" name="l01702"></a><span class="lineno"> 1702</span>        }</div>
<div class="line"><a id="l01703" name="l01703"></a><span class="lineno"> 1703</span>    }</div>
<div class="line"><a id="l01704" name="l01704"></a><span class="lineno"> 1704</span> </div>
<div class="line"><a id="l01705" name="l01705"></a><span class="lineno"> 1705</span>    <span class="comment">// We look at each of the structure parts (mount points, i.e. frames) for the</span></div>
<div class="line"><a id="l01706" name="l01706"></a><span class="lineno"> 1706</span>    <span class="comment">// carry vehicle and then find a rack part adjacent to it. If we don&#39;t find a rack part,</span></div>
<div class="line"><a id="l01707" name="l01707"></a><span class="lineno"> 1707</span>    <span class="comment">// then we can&#39;t merge.</span></div>
<div class="line"><a id="l01708" name="l01708"></a><span class="lineno"> 1708</span>    <span class="keywordtype">bool</span> found_all_parts = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01709" name="l01709"></a><span class="lineno"> 1709</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> carry_part : carry_veh_structs ) {</div>
<div class="line"><a id="l01710" name="l01710"></a><span class="lineno"> 1710</span> </div>
<div class="line"><a id="l01711" name="l01711"></a><span class="lineno"> 1711</span>        <span class="comment">// The current position on the original vehicle for this part</span></div>
<div class="line"><a id="l01712" name="l01712"></a><span class="lineno"> 1712</span>        <a class="code hl_struct" href="structtripoint.html">tripoint</a> carry_pos = carry_veh-&gt;<a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( carry_part );</div>
<div class="line"><a id="l01713" name="l01713"></a><span class="lineno"> 1713</span> </div>
<div class="line"><a id="l01714" name="l01714"></a><span class="lineno"> 1714</span>        <span class="keywordtype">bool</span> merged_part = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01715" name="l01715"></a><span class="lineno"> 1715</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> rack_part : rack_parts ) {</div>
<div class="line"><a id="l01716" name="l01716"></a><span class="lineno"> 1716</span>            <span class="keywordtype">size_t</span> j = 0;</div>
<div class="line"><a id="l01717" name="l01717"></a><span class="lineno"> 1717</span>            <span class="comment">// There&#39;s no mathematical transform from global pos3 to vehicle mount, so search for the</span></div>
<div class="line"><a id="l01718" name="l01718"></a><span class="lineno"> 1718</span>            <span class="comment">// carry part in global pos3 after translating</span></div>
<div class="line"><a id="l01719" name="l01719"></a><span class="lineno"> 1719</span>            <a class="code hl_struct" href="structpoint.html">point</a> carry_mount;</div>
<div class="line"><a id="l01720" name="l01720"></a><span class="lineno"> 1720</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> &amp;offset : <a class="code hl_variable" href="point_8h.html#a7e55b593cf990cd4c6afb92cf74373cd">four_cardinal_directions</a> ) {</div>
<div class="line"><a id="l01721" name="l01721"></a><span class="lineno"> 1721</span>                carry_mount = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ rack_part ].mount + offset;</div>
<div class="line"><a id="l01722" name="l01722"></a><span class="lineno"> 1722</span>                <a class="code hl_struct" href="structtripoint.html">tripoint</a> possible_pos = <a class="code hl_function" href="classvehicle.html#aa2123b10ad5b9401069f9b5774361878">mount_to_tripoint</a>( carry_mount );</div>
<div class="line"><a id="l01723" name="l01723"></a><span class="lineno"> 1723</span>                <span class="keywordflow">if</span>( possible_pos == carry_pos ) {</div>
<div class="line"><a id="l01724" name="l01724"></a><span class="lineno"> 1724</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01725" name="l01725"></a><span class="lineno"> 1725</span>                }</div>
<div class="line"><a id="l01726" name="l01726"></a><span class="lineno"> 1726</span>                ++j;</div>
<div class="line"><a id="l01727" name="l01727"></a><span class="lineno"> 1727</span>            }</div>
<div class="line"><a id="l01728" name="l01728"></a><span class="lineno"> 1728</span> </div>
<div class="line"><a id="l01729" name="l01729"></a><span class="lineno"> 1729</span>            <span class="comment">// We checked the adjacent points from the mounting rack and managed</span></div>
<div class="line"><a id="l01730" name="l01730"></a><span class="lineno"> 1730</span>            <span class="comment">// to find the current structure part were looking for nearby. If the part was not</span></div>
<div class="line"><a id="l01731" name="l01731"></a><span class="lineno"> 1731</span>            <span class="comment">// near this particular rack, we would look at each in the list of rack_parts</span></div>
<div class="line"><a id="l01732" name="l01732"></a><span class="lineno"> 1732</span>            <span class="keyword">const</span> <span class="keywordtype">bool</span> carry_part_next_to_this_rack = j &lt; <a class="code hl_variable" href="point_8h.html#aad28d8d682bc8e5628fd2b04df87decd">four_adjacent_offsets</a>.size();</div>
<div class="line"><a id="l01733" name="l01733"></a><span class="lineno"> 1733</span>            <span class="keywordflow">if</span>( carry_part_next_to_this_rack ) {</div>
<div class="line"><a id="l01734" name="l01734"></a><span class="lineno"> 1734</span>                mapping carry_map;</div>
<div class="line"><a id="l01735" name="l01735"></a><span class="lineno"> 1735</span>                <a class="code hl_struct" href="structpoint.html">point</a> old_mount = carry_veh-&gt;<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ carry_part ].mount;</div>
<div class="line"><a id="l01736" name="l01736"></a><span class="lineno"> 1736</span>                carry_map.carry_parts_here = carry_veh-&gt;<a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( old_mount, <span class="keyword">true</span> );</div>
<div class="line"><a id="l01737" name="l01737"></a><span class="lineno"> 1737</span>                carry_map.rack_part = rack_part;</div>
<div class="line"><a id="l01738" name="l01738"></a><span class="lineno"> 1738</span>                carry_map.carry_mount = carry_mount;</div>
<div class="line"><a id="l01739" name="l01739"></a><span class="lineno"> 1739</span>                carry_map.old_mount = old_mount;</div>
<div class="line"><a id="l01740" name="l01740"></a><span class="lineno"> 1740</span>                carry_data.push_back( carry_map );</div>
<div class="line"><a id="l01741" name="l01741"></a><span class="lineno"> 1741</span>                merged_part = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01742" name="l01742"></a><span class="lineno"> 1742</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01743" name="l01743"></a><span class="lineno"> 1743</span>            }</div>
<div class="line"><a id="l01744" name="l01744"></a><span class="lineno"> 1744</span>        }</div>
<div class="line"><a id="l01745" name="l01745"></a><span class="lineno"> 1745</span> </div>
<div class="line"><a id="l01746" name="l01746"></a><span class="lineno"> 1746</span>        <span class="comment">// We checked all the racks and could not find a place for this structure part.</span></div>
<div class="line"><a id="l01747" name="l01747"></a><span class="lineno"> 1747</span>        <span class="keywordflow">if</span>( !merged_part ) {</div>
<div class="line"><a id="l01748" name="l01748"></a><span class="lineno"> 1748</span>            found_all_parts = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01749" name="l01749"></a><span class="lineno"> 1749</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01750" name="l01750"></a><span class="lineno"> 1750</span>        }</div>
<div class="line"><a id="l01751" name="l01751"></a><span class="lineno"> 1751</span>    }</div>
<div class="line"><a id="l01752" name="l01752"></a><span class="lineno"> 1752</span> </div>
<div class="line"><a id="l01753" name="l01753"></a><span class="lineno"> 1753</span>    <span class="comment">// Now that we have mapped all the parts of the carry vehicle to the vehicle with the rack</span></div>
<div class="line"><a id="l01754" name="l01754"></a><span class="lineno"> 1754</span>    <span class="comment">// we can go ahead and merge</span></div>
<div class="line"><a id="l01755" name="l01755"></a><span class="lineno"> 1755</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> mount_zero{};</div>
<div class="line"><a id="l01756" name="l01756"></a><span class="lineno"> 1756</span>    <span class="keywordflow">if</span>( found_all_parts ) {</div>
<div class="line"><a id="l01757" name="l01757"></a><span class="lineno"> 1757</span>        <span class="keyword">decltype</span>( <a class="code hl_variable" href="classvehicle.html#a90b6f438b5ae343dab2b131c64293584">loot_zones</a> ) new_zones;</div>
<div class="line"><a id="l01758" name="l01758"></a><span class="lineno"> 1758</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> carry_map : carry_data ) {</div>
<div class="line"><a id="l01759" name="l01759"></a><span class="lineno"> 1759</span>            std::string offset = <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <span class="stringliteral">&quot;%s%3d&quot;</span>, carry_map.old_mount == mount_zero ? axis : <span class="stringliteral">&quot; &quot;</span>,</div>
<div class="line"><a id="l01760" name="l01760"></a><span class="lineno"> 1760</span>                                                axis == <span class="stringliteral">&quot;X&quot;</span> ? carry_map.old_mount.x : carry_map.old_mount.y );</div>
<div class="line"><a id="l01761" name="l01761"></a><span class="lineno"> 1761</span>            std::string unique_id = <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <span class="stringliteral">&quot;%s%3d%s&quot;</span>, offset,</div>
<div class="line"><a id="l01762" name="l01762"></a><span class="lineno"> 1762</span>                                                   <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_function" href="namespaceunits.html#a9ce2bc1618fa4acf9f9e98effd9f1ae0">to_degrees</a>( relative_dir ) ),</div>
<div class="line"><a id="l01763" name="l01763"></a><span class="lineno"> 1763</span>                                                   carry_veh-&gt;<a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l01764" name="l01764"></a><span class="lineno"> 1764</span>            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> carry_part : carry_map.carry_parts_here ) {</div>
<div class="line"><a id="l01765" name="l01765"></a><span class="lineno"> 1765</span>                <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.push_back( carry_veh-&gt;<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ carry_part ] );</div>
<div class="line"><a id="l01766" name="l01766"></a><span class="lineno"> 1766</span>                <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;carried_part = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.back();</div>
<div class="line"><a id="l01767" name="l01767"></a><span class="lineno"> 1767</span>                carried_part.<a class="code hl_variable" href="structvehicle__part.html#ac6e2dfa7178b8bed91baea3543961a86">mount</a> = carry_map.carry_mount;</div>
<div class="line"><a id="l01768" name="l01768"></a><span class="lineno"> 1768</span>                carried_part.<a class="code hl_variable" href="structvehicle__part.html#a4ec92872c2987158066d420e8e76f280">carry_names</a>.push( unique_id );</div>
<div class="line"><a id="l01769" name="l01769"></a><span class="lineno"> 1769</span>                carried_part.<a class="code hl_variable" href="structvehicle__part.html#a27a7cba7268cb7d3550ed2b7c9adc323">enabled</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01770" name="l01770"></a><span class="lineno"> 1770</span>                carried_part.<a class="code hl_function" href="structvehicle__part.html#a6689ab7eaf82f33b3ea821d9d8396507">set_flag</a>( <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaae9d481422fe656a547014c35ff6f2045">vehicle_part::carried_flag</a> );</div>
<div class="line"><a id="l01771" name="l01771"></a><span class="lineno"> 1771</span>                <span class="comment">//give each carried part a tracked_flag so that we can re-enable overmap tracking on unloading if necessary</span></div>
<div class="line"><a id="l01772" name="l01772"></a><span class="lineno"> 1772</span>                <span class="keywordflow">if</span>( carry_veh-&gt;<a class="code hl_variable" href="classvehicle.html#abe5f5ade599d2cd543a3e3c3860bc051">tracking_on</a> ) {</div>
<div class="line"><a id="l01773" name="l01773"></a><span class="lineno"> 1773</span>                    carried_part.<a class="code hl_function" href="structvehicle__part.html#a6689ab7eaf82f33b3ea821d9d8396507">set_flag</a>( <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaa1a8e65b4ccc32e8654446910b6a5c51e">vehicle_part::tracked_flag</a> );</div>
<div class="line"><a id="l01774" name="l01774"></a><span class="lineno"> 1774</span>                }</div>
<div class="line"><a id="l01775" name="l01775"></a><span class="lineno"> 1775</span>                <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ carry_map.rack_part ].set_flag( <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaa9d1a55e312464c51ecce1f0e187c4287">vehicle_part::carrying_flag</a> );</div>
<div class="line"><a id="l01776" name="l01776"></a><span class="lineno"> 1776</span>            }</div>
<div class="line"><a id="l01777" name="l01777"></a><span class="lineno"> 1777</span> </div>
<div class="line"><a id="l01778" name="l01778"></a><span class="lineno"> 1778</span>            <span class="keyword">const</span> std::pair&lt;std::unordered_multimap&lt;point, zone_data&gt;::iterator, std::unordered_multimap&lt;point, zone_data&gt;::iterator&gt;</div>
<div class="line"><a id="l01779" name="l01779"></a><span class="lineno"> 1779</span>            zones_on_point = carry_veh-&gt;<a class="code hl_variable" href="classvehicle.html#a90b6f438b5ae343dab2b131c64293584">loot_zones</a>.equal_range( carry_map.old_mount );</div>
<div class="line"><a id="l01780" name="l01780"></a><span class="lineno"> 1780</span>            <span class="keywordflow">for</span>( std::unordered_multimap&lt;point, zone_data&gt;::const_iterator it = zones_on_point.first;</div>
<div class="line"><a id="l01781" name="l01781"></a><span class="lineno"> 1781</span>                 it != zones_on_point.second; ++it ) {</div>
<div class="line"><a id="l01782" name="l01782"></a><span class="lineno"> 1782</span>                new_zones.emplace( carry_map.carry_mount, it-&gt;second );</div>
<div class="line"><a id="l01783" name="l01783"></a><span class="lineno"> 1783</span>            }</div>
<div class="line"><a id="l01784" name="l01784"></a><span class="lineno"> 1784</span>        }</div>
<div class="line"><a id="l01785" name="l01785"></a><span class="lineno"> 1785</span> </div>
<div class="line"><a id="l01786" name="l01786"></a><span class="lineno"> 1786</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;new_zone : new_zones ) {</div>
<div class="line"><a id="l01787" name="l01787"></a><span class="lineno"> 1787</span>            <a class="code hl_function" href="classzone__manager.html#a11e6a0ecb51069e3c334b6f4b9c5c6bc">zone_manager::get_manager</a>().<a class="code hl_function" href="classzone__manager.html#a9f4190e4f0475d9ea0e621629e2ad1ad">create_vehicle_loot_zone</a>(</div>
<div class="line"><a id="l01788" name="l01788"></a><span class="lineno"> 1788</span>                *<span class="keyword">this</span>, new_zone.first, new_zone.second );</div>
<div class="line"><a id="l01789" name="l01789"></a><span class="lineno"> 1789</span>        }</div>
<div class="line"><a id="l01790" name="l01790"></a><span class="lineno"> 1790</span> </div>
<div class="line"><a id="l01791" name="l01791"></a><span class="lineno"> 1791</span>        <span class="comment">// Now that we&#39;ve added zones to this vehicle, we need to make sure their positions</span></div>
<div class="line"><a id="l01792" name="l01792"></a><span class="lineno"> 1792</span>        <span class="comment">// update when we next interact with them</span></div>
<div class="line"><a id="l01793" name="l01793"></a><span class="lineno"> 1793</span>        <a class="code hl_variable" href="classvehicle.html#af6c2314d1f5b83a04771abea3109a137">zones_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01794" name="l01794"></a><span class="lineno"> 1794</span> </div>
<div class="line"><a id="l01795" name="l01795"></a><span class="lineno"> 1795</span>        <span class="comment">//~ %1$s is the vehicle being loaded onto the bicycle rack</span></div>
<div class="line"><a id="l01796" name="l01796"></a><span class="lineno"> 1796</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You load the %1$s on the rack&quot;</span> ), carry_veh-&gt;<a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l01797" name="l01797"></a><span class="lineno"> 1797</span>        <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01798" name="l01798"></a><span class="lineno"> 1798</span>        here.<a class="code hl_function" href="classmap.html#ac7f59f4bc6fad84a8d8c0ddd4e023734">destroy_vehicle</a>( carry_veh );</div>
<div class="line"><a id="l01799" name="l01799"></a><span class="lineno"> 1799</span>        here.<a class="code hl_variable" href="classmap.html#ad05f776b59564ff618ece546f9190dbc">dirty_vehicle_list</a>.insert( <span class="keyword">this</span> );</div>
<div class="line"><a id="l01800" name="l01800"></a><span class="lineno"> 1800</span>        here.<a class="code hl_function" href="classmap.html#a0ecdaa7f32bcc5dbcb162ae76ad863c9">set_transparency_cache_dirty</a>( <a class="code hl_variable" href="classvehicle.html#a34630935e46860003c616e0522316f02">sm_pos</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> );</div>
<div class="line"><a id="l01801" name="l01801"></a><span class="lineno"> 1801</span>        here.<a class="code hl_function" href="classmap.html#abfe32fc67ef91fe15105c31b5ef884ab">set_seen_cache_dirty</a>( <a class="code hl_variable" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a> );</div>
<div class="line"><a id="l01802" name="l01802"></a><span class="lineno"> 1802</span>        <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l01803" name="l01803"></a><span class="lineno"> 1803</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01804" name="l01804"></a><span class="lineno"> 1804</span>        <span class="comment">//~ %1$s is the vehicle being loaded onto the bicycle rack</span></div>
<div class="line"><a id="l01805" name="l01805"></a><span class="lineno"> 1805</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You can&#39;t get the %1$s on the rack&quot;</span> ), carry_veh-&gt;<a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l01806" name="l01806"></a><span class="lineno"> 1806</span>    }</div>
<div class="line"><a id="l01807" name="l01807"></a><span class="lineno"> 1807</span>    <span class="keywordflow">return</span> found_all_parts;</div>
<div class="line"><a id="l01808" name="l01808"></a><span class="lineno"> 1808</span>}</div>
<div class="ttc" id="aclassmap_html_a0ecdaa7f32bcc5dbcb162ae76ad863c9"><div class="ttname"><a href="classmap.html#a0ecdaa7f32bcc5dbcb162ae76ad863c9">map::set_transparency_cache_dirty</a></div><div class="ttdeci">void set_transparency_cache_dirty(const int zlev)</div><div class="ttdoc">Sets a dirty flag on the a given cache.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00393">map.h:393</a></div></div>
<div class="ttc" id="aclassmap_html_abfe32fc67ef91fe15105c31b5ef884ab"><div class="ttname"><a href="classmap.html#abfe32fc67ef91fe15105c31b5ef884ab">map::set_seen_cache_dirty</a></div><div class="ttdeci">void set_seen_cache_dirty(const tripoint change_location)</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00409">map.h:409</a></div></div>
<div class="ttc" id="aclassmap_html_ad05f776b59564ff618ece546f9190dbc"><div class="ttname"><a href="classmap.html#ad05f776b59564ff618ece546f9190dbc">map::dirty_vehicle_list</a></div><div class="ttdeci">std::set&lt; vehicle * &gt; dirty_vehicle_list</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l01620">map.h:1620</a></div></div>
<div class="ttc" id="aclassvehicle_html_aa2123b10ad5b9401069f9b5774361878"><div class="ttname"><a href="classvehicle.html#aa2123b10ad5b9401069f9b5774361878">vehicle::mount_to_tripoint</a></div><div class="ttdeci">tripoint mount_to_tripoint(const point &amp;mount) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03012">vehicle.cpp:3012</a></div></div>
<div class="ttc" id="aclassvehicle_html_af6c2314d1f5b83a04771abea3109a137"><div class="ttname"><a href="classvehicle.html#af6c2314d1f5b83a04771abea3109a137">vehicle::zones_dirty</a></div><div class="ttdeci">bool zones_dirty</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01948">vehicle.h:1948</a></div></div>
<div class="ttc" id="aclasszone__manager_html_a9f4190e4f0475d9ea0e621629e2ad1ad"><div class="ttname"><a href="classzone__manager.html#a9f4190e4f0475d9ea0e621629e2ad1ad">zone_manager::create_vehicle_loot_zone</a></div><div class="ttdeci">void create_vehicle_loot_zone(class vehicle &amp;vehicle, const point &amp;mount_point, zone_data &amp;new_zone)</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8cpp_source.html#l00960">clzones.cpp:960</a></div></div>
<div class="ttc" id="anamespaceunits_html_a9ce2bc1618fa4acf9f9e98effd9f1ae0"><div class="ttname"><a href="namespaceunits.html#a9ce2bc1618fa4acf9f9e98effd9f1ae0">units::to_degrees</a></div><div class="ttdeci">constexpr double to_degrees(const units::angle v)</div><div class="ttdef"><b>Definition:</b> <a href="units__angle_8h_source.html#l00036">units_angle.h:36</a></div></div>
<div class="ttc" id="anamespaceunits_html_ab81e1b17660904a3d8baed6859e79337"><div class="ttname"><a href="namespaceunits.html#ab81e1b17660904a3d8baed6859e79337">units::fmod</a></div><div class="ttdeci">quantity&lt; V, U &gt; fmod(quantity&lt; V, U &gt; num, quantity&lt; V, U &gt; den)</div><div class="ttdef"><b>Definition:</b> <a href="units__def_8h_source.html#l00142">units_def.h:142</a></div></div>
<div class="ttc" id="apoint_8h_html_a7e55b593cf990cd4c6afb92cf74373cd"><div class="ttname"><a href="point_8h.html#a7e55b593cf990cd4c6afb92cf74373cd">four_cardinal_directions</a></div><div class="ttdeci">static constexpr std::array&lt; point, 4 &gt; four_cardinal_directions</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00376">point.h:376</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a4ec92872c2987158066d420e8e76f280"><div class="ttname"><a href="structvehicle__part.html#a4ec92872c2987158066d420e8e76f280">vehicle_part::carry_names</a></div><div class="ttdeci">std::stack&lt; std::string, std::vector&lt; std::string &gt; &gt; carry_names</div><div class="ttdoc">Stack of the containing vehicle's name, when it it stored as part of another vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00226">vehicle.h:226</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a6689ab7eaf82f33b3ea821d9d8396507"><div class="ttname"><a href="structvehicle__part.html#a6689ab7eaf82f33b3ea821d9d8396507">vehicle_part::set_flag</a></div><div class="ttdeci">int set_flag(const int flag) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00211">vehicle.h:211</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a6944258e64f01a23d5ea254ad2fe71eaa1a8e65b4ccc32e8654446910b6a5c51e"><div class="ttname"><a href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaa1a8e65b4ccc32e8654446910b6a5c51e">vehicle_part::tracked_flag</a></div><div class="ttdeci">@ tracked_flag</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00196">vehicle.h:196</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a6944258e64f01a23d5ea254ad2fe71eaa9d1a55e312464c51ecce1f0e187c4287"><div class="ttname"><a href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaa9d1a55e312464c51ecce1f0e187c4287">vehicle_part::carrying_flag</a></div><div class="ttdeci">@ carrying_flag</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00195">vehicle.h:195</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a6944258e64f01a23d5ea254ad2fe71eaae9d481422fe656a547014c35ff6f2045"><div class="ttname"><a href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaae9d481422fe656a547014c35ff6f2045">vehicle_part::carried_flag</a></div><div class="ttdeci">@ carried_flag</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00194">vehicle.h:194</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="vehicle_8cpp_source.html#l02745">all_parts_at_location()</a>, <a class="el" href="vehicle_8h_source.html#l00194">vehicle_part::carried_flag</a>, <a class="el" href="vehicle_8h_source.html#l00226">vehicle_part::carry_names</a>, <a class="el" href="vehicle_8h_source.html#l00195">vehicle_part::carrying_flag</a>, <a class="el" href="clzones_8cpp_source.html#l00960">zone_manager::create_vehicle_loot_zone()</a>, <a class="el" href="map_8cpp_source.html#l00384">map::destroy_vehicle()</a>, <a class="el" href="tileray_8cpp_source.html#l00074">tileray::dir()</a>, <a class="el" href="map_8h_source.html#l01620">map::dirty_vehicle_list</a>, <a class="el" href="vehicle_8h_source.html#l00411">vehicle_part::enabled</a>, <a class="el" href="vehicle_8h_source.html#l01891">face</a>, <a class="el" href="units__def_8h_source.html#l00142">units::fmod()</a>, <a class="el" href="point_8h_source.html#l00358">four_adjacent_offsets</a>, <a class="el" href="point_8h_source.html#l00376">four_cardinal_directions</a>, <a class="el" href="clzones_8cpp_source.html#l00125">zone_manager::get_manager()</a>, <a class="el" href="map_8cpp_source.html#l00141">get_map()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l05939">invalidate_towing()</a>, <a class="el" href="vehicle_8h_source.html#l01806">loot_zones</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="vehicle_8h_source.html#l00367">vehicle_part::mount</a>, <a class="el" href="vehicle_8cpp_source.html#l03012">mount_to_tripoint()</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="fmtlib__format-inl_8h_source.html#l01223">detail::normalize()</a>, <a class="el" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="vehicle_8h_source.html#l00211">vehicle_part::set_flag()</a>, <a class="el" href="map_8h_source.html#l00409">map::set_seen_cache_dirty()</a>, <a class="el" href="map_8h_source.html#l00393">map::set_transparency_cache_dirty()</a>, <a class="el" href="vehicle_8h_source.html#l01844">sm_pos</a>, <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>, <a class="el" href="units__angle_8h_source.html#l00036">units::to_degrees()</a>, <a class="el" href="vehicle_8h_source.html#l00196">vehicle_part::tracked_flag</a>, <a class="el" href="vehicle_8h_source.html#l01932">tracking_on</a>, <a class="el" href="point_8h_source.html#l00273">tripoint_zero</a>, <a class="el" href="point_8h_source.html#l00152">tripoint::z</a>, and <a class="el" href="vehicle_8h_source.html#l01948">zones_dirty</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l01622">try_to_rack_nearby_vehicle()</a>.</p>

</div>
</div>
<a id="a9c80007e6bb704ab32bd6c8adafff454" name="a9c80007e6bb704ab32bd6c8adafff454"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c80007e6bb704ab32bd6c8adafff454">&#9670;&nbsp;</a></span>mod_hp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::mod_hp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;&#160;</td>
          <td class="paramname"><em>pt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>qty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7a">damage_type</a>&#160;</td>
          <td class="paramname"><em>dt</em> = <code><a class="el" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa72a55d767311e078564d195eefa4cafc">DT_NULL</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apply damage to part constrained by range [0,durability] possibly destroying it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pt</td><td>Part being damaged </td></tr>
    <tr><td class="paramname">qty</td><td>maximum amount by which to adjust damage (negative permissible) </td></tr>
    <tr><td class="paramname">dt</td><td>type of damage which may be passed to base <a class="el" href="classitem.html#aadbabbc9e7714db37f32b7c6f7406d8f">item::on_damage</a> callback </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether part was destroyed as a result of the damage </dd></dl>

<p class="definition">Definition at line <a class="el" href="vehicle__part_8cpp_source.html#l00540">540</a> of file <a class="el" href="vehicle__part_8cpp_source.html">vehicle_part.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>{</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>    <span class="keywordflow">if</span>( pt.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_variable" href="classvpart__info.html#aeb9e00627b8cb80d28fb1419e7f0928a">durability</a> &gt; 0 ) {</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>        <span class="keywordflow">return</span> pt.<a class="code hl_variable" href="structvehicle__part.html#a5122e284fbcf0f14f0e6022e01b5b574">base</a>.<a class="code hl_function" href="classitem.html#a58837e07450321aa679d9f00140762bd">mod_damage</a>( -( pt.<a class="code hl_variable" href="structvehicle__part.html#a5122e284fbcf0f14f0e6022e01b5b574">base</a>.<a class="code hl_function" href="classitem.html#a216affc51dde30087c21fa5689a5c5e9">max_damage</a>() * qty / pt.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_variable" href="classvpart__info.html#aeb9e00627b8cb80d28fb1419e7f0928a">durability</a> ), dt );</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>    }</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>}</div>
<div class="ttc" id="aclassitem_html_a216affc51dde30087c21fa5689a5c5e9"><div class="ttname"><a href="classitem.html#a216affc51dde30087c21fa5689a5c5e9">item::max_damage</a></div><div class="ttdeci">int max_damage() const</div><div class="ttdoc">Maximum amount of damage to an item (state before destroyed)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06066">item.cpp:6066</a></div></div>
<div class="ttc" id="aclassitem_html_a58837e07450321aa679d9f00140762bd"><div class="ttname"><a href="classitem.html#a58837e07450321aa679d9f00140762bd">item::mod_damage</a></div><div class="ttdeci">bool mod_damage(int qty, damage_type dt)</div><div class="ttdoc">Apply damage to const itemrained by min_damage and max_damage.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06076">item.cpp:6076</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l00440">vehicle_part::base</a>, <a class="el" href="veh__type_8h_source.html#l00173">vpart_info::durability</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00519">vehicle_part::info()</a>, <a class="el" href="item_8cpp_source.html#l06066">item::max_damage()</a>, and <a class="el" href="item_8cpp_source.html#l06076">item::mod_damage()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06437">damage_direct()</a>, <a class="el" href="vehicle_8cpp_source.html#l06409">explode_fuel()</a>, and <a class="el" href="vehicle_8cpp_source.html#l00936">smash()</a>.</p>

</div>
</div>
<a id="aa2123b10ad5b9401069f9b5774361878" name="aa2123b10ad5b9401069f9b5774361878"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2123b10ad5b9401069f9b5774361878">&#9670;&nbsp;</a></span>mount_to_tripoint() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtripoint.html">tripoint</a> vehicle::mount_to_tripoint </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>mount</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03012">3012</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03013" name="l03013"></a><span class="lineno"> 3013</span>{</div>
<div class="line"><a id="l03014" name="l03014"></a><span class="lineno"> 3014</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#aa2123b10ad5b9401069f9b5774361878">mount_to_tripoint</a>( mount, <a class="code hl_variable" href="point_8h.html#a0ee2195dcb488ae55fbf4316f5011172">point_zero</a> );</div>
<div class="line"><a id="l03015" name="l03015"></a><span class="lineno"> 3015</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l03012">mount_to_tripoint()</a>, and <a class="el" href="point_8h_source.html#l00274">point_zero</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l01654">merge_rackable_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l03012">mount_to_tripoint()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l01532">open_or_close()</a>.</p>

</div>
</div>
<a id="a9e6f28b13e285237d6e0a2bc5812d78c" name="a9e6f28b13e285237d6e0a2bc5812d78c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e6f28b13e285237d6e0a2bc5812d78c">&#9670;&nbsp;</a></span>mount_to_tripoint() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtripoint.html">tripoint</a> vehicle::mount_to_tripoint </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>mount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03017">3017</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03018" name="l03018"></a><span class="lineno"> 3018</span>{</div>
<div class="line"><a id="l03019" name="l03019"></a><span class="lineno"> 3019</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> mnt_translated;</div>
<div class="line"><a id="l03020" name="l03020"></a><span class="lineno"> 3020</span>    <a class="code hl_function" href="classvehicle.html#ad45ae53f6326f7fde4d8e59848470457">coord_translate</a>( <a class="code hl_variable" href="classvehicle.html#a709da7b758c18d51b79311eea6eaca59">pivot_rotation</a>[0], <a class="code hl_variable" href="classvehicle.html#afd4e8e8471b17450205d827dee8a41a5">pivot_anchor</a>[ 0 ], mount + offset, mnt_translated );</div>
<div class="line"><a id="l03021" name="l03021"></a><span class="lineno"> 3021</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>() + mnt_translated;</div>
<div class="line"><a id="l03022" name="l03022"></a><span class="lineno"> 3022</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l02988">coord_translate()</a>, <a class="el" href="vehicle_8cpp_source.html#l03101">global_pos3()</a>, <a class="el" href="vehicle_8h_source.html#l01889">pivot_anchor</a>, and <a class="el" href="vehicle_8h_source.html#l01883">pivot_rotation</a>.</p>

</div>
</div>
<a id="a0e308fcc9e8b3b08ccf622825e94c9cc" name="a0e308fcc9e8b3b08ccf622825e94c9cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e308fcc9e8b3b08ccf622825e94c9cc">&#9670;&nbsp;</a></span>move_vec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrl__vec2d.html">rl_vec2d</a> vehicle::move_vec </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__move_8cpp_source.html#l01214">1214</a> of file <a class="el" href="vehicle__move_8cpp_source.html">vehicle_move.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span>{</div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="vehicle__move_8cpp.html#a0039ad830efb94637bdc1dd04d0fa60c">angle_to_vec</a>( <a class="code hl_variable" href="classvehicle.html#a8bbdfb41ea75fdc007feab08e2137aa2">move</a>.<a class="code hl_function" href="classtileray.html#a91ed01227e1754597024f4916f8bd6af">dir</a>() );</div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle__move_8cpp_source.html#l01208">angle_to_vec()</a>, <a class="el" href="tileray_8cpp_source.html#l00074">tileray::dir()</a>, and <a class="el" href="vehicle_8h_source.html#l01893">move</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l01332">game::calc_driving_offset()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01187">forward_velocity()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01158">possibly_recover_from_skid()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l01195">velo_vec()</a>.</p>

</div>
</div>
<a id="a7787708a8d2096bcd114b955e5a3d56f" name="a7787708a8d2096bcd114b955e5a3d56f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7787708a8d2096bcd114b955e5a3d56f">&#9670;&nbsp;</a></span>net_battery_charge_rate_w()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::net_battery_charge_rate_w </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04579">4579</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04580" name="l04580"></a><span class="lineno"> 4580</span>{</div>
<div class="line"><a id="l04581" name="l04581"></a><span class="lineno"> 4581</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a6fcd5bf8a5698a23f77e614473d0e938">total_engine_epower_w</a>() + <a class="code hl_function" href="classvehicle.html#a26e100291b7fb8dd5574463e7112713a">total_alternator_epower_w</a>() + <a class="code hl_function" href="classvehicle.html#a4883ea970c6da7b880d9f16f2590a1bd">total_accessory_epower_w</a>() +</div>
<div class="line"><a id="l04582" name="l04582"></a><span class="lineno"> 4582</span>           <a class="code hl_function" href="classvehicle.html#a9263dc6065a0c465c2716a3964a55bb8">total_solar_epower_w</a>() + <a class="code hl_function" href="classvehicle.html#ad83675cd116674b36d3dd8e094b7a28b">total_wind_epower_w</a>() + <a class="code hl_function" href="classvehicle.html#a7d7bd918d812d83f1fe3705f45b8615f">total_water_wheel_epower_w</a>();</div>
<div class="line"><a id="l04583" name="l04583"></a><span class="lineno"> 4583</span>}</div>
<div class="ttc" id="aclassvehicle_html_a26e100291b7fb8dd5574463e7112713a"><div class="ttname"><a href="classvehicle.html#a26e100291b7fb8dd5574463e7112713a">vehicle::total_alternator_epower_w</a></div><div class="ttdeci">int total_alternator_epower_w() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04482">vehicle.cpp:4482</a></div></div>
<div class="ttc" id="aclassvehicle_html_a4883ea970c6da7b880d9f16f2590a1bd"><div class="ttname"><a href="classvehicle.html#a4883ea970c6da7b880d9f16f2590a1bd">vehicle::total_accessory_epower_w</a></div><div class="ttdeci">int total_accessory_epower_w() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04473">vehicle.cpp:4473</a></div></div>
<div class="ttc" id="aclassvehicle_html_a6fcd5bf8a5698a23f77e614473d0e938"><div class="ttname"><a href="classvehicle.html#a6fcd5bf8a5698a23f77e614473d0e938">vehicle::total_engine_epower_w</a></div><div class="ttdeci">int total_engine_epower_w() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04496">vehicle.cpp:4496</a></div></div>
<div class="ttc" id="aclassvehicle_html_a7d7bd918d812d83f1fe3705f45b8615f"><div class="ttname"><a href="classvehicle.html#a7d7bd918d812d83f1fe3705f45b8615f">vehicle::total_water_wheel_epower_w</a></div><div class="ttdeci">int total_water_wheel_epower_w() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04561">vehicle.cpp:4561</a></div></div>
<div class="ttc" id="aclassvehicle_html_a9263dc6065a0c465c2716a3964a55bb8"><div class="ttname"><a href="classvehicle.html#a9263dc6065a0c465c2716a3964a55bb8">vehicle::total_solar_epower_w</a></div><div class="ttdeci">int total_solar_epower_w() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04514">vehicle.cpp:4514</a></div></div>
<div class="ttc" id="aclassvehicle_html_ad83675cd116674b36d3dd8e094b7a28b"><div class="ttname"><a href="classvehicle.html#ad83675cd116674b36d3dd8e094b7a28b">vehicle::total_wind_epower_w</a></div><div class="ttdeci">int total_wind_epower_w() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04536">vehicle.cpp:4536</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l04473">total_accessory_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04482">total_alternator_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04496">total_engine_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04514">total_solar_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04561">total_water_wheel_epower_w()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04536">total_wind_epower_w()</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l01355">veh_interact::calc_overview()</a>, and <a class="el" href="vehicle__display_8cpp_source.html#l00398">print_fuel_indicator()</a>.</p>

</div>
</div>
<a id="ac026aecb053a772b6d5902fe180166c5" name="ac026aecb053a772b6d5902fe180166c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac026aecb053a772b6d5902fe180166c5">&#9670;&nbsp;</a></span>next_part_to_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::next_part_to_close </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>outside</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the index of the next part to close at <code>p</code> </p>
<p >The next part to open is the first opened part in the list of parts at part <code>p</code>'s coordinates. Returns -1 for no more to close.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>Part who's coordinates provide the location to check </td></tr>
    <tr><td class="paramname">outside</td><td>If true, give parts that can be closed from outside only </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>part index or -1 if no part </dd></dl>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02645">2645</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02646" name="l02646"></a><span class="lineno"> 2646</span>{</div>
<div class="line"><a id="l02647" name="l02647"></a><span class="lineno"> 2647</span>    std::vector&lt;int&gt; parts_here = <a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].mount, <span class="keyword">true</span> );</div>
<div class="line"><a id="l02648" name="l02648"></a><span class="lineno"> 2648</span> </div>
<div class="line"><a id="l02649" name="l02649"></a><span class="lineno"> 2649</span>    <span class="comment">// We want reverse, since we close the outermost thing first (curtains), and then the innermost thing (door)</span></div>
<div class="line"><a id="l02650" name="l02650"></a><span class="lineno"> 2650</span>    <span class="keywordflow">for</span>( std::vector&lt;int&gt;::reverse_iterator part_it = parts_here.rbegin();</div>
<div class="line"><a id="l02651" name="l02651"></a><span class="lineno"> 2651</span>         part_it != parts_here.rend();</div>
<div class="line"><a id="l02652" name="l02652"></a><span class="lineno"> 2652</span>         ++part_it ) {</div>
<div class="line"><a id="l02653" name="l02653"></a><span class="lineno"> 2653</span> </div>
<div class="line"><a id="l02654" name="l02654"></a><span class="lineno"> 2654</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( *part_it, <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea812fb775f113f8e70717ffcf2dacf15f">VPFLAG_OPENABLE</a> )</div>
<div class="line"><a id="l02655" name="l02655"></a><span class="lineno"> 2655</span>            &amp;&amp; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ *part_it ].is_available()</div>
<div class="line"><a id="l02656" name="l02656"></a><span class="lineno"> 2656</span>            &amp;&amp; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[*part_it].<a class="code hl_function" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">open</a> == 1</div>
<div class="line"><a id="l02657" name="l02657"></a><span class="lineno"> 2657</span>            &amp;&amp; ( !outside || !<a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( *part_it, <span class="stringliteral">&quot;OPENCLOSE_INSIDE&quot;</span> ) ) ) {</div>
<div class="line"><a id="l02658" name="l02658"></a><span class="lineno"> 2658</span>            <span class="keywordflow">return</span> *part_it;</div>
<div class="line"><a id="l02659" name="l02659"></a><span class="lineno"> 2659</span>        }</div>
<div class="line"><a id="l02660" name="l02660"></a><span class="lineno"> 2660</span>    }</div>
<div class="line"><a id="l02661" name="l02661"></a><span class="lineno"> 2661</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l02662" name="l02662"></a><span class="lineno"> 2662</span>}</div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307ea812fb775f113f8e70717ffcf2dacf15f"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea812fb775f113f8e70717ffcf2dacf15f">VPFLAG_OPENABLE</a></div><div class="ttdeci">@ VPFLAG_OPENABLE</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00044">veh_type.h:44</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle__use_8cpp_source.html#l01463">open()</a>, <a class="el" href="vehicle_8cpp_source.html#l02875">part_flag()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>, and <a class="el" href="veh__type_8h_source.html#l00044">VPFLAG_OPENABLE</a>.</p>

<p class="reference">Referenced by <a class="el" href="gates_8cpp_source.html#l00255">doors::close_door()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00173">control_doors()</a>.</p>

</div>
</div>
<a id="aa3c434ad827415575b465480af310487" name="aa3c434ad827415575b465480af310487"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3c434ad827415575b465480af310487">&#9670;&nbsp;</a></span>next_part_to_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::next_part_to_open </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>outside</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the index of the next part to open at <code>p</code>'s location. </p>
<p >The next part to open is the first unopened part in the reversed list of parts at part <code>p</code>'s coordinates.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>Part who's coordinates provide the location to check </td></tr>
    <tr><td class="paramname">outside</td><td>If true, give parts that can be opened from outside only </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>part index or -1 if no part </dd></dl>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02664">2664</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02665" name="l02665"></a><span class="lineno"> 2665</span>{</div>
<div class="line"><a id="l02666" name="l02666"></a><span class="lineno"> 2666</span>    std::vector&lt;int&gt; parts_here = <a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].mount, <span class="keyword">true</span> );</div>
<div class="line"><a id="l02667" name="l02667"></a><span class="lineno"> 2667</span> </div>
<div class="line"><a id="l02668" name="l02668"></a><span class="lineno"> 2668</span>    <span class="comment">// We want forwards, since we open the innermost thing first (curtains), and then the innermost thing (door)</span></div>
<div class="line"><a id="l02669" name="l02669"></a><span class="lineno"> 2669</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;elem : parts_here ) {</div>
<div class="line"><a id="l02670" name="l02670"></a><span class="lineno"> 2670</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( elem, <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea812fb775f113f8e70717ffcf2dacf15f">VPFLAG_OPENABLE</a> ) &amp;&amp; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ elem ].is_available() &amp;&amp; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[elem].<a class="code hl_function" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">open</a> == 0 &amp;&amp;</div>
<div class="line"><a id="l02671" name="l02671"></a><span class="lineno"> 2671</span>            ( !outside || !<a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( elem, <span class="stringliteral">&quot;OPENCLOSE_INSIDE&quot;</span> ) ) ) {</div>
<div class="line"><a id="l02672" name="l02672"></a><span class="lineno"> 2672</span>            <span class="keywordflow">return</span> elem;</div>
<div class="line"><a id="l02673" name="l02673"></a><span class="lineno"> 2673</span>        }</div>
<div class="line"><a id="l02674" name="l02674"></a><span class="lineno"> 2674</span>    }</div>
<div class="line"><a id="l02675" name="l02675"></a><span class="lineno"> 2675</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l02676" name="l02676"></a><span class="lineno"> 2676</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle__use_8cpp_source.html#l01463">open()</a>, <a class="el" href="vehicle_8cpp_source.html#l02875">part_flag()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>, and <a class="el" href="veh__type_8h_source.html#l00044">VPFLAG_OPENABLE</a>.</p>

<p class="reference">Referenced by <a class="el" href="gates_8cpp_source.html#l00255">doors::close_door()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00173">control_doors()</a>, <a class="el" href="avatar__action_8cpp_source.html#l00090">avatar_action::move()</a>, and <a class="el" href="handle__action_8cpp_source.html#l00510">open()</a>.</p>

</div>
</div>
<a id="a49867729934087d3589ea7e9ca2ad75b" name="a49867729934087d3589ea7e9ca2ad75b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49867729934087d3589ea7e9ca2ad75b">&#9670;&nbsp;</a></span>no_towing_slack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::no_towing_slack </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06005">6005</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06006" name="l06006"></a><span class="lineno"> 6006</span>{</div>
<div class="line"><a id="l06007" name="l06007"></a><span class="lineno"> 6007</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a4cc6247530a16020db73b3af28e0024e">get_towed</a>() ) {</div>
<div class="line"><a id="l06008" name="l06008"></a><span class="lineno"> 6008</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l06009" name="l06009"></a><span class="lineno"> 6009</span>    }</div>
<div class="line"><a id="l06010" name="l06010"></a><span class="lineno"> 6010</span>    <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="namespacedetail.html#ac4c79842ec549e8b02145d43a1fbc330a6a992d5529f459a44fee58c733255e86">index</a> = <a class="code hl_function" href="classvehicle.html#adb9be9ceedf5b5922879fad1646da8fb">get_tow_part</a>();</div>
<div class="line"><a id="l06011" name="l06011"></a><span class="lineno"> 6011</span>    <span class="keywordflow">if</span>( index == -1 ) {</div>
<div class="line"><a id="l06012" name="l06012"></a><span class="lineno"> 6012</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;towing data exists but no towing part&quot;</span> );</div>
<div class="line"><a id="l06013" name="l06013"></a><span class="lineno"> 6013</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l06014" name="l06014"></a><span class="lineno"> 6014</span>    }</div>
<div class="line"><a id="l06015" name="l06015"></a><span class="lineno"> 6015</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> towing_point = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.getabs( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( index ) );</div>
<div class="line"><a id="l06016" name="l06016"></a><span class="lineno"> 6016</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a4cc6247530a16020db73b3af28e0024e">get_towed</a>()-&gt;<a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a5f5e060b9d76c409ae99c49fbdeda88f">get_towed_by</a>() ) {</div>
<div class="line"><a id="l06017" name="l06017"></a><span class="lineno"> 6017</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;vehicle %s has data for a towed vehicle, but that towed vehicle does not have %s listed as tower&quot;</span>,</div>
<div class="line"><a id="l06018" name="l06018"></a><span class="lineno"> 6018</span>                  <a class="code hl_function" href="classvehicle.html#ace5c25f3faffd8848491570cfb89f086">disp_name</a>(), <a class="code hl_function" href="classvehicle.html#ace5c25f3faffd8848491570cfb89f086">disp_name</a>() );</div>
<div class="line"><a id="l06019" name="l06019"></a><span class="lineno"> 6019</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l06020" name="l06020"></a><span class="lineno"> 6020</span>    }</div>
<div class="line"><a id="l06021" name="l06021"></a><span class="lineno"> 6021</span>    <span class="keywordtype">int</span> other_index = <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a4cc6247530a16020db73b3af28e0024e">get_towed</a>()-&gt;<a class="code hl_function" href="classvehicle.html#adb9be9ceedf5b5922879fad1646da8fb">get_tow_part</a>();</div>
<div class="line"><a id="l06022" name="l06022"></a><span class="lineno"> 6022</span>    <span class="keywordflow">if</span>( other_index == -1 ) {</div>
<div class="line"><a id="l06023" name="l06023"></a><span class="lineno"> 6023</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;towing data exists but no towing part&quot;</span> );</div>
<div class="line"><a id="l06024" name="l06024"></a><span class="lineno"> 6024</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l06025" name="l06025"></a><span class="lineno"> 6025</span>    }</div>
<div class="line"><a id="l06026" name="l06026"></a><span class="lineno"> 6026</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> towed_point = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.getabs( <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a4cc6247530a16020db73b3af28e0024e">get_towed</a>()-&gt;<a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( other_index ) );</div>
<div class="line"><a id="l06027" name="l06027"></a><span class="lineno"> 6027</span>    <span class="keywordflow">if</span>( towing_point == <a class="code hl_variable" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a> || towed_point == <a class="code hl_variable" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a> ) {</div>
<div class="line"><a id="l06028" name="l06028"></a><span class="lineno"> 6028</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;towing data exists but no towing part&quot;</span> );</div>
<div class="line"><a id="l06029" name="l06029"></a><span class="lineno"> 6029</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l06030" name="l06030"></a><span class="lineno"> 6030</span>    }</div>
<div class="line"><a id="l06031" name="l06031"></a><span class="lineno"> 6031</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( towing_point, towed_point ) &gt;= 8;</div>
<div class="line"><a id="l06032" name="l06032"></a><span class="lineno"> 6032</span> </div>
<div class="line"><a id="l06033" name="l06033"></a><span class="lineno"> 6033</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00029">disp_name()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l05874">get_tow_part()</a>, <a class="el" href="vehicle_8h_source.html#l00158">towing_data::get_towed()</a>, <a class="el" href="vehicle_8h_source.html#l00154">towing_data::get_towed_by()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="vehicle_8h_source.html#l01887">tow_data</a>, and <a class="el" href="point_8h_source.html#l00273">tripoint_zero</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05745">do_towing_move()</a>.</p>

</div>
</div>
<a id="a8bdc82052e35e69dd5f65e1177a13a95" name="a8bdc82052e35e69dd5f65e1177a13a95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bdc82052e35e69dd5f65e1177a13a95">&#9670;&nbsp;</a></span>noise_and_smoke()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::noise_and_smoke </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>load</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classtime__duration.html">time_duration</a>&#160;</td>
          <td class="paramname"><em>time</em> = <code>1_turns</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate noise or smoke from a vehicle with engines turned on load = how hard the engines are working, from 0.0 until 1.0 time = how many seconds to generated smoke for. </p>
<p >TODO: handle other engine types: muscle / animal / wind / coal / ...</p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03644">3644</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03645" name="l03645"></a><span class="lineno"> 3645</span>{</div>
<div class="line"><a id="l03646" name="l03646"></a><span class="lineno"> 3646</span>    <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;std::pair&lt;std::string, int&gt;, 8&gt; <a class="code hl_namespace" href="namespacesounds.html">sounds</a> = { {</div>
<div class="line"><a id="l03647" name="l03647"></a><span class="lineno"> 3647</span>            { <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;hmm&quot;</span> ), 0 }, { <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;hummm!&quot;</span> ), 15 },</div>
<div class="line"><a id="l03648" name="l03648"></a><span class="lineno"> 3648</span>            { <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;whirrr!&quot;</span> ), 30 }, { <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;vroom!&quot;</span> ), 60 },</div>
<div class="line"><a id="l03649" name="l03649"></a><span class="lineno"> 3649</span>            { <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;roarrr!&quot;</span> ), 100 }, { <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;ROARRR!&quot;</span> ), 140 },</div>
<div class="line"><a id="l03650" name="l03650"></a><span class="lineno"> 3650</span>            { <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;BRRROARRR!&quot;</span> ), 180 }, { <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;BRUMBRUMBRUMBRUM!&quot;</span> ), INT_MAX }</div>
<div class="line"><a id="l03651" name="l03651"></a><span class="lineno"> 3651</span>        }</div>
<div class="line"><a id="l03652" name="l03652"></a><span class="lineno"> 3652</span>    };</div>
<div class="line"><a id="l03653" name="l03653"></a><span class="lineno"> 3653</span>    <span class="keyword">const</span> std::string heli_noise = <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;WUMPWUMPWUMP!&quot;</span> );</div>
<div class="line"><a id="l03654" name="l03654"></a><span class="lineno"> 3654</span>    <span class="keywordtype">double</span> <a class="code hl_enumvalue" href="enums_8h.html#a18cc141c508bf4f277abaf39fc9c3d96aaaddc3454ccbefbb2d8d8461f8f7f481">noise</a> = 0.0;</div>
<div class="line"><a id="l03655" name="l03655"></a><span class="lineno"> 3655</span>    <span class="keywordtype">double</span> mufflesmoke = 0.0;</div>
<div class="line"><a id="l03656" name="l03656"></a><span class="lineno"> 3656</span>    <span class="keywordtype">double</span> muffle = 1.0;</div>
<div class="line"><a id="l03657" name="l03657"></a><span class="lineno"> 3657</span>    <span class="keywordtype">double</span> m = 0.0;</div>
<div class="line"><a id="l03658" name="l03658"></a><span class="lineno"> 3658</span>    <span class="keywordtype">int</span> exhaust_part = -1;</div>
<div class="line"><a id="l03659" name="l03659"></a><span class="lineno"> 3659</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">get_avail_parts</a>( <span class="stringliteral">&quot;MUFFLER&quot;</span> ) ) {</div>
<div class="line"><a id="l03660" name="l03660"></a><span class="lineno"> 3660</span>        m = 1.0 - ( 1.0 - vp.info().bonus / 100.0 ) * vp.part().health_percent();</div>
<div class="line"><a id="l03661" name="l03661"></a><span class="lineno"> 3661</span>        <span class="keywordflow">if</span>( m &lt; muffle ) {</div>
<div class="line"><a id="l03662" name="l03662"></a><span class="lineno"> 3662</span>            muffle = m;</div>
<div class="line"><a id="l03663" name="l03663"></a><span class="lineno"> 3663</span>            exhaust_part = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( vp.part_index() );</div>
<div class="line"><a id="l03664" name="l03664"></a><span class="lineno"> 3664</span>        }</div>
<div class="line"><a id="l03665" name="l03665"></a><span class="lineno"> 3665</span>    }</div>
<div class="line"><a id="l03666" name="l03666"></a><span class="lineno"> 3666</span> </div>
<div class="line"><a id="l03667" name="l03667"></a><span class="lineno"> 3667</span>    <span class="keywordtype">bool</span> bad_filter = <span class="keyword">false</span>;</div>
<div class="line"><a id="l03668" name="l03668"></a><span class="lineno"> 3668</span>    <span class="keywordtype">bool</span> combustion = <span class="keyword">false</span>;</div>
<div class="line"><a id="l03669" name="l03669"></a><span class="lineno"> 3669</span> </div>
<div class="line"><a id="l03670" name="l03670"></a><span class="lineno"> 3670</span>    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> e = 0; e &lt; <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.size(); e++ ) {</div>
<div class="line"><a id="l03671" name="l03671"></a><span class="lineno"> 3671</span>        <span class="keywordtype">int</span> p = <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e];</div>
<div class="line"><a id="l03672" name="l03672"></a><span class="lineno"> 3672</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a4d73f86ddc3aafe3231c33c098b9d6c8">is_engine_on</a>( e ) &amp;&amp;  <a class="code hl_function" href="classvehicle.html#af615cefb430470fc97b60635a382bc7a">engine_fuel_left</a>( e ) ) {</div>
<div class="line"><a id="l03673" name="l03673"></a><span class="lineno"> 3673</span>            <span class="comment">// convert current engine load to units of watts/40K</span></div>
<div class="line"><a id="l03674" name="l03674"></a><span class="lineno"> 3674</span>            <span class="comment">// then spew more smoke and make more noise as the engine load increases</span></div>
<div class="line"><a id="l03675" name="l03675"></a><span class="lineno"> 3675</span>            <span class="keywordtype">int</span> part_watts = <a class="code hl_function" href="classvehicle.html#a5246baeafa78272d858f6cce466579e4">part_vpower_w</a>( p, <span class="keyword">true</span> );</div>
<div class="line"><a id="l03676" name="l03676"></a><span class="lineno"> 3676</span>            <span class="keywordtype">double</span> max_stress = <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( part_watts / 40000.0 );</div>
<div class="line"><a id="l03677" name="l03677"></a><span class="lineno"> 3677</span>            <span class="keywordtype">double</span> cur_stress = <a class="code hl_function" href="namespaceammo__effects.html#a266026a76ad1cf3377d0b7c6efc36dd7">load</a> / 1000.0 * max_stress;</div>
<div class="line"><a id="l03678" name="l03678"></a><span class="lineno"> 3678</span>            <span class="comment">// idle stress = 1.0 resulting in nominal working engine noise = engine_noise_factor()</span></div>
<div class="line"><a id="l03679" name="l03679"></a><span class="lineno"> 3679</span>            <span class="comment">// and preventing noise = 0</span></div>
<div class="line"><a id="l03680" name="l03680"></a><span class="lineno"> 3680</span>            cur_stress = std::max( cur_stress, 1.0 );</div>
<div class="line"><a id="l03681" name="l03681"></a><span class="lineno"> 3681</span>            <span class="keywordtype">double</span> part_noise = cur_stress * <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( p ).<a class="code hl_function" href="classvpart__info.html#addce91efb443f2c5051c95c686659621">engine_noise_factor</a>();</div>
<div class="line"><a id="l03682" name="l03682"></a><span class="lineno"> 3682</span> </div>
<div class="line"><a id="l03683" name="l03683"></a><span class="lineno"> 3683</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( p ).has_flag( <span class="stringliteral">&quot;E_COMBUSTION&quot;</span> ) ) {</div>
<div class="line"><a id="l03684" name="l03684"></a><span class="lineno"> 3684</span>                combustion = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03685" name="l03685"></a><span class="lineno"> 3685</span>                <span class="keywordtype">double</span> health = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].health_percent();</div>
<div class="line"><a id="l03686" name="l03686"></a><span class="lineno"> 3686</span>                <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ p ].base.faults.count( <a class="code hl_variable" href="vehicle_8cpp.html#a34a9a7092d079c64e664da1e486ddfc0">fault_filter_fuel</a> ) ) {</div>
<div class="line"><a id="l03687" name="l03687"></a><span class="lineno"> 3687</span>                    health = 0.0;</div>
<div class="line"><a id="l03688" name="l03688"></a><span class="lineno"> 3688</span>                }</div>
<div class="line"><a id="l03689" name="l03689"></a><span class="lineno"> 3689</span>                <span class="keywordflow">if</span>( health &lt; <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( p ).engine_backfire_threshold() &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 50 + 150 * health ) ) {</div>
<div class="line"><a id="l03690" name="l03690"></a><span class="lineno"> 3690</span>                    <a class="code hl_function" href="classvehicle.html#a9b0acd63b60b974f0ac842263d5ec58f">backfire</a>( e );</div>
<div class="line"><a id="l03691" name="l03691"></a><span class="lineno"> 3691</span>                }</div>
<div class="line"><a id="l03692" name="l03692"></a><span class="lineno"> 3692</span>                <span class="keywordtype">double</span> j = cur_stress * to_turns&lt;int&gt;( time ) * muffle * 1000;</div>
<div class="line"><a id="l03693" name="l03693"></a><span class="lineno"> 3693</span> </div>
<div class="line"><a id="l03694" name="l03694"></a><span class="lineno"> 3694</span>                <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ p ].base.faults.count( <a class="code hl_variable" href="vehicle_8cpp.html#a0c862ae2786ce8dbc0d67cb723601d2d">fault_filter_air</a> ) ) {</div>
<div class="line"><a id="l03695" name="l03695"></a><span class="lineno"> 3695</span>                    bad_filter = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03696" name="l03696"></a><span class="lineno"> 3696</span>                    j *= j;</div>
<div class="line"><a id="l03697" name="l03697"></a><span class="lineno"> 3697</span>                }</div>
<div class="line"><a id="l03698" name="l03698"></a><span class="lineno"> 3698</span> </div>
<div class="line"><a id="l03699" name="l03699"></a><span class="lineno"> 3699</span>                <span class="keywordflow">if</span>( ( exhaust_part == -1 ) &amp;&amp; <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> ) {</div>
<div class="line"><a id="l03700" name="l03700"></a><span class="lineno"> 3700</span>                    <a class="code hl_function" href="classvehicle.html#a9f15b9fb1b1f72f1baf6dacfc5b05206">spew_field</a>( j, p, <a class="code hl_variable" href="field__type_8cpp.html#a742b7a3f2bec99838055a58c542ecddf">fd_smoke</a>, bad_filter ? <a class="code hl_variable" href="field__type_8cpp.html#a742b7a3f2bec99838055a58c542ecddf">fd_smoke</a>.<a class="code hl_function" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code hl_function" href="structfield__type.html#ac4cd20f3310c1eab8e30250ad6171502">get_max_intensity</a>() : 1 );</div>
<div class="line"><a id="l03701" name="l03701"></a><span class="lineno"> 3701</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03702" name="l03702"></a><span class="lineno"> 3702</span>                    mufflesmoke += j;</div>
<div class="line"><a id="l03703" name="l03703"></a><span class="lineno"> 3703</span>                }</div>
<div class="line"><a id="l03704" name="l03704"></a><span class="lineno"> 3704</span>                part_noise = ( part_noise + max_stress * 3 + 5 ) * muffle;</div>
<div class="line"><a id="l03705" name="l03705"></a><span class="lineno"> 3705</span>            }</div>
<div class="line"><a id="l03706" name="l03706"></a><span class="lineno"> 3706</span>            <a class="code hl_enumvalue" href="enums_8h.html#a18cc141c508bf4f277abaf39fc9c3d96aaaddc3454ccbefbb2d8d8461f8f7f481">noise</a> = std::max( <a class="code hl_enumvalue" href="enums_8h.html#a18cc141c508bf4f277abaf39fc9c3d96aaaddc3454ccbefbb2d8d8461f8f7f481">noise</a>, part_noise ); <span class="comment">// Only the loudest engine counts.</span></div>
<div class="line"><a id="l03707" name="l03707"></a><span class="lineno"> 3707</span>        }</div>
<div class="line"><a id="l03708" name="l03708"></a><span class="lineno"> 3708</span>    }</div>
<div class="line"><a id="l03709" name="l03709"></a><span class="lineno"> 3709</span>    <span class="keywordflow">if</span>( !combustion ) {</div>
<div class="line"><a id="l03710" name="l03710"></a><span class="lineno"> 3710</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03711" name="l03711"></a><span class="lineno"> 3711</span>    }<span class="comment"></span></div>
<div class="line"><a id="l03712" name="l03712"></a><span class="lineno"> 3712</span><span class="comment">    /// TODO: handle other engine types: muscle / animal / wind / coal / ...</span></div>
<div class="line"><a id="l03713" name="l03713"></a><span class="lineno"> 3713</span><span class="comment"></span> </div>
<div class="line"><a id="l03714" name="l03714"></a><span class="lineno"> 3714</span>    <span class="keywordflow">if</span>( exhaust_part != -1 &amp;&amp; <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> ) {</div>
<div class="line"><a id="l03715" name="l03715"></a><span class="lineno"> 3715</span>        <a class="code hl_function" href="classvehicle.html#a9f15b9fb1b1f72f1baf6dacfc5b05206">spew_field</a>( mufflesmoke, exhaust_part, <a class="code hl_variable" href="field__type_8cpp.html#a742b7a3f2bec99838055a58c542ecddf">fd_smoke</a>,</div>
<div class="line"><a id="l03716" name="l03716"></a><span class="lineno"> 3716</span>                    bad_filter ? <a class="code hl_variable" href="field__type_8cpp.html#a742b7a3f2bec99838055a58c542ecddf">fd_smoke</a>.<a class="code hl_function" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code hl_function" href="structfield__type.html#ac4cd20f3310c1eab8e30250ad6171502">get_max_intensity</a>() : 1 );</div>
<div class="line"><a id="l03717" name="l03717"></a><span class="lineno"> 3717</span>    }</div>
<div class="line"><a id="l03718" name="l03718"></a><span class="lineno"> 3718</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a292961ab33a42bf495d19b8692f6f105">is_rotorcraft</a>() ) {</div>
<div class="line"><a id="l03719" name="l03719"></a><span class="lineno"> 3719</span>        <a class="code hl_enumvalue" href="enums_8h.html#a18cc141c508bf4f277abaf39fc9c3d96aaaddc3454ccbefbb2d8d8461f8f7f481">noise</a> *= 2;</div>
<div class="line"><a id="l03720" name="l03720"></a><span class="lineno"> 3720</span>    }</div>
<div class="line"><a id="l03721" name="l03721"></a><span class="lineno"> 3721</span>    <span class="comment">// Cap engine noise to avoid deafening.</span></div>
<div class="line"><a id="l03722" name="l03722"></a><span class="lineno"> 3722</span>    <a class="code hl_enumvalue" href="enums_8h.html#a18cc141c508bf4f277abaf39fc9c3d96aaaddc3454ccbefbb2d8d8461f8f7f481">noise</a> = std::min( <a class="code hl_enumvalue" href="enums_8h.html#a18cc141c508bf4f277abaf39fc9c3d96aaaddc3454ccbefbb2d8d8461f8f7f481">noise</a>, 100.0 );</div>
<div class="line"><a id="l03723" name="l03723"></a><span class="lineno"> 3723</span>    <span class="comment">// Even a vehicle with engines off will make noise traveling at high speeds</span></div>
<div class="line"><a id="l03724" name="l03724"></a><span class="lineno"> 3724</span>    <a class="code hl_enumvalue" href="enums_8h.html#a18cc141c508bf4f277abaf39fc9c3d96aaaddc3454ccbefbb2d8d8461f8f7f481">noise</a> = std::max( <a class="code hl_enumvalue" href="enums_8h.html#a18cc141c508bf4f277abaf39fc9c3d96aaaddc3454ccbefbb2d8d8461f8f7f481">noise</a>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( <a class="code hl_function" href="namespaceunits.html#a0b9218914b883c6c31f5af68deaafc2e">std::fabs</a>( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> / 500.0 ) ) );</div>
<div class="line"><a id="l03725" name="l03725"></a><span class="lineno"> 3725</span>    <span class="keywordtype">int</span> lvl = 0;</div>
<div class="line"><a id="l03726" name="l03726"></a><span class="lineno"> 3726</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) &amp;&amp; <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 30 ) &lt; <a class="code hl_enumvalue" href="enums_8h.html#a18cc141c508bf4f277abaf39fc9c3d96aaaddc3454ccbefbb2d8d8461f8f7f481">noise</a> ) {</div>
<div class="line"><a id="l03727" name="l03727"></a><span class="lineno"> 3727</span>        <span class="keywordflow">while</span>( <a class="code hl_enumvalue" href="enums_8h.html#a18cc141c508bf4f277abaf39fc9c3d96aaaddc3454ccbefbb2d8d8461f8f7f481">noise</a> &gt; <a class="code hl_namespace" href="namespacesounds.html">sounds</a>[lvl].<a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00aa9f0e61a137d86aa9db53465e0801612">second</a> ) {</div>
<div class="line"><a id="l03728" name="l03728"></a><span class="lineno"> 3728</span>            lvl++;</div>
<div class="line"><a id="l03729" name="l03729"></a><span class="lineno"> 3729</span>        }</div>
<div class="line"><a id="l03730" name="l03730"></a><span class="lineno"> 3730</span>    }</div>
<div class="line"><a id="l03731" name="l03731"></a><span class="lineno"> 3731</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;VEH NOISE final: %d&quot;</span>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_enumvalue" href="enums_8h.html#a18cc141c508bf4f277abaf39fc9c3d96aaaddc3454ccbefbb2d8d8461f8f7f481">noise</a> ) );</div>
<div class="line"><a id="l03732" name="l03732"></a><span class="lineno"> 3732</span>    <a class="code hl_variable" href="classvehicle.html#ae3281409ce9ec7e878f9e22427e815e5">vehicle_noise</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span><span class="keyword">&gt;</span>( <a class="code hl_enumvalue" href="enums_8h.html#a18cc141c508bf4f277abaf39fc9c3d96aaaddc3454ccbefbb2d8d8461f8f7f481">noise</a> );</div>
<div class="line"><a id="l03733" name="l03733"></a><span class="lineno"> 3733</span>    <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>(), <a class="code hl_enumvalue" href="enums_8h.html#a18cc141c508bf4f277abaf39fc9c3d96aaaddc3454ccbefbb2d8d8461f8f7f481">noise</a>, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a74bcc1e0384a916f56360c649f543f3a">sounds::sound_t::movement</a>,</div>
<div class="line"><a id="l03734" name="l03734"></a><span class="lineno"> 3734</span>                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <a class="code hl_function" href="classvehicle.html#a292961ab33a42bf495d19b8692f6f105">is_rotorcraft</a>() ? heli_noise : <a class="code hl_namespace" href="namespacesounds.html">sounds</a>[lvl].first ), <span class="keyword">true</span> );</div>
<div class="line"><a id="l03735" name="l03735"></a><span class="lineno"> 3735</span>}</div>
<div class="ttc" id="acalendar_8h_html_a5db9490f8316b22d7c367c5a563a2f00aa9f0e61a137d86aa9db53465e0801612"><div class="ttname"><a href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00aa9f0e61a137d86aa9db53465e0801612">clipped_unit::second</a></div><div class="ttdeci">@ second</div></div>
<div class="ttc" id="aclassint__id_html_a4796245d3cd6e0283670698a98d46ae9"><div class="ttname"><a href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">int_id::obj</a></div><div class="ttdeci">const T &amp; obj() const</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00026">ammo_effect.cpp:26</a></div></div>
<div class="ttc" id="aclassvehicle_html_a9b0acd63b60b974f0ac842263d5ec58f"><div class="ttname"><a href="classvehicle.html#a9b0acd63b60b974f0ac842263d5ec58f">vehicle::backfire</a></div><div class="ttdeci">void backfire(int e) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01126">vehicle.cpp:1126</a></div></div>
<div class="ttc" id="aclassvehicle_html_a9f15b9fb1b1f72f1baf6dacfc5b05206"><div class="ttname"><a href="classvehicle.html#a9f15b9fb1b1f72f1baf6dacfc5b05206">vehicle::spew_field</a></div><div class="ttdeci">void spew_field(double joules, int part, field_type_id type, int intensity=1)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03623">vehicle.cpp:3623</a></div></div>
<div class="ttc" id="aclassvehicle_html_ae3281409ce9ec7e878f9e22427e815e5"><div class="ttname"><a href="classvehicle.html#ae3281409ce9ec7e878f9e22427e815e5">vehicle::vehicle_noise</a></div><div class="ttdeci">unsigned char vehicle_noise</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01951">vehicle.h:1951</a></div></div>
<div class="ttc" id="aclassvpart__info_html_addce91efb443f2c5051c95c686659621"><div class="ttname"><a href="classvpart__info.html#addce91efb443f2c5051c95c686659621">vpart_info::engine_noise_factor</a></div><div class="ttdeci">int engine_noise_factor() const</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8cpp_source.html#l00862">veh_type.cpp:862</a></div></div>
<div class="ttc" id="aenums_8h_html_a18cc141c508bf4f277abaf39fc9c3d96aaaddc3454ccbefbb2d8d8461f8f7f481"><div class="ttname"><a href="enums_8h.html#a18cc141c508bf4f277abaf39fc9c3d96aaaddc3454ccbefbb2d8d8461f8f7f481">distraction_type::noise</a></div><div class="ttdeci">@ noise</div></div>
<div class="ttc" id="afield__type_8cpp_html_a742b7a3f2bec99838055a58c542ecddf"><div class="ttname"><a href="field__type_8cpp.html#a742b7a3f2bec99838055a58c542ecddf">fd_smoke</a></div><div class="ttdeci">field_type_id fd_smoke</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00346">field_type.cpp:346</a></div></div>
<div class="ttc" id="anamespacesounds_html"><div class="ttname"><a href="namespacesounds.html">sounds</a></div><div class="ttdef"><b>Definition:</b> <a href="sounds_8h_source.html#l00020">sounds.h:21</a></div></div>
<div class="ttc" id="anamespaceunits_html_a0b9218914b883c6c31f5af68deaafc2e"><div class="ttname"><a href="namespaceunits.html#a0b9218914b883c6c31f5af68deaafc2e">units::fabs</a></div><div class="ttdeci">quantity&lt; V, U &gt; fabs(quantity&lt; V, U &gt; q)</div><div class="ttdef"><b>Definition:</b> <a href="units__def_8h_source.html#l00136">units_def.h:136</a></div></div>
<div class="ttc" id="astructfield__type_html_ac4cd20f3310c1eab8e30250ad6171502"><div class="ttname"><a href="structfield__type.html#ac4cd20f3310c1eab8e30250ad6171502">field_type::get_max_intensity</a></div><div class="ttdeci">int get_max_intensity() const</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8h_source.html#l00268">field_type.h:268</a></div></div>
<div class="ttc" id="atranslations_8h_html_a0b3ab525ec6b450b2487e7644255fa7c"><div class="ttname"><a href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a></div><div class="ttdeci">#define translate_marker(x)</div><div class="ttdoc">Marks a string literal to be extracted for translation.</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00030">translations.h:30</a></div></div>
<div class="ttc" id="avehicle_8cpp_html_a34a9a7092d079c64e664da1e486ddfc0"><div class="ttname"><a href="vehicle_8cpp.html#a34a9a7092d079c64e664da1e486ddfc0">fault_filter_fuel</a></div><div class="ttdeci">static const fault_id fault_filter_fuel(&quot;fault_engine_filter_fuel&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="vehicle_8cpp_source.html#l01126">backfire()</a>, <a class="el" href="vehicle_8cpp_source.html#l03230">engine_fuel_left()</a>, <a class="el" href="veh__type_8cpp_source.html#l00862">vpart_info::engine_noise_factor()</a>, <a class="el" href="vehicle_8h_source.html#l01930">engine_on</a>, <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, <a class="el" href="units__def_8h_source.html#l00136">units::fabs()</a>, <a class="el" href="vehicle_8cpp.html#a0c862ae2786ce8dbc0d67cb723601d2d">fault_filter_air</a>, <a class="el" href="vehicle_8cpp.html#a34a9a7092d079c64e664da1e486ddfc0">fault_filter_fuel</a>, <a class="el" href="field__type_8cpp_source.html#l00346">fd_smoke</a>, <a class="el" href="vehicle_8cpp_source.html#l02678">get_avail_parts()</a>, <a class="el" href="field__type_8h_source.html#l00268">field_type::get_max_intensity()</a>, <a class="el" href="vehicle_8cpp_source.html#l03101">global_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l01087">is_engine_on()</a>, <a class="el" href="vehicle_8cpp_source.html#l04017">is_rotorcraft()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00147">ammo_effects::load()</a>, <a class="el" href="enums_8h_source.html#l00264">m_debug</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a74bcc1e0384a916f56360c649f543f3a">sounds::movement</a>, <a class="el" href="enums_8h.html#a18cc141c508bf4f277abaf39fc9c3d96aaaddc3454ccbefbb2d8d8461f8f7f481">noise</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00026">int_id&lt; T &gt;::obj()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8cpp_source.html#l01149">part_vpower_w()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00aa9f0e61a137d86aa9db53465e0801612">second</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, <a class="el" href="vehicle_8cpp_source.html#l03623">spew_field()</a>, <a class="el" href="translations_8h_source.html#l00030">translate_marker</a>, <a class="el" href="vehicle_8h_source.html#l01951">vehicle_noise</a>, and <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05033">idle()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>.</p>

</div>
</div>
<a id="afe589c810323ad50368e4a3f42914ef4" name="afe589c810323ad50368e4a3f42914ef4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe589c810323ad50368e4a3f42914ef4">&#9670;&nbsp;</a></span>on_move()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::on_move </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05096">5096</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05097" name="l05097"></a><span class="lineno"> 5097</span>{</div>
<div class="line"><a id="l05098" name="l05098"></a><span class="lineno"> 5098</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;TRANSFORM_TERRAIN&quot;</span>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l05099" name="l05099"></a><span class="lineno"> 5099</span>        <a class="code hl_function" href="classvehicle.html#a45a1410dc6e76021f7ed69ba82e93fe8">transform_terrain</a>();</div>
<div class="line"><a id="l05100" name="l05100"></a><span class="lineno"> 5100</span>    }</div>
<div class="line"><a id="l05101" name="l05101"></a><span class="lineno"> 5101</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;SCOOP&quot;</span>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l05102" name="l05102"></a><span class="lineno"> 5102</span>        <a class="code hl_function" href="classvehicle.html#a555d22bca89b0f11d8477c7df6711d24">operate_scoop</a>();</div>
<div class="line"><a id="l05103" name="l05103"></a><span class="lineno"> 5103</span>    }</div>
<div class="line"><a id="l05104" name="l05104"></a><span class="lineno"> 5104</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;PLANTER&quot;</span>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l05105" name="l05105"></a><span class="lineno"> 5105</span>        <a class="code hl_function" href="classvehicle.html#a2ecd7bbfce4b780111a1cbf5d8251d9b">operate_planter</a>();</div>
<div class="line"><a id="l05106" name="l05106"></a><span class="lineno"> 5106</span>    }</div>
<div class="line"><a id="l05107" name="l05107"></a><span class="lineno"> 5107</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;REAPER&quot;</span>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l05108" name="l05108"></a><span class="lineno"> 5108</span>        <a class="code hl_function" href="classvehicle.html#a25da50ff11a0bbdb949f12cf2e62e5d3">operate_reaper</a>();</div>
<div class="line"><a id="l05109" name="l05109"></a><span class="lineno"> 5109</span>    }</div>
<div class="line"><a id="l05110" name="l05110"></a><span class="lineno"> 5110</span> </div>
<div class="line"><a id="l05111" name="l05111"></a><span class="lineno"> 5111</span>    <a class="code hl_variable" href="classvehicle.html#a7769b4dac262f6ff8bd328eb1b8f022c">occupied_cache_time</a> = <a class="code hl_variable" href="namespacecalendar.html#ae25f99fbff61e25df40b5b26bcedee8c">calendar::before_time_starts</a>;</div>
<div class="line"><a id="l05112" name="l05112"></a><span class="lineno"> 5112</span>}</div>
<div class="ttc" id="aclassvehicle_html_a25da50ff11a0bbdb949f12cf2e62e5d3"><div class="ttname"><a href="classvehicle.html#a25da50ff11a0bbdb949f12cf2e62e5d3">vehicle::operate_reaper</a></div><div class="ttdeci">void operate_reaper()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01299">vehicle_use.cpp:1299</a></div></div>
<div class="ttc" id="aclassvehicle_html_a2ecd7bbfce4b780111a1cbf5d8251d9b"><div class="ttname"><a href="classvehicle.html#a2ecd7bbfce4b780111a1cbf5d8251d9b">vehicle::operate_planter</a></div><div class="ttdeci">void operate_planter()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01343">vehicle_use.cpp:1343</a></div></div>
<div class="ttc" id="aclassvehicle_html_a45a1410dc6e76021f7ed69ba82e93fe8"><div class="ttname"><a href="classvehicle.html#a45a1410dc6e76021f7ed69ba82e93fe8">vehicle::transform_terrain</a></div><div class="ttdeci">void transform_terrain()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01264">vehicle_use.cpp:1264</a></div></div>
<div class="ttc" id="aclassvehicle_html_a555d22bca89b0f11d8477c7df6711d24"><div class="ttname"><a href="classvehicle.html#a555d22bca89b0f11d8477c7df6711d24">vehicle::operate_scoop</a></div><div class="ttdeci">void operate_scoop()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01380">vehicle_use.cpp:1380</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="calendar_8cpp_source.html#l00025">calendar::before_time_starts</a>, <a class="el" href="vehicle_8cpp_source.html#l02558">has_part()</a>, <a class="el" href="vehicle_8h_source.html#l01849">occupied_cache_time</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01343">operate_planter()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01299">operate_reaper()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01380">operate_scoop()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l01264">transform_terrain()</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>.</p>

</div>
</div>
<a id="a9d96053cfef6f4cb5db1b7c74c6da067" name="a9d96053cfef6f4cb5db1b7c74c6da067"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d96053cfef6f4cb5db1b7c74c6da067">&#9670;&nbsp;</a></span>open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::open </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>part_index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens an openable part at the specified index. </p>
<p >If it's a multipart, opens all attached parts as well. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">part_index</td><td>The index in the parts list of the part to open. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01463">1463</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01464" name="l01464"></a><span class="lineno"> 1464</span>{</div>
<div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( part_index ).has_flag( <span class="stringliteral">&quot;OPENABLE&quot;</span> ) ) {</div>
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"> 1466</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Attempted to open non-openable part %d (%s) on a %s!&quot;</span>, part_index,</div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span>                  <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ part_index ].<a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>(), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"> 1469</span>        <a class="code hl_function" href="classvehicle.html#a190ccc33782a28e26089122eec15f767">open_or_close</a>( part_index, <span class="keyword">true</span> );</div>
<div class="line"><a id="l01470" name="l01470"></a><span class="lineno"> 1470</span>    }</div>
<div class="line"><a id="l01471" name="l01471"></a><span class="lineno"> 1471</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01532">open_or_close()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00173">control_doors()</a>, <a class="el" href="vehicle_8cpp_source.html#l06173">damage()</a>, <a class="el" href="vehicle_8cpp_source.html#l00386">init_state()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>, <a class="el" href="avatar__action_8cpp_source.html#l00090">avatar_action::move()</a>, <a class="el" href="vehicle_8cpp_source.html#l02645">next_part_to_close()</a>, <a class="el" href="vehicle_8cpp_source.html#l02664">next_part_to_open()</a>, <a class="el" href="handle__action_8cpp_source.html#l00510">open()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01514">open_all_at()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00082">part_color()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00055">part_id_string()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00034">part_sym()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06106">refresh_insides()</a>.</p>

</div>
</div>
<a id="a16b29a171a5a4add5b6a759e049cbcf0" name="a16b29a171a5a4add5b6a759e049cbcf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16b29a171a5a4add5b6a759e049cbcf0">&#9670;&nbsp;</a></span>open_all_at()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::open_all_at </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens everything that can be opened on the same tile as <code>p</code> </p>

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01514">1514</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01515" name="l01515"></a><span class="lineno"> 1515</span>{</div>
<div class="line"><a id="l01516" name="l01516"></a><span class="lineno"> 1516</span>    std::vector&lt;int&gt; parts_here = <a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].mount, <span class="keyword">true</span> );</div>
<div class="line"><a id="l01517" name="l01517"></a><span class="lineno"> 1517</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;elem : parts_here ) {</div>
<div class="line"><a id="l01518" name="l01518"></a><span class="lineno"> 1518</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( elem, <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea812fb775f113f8e70717ffcf2dacf15f">VPFLAG_OPENABLE</a> ) ) {</div>
<div class="line"><a id="l01519" name="l01519"></a><span class="lineno"> 1519</span>            <span class="comment">// Note that this will open multi-square and non-multipart parts in the tile. This</span></div>
<div class="line"><a id="l01520" name="l01520"></a><span class="lineno"> 1520</span>            <span class="comment">// means that adjacent open multi-square openables can still have closed stuff</span></div>
<div class="line"><a id="l01521" name="l01521"></a><span class="lineno"> 1521</span>            <span class="comment">// on same tile after this function returns</span></div>
<div class="line"><a id="l01522" name="l01522"></a><span class="lineno"> 1522</span>            <a class="code hl_function" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">open</a>( elem );</div>
<div class="line"><a id="l01523" name="l01523"></a><span class="lineno"> 1523</span>        }</div>
<div class="line"><a id="l01524" name="l01524"></a><span class="lineno"> 1524</span>    }</div>
<div class="line"><a id="l01525" name="l01525"></a><span class="lineno"> 1525</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle__use_8cpp_source.html#l01463">open()</a>, <a class="el" href="vehicle_8cpp_source.html#l02875">part_flag()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>, and <a class="el" href="veh__type_8h_source.html#l00044">VPFLAG_OPENABLE</a>.</p>

<p class="reference">Referenced by <a class="el" href="avatar__action_8cpp_source.html#l00090">avatar_action::move()</a>, and <a class="el" href="handle__action_8cpp_source.html#l00510">open()</a>.</p>

</div>
</div>
<a id="a190ccc33782a28e26089122eec15f767" name="a190ccc33782a28e26089122eec15f767"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a190ccc33782a28e26089122eec15f767">&#9670;&nbsp;</a></span>open_or_close()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::open_or_close </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>part_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>opening</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Opens or closes an openable part at the specified index based on the @opening value passed. </p>
<p >If it's a multipart, opens or closes all attached parts as well. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">part_index</td><td>The index in the parts list of the part to open or close. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01532">1532</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01533" name="l01533"></a><span class="lineno"> 1533</span>{</div>
<div class="line"><a id="l01534" name="l01534"></a><span class="lineno"> 1534</span>    <span class="comment">//find_lines_of_parts() doesn&#39;t return the part_index we passed, so we set it on it&#39;s own</span></div>
<div class="line"><a id="l01535" name="l01535"></a><span class="lineno"> 1535</span>    <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[part_index].open = opening;</div>
<div class="line"><a id="l01536" name="l01536"></a><span class="lineno"> 1536</span>    <a class="code hl_variable" href="classvehicle.html#a42aa0af38e1a54ca47855c9231aa1457">insides_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01537" name="l01537"></a><span class="lineno"> 1537</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01538" name="l01538"></a><span class="lineno"> 1538</span>    here.<a class="code hl_function" href="classmap.html#a0ecdaa7f32bcc5dbcb162ae76ad863c9">set_transparency_cache_dirty</a>( <a class="code hl_variable" href="classvehicle.html#a34630935e46860003c616e0522316f02">sm_pos</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> );</div>
<div class="line"><a id="l01539" name="l01539"></a><span class="lineno"> 1539</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> part_location = <a class="code hl_function" href="classvehicle.html#aa2123b10ad5b9401069f9b5774361878">mount_to_tripoint</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[part_index].mount );</div>
<div class="line"><a id="l01540" name="l01540"></a><span class="lineno"> 1540</span>    here.<a class="code hl_function" href="classmap.html#abfe32fc67ef91fe15105c31b5ef884ab">set_seen_cache_dirty</a>( part_location );</div>
<div class="line"><a id="l01541" name="l01541"></a><span class="lineno"> 1541</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> dist = <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( <a class="code hl_function" href="character_8cpp.html#a2fcb25d686f4a35fca374c6f71280311">get_player_character</a>().<a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>(), part_location );</div>
<div class="line"><a id="l01542" name="l01542"></a><span class="lineno"> 1542</span>    <span class="keywordflow">if</span>( dist &lt; 20 ) {</div>
<div class="line"><a id="l01543" name="l01543"></a><span class="lineno"> 1543</span>        <a class="code hl_function" href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a>( opening ? <span class="stringliteral">&quot;vehicle_open&quot;</span> : <span class="stringliteral">&quot;vehicle_close&quot;</span>,</div>
<div class="line"><a id="l01544" name="l01544"></a><span class="lineno"> 1544</span>                                 <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ part_index ].info().<a class="code hl_function" href="namespacestd_1_1this__thread.html#ad1967fe44af39a7961e35eed20166ca9">get_id</a>().str(), 100 - dist * 3 );</div>
<div class="line"><a id="l01545" name="l01545"></a><span class="lineno"> 1545</span>    }</div>
<div class="line"><a id="l01546" name="l01546"></a><span class="lineno"> 1546</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> <span class="keyword">const</span> &amp;vec : <a class="code hl_function" href="classvehicle.html#af0f69e5e031ee2c64b5e4ea5b874b584">find_lines_of_parts</a>( part_index, <span class="stringliteral">&quot;OPENABLE&quot;</span> ) ) {</div>
<div class="line"><a id="l01547" name="l01547"></a><span class="lineno"> 1547</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> <span class="keyword">const</span> &amp;partID : vec ) {</div>
<div class="line"><a id="l01548" name="l01548"></a><span class="lineno"> 1548</span>            <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[partID].open = opening;</div>
<div class="line"><a id="l01549" name="l01549"></a><span class="lineno"> 1549</span>        }</div>
<div class="line"><a id="l01550" name="l01550"></a><span class="lineno"> 1550</span>    }</div>
<div class="line"><a id="l01551" name="l01551"></a><span class="lineno"> 1551</span> </div>
<div class="line"><a id="l01552" name="l01552"></a><span class="lineno"> 1552</span>    <a class="code hl_variable" href="classvehicle.html#a62e8354926b0f973a2a0ec1db3deb997">coeff_air_changed</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01553" name="l01553"></a><span class="lineno"> 1553</span>    <a class="code hl_variable" href="classvehicle.html#ac1e6fe4cf22c08ceb542a7a3d515268b">coeff_air_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01554" name="l01554"></a><span class="lineno"> 1554</span>}</div>
<div class="ttc" id="anamespacesfx_html_a8fa2bb887ac81392fb686cc4079b5d5a"><div class="ttname"><a href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a></div><div class="ttdeci">void play_variant_sound(const std::string &amp;id, const std::string &amp;variant, int volume, units::angle angle, double pitch_min=-1.0, double pitch_max=-1.0)</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l01590">sounds.cpp:1590</a></div></div>
<div class="ttc" id="anamespacestd_1_1this__thread_html_ad1967fe44af39a7961e35eed20166ca9"><div class="ttname"><a href="namespacestd_1_1this__thread.html#ad1967fe44af39a7961e35eed20166ca9">std::this_thread::get_id</a></div><div class="ttdeci">thread::id get_id()</div><div class="ttdef"><b>Definition:</b> <a href="mingw_8thread_8h_source.html#l00125">mingw.thread.h:125</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01911">coeff_air_changed</a>, <a class="el" href="vehicle_8h_source.html#l01905">coeff_air_dirty</a>, <a class="el" href="vehicle_8cpp_source.html#l02789">find_lines_of_parts()</a>, <a class="el" href="mingw_8thread_8h_source.html#l00125">std::this_thread::get_id()</a>, <a class="el" href="map_8cpp_source.html#l00141">get_map()</a>, <a class="el" href="character_8cpp_source.html#l00381">get_player_character()</a>, <a class="el" href="vehicle_8h_source.html#l01944">insides_dirty</a>, <a class="el" href="vehicle_8cpp_source.html#l03012">mount_to_tripoint()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="sounds_8cpp_source.html#l01590">sfx::play_variant_sound()</a>, <a class="el" href="vehicle_8h_source.html#l01859">pos</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="map_8h_source.html#l00409">map::set_seen_cache_dirty()</a>, <a class="el" href="map_8h_source.html#l00393">map::set_transparency_cache_dirty()</a>, <a class="el" href="vehicle_8h_source.html#l01844">sm_pos</a>, and <a class="el" href="point_8h_source.html#l00152">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l01478">close()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00173">control_doors()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l01463">open()</a>.</p>

</div>
</div>
<a id="a2ecd7bbfce4b780111a1cbf5d8251d9b" name="a2ecd7bbfce4b780111a1cbf5d8251d9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ecd7bbfce4b780111a1cbf5d8251d9b">&#9670;&nbsp;</a></span>operate_planter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::operate_planter </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01343">1343</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span>{</div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a791413b7697a0ef434df0fe73d85b9fe">get_enabled_parts</a>( <span class="stringliteral">&quot;PLANTER&quot;</span> ) ) {</div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> planter_id = vp.part_index();</div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> loc = vp.pos();</div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>        <a class="code hl_class" href="classvehicle__stack.html">vehicle_stack</a> v = <a class="code hl_function" href="classvehicle.html#a983dd9db3cd64078b176a82289e0b260">get_items</a>( planter_id );</div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> i = v.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(); i != v.<a class="code hl_function" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(); i++ ) {</div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span>            <span class="keywordflow">if</span>( i-&gt;is_seed() ) {</div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span>                <span class="comment">// If it is an &quot;advanced model&quot; then it will avoid damaging itself or becoming damaged. It&#39;s a real feature.</span></div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span>                <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.ter( loc ) != <a class="code hl_variable" href="mapdata_8cpp.html#af636f3d89f77cfd0ebb47c3d4ecac0c1">t_dirtmound</a> &amp;&amp; vp.has_feature( <span class="stringliteral">&quot;ADVANCED_PLANTER&quot;</span> ) ) {</div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span>                    <span class="comment">//then don&#39;t put the item there.</span></div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.ter( loc ) == <a class="code hl_variable" href="mapdata_8cpp.html#af636f3d89f77cfd0ebb47c3d4ecac0c1">t_dirtmound</a> ) {</div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span>                    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.set( loc, <a class="code hl_variable" href="mapdata_8cpp.html#aa4573ce2c594834a8ced806a5099f3e3">t_dirt</a>, <a class="code hl_variable" href="mapdata_8cpp.html#a9797180f4b1ce0a7ec0254fd12cbb06d">f_plant_seed</a> );</div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.has_flag( <span class="stringliteral">&quot;PLOWABLE&quot;</span>, loc ) ) {</div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span>                    <span class="comment">//If it isn&#39;t plowable terrain, then it will most likely be damaged.</span></div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span>                    <a class="code hl_function" href="classvehicle.html#a7d539c327a7a8cb987d637f68f918cdf">damage</a>( planter_id, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 10 ), <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa5f8b46c6c239266403858fa2ae90ef23">DT_BASH</a>, <span class="keyword">false</span> );</div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span>                    <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( loc, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 10, 20 ), <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Clink&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;smash_success&quot;</span>,</div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span>                                   <span class="stringliteral">&quot;hit_vehicle&quot;</span> );</div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span>                }</div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>                <span class="keywordflow">if</span>( !i-&gt;count_by_charges() || i-&gt;charges == 1 ) {</div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span>                    i-&gt;set_age( 0_turns );</div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>                    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_item( loc, *i );</div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>                    v.<a class="code hl_function" href="classvehicle__stack.html#a7d4bd966fe8cb78325aeaa8873672146">erase</a>( i );</div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span>                    <a class="code hl_class" href="classitem.html">item</a> tmp = *i;</div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>                    tmp.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = 1;</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span>                    tmp.<a class="code hl_function" href="classitem.html#ab55a5629e6fe769a7ac314c02d25ecef">set_age</a>( 0_turns );</div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span>                    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_item( loc, tmp );</div>
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"> 1372</span>                    i-&gt;charges--;</div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span>                }</div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span>            }</div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span>        }</div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span>    }</div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span>}</div>
<div class="ttc" id="aclassitem__stack_html_a588d49cd17fbf3c64227906758940769"><div class="ttname"><a href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">item_stack::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00028">item_stack.cpp:28</a></div></div>
<div class="ttc" id="aclassitem__stack_html_ad04a969155cc139c54a6a3b4a3395454"><div class="ttname"><a href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">item_stack::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00033">item_stack.cpp:33</a></div></div>
<div class="ttc" id="aclassitem_html_ab55a5629e6fe769a7ac314c02d25ecef"><div class="ttname"><a href="classitem.html#ab55a5629e6fe769a7ac314c02d25ecef">item::set_age</a></div><div class="ttdeci">void set_age(const time_duration &amp;age)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09837">item.cpp:9837</a></div></div>
<div class="ttc" id="aclassvehicle_html_a7d539c327a7a8cb987d637f68f918cdf"><div class="ttname"><a href="classvehicle.html#a7d539c327a7a8cb987d637f68f918cdf">vehicle::damage</a></div><div class="ttdeci">int damage(int p, int dmg, damage_type type=DT_BASH, bool aimed=true)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06173">vehicle.cpp:6173</a></div></div>
<div class="ttc" id="adamage_8h_html_ae63a2cf8429f9edf77b547d34ffe4e7aa5f8b46c6c239266403858fa2ae90ef23"><div class="ttname"><a href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa5f8b46c6c239266403858fa2ae90ef23">DT_BASH</a></div><div class="ttdeci">@ DT_BASH</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00024">damage.h:24</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a9797180f4b1ce0a7ec0254fd12cbb06d"><div class="ttname"><a href="mapdata_8cpp.html#a9797180f4b1ce0a7ec0254fd12cbb06d">f_plant_seed</a></div><div class="ttdeci">furn_id f_plant_seed</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l01119">mapdata.cpp:1119</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_aa4573ce2c594834a8ced806a5099f3e3"><div class="ttname"><a href="mapdata_8cpp.html#aa4573ce2c594834a8ced806a5099f3e3">t_dirt</a></div><div class="ttdeci">ter_id t_dirt</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00625">mapdata.cpp:625</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_af636f3d89f77cfd0ebb47c3d4ecac0c1"><div class="ttname"><a href="mapdata_8cpp.html#af636f3d89f77cfd0ebb47c3d4ecac0c1">t_dirtmound</a></div><div class="ttdeci">ter_id t_dirtmound</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00625">mapdata.cpp:625</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="item__stack_8cpp_source.html#l00028">item_stack::begin()</a>, <a class="el" href="item_8h_source.html#l02195">item::charges</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::combat</a>, <a class="el" href="vehicle_8cpp_source.html#l06173">damage()</a>, <a class="el" href="damage_8h_source.html#l00024">DT_BASH</a>, <a class="el" href="item__stack_8cpp_source.html#l00033">item_stack::end()</a>, <a class="el" href="vehicle_8cpp_source.html#l00230">vehicle_stack::erase()</a>, <a class="el" href="mapdata_8cpp_source.html#l01119">f_plant_seed</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l02721">get_enabled_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l05288">get_items()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="item_8cpp_source.html#l09837">item::set_age()</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, <a class="el" href="mapdata_8cpp_source.html#l00625">t_dirt</a>, and <a class="el" href="mapdata_8cpp_source.html#l00625">t_dirtmound</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05096">on_move()</a>.</p>

</div>
</div>
<a id="a25da50ff11a0bbdb949f12cf2e62e5d3" name="a25da50ff11a0bbdb949f12cf2e62e5d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25da50ff11a0bbdb949f12cf2e62e5d3">&#9670;&nbsp;</a></span>operate_reaper()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::operate_reaper </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01299">1299</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span>{</div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a791413b7697a0ef434df0fe73d85b9fe">get_enabled_parts</a>( <span class="stringliteral">&quot;REAPER&quot;</span> ) ) {</div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> reaper_id = vp.part_index();</div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> reaper_pos = vp.pos();</div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> plant_produced = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, vp.info().bonus );</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> seed_produced = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 3 );</div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>        <span class="keyword">const</span> <a class="code hl_class" href="classunits_1_1quantity.html">units::volume</a> max_pickup_volume = vp.info().size / 20;</div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.furn( reaper_pos ) != <a class="code hl_variable" href="mapdata_8cpp.html#aaa35dcfff2e96484c28ff3112b4660b5">f_plant_harvest</a> ) {</div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span>        }</div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span>        <span class="comment">// Can&#39;t use item_stack::only_item() since there might be fertilizer</span></div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>        <a class="code hl_class" href="classmap__stack.html">map_stack</a> items = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.i_at( reaper_pos );</div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>        <a class="code hl_class" href="classcata_1_1colony_1_1colony__iterator.html">map_stack::iterator</a> <a class="code hl_function" href="namespaceiuse.html#a07b07d9e1b2e068106e3a2c779d3362c">seed</a> = std::find_if( items.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), items.<a class="code hl_function" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(), []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>            return it.is_seed();</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span>        } );</div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="namespaceiuse.html#a07b07d9e1b2e068106e3a2c779d3362c">seed</a> == items.<a class="code hl_function" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>() || <a class="code hl_function" href="namespaceiuse.html#a07b07d9e1b2e068106e3a2c779d3362c">seed</a>-&gt;typeId() == <a class="code hl_variable" href="vehicle__use_8cpp.html#a1dde15b62a88d05d0f3218beccaedc4e">itype_fungal_seeds</a> ||</div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span>            <a class="code hl_function" href="namespaceiuse.html#a07b07d9e1b2e068106e3a2c779d3362c">seed</a>-&gt;typeId() == <a class="code hl_variable" href="vehicle__use_8cpp.html#a398ef54be46ee27b157365a389e9d4e5">itype_marloss_seed</a> ) {</div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span>            <span class="comment">// Otherworldly plants, the earth-made reaper can not handle those.</span></div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span>        }</div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.furn_set( reaper_pos, <a class="code hl_variable" href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a> );</div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span>        <span class="comment">// Secure the seed type before i_clear destroys the item.</span></div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structitype.html">itype</a> &amp;seed_type = *<a class="code hl_function" href="namespaceiuse.html#a07b07d9e1b2e068106e3a2c779d3362c">seed</a>-&gt;type;</div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.i_clear( reaper_pos );</div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;i : <a class="code hl_function" href="namespaceiexamine.html#a063625d8728319f6e54a792b609f1719">iexamine::get_harvest_items</a>(</div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>                 seed_type, plant_produced, seed_produced, <span class="keyword">false</span> ) ) {</div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_item_or_charges( reaper_pos, i );</div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>        }</div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span>        <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( reaper_pos, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 10, 25 ), <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Swish&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;vehicle&quot;</span>,</div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>                       <span class="stringliteral">&quot;reaper&quot;</span> );</div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>        <span class="keywordflow">if</span>( vp.has_feature( <span class="stringliteral">&quot;CARGO&quot;</span> ) ) {</div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span>            <span class="keywordflow">for</span>( <a class="code hl_class" href="classcata_1_1colony_1_1colony__iterator.html">map_stack::iterator</a> iter = items.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(); iter != items.<a class="code hl_function" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(); ) {</div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>                <span class="keywordflow">if</span>( ( iter-&gt;volume() &lt;= max_pickup_volume ) &amp;&amp;</div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>                    <a class="code hl_function" href="classvehicle.html#a04426c7f3acf2455684972f092352cb0">add_item</a>( reaper_id, *iter ) ) {</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span>                    iter = items.<a class="code hl_function" href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">erase</a>( iter );</div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>                    ++iter;</div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>                }</div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>            }</div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span>        }</div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span>    }</div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span>}</div>
<div class="ttc" id="aclassmap__stack_html"><div class="ttname"><a href="classmap__stack.html">map_stack</a></div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00100">map.h:101</a></div></div>
<div class="ttc" id="aclassmap__stack_html_ab58ec66a7ca2e476c6d90967dccc8062"><div class="ttname"><a href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">map_stack::erase</a></div><div class="ttdeci">iterator erase(const_iterator it) override</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00147">map.cpp:147</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a98423a935af4b918d68f206e63f6cf7f"><div class="ttname"><a href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a></div><div class="ttdeci">furn_id f_null</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l01095">mapdata.cpp:1095</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_aaa35dcfff2e96484c28ff3112b4660b5"><div class="ttname"><a href="mapdata_8cpp.html#aaa35dcfff2e96484c28ff3112b4660b5">f_plant_harvest</a></div><div class="ttdeci">furn_id f_plant_harvest</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l01119">mapdata.cpp:1119</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a063625d8728319f6e54a792b609f1719"><div class="ttname"><a href="namespaceiexamine.html#a063625d8728319f6e54a792b609f1719">iexamine::get_harvest_items</a></div><div class="ttdeci">std::list&lt; item &gt; get_harvest_items(const itype &amp;type, int plant_count, int seed_count, bool byproducts)</div><div class="ttdoc">Items that appear when a generic plant is harvested.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02247">iexamine.cpp:2247</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a07b07d9e1b2e068106e3a2c779d3362c"><div class="ttname"><a href="namespaceiuse.html#a07b07d9e1b2e068106e3a2c779d3362c">iuse::seed</a></div><div class="ttdeci">int seed(player *, item *, bool, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l06003">iuse.cpp:6003</a></div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a1dde15b62a88d05d0f3218beccaedc4e"><div class="ttname"><a href="vehicle__use_8cpp.html#a1dde15b62a88d05d0f3218beccaedc4e">itype_fungal_seeds</a></div><div class="ttdeci">static const itype_id itype_fungal_seeds(&quot;fungal_seeds&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a398ef54be46ee27b157365a389e9d4e5"><div class="ttname"><a href="vehicle__use_8cpp.html#a398ef54be46ee27b157365a389e9d4e5">itype_marloss_seed</a></div><div class="ttdeci">static const itype_id itype_marloss_seed(&quot;marloss_seed&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="vehicle_8cpp_source.html#l05209">add_item()</a>, <a class="el" href="item__stack_8cpp_source.html#l00028">item_stack::begin()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::combat</a>, <a class="el" href="item__stack_8cpp_source.html#l00033">item_stack::end()</a>, <a class="el" href="map_8cpp_source.html#l00147">map_stack::erase()</a>, <a class="el" href="mapdata_8cpp_source.html#l01095">f_null</a>, <a class="el" href="mapdata_8cpp_source.html#l01119">f_plant_harvest</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l02721">get_enabled_parts()</a>, <a class="el" href="iexamine_8cpp_source.html#l02247">iexamine::get_harvest_items()</a>, <a class="el" href="vehicle__use_8cpp.html#a1dde15b62a88d05d0f3218beccaedc4e">itype_fungal_seeds</a>, <a class="el" href="vehicle__use_8cpp.html#a398ef54be46ee27b157365a389e9d4e5">itype_marloss_seed</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="iuse_8cpp_source.html#l06003">iuse::seed()</a>, and <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05096">on_move()</a>.</p>

</div>
</div>
<a id="a555d22bca89b0f11d8477c7df6711d24" name="a555d22bca89b0f11d8477c7df6711d24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a555d22bca89b0f11d8477c7df6711d24">&#9670;&nbsp;</a></span>operate_scoop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::operate_scoop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01380">1380</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01381" name="l01381"></a><span class="lineno"> 1381</span>{</div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"> 1382</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a791413b7697a0ef434df0fe73d85b9fe">get_enabled_parts</a>( <span class="stringliteral">&quot;SCOOP&quot;</span> ) ) {</div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> scoop = vp.part_index();</div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> chance_to_damage_item = 9;</div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span>        <span class="keyword">const</span> <a class="code hl_class" href="classunits_1_1quantity.html">units::volume</a> max_pickup_volume = vp.info().size / 10;</div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"> 1386</span>        <span class="keyword">const</span> std::array&lt;std::string, 4&gt; sound_msgs = {{</div>
<div class="line"><a id="l01387" name="l01387"></a><span class="lineno"> 1387</span>                <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Whirrrr&quot;</span> ), <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Ker-chunk&quot;</span> ), <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Swish&quot;</span> ), <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Cugugugugug&quot;</span> )</div>
<div class="line"><a id="l01388" name="l01388"></a><span class="lineno"> 1388</span>            }</div>
<div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span>        };</div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span>        <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( scoop ), <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 20, 35 ), <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>,</div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span>                       <a class="code hl_function" href="rng_8h.html#a265321f9012874a83b2a57ee33835617">random_entry_ref</a>( sound_msgs ), <span class="keyword">false</span>, <span class="stringliteral">&quot;vehicle&quot;</span>, <span class="stringliteral">&quot;scoop&quot;</span> );</div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span>        std::vector&lt;tripoint&gt; parts_points;</div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;current :</div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span>             <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.points_in_radius( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( scoop ), 1 ) ) {</div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span>            parts_points.push_back( current );</div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span>        }</div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;position : parts_points ) {</div>
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.mop_spills( position );</div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span>            <span class="keywordflow">if</span>( !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.has_items( position ) ) {</div>
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"> 1400</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"> 1401</span>            }</div>
<div class="line"><a id="l01402" name="l01402"></a><span class="lineno"> 1402</span>            <a class="code hl_class" href="classitem.html">item</a> *that_item_there = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"> 1403</span>            <a class="code hl_class" href="classmap__stack.html">map_stack</a> items = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.i_at( position );</div>
<div class="line"><a id="l01404" name="l01404"></a><span class="lineno"> 1404</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.has_flag( <span class="stringliteral">&quot;SEALED&quot;</span>, position ) ) {</div>
<div class="line"><a id="l01405" name="l01405"></a><span class="lineno"> 1405</span>                <span class="comment">// Ignore it. Street sweepers are not known for their ability to harvest crops.</span></div>
<div class="line"><a id="l01406" name="l01406"></a><span class="lineno"> 1406</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01407" name="l01407"></a><span class="lineno"> 1407</span>            }</div>
<div class="line"><a id="l01408" name="l01408"></a><span class="lineno"> 1408</span>            <span class="keywordflow">for</span>( <a class="code hl_class" href="classitem.html">item</a> &amp;it : items ) {</div>
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"> 1409</span>                <span class="keywordflow">if</span>( it.volume() &lt; max_pickup_volume ) {</div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"> 1410</span>                    that_item_there = &amp;it;</div>
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"> 1411</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01412" name="l01412"></a><span class="lineno"> 1412</span>                }</div>
<div class="line"><a id="l01413" name="l01413"></a><span class="lineno"> 1413</span>            }</div>
<div class="line"><a id="l01414" name="l01414"></a><span class="lineno"> 1414</span>            <span class="keywordflow">if</span>( !that_item_there ) {</div>
<div class="line"><a id="l01415" name="l01415"></a><span class="lineno"> 1415</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01416" name="l01416"></a><span class="lineno"> 1416</span>            }</div>
<div class="line"><a id="l01417" name="l01417"></a><span class="lineno"> 1417</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( chance_to_damage_item ) &amp;&amp; that_item_there-&gt;<a class="code hl_function" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>() &lt; that_item_there-&gt;<a class="code hl_function" href="classitem.html#a216affc51dde30087c21fa5689a5c5e9">max_damage</a>() ) {</div>
<div class="line"><a id="l01418" name="l01418"></a><span class="lineno"> 1418</span>                <span class="comment">//The scoop will not destroy the item, but it may damage it a bit.</span></div>
<div class="line"><a id="l01419" name="l01419"></a><span class="lineno"> 1419</span>                that_item_there-&gt;<a class="code hl_function" href="classitem.html#aca60af3c295738c2c1fddf0fd669f9a1">inc_damage</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa5f8b46c6c239266403858fa2ae90ef23">DT_BASH</a> );</div>
<div class="line"><a id="l01420" name="l01420"></a><span class="lineno"> 1420</span>                <span class="comment">//The scoop gets a lot louder when breaking an item.</span></div>
<div class="line"><a id="l01421" name="l01421"></a><span class="lineno"> 1421</span>                <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( position, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 10,</div>
<div class="line"><a id="l01422" name="l01422"></a><span class="lineno"> 1422</span>                                              that_item_there-&gt;<a class="code hl_function" href="classitem.html#a51eafbdf8b331d88b741c0c527f98eb9">volume</a>() / <a class="code hl_variable" href="namespaceunits.html#a58e7d31fbaa28a1dd45fb598f8d1fba9">units::legacy_volume_factor</a> * 2 + 10 ),</div>
<div class="line"><a id="l01423" name="l01423"></a><span class="lineno"> 1423</span>                               <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;BEEEThump&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;vehicle&quot;</span>, <span class="stringliteral">&quot;scoop_thump&quot;</span> );</div>
<div class="line"><a id="l01424" name="l01424"></a><span class="lineno"> 1424</span>            }</div>
<div class="line"><a id="l01425" name="l01425"></a><span class="lineno"> 1425</span>            <span class="comment">//This attempts to add the item to the scoop inventory and if successful, removes it from the map.</span></div>
<div class="line"><a id="l01426" name="l01426"></a><span class="lineno"> 1426</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a04426c7f3acf2455684972f092352cb0">add_item</a>( scoop, *that_item_there ) ) {</div>
<div class="line"><a id="l01427" name="l01427"></a><span class="lineno"> 1427</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.i_rem( position, that_item_there );</div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"> 1429</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01430" name="l01430"></a><span class="lineno"> 1430</span>            }</div>
<div class="line"><a id="l01431" name="l01431"></a><span class="lineno"> 1431</span>        }</div>
<div class="line"><a id="l01432" name="l01432"></a><span class="lineno"> 1432</span>    }</div>
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"> 1433</span>}</div>
<div class="ttc" id="aclassitem_html_a51eafbdf8b331d88b741c0c527f98eb9"><div class="ttname"><a href="classitem.html#a51eafbdf8b331d88b741c0c527f98eb9">item::volume</a></div><div class="ttdeci">units::volume volume(bool integral=false) const</div><div class="ttdoc">Total volume of an item accounting for all contained/integrated items NOTE: Result is rounded up to n...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04991">item.cpp:4991</a></div></div>
<div class="ttc" id="aclassitem_html_aca60af3c295738c2c1fddf0fd669f9a1"><div class="ttname"><a href="classitem.html#aca60af3c295738c2c1fddf0fd669f9a1">item::inc_damage</a></div><div class="ttdeci">bool inc_damage(damage_type dt)</div><div class="ttdoc">Increment item damage by itype::damage_scale constrained by max_damage.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06103">item.cpp:6103</a></div></div>
<div class="ttc" id="aclassitem_html_ae8a58c6fe3c80cded11d6f3ccfa548a3"><div class="ttname"><a href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">item::damage</a></div><div class="ttdeci">int damage() const</div><div class="ttdoc">How much damage has the item sustained?</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00693">item.cpp:693</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="vehicle_8cpp_source.html#l05209">add_item()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::combat</a>, <a class="el" href="item_8cpp_source.html#l00693">item::damage()</a>, <a class="el" href="damage_8h_source.html#l00024">DT_BASH</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l02721">get_enabled_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="item_8cpp_source.html#l06103">item::inc_damage()</a>, <a class="el" href="units__volume_8h_source.html#l00050">units::legacy_volume_factor</a>, <a class="el" href="item_8cpp_source.html#l06066">item::max_damage()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="rng_8h_source.html#l00149">random_entry_ref()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, and <a class="el" href="item_8cpp_source.html#l04991">item::volume()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05096">on_move()</a>.</p>

</div>
</div>
<a id="acb8f7d8485b736fe00f599bd9fe87d02" name="acb8f7d8485b736fe00f599bd9fe87d02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb8f7d8485b736fe00f599bd9fe87d02">&#9670;&nbsp;</a></span>operator=() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classvehicle.html">vehicle</a> &amp; vehicle::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classvehicle.html">vehicle</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac0481cb566495e5d3856291d69855599" name="ac0481cb566495e5d3856291d69855599"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0481cb566495e5d3856291d69855599">&#9670;&nbsp;</a></span>operator=() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classvehicle.html">vehicle</a> &amp; vehicle::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classvehicle.html">vehicle</a> &amp;&amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="acdb2ebf673a32f657ac9e29b842ee7f5" name="acdb2ebf673a32f657ac9e29b842ee7f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdb2ebf673a32f657ac9e29b842ee7f5">&#9670;&nbsp;</a></span>part()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvehicle__part.html">vehicle_part</a> &amp; vehicle::part </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>part_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06892">6892</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06893" name="l06893"></a><span class="lineno"> 6893</span>{</div>
<div class="line"><a id="l06894" name="l06894"></a><span class="lineno"> 6894</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[part_num];</div>
<div class="line"><a id="l06895" name="l06895"></a><span class="lineno"> 6895</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05183">add_charges()</a>, <a class="el" href="vehicle_8cpp_source.html#l05209">add_item()</a>, <a class="el" href="map_8cpp_source.html#l05489">map::add_splatter()</a>, <a class="el" href="inventory__ui_8cpp_source.html#l01221">inventory_selector::add_vehicle_items()</a>, <a class="el" href="vehicle_8cpp_source.html#l02534">avail_part_with_feature()</a>, <a class="el" href="lightmap_8cpp_source.html#l01224">map::build_seen_cache()</a>, <a class="el" href="vehicle_8cpp_source.html#l01271">can_mount()</a>, <a class="el" href="veh__interact_8cpp_source.html#l01753">veh_interact::can_remove_part()</a>, <a class="el" href="veh__interact_8cpp_source.html#l00536">veh_interact::cant_do()</a>, <a class="el" href="gates_8cpp_source.html#l00255">doors::close_door()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02986">veh_interact::complete_vehicle()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00577">vehicle::autodrive_controller::compute_profile()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00173">control_doors()</a>, <a class="el" href="vehicle_8cpp_source.html#l06173">damage()</a>, <a class="el" href="map_8cpp_source.html#l01098">map::displace_vehicle()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02239">veh_interact::display_veh()</a>, <a class="el" href="veh__interact_8cpp_source.html#l01979">veh_interact::do_change_shape()</a>, <a class="el" href="veh__interact_8cpp_source.html#l01842">veh_interact::do_remove()</a>, <a class="el" href="veh__interact_8cpp_source.html#l01172">veh_interact::do_repair()</a>, <a class="el" href="vehicle_8cpp_source.html#l02789">find_lines_of_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l05163">free_volume()</a>, <a class="el" href="vehicle_8cpp_source.html#l05282">get_items()</a>, <a class="el" href="grab_8cpp_source.html#l00021">game::grabbed_veh_move()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00845">handle_trap()</a>, <a class="el" href="vehicle_8cpp_source.html#l02911">index_of_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l05939">invalidate_towing()</a>, <a class="el" href="vehicle_8cpp_source.html#l06156">vpart_position::is_inside()</a>, <a class="el" href="item__location_8cpp_source.html#l00509">item_location::impl::item_on_vehicle::make_dirty()</a>, <a class="el" href="vehicle_8cpp_source.html#l07002">vehicle_part_with_feature_range&lt; feature_type &gt;::matches()</a>, <a class="el" href="vehicle_8cpp_source.html#l00240">vehicle_stack::max_volume()</a>, <a class="el" href="vehicle_8cpp_source.html#l05158">max_volume()</a>, <a class="el" href="iuse_8cpp_source.html#l05094">iuse::mop()</a>, <a class="el" href="map_8cpp_source.html#l02803">map::mop_spills()</a>, <a class="el" href="vehicle_8cpp_source.html#l06597">vpart_position::mount()</a>, <a class="el" href="avatar__action_8cpp_source.html#l00090">avatar_action::move()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02122">veh_interact::move_cursor()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l06581">vpart_reference::part()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00470">part_collision()</a>, <a class="el" href="vehicle_8cpp_source.html#l02875">part_flag()</a>, <a class="el" href="vehicle_8cpp_source.html#l02501">part_with_feature()</a>, <a class="el" href="vehicle_8cpp_source.html#l05295">place_spawn_items()</a>, <a class="el" href="map_8cpp_source.html#l04474">process_vehicle_items()</a>, <a class="el" href="vehicle_8cpp_source.html#l01974">remove_carried_flag()</a>, <a class="el" href="item__location_8cpp_source.html#l00499">item_location::impl::item_on_vehicle::remove_item()</a>, <a class="el" href="vehicle_8cpp_source.html#l05260">remove_item()</a>, <a class="el" href="vehicle_8cpp_source.html#l01990">remove_tracked_flag()</a>, <a class="el" href="vehicle_8cpp_source.html#l00151">DefaultRemovePartHandler::removed()</a>, <a class="el" href="veh__utils_8cpp_source.html#l00109">veh_utils::repair_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l02976">roof_at_part()</a>, <a class="el" href="item__location_8cpp_source.html#l00426">item_location::impl::item_on_vehicle::serialize()</a>, <a class="el" href="veh__interact_8cpp_source.html#l00111">veh_interact::serialize_activity()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01565">map::shake_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l06067">shed_loose_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l00936">smash()</a>, <a class="el" href="vehicle_8cpp_source.html#l03623">spew_field()</a>, <a class="el" href="faction__camp_8cpp_source.html#l02446">basecamp::start_garage_chop()</a>, <a class="el" href="vehicle_8cpp_source.html#l05153">stored_volume()</a>, <a class="el" href="vehicle_8cpp_source.html#l04514">total_solar_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04561">total_water_wheel_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04536">total_wind_epower_w()</a>, <a class="el" href="item__location_8cpp_source.html#l00437">item_location::impl::item_on_vehicle::unpack()</a>, <a class="el" href="veh__interact_8cpp_source.html#l00703">veh_interact::update_part_requirements()</a>, <a class="el" href="vehicle_8cpp_source.html#l06657">update_time()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l00633">unfold_vehicle_iuse::use()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01823">use_bike_rack()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01764">use_harness()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01748">use_monster_capture()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00908">vehicle_activity()</a>, and <a class="el" href="map_8cpp_source.html#l00741">map::vehicle_vehicle_collision()</a>.</p>

</div>
</div>
<a id="ae4f6d4393384b656bd9c12e14cb6e2cb" name="ae4f6d4393384b656bd9c12e14cb6e2cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4f6d4393384b656bd9c12e14cb6e2cb">&#9670;&nbsp;</a></span>part_at()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::part_at </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>dp</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02893">2893</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02894" name="l02894"></a><span class="lineno"> 2894</span>{</div>
<div class="line"><a id="l02895" name="l02895"></a><span class="lineno"> 2895</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a397b40aa92dd1fd09ee592aa279bc656">get_all_parts</a>() ) {</div>
<div class="line"><a id="l02896" name="l02896"></a><span class="lineno"> 2896</span>        <span class="keywordflow">if</span>( vp.part().precalc[0].xy() == dp &amp;&amp; !vp.part().removed ) {</div>
<div class="line"><a id="l02897" name="l02897"></a><span class="lineno"> 2897</span>            <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( vp.part_index() );</div>
<div class="line"><a id="l02898" name="l02898"></a><span class="lineno"> 2898</span>        }</div>
<div class="line"><a id="l02899" name="l02899"></a><span class="lineno"> 2899</span>    }</div>
<div class="line"><a id="l02900" name="l02900"></a><span class="lineno"> 2900</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l02901" name="l02901"></a><span class="lineno"> 2901</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l06882">get_all_parts()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06849">get_bounding_box()</a>.</p>

</div>
</div>
<a id="ab14a3fcf395f63b6fcaea51d37b72176" name="ab14a3fcf395f63b6fcaea51d37b72176"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab14a3fcf395f63b6fcaea51d37b72176">&#9670;&nbsp;</a></span>part_base()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classitem__location.html">item_location</a> vehicle::part_base </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get handle for base item of part. </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02390">2390</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02391" name="l02391"></a><span class="lineno"> 2391</span>{</div>
<div class="line"><a id="l02392" name="l02392"></a><span class="lineno"> 2392</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="classitem__location.html">item_location</a>( <a class="code hl_class" href="classvehicle__cursor.html">vehicle_cursor</a>( *<span class="keyword">this</span>, p ), &amp;<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ p ].base );</div>
<div class="line"><a id="l02393" name="l02393"></a><span class="lineno"> 2393</span>}</div>
<div class="ttc" id="aclassvehicle__cursor_html"><div class="ttname"><a href="classvehicle__cursor.html">vehicle_cursor</a></div><div class="ttdef"><b>Definition:</b> <a href="vehicle__selector_8h_source.html#l00013">vehicle_selector.h:14</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l01270">veh_interact::do_mend()</a>.</p>

</div>
</div>
<a id="ae4a8bd9a6ff5fb9a0169296a776c1e98" name="ae4a8bd9a6ff5fb9a0169296a776c1e98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4a8bd9a6ff5fb9a0169296a776c1e98">&#9670;&nbsp;</a></span>part_collision()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structveh__collision.html">veh_collision</a> vehicle::part_collision </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>part</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>just_detect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bash_floor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__move_8cpp_source.html#l00470">470</a> of file <a class="el" href="vehicle__move_8cpp_source.html">vehicle_move.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>{</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>    <span class="comment">// Vertical collisions need to be handled differently</span></div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>    <span class="comment">// All collisions have to be either fully vertical or fully horizontal for now</span></div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> vert_coll = bash_floor || p.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> != <a class="code hl_variable" href="classvehicle.html#a34630935e46860003c616e0522316f02">sm_pos</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>;</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>    <a class="code hl_class" href="classCharacter.html">Character</a> &amp;player_character = <a class="code hl_function" href="character_8cpp.html#a2fcb25d686f4a35fca374c6f71280311">get_player_character</a>();</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> pl_ctrl = <a class="code hl_function" href="classvehicle.html#a341515426011486c265d016c35f84de6">player_in_control</a>( player_character );</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *critter = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at( p, <span class="keyword">true</span> );</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>    <a class="code hl_class" href="classplayer.html">player</a> *ph = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classplayer.html">player</a> *<span class="keyword">&gt;</span>( critter );</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span> </div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>    <a class="code hl_class" href="classCreature.html">Creature</a> *driver = pl_ctrl ? &amp;player_character : <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span> </div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>    <span class="comment">// If in a vehicle assume it&#39;s this one</span></div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>    <span class="keywordflow">if</span>( ph != <span class="keyword">nullptr</span> &amp;&amp; ph-&gt;<a class="code hl_variable" href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">in_vehicle</a> ) {</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>        critter = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>        ph = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>    }</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span> </div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>    <span class="keyword">const</span> <a class="code hl_class" href="classoptional__vpart__position.html">optional_vpart_position</a> ovp = here.<a class="code hl_function" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( p );</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>    <span class="comment">// Disable vehicle/critter collisions when bashing floor</span></div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>    <span class="comment">// TODO: More elegant code</span></div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> is_veh_collision = !bash_floor &amp;&amp; ovp &amp;&amp; &amp;ovp-&gt;vehicle() != <span class="keyword">this</span>;</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> is_body_collision = !bash_floor &amp;&amp; critter != <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span> </div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>    <a class="code hl_struct" href="structveh__collision.html">veh_collision</a> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>    <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.type = <a class="code hl_enumvalue" href="vehicle_8h.html#a53b960f88fea75df3467e17492458952ad6f7a65f12e8eab61c4617147bbd6189">veh_coll_nothing</a>;</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>    <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.part = <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>;</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span> </div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>    <span class="comment">// Vehicle collisions are a special case. just return the collision.</span></div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>    <span class="comment">// The map takes care of the dynamic stuff.</span></div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>    <span class="keywordflow">if</span>( is_veh_collision ) {</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>        <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.type = <a class="code hl_enumvalue" href="vehicle_8h.html#a53b960f88fea75df3467e17492458952a9ce81fa4bb69ed5ab6ca3648ec842c39">veh_coll_veh</a>;</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>        <span class="comment">//&quot;imp&quot; is too simplistic for vehicle-vehicle collisions</span></div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>        <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.target = &amp;ovp-&gt;vehicle();</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>        <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.target_part = ovp-&gt;part_index();</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>        <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.target_name = ovp-&gt;vehicle().disp_name();</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>    }</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span> </div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>    <span class="comment">// Typical rotor tip speed in MPH * 100.</span></div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>    <span class="keywordtype">int</span> rotor_velocity = 45600;</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>    <span class="comment">// Non-vehicle collisions can&#39;t happen when the vehicle is not moving</span></div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>    <span class="keywordtype">int</span> &amp;coll_velocity = ( <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ).<a class="code hl_function" href="classvpart__info.html#af014709bbc2aceff9f6e91bd15e6d508">rotor_diameter</a>() == 0 ) ?</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>                         ( vert_coll ? <a class="code hl_variable" href="classvehicle.html#a416a2bc9ee792663fced3344db322cb8">vertical_velocity</a> : <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> ) :</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>                         rotor_velocity;</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>    <span class="keywordflow">if</span>( !just_detect &amp;&amp; coll_velocity == 0 ) {</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>    }</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span> </div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>    <span class="keywordflow">if</span>( is_body_collision ) {</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>        <span class="comment">// critters on a BOARDABLE part in this vehicle aren&#39;t colliding</span></div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>        <span class="keywordflow">if</span>( ovp &amp;&amp; ( &amp;ovp-&gt;vehicle() == <span class="keyword">this</span> ) &amp;&amp; <a class="code hl_function" href="classvehicle.html#ab266c3250ffece69b5c2ddc9897d80d3">get_pet</a>( ovp-&gt;part_index() ) ) {</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>        }</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>        <span class="comment">// we just ran into a fish, so move it out of the way</span></div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>        <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <span class="stringliteral">&quot;SWIMMABLE&quot;</span>, critter-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() ) ) {</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>            <a class="code hl_struct" href="structtripoint.html">tripoint</a> end_pos = critter-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>();</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>            <a class="code hl_struct" href="structtripoint.html">tripoint</a> start_pos;</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>            <span class="keyword">const</span> <a class="code hl_class" href="classunits_1_1quantity.html">units::angle</a> <a class="code hl_typedef" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">angle</a> =</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>                <a class="code hl_variable" href="classvehicle.html#a8bbdfb41ea75fdc007feab08e2137aa2">move</a>.<a class="code hl_function" href="classtileray.html#a91ed01227e1754597024f4916f8bd6af">dir</a>() + 45_degrees * ( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].mount.x &gt; <a class="code hl_function" href="classvehicle.html#a19bf91bbba8085237248e25c7d214ee6">pivot_point</a>().<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> ? -1 : 1 );</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>            std::set&lt;tripoint&gt; &amp;cur_points = <a class="code hl_function" href="classvehicle.html#a2e80dafb2c03147b569688658843d9d6">get_points</a>( <span class="keyword">true</span> );</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>            <span class="comment">// push the animal out of way until it&#39;s no longer in our vehicle and not in</span></div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>            <span class="comment">// anyone else&#39;s position</span></div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>            <span class="keywordflow">while</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at( end_pos, <span class="keyword">true</span> ) ||</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>                   cur_points.find( end_pos ) != cur_points.end() ) {</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>                start_pos = end_pos;</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>                <a class="code hl_function" href="line_8cpp.html#a9cbf6626ab40d551e7092ba115965380">calc_ray_end</a>( <a class="code hl_typedef" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">angle</a>, 2, start_pos, end_pos );</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>            }</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>            critter-&gt;<a class="code hl_function" href="classCreature.html#a7f9ce537b830a5f0474c001d295c0a77">setpos</a>( end_pos );</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>        }</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>    }</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span> </div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>    <span class="comment">// Damage armor before damaging any other parts</span></div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>    <span class="comment">// Actually target, not just damage - spiked plating will &quot;hit back&quot;, for example</span></div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> armor_part = <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.part, <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea4c67c3568d86e365c41549637ebff02b">VPFLAG_ARMOR</a>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>    <span class="keywordflow">if</span>( armor_part &gt;= 0 ) {</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>        <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.part = armor_part;</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>    }</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span> </div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>    <span class="keywordtype">int</span> dmg_mod = <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.part ).<a class="code hl_variable" href="classvpart__info.html#a010d7002072c22b1029fdbfbf310cedc">dmg_mod</a>;</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>    <span class="comment">// Let&#39;s calculate type of collision &amp; mass of object we hit</span></div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>    <span class="keywordtype">float</span> mass2 = 0;</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>    <span class="comment">// e = 0 -&gt; plastic collision</span></div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>    <span class="keywordtype">float</span> e = 0.3;</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>    <span class="comment">// e = 1 -&gt; inelastic collision</span></div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>    <span class="comment">//part density</span></div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>    <span class="keywordtype">float</span> part_dens = 0;</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span> </div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>    <span class="keywordflow">if</span>( is_body_collision ) {</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>        <span class="comment">// Check any monster/NPC/player on the way</span></div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>        <span class="comment">// body</span></div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>        <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.type = <a class="code hl_enumvalue" href="vehicle_8h.html#a53b960f88fea75df3467e17492458952a81e75be1950a29c38a47c29ca62af371">veh_coll_body</a>;</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>        <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.target = critter;</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>        e = 0.30;</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>        part_dens = 15;</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>        mass2 = <a class="code hl_function" href="namespaceunits.html#afbf21a7601bd939c196667fc0b020111">units::to_kilogram</a>( critter-&gt;<a class="code hl_function" href="classCreature.html#a38ea0c149ac718542546fdceba44a4df">get_weight</a>() );</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>        <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.target_name = critter-&gt;<a class="code hl_function" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">disp_name</a>();</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ( bash_floor &amp;&amp; here.<a class="code hl_function" href="classmap.html#a2e3300e786112b4ea45a9d3176b5f3b0">is_bashable_ter_furn</a>( p, <span class="keyword">true</span> ) ) ||</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>               ( here.<a class="code hl_function" href="classmap.html#a2e3300e786112b4ea45a9d3176b5f3b0">is_bashable_ter_furn</a>( p, <span class="keyword">false</span> ) &amp;&amp; here.<a class="code hl_function" href="classmap.html#ab3329218e47ef1729d54bbf27622c1ba">move_cost_ter_furn</a>( p ) != 2 &amp;&amp;</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>                 <span class="comment">// Don&#39;t collide with tiny things, like flowers, unless we have a wheel in our space.</span></div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>                 ( <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.part, <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eae36e04cd704cf1a4a2ae645809e24e1b">VPFLAG_WHEEL</a>, <span class="keyword">true</span> ) &gt;= 0 ||</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>                   !here.<a class="code hl_function" href="classmap.html#a516c0764134cc86b57297811520395f7">has_flag_ter_or_furn</a>( <span class="stringliteral">&quot;TINY&quot;</span>, p ) ) &amp;&amp;</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>                 <span class="comment">// Protrusions don&#39;t collide with short terrain.</span></div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>                 <span class="comment">// Tiny also doesn&#39;t, but it&#39;s already excluded unless there&#39;s a wheel present.</span></div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>                 !( <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.part, <span class="stringliteral">&quot;PROTRUSION&quot;</span>, <span class="keyword">true</span> ) &gt;= 0 &amp;&amp;</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>                    here.<a class="code hl_function" href="classmap.html#a516c0764134cc86b57297811520395f7">has_flag_ter_or_furn</a>( <span class="stringliteral">&quot;SHORT&quot;</span>, p ) ) &amp;&amp;</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>                 <span class="comment">// These are bashable, but don&#39;t interact with vehicles.</span></div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>                 !here.<a class="code hl_function" href="classmap.html#a516c0764134cc86b57297811520395f7">has_flag_ter_or_furn</a>( <span class="stringliteral">&quot;NOCOLLIDE&quot;</span>, p ) &amp;&amp;</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>                 <span class="comment">// Do not collide with track tiles if we can use rails</span></div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>                 !( here.<a class="code hl_function" href="classmap.html#a516c0764134cc86b57297811520395f7">has_flag_ter_or_furn</a>( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258aa629b376f81403545931bc8b5689490f">TFLAG_RAIL</a>, p ) &amp;&amp; this-&gt;can_use_rails() ) ) ) {</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>        <span class="comment">// Movecost 2 indicates flat terrain like a floor, no collision there.</span></div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>        <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.type = <a class="code hl_enumvalue" href="vehicle_8h.html#a53b960f88fea75df3467e17492458952a9acfef3ceff4a9c4fa3c0cf62bb8d19c">veh_coll_bashable</a>;</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>        <a class="code hl_function" href="vehicle__move_8cpp.html#a43e5ce141f651d0255c6f15d0954018e">terrain_collision_data</a>( p, bash_floor, mass2, part_dens, e );</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>        <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.target_name = here.<a class="code hl_function" href="classmap.html#a64c0e02c7c79eb42879665a3e8b75999">disp_name</a>( p );</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a82534d8752a0be6bbb000928d1f1978b">impassable_ter_furn</a>( p ) ||</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>               ( bash_floor &amp;&amp; !here.<a class="code hl_function" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a7ae3043cdc343c2784d644bcafe86269">TFLAG_NO_FLOOR</a>, p ) ) ) {</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>        <span class="comment">// not destructible</span></div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>        <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.type = <a class="code hl_enumvalue" href="vehicle_8h.html#a53b960f88fea75df3467e17492458952af924b62a834eb9a80f9f8ac3d7ae4be3">veh_coll_other</a>;</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>        mass2 = 1000;</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>        e = 0.10;</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>        part_dens = 80;</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>        <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.target_name = here.<a class="code hl_function" href="classmap.html#a64c0e02c7c79eb42879665a3e8b75999">disp_name</a>( p );</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>    }</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span> </div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.type == <a class="code hl_enumvalue" href="vehicle_8h.html#a53b960f88fea75df3467e17492458952ad6f7a65f12e8eab61c4617147bbd6189">veh_coll_nothing</a> || just_detect ) {</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>        <span class="comment">// Hit nothing or we aren&#39;t actually hitting</span></div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>    }</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>    <a class="code hl_function" href="classvehicle.html#a8d23ce82d669c714795a2ed9b679e3b9">stop_autodriving</a>();</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>    <span class="comment">// Calculate mass AFTER checking for collision</span></div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>    <span class="comment">//  because it involves iterating over all cargo</span></div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>    <span class="comment">// Rotors only use rotor mass in calculation.</span></div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code hl_typedef" href="namespaceunits.html#af4f3159f510e2b4372187d8fb4746e23">mass</a> = ( <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ).<a class="code hl_function" href="classvpart__info.html#af014709bbc2aceff9f6e91bd15e6d508">rotor_diameter</a>() &gt; 0 ) ?</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>                       <a class="code hl_function" href="namespaceunits.html#afbf21a7601bd939c196667fc0b020111">to_kilogram</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ].base.weight() ) : <a class="code hl_function" href="namespaceunits.html#afbf21a7601bd939c196667fc0b020111">to_kilogram</a>( <a class="code hl_function" href="classvehicle.html#a5a7d83716bf73d4b58d265b626872d01">total_mass</a>() );</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span> </div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>    <span class="comment">//Calculate damage resulting from d_E</span></div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="material_8h.html#a988f56b9fb9795d303c0c614f3b19d7c">material_id_list</a> &amp;mats = <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.part ).<a class="code hl_variable" href="classvpart__info.html#adb7dd24347aac9bff4ef3d7ff3663ded">item</a>-&gt;<a class="code hl_variable" href="structitype.html#a32ac824cb8437ef7a8288dafe6c6bfe1">materials</a>;</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>    <span class="keywordtype">float</span> vpart_dens = 0;</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>    <span class="keywordflow">if</span>( !mats.empty() ) {</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;mat_id : mats ) {</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>            vpart_dens += mat_id.obj().density();</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>        }</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>        <span class="comment">// average</span></div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>        vpart_dens /= mats.size();</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>    }</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span> </div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>    <span class="comment">//k=100 -&gt; 100% damage on part</span></div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>    <span class="comment">//k=0 -&gt; 100% damage on obj</span></div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>    <span class="keywordtype">float</span> material_factor = ( part_dens - vpart_dens ) * 0.5;</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>    material_factor = std::max( -25.0f, std::min( 25.0f, material_factor ) );</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>    <span class="comment">// factor = -25 if mass is much greater than mass2</span></div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>    <span class="comment">// factor = +25 if mass2 is much greater than mass</span></div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> weight_factor = <a class="code hl_typedef" href="namespaceunits.html#af4f3159f510e2b4372187d8fb4746e23">mass</a> &gt;= mass2 ?</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>                                -25 * ( std::log( <a class="code hl_typedef" href="namespaceunits.html#af4f3159f510e2b4372187d8fb4746e23">mass</a> ) - std::log( mass2 ) ) / std::log( <a class="code hl_typedef" href="namespaceunits.html#af4f3159f510e2b4372187d8fb4746e23">mass</a> ) :</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>                                25 * ( <a class="code hl_namespace" href="namespacestd.html">std</a>::log( mass2 ) - <a class="code hl_namespace" href="namespacestd.html">std</a>::log( <a class="code hl_typedef" href="namespaceunits.html#af4f3159f510e2b4372187d8fb4746e23">mass</a> ) ) / <a class="code hl_namespace" href="namespacestd.html">std</a>::log( mass2 );</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span> </div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>    <span class="keywordtype">float</span> k = 50 + material_factor + weight_factor;</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>    k = std::max( 10.0f, std::min( 90.0f, k ) );</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span> </div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>    <span class="keywordtype">bool</span> smashed = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>    <span class="keyword">const</span> std::string snd = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;smash!&quot;</span> );</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>    <span class="keywordtype">float</span> dmg = 0.0f;</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>    <span class="keywordtype">float</span> part_dmg = 0.0f;</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>    <span class="comment">// Calculate Impulse of car</span></div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>    <a class="code hl_class" href="classtime__duration.html">time_duration</a> time_stunned = 0_turns;</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span> </div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> prev_velocity = coll_velocity;</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> vel_sign = <a class="code hl_function" href="enums_8h.html#a89bed42d8e3efcd44570febc837f088e">sgn</a>( coll_velocity );</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>    <span class="comment">// Velocity of the object we&#39;re hitting</span></div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>    <span class="comment">// Assuming it starts at 0, but we&#39;ll probably hit it many times</span></div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>    <span class="comment">// in one collision, so accumulate the velocity gain from each hit.</span></div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>    <span class="keywordtype">float</span> vel2 = 0.0f;</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>    <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>        smashed = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>        <span class="comment">// Impulse of vehicle</span></div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>        <span class="keyword">const</span> <span class="keywordtype">float</span> vel1 = coll_velocity / 100.0f;</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>        <span class="comment">// Velocity of car after collision</span></div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>        <span class="keyword">const</span> <span class="keywordtype">float</span> vel1_a = ( <a class="code hl_typedef" href="namespaceunits.html#af4f3159f510e2b4372187d8fb4746e23">mass</a> * vel1 + mass2 * vel2 + e * mass2 * ( vel2 - vel1 ) ) /</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>                             ( <a class="code hl_typedef" href="namespaceunits.html#af4f3159f510e2b4372187d8fb4746e23">mass</a> + mass2 );</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>        <span class="comment">// Velocity of object after collision</span></div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>        <span class="keyword">const</span> <span class="keywordtype">float</span> vel2_a = ( <a class="code hl_typedef" href="namespaceunits.html#af4f3159f510e2b4372187d8fb4746e23">mass</a> * vel1 + mass2 * vel2 + e * <a class="code hl_typedef" href="namespaceunits.html#af4f3159f510e2b4372187d8fb4746e23">mass</a> * ( vel1 - vel2 ) ) / ( <a class="code hl_typedef" href="namespaceunits.html#af4f3159f510e2b4372187d8fb4746e23">mass</a> + mass2 );</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>        <span class="comment">// Lost energy at collision -&gt; deformation energy -&gt; damage</span></div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>        <span class="keyword">const</span> <span class="keywordtype">float</span> E_before = 0.5f * ( <a class="code hl_typedef" href="namespaceunits.html#af4f3159f510e2b4372187d8fb4746e23">mass</a> * vel1 * vel1 )     + 0.5f * ( mass2 * vel2 * vel2 );</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>        <span class="keyword">const</span> <span class="keywordtype">float</span> E_after  = 0.5f * ( <a class="code hl_typedef" href="namespaceunits.html#af4f3159f510e2b4372187d8fb4746e23">mass</a> * vel1_a * vel1_a ) + 0.5f * ( mass2 * vel2_a * vel2_a );</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>        <span class="keyword">const</span> <span class="keywordtype">float</span> d_E = E_before - E_after;</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>        <span class="keywordflow">if</span>( d_E &lt;= 0 ) {</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>            <span class="comment">// Deformation energy is signed</span></div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>            <span class="comment">// If it&#39;s negative, it means something went wrong</span></div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>            <span class="comment">// But it still does happen sometimes...</span></div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="namespaceunits.html#a0b9218914b883c6c31f5af68deaafc2e">std::fabs</a>( vel1_a ) &lt; <a class="code hl_function" href="namespaceunits.html#a0b9218914b883c6c31f5af68deaafc2e">std::fabs</a>( vel1 ) ) {</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>                <span class="comment">// Lower vehicle&#39;s speed to prevent infinite loops</span></div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>                coll_velocity = vel1_a * 90;</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>            }</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="namespaceunits.html#a0b9218914b883c6c31f5af68deaafc2e">std::fabs</a>( vel2_a ) &gt; <a class="code hl_function" href="namespaceunits.html#a0b9218914b883c6c31f5af68deaafc2e">std::fabs</a>( vel2 ) ) {</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>                vel2 = vel2_a;</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>            }</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>            <span class="comment">// this causes infinite loop</span></div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>            <span class="keywordflow">if</span>( mass2 == 0 ) {</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>                mass2 = 1;</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>            }</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>        }</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span> </div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;Deformation energy: %.2f&quot;</span>, d_E );</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>        <span class="comment">// Damage calculation</span></div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>        <span class="comment">// Damage dealt overall</span></div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>        dmg += d_E / 400;</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>        <span class="comment">// Damage for vehicle-part</span></div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>        <span class="comment">// Always if no critters, otherwise if critter is real</span></div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>        <span class="keywordflow">if</span>( critter == <span class="keyword">nullptr</span> || !critter-&gt;<a class="code hl_function" href="classCreature.html#a3cb42eea32fd7e172dca0e902d1184ed">is_hallucination</a>() ) {</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>            part_dmg = dmg * k / 100;</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;Part collision damage: %.2f&quot;</span>, part_dmg );</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>        }</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>        <span class="comment">// Damage for object</span></div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>        <span class="keyword">const</span> <span class="keywordtype">float</span> obj_dmg = dmg * ( 100 - k ) / 100;</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span> </div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.type == <a class="code hl_enumvalue" href="vehicle_8h.html#a53b960f88fea75df3467e17492458952a9acfef3ceff4a9c4fa3c0cf62bb8d19c">veh_coll_bashable</a> ) {</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>            <span class="comment">// Something bashable -- use map::bash to determine outcome</span></div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>            <span class="comment">// NOTE: Floor bashing disabled for balance reasons</span></div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>            <span class="comment">//       Floor values are still used to set damage dealt to vehicle</span></div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>            smashed = here.<a class="code hl_function" href="classmap.html#a2e3300e786112b4ea45a9d3176b5f3b0">is_bashable_ter_furn</a>( p, <span class="keyword">false</span> ) &amp;&amp;</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>                      here.<a class="code hl_function" href="classmap.html#adfb4f21d749696fdd25c7b37ba2b7b21">bash_resistance</a>( p, bash_floor ) &lt;= obj_dmg &amp;&amp;</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>                      here.<a class="code hl_function" href="classmap.html#a2266f21420ae2a1b44e8df9a028764e4">bash</a>( p, obj_dmg, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">this</span> ).<a class="code hl_variable" href="structbash__results.html#aca607ab5e6884fe03b2119ffecd88419">success</a>;</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>            <span class="keywordflow">if</span>( smashed ) {</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>                <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a2e3300e786112b4ea45a9d3176b5f3b0">is_bashable_ter_furn</a>( p, bash_floor ) ) {</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>                    <span class="comment">// There&#39;s new terrain there to smash</span></div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>                    smashed = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>                    <a class="code hl_function" href="vehicle__move_8cpp.html#a43e5ce141f651d0255c6f15d0954018e">terrain_collision_data</a>( p, bash_floor, mass2, part_dens, e );</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>                    <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.target_name = here.<a class="code hl_function" href="classmap.html#a64c0e02c7c79eb42879665a3e8b75999">disp_name</a>( p );</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a82534d8752a0be6bbb000928d1f1978b">impassable_ter_furn</a>( p ) ) {</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>                    <span class="comment">// There&#39;s new terrain there, but we can&#39;t smash it!</span></div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>                    smashed = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>                    <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.type = <a class="code hl_enumvalue" href="vehicle_8h.html#a53b960f88fea75df3467e17492458952af924b62a834eb9a80f9f8ac3d7ae4be3">veh_coll_other</a>;</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>                    mass2 = 1000;</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>                    e = 0.10;</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>                    part_dens = 80;</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>                    <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.target_name = here.<a class="code hl_function" href="classmap.html#a64c0e02c7c79eb42879665a3e8b75999">disp_name</a>( p );</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>                }</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>            }</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.type == <a class="code hl_enumvalue" href="vehicle_8h.html#a53b960f88fea75df3467e17492458952a81e75be1950a29c38a47c29ca62af371">veh_coll_body</a> ) {</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>            <span class="keywordtype">int</span> dam = obj_dmg * dmg_mod / 100;</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span> </div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>            <span class="comment">// We know critter is set for this type.  Assert to inform static</span></div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>            <span class="comment">// analysis.</span></div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>            assert( critter );</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span> </div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>            <span class="comment">// No blood from hallucinations</span></div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>            <span class="keywordflow">if</span>( !critter-&gt;<a class="code hl_function" href="classCreature.html#a3cb42eea32fd7e172dca0e902d1184ed">is_hallucination</a>() ) {</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.part, <span class="stringliteral">&quot;SHARP&quot;</span> ) ) {</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>                    <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.part].blood += ( 20 + dam ) * 5;</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dam &gt; <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 10, 30 ) ) {</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>                    <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.part].blood += ( 10 + dam / 2 ) * 5;</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>                }</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span> </div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>                <a class="code hl_variable" href="classvehicle.html#ac82426b9ed349941fde4e5af18038735">check_environmental_effects</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>            }</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span> </div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>            time_stunned = <a class="code hl_function" href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a>( ( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, dam ) &gt; 10 ) + ( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, dam ) &gt; 40 ) );</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>            <span class="keywordflow">if</span>( time_stunned &gt; 0_turns ) {</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>                critter-&gt;<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="vehicle__move_8cpp.html#ad1df0ca2944a94c3ad796e8baada33ae">effect_stunned</a>, time_stunned );</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>            }</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span> </div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>            <span class="keywordflow">if</span>( ph != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>                ph-&gt;<a class="code hl_function" href="classCharacter.html#a59ce503ce81563ebcc1da591816a7b7c">hitall</a>( dam, 40, driver );</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>                <span class="keyword">const</span> <span class="keywordtype">int</span> armor = <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.part, <span class="stringliteral">&quot;SHARP&quot;</span> ) ?</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>                                  critter-&gt;<a class="code hl_function" href="classCreature.html#a5bb5438474141314c9a9f11a565b6c9c">get_armor_cut</a>( <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ) ) :</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>                                  critter-&gt;<a class="code hl_function" href="classCreature.html#a3e049fbeaa6a392bd3a2594005b397af">get_armor_bash</a>( <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ) );</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>                dam = std::max( 0, dam - armor );</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>                critter-&gt;<a class="code hl_function" href="classCreature.html#a0547ea1ba1d4fcc157db6a73b877f5d6">apply_damage</a>( driver, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ), dam );</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;Critter collision damage: %d&quot;</span>, dam );</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>            }</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span> </div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>            <span class="comment">// Don&#39;t fling if vertical - critter got smashed into the ground</span></div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>            <span class="keywordflow">if</span>( !vert_coll ) {</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="namespaceunits.html#a0b9218914b883c6c31f5af68deaafc2e">std::fabs</a>( vel2_a ) &gt; 10.0f ||</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>                    <a class="code hl_function" href="namespaceunits.html#a0b9218914b883c6c31f5af68deaafc2e">std::fabs</a>( e * <a class="code hl_typedef" href="namespaceunits.html#af4f3159f510e2b4372187d8fb4746e23">mass</a> * vel1_a ) &gt; <a class="code hl_function" href="namespaceunits.html#a0b9218914b883c6c31f5af68deaafc2e">std::fabs</a>( mass2 * ( 10.0f - vel2_a ) ) ) {</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>                    <span class="keyword">const</span> <a class="code hl_class" href="classunits_1_1quantity.html">units::angle</a> <a class="code hl_typedef" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">angle</a> = <a class="code hl_function" href="rng_8cpp.html#a0c88381d6334a2fbaa726c53f5cf9bb9">rng_float</a>( -60_degrees, 60_degrees );</div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>                    <span class="comment">// Also handle the weird case when we don&#39;t have enough force</span></div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>                    <span class="comment">// but still have to push (in such case compare momentum)</span></div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>                    <span class="keyword">const</span> <span class="keywordtype">float</span> push_force = std::max&lt;float&gt;( <a class="code hl_function" href="namespaceunits.html#a0b9218914b883c6c31f5af68deaafc2e">std::fabs</a>( vel2_a ), 10.1f );</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>                    <span class="comment">// move.dir is where the vehicle is facing. If velocity is negative,</span></div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>                    <span class="comment">// we&#39;re moving backwards and have to adjust the angle accordingly.</span></div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>                    <span class="keyword">const</span> <a class="code hl_class" href="classunits_1_1quantity.html">units::angle</a> angle_sum =</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>                        <a class="code hl_typedef" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">angle</a> + <a class="code hl_variable" href="classvehicle.html#a8bbdfb41ea75fdc007feab08e2137aa2">move</a>.<a class="code hl_function" href="classtileray.html#a91ed01227e1754597024f4916f8bd6af">dir</a>() + ( vel2_a &gt; 0 ? 0_degrees : 180_degrees );</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>                    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;fling_creature( critter, angle_sum, push_force );</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="namespaceunits.html#a0b9218914b883c6c31f5af68deaafc2e">std::fabs</a>( vel2_a ) &gt; <a class="code hl_function" href="namespaceunits.html#a0b9218914b883c6c31f5af68deaafc2e">std::fabs</a>( vel2 ) ) {</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>                    vel2 = vel2_a;</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>                    <span class="comment">// Vehicle&#39;s momentum isn&#39;t big enough to push the critter</span></div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>                    <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> = 0;</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>                }</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span> </div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>                <span class="keywordflow">if</span>( critter-&gt;<a class="code hl_function" href="classCreature.html#ab4c318885f6b9947a7c85d3328d25ffe">is_dead_state</a>() ) {</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>                    smashed = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( critter != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>                    <span class="comment">// Only count critter as pushed away if it actually changed position</span></div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>                    smashed = critter-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() != p;</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>                }</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>            }</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>        }</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span> </div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>        <span class="keywordflow">if</span>( critter == <span class="keyword">nullptr</span> || !critter-&gt;<a class="code hl_function" href="classCreature.html#a3cb42eea32fd7e172dca0e902d1184ed">is_hallucination</a>() ) {</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>            coll_velocity = vel1_a * ( smashed ? 100 : 90 );</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>        }</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>        <span class="comment">// Stop processing when sign inverts, not when we reach 0</span></div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>    } <span class="keywordflow">while</span>( !smashed &amp;&amp; <a class="code hl_function" href="enums_8h.html#a89bed42d8e3efcd44570febc837f088e">sgn</a>( coll_velocity ) == vel_sign );</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span> </div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>    <span class="comment">// Apply special effects from collision.</span></div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>    <span class="keywordflow">if</span>( critter != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>        <span class="keywordflow">if</span>( !critter-&gt;<a class="code hl_function" href="classCreature.html#a3cb42eea32fd7e172dca0e902d1184ed">is_hallucination</a>() ) {</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>            <span class="keywordflow">if</span>( pl_ctrl ) {</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>                <span class="keywordflow">if</span>( time_stunned &gt; 0_turns ) {</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>                    <span class="comment">//~ 1$s - vehicle name, 2$s - part name, 3$s - NPC or monster</span></div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your %1$s&#39;s %2$s rams into %3$s and stuns it!&quot;</span> ),</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>                             <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.part ].name(), <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.target_name );</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>                    <span class="comment">//~ 1$s - vehicle name, 2$s - part name, 3$s - NPC or monster</span></div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your %1$s&#39;s %2$s rams into %3$s!&quot;</span> ),</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>                             <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.part ].name(), <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.target_name );</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>                }</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>            }</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span> </div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.part, <span class="stringliteral">&quot;SHARP&quot;</span> ) ) {</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>                critter-&gt;<a class="code hl_function" href="classCreature.html#a303fcc58869f10f44be1d598ed1aa26f">bleed</a>();</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>                <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( p, 20, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, snd, <span class="keyword">false</span>, <span class="stringliteral">&quot;smash_success&quot;</span>, <span class="stringliteral">&quot;hit_vehicle&quot;</span> );</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>            }</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>        }</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>        <span class="keywordflow">if</span>( pl_ctrl ) {</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>            <span class="keywordflow">if</span>( !snd.empty() ) {</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>                <span class="comment">//~ 1$s - vehicle name, 2$s - part name, 3$s - collision object name, 4$s - sound message</span></div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your %1$s&#39;s %2$s rams into %3$s with a %4$s&quot;</span> ),</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>                         <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.part ].name(), <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.target_name, snd );</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>                <span class="comment">//~ 1$s - vehicle name, 2$s - part name, 3$s - collision object name</span></div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your %1$s&#39;s %2$s rams into %3$s.&quot;</span> ),</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>                         <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.part ].name(), <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.target_name );</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>            }</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>        }</div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span> </div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>        <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( p, smashed ? 80 : 50, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, snd, <span class="keyword">false</span>, <span class="stringliteral">&quot;smash_success&quot;</span>,</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>                       <span class="stringliteral">&quot;hit_vehicle&quot;</span> );</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>    }</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span> </div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>    <span class="keywordflow">if</span>( smashed &amp;&amp; !vert_coll ) {</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>        <span class="keywordtype">int</span> turn_amount = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 3 ) * std::sqrt( <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( part_dmg ) );</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>        turn_amount /= 15;</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>        <span class="keywordflow">if</span>( turn_amount &lt; 1 ) {</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>            turn_amount = 1;</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>        }</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>        turn_amount *= 15;</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>        <span class="keywordflow">if</span>( turn_amount &gt; 120 ) {</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>            turn_amount = 120;</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>        }</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>        <span class="keywordtype">int</span> turn_roll = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 100 );</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>        <span class="comment">// Probability of skidding increases with higher delta_v</span></div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>        <span class="keywordflow">if</span>( turn_roll &lt; std::abs( ( prev_velocity - coll_velocity ) / 100.0f * 2.0f ) ) {</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>            <span class="comment">//delta_v = vel1 - vel1_a</span></div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>            <span class="comment">//delta_v = 50 mph -&gt; 100% probability of skidding</span></div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>            <span class="comment">//delta_v = 25 mph -&gt; 50% probability of skidding</span></div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>            <a class="code hl_variable" href="classvehicle.html#a320ca34b5c38568efd801731cef78a35">skidding</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>            <a class="code hl_function" href="classvehicle.html#a1380ff85985897f9f8a34eba538e04db">turn</a>( <a class="code hl_function" href="namespaceunits.html#a068cd98efba5fd1fbb936ce3597db23d">units::from_degrees</a>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) ? turn_amount : -turn_amount ) );</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>        }</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>    }</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span> </div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>    <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.imp = part_dmg;</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>}</div>
<div class="ttc" id="abodypart_8h_html_a426444e2d486ce1ee315d8b8acc86b40"><div class="ttname"><a href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a></div><div class="ttdeci">int_id&lt; body_part_type &gt; bodypart_id</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00023">bodypart.h:23</a></div></div>
<div class="ttc" id="aclassCharacter_html_a59ce503ce81563ebcc1da591816a7b7c"><div class="ttname"><a href="classCharacter.html#a59ce503ce81563ebcc1da591816a7b7c">Character::hitall</a></div><div class="ttdeci">int hitall(int dam, int vary, Creature *source)</div><div class="ttdoc">Harms all body parts for dam, with armor reduction.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08653">character.cpp:8653</a></div></div>
<div class="ttc" id="aclassCreature_html_a0547ea1ba1d4fcc157db6a73b877f5d6"><div class="ttname"><a href="classCreature.html#a0547ea1ba1d4fcc157db6a73b877f5d6">Creature::apply_damage</a></div><div class="ttdeci">virtual void apply_damage(Creature *source, bodypart_id bp, int amount, bool bypass_med=false)=0</div></div>
<div class="ttc" id="aclassCreature_html_a303fcc58869f10f44be1d598ed1aa26f"><div class="ttname"><a href="classCreature.html#a303fcc58869f10f44be1d598ed1aa26f">Creature::bleed</a></div><div class="ttdeci">virtual void bleed() const</div><div class="ttdoc">Adds an appropriate blood splatter.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00131">creature.cpp:131</a></div></div>
<div class="ttc" id="aclassCreature_html_a38ea0c149ac718542546fdceba44a4df"><div class="ttname"><a href="classCreature.html#a38ea0c149ac718542546fdceba44a4df">Creature::get_weight</a></div><div class="ttdeci">virtual units::mass get_weight() const =0</div></div>
<div class="ttc" id="aclassCreature_html_a3cb42eea32fd7e172dca0e902d1184ed"><div class="ttname"><a href="classCreature.html#a3cb42eea32fd7e172dca0e902d1184ed">Creature::is_hallucination</a></div><div class="ttdeci">virtual bool is_hallucination() const =0</div></div>
<div class="ttc" id="aclassCreature_html_a3e049fbeaa6a392bd3a2594005b397af"><div class="ttname"><a href="classCreature.html#a3e049fbeaa6a392bd3a2594005b397af">Creature::get_armor_bash</a></div><div class="ttdeci">virtual int get_armor_bash(bodypart_id bp) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01460">creature.cpp:1460</a></div></div>
<div class="ttc" id="aclassCreature_html_a5bb5438474141314c9a9f11a565b6c9c"><div class="ttname"><a href="classCreature.html#a5bb5438474141314c9a9f11a565b6c9c">Creature::get_armor_cut</a></div><div class="ttdeci">virtual int get_armor_cut(bodypart_id bp) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01464">creature.cpp:1464</a></div></div>
<div class="ttc" id="aclassCreature_html_a666022fd3ed772fa109d273c20e8de55"><div class="ttname"><a href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">Creature::add_effect</a></div><div class="ttdeci">void add_effect(const effect &amp;eff, bool force=false, bool deferred=false)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00974">creature.cpp:974</a></div></div>
<div class="ttc" id="aclassCreature_html_a7f9ce537b830a5f0474c001d295c0a77"><div class="ttname"><a href="classCreature.html#a7f9ce537b830a5f0474c001d295c0a77">Creature::setpos</a></div><div class="ttdeci">virtual void setpos(const tripoint &amp;pos)=0</div></div>
<div class="ttc" id="aclassCreature_html_ab4c318885f6b9947a7c85d3328d25ffe"><div class="ttname"><a href="classCreature.html#ab4c318885f6b9947a7c85d3328d25ffe">Creature::is_dead_state</a></div><div class="ttdeci">virtual bool is_dead_state() const =0</div></div>
<div class="ttc" id="aclassmap_html_a2266f21420ae2a1b44e8df9a028764e4"><div class="ttname"><a href="classmap.html#a2266f21420ae2a1b44e8df9a028764e4">map::bash</a></div><div class="ttdeci">bash_results bash(const tripoint &amp;p, int str, bool silent=false, bool destroy=false, bool bash_floor=false, const vehicle *bashing_vehicle=nullptr)</div><div class="ttdoc">Returns a pair where first is whether anything was smashed and second is if it was destroyed.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03520">map.cpp:3520</a></div></div>
<div class="ttc" id="aclassmap_html_a2e3300e786112b4ea45a9d3176b5f3b0"><div class="ttname"><a href="classmap.html#a2e3300e786112b4ea45a9d3176b5f3b0">map::is_bashable_ter_furn</a></div><div class="ttdeci">bool is_bashable_ter_furn(const tripoint &amp;p, bool allow_floor=false) const</div><div class="ttdoc">Returns true if the furniture or terrain at p is bashable.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02453">map.cpp:2453</a></div></div>
<div class="ttc" id="aclassmap_html_a64c0e02c7c79eb42879665a3e8b75999"><div class="ttname"><a href="classmap.html#a64c0e02c7c79eb42879665a3e8b75999">map::disp_name</a></div><div class="ttdeci">std::string disp_name(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01341">map.cpp:1341</a></div></div>
<div class="ttc" id="aclassmap_html_ab3329218e47ef1729d54bbf27622c1ba"><div class="ttname"><a href="classmap.html#ab3329218e47ef1729d54bbf27622c1ba">map::move_cost_ter_furn</a></div><div class="ttdeci">int move_cost_ter_furn(const tripoint &amp;p) const</div><div class="ttdoc">Similar behavior to move_cost(), but ignores vehicles.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01816">map.cpp:1816</a></div></div>
<div class="ttc" id="aclassmap_html_adfb4f21d749696fdd25c7b37ba2b7b21"><div class="ttname"><a href="classmap.html#adfb4f21d749696fdd25c7b37ba2b7b21">map::bash_resistance</a></div><div class="ttdeci">int bash_resistance(const tripoint &amp;p, bool allow_floor=false) const</div><div class="ttdoc">Returns min_str of the furniture or terrain at p.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02472">map.cpp:2472</a></div></div>
<div class="ttc" id="aclasstime__duration_html"><div class="ttname"><a href="classtime__duration.html">time_duration</a></div><div class="ttdoc">A duration defined as a number of specific time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00179">calendar.h:180</a></div></div>
<div class="ttc" id="aclassvehicle_html_a19bf91bbba8085237248e25c7d214ee6"><div class="ttname"><a href="classvehicle.html#a19bf91bbba8085237248e25c7d214ee6">vehicle::pivot_point</a></div><div class="ttdeci">const point &amp; pivot_point() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05636">vehicle.cpp:5636</a></div></div>
<div class="ttc" id="aclassvpart__info_html_a010d7002072c22b1029fdbfbf310cedc"><div class="ttname"><a href="classvpart__info.html#a010d7002072c22b1029fdbfbf310cedc">vpart_info::dmg_mod</a></div><div class="ttdeci">int dmg_mod</div><div class="ttdoc">Damage modifier (percentage) used when damaging other entities upon collision.</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00179">veh_type.h:179</a></div></div>
<div class="ttc" id="aclassvpart__info_html_adb7dd24347aac9bff4ef3d7ff3663ded"><div class="ttname"><a href="classvpart__info.html#adb7dd24347aac9bff4ef3d7ff3663ded">vpart_info::item</a></div><div class="ttdeci">itype_id item</div><div class="ttdoc">base item for this part</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00152">veh_type.h:152</a></div></div>
<div class="ttc" id="aline_8cpp_html_a9cbf6626ab40d551e7092ba115965380"><div class="ttname"><a href="line_8cpp.html#a9cbf6626ab40d551e7092ba115965380">calc_ray_end</a></div><div class="ttdeci">void calc_ray_end(units::angle angle, const int range, const tripoint &amp;p, tripoint &amp;out)</div><div class="ttdef"><b>Definition:</b> <a href="line_8cpp_source.html#l00751">line.cpp:751</a></div></div>
<div class="ttc" id="amapdata_8h_html_aa04d037303ea30193f7cf0cd82304258aa629b376f81403545931bc8b5689490f"><div class="ttname"><a href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258aa629b376f81403545931bc8b5689490f">TFLAG_RAIL</a></div><div class="ttdeci">@ TFLAG_RAIL</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00318">mapdata.h:318</a></div></div>
<div class="ttc" id="amaterial_8h_html_a988f56b9fb9795d303c0c614f3b19d7c"><div class="ttname"><a href="material_8h.html#a988f56b9fb9795d303c0c614f3b19d7c">material_id_list</a></div><div class="ttdeci">std::vector&lt; material_id &gt; material_id_list</div><div class="ttdef"><b>Definition:</b> <a href="material_8h_source.html#l00024">material.h:24</a></div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdoc">STL namespace.</div></div>
<div class="ttc" id="arng_8cpp_html_a0c88381d6334a2fbaa726c53f5cf9bb9"><div class="ttname"><a href="rng_8cpp.html#a0c88381d6334a2fbaa726c53f5cf9bb9">rng_float</a></div><div class="ttdeci">double rng_float(double lo, double hi)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00028">rng.cpp:28</a></div></div>
<div class="ttc" id="astructbash__results_html_aca607ab5e6884fe03b2119ffecd88419"><div class="ttname"><a href="structbash__results.html#aca607ab5e6884fe03b2119ffecd88419">bash_results::success</a></div><div class="ttdeci">bool success</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00166">map.h:166</a></div></div>
<div class="ttc" id="astructitype_html_a32ac824cb8437ef7a8288dafe6c6bfe1"><div class="ttname"><a href="structitype.html#a32ac824cb8437ef7a8288dafe6c6bfe1">itype::materials</a></div><div class="ttdeci">std::vector&lt; material_id &gt; materials</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00922">itype.h:922</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307ea4c67c3568d86e365c41549637ebff02b"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea4c67c3568d86e365c41549637ebff02b">VPFLAG_ARMOR</a></div><div class="ttdeci">@ VPFLAG_ARMOR</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00032">veh_type.h:32</a></div></div>
<div class="ttc" id="avehicle_8h_html_a53b960f88fea75df3467e17492458952a81e75be1950a29c38a47c29ca62af371"><div class="ttname"><a href="vehicle_8h.html#a53b960f88fea75df3467e17492458952a81e75be1950a29c38a47c29ca62af371">veh_coll_body</a></div><div class="ttdeci">@ veh_coll_body</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00100">vehicle.h:100</a></div></div>
<div class="ttc" id="avehicle_8h_html_a53b960f88fea75df3467e17492458952a9acfef3ceff4a9c4fa3c0cf62bb8d19c"><div class="ttname"><a href="vehicle_8h.html#a53b960f88fea75df3467e17492458952a9acfef3ceff4a9c4fa3c0cf62bb8d19c">veh_coll_bashable</a></div><div class="ttdeci">@ veh_coll_bashable</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00102">vehicle.h:102</a></div></div>
<div class="ttc" id="avehicle_8h_html_a53b960f88fea75df3467e17492458952a9ce81fa4bb69ed5ab6ca3648ec842c39"><div class="ttname"><a href="vehicle_8h.html#a53b960f88fea75df3467e17492458952a9ce81fa4bb69ed5ab6ca3648ec842c39">veh_coll_veh</a></div><div class="ttdeci">@ veh_coll_veh</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00101">vehicle.h:101</a></div></div>
<div class="ttc" id="avehicle__move_8cpp_html_a43e5ce141f651d0255c6f15d0954018e"><div class="ttname"><a href="vehicle__move_8cpp.html#a43e5ce141f651d0255c6f15d0954018e">terrain_collision_data</a></div><div class="ttdeci">static void terrain_collision_data(const tripoint &amp;p, bool bash_floor, float &amp;mass, float &amp;density, float &amp;elastic)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l00458">vehicle_move.cpp:458</a></div></div>
<div class="ttc" id="avehicle__move_8cpp_html_ad1df0ca2944a94c3ad796e8baada33ae"><div class="ttname"><a href="vehicle__move_8cpp.html#ad1df0ca2944a94c3ad796e8baada33ae">effect_stunned</a></div><div class="ttdeci">static const efftype_id effect_stunned(&quot;stunned&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8cpp_source.html#l00974">Creature::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="classCreature.html#a0547ea1ba1d4fcc157db6a73b877f5d6">Creature::apply_damage()</a>, <a class="el" href="map_8cpp_source.html#l03520">map::bash()</a>, <a class="el" href="map_8cpp_source.html#l02472">map::bash_resistance()</a>, <a class="el" href="creature_8cpp_source.html#l00131">Creature::bleed()</a>, <a class="el" href="line_8cpp_source.html#l00751">calc_ray_end()</a>, <a class="el" href="vehicle_8h_source.html#l01942">check_environmental_effects</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::combat</a>, <a class="el" href="tileray_8cpp_source.html#l00074">tileray::dir()</a>, <a class="el" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">Creature::disp_name()</a>, <a class="el" href="map_8cpp_source.html#l01341">map::disp_name()</a>, <a class="el" href="veh__type_8h_source.html#l00179">vpart_info::dmg_mod</a>, <a class="el" href="vehicle__move_8cpp.html#ad1df0ca2944a94c3ad796e8baada33ae">effect_stunned</a>, <a class="el" href="units__def_8h_source.html#l00136">units::fabs()</a>, <a class="el" href="units__angle_8h_source.html#l00031">units::from_degrees()</a>, <a class="el" href="calendar_8h_source.html#l00204">time_duration::from_turns()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="creature_8cpp_source.html#l01460">Creature::get_armor_bash()</a>, <a class="el" href="creature_8cpp_source.html#l01464">Creature::get_armor_cut()</a>, <a class="el" href="map_8cpp_source.html#l00141">get_map()</a>, <a class="el" href="vehicle_8cpp_source.html#l03082">get_pet()</a>, <a class="el" href="character_8cpp_source.html#l00381">get_player_character()</a>, <a class="el" href="vehicle_8cpp_source.html#l06568">get_points()</a>, <a class="el" href="classCreature.html#a38ea0c149ac718542546fdceba44a4df">Creature::get_weight()</a>, <a class="el" href="map_8cpp_source.html#l02304">map::has_flag()</a>, <a class="el" href="map_8cpp_source.html#l02333">map::has_flag_ter_or_furn()</a>, <a class="el" href="character_8cpp_source.html#l08653">Character::hitall()</a>, <a class="el" href="map_8cpp_source.html#l01839">map::impassable_ter_furn()</a>, <a class="el" href="character_8h_source.html#l01575">Character::in_vehicle</a>, <a class="el" href="map_8cpp_source.html#l02453">map::is_bashable_ter_furn()</a>, <a class="el" href="classCreature.html#ab4c318885f6b9947a7c85d3328d25ffe">Creature::is_dead_state()</a>, <a class="el" href="classCreature.html#a3cb42eea32fd7e172dca0e902d1184ed">Creature::is_hallucination()</a>, <a class="el" href="veh__type_8h_source.html#l00152">vpart_info::item</a>, <a class="el" href="enums_8h_source.html#l00264">m_debug</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="itype_8h_source.html#l00922">itype::materials</a>, <a class="el" href="vehicle_8h_source.html#l01893">move</a>, <a class="el" href="map_8cpp_source.html#l01816">map::move_cost_ter_furn()</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8cpp_source.html#l02875">part_flag()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8cpp_source.html#l02518">part_with_feature()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8cpp_source.html#l05636">pivot_point()</a>, <a class="el" href="vehicle_8cpp_source.html#l00277">player_in_control()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="rng_8cpp_source.html#l00028">rng_float()</a>, <a class="el" href="veh__type_8cpp_source.html#l00908">vpart_info::rotor_diameter()</a>, <a class="el" href="classCreature.html#a7f9ce537b830a5f0474c001d295c0a77">Creature::setpos()</a>, <a class="el" href="enums_8h_source.html#l00008">sgn()</a>, <a class="el" href="vehicle_8h_source.html#l01940">skidding</a>, <a class="el" href="vehicle_8h_source.html#l01844">sm_pos</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l01292">stop_autodriving()</a>, <a class="el" href="map_8h_source.html#l00166">bash_results::success</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00458">terrain_collision_data()</a>, <a class="el" href="mapdata_8h_source.html#l00310">TFLAG_NO_FLOOR</a>, <a class="el" href="mapdata_8h_source.html#l00318">TFLAG_RAIL</a>, <a class="el" href="units__mass_8h_source.html#l00073">units::to_kilogram()</a>, <a class="el" href="vehicle_8cpp_source.html#l03126">total_mass()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00324">turn()</a>, <a class="el" href="map_8cpp_source.html#l00988">map::veh_at()</a>, <a class="el" href="vehicle_8h_source.html#l00102">veh_coll_bashable</a>, <a class="el" href="vehicle_8h_source.html#l00100">veh_coll_body</a>, <a class="el" href="vehicle_8h_source.html#l00099">veh_coll_nothing</a>, <a class="el" href="vehicle_8h_source.html#l00103">veh_coll_other</a>, <a class="el" href="vehicle_8h_source.html#l00101">veh_coll_veh</a>, <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>, <a class="el" href="vehicle_8h_source.html#l01865">vertical_velocity</a>, <a class="el" href="veh__type_8h_source.html#l00032">VPFLAG_ARMOR</a>, <a class="el" href="veh__type_8h_source.html#l00048">VPFLAG_WHEEL</a>, <a class="el" href="point_8h_source.html#l00038">point::x</a>, and <a class="el" href="point_8h_source.html#l00152">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l00354">collision()</a>.</p>

</div>
</div>
<a id="a1c0ae4096c22318dabe8395b39ebd55e" name="a1c0ae4096c22318dabe8395b39ebd55e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c0ae4096c22318dabe8395b39ebd55e">&#9670;&nbsp;</a></span>part_color()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classnc__color.html">nc_color</a> vehicle::part_color </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>exact</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__display_8cpp_source.html#l00082">82</a> of file <a class="el" href="vehicle__display_8cpp_source.html">vehicle_display.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>{</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>    <span class="keywordflow">if</span>( p &lt; 0 || p &gt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size() ) ) {</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="color_8h.html#a2d8f37367a34632745626276dd4c9da6">c_black</a>;</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    }</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span> </div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    <a class="code hl_class" href="classnc__color.html">nc_color</a> col;</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span> </div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    <span class="keywordtype">int</span> parm = -1;</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span> </div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    <span class="comment">//If armoring is present and the option is set, it colors the visible part</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    <span class="keywordflow">if</span>( get_option&lt;bool&gt;( <span class="stringliteral">&quot;VEHICLE_ARMOR_COLOR&quot;</span> ) ) {</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>        parm = <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( p, <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea4c67c3568d86e365c41549637ebff02b">VPFLAG_ARMOR</a>, <span class="keyword">false</span> );</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>    }</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span> </div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    <span class="keywordflow">if</span>( parm &gt;= 0 ) {</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>        col = <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( parm ).<a class="code hl_variable" href="classvpart__info.html#ac8dbc94ea6028b13c5a9f4e8da9b14ba">color</a>;</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> displayed_part = <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40a4dc2e2416faefa33a23a45ed367e9fa6">exact</a> ? p : <a class="code hl_function" href="classvehicle.html#adc20027ac440f3052242f9f6f0441934">part_displayed_at</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].mount );</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span> </div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>        <span class="keywordflow">if</span>( displayed_part &lt; 0 || displayed_part &gt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size() ) ) {</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="color_8h.html#a2d8f37367a34632745626276dd4c9da6">c_black</a>;</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>        }</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[displayed_part].blood &gt; 200 ) {</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>            col = <a class="code hl_define" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a>;</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[displayed_part].blood &gt; 0 ) {</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>            col = <a class="code hl_define" href="color_8h.html#aab11865a3631a7ce78da82b7fb386b71">c_light_red</a>;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[displayed_part].is_broken() ) {</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>            col = <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( displayed_part ).<a class="code hl_variable" href="classvpart__info.html#aebfa77111bf40ee0778c0e0f5fd46c8e">color_broken</a>;</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>            col = <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( displayed_part ).<a class="code hl_variable" href="classvpart__info.html#ac8dbc94ea6028b13c5a9f4e8da9b14ba">color</a>;</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>        }</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span> </div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>    }</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span> </div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>    <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40a4dc2e2416faefa33a23a45ed367e9fa6">exact</a> ) {</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>        <span class="keywordflow">return</span> col;</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>    }</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span> </div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>    <span class="comment">// curtains turn windshields gray</span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>    <span class="keywordtype">int</span> <a class="code hl_function" href="namespaceiexamine.html#a21dd96f64237acd62065510e4417c9a4">curtains</a> = <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( p, <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea0d07a337e0ed3f6ea9db65158b9d33d2">VPFLAG_CURTAIN</a>, <span class="keyword">false</span> );</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespaceiexamine.html#a21dd96f64237acd62065510e4417c9a4">curtains</a> &gt;= 0 ) {</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( p, <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ead1fb8cdaa5d9f3fbd6295b9c6302e6fe">VPFLAG_WINDOW</a>, <span class="keyword">true</span> ) &gt;= 0 &amp;&amp; !<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="namespaceiexamine.html#a21dd96f64237acd62065510e4417c9a4">curtains</a>].<a class="code hl_function" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">open</a> ) {</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>            col = <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( <a class="code hl_function" href="namespaceiexamine.html#a21dd96f64237acd62065510e4417c9a4">curtains</a> ).<a class="code hl_variable" href="classvpart__info.html#ac8dbc94ea6028b13c5a9f4e8da9b14ba">color</a>;</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>        }</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    }</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span> </div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    <span class="comment">//Invert colors for cargo parts with stuff in them</span></div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>    <span class="keywordtype">int</span> cargo_part = <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( p, <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea563fb2626cff0acc6c8273fef3e3a8d0">VPFLAG_CARGO</a>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    <span class="keywordflow">if</span>( cargo_part &gt; 0 &amp;&amp; !<a class="code hl_function" href="classvehicle.html#a983dd9db3cd64078b176a82289e0b260">get_items</a>( cargo_part ).empty() ) {</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="color_8cpp.html#a4306eceb07389bb063f39894f4af0503">invert_color</a>( col );</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>        <span class="keywordflow">return</span> col;</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>    }</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>}</div>
<div class="ttc" id="aclassnc__color_html"><div class="ttname"><a href="classnc__color.html">nc_color</a></div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00348">color.h:349</a></div></div>
<div class="ttc" id="aclassvehicle_html_adc20027ac440f3052242f9f6f0441934"><div class="ttname"><a href="classvehicle.html#adc20027ac440f3052242f9f6f0441934">vehicle::part_displayed_at</a></div><div class="ttdeci">int part_displayed_at(const point &amp;dp) const</div><div class="ttdoc">Returns which part (as an index into the parts list) is the one that will be displayed for the given ...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02934">vehicle.cpp:2934</a></div></div>
<div class="ttc" id="aclassvpart__info_html_ac8dbc94ea6028b13c5a9f4e8da9b14ba"><div class="ttname"><a href="classvpart__info.html#ac8dbc94ea6028b13c5a9f4e8da9b14ba">vpart_info::color</a></div><div class="ttdeci">nc_color color</div><div class="ttdoc">Color of part for different states.</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00158">veh_type.h:158</a></div></div>
<div class="ttc" id="aclassvpart__info_html_aebfa77111bf40ee0778c0e0f5fd46c8e"><div class="ttname"><a href="classvpart__info.html#aebfa77111bf40ee0778c0e0f5fd46c8e">vpart_info::color_broken</a></div><div class="ttdeci">nc_color color_broken</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00159">veh_type.h:159</a></div></div>
<div class="ttc" id="acolor_8cpp_html_a4306eceb07389bb063f39894f4af0503"><div class="ttname"><a href="color_8cpp.html#a4306eceb07389bb063f39894f4af0503">invert_color</a></div><div class="ttdeci">nc_color invert_color(const nc_color &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="color_8cpp_source.html#l00503">color.cpp:503</a></div></div>
<div class="ttc" id="acolor_8h_html_a2d8f37367a34632745626276dd4c9da6"><div class="ttname"><a href="color_8h.html#a2d8f37367a34632745626276dd4c9da6">c_black</a></div><div class="ttdeci">#define c_black</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00017">color.h:17</a></div></div>
<div class="ttc" id="acolor_8h_html_aab11865a3631a7ce78da82b7fb386b71"><div class="ttname"><a href="color_8h.html#aab11865a3631a7ce78da82b7fb386b71">c_light_red</a></div><div class="ttdeci">#define c_light_red</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00027">color.h:27</a></div></div>
<div class="ttc" id="acolor_8h_html_af0a87eaef36305269f4506dfa34d94c0"><div class="ttname"><a href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a></div><div class="ttdeci">#define c_red</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00021">color.h:21</a></div></div>
<div class="ttc" id="aenums_8h_html_ac7c2392f800a8be2feb093ef5fe48d40a4dc2e2416faefa33a23a45ed367e9fa6"><div class="ttname"><a href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40a4dc2e2416faefa33a23a45ed367e9fa6">exact</a></div><div class="ttdeci">@ exact</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00071">enums.h:71</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a21dd96f64237acd62065510e4417c9a4"><div class="ttname"><a href="namespaceiexamine.html#a21dd96f64237acd62065510e4417c9a4">iexamine::curtains</a></div><div class="ttdeci">void curtains(player &amp;p, const tripoint &amp;examp)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04000">iexamine.cpp:4000</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307ea0d07a337e0ed3f6ea9db65158b9d33d2"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea0d07a337e0ed3f6ea9db65158b9d33d2">VPFLAG_CURTAIN</a></div><div class="ttdeci">@ VPFLAG_CURTAIN</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00061">veh_type.h:61</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307ead1fb8cdaa5d9f3fbd6295b9c6302e6fe"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ead1fb8cdaa5d9f3fbd6295b9c6302e6fe">VPFLAG_WINDOW</a></div><div class="ttdeci">@ VPFLAG_WINDOW</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00060">veh_type.h:60</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="color_8h_source.html#l00017">c_black</a>, <a class="el" href="color_8h_source.html#l00027">c_light_red</a>, <a class="el" href="color_8h_source.html#l00021">c_red</a>, <a class="el" href="veh__type_8h_source.html#l00158">vpart_info::color</a>, <a class="el" href="veh__type_8h_source.html#l00159">vpart_info::color_broken</a>, <a class="el" href="iexamine_8cpp_source.html#l04000">iexamine::curtains()</a>, <a class="el" href="enums_8h_source.html#l00071">exact</a>, <a class="el" href="vehicle_8cpp_source.html#l05288">get_items()</a>, <a class="el" href="color_8cpp_source.html#l00503">invert_color()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01463">open()</a>, <a class="el" href="vehicle_8cpp_source.html#l02934">part_displayed_at()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8cpp_source.html#l02518">part_with_feature()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="veh__type_8h_source.html#l00032">VPFLAG_ARMOR</a>, <a class="el" href="veh__type_8h_source.html#l00062">VPFLAG_CARGO</a>, <a class="el" href="veh__type_8h_source.html#l00061">VPFLAG_CURTAIN</a>, and <a class="el" href="veh__type_8h_source.html#l00060">VPFLAG_WINDOW</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02239">veh_interact::display_veh()</a>, and <a class="el" href="map_8cpp_source.html#l05855">map::draw_maptile()</a>.</p>

</div>
</div>
<a id="aa10bbf2045f3581a65049d7b7b5071ae" name="aa10bbf2045f3581a65049d7b7b5071ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa10bbf2045f3581a65049d7b7b5071ae">&#9670;&nbsp;</a></span>part_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::part_count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06887">6887</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06888" name="l06888"></a><span class="lineno"> 6888</span>{</div>
<div class="line"><a id="l06889" name="l06889"></a><span class="lineno"> 6889</span>    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size() );</div>
<div class="line"><a id="l06890" name="l06890"></a><span class="lineno"> 6890</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02986">veh_interact::complete_vehicle()</a>, <a class="el" href="grab_8cpp_source.html#l00021">game::grabbed_veh_move()</a>, <a class="el" href="map_8cpp_source.html#l06824">map::loadn()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="faction__camp_8cpp_source.html#l02446">basecamp::start_garage_chop()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l00633">unfold_vehicle_iuse::use()</a>, and <a class="el" href="activity__item__handling_8cpp_source.html#l00908">vehicle_activity()</a>.</p>

</div>
</div>
<a id="adc20027ac440f3052242f9f6f0441934" name="adc20027ac440f3052242f9f6f0441934"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc20027ac440f3052242f9f6f0441934">&#9670;&nbsp;</a></span>part_displayed_at()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::part_displayed_at </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>dp</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns which part (as an index into the parts list) is the one that will be displayed for the given square. </p>
<p >Returns -1 if there are no parts in that square. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dp</td><td>The local coordinate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The index of the part that will be displayed. </dd></dl>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02934">2934</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02935" name="l02935"></a><span class="lineno"> 2935</span>{</div>
<div class="line"><a id="l02936" name="l02936"></a><span class="lineno"> 2936</span>    <span class="comment">// Z-order is implicitly defined in game::load_vehiclepart, but as</span></div>
<div class="line"><a id="l02937" name="l02937"></a><span class="lineno"> 2937</span>    <span class="comment">// numbers directly set on parts rather than constants that can be</span></div>
<div class="line"><a id="l02938" name="l02938"></a><span class="lineno"> 2938</span>    <span class="comment">// used elsewhere. A future refactor might be nice but this way</span></div>
<div class="line"><a id="l02939" name="l02939"></a><span class="lineno"> 2939</span>    <span class="comment">// it&#39;s clear where the magic number comes from.</span></div>
<div class="line"><a id="l02940" name="l02940"></a><span class="lineno"> 2940</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> ON_ROOF_Z = 9;</div>
<div class="line"><a id="l02941" name="l02941"></a><span class="lineno"> 2941</span> </div>
<div class="line"><a id="l02942" name="l02942"></a><span class="lineno"> 2942</span>    std::vector&lt;int&gt; parts_in_square = <a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( dp, <span class="keyword">true</span> );</div>
<div class="line"><a id="l02943" name="l02943"></a><span class="lineno"> 2943</span> </div>
<div class="line"><a id="l02944" name="l02944"></a><span class="lineno"> 2944</span>    <span class="keywordflow">if</span>( parts_in_square.empty() ) {</div>
<div class="line"><a id="l02945" name="l02945"></a><span class="lineno"> 2945</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l02946" name="l02946"></a><span class="lineno"> 2946</span>    }</div>
<div class="line"><a id="l02947" name="l02947"></a><span class="lineno"> 2947</span> </div>
<div class="line"><a id="l02948" name="l02948"></a><span class="lineno"> 2948</span>    <span class="keywordtype">bool</span> in_vehicle = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.in_vehicle;</div>
<div class="line"><a id="l02949" name="l02949"></a><span class="lineno"> 2949</span>    <span class="keywordflow">if</span>( in_vehicle ) {</div>
<div class="line"><a id="l02950" name="l02950"></a><span class="lineno"> 2950</span>        <span class="comment">// They&#39;re in a vehicle, but are they in /this/ vehicle?</span></div>
<div class="line"><a id="l02951" name="l02951"></a><span class="lineno"> 2951</span>        std::vector&lt;int&gt; psg_parts = <a class="code hl_function" href="classvehicle.html#ab429af6376b555746f92158331f2a4cf">boarded_parts</a>();</div>
<div class="line"><a id="l02952" name="l02952"></a><span class="lineno"> 2952</span>        in_vehicle = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02953" name="l02953"></a><span class="lineno"> 2953</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;psg_part : psg_parts ) {</div>
<div class="line"><a id="l02954" name="l02954"></a><span class="lineno"> 2954</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#af02a0418851ddf50fcc810951d77b076">get_passenger</a>( psg_part ) == &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ) {</div>
<div class="line"><a id="l02955" name="l02955"></a><span class="lineno"> 2955</span>                in_vehicle = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02956" name="l02956"></a><span class="lineno"> 2956</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02957" name="l02957"></a><span class="lineno"> 2957</span>            }</div>
<div class="line"><a id="l02958" name="l02958"></a><span class="lineno"> 2958</span>        }</div>
<div class="line"><a id="l02959" name="l02959"></a><span class="lineno"> 2959</span>    }</div>
<div class="line"><a id="l02960" name="l02960"></a><span class="lineno"> 2960</span> </div>
<div class="line"><a id="l02961" name="l02961"></a><span class="lineno"> 2961</span>    <span class="keywordtype">int</span> hide_z_at_or_above = ( in_vehicle ) ? ( ON_ROOF_Z ) : INT_MAX;</div>
<div class="line"><a id="l02962" name="l02962"></a><span class="lineno"> 2962</span> </div>
<div class="line"><a id="l02963" name="l02963"></a><span class="lineno"> 2963</span>    <span class="keywordtype">int</span> top_part = 0;</div>
<div class="line"><a id="l02964" name="l02964"></a><span class="lineno"> 2964</span>    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> index = 1; <a class="code hl_enumvalue" href="namespacedetail.html#ac4c79842ec549e8b02145d43a1fbc330a6a992d5529f459a44fee58c733255e86">index</a> &lt; parts_in_square.size(); <a class="code hl_enumvalue" href="namespacedetail.html#ac4c79842ec549e8b02145d43a1fbc330a6a992d5529f459a44fee58c733255e86">index</a>++ ) {</div>
<div class="line"><a id="l02965" name="l02965"></a><span class="lineno"> 2965</span>        <span class="keywordflow">if</span>( ( <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( parts_in_square[top_part] ).z_order &lt;</div>
<div class="line"><a id="l02966" name="l02966"></a><span class="lineno"> 2966</span>              <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( parts_in_square[index] ).z_order ) &amp;&amp;</div>
<div class="line"><a id="l02967" name="l02967"></a><span class="lineno"> 2967</span>            ( <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( parts_in_square[index] ).<a class="code hl_variable" href="classvpart__info.html#a16ca9b50254b09e4fb3968a70c57330a">z_order</a> &lt;</div>
<div class="line"><a id="l02968" name="l02968"></a><span class="lineno"> 2968</span>              hide_z_at_or_above ) ) {</div>
<div class="line"><a id="l02969" name="l02969"></a><span class="lineno"> 2969</span>            top_part = <a class="code hl_enumvalue" href="namespacedetail.html#ac4c79842ec549e8b02145d43a1fbc330a6a992d5529f459a44fee58c733255e86">index</a>;</div>
<div class="line"><a id="l02970" name="l02970"></a><span class="lineno"> 2970</span>        }</div>
<div class="line"><a id="l02971" name="l02971"></a><span class="lineno"> 2971</span>    }</div>
<div class="line"><a id="l02972" name="l02972"></a><span class="lineno"> 2972</span> </div>
<div class="line"><a id="l02973" name="l02973"></a><span class="lineno"> 2973</span>    <span class="keywordflow">return</span> parts_in_square[top_part];</div>
<div class="line"><a id="l02974" name="l02974"></a><span class="lineno"> 2974</span>}</div>
<div class="ttc" id="aclassvpart__info_html_a16ca9b50254b09e4fb3968a70c57330a"><div class="ttname"><a href="classvpart__info.html#a16ca9b50254b09e4fb3968a70c57330a">vpart_info::z_order</a></div><div class="ttdeci">int z_order</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00329">veh_type.h:329</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l03047">boarded_parts()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l03073">get_passenger()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>, and <a class="el" href="veh__type_8h_source.html#l00329">vpart_info::z_order</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l05489">map::add_splatter()</a>, <a class="el" href="veh__interact_8cpp_source.html#l00536">veh_interact::cant_do()</a>, <a class="el" href="veh__interact_8cpp_source.html#l01979">veh_interact::do_change_shape()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02100">veh_interact::part_at()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00082">part_color()</a>, <a class="el" href="vehicle_8cpp_source.html#l02450">vpart_position::part_displayed()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00055">part_id_string()</a>, and <a class="el" href="vehicle__display_8cpp_source.html#l00034">part_sym()</a>.</p>

</div>
</div>
<a id="a27cec1366be7bf296d9c483a40833120" name="a27cec1366be7bf296d9c483a40833120"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27cec1366be7bf296d9c483a40833120">&#9670;&nbsp;</a></span>part_epower_w()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::part_epower_w </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01208">1208</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span>{</div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span>    <span class="keywordtype">int</span> e = <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( index ).<a class="code hl_variable" href="classvpart__info.html#a0a939666602dd133e501b7cdf1f01eaa">epower</a>;</div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>    <span class="keywordflow">if</span>( e &lt; 0 ) {</div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span>        <span class="keywordflow">return</span> e; <span class="comment">// Consumers always draw full power, even if broken</span></div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span>    }</div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span>    <span class="keywordflow">return</span> e * <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_enumvalue" href="namespacedetail.html#ac4c79842ec549e8b02145d43a1fbc330a6a992d5529f459a44fee58c733255e86">index</a> ].health_percent();</div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="veh__type_8h_source.html#l00185">vpart_info::epower</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03297">basic_consumption()</a>, <a class="el" href="vehicle_8cpp_source.html#l04585">max_reactor_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04619">power_parts()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00918">start_engine()</a>, <a class="el" href="vehicle_8cpp_source.html#l04482">total_alternator_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04496">total_engine_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04514">total_solar_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04561">total_water_wheel_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04536">total_wind_epower_w()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06657">update_time()</a>.</p>

</div>
</div>
<a id="a396e319b27729d4c423b3d096e657bf9" name="a396e319b27729d4c423b3d096e657bf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a396e319b27729d4c423b3d096e657bf9">&#9670;&nbsp;</a></span>part_flag() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::part_flag </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02875">2875</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02876" name="l02876"></a><span class="lineno"> 2876</span>{</div>
<div class="line"><a id="l02877" name="l02877"></a><span class="lineno"> 2877</span>    <span class="keywordflow">if</span>( part &lt; 0 || part &gt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size() ) || <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].removed ) {</div>
<div class="line"><a id="l02878" name="l02878"></a><span class="lineno"> 2878</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02879" name="l02879"></a><span class="lineno"> 2879</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02880" name="l02880"></a><span class="lineno"> 2880</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ).<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( flag );</div>
<div class="line"><a id="l02881" name="l02881"></a><span class="lineno"> 2881</span>    }</div>
<div class="line"><a id="l02882" name="l02882"></a><span class="lineno"> 2882</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="veh__type_8h_source.html#l00336">vpart_info::has_flag()</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02986">veh_interact::complete_vehicle()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00173">control_doors()</a>, <a class="el" href="vehicle_8cpp_source.html#l06173">damage()</a>, <a class="el" href="vehicle_8cpp_source.html#l06437">damage_direct()</a>, <a class="el" href="vehicle_8cpp_source.html#l01112">has_security_working()</a>, <a class="el" href="vehicle_8cpp_source.html#l00240">vehicle_stack::max_volume()</a>, <a class="el" href="vehicle_8cpp_source.html#l02645">next_part_to_close()</a>, <a class="el" href="vehicle_8cpp_source.html#l02664">next_part_to_open()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01514">open_all_at()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00470">part_collision()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00055">part_id_string()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00034">part_sym()</a>, <a class="el" href="vehicle_8cpp_source.html#l01149">part_vpower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l02501">part_with_feature()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00149">print_part_list()</a>, <a class="el" href="map_8cpp_source.html#l04474">process_vehicle_items()</a>, <a class="el" href="vehicle_8cpp_source.html#l06106">refresh_insides()</a>, <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l02976">roof_at_part()</a>, <a class="el" href="pathfinding_8cpp_source.html#l00194">map::route()</a>, <a class="el" href="vehicle_8cpp_source.html#l06067">shed_loose_parts()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00492">smash_security_system()</a>, <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>, <a class="el" href="veh__interact_8cpp_source.html#l00703">veh_interact::update_part_requirements()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l01764">use_harness()</a>.</p>

</div>
</div>
<a id="a22ccc7dfff6c973a0f33151c75b455a9" name="a22ccc7dfff6c973a0f33151c75b455a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22ccc7dfff6c973a0f33151c75b455a9">&#9670;&nbsp;</a></span>part_flag() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::part_flag </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307e">vpart_bitflags</a>&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02884">2884</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02885" name="l02885"></a><span class="lineno"> 2885</span>{</div>
<div class="line"><a id="l02886" name="l02886"></a><span class="lineno"> 2886</span>    <span class="keywordflow">if</span>( part &lt; 0 || part &gt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size() ) || <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].removed ) {</div>
<div class="line"><a id="l02887" name="l02887"></a><span class="lineno"> 2887</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02888" name="l02888"></a><span class="lineno"> 2888</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02889" name="l02889"></a><span class="lineno"> 2889</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ).<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( flag );</div>
<div class="line"><a id="l02890" name="l02890"></a><span class="lineno"> 2890</span>    }</div>
<div class="line"><a id="l02891" name="l02891"></a><span class="lineno"> 2891</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="veh__type_8h_source.html#l00336">vpart_info::has_flag()</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

</div>
</div>
<a id="abc549123dad32242312ada68c18ef0ce" name="abc549123dad32242312ada68c18ef0ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc549123dad32242312ada68c18ef0ce">&#9670;&nbsp;</a></span>part_id_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="type__id_8h.html#a01bb48ae3e1e67dbfa6a3a9679dc1b13">vpart_id</a> vehicle::part_id_string </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char &amp;&#160;</td>
          <td class="paramname"><em>part_mod</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__display_8cpp_source.html#l00055">55</a> of file <a class="el" href="vehicle__display_8cpp_source.html">vehicle_display.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>{</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>    part_mod = 0;</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>    <span class="keywordflow">if</span>( p &lt; 0 || p &gt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size() ) || <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].removed ) {</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">vpart_id::NULL_ID</a>();</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>    }</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span> </div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>    <span class="keywordtype">int</span> displayed_part = <a class="code hl_function" href="classvehicle.html#adc20027ac440f3052242f9f6f0441934">part_displayed_at</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].mount );</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    <span class="keywordflow">if</span>( displayed_part &lt; 0 || displayed_part &gt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size() ) ||</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>        <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ displayed_part ].removed ) {</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">vpart_id::NULL_ID</a>();</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>    }</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span> </div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>    <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">vpart_id</a> idinfo = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[displayed_part].proxy_part_id == <a class="code hl_function" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">vpart_id::NULL_ID</a>() ?</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>                            <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[displayed_part].id : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[displayed_part].proxy_part_id;</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( displayed_part, <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea812fb775f113f8e70717ffcf2dacf15f">VPFLAG_OPENABLE</a> ) &amp;&amp; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[displayed_part].<a class="code hl_function" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">open</a> ) {</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>        <span class="comment">// open</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>        part_mod = 1;</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ displayed_part ].is_broken() ) {</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>        <span class="comment">// broken</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>        part_mod = 2;</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    }</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span> </div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>    <span class="keywordflow">return</span> idinfo;</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">string_id&lt; vpart_info &gt;::NULL_ID()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01463">open()</a>, <a class="el" href="vehicle_8cpp_source.html#l02934">part_displayed_at()</a>, <a class="el" href="vehicle_8cpp_source.html#l02875">part_flag()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="veh__type_8h_source.html#l00044">VPFLAG_OPENABLE</a>.</p>

<p class="reference">Referenced by <a class="el" href="editmap_8cpp_source.html#l00503">editmap::draw_main_ui_overlay()</a>.</p>

</div>
</div>
<a id="aab4917d0f78fe4df1c8f5303fdf2b86d" name="aab4917d0f78fe4df1c8f5303fdf2b86d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab4917d0f78fe4df1c8f5303fdf2b86d">&#9670;&nbsp;</a></span>part_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classvpart__info.html">vpart_info</a> &amp; vehicle::part_info </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>include_removed</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01137">1137</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>{</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>    <span class="keywordflow">if</span>( index &lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size() ) ) {</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>        <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[index].removed || include_removed ) {</div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_enumvalue" href="namespacedetail.html#ac4c79842ec549e8b02145d43a1fbc330a6a992d5529f459a44fee58c733255e86">index</a>].info();</div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>        }</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>    }</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">vpart_id::NULL_ID</a>().<a class="code hl_function" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>();</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">string_id&lt; vpart_info &gt;::NULL_ID()</a>, <a class="el" href="achievement_8cpp_source.html#l00058">string_id&lt; T &gt;::obj()</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l00317">add_missing_frames()</a>, <a class="el" href="vehicle_8cpp_source.html#l02745">all_parts_at_location()</a>, <a class="el" href="vehicle_8cpp_source.html#l03747">average_or_rating()</a>, <a class="el" href="vehicle_8cpp_source.html#l06338">break_off()</a>, <a class="el" href="lightmap_8cpp_source.html#l01224">map::build_seen_cache()</a>, <a class="el" href="vehicle_8cpp_source.html#l01271">can_mount()</a>, <a class="el" href="vehicle_8cpp_source.html#l01388">can_unmount()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01478">close()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00354">collision()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00369">control_engines()</a>, <a class="el" href="vehicle_8cpp_source.html#l06173">damage()</a>, <a class="el" href="vehicle_8cpp_source.html#l06252">damage_all()</a>, <a class="el" href="vehicle_8cpp_source.html#l06437">damage_direct()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00885">engine_cold_factor()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00899">engine_start_time()</a>, <a class="el" href="vehicle_8cpp_source.html#l06409">explode_fuel()</a>, <a class="el" href="vehicle_8cpp_source.html#l02117">find_and_split_vehicles()</a>, <a class="el" href="vehicle_8cpp_source.html#l02789">find_lines_of_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l03179">fuel_left()</a>, <a class="el" href="vehicle_8cpp_source.html#l04340">fuel_usage()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l02608">generic_multi_activity_check_requirement()</a>, <a class="el" href="vehicle_8cpp_source.html#l01050">has_engine_conflict()</a>, <a class="el" href="visitable_8cpp_source.html#l00147">has_quality_from_vpart()</a>, <a class="el" href="vehicle_8cpp_source.html#l01239">has_structural_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l01484">is_connected()</a>, <a class="el" href="vehicle_8cpp_source.html#l01081">is_perpetual_type()</a>, <a class="el" href="visitable_8cpp_source.html#l00255">max_quality_from_vpart()</a>, <a class="el" href="avatar__action_8cpp_source.html#l00090">avatar_action::move()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l03644">noise_and_smoke()</a>, <a class="el" href="handle__action_8cpp_source.html#l00510">open()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01463">open()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00470">part_collision()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00082">part_color()</a>, <a class="el" href="vehicle_8cpp_source.html#l02934">part_displayed_at()</a>, <a class="el" href="vehicle_8cpp_source.html#l01208">part_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l02875">part_flag()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00034">part_sym()</a>, <a class="el" href="vehicle_8cpp_source.html#l01149">part_vpower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04619">power_parts()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00149">print_part_list()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00160">put_into_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l02976">roof_at_part()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00433">select_engine()</a>, <a class="el" href="vehicle_8cpp_source.html#l00936">smash()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00492">smash_security_system()</a>, <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00918">start_engine()</a>, <a class="el" href="vehicle_8cpp_source.html#l04140">sufficient_wheel_config()</a>, <a class="el" href="vehicle_8cpp_source.html#l03333">total_power_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04802">distribution_graph::traverse()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00908">vehicle_activity()</a>, <a class="el" href="map_8cpp_source.html#l00741">map::vehicle_vehicle_collision()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l01501">map::vehicle_wheel_traction()</a>.</p>

</div>
</div>
<a id="a256bff136536ed8e38b84521c1450a6a" name="a256bff136536ed8e38b84521c1450a6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a256bff136536ed8e38b84521c1450a6a">&#9670;&nbsp;</a></span>part_removal_cleanup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::part_removal_cleanup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01940">1940</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01941" name="l01941"></a><span class="lineno"> 1941</span>{</div>
<div class="line"><a id="l01942" name="l01942"></a><span class="lineno"> 1942</span>    <span class="keywordtype">bool</span> changed = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01943" name="l01943"></a><span class="lineno"> 1943</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01944" name="l01944"></a><span class="lineno"> 1944</span>    <span class="keywordflow">for</span>( std::vector&lt;vehicle_part&gt;::iterator it = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.begin(); it != <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.end(); <span class="comment">/* noop */</span> ) {</div>
<div class="line"><a id="l01945" name="l01945"></a><span class="lineno"> 1945</span>        <span class="keywordflow">if</span>( it-&gt;removed ) {</div>
<div class="line"><a id="l01946" name="l01946"></a><span class="lineno"> 1946</span>            <span class="keyword">auto</span> items = <a class="code hl_function" href="classvehicle.html#a983dd9db3cd64078b176a82289e0b260">get_items</a>( std::distance( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.begin(), it ) );</div>
<div class="line"><a id="l01947" name="l01947"></a><span class="lineno"> 1947</span>            <span class="keywordflow">while</span>( !items.empty() ) {</div>
<div class="line"><a id="l01948" name="l01948"></a><span class="lineno"> 1948</span>                items.erase( items.begin() );</div>
<div class="line"><a id="l01949" name="l01949"></a><span class="lineno"> 1949</span>            }</div>
<div class="line"><a id="l01950" name="l01950"></a><span class="lineno"> 1950</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;pt = <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( *it );</div>
<div class="line"><a id="l01951" name="l01951"></a><span class="lineno"> 1951</span>            here.<a class="code hl_function" href="classmap.html#a5fdaa85d36d4c8b742ea050d4c07a7b3">clear_vehicle_point_from_cache</a>( <span class="keyword">this</span>, pt );</div>
<div class="line"><a id="l01952" name="l01952"></a><span class="lineno"> 1952</span>            it = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.erase( it );</div>
<div class="line"><a id="l01953" name="l01953"></a><span class="lineno"> 1953</span>            changed = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01954" name="l01954"></a><span class="lineno"> 1954</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01955" name="l01955"></a><span class="lineno"> 1955</span>            ++it;</div>
<div class="line"><a id="l01956" name="l01956"></a><span class="lineno"> 1956</span>        }</div>
<div class="line"><a id="l01957" name="l01957"></a><span class="lineno"> 1957</span>    }</div>
<div class="line"><a id="l01958" name="l01958"></a><span class="lineno"> 1958</span>    <a class="code hl_variable" href="classvehicle.html#ab2aaa937610c71ab4b8ff3ffdfa4902d">removed_part_count</a> = 0;</div>
<div class="line"><a id="l01959" name="l01959"></a><span class="lineno"> 1959</span>    <span class="keywordflow">if</span>( changed || <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.empty() ) {</div>
<div class="line"><a id="l01960" name="l01960"></a><span class="lineno"> 1960</span>        <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l01961" name="l01961"></a><span class="lineno"> 1961</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.empty() ) {</div>
<div class="line"><a id="l01962" name="l01962"></a><span class="lineno"> 1962</span>            here.<a class="code hl_function" href="classmap.html#ac7f59f4bc6fad84a8d8c0ddd4e023734">destroy_vehicle</a>( <span class="keyword">this</span> );</div>
<div class="line"><a id="l01963" name="l01963"></a><span class="lineno"> 1963</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01964" name="l01964"></a><span class="lineno"> 1964</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01965" name="l01965"></a><span class="lineno"> 1965</span>            here.<a class="code hl_function" href="classmap.html#aa51d3d7bfa9acfbc62e9dbaac9450fc1">add_vehicle_to_cache</a>( <span class="keyword">this</span> );</div>
<div class="line"><a id="l01966" name="l01966"></a><span class="lineno"> 1966</span>        }</div>
<div class="line"><a id="l01967" name="l01967"></a><span class="lineno"> 1967</span>    }</div>
<div class="line"><a id="l01968" name="l01968"></a><span class="lineno"> 1968</span>    <a class="code hl_function" href="classvehicle.html#af3cd05d2cba38784e106793c3ca13147">shift_if_needed</a>();</div>
<div class="line"><a id="l01969" name="l01969"></a><span class="lineno"> 1969</span>    <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>(); <span class="comment">// Rebuild cached indices</span></div>
<div class="line"><a id="l01970" name="l01970"></a><span class="lineno"> 1970</span>    <a class="code hl_variable" href="classvehicle.html#ac1e6fe4cf22c08ceb542a7a3d515268b">coeff_air_dirty</a> = <a class="code hl_variable" href="classvehicle.html#a62e8354926b0f973a2a0ec1db3deb997">coeff_air_changed</a>;</div>
<div class="line"><a id="l01971" name="l01971"></a><span class="lineno"> 1971</span>    <a class="code hl_variable" href="classvehicle.html#a62e8354926b0f973a2a0ec1db3deb997">coeff_air_changed</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01972" name="l01972"></a><span class="lineno"> 1972</span>}</div>
<div class="ttc" id="aclassmap_html_aa51d3d7bfa9acfbc62e9dbaac9450fc1"><div class="ttname"><a href="classmap.html#aa51d3d7bfa9acfbc62e9dbaac9450fc1">map::add_vehicle_to_cache</a></div><div class="ttdeci">void add_vehicle_to_cache(vehicle *)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00261">map.cpp:261</a></div></div>
<div class="ttc" id="aclassvehicle_html_ab2aaa937610c71ab4b8ff3ffdfa4902d"><div class="ttname"><a href="classvehicle.html#ab2aaa937610c71ab4b8ff3ffdfa4902d">vehicle::removed_part_count</a></div><div class="ttdeci">int removed_part_count</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01830">vehicle.h:1830</a></div></div>
<div class="ttc" id="aclassvehicle_html_af3cd05d2cba38784e106793c3ca13147"><div class="ttname"><a href="classvehicle.html#af3cd05d2cba38784e106793c3ca13147">vehicle::shift_if_needed</a></div><div class="ttdeci">bool shift_if_needed()</div><div class="ttdoc">Detect if the vehicle is currently missing a 0,0 part, and adjust if necessary.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06310">vehicle.cpp:6310</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="map_8cpp_source.html#l00261">map::add_vehicle_to_cache()</a>, <a class="el" href="map_8cpp_source.html#l00285">map::clear_vehicle_point_from_cache()</a>, <a class="el" href="vehicle_8h_source.html#l01911">coeff_air_changed</a>, <a class="el" href="vehicle_8h_source.html#l01905">coeff_air_dirty</a>, <a class="el" href="map_8cpp_source.html#l00384">map::destroy_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l05288">get_items()</a>, <a class="el" href="map_8cpp_source.html#l00141">get_map()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="vehicle_8h_source.html#l01830">removed_part_count</a>, and <a class="el" href="vehicle_8cpp_source.html#l06310">shift_if_needed()</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02986">veh_interact::complete_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l02004">remove_carried_vehicle()</a>, and <a class="el" href="veh__utils_8cpp_source.html#l00109">veh_utils::repair_part()</a>.</p>

</div>
</div>
<a id="a55aa2e0015efe2254f39fc2309257b2b" name="a55aa2e0015efe2254f39fc2309257b2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55aa2e0015efe2254f39fc2309257b2b">&#9670;&nbsp;</a></span>part_sym()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char vehicle::part_sym </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>exact</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__display_8cpp_source.html#l00034">34</a> of file <a class="el" href="vehicle__display_8cpp_source.html">vehicle_display.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>{</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>    <span class="keywordflow">if</span>( p &lt; 0 || p &gt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size() ) || <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].removed ) {</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>        <span class="keywordflow">return</span> <span class="charliteral">&#39; &#39;</span>;</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>    }</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span> </div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> displayed_part = <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40a4dc2e2416faefa33a23a45ed367e9fa6">exact</a> ? p : <a class="code hl_function" href="classvehicle.html#adc20027ac440f3052242f9f6f0441934">part_displayed_at</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].mount );</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span> </div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( displayed_part, <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea812fb775f113f8e70717ffcf2dacf15f">VPFLAG_OPENABLE</a> ) &amp;&amp; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[displayed_part].<a class="code hl_function" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">open</a> ) {</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>        <span class="comment">// open door</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>        <span class="keywordflow">return</span> <span class="charliteral">&#39;\&#39;&#39;</span>;</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[displayed_part].is_broken() ?</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>               <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( displayed_part ).<a class="code hl_variable" href="classvpart__info.html#ab7cb0304de42c23f04fc90caf815a06b">sym_broken</a> : ( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[displayed_part].proxy_sym == <span class="charliteral">&#39;\0&#39;</span> ?  <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>(</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>                           displayed_part ).<a class="code hl_variable" href="classvpart__info.html#a46967d5509adddb65f678de989970bf8">sym</a> : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[displayed_part].proxy_sym );</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>    }</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>}</div>
<div class="ttc" id="aclassvpart__info_html_a46967d5509adddb65f678de989970bf8"><div class="ttname"><a href="classvpart__info.html#a46967d5509adddb65f678de989970bf8">vpart_info::sym</a></div><div class="ttdeci">int sym</div><div class="ttdoc">Symbol of part which will be translated as follows: y, u, n, b to NW, NE, SE, SW lines correspondingl...</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00166">veh_type.h:166</a></div></div>
<div class="ttc" id="aclassvpart__info_html_ab7cb0304de42c23f04fc90caf815a06b"><div class="ttname"><a href="classvpart__info.html#ab7cb0304de42c23f04fc90caf815a06b">vpart_info::sym_broken</a></div><div class="ttdeci">char sym_broken</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00167">veh_type.h:167</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="enums_8h_source.html#l00071">exact</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01463">open()</a>, <a class="el" href="vehicle_8cpp_source.html#l02934">part_displayed_at()</a>, <a class="el" href="vehicle_8cpp_source.html#l02875">part_flag()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="veh__type_8h_source.html#l00166">vpart_info::sym</a>, <a class="el" href="veh__type_8h_source.html#l00167">vpart_info::sym_broken</a>, and <a class="el" href="veh__type_8h_source.html#l00044">VPFLAG_OPENABLE</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02239">veh_interact::display_veh()</a>, <a class="el" href="map_8cpp_source.html#l06046">map::draw_from_above()</a>, and <a class="el" href="map_8cpp_source.html#l05855">map::draw_maptile()</a>.</p>

</div>
</div>
<a id="a5246baeafa78272d858f6cce466579e4" name="a5246baeafa78272d858f6cce466579e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5246baeafa78272d858f6cce466579e4">&#9670;&nbsp;</a></span>part_vpower_w()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::part_vpower_w </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>at_full_hp</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
Strength increases power produced for MUSCLE_* vehicles <p >wind-powered vehicles have differing power depending on wind direction</p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01149">1149</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>{</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_enumvalue" href="namespacedetail.html#ac4c79842ec549e8b02145d43a1fbc330a6a992d5529f459a44fee58c733255e86">index</a> ];</div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>    <span class="keywordtype">int</span> pwr = vp.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_variable" href="classvpart__info.html#a7118bbee705f88aeec2a25e57b32e5ee">power</a>;</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( index, <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea29303a852c248ddb989e3ea9b8e95354">VPFLAG_ENGINE</a> ) ) {</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>        <span class="keywordflow">if</span>( pwr == 0 ) {</div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>            pwr = <a class="code hl_function" href="classvehicle.html#ac0c3e6e0d42b9e091fef6a799fd56b7a">vhp_to_watts</a>( vp.<a class="code hl_variable" href="structvehicle__part.html#a5122e284fbcf0f14f0e6022e01b5b574">base</a>.<a class="code hl_function" href="classitem.html#adad8973d1533a919bf44d71415754600">engine_displacement</a>() );</div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>        }</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>        <span class="keywordflow">if</span>( vp.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_variable" href="classvpart__info.html#ae9c50d26b3cc88604ae85573ee6599cd">fuel_type</a> == <a class="code hl_variable" href="vehicle_8cpp.html#a944ba9be1d911a61e9ca62af989355fd">fuel_type_animal</a> ) {</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>            <a class="code hl_class" href="classmonster.html">monster</a> *mon = <a class="code hl_function" href="classvehicle.html#ab266c3250ffece69b5c2ddc9897d80d3">get_pet</a>( index );</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>            <span class="keywordflow">if</span>( mon != <span class="keyword">nullptr</span> &amp;&amp; mon-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="vehicle_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a> ) ) {</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>                <span class="comment">// An animal that can carry twice as much weight, can pull a cart twice as hard.</span></div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>                pwr = mon-&gt;<a class="code hl_function" href="classCreature.html#a261dff3caa6aabe255ae9d3eaa94d3de">get_speed</a>() * mon-&gt;<a class="code hl_function" href="classmonster.html#a4c251cc737554fe0bde7f7e4f68b8ef5">get_size</a>() * 3</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>                      * ( mon-&gt;<a class="code hl_function" href="classmonster.html#ad5a95de73cf74896f56346a1ff02c572">get_mountable_weight_ratio</a>() * 5 );</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>                pwr = 0;</div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>            }</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>        }<span class="comment"></span></div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span><span class="comment">        ///\EFFECT_STR increases power produced for MUSCLE_* vehicles</span></div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span><span class="comment"></span>        pwr += ( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.str_cur - 8 ) * <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( index ).<a class="code hl_function" href="classvpart__info.html#adf96c80cbec1bf45c97189c187a278ae">engine_muscle_power_factor</a>();<span class="comment"></span></div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span><span class="comment">        /// wind-powered vehicles have differing power depending on wind direction</span></div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span><span class="comment"></span>        <span class="keywordflow">if</span>( vp.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_variable" href="classvpart__info.html#ae9c50d26b3cc88604ae85573ee6599cd">fuel_type</a> == <a class="code hl_variable" href="vehicle_8cpp.html#aacae8af2b949fe924016b5e370170fc8">fuel_type_wind</a> ) {</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>            <span class="keyword">const</span> <a class="code hl_class" href="classweather__manager.html">weather_manager</a> &amp;<a class="code hl_namespace" href="namespaceweather.html">weather</a> = <a class="code hl_function" href="group__Weather.html#gaa7b33196bf530c8b26654a0adf355165">get_weather</a>();</div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>            <span class="keywordtype">int</span> windpower = <a class="code hl_namespace" href="namespaceweather.html">weather</a>.windspeed;</div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span>            <a class="code hl_struct" href="structrl__vec2d.html">rl_vec2d</a> windvec;</div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>            <span class="keywordtype">double</span> raddir = ( ( <a class="code hl_namespace" href="namespaceweather.html">weather</a>.winddirection + 180 ) % 360 ) * ( <a class="code hl_define" href="math__defines_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> / 180 );</div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>            windvec = windvec.<a class="code hl_function" href="structrl__vec2d.html#aaf8f75e8429d8fe401d6dd9038ff44e2">normalized</a>();</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span>            windvec.<a class="code hl_variable" href="structrl__vec2d.html#ab858570e73d0c1cf161f8c228e18cf56">y</a> = -<a class="code hl_function" href="namespaceunits.html#a9c92bd154caa6182d686cab22405b92e">std::cos</a>( raddir );</div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>            windvec.<a class="code hl_variable" href="structrl__vec2d.html#abdf36ab3ac90fa0979c7cebfd8ffdb58">x</a> = <a class="code hl_function" href="namespaceunits.html#a4b5ee56fbe0ef728f4b190e1282a5d82">std::sin</a>( raddir );</div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>            <a class="code hl_struct" href="structrl__vec2d.html">rl_vec2d</a> fv = <a class="code hl_function" href="classvehicle.html#a2bc8dfdab1fadc47966b0a69520c737c">face_vec</a>();</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>            <span class="keywordtype">double</span> <a class="code hl_function" href="simplexnoise_8cpp.html#ac09abdb6d0f634024e3f63d92542e38f">dot</a> = windvec.<a class="code hl_function" href="structrl__vec2d.html#acc0292005168ba5d844ab15cfe961d72">dot_product</a>( fv );</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="simplexnoise_8cpp.html#ac09abdb6d0f634024e3f63d92542e38f">dot</a> &lt;= 0 ) {</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span>                <a class="code hl_function" href="simplexnoise_8cpp.html#ac09abdb6d0f634024e3f63d92542e38f">dot</a> = std::min( -0.1, <a class="code hl_function" href="simplexnoise_8cpp.html#ac09abdb6d0f634024e3f63d92542e38f">dot</a> );</div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>                <a class="code hl_function" href="simplexnoise_8cpp.html#ac09abdb6d0f634024e3f63d92542e38f">dot</a> = std::max( 0.1, <a class="code hl_function" href="simplexnoise_8cpp.html#ac09abdb6d0f634024e3f63d92542e38f">dot</a> );</div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>            }</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span>            <span class="keywordtype">int</span> windeffectint = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( ( windpower * <a class="code hl_function" href="simplexnoise_8cpp.html#ac09abdb6d0f634024e3f63d92542e38f">dot</a> ) * 200 );</div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span>            pwr = std::max( 1, pwr + windeffectint );</div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>        }</div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span>    }</div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span> </div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span>    <span class="keywordflow">if</span>( pwr &lt; 0 ) {</div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>        <span class="keywordflow">return</span> pwr; <span class="comment">// Consumers always draw full power, even if broken</span></div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>    }</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>    <span class="keywordflow">if</span>( at_full_hp ) {</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span>        <span class="keywordflow">return</span> pwr; <span class="comment">// Assume full hp</span></div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>    }</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>    <span class="comment">// Damaged engines give less power, but some engines handle it better</span></div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>    <span class="keywordtype">double</span> health = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_enumvalue" href="namespacedetail.html#ac4c79842ec549e8b02145d43a1fbc330a6a992d5529f459a44fee58c733255e86">index</a>].health_percent();</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span>    <span class="comment">// dpf is 0 for engines that scale power linearly with damage and</span></div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>    <span class="comment">// provides a floor otherwise</span></div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>    <span class="keywordtype">float</span> dpf = <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( index ).<a class="code hl_function" href="classvpart__info.html#a0239f7a46f79b474189c159c0fdb930b">engine_damaged_power_factor</a>();</div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span>    <span class="keywordtype">double</span> effective_percent = dpf + ( ( 1 - dpf ) * health );</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span>    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( pwr * effective_percent );</div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>}</div>
<div class="ttc" id="aclassCreature_html_a261dff3caa6aabe255ae9d3eaa94d3de"><div class="ttname"><a href="classCreature.html#a261dff3caa6aabe255ae9d3eaa94d3de">Creature::get_speed</a></div><div class="ttdeci">virtual int get_speed() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01498">creature.cpp:1498</a></div></div>
<div class="ttc" id="aclassitem_html_adad8973d1533a919bf44d71415754600"><div class="ttname"><a href="classitem.html#adad8973d1533a919bf44d71415754600">item::engine_displacement</a></div><div class="ttdeci">int engine_displacement() const</div><div class="ttdoc">for combustion engines the displacement (cc)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04007">item.cpp:4007</a></div></div>
<div class="ttc" id="aclassmonster_html_a4c251cc737554fe0bde7f7e4f68b8ef5"><div class="ttname"><a href="classmonster.html#a4c251cc737554fe0bde7f7e4f68b8ef5">monster::get_size</a></div><div class="ttdeci">m_size get_size() const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l02668">monster.cpp:2668</a></div></div>
<div class="ttc" id="aclassmonster_html_ad5a95de73cf74896f56346a1ff02c572"><div class="ttname"><a href="classmonster.html#ad5a95de73cf74896f56346a1ff02c572">monster::get_mountable_weight_ratio</a></div><div class="ttdeci">float get_mountable_weight_ratio() const</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l02904">monster.cpp:2904</a></div></div>
<div class="ttc" id="aclassvehicle_html_ac0c3e6e0d42b9e091fef6a799fd56b7a"><div class="ttname"><a href="classvehicle.html#ac0c3e6e0d42b9e091fef6a799fd56b7a">vehicle::vhp_to_watts</a></div><div class="ttdeci">static int vhp_to_watts(int power)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01230">vehicle.cpp:1230</a></div></div>
<div class="ttc" id="aclassvpart__info_html_a0239f7a46f79b474189c159c0fdb930b"><div class="ttname"><a href="classvpart__info.html#a0239f7a46f79b474189c159c0fdb930b">vpart_info::engine_damaged_power_factor</a></div><div class="ttdeci">float engine_damaged_power_factor() const</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8cpp_source.html#l00857">veh_type.cpp:857</a></div></div>
<div class="ttc" id="aclassvpart__info_html_a7118bbee705f88aeec2a25e57b32e5ee"><div class="ttname"><a href="classvpart__info.html#a7118bbee705f88aeec2a25e57b32e5ee">vpart_info::power</a></div><div class="ttdeci">int power</div><div class="ttdoc">For engines and motors this is maximum output (watts) For alternators is engine power consumed (negat...</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00197">veh_type.h:197</a></div></div>
<div class="ttc" id="aclassvpart__info_html_adf96c80cbec1bf45c97189c187a278ae"><div class="ttname"><a href="classvpart__info.html#adf96c80cbec1bf45c97189c187a278ae">vpart_info::engine_muscle_power_factor</a></div><div class="ttdeci">int engine_muscle_power_factor() const</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8cpp_source.html#l00852">veh_type.cpp:852</a></div></div>
<div class="ttc" id="aclassweather__manager_html"><div class="ttname"><a href="classweather__manager.html">weather_manager</a></div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00177">weather.h:178</a></div></div>
<div class="ttc" id="amath__defines_8h_html_ae71449b1cc6e6250b91f539153a7a0d3"><div class="ttname"><a href="math__defines_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a></div><div class="ttdeci">#define M_PI</div><div class="ttdef"><b>Definition:</b> <a href="math__defines_8h_source.html#l00021">math_defines.h:21</a></div></div>
<div class="ttc" id="anamespaceunits_html_a4b5ee56fbe0ef728f4b190e1282a5d82"><div class="ttname"><a href="namespaceunits.html#a4b5ee56fbe0ef728f4b190e1282a5d82">units::sin</a></div><div class="ttdeci">double sin(angle a)</div><div class="ttdef"><b>Definition:</b> <a href="units__angle_8h_source.html#l00052">units_angle.h:52</a></div></div>
<div class="ttc" id="anamespaceunits_html_a9c92bd154caa6182d686cab22405b92e"><div class="ttname"><a href="namespaceunits.html#a9c92bd154caa6182d686cab22405b92e">units::cos</a></div><div class="ttdeci">double cos(angle a)</div><div class="ttdef"><b>Definition:</b> <a href="units__angle_8h_source.html#l00057">units_angle.h:57</a></div></div>
<div class="ttc" id="anamespaceweather_html"><div class="ttname"><a href="namespaceweather.html">weather</a></div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l01150">weather.cpp:1151</a></div></div>
<div class="ttc" id="astructrl__vec2d_html_aaf8f75e8429d8fe401d6dd9038ff44e2"><div class="ttname"><a href="structrl__vec2d.html#aaf8f75e8429d8fe401d6dd9038ff44e2">rl_vec2d::normalized</a></div><div class="ttdeci">rl_vec2d normalized() const</div><div class="ttdef"><b>Definition:</b> <a href="line_8cpp_source.html#l00620">line.cpp:620</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l00440">vehicle_part::base</a>, <a class="el" href="units__angle_8h_source.html#l00057">units::cos()</a>, <a class="el" href="simplexnoise_8cpp_source.html#l00540">dot()</a>, <a class="el" href="line_8cpp_source.html#l00664">rl_vec2d::dot_product()</a>, <a class="el" href="vehicle_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a>, <a class="el" href="veh__type_8cpp_source.html#l00857">vpart_info::engine_damaged_power_factor()</a>, <a class="el" href="item_8cpp_source.html#l04007">item::engine_displacement()</a>, <a class="el" href="veh__type_8cpp_source.html#l00852">vpart_info::engine_muscle_power_factor()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01220">face_vec()</a>, <a class="el" href="veh__type_8h_source.html#l00203">vpart_info::fuel_type</a>, <a class="el" href="vehicle_8cpp.html#a944ba9be1d911a61e9ca62af989355fd">fuel_type_animal</a>, <a class="el" href="vehicle_8cpp.html#aacae8af2b949fe924016b5e370170fc8">fuel_type_wind</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="monster_8cpp_source.html#l02904">monster::get_mountable_weight_ratio()</a>, <a class="el" href="vehicle_8cpp_source.html#l03082">get_pet()</a>, <a class="el" href="monster_8cpp_source.html#l02668">monster::get_size()</a>, <a class="el" href="creature_8cpp_source.html#l01498">Creature::get_speed()</a>, <a class="el" href="weather_8cpp_source.html#l00064">get_weather()</a>, <a class="el" href="creature_8cpp_source.html#l01173">Creature::has_effect()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00519">vehicle_part::info()</a>, <a class="el" href="math__defines_8h_source.html#l00021">M_PI</a>, <a class="el" href="line_8cpp_source.html#l00620">rl_vec2d::normalized()</a>, <a class="el" href="vehicle_8cpp_source.html#l02875">part_flag()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="veh__type_8h_source.html#l00197">vpart_info::power</a>, <a class="el" href="units__angle_8h_source.html#l00052">units::sin()</a>, <a class="el" href="vehicle_8cpp_source.html#l01230">vhp_to_watts()</a>, <a class="el" href="veh__type_8h_source.html#l00056">VPFLAG_ENGINE</a>, <a class="el" href="point__float_8h_source.html#l00012">rl_vec2d::x</a>, and <a class="el" href="point__float_8h_source.html#l00013">rl_vec2d::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l01126">backfire()</a>, <a class="el" href="vehicle_8cpp_source.html#l03297">basic_consumption()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00899">engine_start_time()</a>, <a class="el" href="vehicle_8cpp_source.html#l03644">noise_and_smoke()</a>, <a class="el" href="vehicle_8cpp_source.html#l03333">total_power_w()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04594">update_alternator_load()</a>.</p>

</div>
</div>
<a id="ad8a64866c703516f0746b4e6ee98370c" name="ad8a64866c703516f0746b4e6ee98370c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8a64866c703516f0746b4e6ee98370c">&#9670;&nbsp;</a></span>part_with_feature() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::part_with_feature </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>pt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>unbroken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02523">2523</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02524" name="l02524"></a><span class="lineno"> 2524</span>{</div>
<div class="line"><a id="l02525" name="l02525"></a><span class="lineno"> 2525</span>    std::vector&lt;int&gt; parts_here = <a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( pt, <span class="keyword">false</span> );</div>
<div class="line"><a id="l02526" name="l02526"></a><span class="lineno"> 2526</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;elem : parts_here ) {</div>
<div class="line"><a id="l02527" name="l02527"></a><span class="lineno"> 2527</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( elem, flag ) &amp;&amp; ( !unbroken || !<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ elem ].is_broken() ) ) {</div>
<div class="line"><a id="l02528" name="l02528"></a><span class="lineno"> 2528</span>            <span class="keywordflow">return</span> elem;</div>
<div class="line"><a id="l02529" name="l02529"></a><span class="lineno"> 2529</span>        }</div>
<div class="line"><a id="l02530" name="l02530"></a><span class="lineno"> 2530</span>    }</div>
<div class="line"><a id="l02531" name="l02531"></a><span class="lineno"> 2531</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l02532" name="l02532"></a><span class="lineno"> 2532</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l02875">part_flag()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>.</p>

</div>
</div>
<a id="a00f013bfeaa4b6d44eaa67961f0c1e59" name="a00f013bfeaa4b6d44eaa67961f0c1e59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00f013bfeaa4b6d44eaa67961f0c1e59">&#9670;&nbsp;</a></span>part_with_feature() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::part_with_feature </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>unbroken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02518">2518</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02519" name="l02519"></a><span class="lineno"> 2519</span>{</div>
<div class="line"><a id="l02520" name="l02520"></a><span class="lineno"> 2520</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].mount, flag, unbroken );</div>
<div class="line"><a id="l02521" name="l02521"></a><span class="lineno"> 2521</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8cpp_source.html#l02518">part_with_feature()</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, <a class="el" href="vehicle_8cpp_source.html#l02534">avail_part_with_feature()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02986">veh_interact::complete_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l06173">damage()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l03102">find_auto_consume()</a>, <a class="el" href="vehicle_8cpp_source.html#l03073">get_passenger()</a>, <a class="el" href="vehicle_8cpp_source.html#l03082">get_pet()</a>, <a class="el" href="vehicle_8cpp_source.html#l05874">get_tow_part()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00845">handle_trap()</a>, <a class="el" href="vehicle_8cpp_source.html#l05889">has_tow_attached()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>, <a class="el" href="vehicle_8cpp_source.html#l05939">invalidate_towing()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00470">part_collision()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00082">part_color()</a>, <a class="el" href="vehicle_8cpp_source.html#l02459">vpart_position::part_with_feature()</a>, <a class="el" href="vehicle_8cpp_source.html#l02518">part_with_feature()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l02738">activity_handlers::repair_activity_hack::patch_activity_for_vehicle_welder()</a>, <a class="el" href="vehicle_8cpp_source.html#l05295">place_spawn_items()</a>, <a class="el" href="vehicle_8cpp_source.html#l00277">player_in_control()</a>, <a class="el" href="handle__action_8cpp_source.html#l00439">pldrive()</a>, <a class="el" href="map_8cpp_source.html#l04474">process_vehicle_items()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l06106">refresh_insides()</a>, <a class="el" href="vehicle_8cpp_source.html#l05645">refresh_pivot()</a>, <a class="el" href="vehicle_8cpp_source.html#l06971">refresh_zones()</a>, <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01565">map::shake_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l06067">shed_loose_parts()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00492">smash_security_system()</a>, <a class="el" href="map_8cpp_source.html#l07953">vehicle_caching_internal()</a>, and <a class="el" href="map_8cpp_source.html#l00741">map::vehicle_vehicle_collision()</a>.</p>

</div>
</div>
<a id="ad3776bc7547aa1af7ae7f6d34d0b4668" name="ad3776bc7547aa1af7ae7f6d34d0b4668"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3776bc7547aa1af7ae7f6d34d0b4668">&#9670;&nbsp;</a></span>part_with_feature() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::part_with_feature </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307e">vpart_bitflags</a>&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>unbroken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02501">2501</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02502" name="l02502"></a><span class="lineno"> 2502</span>{</div>
<div class="line"><a id="l02503" name="l02503"></a><span class="lineno"> 2503</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, flag ) &amp;&amp; ( !unbroken || !<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].is_broken() ) ) {</div>
<div class="line"><a id="l02504" name="l02504"></a><span class="lineno"> 2504</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>;</div>
<div class="line"><a id="l02505" name="l02505"></a><span class="lineno"> 2505</span>    }</div>
<div class="line"><a id="l02506" name="l02506"></a><span class="lineno"> 2506</span>    <span class="keyword">const</span> <span class="keyword">auto</span> it = <a class="code hl_variable" href="classvehicle.html#a92654cefac764c60371c47e0b406a991">relative_parts</a>.find( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].mount );</div>
<div class="line"><a id="l02507" name="l02507"></a><span class="lineno"> 2507</span>    <span class="keywordflow">if</span>( it != <a class="code hl_variable" href="classvehicle.html#a92654cefac764c60371c47e0b406a991">relative_parts</a>.end() ) {</div>
<div class="line"><a id="l02508" name="l02508"></a><span class="lineno"> 2508</span>        <span class="keyword">const</span> std::vector&lt;int&gt; &amp;parts_here = it-&gt;second;</div>
<div class="line"><a id="l02509" name="l02509"></a><span class="lineno"> 2509</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;i : parts_here ) {</div>
<div class="line"><a id="l02510" name="l02510"></a><span class="lineno"> 2510</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( i, flag ) &amp;&amp; ( !unbroken || !<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[i].is_broken() ) ) {</div>
<div class="line"><a id="l02511" name="l02511"></a><span class="lineno"> 2511</span>                <span class="keywordflow">return</span> i;</div>
<div class="line"><a id="l02512" name="l02512"></a><span class="lineno"> 2512</span>            }</div>
<div class="line"><a id="l02513" name="l02513"></a><span class="lineno"> 2513</span>        }</div>
<div class="line"><a id="l02514" name="l02514"></a><span class="lineno"> 2514</span>    }</div>
<div class="line"><a id="l02515" name="l02515"></a><span class="lineno"> 2515</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l02516" name="l02516"></a><span class="lineno"> 2516</span>}</div>
<div class="ttc" id="aclassvehicle_html_a92654cefac764c60371c47e0b406a991"><div class="ttname"><a href="classvehicle.html#a92654cefac764c60371c47e0b406a991">vehicle::relative_parts</a></div><div class="ttdeci">std::map&lt; point, std::vector&lt; int &gt; &gt; relative_parts</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01800">vehicle.h:1800</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8cpp_source.html#l02875">part_flag()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="vehicle_8h_source.html#l01800">relative_parts</a>.</p>

</div>
</div>
<a id="a5a4d8dc36f8def16518bc7ba0126c969" name="a5a4d8dc36f8def16518bc7ba0126c969"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a4d8dc36f8def16518bc7ba0126c969">&#9670;&nbsp;</a></span>parts_at_relative()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; int &gt; vehicle::parts_at_relative </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>dp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>use_cache</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02414">2414</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02416" name="l02416"></a><span class="lineno"> 2416</span>{</div>
<div class="line"><a id="l02417" name="l02417"></a><span class="lineno"> 2417</span>    <span class="keywordflow">if</span>( !use_cache ) {</div>
<div class="line"><a id="l02418" name="l02418"></a><span class="lineno"> 2418</span>        std::vector&lt;int&gt; res;</div>
<div class="line"><a id="l02419" name="l02419"></a><span class="lineno"> 2419</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a397b40aa92dd1fd09ee592aa279bc656">get_all_parts</a>() ) {</div>
<div class="line"><a id="l02420" name="l02420"></a><span class="lineno"> 2420</span>            <span class="keywordflow">if</span>( vp.mount() == dp &amp;&amp; !vp.part().removed ) {</div>
<div class="line"><a id="l02421" name="l02421"></a><span class="lineno"> 2421</span>                res.push_back( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( vp.part_index() ) );</div>
<div class="line"><a id="l02422" name="l02422"></a><span class="lineno"> 2422</span>            }</div>
<div class="line"><a id="l02423" name="l02423"></a><span class="lineno"> 2423</span>        }</div>
<div class="line"><a id="l02424" name="l02424"></a><span class="lineno"> 2424</span>        <span class="keywordflow">return</span> res;</div>
<div class="line"><a id="l02425" name="l02425"></a><span class="lineno"> 2425</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02426" name="l02426"></a><span class="lineno"> 2426</span>        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;iter = <a class="code hl_variable" href="classvehicle.html#a92654cefac764c60371c47e0b406a991">relative_parts</a>.find( dp );</div>
<div class="line"><a id="l02427" name="l02427"></a><span class="lineno"> 2427</span>        <span class="keywordflow">if</span>( iter != <a class="code hl_variable" href="classvehicle.html#a92654cefac764c60371c47e0b406a991">relative_parts</a>.end() ) {</div>
<div class="line"><a id="l02428" name="l02428"></a><span class="lineno"> 2428</span>            <span class="keywordflow">return</span> iter-&gt;second;</div>
<div class="line"><a id="l02429" name="l02429"></a><span class="lineno"> 2429</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02430" name="l02430"></a><span class="lineno"> 2430</span>            std::vector&lt;int&gt; res;</div>
<div class="line"><a id="l02431" name="l02431"></a><span class="lineno"> 2431</span>            <span class="keywordflow">return</span> res;</div>
<div class="line"><a id="l02432" name="l02432"></a><span class="lineno"> 2432</span>        }</div>
<div class="line"><a id="l02433" name="l02433"></a><span class="lineno"> 2433</span>    }</div>
<div class="line"><a id="l02434" name="l02434"></a><span class="lineno"> 2434</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l06882">get_all_parts()</a>, and <a class="el" href="vehicle_8h_source.html#l01800">relative_parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l00317">add_missing_frames()</a>, <a class="el" href="vehicle_8cpp_source.html#l06338">break_off()</a>, <a class="el" href="vehicle_8cpp_source.html#l01271">can_mount()</a>, <a class="el" href="vehicle_8cpp_source.html#l01388">can_unmount()</a>, <a class="el" href="vehicle_8cpp_source.html#l03789">coeff_air_drag()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02986">veh_interact::complete_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l06173">damage()</a>, <a class="el" href="explosion_8cpp_source.html#l00344">explosion_handler::do_blast_new()</a>, <a class="el" href="vehicle_8cpp_source.html#l02117">find_and_split_vehicles()</a>, <a class="el" href="visitable_8cpp_source.html#l00147">has_quality_from_vpart()</a>, <a class="el" href="vehicle_8cpp_source.html#l01239">has_structural_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l01484">is_connected()</a>, <a class="el" href="visitable_8cpp_source.html#l00255">max_quality_from_vpart()</a>, <a class="el" href="vehicle_8cpp_source.html#l01654">merge_rackable_vehicle()</a>, <a class="el" href="iuse_8cpp_source.html#l05094">iuse::mop()</a>, <a class="el" href="map_8cpp_source.html#l02803">map::mop_spills()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02122">veh_interact::move_cursor()</a>, <a class="el" href="map__extras_8cpp_source.html#l00336">MapExtras::mx_helicopter()</a>, <a class="el" href="vehicle_8cpp_source.html#l02645">next_part_to_close()</a>, <a class="el" href="vehicle_8cpp_source.html#l02664">next_part_to_open()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01514">open_all_at()</a>, <a class="el" href="vehicle_8cpp_source.html#l02934">part_displayed_at()</a>, <a class="el" href="vehicle_8cpp_source.html#l02523">part_with_feature()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00149">print_part_list()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00242">print_vparts_descs()</a>, <a class="el" href="vehicle_8cpp_source.html#l06106">refresh_insides()</a>, <a class="el" href="vehicle_8cpp_source.html#l02004">remove_carried_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l00151">DefaultRemovePartHandler::removed()</a>, <a class="el" href="vehicle_8cpp_source.html#l02976">roof_at_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l06310">shift_if_needed()</a>, <a class="el" href="vehicle_8cpp_source.html#l00936">smash()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l01823">use_bike_rack()</a>.</p>

</div>
</div>
<a id="af6e46ab36d49708d3e96da5593d4c1f7" name="af6e46ab36d49708d3e96da5593d4c1f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6e46ab36d49708d3e96da5593d4c1f7">&#9670;&nbsp;</a></span>pivot_displacement()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpoint.html">point</a> vehicle::pivot_displacement </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03164">3164</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03165" name="l03165"></a><span class="lineno"> 3165</span>{</div>
<div class="line"><a id="l03166" name="l03166"></a><span class="lineno"> 3166</span>    <span class="comment">// precalc_mounts always produces a result that puts the pivot point at (0,0).</span></div>
<div class="line"><a id="l03167" name="l03167"></a><span class="lineno"> 3167</span>    <span class="comment">// If the pivot point changes, this artificially moves the vehicle, as the position</span></div>
<div class="line"><a id="l03168" name="l03168"></a><span class="lineno"> 3168</span>    <span class="comment">// of the old pivot point will appear to move from (posx+0, posy+0) to some other point</span></div>
<div class="line"><a id="l03169" name="l03169"></a><span class="lineno"> 3169</span>    <span class="comment">// (posx+dx,posy+dy) even if there is no change in vehicle position or rotation.</span></div>
<div class="line"><a id="l03170" name="l03170"></a><span class="lineno"> 3170</span>    <span class="comment">// This method finds that movement so it can be canceled out when actually moving</span></div>
<div class="line"><a id="l03171" name="l03171"></a><span class="lineno"> 3171</span>    <span class="comment">// the vehicle.</span></div>
<div class="line"><a id="l03172" name="l03172"></a><span class="lineno"> 3172</span> </div>
<div class="line"><a id="l03173" name="l03173"></a><span class="lineno"> 3173</span>    <span class="comment">// rotate the old pivot point around the new pivot point with the old rotation angle</span></div>
<div class="line"><a id="l03174" name="l03174"></a><span class="lineno"> 3174</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> dp;</div>
<div class="line"><a id="l03175" name="l03175"></a><span class="lineno"> 3175</span>    <a class="code hl_function" href="classvehicle.html#ad45ae53f6326f7fde4d8e59848470457">coord_translate</a>( <a class="code hl_variable" href="classvehicle.html#a709da7b758c18d51b79311eea6eaca59">pivot_rotation</a>[0], <a class="code hl_variable" href="classvehicle.html#afd4e8e8471b17450205d827dee8a41a5">pivot_anchor</a>[1], <a class="code hl_variable" href="classvehicle.html#afd4e8e8471b17450205d827dee8a41a5">pivot_anchor</a>[0], dp );</div>
<div class="line"><a id="l03176" name="l03176"></a><span class="lineno"> 3176</span>    <span class="keywordflow">return</span> dp.<a class="code hl_function" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>();</div>
<div class="line"><a id="l03177" name="l03177"></a><span class="lineno"> 3177</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l02988">coord_translate()</a>, <a class="el" href="vehicle_8h_source.html#l01889">pivot_anchor</a>, <a class="el" href="vehicle_8h_source.html#l01883">pivot_rotation</a>, and <a class="el" href="point_8h_source.html#l00220">tripoint::xy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>.</p>

</div>
</div>
<a id="a19bf91bbba8085237248e25c7d214ee6" name="a19bf91bbba8085237248e25c7d214ee6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19bf91bbba8085237248e25c7d214ee6">&#9670;&nbsp;</a></span>pivot_point()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structpoint.html">point</a> &amp; vehicle::pivot_point </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05636">5636</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05637" name="l05637"></a><span class="lineno"> 5637</span>{</div>
<div class="line"><a id="l05638" name="l05638"></a><span class="lineno"> 5638</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a4618e6b69581e93ab96d66fc889659c5">pivot_dirty</a> ) {</div>
<div class="line"><a id="l05639" name="l05639"></a><span class="lineno"> 5639</span>        <a class="code hl_function" href="classvehicle.html#abb959a78c449c54bcbd3bc2e834e9663">refresh_pivot</a>();</div>
<div class="line"><a id="l05640" name="l05640"></a><span class="lineno"> 5640</span>    }</div>
<div class="line"><a id="l05641" name="l05641"></a><span class="lineno"> 5641</span> </div>
<div class="line"><a id="l05642" name="l05642"></a><span class="lineno"> 5642</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#a6d1b9a43a439a0ec56de30c9a8ccb328">pivot_cache</a>;</div>
<div class="line"><a id="l05643" name="l05643"></a><span class="lineno"> 5643</span>}</div>
<div class="ttc" id="aclassvehicle_html_a6d1b9a43a439a0ec56de30c9a8ccb328"><div class="ttname"><a href="classvehicle.html#a6d1b9a43a439a0ec56de30c9a8ccb328">vehicle::pivot_cache</a></div><div class="ttdeci">point pivot_cache</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01816">vehicle.h:1816</a></div></div>
<div class="ttc" id="aclassvehicle_html_abb959a78c449c54bcbd3bc2e834e9663"><div class="ttname"><a href="classvehicle.html#abb959a78c449c54bcbd3bc2e834e9663">vehicle::refresh_pivot</a></div><div class="ttdeci">void refresh_pivot() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05645">vehicle.cpp:5645</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01816">pivot_cache</a>, <a class="el" href="vehicle_8h_source.html#l01899">pivot_dirty</a>, and <a class="el" href="vehicle_8cpp_source.html#l05645">refresh_pivot()</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02239">veh_interact::display_veh()</a>, <a class="el" href="grab_8cpp_source.html#l00021">game::grabbed_veh_move()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00470">part_collision()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01665">vehicle_movement::scan_rails_from_veh_internal()</a>, and <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>.</p>

</div>
</div>
<a id="af09f95d87a91c86857993b6c105300ac" name="af09f95d87a91c86857993b6c105300ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af09f95d87a91c86857993b6c105300ac">&#9670;&nbsp;</a></span>place_spawn_items()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::place_spawn_items </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05295">5295</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05296" name="l05296"></a><span class="lineno"> 5296</span>{</div>
<div class="line"><a id="l05297" name="l05297"></a><span class="lineno"> 5297</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a>.<a class="code hl_function" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() ) {</div>
<div class="line"><a id="l05298" name="l05298"></a><span class="lineno"> 5298</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05299" name="l05299"></a><span class="lineno"> 5299</span>    }</div>
<div class="line"><a id="l05300" name="l05300"></a><span class="lineno"> 5300</span> </div>
<div class="line"><a id="l05301" name="l05301"></a><span class="lineno"> 5301</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;pt : <a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a>-&gt;<a class="code hl_variable" href="structvehicle__prototype.html#a06a6007fba7df08c566fa470dd07385c">parts</a> ) {</div>
<div class="line"><a id="l05302" name="l05302"></a><span class="lineno"> 5302</span>        <span class="keywordflow">if</span>( pt.with_ammo ) {</div>
<div class="line"><a id="l05303" name="l05303"></a><span class="lineno"> 5303</span>            <span class="keywordtype">int</span> turret = <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( pt.pos, <span class="stringliteral">&quot;TURRET&quot;</span>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l05304" name="l05304"></a><span class="lineno"> 5304</span>            <span class="keywordflow">if</span>( turret &gt;= 0 &amp;&amp; <a class="code hl_function" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( pt.with_ammo, 100 ) ) {</div>
<div class="line"><a id="l05305" name="l05305"></a><span class="lineno"> 5305</span>                <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ turret ].ammo_set( <a class="code hl_function" href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a>( pt.ammo_types ), <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( pt.ammo_qty.first,</div>
<div class="line"><a id="l05306" name="l05306"></a><span class="lineno"> 5306</span>                                          pt.ammo_qty.second ) );</div>
<div class="line"><a id="l05307" name="l05307"></a><span class="lineno"> 5307</span>            }</div>
<div class="line"><a id="l05308" name="l05308"></a><span class="lineno"> 5308</span>        }</div>
<div class="line"><a id="l05309" name="l05309"></a><span class="lineno"> 5309</span>    }</div>
<div class="line"><a id="l05310" name="l05310"></a><span class="lineno"> 5310</span> </div>
<div class="line"><a id="l05311" name="l05311"></a><span class="lineno"> 5311</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;spawn : <a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a>.<a class="code hl_function" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code hl_variable" href="structvehicle__prototype.html#a7eec43c8754c73355602b6a126e73293">item_spawns</a> ) {</div>
<div class="line"><a id="l05312" name="l05312"></a><span class="lineno"> 5312</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 100 ) &lt;= spawn.chance ) {</div>
<div class="line"><a id="l05313" name="l05313"></a><span class="lineno"> 5313</span>            <span class="keywordtype">int</span> <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> = <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( spawn.pos, <span class="stringliteral">&quot;CARGO&quot;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a id="l05314" name="l05314"></a><span class="lineno"> 5314</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> &lt; 0 ) {</div>
<div class="line"><a id="l05315" name="l05315"></a><span class="lineno"> 5315</span>                <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;No CARGO parts at (%d, %d) of %s!&quot;</span>, spawn.pos.x, spawn.pos.y, <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l05316" name="l05316"></a><span class="lineno"> 5316</span> </div>
<div class="line"><a id="l05317" name="l05317"></a><span class="lineno"> 5317</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05318" name="l05318"></a><span class="lineno"> 5318</span>                <span class="comment">// if vehicle part is broken only 50% of items spawn and they will be variably damaged</span></div>
<div class="line"><a id="l05319" name="l05319"></a><span class="lineno"> 5319</span>                <span class="keywordtype">bool</span> <a class="code hl_enumvalue" href="enums_8h.html#a00763863874f01b868849b27ceee73c9a1f85e94c05010d1308d67d1d918944e4">broken</a> = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ].is_broken();</div>
<div class="line"><a id="l05320" name="l05320"></a><span class="lineno"> 5320</span>                <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="enums_8h.html#a00763863874f01b868849b27ceee73c9a1f85e94c05010d1308d67d1d918944e4">broken</a> &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) ) {</div>
<div class="line"><a id="l05321" name="l05321"></a><span class="lineno"> 5321</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05322" name="l05322"></a><span class="lineno"> 5322</span>                }</div>
<div class="line"><a id="l05323" name="l05323"></a><span class="lineno"> 5323</span> </div>
<div class="line"><a id="l05324" name="l05324"></a><span class="lineno"> 5324</span>                std::vector&lt;item&gt; created;</div>
<div class="line"><a id="l05325" name="l05325"></a><span class="lineno"> 5325</span>                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> &amp;e : spawn.item_ids ) {</div>
<div class="line"><a id="l05326" name="l05326"></a><span class="lineno"> 5326</span>                    created.emplace_back( <a class="code hl_class" href="classitem.html">item</a>( e ).in_its_container() );</div>
<div class="line"><a id="l05327" name="l05327"></a><span class="lineno"> 5327</span>                }</div>
<div class="line"><a id="l05328" name="l05328"></a><span class="lineno"> 5328</span>                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">item_group_id</a> &amp;e : spawn.item_groups ) {</div>
<div class="line"><a id="l05329" name="l05329"></a><span class="lineno"> 5329</span>                    <a class="code hl_typedef" href="namespaceitem__group.html#a1756cb07c624c3169988316a8615ff69">item_group::ItemList</a> group_items = <a class="code hl_function" href="namespaceitem__group.html#ad15629f772f27e1d19c90fe9de23ae99">item_group::items_from</a>( e, <a class="code hl_variable" href="namespacecalendar.html#ab01178b933b4f1c62bd75b2edfdbaf79">calendar::start_of_cataclysm</a> );</div>
<div class="line"><a id="l05330" name="l05330"></a><span class="lineno"> 5330</span>                    <span class="keywordflow">for</span>( <span class="keyword">auto</span> spawn_item : group_items ) {</div>
<div class="line"><a id="l05331" name="l05331"></a><span class="lineno"> 5331</span>                        created.emplace_back( spawn_item );</div>
<div class="line"><a id="l05332" name="l05332"></a><span class="lineno"> 5332</span>                    }</div>
<div class="line"><a id="l05333" name="l05333"></a><span class="lineno"> 5333</span>                }</div>
<div class="line"><a id="l05334" name="l05334"></a><span class="lineno"> 5334</span> </div>
<div class="line"><a id="l05335" name="l05335"></a><span class="lineno"> 5335</span>                <span class="keywordflow">for</span>( <a class="code hl_class" href="classitem.html">item</a> &amp;e : created ) {</div>
<div class="line"><a id="l05336" name="l05336"></a><span class="lineno"> 5336</span>                    <span class="keywordflow">if</span>( e.<a class="code hl_function" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) {</div>
<div class="line"><a id="l05337" name="l05337"></a><span class="lineno"> 5337</span>                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05338" name="l05338"></a><span class="lineno"> 5338</span>                    }</div>
<div class="line"><a id="l05339" name="l05339"></a><span class="lineno"> 5339</span>                    <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="enums_8h.html#a00763863874f01b868849b27ceee73c9a1f85e94c05010d1308d67d1d918944e4">broken</a> &amp;&amp; e.mod_damage( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, e.max_damage() ) ) ) {</div>
<div class="line"><a id="l05340" name="l05340"></a><span class="lineno"> 5340</span>                        <span class="keywordflow">continue</span>; <span class="comment">// we destroyed the item</span></div>
<div class="line"><a id="l05341" name="l05341"></a><span class="lineno"> 5341</span>                    }</div>
<div class="line"><a id="l05342" name="l05342"></a><span class="lineno"> 5342</span>                    <span class="keywordflow">if</span>( e.is_tool() || e.is_gun() || e.is_magazine() ) {</div>
<div class="line"><a id="l05343" name="l05343"></a><span class="lineno"> 5343</span>                        <span class="keywordtype">bool</span> spawn_ammo = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 99 ) &lt; spawn.with_ammo &amp;&amp; e.ammo_remaining() == 0;</div>
<div class="line"><a id="l05344" name="l05344"></a><span class="lineno"> 5344</span>                        <span class="keywordtype">bool</span> spawn_mag  = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 99 ) &lt; spawn.with_magazine &amp;&amp; !e.magazine_integral() &amp;&amp;</div>
<div class="line"><a id="l05345" name="l05345"></a><span class="lineno"> 5345</span>                                          !e.magazine_current();</div>
<div class="line"><a id="l05346" name="l05346"></a><span class="lineno"> 5346</span> </div>
<div class="line"><a id="l05347" name="l05347"></a><span class="lineno"> 5347</span>                        <span class="keywordflow">if</span>( spawn_mag ) {</div>
<div class="line"><a id="l05348" name="l05348"></a><span class="lineno"> 5348</span>                            e.put_in( <a class="code hl_class" href="classitem.html">item</a>( e.magazine_default(), e.birthday() ) );</div>
<div class="line"><a id="l05349" name="l05349"></a><span class="lineno"> 5349</span>                        }</div>
<div class="line"><a id="l05350" name="l05350"></a><span class="lineno"> 5350</span>                        <span class="keywordflow">if</span>( spawn_ammo ) {</div>
<div class="line"><a id="l05351" name="l05351"></a><span class="lineno"> 5351</span>                            e.ammo_set( e.ammo_default() );</div>
<div class="line"><a id="l05352" name="l05352"></a><span class="lineno"> 5352</span>                        }</div>
<div class="line"><a id="l05353" name="l05353"></a><span class="lineno"> 5353</span>                    }</div>
<div class="line"><a id="l05354" name="l05354"></a><span class="lineno"> 5354</span>                    <a class="code hl_function" href="classvehicle.html#a04426c7f3acf2455684972f092352cb0">add_item</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, e );</div>
<div class="line"><a id="l05355" name="l05355"></a><span class="lineno"> 5355</span>                }</div>
<div class="line"><a id="l05356" name="l05356"></a><span class="lineno"> 5356</span>            }</div>
<div class="line"><a id="l05357" name="l05357"></a><span class="lineno"> 5357</span>        }</div>
<div class="line"><a id="l05358" name="l05358"></a><span class="lineno"> 5358</span>    }</div>
<div class="line"><a id="l05359" name="l05359"></a><span class="lineno"> 5359</span>}</div>
<div class="ttc" id="acalendar_8cpp_html_a359120c15f92d54a49fec9de7bcb571f"><div class="ttname"><a href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a></div><div class="ttdeci">bool x_in_y(const time_duration &amp;a, const time_duration &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00521">calendar.cpp:521</a></div></div>
<div class="ttc" id="anamespaceitem__group_html_a1756cb07c624c3169988316a8615ff69"><div class="ttname"><a href="namespaceitem__group.html#a1756cb07c624c3169988316a8615ff69">item_group::ItemList</a></div><div class="ttdeci">std::vector&lt; item &gt; ItemList</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8h_source.html#l00035">item_group.h:35</a></div></div>
<div class="ttc" id="anamespaceitem__group_html_ad15629f772f27e1d19c90fe9de23ae99"><div class="ttname"><a href="namespaceitem__group.html#ad15629f772f27e1d19c90fe9de23ae99">item_group::items_from</a></div><div class="ttdeci">ItemList items_from(const item_group_id &amp;group_id, const time_point &amp;birthday)</div><div class="ttdoc">Create items from the given group.</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8cpp_source.html#l00574">item_group.cpp:574</a></div></div>
<div class="ttc" id="astructvehicle__prototype_html_a7eec43c8754c73355602b6a126e73293"><div class="ttname"><a href="structvehicle__prototype.html#a7eec43c8754c73355602b6a126e73293">vehicle_prototype::item_spawns</a></div><div class="ttdeci">std::vector&lt; vehicle_item_spawn &gt; item_spawns</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00393">veh_type.h:393</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l05209">add_item()</a>, <a class="el" href="enums_8h_source.html#l00323">broken</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="string__id_8h_source.html#l00317">string_id&lt; T &gt;::is_null()</a>, <a class="el" href="achievement_8cpp_source.html#l00065">string_id&lt; T &gt;::is_valid()</a>, <a class="el" href="veh__type_8h_source.html#l00393">vehicle_prototype::item_spawns</a>, <a class="el" href="item__group_8cpp_source.html#l00574">item_group::items_from()</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="achievement_8cpp_source.html#l00058">string_id&lt; T &gt;::obj()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8cpp_source.html#l02518">part_with_feature()</a>, <a class="el" href="veh__type_8h_source.html#l00392">vehicle_prototype::parts</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="rng_8h_source.html#l00088">random_entry()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="calendar_8cpp_source.html#l00033">calendar::start_of_cataclysm</a>, <a class="el" href="vehicle_8h_source.html#l01798">type</a>, and <a class="el" href="calendar_8cpp_source.html#l00521">x_in_y()</a>.</p>

</div>
</div>
<a id="af878a8bbb20a0b7db5c776067c7a1a40" name="af878a8bbb20a0b7db5c776067c7a1a40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af878a8bbb20a0b7db5c776067c7a1a40">&#9670;&nbsp;</a></span>play_chimes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::play_chimes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01218">1218</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span>{</div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span>    }</div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span> </div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a791413b7697a0ef434df0fe73d85b9fe">get_enabled_parts</a>( <span class="stringliteral">&quot;CHIMES&quot;</span> ) ) {</div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>        <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( vp.pos(), 40, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a18d6769919266cd0bd6cd78aa405d5d0">sounds::sound_t::music</a>,</div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;a simple melody blaring from the loudspeakers.&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;vehicle&quot;</span>, <span class="stringliteral">&quot;chimes&quot;</span> );</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>    }</div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>}</div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3a18d6769919266cd0bd6cd78aa405d5d0"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a18d6769919266cd0bd6cd78aa405d5d0">sounds::sound_t::music</a></div><div class="ttdeci">@ music</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="vehicle_8cpp_source.html#l02721">get_enabled_parts()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a18d6769919266cd0bd6cd78aa405d5d0">sounds::music</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, and <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05033">idle()</a>.</p>

</div>
</div>
<a id="a872c70ddff1081cf426fa695bcdf4153" name="a872c70ddff1081cf426fa695bcdf4153"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a872c70ddff1081cf426fa695bcdf4153">&#9670;&nbsp;</a></span>play_music()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::play_music </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01211">1211</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span>{</div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a791413b7697a0ef434df0fe73d85b9fe">get_enabled_parts</a>( <span class="stringliteral">&quot;STEREO&quot;</span> ) ) {</div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span>        <a class="code hl_function" href="namespaceiuse.html#ae5949ee6963a56e98a0ddfbf754cbd77">iuse::play_music</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u, vp.pos(), 15, 30 );</div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span>    }</div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span>}</div>
<div class="ttc" id="anamespaceiuse_html_ae5949ee6963a56e98a0ddfbf754cbd77"><div class="ttname"><a href="namespaceiuse.html#ae5949ee6963a56e98a0ddfbf754cbd77">iuse::play_music</a></div><div class="ttdeci">void play_music(player &amp;p, const tripoint &amp;source, int volume, int max_morale)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04159">iuse.cpp:4159</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l02721">get_enabled_parts()</a>, and <a class="el" href="iuse_8cpp_source.html#l04159">iuse::play_music()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05033">idle()</a>.</p>

</div>
</div>
<a id="a341515426011486c265d016c35f84de6" name="a341515426011486c265d016c35f84de6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a341515426011486c265d016c35f84de6">&#9670;&nbsp;</a></span>player_in_control()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::player_in_control </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l00277">277</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>{</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>    <span class="comment">// Debug switch to prevent vehicles from skidding</span></div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>    <span class="comment">// without having to place the player in them.</span></div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a0383bc21c8d6b5a3689124f3d286a004">tags</a>.count( <span class="stringliteral">&quot;IN_CONTROL_OVERRIDE&quot;</span> ) ) {</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>    }</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span> </div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>    <span class="keyword">const</span> <a class="code hl_class" href="classoptional__vpart__position.html">optional_vpart_position</a> vp = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.veh_at( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() );</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>    <span class="keywordflow">if</span>( vp &amp;&amp; &amp;vp-&gt;vehicle() == <span class="keyword">this</span> &amp;&amp;</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>        ( ( <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( vp-&gt;part_index(), <span class="stringliteral">&quot;CONTROL_ANIMAL&quot;</span>, <span class="keyword">true</span> ) &gt;= 0 &amp;&amp;</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>            <a class="code hl_function" href="classvehicle.html#a603b71f04b9fdb63f400ac93fb4bea88">has_engine_type</a>( <a class="code hl_variable" href="vehicle_8cpp.html#a944ba9be1d911a61e9ca62af989355fd">fuel_type_animal</a>, <span class="keyword">false</span> ) &amp;&amp; <a class="code hl_function" href="classvehicle.html#a8c4e8182afb214351822aa818e919c52">has_harnessed_animal</a>() ) ||</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>          ( <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( vp-&gt;part_index(), <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea1d493984c83c95a15238b6e21f4547d0">VPFLAG_CONTROLS</a>, <span class="keyword">false</span> ) &gt;= 0 ) ) &amp;&amp;</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>        p.<a class="code hl_variable" href="classCharacter.html#a0701e6a3f1987d9fa3f76b450dd5624a">controlling_vehicle</a> ) {</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>    }</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span> </div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#adcb8ceed162110674571ecb30a3cee48">remote_controlled</a>( p );</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>}</div>
<div class="ttc" id="aclassCharacter_html_a0701e6a3f1987d9fa3f76b450dd5624a"><div class="ttname"><a href="classCharacter.html#a0701e6a3f1987d9fa3f76b450dd5624a">Character::controlling_vehicle</a></div><div class="ttdeci">bool controlling_vehicle</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00285">character.h:285</a></div></div>
<div class="ttc" id="aclassvehicle_html_a8c4e8182afb214351822aa818e919c52"><div class="ttname"><a href="classvehicle.html#a8c4e8182afb214351822aa818e919c52">vehicle::has_harnessed_animal</a></div><div class="ttdeci">bool has_harnessed_animal() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l00919">vehicle_move.cpp:919</a></div></div>
<div class="ttc" id="aclassvehicle_html_adcb8ceed162110674571ecb30a3cee48"><div class="ttname"><a href="classvehicle.html#adcb8ceed162110674571ecb30a3cee48">vehicle::remote_controlled</a></div><div class="ttdeci">bool remote_controlled(const Character &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l00297">vehicle.cpp:297</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8h_source.html#l00285">Character::controlling_vehicle</a>, <a class="el" href="vehicle_8cpp.html#a944ba9be1d911a61e9ca62af989355fd">fuel_type_animal</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l01031">has_engine_type()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00919">has_harnessed_animal()</a>, <a class="el" href="vehicle_8cpp_source.html#l02518">part_with_feature()</a>, <a class="el" href="character_8cpp_source.html#l00707">Character::pos()</a>, <a class="el" href="vehicle_8cpp_source.html#l00297">remote_controlled()</a>, <a class="el" href="vehicle_8h_source.html#l01802">tags</a>, and <a class="el" href="veh__type_8h_source.html#l00041">VPFLAG_CONTROLS</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, <a class="el" href="game_8cpp_source.html#l01332">game::calc_driving_offset()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l01273">can_do_activity_there()</a>, <a class="el" href="game_8cpp_source.html#l05443">game::control_vehicle()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l01206">do_autodrive()</a>, <a class="el" href="map_8cpp_source.html#l05855">map::draw_maptile()</a>, <a class="el" href="vehicle_8cpp_source.html#l03179">fuel_left()</a>, <a class="el" href="vehicle_8cpp_source.html#l05361">gain_moves()</a>, <a class="el" href="vehicle_8cpp_source.html#l04017">is_rotorcraft()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00470">part_collision()</a>, <a class="el" href="player_8cpp_source.html#l00756">player::pause()</a>, <a class="el" href="melee_8cpp_source.html#l01337">Character::perform_technique()</a>, <a class="el" href="vehicle_8cpp_source.html#l04619">power_parts()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01565">map::shake_vehicle()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>, and <a class="el" href="character_8cpp_source.html#l04759">Character::update_needs()</a>.</p>

</div>
</div>
<a id="a8ee4e09fef222f0db06421381be4a354" name="a8ee4e09fef222f0db06421381be4a354"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ee4e09fef222f0db06421381be4a354">&#9670;&nbsp;</a></span>pldrive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::pldrive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>driver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>z</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Player is driving the vehicle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>direction player is steering </td></tr>
    <tr><td class="paramname">z</td><td>for vertical movement - e.g helicopters </td></tr>
  </table>
  </dd>
</dl>
Dexterity reduces chance of losing control of vehicle when turning Perception reduces chance of losing control of vehicle when turning Driving reduces chance of losing control of vehicle when turning Dexterity increases chance of regaining control of a vehicle Driving increases chance of regaining control of a vehicle 
<p class="definition">Definition at line <a class="el" href="vehicle__move_8cpp_source.html#l01061">1061</a> of file <a class="el" href="vehicle__move_8cpp_source.html">vehicle_move.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>{</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>    <span class="keywordflow">if</span>( z != 0 &amp;&amp; <a class="code hl_function" href="classvehicle.html#a292961ab33a42bf495d19b8692f6f105">is_rotorcraft</a>() ) {</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>        driver.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> = std::min( driver.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a>, 0 );</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>        <a class="code hl_function" href="classvehicle.html#a0b298dcb96f6d82ac696f38d9a89868b">thrust</a>( 0, z );</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>    }</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::angle</a> turn_delta = 15_degrees * p.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a>;</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> handling_diff = <a class="code hl_function" href="classvehicle.html#aedeb37c9ce1c25bd8b9765e91ef6e502">handling_difficulty</a>();</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>    <span class="keywordflow">if</span>( turn_delta != 0_degrees ) {</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>        <span class="keywordtype">float</span> eff = <a class="code hl_function" href="classvehicle.html#aec2fcbe01499d105316d14c8b99107a2">steering_effectiveness</a>();</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>        <span class="keywordflow">if</span>( eff == -2 ) {</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>            driver.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>                                      <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You cannot steer an animal-drawn vehicle with no animal harnessed.&quot;</span> ) );</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>        }</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span> </div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>        <span class="keywordflow">if</span>( eff &lt; 0 ) {</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>            driver.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>                                      <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This vehicle has no steering system installed, you can&#39;t turn it.&quot;</span> ) );</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>        }</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span> </div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>        <span class="keywordflow">if</span>( eff == 0 ) {</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>            driver.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The steering is completely broken!&quot;</span> ) );</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>        }</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span> </div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>        <span class="comment">// If you&#39;ve got more moves than speed, it&#39;s most likely time stop</span></div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>        <span class="comment">// Let&#39;s get rid of that</span></div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>        driver.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> = std::min( driver.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a>, driver.<a class="code hl_function" href="classCharacter.html#aedc66fc50d352420cae7791b4a0f57f7">get_speed</a>() );</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span><span class="comment"></span> </div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span><span class="comment">        ///\EFFECT_DEX reduces chance of losing control of vehicle when turning</span></div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span><span class="comment"></span><span class="comment"></span> </div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span><span class="comment">        ///\EFFECT_PER reduces chance of losing control of vehicle when turning</span></div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span><span class="comment"></span><span class="comment"></span> </div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span><span class="comment">        ///\EFFECT_DRIVING reduces chance of losing control of vehicle when turning</span></div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span><span class="comment"></span>        <span class="keywordtype">float</span> skill = std::min( 10.0f, driver.<a class="code hl_function" href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">get_skill_level</a>( <a class="code hl_variable" href="vehicle__move_8cpp.html#afee8dcfd12a225c469ee6171063d7594">skill_driving</a> ) +</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>                                ( driver.<a class="code hl_function" href="classCharacter.html#a34a927d0f161ac92ab0d462397828bd5">get_dex</a>() + driver.<a class="code hl_function" href="classCharacter.html#abb0a1847902e6db0bd3c923ee8187702">get_per</a>() ) / 10.0f );</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>        <span class="keywordtype">float</span> penalty = <a class="code hl_function" href="rng_8cpp.html#a0c88381d6334a2fbaa726c53f5cf9bb9">rng_float</a>( 0.0f, handling_diff ) - skill;</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>        <span class="keywordtype">int</span> cost;</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>        <span class="keywordflow">if</span>( penalty &gt; 0.0f ) {</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>            <span class="comment">// At 10 penalty (rather hard to get), we&#39;re taking 4 turns per turn</span></div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>            cost = 100 * ( 1.0f + penalty / 2.5f );</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>            <span class="comment">// At 10 skill, with a perfect vehicle, we could turn up to 3 times per turn</span></div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>            cost = std::max( driver.<a class="code hl_function" href="classCharacter.html#aedc66fc50d352420cae7791b4a0f57f7">get_speed</a>(), 100 ) * ( 1.0f - ( -penalty / 10.0f ) * 2 / 3 );</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>        }</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span> </div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>        <span class="keywordflow">if</span>( penalty &gt; skill || cost &gt; 400 ) {</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>            driver.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You fumble with the %s&#39;s controls.&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>            <span class="comment">// Anything from a wasted attempt to 2 turns in the intended direction</span></div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>            turn_delta *= <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 2 );</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>            <span class="comment">// Also wastes next turn</span></div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>            cost = std::max( cost, driver.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> + 100 );</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 10 ) ) {</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>            <span class="comment">// Don&#39;t warn all the time or it gets spammy</span></div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>            <span class="keywordflow">if</span>( cost &gt;= driver.<a class="code hl_function" href="classCharacter.html#aedc66fc50d352420cae7791b4a0f57f7">get_speed</a>() * 2 ) {</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>                driver.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It takes you a very long time to steer that vehicle!&quot;</span> ) );</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cost &gt;= driver.<a class="code hl_function" href="classCharacter.html#aedc66fc50d352420cae7791b4a0f57f7">get_speed</a>() * 1.5f ) {</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>                driver.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;It takes you a long time to steer that vehicle!&quot;</span> ) );</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>            }</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>        }</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span> </div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>        <a class="code hl_function" href="classvehicle.html#a1380ff85985897f9f8a34eba538e04db">turn</a>( turn_delta );</div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span> </div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>        <span class="comment">// At most 3 turns per turn, because otherwise it looks really weird and jumpy</span></div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>        driver.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= std::max( cost, driver.<a class="code hl_function" href="classCharacter.html#aedc66fc50d352420cae7791b4a0f57f7">get_speed</a>() / 3 + 1 );</div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>    }</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span> </div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>    <span class="keywordflow">if</span>( p.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> != 0 ) {</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>        <span class="keywordtype">int</span> thr_amount = 100 * ( std::abs( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> ) &lt; 2000 ? 4 : 5 );</div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#abdf6601268460dc437ef079590deb33b">cruise_on</a> ) {</div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>            <a class="code hl_function" href="classvehicle.html#ac9e0d3482a62d5ac5ec8e5fc83cfaa4a">cruise_thrust</a>( -p.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> * thr_amount );</div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>            <a class="code hl_function" href="classvehicle.html#a0b298dcb96f6d82ac696f38d9a89868b">thrust</a>( -p.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> );</div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>            driver.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> = std::min( driver.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a>, 0 );</div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>        }</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>    }</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span> </div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>    <span class="comment">// TODO: Actually check if we&#39;re on land on water (or disable water-skidding)</span></div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>    <span class="comment">// Only check for recovering from a skid if we did active steering (not cruise control).</span></div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a320ca34b5c38568efd801731cef78a35">skidding</a> &amp;&amp; ( p.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> != 0 || ( p.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> != 0 &amp;&amp; !<a class="code hl_variable" href="classvehicle.html#abdf6601268460dc437ef079590deb33b">cruise_on</a> ) ) &amp;&amp; <a class="code hl_function" href="classvehicle.html#a578c681656be6b419c62799006008035">valid_wheel_config</a>() ) {<span class="comment"></span></div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span><span class="comment">        ///\EFFECT_DEX increases chance of regaining control of a vehicle</span></div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span><span class="comment"></span><span class="comment"></span> </div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span><span class="comment">        ///\EFFECT_DRIVING increases chance of regaining control of a vehicle</span></div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span><span class="comment"></span>        <span class="keywordflow">if</span>( handling_diff * <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 10 ) &lt;</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>            driver.<a class="code hl_variable" href="classCharacter.html#a4065ac02745befad248425d307b71849">dex_cur</a> + driver.<a class="code hl_function" href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">get_skill_level</a>( <a class="code hl_variable" href="vehicle__move_8cpp.html#afee8dcfd12a225c469ee6171063d7594">skill_driving</a> ) * 2 ) {</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>            driver.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You regain control of the %s.&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>            driver.<a class="code hl_function" href="classCreature.html#acb1d0a1210d3dd4c86350f3ad4c58649">as_player</a>()-&gt;<a class="code hl_function" href="classplayer.html#aa57c61de29a5e410c100aee07798b9b1">practice</a>( <a class="code hl_variable" href="vehicle__move_8cpp.html#afee8dcfd12a225c469ee6171063d7594">skill_driving</a>, <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> / 5 );</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>            <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_function" href="classvehicle.html#a8e7305881802ea38e07925826da63b82">forward_velocity</a>() );</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>            <a class="code hl_variable" href="classvehicle.html#a320ca34b5c38568efd801731cef78a35">skidding</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>            <a class="code hl_variable" href="classvehicle.html#a8bbdfb41ea75fdc007feab08e2137aa2">move</a>.<a class="code hl_function" href="classtileray.html#ab643ca3c50332c73009031331e7c8026">init</a>( <a class="code hl_variable" href="classvehicle.html#af366981a584e12d25133fb479d47de33">turn_dir</a> );</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>        }</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>    }</div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>}</div>
<div class="ttc" id="aclassCharacter_html_a34a927d0f161ac92ab0d462397828bd5"><div class="ttname"><a href="classCharacter.html#a34a927d0f161ac92ab0d462397828bd5">Character::get_dex</a></div><div class="ttdeci">virtual int get_dex() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04052">character.cpp:4052</a></div></div>
<div class="ttc" id="aclassCharacter_html_abb0a1847902e6db0bd3c923ee8187702"><div class="ttname"><a href="classCharacter.html#abb0a1847902e6db0bd3c923ee8187702">Character::get_per</a></div><div class="ttdeci">virtual int get_per() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04056">character.cpp:4056</a></div></div>
<div class="ttc" id="aclassCharacter_html_aedc66fc50d352420cae7791b4a0f57f7"><div class="ttname"><a href="classCharacter.html#aedc66fc50d352420cae7791b4a0f57f7">Character::get_speed</a></div><div class="ttdeci">int get_speed() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04108">character.cpp:4108</a></div></div>
<div class="ttc" id="aclassCharacter_html_afa95fe499ca6b55ab97f1b442a4c95c5"><div class="ttname"><a href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">Character::get_skill_level</a></div><div class="ttdeci">int get_skill_level(const skill_id &amp;ident) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03327">character.cpp:3327</a></div></div>
<div class="ttc" id="aclassCreature_html_acb1d0a1210d3dd4c86350f3ad4c58649"><div class="ttname"><a href="classCreature.html#acb1d0a1210d3dd4c86350f3ad4c58649">Creature::as_player</a></div><div class="ttdeci">virtual player * as_player()</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00122">creature.h:122</a></div></div>
<div class="ttc" id="aclassvehicle_html_a8e7305881802ea38e07925826da63b82"><div class="ttname"><a href="classvehicle.html#a8e7305881802ea38e07925826da63b82">vehicle::forward_velocity</a></div><div class="ttdeci">float forward_velocity() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l01187">vehicle_move.cpp:1187</a></div></div>
<div class="ttc" id="aclassvehicle_html_ac9e0d3482a62d5ac5ec8e5fc83cfaa4a"><div class="ttname"><a href="classvehicle.html#ac9e0d3482a62d5ac5ec8e5fc83cfaa4a">vehicle::cruise_thrust</a></div><div class="ttdeci">void cruise_thrust(int amount)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l00285">vehicle_move.cpp:285</a></div></div>
<div class="ttc" id="aclassvehicle_html_aedeb37c9ce1c25bd8b9765e91ef6e502"><div class="ttname"><a href="classvehicle.html#aedeb37c9ce1c25bd8b9765e91ef6e502">vehicle::handling_difficulty</a></div><div class="ttdeci">float handling_difficulty() const</div><div class="ttdoc">Returns roughly driving skill level at which there is no chance of fumbling.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04325">vehicle.cpp:4325</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8h_source.html#l00593">Creature::add_msg_if_player()</a>, <a class="el" href="creature_8h_source.html#l00122">Creature::as_player()</a>, <a class="el" href="vehicle_8h_source.html#l01928">cruise_on</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00285">cruise_thrust()</a>, <a class="el" href="character_8h_source.html#l00305">Character::dex_cur</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01187">forward_velocity()</a>, <a class="el" href="character_8cpp_source.html#l04052">Character::get_dex()</a>, <a class="el" href="character_8cpp_source.html#l04056">Character::get_per()</a>, <a class="el" href="character_8cpp_source.html#l03327">Character::get_skill_level()</a>, <a class="el" href="character_8cpp_source.html#l04108">Character::get_speed()</a>, <a class="el" href="vehicle_8cpp_source.html#l04325">handling_difficulty()</a>, <a class="el" href="tileray_8cpp_source.html#l00027">tileray::init()</a>, <a class="el" href="vehicle_8cpp_source.html#l04017">is_rotorcraft()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="vehicle_8h_source.html#l01893">move</a>, <a class="el" href="creature_8h_source.html#l00569">Creature::moves</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="player_8cpp_source.html#l04005">player::practice()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="rng_8cpp_source.html#l00028">rng_float()</a>, <a class="el" href="vehicle_8h_source.html#l01940">skidding</a>, <a class="el" href="vehicle__move_8cpp.html#afee8dcfd12a225c469ee6171063d7594">skill_driving</a>, <a class="el" href="vehicle_8cpp_source.html#l04284">steering_effectiveness()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00324">turn()</a>, <a class="el" href="vehicle_8h_source.html#l01870">turn_dir</a>, <a class="el" href="vehicle_8cpp_source.html#l04279">valid_wheel_config()</a>, <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>, <a class="el" href="point_8h_source.html#l00038">point::x</a>, and <a class="el" href="point_8h_source.html#l00039">point::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__autodrive_8cpp_source.html#l01206">do_autodrive()</a>, and <a class="el" href="handle__action_8cpp_source.html#l00439">pldrive()</a>.</p>

</div>
</div>
<a id="a819beb6aab98cb4b90478b65a35a07ac" name="a819beb6aab98cb4b90478b65a35a07ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a819beb6aab98cb4b90478b65a35a07ac">&#9670;&nbsp;</a></span>possibly_recover_from_skid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::possibly_recover_from_skid </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__move_8cpp_source.html#l01158">1158</a> of file <a class="el" href="vehicle__move_8cpp_source.html">vehicle_move.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>{</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a3d4d97e9ca8cb2642001f8f61df500d5">last_turn</a> &gt; 13_degrees ) {</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>        <span class="comment">// Turning on the initial skid is delayed, so move==face, initially. This filters out that case.</span></div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>    }</div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span> </div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>    <a class="code hl_struct" href="structrl__vec2d.html">rl_vec2d</a> mv = <a class="code hl_function" href="classvehicle.html#a0e308fcc9e8b3b08ccf622825e94c9cc">move_vec</a>();</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>    <a class="code hl_struct" href="structrl__vec2d.html">rl_vec2d</a> fv = <a class="code hl_function" href="classvehicle.html#a2bc8dfdab1fadc47966b0a69520c737c">face_vec</a>();</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>    <span class="keywordtype">float</span> <a class="code hl_function" href="simplexnoise_8cpp.html#ac09abdb6d0f634024e3f63d92542e38f">dot</a> = mv.<a class="code hl_function" href="structrl__vec2d.html#acc0292005168ba5d844ab15cfe961d72">dot_product</a>( fv );</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>    <span class="comment">// Threshold of recovery is Gaussianesque.</span></div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span> </div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespaceunits.html#a0b9218914b883c6c31f5af68deaafc2e">std::fabs</a>( <a class="code hl_function" href="simplexnoise_8cpp.html#ac09abdb6d0f634024e3f63d92542e38f">dot</a> ) * 100 &gt; <a class="code hl_function" href="rng_8cpp.html#a7ba03e7147e43d808dc29c54bce9e57f">dice</a>( 9, 20 ) ) {</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s recovers from its skid.&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>        <span class="comment">// face_vec takes over.</span></div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span>        <a class="code hl_variable" href="classvehicle.html#a320ca34b5c38568efd801731cef78a35">skidding</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>        <span class="comment">// Wheels absorb horizontal velocity.</span></div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>        <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> *= <a class="code hl_function" href="simplexnoise_8cpp.html#ac09abdb6d0f634024e3f63d92542e38f">dot</a>;</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="simplexnoise_8cpp.html#ac09abdb6d0f634024e3f63d92542e38f">dot</a> &lt; -.8 ) {</div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>            <span class="comment">// Pointed backwards, velo-wise.</span></div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>            <span class="comment">// Move backwards.</span></div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>            <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> *= -1;</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>        }</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span> </div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>        <a class="code hl_variable" href="classvehicle.html#a8bbdfb41ea75fdc007feab08e2137aa2">move</a> = <a class="code hl_variable" href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">face</a>;</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>    }</div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>}</div>
<div class="ttc" id="aclassvehicle_html_a3d4d97e9ca8cb2642001f8f61df500d5"><div class="ttname"><a href="classvehicle.html#a3d4d97e9ca8cb2642001f8f61df500d5">vehicle::last_turn</a></div><div class="ttdeci">units::angle last_turn</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01872">vehicle.h:1872</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="rng_8cpp_source.html#l00085">dice()</a>, <a class="el" href="simplexnoise_8cpp_source.html#l00540">dot()</a>, <a class="el" href="line_8cpp_source.html#l00664">rl_vec2d::dot_product()</a>, <a class="el" href="units__def_8h_source.html#l00136">units::fabs()</a>, <a class="el" href="vehicle_8h_source.html#l01891">face</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01220">face_vec()</a>, <a class="el" href="vehicle_8h_source.html#l01872">last_turn</a>, <a class="el" href="vehicle_8h_source.html#l01893">move</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01214">move_vec()</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="vehicle_8h_source.html#l01940">skidding</a>, and <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>.</p>

</div>
</div>
<a id="aaafc01747fef78702c196ca9cf39a1bd" name="aaafc01747fef78702c196ca9cf39a1bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaafc01747fef78702c196ca9cf39a1bd">&#9670;&nbsp;</a></span>power_parts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::power_parts </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04619">4619</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04620" name="l04620"></a><span class="lineno"> 4620</span>{</div>
<div class="line"><a id="l04621" name="l04621"></a><span class="lineno"> 4621</span>    <a class="code hl_function" href="classvehicle.html#ab594a5970cdd36a1a4fbc1423de88538">update_alternator_load</a>();</div>
<div class="line"><a id="l04622" name="l04622"></a><span class="lineno"> 4622</span>    <span class="comment">// Things that drain energy: engines and accessories.</span></div>
<div class="line"><a id="l04623" name="l04623"></a><span class="lineno"> 4623</span>    <span class="keywordtype">int</span> engine_epower = <a class="code hl_function" href="classvehicle.html#a6fcd5bf8a5698a23f77e614473d0e938">total_engine_epower_w</a>();</div>
<div class="line"><a id="l04624" name="l04624"></a><span class="lineno"> 4624</span>    <span class="keywordtype">int</span> epower = engine_epower + <a class="code hl_function" href="classvehicle.html#a4883ea970c6da7b880d9f16f2590a1bd">total_accessory_epower_w</a>() + <a class="code hl_function" href="classvehicle.html#a26e100291b7fb8dd5574463e7112713a">total_alternator_epower_w</a>();</div>
<div class="line"><a id="l04625" name="l04625"></a><span class="lineno"> 4625</span> </div>
<div class="line"><a id="l04626" name="l04626"></a><span class="lineno"> 4626</span>    <span class="keywordtype">int</span> delta_energy_bat = <a class="code hl_function" href="classvehicle.html#a88de59eafc9488490ebdd42cff0e604f">power_to_energy_bat</a>( epower, 1_turns );</div>
<div class="line"><a id="l04627" name="l04627"></a><span class="lineno"> 4627</span>    <span class="keywordtype">int</span> storage_deficit_bat = std::max( 0, <a class="code hl_function" href="classvehicle.html#a2d14b343f954d77dd649891fefd221de">fuel_capacity</a>( <a class="code hl_variable" href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a> ) -</div>
<div class="line"><a id="l04628" name="l04628"></a><span class="lineno"> 4628</span>                                        <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a> ) - delta_energy_bat );</div>
<div class="line"><a id="l04629" name="l04629"></a><span class="lineno"> 4629</span>    <span class="comment">// Reactors trigger only on demand. If we&#39;d otherwise run out of power, see</span></div>
<div class="line"><a id="l04630" name="l04630"></a><span class="lineno"> 4630</span>    <span class="comment">// if we can spin up the reactors.</span></div>
<div class="line"><a id="l04631" name="l04631"></a><span class="lineno"> 4631</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#a2423efb46e19d1801498f9ea0c06f576">reactors</a>.empty() &amp;&amp; storage_deficit_bat &gt; 0 ) {</div>
<div class="line"><a id="l04632" name="l04632"></a><span class="lineno"> 4632</span>        <span class="comment">// Still not enough surplus epower to fully charge battery</span></div>
<div class="line"><a id="l04633" name="l04633"></a><span class="lineno"> 4633</span>        <span class="comment">// Produce additional epower from any reactors</span></div>
<div class="line"><a id="l04634" name="l04634"></a><span class="lineno"> 4634</span>        <span class="keywordtype">bool</span> reactor_working = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04635" name="l04635"></a><span class="lineno"> 4635</span>        <span class="keywordtype">bool</span> reactor_online = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04636" name="l04636"></a><span class="lineno"> 4636</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;elem : <a class="code hl_variable" href="classvehicle.html#a2423efb46e19d1801498f9ea0c06f576">reactors</a> ) {</div>
<div class="line"><a id="l04637" name="l04637"></a><span class="lineno"> 4637</span>            <span class="comment">// Check whether the reactor is on. If not, move on.</span></div>
<div class="line"><a id="l04638" name="l04638"></a><span class="lineno"> 4638</span>            <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#a625ad56bb7c71b7305ccbdb411d650db">is_part_on</a>( elem ) ) {</div>
<div class="line"><a id="l04639" name="l04639"></a><span class="lineno"> 4639</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04640" name="l04640"></a><span class="lineno"> 4640</span>            }</div>
<div class="line"><a id="l04641" name="l04641"></a><span class="lineno"> 4641</span>            <span class="comment">// Keep track whether or not the vehicle has any reactors activated</span></div>
<div class="line"><a id="l04642" name="l04642"></a><span class="lineno"> 4642</span>            reactor_online = <span class="keyword">true</span>;</div>
<div class="line"><a id="l04643" name="l04643"></a><span class="lineno"> 4643</span>            <span class="comment">// the amount of energy the reactor generates each turn</span></div>
<div class="line"><a id="l04644" name="l04644"></a><span class="lineno"> 4644</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> gen_energy_bat = <a class="code hl_function" href="classvehicle.html#a88de59eafc9488490ebdd42cff0e604f">power_to_energy_bat</a>( <a class="code hl_function" href="classvehicle.html#a27cec1366be7bf296d9c483a40833120">part_epower_w</a>( elem ), 1_turns );</div>
<div class="line"><a id="l04645" name="l04645"></a><span class="lineno"> 4645</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ elem ].is_unavailable() ) {</div>
<div class="line"><a id="l04646" name="l04646"></a><span class="lineno"> 4646</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04647" name="l04647"></a><span class="lineno"> 4647</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ elem ].info().has_flag( <a class="code hl_function" href="vehicle_8cpp.html#a6efa11c29c3f34ce1f160bf4b3e38ff7">flag_PERPETUAL</a> ) ) {</div>
<div class="line"><a id="l04648" name="l04648"></a><span class="lineno"> 4648</span>                reactor_working = <span class="keyword">true</span>;</div>
<div class="line"><a id="l04649" name="l04649"></a><span class="lineno"> 4649</span>                delta_energy_bat += std::min( storage_deficit_bat, gen_energy_bat );</div>
<div class="line"><a id="l04650" name="l04650"></a><span class="lineno"> 4650</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[elem].ammo_remaining() &gt; 0 ) {</div>
<div class="line"><a id="l04651" name="l04651"></a><span class="lineno"> 4651</span>                <span class="comment">// Efficiency: one unit of fuel is this many units of battery</span></div>
<div class="line"><a id="l04652" name="l04652"></a><span class="lineno"> 4652</span>                <span class="comment">// Note: One battery is 1 kJ</span></div>
<div class="line"><a id="l04653" name="l04653"></a><span class="lineno"> 4653</span>                <span class="keyword">const</span> <span class="keywordtype">int</span> efficiency = <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( elem ).<a class="code hl_variable" href="classvpart__info.html#a7118bbee705f88aeec2a25e57b32e5ee">power</a>;</div>
<div class="line"><a id="l04654" name="l04654"></a><span class="lineno"> 4654</span>                <span class="keyword">const</span> <span class="keywordtype">int</span> avail_fuel = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[elem].ammo_remaining() * efficiency;</div>
<div class="line"><a id="l04655" name="l04655"></a><span class="lineno"> 4655</span>                <span class="keyword">const</span> <span class="keywordtype">int</span> elem_energy_bat = std::min( gen_energy_bat, avail_fuel );</div>
<div class="line"><a id="l04656" name="l04656"></a><span class="lineno"> 4656</span>                <span class="comment">// Cap output at what we can achieve and utilize</span></div>
<div class="line"><a id="l04657" name="l04657"></a><span class="lineno"> 4657</span>                <span class="keyword">const</span> <span class="keywordtype">int</span> reactors_output_bat = std::min( elem_energy_bat, storage_deficit_bat );</div>
<div class="line"><a id="l04658" name="l04658"></a><span class="lineno"> 4658</span>                <span class="comment">// Fuel consumed in actual units of the resource</span></div>
<div class="line"><a id="l04659" name="l04659"></a><span class="lineno"> 4659</span>                <span class="keywordtype">int</span> fuel_consumed = reactors_output_bat / efficiency;</div>
<div class="line"><a id="l04660" name="l04660"></a><span class="lineno"> 4660</span>                <span class="comment">// Remainder has a chance of resulting in more fuel consumption</span></div>
<div class="line"><a id="l04661" name="l04661"></a><span class="lineno"> 4661</span>                fuel_consumed += <a class="code hl_function" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( reactors_output_bat % efficiency, efficiency ) ? 1 : 0;</div>
<div class="line"><a id="l04662" name="l04662"></a><span class="lineno"> 4662</span>                <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ elem ].ammo_consume( fuel_consumed, <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( elem ) );</div>
<div class="line"><a id="l04663" name="l04663"></a><span class="lineno"> 4663</span>                reactor_working = <span class="keyword">true</span>;</div>
<div class="line"><a id="l04664" name="l04664"></a><span class="lineno"> 4664</span>                delta_energy_bat += reactors_output_bat;</div>
<div class="line"><a id="l04665" name="l04665"></a><span class="lineno"> 4665</span>            }</div>
<div class="line"><a id="l04666" name="l04666"></a><span class="lineno"> 4666</span>        }</div>
<div class="line"><a id="l04667" name="l04667"></a><span class="lineno"> 4667</span> </div>
<div class="line"><a id="l04668" name="l04668"></a><span class="lineno"> 4668</span>        <span class="keywordflow">if</span>( !reactor_working &amp;&amp; reactor_online ) {</div>
<div class="line"><a id="l04669" name="l04669"></a><span class="lineno"> 4669</span>            <span class="comment">// All reactors out of fuel or destroyed</span></div>
<div class="line"><a id="l04670" name="l04670"></a><span class="lineno"> 4670</span>            <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;elem : <a class="code hl_variable" href="classvehicle.html#a2423efb46e19d1801498f9ea0c06f576">reactors</a> ) {</div>
<div class="line"><a id="l04671" name="l04671"></a><span class="lineno"> 4671</span>                <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ elem ].enabled = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04672" name="l04672"></a><span class="lineno"> 4672</span>            }</div>
<div class="line"><a id="l04673" name="l04673"></a><span class="lineno"> 4673</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a341515426011486c265d016c35f84de6">player_in_control</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ) || <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>() ) ) {</div>
<div class="line"><a id="l04674" name="l04674"></a><span class="lineno"> 4674</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s&#39;s reactor dies!&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l04675" name="l04675"></a><span class="lineno"> 4675</span>            }</div>
<div class="line"><a id="l04676" name="l04676"></a><span class="lineno"> 4676</span>        }</div>
<div class="line"><a id="l04677" name="l04677"></a><span class="lineno"> 4677</span>    }</div>
<div class="line"><a id="l04678" name="l04678"></a><span class="lineno"> 4678</span> </div>
<div class="line"><a id="l04679" name="l04679"></a><span class="lineno"> 4679</span>    <span class="keywordtype">int</span> battery_deficit = 0;</div>
<div class="line"><a id="l04680" name="l04680"></a><span class="lineno"> 4680</span>    <span class="keywordflow">if</span>( delta_energy_bat &gt; 0 ) {</div>
<div class="line"><a id="l04681" name="l04681"></a><span class="lineno"> 4681</span>        <span class="comment">// store epower surplus in battery</span></div>
<div class="line"><a id="l04682" name="l04682"></a><span class="lineno"> 4682</span>        <a class="code hl_function" href="classvehicle.html#a46d22a6712ad986ed60917c367be83eb">charge_battery</a>( delta_energy_bat );</div>
<div class="line"><a id="l04683" name="l04683"></a><span class="lineno"> 4683</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( epower &lt; 0 ) {</div>
<div class="line"><a id="l04684" name="l04684"></a><span class="lineno"> 4684</span>        <span class="comment">// draw epower deficit from battery</span></div>
<div class="line"><a id="l04685" name="l04685"></a><span class="lineno"> 4685</span>        battery_deficit = <a class="code hl_function" href="classvehicle.html#acb03f8288804b551378478137e9cea11">discharge_battery</a>( std::abs( delta_energy_bat ) );</div>
<div class="line"><a id="l04686" name="l04686"></a><span class="lineno"> 4686</span>    }</div>
<div class="line"><a id="l04687" name="l04687"></a><span class="lineno"> 4687</span> </div>
<div class="line"><a id="l04688" name="l04688"></a><span class="lineno"> 4688</span>    <span class="keywordflow">if</span>( battery_deficit != 0 ) {</div>
<div class="line"><a id="l04689" name="l04689"></a><span class="lineno"> 4689</span>        <span class="comment">// Scoops need a special case since they consume power during actual use</span></div>
<div class="line"><a id="l04690" name="l04690"></a><span class="lineno"> 4690</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a791413b7697a0ef434df0fe73d85b9fe">get_enabled_parts</a>( <span class="stringliteral">&quot;SCOOP&quot;</span> ) ) {</div>
<div class="line"><a id="l04691" name="l04691"></a><span class="lineno"> 4691</span>            vp.part().enabled = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04692" name="l04692"></a><span class="lineno"> 4692</span>        }</div>
<div class="line"><a id="l04693" name="l04693"></a><span class="lineno"> 4693</span>        <span class="comment">// Rechargers need special case since they consume power on demand</span></div>
<div class="line"><a id="l04694" name="l04694"></a><span class="lineno"> 4694</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a791413b7697a0ef434df0fe73d85b9fe">get_enabled_parts</a>( <span class="stringliteral">&quot;RECHARGE&quot;</span> ) ) {</div>
<div class="line"><a id="l04695" name="l04695"></a><span class="lineno"> 4695</span>            vp.part().enabled = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04696" name="l04696"></a><span class="lineno"> 4696</span>        }</div>
<div class="line"><a id="l04697" name="l04697"></a><span class="lineno"> 4697</span> </div>
<div class="line"><a id="l04698" name="l04698"></a><span class="lineno"> 4698</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a791413b7697a0ef434df0fe73d85b9fe">get_enabled_parts</a>( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea592e82f2e1fa297f50f3dd6338c2e5a0">VPFLAG_ENABLED_DRAINS_EPOWER</a> ) ) {</div>
<div class="line"><a id="l04699" name="l04699"></a><span class="lineno"> 4699</span>            <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;pt = vp.part();</div>
<div class="line"><a id="l04700" name="l04700"></a><span class="lineno"> 4700</span>            <span class="keywordflow">if</span>( pt.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_variable" href="classvpart__info.html#a0a939666602dd133e501b7cdf1f01eaa">epower</a> &lt; 0 ) {</div>
<div class="line"><a id="l04701" name="l04701"></a><span class="lineno"> 4701</span>                pt.<a class="code hl_variable" href="structvehicle__part.html#a27a7cba7268cb7d3550ed2b7c9adc323">enabled</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04702" name="l04702"></a><span class="lineno"> 4702</span>            }</div>
<div class="line"><a id="l04703" name="l04703"></a><span class="lineno"> 4703</span>        }</div>
<div class="line"><a id="l04704" name="l04704"></a><span class="lineno"> 4704</span> </div>
<div class="line"><a id="l04705" name="l04705"></a><span class="lineno"> 4705</span>        <a class="code hl_variable" href="classvehicle.html#a949775a37c7daa7a6b67e510f548bca3">is_alarm_on</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04706" name="l04706"></a><span class="lineno"> 4706</span>        <a class="code hl_variable" href="classvehicle.html#a70a0f1b85b1b3eed228b92d7b70334b1">camera_on</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04707" name="l04707"></a><span class="lineno"> 4707</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a341515426011486c265d016c35f84de6">player_in_control</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ) || <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>() ) ) {</div>
<div class="line"><a id="l04708" name="l04708"></a><span class="lineno"> 4708</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s&#39;s battery dies!&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l04709" name="l04709"></a><span class="lineno"> 4709</span>        }</div>
<div class="line"><a id="l04710" name="l04710"></a><span class="lineno"> 4710</span>        <span class="keywordflow">if</span>( engine_epower &lt; 0 ) {</div>
<div class="line"><a id="l04711" name="l04711"></a><span class="lineno"> 4711</span>            <span class="comment">// Not enough epower to run gas engine ignition system</span></div>
<div class="line"><a id="l04712" name="l04712"></a><span class="lineno"> 4712</span>            <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04713" name="l04713"></a><span class="lineno"> 4713</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a341515426011486c265d016c35f84de6">player_in_control</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ) || <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>() ) ) {</div>
<div class="line"><a id="l04714" name="l04714"></a><span class="lineno"> 4714</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s&#39;s engine dies!&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l04715" name="l04715"></a><span class="lineno"> 4715</span>            }</div>
<div class="line"><a id="l04716" name="l04716"></a><span class="lineno"> 4716</span>        }</div>
<div class="line"><a id="l04717" name="l04717"></a><span class="lineno"> 4717</span>    }</div>
<div class="line"><a id="l04718" name="l04718"></a><span class="lineno"> 4718</span>}</div>
<div class="ttc" id="aclassvehicle_html_a2d14b343f954d77dd649891fefd221de"><div class="ttname"><a href="classvehicle.html#a2d14b343f954d77dd649891fefd221de">vehicle::fuel_capacity</a></div><div class="ttdeci">int fuel_capacity(const itype_id &amp;ftype) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03238">vehicle.cpp:3238</a></div></div>
<div class="ttc" id="aclassvehicle_html_a88de59eafc9488490ebdd42cff0e604f"><div class="ttname"><a href="classvehicle.html#a88de59eafc9488490ebdd42cff0e604f">vehicle::power_to_energy_bat</a></div><div class="ttdeci">int power_to_energy_bat(int power_w, const time_duration &amp;d) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01217">vehicle.cpp:1217</a></div></div>
<div class="ttc" id="aclassvehicle_html_ab594a5970cdd36a1a4fbc1423de88538"><div class="ttname"><a href="classvehicle.html#ab594a5970cdd36a1a4fbc1423de88538">vehicle::update_alternator_load</a></div><div class="ttdeci">void update_alternator_load()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04594">vehicle.cpp:4594</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307ea592e82f2e1fa297f50f3dd6338c2e5a0"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea592e82f2e1fa297f50f3dd6338c2e5a0">VPFLAG_ENABLED_DRAINS_EPOWER</a></div><div class="ttdeci">@ VPFLAG_ENABLED_DRAINS_EPOWER</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00069">veh_type.h:69</a></div></div>
<div class="ttc" id="avehicle_8cpp_html_a6efa11c29c3f34ce1f160bf4b3e38ff7"><div class="ttname"><a href="vehicle_8cpp.html#a6efa11c29c3f34ce1f160bf4b3e38ff7">flag_PERPETUAL</a></div><div class="ttdeci">static const std::string flag_PERPETUAL(&quot;PERPETUAL&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="vehicle_8h_source.html#l01937">camera_on</a>, <a class="el" href="vehicle_8cpp_source.html#l04926">charge_battery()</a>, <a class="el" href="vehicle_8cpp_source.html#l04973">discharge_battery()</a>, <a class="el" href="vehicle_8h_source.html#l00411">vehicle_part::enabled</a>, <a class="el" href="vehicle_8h_source.html#l01930">engine_on</a>, <a class="el" href="veh__type_8h_source.html#l00185">vpart_info::epower</a>, <a class="el" href="vehicle_8cpp.html#a6efa11c29c3f34ce1f160bf4b3e38ff7">flag_PERPETUAL()</a>, <a class="el" href="vehicle_8cpp_source.html#l03238">fuel_capacity()</a>, <a class="el" href="vehicle_8cpp_source.html#l03179">fuel_left()</a>, <a class="el" href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l02721">get_enabled_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l03101">global_pos3()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00519">vehicle_part::info()</a>, <a class="el" href="vehicle_8h_source.html#l01936">is_alarm_on</a>, <a class="el" href="vehicle_8cpp_source.html#l01092">is_part_on()</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="vehicle_8cpp_source.html#l01208">part_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8cpp_source.html#l00277">player_in_control()</a>, <a class="el" href="veh__type_8h_source.html#l00197">vpart_info::power</a>, <a class="el" href="vehicle_8cpp_source.html#l01217">power_to_energy_bat()</a>, <a class="el" href="vehicle_8h_source.html#l01753">reactors</a>, <a class="el" href="vehicle_8cpp_source.html#l04473">total_accessory_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04482">total_alternator_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04496">total_engine_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04594">update_alternator_load()</a>, <a class="el" href="veh__type_8h_source.html#l00069">VPFLAG_ENABLED_DRAINS_EPOWER</a>, and <a class="el" href="calendar_8cpp_source.html#l00521">x_in_y()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05033">idle()</a>.</p>

</div>
</div>
<a id="a88de59eafc9488490ebdd42cff0e604f" name="a88de59eafc9488490ebdd42cff0e604f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88de59eafc9488490ebdd42cff0e604f">&#9670;&nbsp;</a></span>power_to_energy_bat()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::power_to_energy_bat </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>power_w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtime__duration.html">time_duration</a> &amp;&#160;</td>
          <td class="paramname"><em>d</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01217">1217</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span>{</div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span>    <span class="comment">// Integrate constant epower (watts) over time to get units of battery energy</span></div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span>    <span class="comment">// Thousands of watts over millions of seconds can happen, so 32-bit int</span></div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>    <span class="comment">// insufficient.</span></div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span>    int64_t energy_j = power_w * to_seconds&lt;int64_t&gt;( d );</div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span>    <span class="keywordtype">int</span> energy_bat = energy_j / <a class="code hl_variable" href="vehicle_8cpp.html#aef6226139c1cd17debb5ac460a1c6595">bat_energy_j</a>;</div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span>    <span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacesign.html">sign</a> = power_w &gt;= 0 ? 1 : -1;</div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>    <span class="comment">// energy_bat remainder results in chance at additional charge/discharge</span></div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>    energy_bat += <a class="code hl_function" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( std::abs( energy_j % <a class="code hl_variable" href="vehicle_8cpp.html#aef6226139c1cd17debb5ac460a1c6595">bat_energy_j</a> ), <a class="code hl_variable" href="vehicle_8cpp.html#aef6226139c1cd17debb5ac460a1c6595">bat_energy_j</a> ) ? <a class="code hl_function" href="shape__impl_8h.html#a9394636a770c3d784a10b8334c33f5d2">sign</a> : 0;</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>    <span class="keywordflow">return</span> energy_bat;</div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>}</div>
<div class="ttc" id="anamespacesign_html"><div class="ttname"><a href="namespacesign.html">sign</a></div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__format_8h_source.html#l01360">fmtlib_format.h:1361</a></div></div>
<div class="ttc" id="ashape__impl_8h_html_a9394636a770c3d784a10b8334c33f5d2"><div class="ttname"><a href="shape__impl_8h.html#a9394636a770c3d784a10b8334c33f5d2">sign</a></div><div class="ttdeci">constexpr T sign(T x)</div><div class="ttdef"><b>Definition:</b> <a href="shape__impl_8h_source.html#l00023">shape_impl.h:23</a></div></div>
<div class="ttc" id="avehicle_8cpp_html_aef6226139c1cd17debb5ac460a1c6595"><div class="ttname"><a href="vehicle_8cpp.html#aef6226139c1cd17debb5ac460a1c6595">bat_energy_j</a></div><div class="ttdeci">const int bat_energy_j</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l00114">vehicle.cpp:114</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l00114">bat_energy_j</a>, <a class="el" href="shape__impl_8h_source.html#l00023">sign()</a>, and <a class="el" href="calendar_8cpp_source.html#l00521">x_in_y()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04619">power_parts()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00398">print_fuel_indicator()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00918">start_engine()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06657">update_time()</a>.</p>

</div>
</div>
<a id="a3df213ef35c4a1801ef30d1f65195f40" name="a3df213ef35c4a1801ef30d1f65195f40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3df213ef35c4a1801ef30d1f65195f40">&#9670;&nbsp;</a></span>precalc_mounts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::precalc_mounts </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">units::angle</a>&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>pivot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03024">3024</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03025" name="l03025"></a><span class="lineno"> 3025</span>{</div>
<div class="line"><a id="l03026" name="l03026"></a><span class="lineno"> 3026</span>    <span class="keywordflow">if</span>( idir &lt; 0 || idir &gt; 1 ) {</div>
<div class="line"><a id="l03027" name="l03027"></a><span class="lineno"> 3027</span>        idir = 0;</div>
<div class="line"><a id="l03028" name="l03028"></a><span class="lineno"> 3028</span>    }</div>
<div class="line"><a id="l03029" name="l03029"></a><span class="lineno"> 3029</span>    <a class="code hl_class" href="classtileray.html">tileray</a> tdir( dir );</div>
<div class="line"><a id="l03030" name="l03030"></a><span class="lineno"> 3030</span>    std::unordered_map&lt;point, tripoint&gt; mount_to_precalc;</div>
<div class="line"><a id="l03031" name="l03031"></a><span class="lineno"> 3031</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;p : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l03032" name="l03032"></a><span class="lineno"> 3032</span>        <span class="keywordflow">if</span>( p.removed ) {</div>
<div class="line"><a id="l03033" name="l03033"></a><span class="lineno"> 3033</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03034" name="l03034"></a><span class="lineno"> 3034</span>        }</div>
<div class="line"><a id="l03035" name="l03035"></a><span class="lineno"> 3035</span>        <span class="keyword">auto</span> q = mount_to_precalc.find( p.mount );</div>
<div class="line"><a id="l03036" name="l03036"></a><span class="lineno"> 3036</span>        <span class="keywordflow">if</span>( q == mount_to_precalc.end() ) {</div>
<div class="line"><a id="l03037" name="l03037"></a><span class="lineno"> 3037</span>            <a class="code hl_function" href="classvehicle.html#ad45ae53f6326f7fde4d8e59848470457">coord_translate</a>( tdir, pivot, p.mount, p.precalc[idir] );</div>
<div class="line"><a id="l03038" name="l03038"></a><span class="lineno"> 3038</span>            mount_to_precalc.insert( { p.mount, p.precalc[idir] } );</div>
<div class="line"><a id="l03039" name="l03039"></a><span class="lineno"> 3039</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03040" name="l03040"></a><span class="lineno"> 3040</span>            p.precalc[idir] = q-&gt;second;</div>
<div class="line"><a id="l03041" name="l03041"></a><span class="lineno"> 3041</span>        }</div>
<div class="line"><a id="l03042" name="l03042"></a><span class="lineno"> 3042</span>    }</div>
<div class="line"><a id="l03043" name="l03043"></a><span class="lineno"> 3043</span>    <a class="code hl_variable" href="classvehicle.html#afd4e8e8471b17450205d827dee8a41a5">pivot_anchor</a>[idir] = pivot;</div>
<div class="line"><a id="l03044" name="l03044"></a><span class="lineno"> 3044</span>    <a class="code hl_variable" href="classvehicle.html#a709da7b758c18d51b79311eea6eaca59">pivot_rotation</a>[idir] = dir;</div>
<div class="line"><a id="l03045" name="l03045"></a><span class="lineno"> 3045</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l02988">coord_translate()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8h_source.html#l01889">pivot_anchor</a>, and <a class="el" href="vehicle_8h_source.html#l01883">pivot_rotation</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06849">get_bounding_box()</a>, <a class="el" href="grab_8cpp_source.html#l00021">game::grabbed_veh_move()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l06547">restore()</a>, <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>, and <a class="el" href="vehicle_8cpp_source.html#l00251">vehicle()</a>.</p>

</div>
</div>
<a id="a9f4d8d6d9e975a7f36f1c5baa1c891b3" name="a9f4d8d6d9e975a7f36f1c5baa1c891b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f4d8d6d9e975a7f36f1c5baa1c891b3">&#9670;&nbsp;</a></span>print_fuel_indicator() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::print_fuel_indicator </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcatacurses_1_1window.html">catacurses::window</a> &amp;&#160;</td>
          <td class="paramname"><em>win</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>fuel_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>verbose</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>desc</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prints a fuel gauge for a vehicle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">win</td><td>Pointer to the window to draw in. </td></tr>
    <tr><td class="paramname">p</td><td>location to draw at. </td></tr>
    <tr><td class="paramname">fuel_type</td><td>ID of the fuel type to draw </td></tr>
    <tr><td class="paramname">verbose</td><td>true if there should be anything after the gauge (either the %, or number) </td></tr>
    <tr><td class="paramname">desc</td><td>true if the name of the fuel should be at the end </td></tr>
    <tr><td class="paramname">fuel_usages</td><td>map of fuel types to consumption for verbose </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="vehicle__display_8cpp_source.html#l00391">391</a> of file <a class="el" href="vehicle__display_8cpp_source.html">vehicle_display.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>{</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>    std::map&lt;itype_id, float&gt; fuel_usages;</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>    <a class="code hl_function" href="classvehicle.html#a9f4d8d6d9e975a7f36f1c5baa1c891b3">print_fuel_indicator</a>( win, p, fuel_type, fuel_usages, verbose, desc );</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>}</div>
<div class="ttc" id="aclassvehicle_html_a9f4d8d6d9e975a7f36f1c5baa1c891b3"><div class="ttname"><a href="classvehicle.html#a9f4d8d6d9e975a7f36f1c5baa1c891b3">vehicle::print_fuel_indicator</a></div><div class="ttdeci">void print_fuel_indicator(const catacurses::window &amp;w, const point &amp;p, const itype_id &amp;fuel_type, bool verbose=false, bool desc=false)</div><div class="ttdoc">Prints a fuel gauge for a vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__display_8cpp_source.html#l00391">vehicle_display.cpp:391</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle__display_8cpp_source.html#l00391">print_fuel_indicator()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__display_8cpp_source.html#l00391">print_fuel_indicator()</a>, and <a class="el" href="vehicle__display_8cpp_source.html#l00343">print_fuel_indicators()</a>.</p>

</div>
</div>
<a id="aeff19eb4a60947edcc744b747a3a26e1" name="aeff19eb4a60947edcc744b747a3a26e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeff19eb4a60947edcc744b747a3a26e1">&#9670;&nbsp;</a></span>print_fuel_indicator() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::print_fuel_indicator </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcatacurses_1_1window.html">catacurses::window</a> &amp;&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>fuel_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, float &gt;&#160;</td>
          <td class="paramname"><em>fuel_usages</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>verbose</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>desc</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__display_8cpp_source.html#l00398">398</a> of file <a class="el" href="vehicle__display_8cpp_source.html">vehicle_display.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>{</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> fsyms[5] = { <span class="charliteral">&#39;E&#39;</span>, <span class="charliteral">&#39;\\&#39;</span>, <span class="charliteral">&#39;|&#39;</span>, <span class="charliteral">&#39;/&#39;</span>, <span class="charliteral">&#39;F&#39;</span> };</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>    <a class="code hl_class" href="classnc__color.html">nc_color</a> col_indf1 = <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>;</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>    <span class="keywordtype">int</span> cap = <a class="code hl_function" href="classvehicle.html#a2d14b343f954d77dd649891fefd221de">fuel_capacity</a>( fuel_type );</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>    <span class="keywordtype">int</span> f_left = <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( fuel_type );</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>    <a class="code hl_class" href="classnc__color.html">nc_color</a> f_color = fuel_type-&gt;<a class="code hl_variable" href="structitype.html#af4d6fc9396d1e09f23d2008f974ac757">color</a>;</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>    <span class="comment">// NOLINTNEXTLINE(cata-text-style): not an ellipsis</span></div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>    <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( win, p, col_indf1, <span class="stringliteral">&quot;E...F&quot;</span> );</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>    <span class="keywordtype">int</span> amnt = cap &gt; 0 ? f_left * 99 / cap : 0;</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>    <span class="keywordtype">int</span> indf = ( amnt / 20 ) % 5;</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>    <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( win, p + <a class="code hl_struct" href="structpoint.html">point</a>( indf, 0 ), f_color, <span class="stringliteral">&quot;%c&quot;</span>, fsyms[indf] );</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>    <span class="keywordflow">if</span>( verbose ) {</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="cached__options_8cpp.html#aa021995764a0c77f628e3411497239cc">debug_mode</a> ) {</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>            <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( win, p + <a class="code hl_struct" href="structpoint.html">point</a>( 6, 0 ), f_color, <span class="stringliteral">&quot;%d/%d&quot;</span>, f_left, cap );</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>            <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( win, p + <a class="code hl_struct" href="structpoint.html">point</a>( 6, 0 ), f_color, <span class="stringliteral">&quot;%d&quot;</span>, f_left * 100 / cap );</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>            <a class="code hl_function" href="output_8cpp.html#aedec608a42edd33ec812f7769a9ed0c9">wprintz</a>( win, <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>, <span class="stringliteral">&quot;%c&quot;</span>, 045 );</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>        }</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>    }</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>    <span class="keywordflow">if</span>( desc ) {</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>        <a class="code hl_function" href="output_8cpp.html#aedec608a42edd33ec812f7769a9ed0c9">wprintz</a>( win, <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>, <span class="stringliteral">&quot; - %s&quot;</span>, <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( fuel_type ) );</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>    }</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>    <span class="keywordflow">if</span>( verbose ) {</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>        <span class="keyword">auto</span> fuel_data = fuel_usages.find( fuel_type );</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>        <span class="keywordtype">int</span> rate = 0;</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>        std::string <a class="code hl_namespace" href="namespaceunits.html">units</a>;</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>        <span class="keywordflow">if</span>( fuel_data != fuel_usages.end() ) {</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>            rate = -<a class="code hl_function" href="classvehicle.html#a6f1c8a77b8886bea8f66f8e730270493">consumption_per_hour</a>( fuel_type, fuel_data-&gt;second );</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>            <a class="code hl_namespace" href="namespaceunits.html">units</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;mL&quot;</span> );</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>        }</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>        <span class="keywordflow">if</span>( fuel_type == <a class="code hl_enumvalue" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>( <span class="stringliteral">&quot;battery&quot;</span> ) ) {</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>            rate += <a class="code hl_function" href="classvehicle.html#a88de59eafc9488490ebdd42cff0e604f">power_to_energy_bat</a>( <a class="code hl_function" href="classvehicle.html#a7787708a8d2096bcd114b955e5a3d56f">net_battery_charge_rate_w</a>(), 1_hours );</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>            <a class="code hl_namespace" href="namespaceunits.html">units</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;kJ&quot;</span> );</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>        }</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>        <span class="keywordflow">if</span>( rate != 0 ) {</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>            <span class="keywordtype">int</span> tank_use = 0;</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>            <a class="code hl_class" href="classnc__color.html">nc_color</a> tank_color = <a class="code hl_define" href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a>;</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>            std::string tank_goal = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;full&quot;</span> );</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>            <span class="keywordflow">if</span>( rate &gt; 0 ) {</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>                tank_use = cap - f_left;</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>                <span class="keywordflow">if</span>( !tank_use ) {</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>                }</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>                <span class="keywordflow">if</span>( !f_left ) {</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>                }</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>                tank_use = f_left;</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>                tank_color = <a class="code hl_define" href="color_8h.html#aab11865a3631a7ce78da82b7fb386b71">c_light_red</a>;</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>                tank_goal = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;empty&quot;</span> );</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>            }</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span> </div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>            <a class="code hl_class" href="classitem.html">item</a> fitem( fuel_type );</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>            <span class="keywordtype">int</span> charges_per_L = fitem.charges_per_volume( 1_liter );</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>            <span class="keywordflow">if</span>( charges_per_L == 0 || charges_per_L == <a class="code hl_variable" href="classitem.html#a109dfb20d6dac296bab6c44db0f8ab1a">item::INFINITE_CHARGES</a> ) {</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>            }</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>            <span class="keywordtype">float</span> charges_per_mL = charges_per_L / 1000.0f;</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>            tank_use = tank_use / charges_per_mL;</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span> </div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>            <span class="comment">// promote to double so esimate doesn&#39;t overflow for high fuel values</span></div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>            <span class="comment">// 3600 * tank_use overflows signed 32 bit when tank_use is over ~596523</span></div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>            <span class="keywordtype">double</span> turns = to_turns&lt;double&gt;( 60_minutes );</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>            <a class="code hl_class" href="classtime__duration.html">time_duration</a> estimate = <a class="code hl_function" href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a>( turns * tank_use / std::abs( rate ) );</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span> </div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="cached__options_8cpp.html#aa021995764a0c77f628e3411497239cc">debug_mode</a> ) {</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>                <a class="code hl_function" href="output_8cpp.html#aedec608a42edd33ec812f7769a9ed0c9">wprintz</a>( win, tank_color, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;, %d %s(%4.2f%%)/hour, %s until %s&quot;</span> ),</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>                         rate, <a class="code hl_namespace" href="namespaceunits.html">units</a>, 100.0 * rate  / cap, <a class="code hl_function" href="calendar_8cpp.html#a595c4d560d7152dceb681820e7e00882">to_string_clipped</a>( estimate ), tank_goal );</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>                <a class="code hl_function" href="output_8cpp.html#aedec608a42edd33ec812f7769a9ed0c9">wprintz</a>( win, tank_color, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;, %3.1f%% / hour, %s until %s&quot;</span> ),</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>                         100.0 * rate  / cap, <a class="code hl_function" href="calendar_8cpp.html#a595c4d560d7152dceb681820e7e00882">to_string_clipped</a>( estimate ), tank_goal );</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>            }</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>        }</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>    }</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>}</div>
<div class="ttc" id="acached__options_8cpp_html_aa021995764a0c77f628e3411497239cc"><div class="ttname"><a href="cached__options_8cpp.html#aa021995764a0c77f628e3411497239cc">debug_mode</a></div><div class="ttdeci">bool debug_mode</div><div class="ttdoc">Extended debugging mode, can be toggled during game.</div><div class="ttdef"><b>Definition:</b> <a href="cached__options_8cpp_source.html#l00004">cached_options.cpp:4</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a595c4d560d7152dceb681820e7e00882"><div class="ttname"><a href="calendar_8cpp.html#a595c4d560d7152dceb681820e7e00882">to_string_clipped</a></div><div class="ttdeci">static std::string to_string_clipped(const int num, const clipped_unit type, const clipped_align align)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00228">calendar.cpp:228</a></div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">cata_variant_type::itype_id</a></div><div class="ttdeci">@ itype_id</div></div>
<div class="ttc" id="aclassitem_html_a109dfb20d6dac296bab6c44db0f8ab1a"><div class="ttname"><a href="classitem.html#a109dfb20d6dac296bab6c44db0f8ab1a">item::INFINITE_CHARGES</a></div><div class="ttdeci">static const int INFINITE_CHARGES</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02154">item.h:2154</a></div></div>
<div class="ttc" id="aclassitem_html_a438855ffd52d33307e1dfba6d607535b"><div class="ttname"><a href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a></div><div class="ttdeci">static std::string nname(const itype_id &amp;id, unsigned int quantity=1)</div><div class="ttdoc">Returns the translated item name for the item with given id.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09749">item.cpp:9749</a></div></div>
<div class="ttc" id="aclassvehicle_html_a6f1c8a77b8886bea8f66f8e730270493"><div class="ttname"><a href="classvehicle.html#a6f1c8a77b8886bea8f66f8e730270493">vehicle::consumption_per_hour</a></div><div class="ttdeci">int consumption_per_hour(const itype_id &amp;ftype, int fuel_rate) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03318">vehicle.cpp:3318</a></div></div>
<div class="ttc" id="aclassvehicle_html_a7787708a8d2096bcd114b955e5a3d56f"><div class="ttname"><a href="classvehicle.html#a7787708a8d2096bcd114b955e5a3d56f">vehicle::net_battery_charge_rate_w</a></div><div class="ttdeci">int net_battery_charge_rate_w() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04579">vehicle.cpp:4579</a></div></div>
<div class="ttc" id="acolor_8h_html_a1b1e3c0bef566a83c3535e38a93ad733"><div class="ttname"><a href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a></div><div class="ttdeci">#define c_light_gray</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00019">color.h:19</a></div></div>
<div class="ttc" id="acolor_8h_html_a2236aa1fe66b707a104f19ad45c23230"><div class="ttname"><a href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a></div><div class="ttdeci">#define c_light_green</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00028">color.h:28</a></div></div>
<div class="ttc" id="anamespaceunits_html"><div class="ttname"><a href="namespaceunits.html">units</a></div><div class="ttdef"><b>Definition:</b> <a href="units_8cpp_source.html#l00007">units.cpp:8</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a1184e3eda011b110d09bf2dcf08228f5"><div class="ttname"><a href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a></div><div class="ttdeci">void mvwprintz(const catacurses::window &amp;w, const point &amp;p, const nc_color &amp;FG, const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l02035">output.cpp:2035</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_aedec608a42edd33ec812f7769a9ed0c9"><div class="ttname"><a href="output_8cpp.html#aedec608a42edd33ec812f7769a9ed0c9">wprintz</a></div><div class="ttdeci">void wprintz(const catacurses::window &amp;w, const nc_color &amp;FG, const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l02043">output.cpp:2043</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="color_8h_source.html#l00019">c_light_gray</a>, <a class="el" href="color_8h_source.html#l00028">c_light_green</a>, <a class="el" href="color_8h_source.html#l00027">c_light_red</a>, <a class="el" href="item_8cpp_source.html#l00861">item::charges_per_volume()</a>, <a class="el" href="itype_8h_source.html#l01006">itype::color</a>, <a class="el" href="vehicle_8cpp_source.html#l03318">consumption_per_hour()</a>, <a class="el" href="cached__options_8cpp_source.html#l00004">debug_mode</a>, <a class="el" href="calendar_8h_source.html#l00204">time_duration::from_turns()</a>, <a class="el" href="vehicle_8cpp_source.html#l03238">fuel_capacity()</a>, <a class="el" href="vehicle_8cpp_source.html#l03179">fuel_left()</a>, <a class="el" href="item_8h_source.html#l02154">item::INFINITE_CHARGES</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>, <a class="el" href="output_8cpp_source.html#l02035">mvwprintz()</a>, <a class="el" href="vehicle_8cpp_source.html#l04579">net_battery_charge_rate_w()</a>, <a class="el" href="item_8cpp_source.html#l09749">item::nname()</a>, <a class="el" href="vehicle_8cpp_source.html#l01217">power_to_energy_bat()</a>, <a class="el" href="calendar_8cpp_source.html#l00228">to_string_clipped()</a>, and <a class="el" href="output_8cpp_source.html#l02043">wprintz()</a>.</p>

</div>
</div>
<a id="a74615c0f1ae9301f623bbea94a9f23c4" name="a74615c0f1ae9301f623bbea94a9f23c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74615c0f1ae9301f623bbea94a9f23c4">&#9670;&nbsp;</a></span>print_fuel_indicators()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::print_fuel_indicators </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcatacurses_1_1window.html">catacurses::window</a> &amp;&#160;</td>
          <td class="paramname"><em>win</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>start_index</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fullsize</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>verbose</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>desc</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isHorizontal</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prints all of the fuel indicators of the vehicle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">win</td><td>Pointer to the window to draw in. </td></tr>
    <tr><td class="paramname">y</td><td>Y location to draw at. </td></tr>
    <tr><td class="paramname">x</td><td>X location to draw at. </td></tr>
    <tr><td class="paramname">start_index</td><td>Starting index in array of fuel gauges to start reading from </td></tr>
    <tr><td class="paramname">fullsize</td><td>true if it's expected to print multiple rows </td></tr>
    <tr><td class="paramname">verbose</td><td>true if there should be anything after the gauge (either the %, or number) </td></tr>
    <tr><td class="paramname">desc</td><td>true if the name of the fuel should be at the end </td></tr>
    <tr><td class="paramname">isHorizontal</td><td>true if the menu is not vertical </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="vehicle__display_8cpp_source.html#l00343">343</a> of file <a class="el" href="vehicle__display_8cpp_source.html">vehicle_display.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>{</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>    <span class="keyword">auto</span> fuels = <a class="code hl_function" href="classvehicle.html#a574a15ae1c2572a6dafa55be0c7f3b25">get_printable_fuel_types</a>();</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>    <span class="keywordflow">if</span>( fuels.empty() ) {</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>    }</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>    <span class="keywordflow">if</span>( !fullsize ) {</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>        <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> e = 0; e &lt; <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.size(); e++ ) {</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>            <span class="comment">// if only one display, print the first engine that&#39;s on and consumes power</span></div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a4d73f86ddc3aafe3231c33c098b9d6c8">is_engine_on</a>( e ) &amp;&amp;</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>                !( <a class="code hl_function" href="classvehicle.html#a850e134844078b5efa1084fc1ebbeec0">is_perpetual_type</a>( e ) || <a class="code hl_function" href="classvehicle.html#aaea77fa5cfb98d7b1aadb0e71ee7a671">is_engine_type</a>( e, <a class="code hl_variable" href="vehicle__display_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a> ) ) ) {</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>                <a class="code hl_function" href="classvehicle.html#a9f4d8d6d9e975a7f36f1c5baa1c891b3">print_fuel_indicator</a>( win, p, <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a> [ e ] ].fuel_current(), verbose,</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>                                      desc );</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>            }</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>        }</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>        <span class="comment">// or print the first fuel if no engines</span></div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>        <a class="code hl_function" href="classvehicle.html#a9f4d8d6d9e975a7f36f1c5baa1c891b3">print_fuel_indicator</a>( win, p, fuels.front(), verbose, desc );</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>    }</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span> </div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>    <span class="keywordtype">int</span> yofs = 0;</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>    <span class="keywordtype">int</span> max_gauge = ( isHorizontal ? 12 : 5 ) + start_index;</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>    <span class="keywordtype">int</span> max_size = std::min( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( fuels.size() ), max_gauge );</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span> </div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = start_index; i &lt; max_size; i++ ) {</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>        <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> &amp;f = fuels[i];</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>        <a class="code hl_function" href="classvehicle.html#a9f4d8d6d9e975a7f36f1c5baa1c891b3">print_fuel_indicator</a>( win, p + <a class="code hl_struct" href="structpoint.html">point</a>( 0, yofs ), f, <a class="code hl_variable" href="classvehicle.html#ad9047841099276d5de5a6771be72233a">fuel_used_last_turn</a>, verbose, desc );</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>        yofs++;</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>    }</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span> </div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>    <span class="comment">// check if the current index is less than the max size minus 12 or 5, to indicate that there&#39;s more</span></div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>    <span class="keywordflow">if</span>( start_index &lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( fuels.size() ) - ( isHorizontal ? 12 : 5 ) ) {</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>        <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( win, p + <a class="code hl_struct" href="structpoint.html">point</a>( 0, yofs ), <a class="code hl_define" href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a>, <span class="stringliteral">&quot;&gt;&quot;</span> );</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>        <a class="code hl_function" href="output_8cpp.html#aedec608a42edd33ec812f7769a9ed0c9">wprintz</a>( win, <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>, <span class="stringliteral">&quot; for more&quot;</span> );</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>    }</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>}</div>
<div class="ttc" id="aclassvehicle_html_a574a15ae1c2572a6dafa55be0c7f3b25"><div class="ttname"><a href="classvehicle.html#a574a15ae1c2572a6dafa55be0c7f3b25">vehicle::get_printable_fuel_types</a></div><div class="ttdeci">std::vector&lt; itype_id &gt; get_printable_fuel_types() const</div><div class="ttdoc">Returns an array of fuel types that can be printed.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__display_8cpp_source.html#l00314">vehicle_display.cpp:314</a></div></div>
<div class="ttc" id="avehicle__display_8cpp_html_af54ee122fbd5cf94c6ef8bca7e67c8e8"><div class="ttname"><a href="vehicle__display_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a></div><div class="ttdeci">static const itype_id fuel_type_muscle(&quot;muscle&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="color_8h_source.html#l00019">c_light_gray</a>, <a class="el" href="color_8h_source.html#l00028">c_light_green</a>, <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, <a class="el" href="vehicle__display_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a>, <a class="el" href="vehicle_8h_source.html#l01805">fuel_used_last_turn</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00314">get_printable_fuel_types()</a>, <a class="el" href="vehicle_8cpp_source.html#l01087">is_engine_on()</a>, <a class="el" href="vehicle_8cpp_source.html#l01075">is_engine_type()</a>, <a class="el" href="vehicle_8cpp_source.html#l01081">is_perpetual_type()</a>, <a class="el" href="output_8cpp_source.html#l02035">mvwprintz()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00391">print_fuel_indicator()</a>, and <a class="el" href="output_8cpp_source.html#l02043">wprintz()</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>, <a class="el" href="panels_8cpp_source.html#l01651">draw_health_classic()</a>, <a class="el" href="panels_8cpp_source.html#l01848">draw_veh_compact()</a>, and <a class="el" href="panels_8cpp_source.html#l01880">draw_veh_padding()</a>.</p>

</div>
</div>
<a id="af0e3632190f7d337f88938e688a092b9" name="af0e3632190f7d337f88938e688a092b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0e3632190f7d337f88938e688a092b9">&#9670;&nbsp;</a></span>print_part_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::print_part_list </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcatacurses_1_1window.html">catacurses::window</a> &amp;&#160;</td>
          <td class="paramname"><em>win</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>y1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>hl</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>detail</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prints a list of all parts to the screen inside of a boxed window, possibly highlighting a selected one. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">win</td><td>The window to draw in. </td></tr>
    <tr><td class="paramname">y1</td><td>The y-coordinate to start drawing at. </td></tr>
    <tr><td class="paramname">max_y</td><td>Draw no further than this y-coordinate. </td></tr>
    <tr><td class="paramname">width</td><td>The width of the window. </td></tr>
    <tr><td class="paramname">p</td><td>The index of the part being examined. </td></tr>
    <tr><td class="paramname">hl</td><td>The index of the part to highlight (if any). </td></tr>
    <tr><td class="paramname">detail</td><td>Whether or not to show detailed contents for fuel components. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="vehicle__display_8cpp_source.html#l00149">149</a> of file <a class="el" href="vehicle__display_8cpp_source.html">vehicle_display.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>{</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>    <span class="keywordflow">if</span>( p &lt; 0 || p &gt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size() ) ) {</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>        <span class="keywordflow">return</span> y1;</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>    }</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    std::vector&lt;int&gt; pl = this-&gt;<a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].mount, <span class="keyword">true</span> );</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>    <span class="keywordtype">int</span> y = y1;</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0; i &lt; pl.size(); i++ ) {</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>        <span class="keywordflow">if</span>( y &gt;= max_y ) {</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>            <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( win, <a class="code hl_struct" href="structpoint.html">point</a>( 1, y ), <a class="code hl_define" href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;More parts here…&quot;</span> ) );</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>            ++y;</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>        }</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span> </div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ pl [ i ] ];</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span> </div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>        std::string partname = vp.<a class="code hl_function" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>();</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span> </div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>        <span class="keywordflow">if</span>( vp.<a class="code hl_function" href="structvehicle__part.html#a212238a594301bf7ff4a1264421b6152">is_fuel_store</a>() &amp;&amp; !vp.<a class="code hl_function" href="structvehicle__part.html#ad8e149b4d200656c134e3f90f82f3fe4">ammo_current</a>().<a class="code hl_function" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) {</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>            <span class="keywordflow">if</span>( <a class="code hl_namespace" href="namespacedetail.html">detail</a> ) {</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>                <span class="keywordflow">if</span>( vp.<a class="code hl_function" href="structvehicle__part.html#ad8e149b4d200656c134e3f90f82f3fe4">ammo_current</a>() == <a class="code hl_variable" href="vehicle__display_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a> ) {</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>                    partname += <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot; (%s/%s charge)&quot;</span> ), vp.<a class="code hl_function" href="structvehicle__part.html#a9c6bf106558c9ed00536e2d7cb0e862d">ammo_remaining</a>(), vp.<a class="code hl_function" href="structvehicle__part.html#a3cdc75652e7509b56d164fe9e5c15231">ammo_capacity</a>() );</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>                    <span class="keyword">const</span> <a class="code hl_struct" href="structitype.html">itype</a> *pt_ammo_cur = &amp;*vp.<a class="code hl_function" href="structvehicle__part.html#ad8e149b4d200656c134e3f90f82f3fe4">ammo_current</a>();</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>                    <span class="keyword">auto</span> stack = <a class="code hl_variable" href="namespaceunits.html#a58e7d31fbaa28a1dd45fb598f8d1fba9">units::legacy_volume_factor</a> / pt_ammo_cur-&gt;<a class="code hl_variable" href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">stack_size</a>;</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>                    partname += <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot; (%.1fL %s)&quot;</span> ),</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>                                               <a class="code hl_function" href="cata__utility_8cpp.html#a9dbcecb703a6e1111a0552177b6bf9fc">round_up</a>( <a class="code hl_function" href="namespaceunits.html#a4e18c5472c3f55e110fb16c9e0fe8c45">units::to_liter</a>( vp.<a class="code hl_function" href="structvehicle__part.html#a9c6bf106558c9ed00536e2d7cb0e862d">ammo_remaining</a>() * stack ),</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>                                                         1 ), <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( vp.<a class="code hl_function" href="structvehicle__part.html#ad8e149b4d200656c134e3f90f82f3fe4">ammo_current</a>() ) );</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>                }</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>                partname += <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <span class="stringliteral">&quot; (%s)&quot;</span>, <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( vp.<a class="code hl_function" href="structvehicle__part.html#ad8e149b4d200656c134e3f90f82f3fe4">ammo_current</a>() ) );</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>            }</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>        }</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span> </div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( pl[i], <span class="stringliteral">&quot;CARGO&quot;</span> ) ) {</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>            <span class="comment">//~ used/total volume of a cargo vehicle part</span></div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>            partname += <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot; (vol: %s/%s %s)&quot;</span> ),</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>                                       <a class="code hl_function" href="output_8cpp.html#a297635a05a44e1f896fb829a0474f586">format_volume</a>( <a class="code hl_function" href="classvehicle.html#a47f721a94d09f4161b41c3e85fadf6a5">stored_volume</a>( pl[i] ) ),</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>                                       <a class="code hl_function" href="output_8cpp.html#a297635a05a44e1f896fb829a0474f586">format_volume</a>( <a class="code hl_function" href="classvehicle.html#a197b7a92e0fe24d69d2b3368df720059">max_volume</a>( pl[i] ) ),</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>                                       <a class="code hl_function" href="units__utility_8cpp.html#a5c2697027e2386941cdc4f6adbe8faac">volume_units_abbr</a>() );</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>        }</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span> </div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>        <span class="keywordtype">bool</span> armor = <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( pl[i], <span class="stringliteral">&quot;ARMOR&quot;</span> );</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>        std::string left_sym;</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>        std::string right_sym;</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>        <span class="keywordflow">if</span>( armor ) {</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>            left_sym = <span class="stringliteral">&quot;(&quot;</span>;</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>            right_sym = <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( pl[i] ).location == <a class="code hl_function" href="vehicle__display_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure</a> ) {</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>            left_sym = <span class="stringliteral">&quot;[&quot;</span>;</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>            right_sym = <span class="stringliteral">&quot;]&quot;</span>;</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>            left_sym = <span class="stringliteral">&quot;-&quot;</span>;</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>            right_sym = <span class="stringliteral">&quot;-&quot;</span>;</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>        }</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>        <a class="code hl_class" href="classnc__color.html">nc_color</a> sym_color = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( i ) == hl ? <a class="code hl_function" href="color_8cpp.html#a99e42a5de98370aab8662d4423cf4a4d">hilite</a>( <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a> ) : <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>;</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>        <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( win, <a class="code hl_struct" href="structpoint.html">point</a>( 1, y ), sym_color, left_sym );</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>        <a class="code hl_function" href="output_8cpp.html#ab7abbbd98907f496533db9bc2a02cf4a">trim_and_print</a>( win, <a class="code hl_struct" href="structpoint.html">point</a>( 2, y ), <a class="code hl_function" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( win ) - 4,</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>                        <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( i ) == hl ? <a class="code hl_function" href="color_8cpp.html#a99e42a5de98370aab8662d4423cf4a4d">hilite</a>( <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a> ) : <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>, partname );</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>        <a class="code hl_function" href="output_8cpp.html#aedec608a42edd33ec812f7769a9ed0c9">wprintz</a>( win, sym_color, right_sym );</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span> </div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>        <span class="keywordflow">if</span>( i == 0 &amp;&amp; <a class="code hl_class" href="classvpart__position.html">vpart_position</a>( <span class="keyword">const_cast&lt;</span><a class="code hl_class" href="classvehicle.html">vehicle</a> &amp;<span class="keyword">&gt;</span>( *<span class="keyword">this</span> ), pl[i] ).is_inside() ) {</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>            <span class="comment">//~ indicates that a vehicle part is inside</span></div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>            <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( win, <a class="code hl_struct" href="structpoint.html">point</a>( width - 2 - <a class="code hl_function" href="catacharset_8cpp.html#a7616a48a4b48437c60b6683439a8f3e2">utf8_width</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Interior&quot;</span> ) ), y ), <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>,</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Interior&quot;</span> ) );</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( i == 0 ) {</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>            <span class="comment">//~ indicates that a vehicle part is outside</span></div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>            <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( win, <a class="code hl_struct" href="structpoint.html">point</a>( width - 2 - <a class="code hl_function" href="catacharset_8cpp.html#a7616a48a4b48437c60b6683439a8f3e2">utf8_width</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Exterior&quot;</span> ) ), y ), <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>,</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Exterior&quot;</span> ) );</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>        }</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>        y++;</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>    }</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span> </div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>    <span class="comment">// print the label for this location</span></div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>    <span class="keyword">const</span> <a class="code hl_class" href="classcata_1_1optional.html">cata::optional&lt;std::string&gt;</a> <a class="code hl_struct" href="structlabel.html">label</a> = <a class="code hl_class" href="classvpart__position.html">vpart_position</a>( <span class="keyword">const_cast&lt;</span><a class="code hl_class" href="classvehicle.html">vehicle</a> &amp;<span class="keyword">&gt;</span>( *<span class="keyword">this</span> ),</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>            p ).<a class="code hl_function" href="classvpart__position.html#a31e71fc8c142caf3cbcf24e5cedee4fe">get_label</a>();</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>    <span class="keywordflow">if</span>( <a class="code hl_struct" href="structlabel.html">label</a> &amp;&amp; y &lt;= max_y ) {</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>        <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( win, <a class="code hl_struct" href="structpoint.html">point</a>( 1, y++ ), <a class="code hl_define" href="color_8h.html#aab11865a3631a7ce78da82b7fb386b71">c_light_red</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Label: %s&quot;</span> ), <a class="code hl_struct" href="structlabel.html">label</a>-&gt;c_str() );</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>    }</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span> </div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>    <span class="keywordflow">return</span> y;</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>}</div>
<div class="ttc" id="acata__utility_8cpp_html_a9dbcecb703a6e1111a0552177b6bf9fc"><div class="ttname"><a href="cata__utility_8cpp.html#a9dbcecb703a6e1111a0552177b6bf9fc">round_up</a></div><div class="ttdeci">double round_up(double val, unsigned int dp)</div><div class="ttdoc">Round a value up at a given decimal place.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00042">cata_utility.cpp:42</a></div></div>
<div class="ttc" id="acatacharset_8cpp_html_a7616a48a4b48437c60b6683439a8f3e2"><div class="ttname"><a href="catacharset_8cpp.html#a7616a48a4b48437c60b6683439a8f3e2">utf8_width</a></div><div class="ttdeci">int utf8_width(const char *s, const bool ignore_tags)</div><div class="ttdef"><b>Definition:</b> <a href="catacharset_8cpp_source.html#l00142">catacharset.cpp:142</a></div></div>
<div class="ttc" id="aclassvehicle_html_a197b7a92e0fe24d69d2b3368df720059"><div class="ttname"><a href="classvehicle.html#a197b7a92e0fe24d69d2b3368df720059">vehicle::max_volume</a></div><div class="ttdeci">units::volume max_volume(int part) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05158">vehicle.cpp:5158</a></div></div>
<div class="ttc" id="aclassvehicle_html_a47f721a94d09f4161b41c3e85fadf6a5"><div class="ttname"><a href="classvehicle.html#a47f721a94d09f4161b41c3e85fadf6a5">vehicle::stored_volume</a></div><div class="ttdeci">units::volume stored_volume(int part) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05153">vehicle.cpp:5153</a></div></div>
<div class="ttc" id="aclassvpart__position_html"><div class="ttname"><a href="classvpart__position.html">vpart_position</a></div><div class="ttdoc">Reference to a position (a point) of the vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="vpart__position_8h_source.html#l00036">vpart_position.h:37</a></div></div>
<div class="ttc" id="aclassvpart__position_html_a31e71fc8c142caf3cbcf24e5cedee4fe"><div class="ttname"><a href="classvpart__position.html#a31e71fc8c142caf3cbcf24e5cedee4fe">vpart_position::get_label</a></div><div class="ttdeci">cata::optional&lt; std::string &gt; get_label() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02619">vehicle.cpp:2619</a></div></div>
<div class="ttc" id="acolor_8cpp_html_a99e42a5de98370aab8662d4423cf4a4d"><div class="ttname"><a href="color_8cpp.html#a99e42a5de98370aab8662d4423cf4a4d">hilite</a></div><div class="ttdeci">nc_color hilite(const nc_color &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="color_8cpp_source.html#l00509">color.cpp:509</a></div></div>
<div class="ttc" id="acolor_8h_html_a81e80ab9142609903b4788a6bb31ae45"><div class="ttname"><a href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a></div><div class="ttdeci">#define c_yellow</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00032">color.h:32</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_a929fe85d472028f52d8a5cdfc0d35017"><div class="ttname"><a href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">catacurses::getmaxx</a></div><div class="ttdeci">int getmaxx(const window &amp;win)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00058">ncurses_def.cpp:58</a></div></div>
<div class="ttc" id="anamespacedetail_html"><div class="ttname"><a href="namespacedetail.html">detail</a></div><div class="ttdef"><b>Definition:</b> <a href="assign_8h_source.html#l00025">assign.h:26</a></div></div>
<div class="ttc" id="anamespaceunits_html_a4e18c5472c3f55e110fb16c9e0fe8c45"><div class="ttname"><a href="namespaceunits.html#a4e18c5472c3f55e110fb16c9e0fe8c45">units::to_liter</a></div><div class="ttdeci">constexpr double to_liter(const volume &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units__volume_8h_source.html#l00043">units_volume.h:43</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a297635a05a44e1f896fb829a0474f586"><div class="ttname"><a href="output_8cpp.html#a297635a05a44e1f896fb829a0474f586">format_volume</a></div><div class="ttdeci">std::string format_volume(const units::volume &amp;volume)</div><div class="ttdoc">Convert, round up and format a volume.</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l01974">output.cpp:1974</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ab7abbbd98907f496533db9bc2a02cf4a"><div class="ttname"><a href="output_8cpp.html#ab7abbbd98907f496533db9bc2a02cf4a">trim_and_print</a></div><div class="ttdeci">void trim_and_print(const catacurses::window &amp;w, const point &amp;begin, const int width, const nc_color &amp;base_color, const std::string &amp;text, const report_color_error color_error)</div><div class="ttdoc">Prints a single line of text.</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00214">output.cpp:214</a></div></div>
<div class="ttc" id="astructitype_html_a531f460f3ba31cb3e433f7e585e1d4e5"><div class="ttname"><a href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">itype::stack_size</a></div><div class="ttdeci">int stack_size</div><div class="ttdoc">Number of items per above volume for count_by_charges items.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00982">itype.h:982</a></div></div>
<div class="ttc" id="astructlabel_html"><div class="ttname"><a href="structlabel.html">label</a></div><div class="ttdoc">Struct used for storing labels (easier to json opposed to a std::map&lt;point, std::string&gt;)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00578">vehicle.h:578</a></div></div>
<div class="ttc" id="aunits__utility_8cpp_html_a5c2697027e2386941cdc4f6adbe8faac"><div class="ttname"><a href="units__utility_8cpp.html#a5c2697027e2386941cdc4f6adbe8faac">volume_units_abbr</a></div><div class="ttdeci">const char * volume_units_abbr()</div><div class="ttdoc">Create an abbreviated units label for a volume value.</div><div class="ttdef"><b>Definition:</b> <a href="units__utility_8cpp_source.html#l00037">units_utility.cpp:37</a></div></div>
<div class="ttc" id="avehicle__display_8cpp_html_a00735c0bfb68c2a0c0c7d53e8f72a70e"><div class="ttname"><a href="vehicle__display_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure</a></div><div class="ttdeci">static const std::string part_location_structure(&quot;structure&quot;)</div></div>
<div class="ttc" id="avehicle__display_8cpp_html_ab5f267c571dc194e5b7e0b10b5136a33"><div class="ttname"><a href="vehicle__display_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a></div><div class="ttdeci">static const itype_id itype_battery(&quot;battery&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00228">vehicle_part::ammo_capacity()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00211">vehicle_part::ammo_current()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00241">vehicle_part::ammo_remaining()</a>, <a class="el" href="color_8h_source.html#l00019">c_light_gray</a>, <a class="el" href="color_8h_source.html#l00027">c_light_red</a>, <a class="el" href="color_8h_source.html#l00032">c_yellow</a>, <a class="el" href="output_8cpp_source.html#l01974">format_volume()</a>, <a class="el" href="vehicle_8cpp_source.html#l02619">vpart_position::get_label()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00058">catacurses::getmaxx()</a>, <a class="el" href="color_8cpp_source.html#l00509">hilite()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00481">vehicle_part::is_fuel_store()</a>, <a class="el" href="string__id_8h_source.html#l00317">string_id&lt; T &gt;::is_null()</a>, <a class="el" href="vehicle__display_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a>, <a class="el" href="units__volume_8h_source.html#l00050">units::legacy_volume_factor</a>, <a class="el" href="vehicle_8cpp_source.html#l05158">max_volume()</a>, <a class="el" href="output_8cpp_source.html#l02035">mvwprintz()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00105">vehicle_part::name()</a>, <a class="el" href="item_8cpp_source.html#l09749">item::nname()</a>, <a class="el" href="vehicle_8cpp_source.html#l02875">part_flag()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle__display_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>, <a class="el" href="cata__utility_8cpp_source.html#l00042">round_up()</a>, <a class="el" href="itype_8h_source.html#l00982">itype::stack_size</a>, <a class="el" href="vehicle_8cpp_source.html#l05153">stored_volume()</a>, <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>, <a class="el" href="units__volume_8h_source.html#l00043">units::to_liter()</a>, <a class="el" href="output_8cpp_source.html#l00214">trim_and_print()</a>, <a class="el" href="catacharset_8cpp_source.html#l00142">utf8_width()</a>, <a class="el" href="units__utility_8cpp_source.html#l00037">volume_units_abbr()</a>, and <a class="el" href="output_8cpp_source.html#l02043">wprintz()</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l00341">veh_interact::create_or_get_ui_adaptor()</a>, and <a class="el" href="game_8cpp_source.html#l06220">game::print_vehicle_info()</a>.</p>

</div>
</div>
<a id="a98b1fa3f71287aad0de13e3166e8a6e7" name="a98b1fa3f71287aad0de13e3166e8a6e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98b1fa3f71287aad0de13e3166e8a6e7">&#9670;&nbsp;</a></span>print_vparts_descs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::print_vparts_descs </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcatacurses_1_1window.html">catacurses::window</a> &amp;&#160;</td>
          <td class="paramname"><em>win</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>start_at</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>start_limit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prints a list of descriptions for all parts to the screen inside of a boxed window. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">win</td><td>The window to draw in. </td></tr>
    <tr><td class="paramname">max_y</td><td>Draw no further than this y-coordinate. </td></tr>
    <tr><td class="paramname">width</td><td>The width of the window. </td></tr>
    <tr><td class="paramname">p</td><td>The index of the part being examined. </td></tr>
    <tr><td class="paramname">start_at</td><td>Which vehicle part to start printing at. </td></tr>
    <tr><td class="paramname">start_limit</td><td>the part index beyond which the display is full </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="vehicle__display_8cpp_source.html#l00242">242</a> of file <a class="el" href="vehicle__display_8cpp_source.html">vehicle_display.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>{</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>    <span class="keywordflow">if</span>( p &lt; 0 || p &gt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size() ) ) {</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>    }</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span> </div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>    std::vector&lt;int&gt; pl = this-&gt;<a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].mount, <span class="keyword">true</span> );</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>    std::string msg;</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span> </div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>    <span class="keywordtype">int</span> lines = 0;</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>    <span class="comment">/*</span></div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span><span class="comment">     * start_at and start_limit interaction is little tricky</span></div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span><span class="comment">     * start_at and start_limit start at 0 when moving to a new frame</span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span><span class="comment">     * if all the descriptions are displayed in the window, start_limit stays at 0 and</span></div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span><span class="comment">     *    start_at is capped at 0 - so no scrolling at all.</span></div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span><span class="comment">     * if all the descriptions aren&#39;t displayed, start_limit jumps to the last displayed part</span></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span><span class="comment">     *    and the next scrollthrough can start there - so scrolling down happens.</span></div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span><span class="comment">     * when the scroll reaches the point where all the remaining descriptions are displayed in</span></div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span><span class="comment">     *    the window, start_limit is set to start_at again.</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span><span class="comment">     * on the next attempted scrolldown, start_limit is set to the nth item, and start_at is</span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span><span class="comment">     *    capped to the nth item, so no more scrolling down.</span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span><span class="comment">     * start_at can always go down, but never below 0, so scrolling up is only possible after</span></div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span><span class="comment">     *    some scrolling down has occurred.</span></div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span><span class="comment">     * important! the calling function needs to track p, start_at, and start_limit, and set</span></div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span><span class="comment">     *    start_limit to 0 if p changes.</span></div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span><span class="comment">     */</span></div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>    start_at = std::max( 0, std::min( start_at, start_limit ) );</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>    <span class="keywordflow">if</span>( start_at ) {</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>        msg += std::string( <span class="stringliteral">&quot;&lt;color_yellow&gt;&quot;</span> ) + <span class="stringliteral">&quot;&lt;  &quot;</span> + <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;More parts here…&quot;</span> ) + <span class="stringliteral">&quot;&lt;/color&gt;\n&quot;</span>;</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>        lines += 1;</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>    }</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = start_at; i &lt; pl.size(); i++ ) {</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ pl [ i ] ];</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>        std::string possible_msg;</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>        <span class="keyword">const</span> <a class="code hl_class" href="classnc__color.html">nc_color</a> name_color = vp.<a class="code hl_function" href="structvehicle__part.html#aeee4fac34f34d6c9ff557fde6590439d">is_broken</a>() ? <a class="code hl_define" href="color_8h.html#a5738d18ff9e165cca088a623cb1883ae">c_dark_gray</a> : <a class="code hl_define" href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a>;</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>        possible_msg += <a class="code hl_function" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( vp.<a class="code hl_function" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>(), name_color ) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>        <span class="keyword">const</span> <a class="code hl_class" href="classnc__color.html">nc_color</a> desc_color = vp.<a class="code hl_function" href="structvehicle__part.html#aeee4fac34f34d6c9ff557fde6590439d">is_broken</a>() ? <a class="code hl_define" href="color_8h.html#a5738d18ff9e165cca088a623cb1883ae">c_dark_gray</a> : <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>;</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>        <span class="comment">// -4 = -2 for left &amp; right padding + -2 for &quot;&gt; &quot;</span></div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>        <span class="keywordtype">int</span> new_lines = 2 + vp.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#aedacbd352267de4aef1ca01183956df8">format_description</a>( possible_msg, desc_color, width - 4 );</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>        <span class="keywordflow">if</span>( vp.<a class="code hl_function" href="structvehicle__part.html#a47e1312a6ae089f6870efb218f6aa04e">has_flag</a>( <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaa9d1a55e312464c51ecce1f0e187c4287">vehicle_part::carrying_flag</a> ) ) {</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>            possible_msg += <span class="stringliteral">&quot;  Carrying a vehicle on a rack.\n&quot;</span>;</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>            new_lines += 1;</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>        }</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>        <span class="keywordflow">if</span>( vp.<a class="code hl_function" href="structvehicle__part.html#a47e1312a6ae089f6870efb218f6aa04e">has_flag</a>( <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaae9d481422fe656a547014c35ff6f2045">vehicle_part::carried_flag</a> ) ) {</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>            possible_msg += <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <span class="stringliteral">&quot;  Part of a %s carried on a rack.\n&quot;</span>,</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>                                           vp.<a class="code hl_function" href="structvehicle__part.html#af5ed5dfd537934a8c7a81748e90b6f2b">carried_name</a>() );</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>            new_lines += 1;</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>        }</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span> </div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>        possible_msg += <span class="stringliteral">&quot;&lt;/color&gt;\n&quot;</span>;</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>        <span class="keywordflow">if</span>( lines + new_lines &lt;= max_y ) {</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>            msg += possible_msg;</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>            lines += new_lines;</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>            start_limit = start_at;</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>            msg += std::string( <span class="stringliteral">&quot;&lt;color_yellow&gt;&quot;</span> ) + <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;More parts here…&quot;</span> ) + <span class="stringliteral">&quot;  &gt;&quot;</span> + <span class="stringliteral">&quot;&lt;/color&gt;\n&quot;</span>;</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>            start_limit = i;</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>        }</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>    }</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>    <a class="code hl_function" href="namespacecatacurses.html#ace2ce3990cb812fb83adf6e4ea1f9e8e">werase</a>( win );</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    <span class="comment">// -2 for left &amp; right padding</span></div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>    <span class="comment">// NOLINTNEXTLINE(cata-use-named-point-constants)</span></div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>    <a class="code hl_function" href="output_8cpp.html#ab9659cbe9ec23a2efd813f795cb7fb73">fold_and_print</a>( win, <a class="code hl_struct" href="structpoint.html">point</a>( 1, 0 ), width - 2, <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>, msg );</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>    <a class="code hl_function" href="namespacecatacurses.html#aa9823d249c21fa50daf277957fabb175">wnoutrefresh</a>( win );</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>}</div>
<div class="ttc" id="aclassvpart__info_html_aedacbd352267de4aef1ca01183956df8"><div class="ttname"><a href="classvpart__info.html#aedacbd352267de4aef1ca01183956df8">vpart_info::format_description</a></div><div class="ttdeci">int format_description(std::string &amp;msg, const nc_color &amp;format_color, int width) const</div><div class="ttdoc">Format the description for display.</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8cpp_source.html#l00708">veh_type.cpp:708</a></div></div>
<div class="ttc" id="acolor_8h_html_a5738d18ff9e165cca088a623cb1883ae"><div class="ttname"><a href="color_8h.html#a5738d18ff9e165cca088a623cb1883ae">c_dark_gray</a></div><div class="ttdeci">#define c_dark_gray</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00020">color.h:20</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_aa9823d249c21fa50daf277957fabb175"><div class="ttname"><a href="namespacecatacurses.html#aa9823d249c21fa50daf277957fabb175">catacurses::wnoutrefresh</a></div><div class="ttdeci">void wnoutrefresh(const window &amp;win)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00043">ncurses_def.cpp:43</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_ace2ce3990cb812fb83adf6e4ea1f9e8e"><div class="ttname"><a href="namespacecatacurses.html#ace2ce3990cb812fb83adf6e4ea1f9e8e">catacurses::werase</a></div><div class="ttdeci">void werase(const window &amp;win)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00053">ncurses_def.cpp:53</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ab9659cbe9ec23a2efd813f795cb7fb73"><div class="ttname"><a href="output_8cpp.html#ab9659cbe9ec23a2efd813f795cb7fb73">fold_and_print</a></div><div class="ttdeci">int fold_and_print(const catacurses::window &amp;w, const point &amp;begin, int width, const nc_color &amp;base_color, const std::string &amp;text, const char split)</div><div class="ttdoc">Fold and print text in the given window.</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00299">output.cpp:299</a></div></div>
<div class="ttc" id="astructvehicle__part_html_af5ed5dfd537934a8c7a81748e90b6f2b"><div class="ttname"><a href="structvehicle__part.html#af5ed5dfd537934a8c7a81748e90b6f2b">vehicle_part::carried_name</a></div><div class="ttdeci">std::string carried_name() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00604">vehicle_part.cpp:604</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="color_8h_source.html#l00020">c_dark_gray</a>, <a class="el" href="color_8h_source.html#l00019">c_light_gray</a>, <a class="el" href="color_8h_source.html#l00028">c_light_green</a>, <a class="el" href="vehicle_8h_source.html#l00194">vehicle_part::carried_flag</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00604">vehicle_part::carried_name()</a>, <a class="el" href="vehicle_8h_source.html#l00195">vehicle_part::carrying_flag</a>, <a class="el" href="color_8cpp_source.html#l00669">colorize()</a>, <a class="el" href="output_8cpp_source.html#l00299">fold_and_print()</a>, <a class="el" href="veh__type_8cpp_source.html#l00708">vpart_info::format_description()</a>, <a class="el" href="vehicle_8h_source.html#l00208">vehicle_part::has_flag()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00519">vehicle_part::info()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00170">vehicle_part::is_broken()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00105">vehicle_part::name()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>, <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00053">catacurses::werase()</a>, and <a class="el" href="ncurses__def_8cpp_source.html#l00043">catacurses::wnoutrefresh()</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l00341">veh_interact::create_or_get_ui_adaptor()</a>.</p>

</div>
</div>
<a id="ab1a357d8a761eee6126a31549e5a2267" name="ab1a357d8a761eee6126a31549e5a2267"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1a357d8a761eee6126a31549e5a2267">&#9670;&nbsp;</a></span>process_emitters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::process_emitters </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06764">6764</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06765" name="l06765"></a><span class="lineno"> 6765</span>{</div>
<div class="line"><a id="l06766" name="l06766"></a><span class="lineno"> 6766</span>    <span class="comment">// Parts emitting fields</span></div>
<div class="line"><a id="l06767" name="l06767"></a><span class="lineno"> 6767</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> idx : <a class="code hl_variable" href="classvehicle.html#aa5bbcf289b67336d6cd7de031517c1ea">emitters</a> ) {</div>
<div class="line"><a id="l06768" name="l06768"></a><span class="lineno"> 6768</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;pt = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[idx];</div>
<div class="line"><a id="l06769" name="l06769"></a><span class="lineno"> 6769</span>        <span class="keywordflow">if</span>( pt.<a class="code hl_function" href="structvehicle__part.html#a98ee54e00ccccb0f28b736cc67cbd193">is_unavailable</a>() || !pt.<a class="code hl_variable" href="structvehicle__part.html#a27a7cba7268cb7d3550ed2b7c9adc323">enabled</a> ) {</div>
<div class="line"><a id="l06770" name="l06770"></a><span class="lineno"> 6770</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l06771" name="l06771"></a><span class="lineno"> 6771</span>        }</div>
<div class="line"><a id="l06772" name="l06772"></a><span class="lineno"> 6772</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">emit_id</a> &amp;e : pt.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_variable" href="classvpart__info.html#a0a1a6d9b604649440a41ba6b8b4188db">emissions</a> ) {</div>
<div class="line"><a id="l06773" name="l06773"></a><span class="lineno"> 6773</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.emit_field( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( pt ), e );</div>
<div class="line"><a id="l06774" name="l06774"></a><span class="lineno"> 6774</span>        }</div>
<div class="line"><a id="l06775" name="l06775"></a><span class="lineno"> 6775</span>    }</div>
<div class="line"><a id="l06776" name="l06776"></a><span class="lineno"> 6776</span>}</div>
<div class="ttc" id="aclassvehicle_html_aa5bbcf289b67336d6cd7de031517c1ea"><div class="ttname"><a href="classvehicle.html#aa5bbcf289b67336d6cd7de031517c1ea">vehicle::emitters</a></div><div class="ttdeci">std::vector&lt; int &gt; emitters</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01759">vehicle.h:1759</a></div></div>
<div class="ttc" id="aclassvpart__info_html_a0a1a6d9b604649440a41ba6b8b4188db"><div class="ttname"><a href="classvpart__info.html#a0a1a6d9b604649440a41ba6b8b4188db">vpart_info::emissions</a></div><div class="ttdeci">std::set&lt; emit_id &gt; emissions</div><div class="ttdoc">Emissions of part.</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00200">veh_type.h:200</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a98ee54e00ccccb0f28b736cc67cbd193"><div class="ttname"><a href="structvehicle__part.html#a98ee54e00ccccb0f28b736cc67cbd193">vehicle_part::is_unavailable</a></div><div class="ttdeci">bool is_unavailable(bool carried=true) const</div><div class="ttdoc">parts are unavailable if broken or if carried is true, if they have the CARRIED flag</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00175">vehicle_part.cpp:175</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="veh__type_8h_source.html#l00200">vpart_info::emissions</a>, <a class="el" href="vehicle_8h_source.html#l01759">emitters</a>, <a class="el" href="vehicle_8h_source.html#l00411">vehicle_part::enabled</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00519">vehicle_part::info()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00175">vehicle_part::is_unavailable()</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05033">idle()</a>.</p>

</div>
</div>
<a id="aaa2487e84144e8c6ea235748339e97a5" name="aaa2487e84144e8c6ea235748339e97a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa2487e84144e8c6ea235748339e97a5">&#9670;&nbsp;</a></span>refresh()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::refresh </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Refreshes all caches and refinds all parts. </p>
<p >Used after the vehicle has had a part added or removed. Makes indices of different part types so they're easy to find. Also calculates power drain. </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05477">5477</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05478" name="l05478"></a><span class="lineno"> 5478</span>{</div>
<div class="line"><a id="l05479" name="l05479"></a><span class="lineno"> 5479</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a680decfc32d2eac704c5f3c890639821">no_refresh</a> ) {</div>
<div class="line"><a id="l05480" name="l05480"></a><span class="lineno"> 5480</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05481" name="l05481"></a><span class="lineno"> 5481</span>    }</div>
<div class="line"><a id="l05482" name="l05482"></a><span class="lineno"> 5482</span> </div>
<div class="line"><a id="l05483" name="l05483"></a><span class="lineno"> 5483</span>    <a class="code hl_variable" href="classvehicle.html#ab4dee440f50b7e9a412faf4dab9796c0">alternators</a>.clear();</div>
<div class="line"><a id="l05484" name="l05484"></a><span class="lineno"> 5484</span>    <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.clear();</div>
<div class="line"><a id="l05485" name="l05485"></a><span class="lineno"> 5485</span>    <a class="code hl_variable" href="classvehicle.html#a2423efb46e19d1801498f9ea0c06f576">reactors</a>.clear();</div>
<div class="line"><a id="l05486" name="l05486"></a><span class="lineno"> 5486</span>    <a class="code hl_variable" href="classvehicle.html#a59bb3a4e9aa26397203cce91d56ab2ec">solar_panels</a>.clear();</div>
<div class="line"><a id="l05487" name="l05487"></a><span class="lineno"> 5487</span>    <a class="code hl_variable" href="classvehicle.html#aa467e8fa404592fb7c704dfa50ac9141">wind_turbines</a>.clear();</div>
<div class="line"><a id="l05488" name="l05488"></a><span class="lineno"> 5488</span>    <a class="code hl_variable" href="classvehicle.html#a29734343c62d80afa734f4d1bc1767c6">sails</a>.clear();</div>
<div class="line"><a id="l05489" name="l05489"></a><span class="lineno"> 5489</span>    <a class="code hl_variable" href="classvehicle.html#aaebcdca0982ede955b6da03757db4e77">water_wheels</a>.clear();</div>
<div class="line"><a id="l05490" name="l05490"></a><span class="lineno"> 5490</span>    <a class="code hl_variable" href="classvehicle.html#a64509695c74d33dbccf7a6d10e7fcbb0">funnels</a>.clear();</div>
<div class="line"><a id="l05491" name="l05491"></a><span class="lineno"> 5491</span>    <a class="code hl_variable" href="classvehicle.html#aa5bbcf289b67336d6cd7de031517c1ea">emitters</a>.clear();</div>
<div class="line"><a id="l05492" name="l05492"></a><span class="lineno"> 5492</span>    <a class="code hl_variable" href="classvehicle.html#a92654cefac764c60371c47e0b406a991">relative_parts</a>.clear();</div>
<div class="line"><a id="l05493" name="l05493"></a><span class="lineno"> 5493</span>    <a class="code hl_variable" href="classvehicle.html#afd84ace26c98ea5025d6a7cbbfff66e1">loose_parts</a>.clear();</div>
<div class="line"><a id="l05494" name="l05494"></a><span class="lineno"> 5494</span>    <a class="code hl_variable" href="classvehicle.html#a5c432c0da0ff47a483e3aa74548bd435">wheelcache</a>.clear();</div>
<div class="line"><a id="l05495" name="l05495"></a><span class="lineno"> 5495</span>    <a class="code hl_variable" href="classvehicle.html#a905db1f8c84d0754a8e0a121392a2b3a">rail_wheelcache</a>.clear();</div>
<div class="line"><a id="l05496" name="l05496"></a><span class="lineno"> 5496</span>    <a class="code hl_variable" href="classvehicle.html#aa8c51c573320aab5e499c239e78a285b">rotors</a>.clear();</div>
<div class="line"><a id="l05497" name="l05497"></a><span class="lineno"> 5497</span>    <a class="code hl_variable" href="classvehicle.html#a26f77298a01a76e95ed34888793700a4">steering</a>.clear();</div>
<div class="line"><a id="l05498" name="l05498"></a><span class="lineno"> 5498</span>    <a class="code hl_variable" href="classvehicle.html#aa33bd32301526128292da1ec7f78be55">speciality</a>.clear();</div>
<div class="line"><a id="l05499" name="l05499"></a><span class="lineno"> 5499</span>    <a class="code hl_variable" href="classvehicle.html#ae94902df801fd06056734d05ea98aa0f">floating</a>.clear();</div>
<div class="line"><a id="l05500" name="l05500"></a><span class="lineno"> 5500</span>    <a class="code hl_variable" href="classvehicle.html#a6df763082e71eb21a793372711c907fa">alternator_load</a> = 0;</div>
<div class="line"><a id="l05501" name="l05501"></a><span class="lineno"> 5501</span>    <a class="code hl_variable" href="classvehicle.html#afd5333bdd6640697f0202b652621c6e2">extra_drag</a> = 0;</div>
<div class="line"><a id="l05502" name="l05502"></a><span class="lineno"> 5502</span>    <a class="code hl_variable" href="classvehicle.html#ae57bcc52818212097155515e82c3a84d">rail_profile</a>.clear();</div>
<div class="line"><a id="l05503" name="l05503"></a><span class="lineno"> 5503</span> </div>
<div class="line"><a id="l05504" name="l05504"></a><span class="lineno"> 5504</span>    <span class="comment">// Used to sort part list so it displays properly when examining</span></div>
<div class="line"><a id="l05505" name="l05505"></a><span class="lineno"> 5505</span>    <span class="keyword">struct </span>sort_veh_part_vector {</div>
<div class="line"><a id="l05506" name="l05506"></a><span class="lineno"> 5506</span>        <a class="code hl_class" href="classvehicle.html">vehicle</a> *veh;</div>
<div class="line"><a id="l05507" name="l05507"></a><span class="lineno"> 5507</span>        <span class="keyword">inline</span> <span class="keywordtype">bool</span> operator()( <span class="keyword">const</span> <span class="keywordtype">int</span> p1, <span class="keyword">const</span> <span class="keywordtype">int</span> p2 ) {</div>
<div class="line"><a id="l05508" name="l05508"></a><span class="lineno"> 5508</span>            <span class="keywordflow">return</span> veh-&gt;<a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( p1 ).<a class="code hl_variable" href="classvpart__info.html#afd8582ac2842567391423c795e3d7497">list_order</a> &lt; veh-&gt;<a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( p2 ).<a class="code hl_variable" href="classvpart__info.html#afd8582ac2842567391423c795e3d7497">list_order</a>;</div>
<div class="line"><a id="l05509" name="l05509"></a><span class="lineno"> 5509</span>        }</div>
<div class="line"><a id="l05510" name="l05510"></a><span class="lineno"> 5510</span>    } svpv = { <span class="keyword">this</span> };</div>
<div class="line"><a id="l05511" name="l05511"></a><span class="lineno"> 5511</span> </div>
<div class="line"><a id="l05512" name="l05512"></a><span class="lineno"> 5512</span>    <a class="code hl_variable" href="classvehicle.html#ad62e7dec9def6c6fcc23f2d7b8e51963">mount_min</a>.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> = 123;</div>
<div class="line"><a id="l05513" name="l05513"></a><span class="lineno"> 5513</span>    <a class="code hl_variable" href="classvehicle.html#ad62e7dec9def6c6fcc23f2d7b8e51963">mount_min</a>.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> = 123;</div>
<div class="line"><a id="l05514" name="l05514"></a><span class="lineno"> 5514</span>    <a class="code hl_variable" href="classvehicle.html#a93c1c8baa5cd7ee79039fd5c7226b24e">mount_max</a>.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> = -123;</div>
<div class="line"><a id="l05515" name="l05515"></a><span class="lineno"> 5515</span>    <a class="code hl_variable" href="classvehicle.html#a93c1c8baa5cd7ee79039fd5c7226b24e">mount_max</a>.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> = -123;</div>
<div class="line"><a id="l05516" name="l05516"></a><span class="lineno"> 5516</span> </div>
<div class="line"><a id="l05517" name="l05517"></a><span class="lineno"> 5517</span>    <span class="keywordtype">bool</span> refresh_done = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05518" name="l05518"></a><span class="lineno"> 5518</span> </div>
<div class="line"><a id="l05519" name="l05519"></a><span class="lineno"> 5519</span>    <span class="comment">// Main loop over all vehicle parts.</span></div>
<div class="line"><a id="l05520" name="l05520"></a><span class="lineno"> 5520</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a397b40aa92dd1fd09ee592aa279bc656">get_all_parts</a>() ) {</div>
<div class="line"><a id="l05521" name="l05521"></a><span class="lineno"> 5521</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> p = vp.part_index();</div>
<div class="line"><a id="l05522" name="l05522"></a><span class="lineno"> 5522</span>        <span class="keyword">const</span> <a class="code hl_class" href="classvpart__info.html">vpart_info</a> &amp;vpi = vp.info();</div>
<div class="line"><a id="l05523" name="l05523"></a><span class="lineno"> 5523</span>        <span class="keywordflow">if</span>( vp.part().removed ) {</div>
<div class="line"><a id="l05524" name="l05524"></a><span class="lineno"> 5524</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05525" name="l05525"></a><span class="lineno"> 5525</span>        }</div>
<div class="line"><a id="l05526" name="l05526"></a><span class="lineno"> 5526</span>        refresh_done = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05527" name="l05527"></a><span class="lineno"> 5527</span> </div>
<div class="line"><a id="l05528" name="l05528"></a><span class="lineno"> 5528</span>        <span class="comment">// Build map of point -&gt; all parts in that point</span></div>
<div class="line"><a id="l05529" name="l05529"></a><span class="lineno"> 5529</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> pt = vp.mount();</div>
<div class="line"><a id="l05530" name="l05530"></a><span class="lineno"> 5530</span>        <a class="code hl_variable" href="classvehicle.html#ad62e7dec9def6c6fcc23f2d7b8e51963">mount_min</a>.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> = std::min( <a class="code hl_variable" href="classvehicle.html#ad62e7dec9def6c6fcc23f2d7b8e51963">mount_min</a>.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a>, pt.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> );</div>
<div class="line"><a id="l05531" name="l05531"></a><span class="lineno"> 5531</span>        <a class="code hl_variable" href="classvehicle.html#ad62e7dec9def6c6fcc23f2d7b8e51963">mount_min</a>.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> = std::min( <a class="code hl_variable" href="classvehicle.html#ad62e7dec9def6c6fcc23f2d7b8e51963">mount_min</a>.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a>, pt.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> );</div>
<div class="line"><a id="l05532" name="l05532"></a><span class="lineno"> 5532</span>        <a class="code hl_variable" href="classvehicle.html#a93c1c8baa5cd7ee79039fd5c7226b24e">mount_max</a>.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> = std::max( <a class="code hl_variable" href="classvehicle.html#a93c1c8baa5cd7ee79039fd5c7226b24e">mount_max</a>.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a>, pt.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> );</div>
<div class="line"><a id="l05533" name="l05533"></a><span class="lineno"> 5533</span>        <a class="code hl_variable" href="classvehicle.html#a93c1c8baa5cd7ee79039fd5c7226b24e">mount_max</a>.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> = std::max( <a class="code hl_variable" href="classvehicle.html#a93c1c8baa5cd7ee79039fd5c7226b24e">mount_max</a>.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a>, pt.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> );</div>
<div class="line"><a id="l05534" name="l05534"></a><span class="lineno"> 5534</span> </div>
<div class="line"><a id="l05535" name="l05535"></a><span class="lineno"> 5535</span>        <span class="comment">// This will keep the parts at point pt sorted</span></div>
<div class="line"><a id="l05536" name="l05536"></a><span class="lineno"> 5536</span>        std::vector&lt;int&gt;::iterator vii = std::lower_bound( <a class="code hl_variable" href="classvehicle.html#a92654cefac764c60371c47e0b406a991">relative_parts</a>[pt].begin(),</div>
<div class="line"><a id="l05537" name="l05537"></a><span class="lineno"> 5537</span>                                         <a class="code hl_variable" href="classvehicle.html#a92654cefac764c60371c47e0b406a991">relative_parts</a>[pt].end(),</div>
<div class="line"><a id="l05538" name="l05538"></a><span class="lineno"> 5538</span>                                         <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( p ), svpv );</div>
<div class="line"><a id="l05539" name="l05539"></a><span class="lineno"> 5539</span>        <a class="code hl_variable" href="classvehicle.html#a92654cefac764c60371c47e0b406a991">relative_parts</a>[pt].insert( vii, p );</div>
<div class="line"><a id="l05540" name="l05540"></a><span class="lineno"> 5540</span> </div>
<div class="line"><a id="l05541" name="l05541"></a><span class="lineno"> 5541</span>        <span class="keywordflow">if</span>( vpi.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea8128cda285c505c5d039ee2c5cc9e863">VPFLAG_FLOATS</a> ) ) {</div>
<div class="line"><a id="l05542" name="l05542"></a><span class="lineno"> 5542</span>            <a class="code hl_variable" href="classvehicle.html#ae94902df801fd06056734d05ea98aa0f">floating</a>.push_back( p );</div>
<div class="line"><a id="l05543" name="l05543"></a><span class="lineno"> 5543</span>        }</div>
<div class="line"><a id="l05544" name="l05544"></a><span class="lineno"> 5544</span> </div>
<div class="line"><a id="l05545" name="l05545"></a><span class="lineno"> 5545</span>        <span class="keywordflow">if</span>( vp.part().is_unavailable() ) {</div>
<div class="line"><a id="l05546" name="l05546"></a><span class="lineno"> 5546</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05547" name="l05547"></a><span class="lineno"> 5547</span>        }</div>
<div class="line"><a id="l05548" name="l05548"></a><span class="lineno"> 5548</span>        <span class="keywordflow">if</span>( vpi.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea2379250900e305e10dc242e65ae3a003">VPFLAG_ALTERNATOR</a> ) ) {</div>
<div class="line"><a id="l05549" name="l05549"></a><span class="lineno"> 5549</span>            <a class="code hl_variable" href="classvehicle.html#ab4dee440f50b7e9a412faf4dab9796c0">alternators</a>.push_back( p );</div>
<div class="line"><a id="l05550" name="l05550"></a><span class="lineno"> 5550</span>        }</div>
<div class="line"><a id="l05551" name="l05551"></a><span class="lineno"> 5551</span>        <span class="keywordflow">if</span>( vpi.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea29303a852c248ddb989e3ea9b8e95354">VPFLAG_ENGINE</a> ) ) {</div>
<div class="line"><a id="l05552" name="l05552"></a><span class="lineno"> 5552</span>            <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.push_back( p );</div>
<div class="line"><a id="l05553" name="l05553"></a><span class="lineno"> 5553</span>        }</div>
<div class="line"><a id="l05554" name="l05554"></a><span class="lineno"> 5554</span>        <span class="keywordflow">if</span>( vpi.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea1f5dd6711452a7442f76b7eeee387c8a">VPFLAG_REACTOR</a> ) ) {</div>
<div class="line"><a id="l05555" name="l05555"></a><span class="lineno"> 5555</span>            <a class="code hl_variable" href="classvehicle.html#a2423efb46e19d1801498f9ea0c06f576">reactors</a>.push_back( p );</div>
<div class="line"><a id="l05556" name="l05556"></a><span class="lineno"> 5556</span>        }</div>
<div class="line"><a id="l05557" name="l05557"></a><span class="lineno"> 5557</span>        <span class="keywordflow">if</span>( vpi.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea6faa9ca17bc84c8f5640cb3fc04e09d2">VPFLAG_SOLAR_PANEL</a> ) ) {</div>
<div class="line"><a id="l05558" name="l05558"></a><span class="lineno"> 5558</span>            <a class="code hl_variable" href="classvehicle.html#a59bb3a4e9aa26397203cce91d56ab2ec">solar_panels</a>.push_back( p );</div>
<div class="line"><a id="l05559" name="l05559"></a><span class="lineno"> 5559</span>        }</div>
<div class="line"><a id="l05560" name="l05560"></a><span class="lineno"> 5560</span>        <span class="keywordflow">if</span>( vpi.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea7dcfdb7c960ab40a4d6a8ac1f1997116">VPFLAG_ROTOR</a> ) ) {</div>
<div class="line"><a id="l05561" name="l05561"></a><span class="lineno"> 5561</span>            <a class="code hl_variable" href="classvehicle.html#aa8c51c573320aab5e499c239e78a285b">rotors</a>.push_back( p );</div>
<div class="line"><a id="l05562" name="l05562"></a><span class="lineno"> 5562</span>        }</div>
<div class="line"><a id="l05563" name="l05563"></a><span class="lineno"> 5563</span>        <span class="keywordflow">if</span>( vpi.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;WIND_TURBINE&quot;</span> ) ) {</div>
<div class="line"><a id="l05564" name="l05564"></a><span class="lineno"> 5564</span>            <a class="code hl_variable" href="classvehicle.html#aa467e8fa404592fb7c704dfa50ac9141">wind_turbines</a>.push_back( p );</div>
<div class="line"><a id="l05565" name="l05565"></a><span class="lineno"> 5565</span>        }</div>
<div class="line"><a id="l05566" name="l05566"></a><span class="lineno"> 5566</span>        <span class="keywordflow">if</span>( vpi.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;WIND_POWERED&quot;</span> ) ) {</div>
<div class="line"><a id="l05567" name="l05567"></a><span class="lineno"> 5567</span>            <a class="code hl_variable" href="classvehicle.html#a29734343c62d80afa734f4d1bc1767c6">sails</a>.push_back( p );</div>
<div class="line"><a id="l05568" name="l05568"></a><span class="lineno"> 5568</span>        }</div>
<div class="line"><a id="l05569" name="l05569"></a><span class="lineno"> 5569</span>        <span class="keywordflow">if</span>( vpi.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;WATER_WHEEL&quot;</span> ) ) {</div>
<div class="line"><a id="l05570" name="l05570"></a><span class="lineno"> 5570</span>            <a class="code hl_variable" href="classvehicle.html#aaebcdca0982ede955b6da03757db4e77">water_wheels</a>.push_back( p );</div>
<div class="line"><a id="l05571" name="l05571"></a><span class="lineno"> 5571</span>        }</div>
<div class="line"><a id="l05572" name="l05572"></a><span class="lineno"> 5572</span>        <span class="keywordflow">if</span>( vpi.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;FUNNEL&quot;</span> ) ) {</div>
<div class="line"><a id="l05573" name="l05573"></a><span class="lineno"> 5573</span>            <a class="code hl_variable" href="classvehicle.html#a64509695c74d33dbccf7a6d10e7fcbb0">funnels</a>.push_back( p );</div>
<div class="line"><a id="l05574" name="l05574"></a><span class="lineno"> 5574</span>        }</div>
<div class="line"><a id="l05575" name="l05575"></a><span class="lineno"> 5575</span>        <span class="keywordflow">if</span>( vpi.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;UNMOUNT_ON_MOVE&quot;</span> ) ) {</div>
<div class="line"><a id="l05576" name="l05576"></a><span class="lineno"> 5576</span>            <a class="code hl_variable" href="classvehicle.html#afd84ace26c98ea5025d6a7cbbfff66e1">loose_parts</a>.push_back( p );</div>
<div class="line"><a id="l05577" name="l05577"></a><span class="lineno"> 5577</span>        }</div>
<div class="line"><a id="l05578" name="l05578"></a><span class="lineno"> 5578</span>        <span class="keywordflow">if</span>( vpi.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;EMITTER&quot;</span> ) ) {</div>
<div class="line"><a id="l05579" name="l05579"></a><span class="lineno"> 5579</span>            <a class="code hl_variable" href="classvehicle.html#aa5bbcf289b67336d6cd7de031517c1ea">emitters</a>.push_back( p );</div>
<div class="line"><a id="l05580" name="l05580"></a><span class="lineno"> 5580</span>        }</div>
<div class="line"><a id="l05581" name="l05581"></a><span class="lineno"> 5581</span>        <span class="keywordflow">if</span>( vpi.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eae36e04cd704cf1a4a2ae645809e24e1b">VPFLAG_WHEEL</a> ) ) {</div>
<div class="line"><a id="l05582" name="l05582"></a><span class="lineno"> 5582</span>            <a class="code hl_variable" href="classvehicle.html#a5c432c0da0ff47a483e3aa74548bd435">wheelcache</a>.push_back( p );</div>
<div class="line"><a id="l05583" name="l05583"></a><span class="lineno"> 5583</span>        }</div>
<div class="line"><a id="l05584" name="l05584"></a><span class="lineno"> 5584</span>        <span class="keywordflow">if</span>( vpi.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eace7ffd17e8edd10723a941fc08e07936">VPFLAG_RAIL</a> ) ) {</div>
<div class="line"><a id="l05585" name="l05585"></a><span class="lineno"> 5585</span>            <a class="code hl_variable" href="classvehicle.html#a905db1f8c84d0754a8e0a121392a2b3a">rail_wheelcache</a>.push_back( p );</div>
<div class="line"><a id="l05586" name="l05586"></a><span class="lineno"> 5586</span> </div>
<div class="line"><a id="l05587" name="l05587"></a><span class="lineno"> 5587</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> rail_pos = vp.mount().y;</div>
<div class="line"><a id="l05588" name="l05588"></a><span class="lineno"> 5588</span>            <span class="keyword">const</span> <span class="keyword">auto</span> it = <a class="code hl_function" href="namespacedetail.html#ad06b74f7502b63cbab323bba1ca3f72b">std::find</a>( <a class="code hl_variable" href="classvehicle.html#ae57bcc52818212097155515e82c3a84d">rail_profile</a>.cbegin(), <a class="code hl_variable" href="classvehicle.html#ae57bcc52818212097155515e82c3a84d">rail_profile</a>.cend(), rail_pos );</div>
<div class="line"><a id="l05589" name="l05589"></a><span class="lineno"> 5589</span>            <span class="keywordflow">if</span>( it == <a class="code hl_variable" href="classvehicle.html#ae57bcc52818212097155515e82c3a84d">rail_profile</a>.cend() ) {</div>
<div class="line"><a id="l05590" name="l05590"></a><span class="lineno"> 5590</span>                <a class="code hl_variable" href="classvehicle.html#ae57bcc52818212097155515e82c3a84d">rail_profile</a>.push_back( rail_pos );</div>
<div class="line"><a id="l05591" name="l05591"></a><span class="lineno"> 5591</span>            }</div>
<div class="line"><a id="l05592" name="l05592"></a><span class="lineno"> 5592</span>        }</div>
<div class="line"><a id="l05593" name="l05593"></a><span class="lineno"> 5593</span>        <span class="keywordflow">if</span>( ( vpi.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;STEERABLE&quot;</span> ) &amp;&amp; <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( pt, <span class="stringliteral">&quot;STEERABLE&quot;</span>, <span class="keyword">true</span> ) != -1 ) ||</div>
<div class="line"><a id="l05594" name="l05594"></a><span class="lineno"> 5594</span>            vpi.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;TRACKED&quot;</span> ) ) {</div>
<div class="line"><a id="l05595" name="l05595"></a><span class="lineno"> 5595</span>            <span class="comment">// TRACKED contributes to steering effectiveness but</span></div>
<div class="line"><a id="l05596" name="l05596"></a><span class="lineno"> 5596</span>            <span class="comment">//  (a) doesn&#39;t count as a steering axle for install difficulty</span></div>
<div class="line"><a id="l05597" name="l05597"></a><span class="lineno"> 5597</span>            <span class="comment">//  (b) still contributes to drag for the center of steering calculation</span></div>
<div class="line"><a id="l05598" name="l05598"></a><span class="lineno"> 5598</span>            <a class="code hl_variable" href="classvehicle.html#a26f77298a01a76e95ed34888793700a4">steering</a>.push_back( p );</div>
<div class="line"><a id="l05599" name="l05599"></a><span class="lineno"> 5599</span>        }</div>
<div class="line"><a id="l05600" name="l05600"></a><span class="lineno"> 5600</span>        <span class="keywordflow">if</span>( vpi.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;SECURITY&quot;</span> ) ) {</div>
<div class="line"><a id="l05601" name="l05601"></a><span class="lineno"> 5601</span>            <a class="code hl_variable" href="classvehicle.html#aa33bd32301526128292da1ec7f78be55">speciality</a>.push_back( p );</div>
<div class="line"><a id="l05602" name="l05602"></a><span class="lineno"> 5602</span>        }</div>
<div class="line"><a id="l05603" name="l05603"></a><span class="lineno"> 5603</span>        <span class="keywordflow">if</span>( vp.part().enabled &amp;&amp; vpi.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;EXTRA_DRAG&quot;</span> ) ) {</div>
<div class="line"><a id="l05604" name="l05604"></a><span class="lineno"> 5604</span>            <a class="code hl_variable" href="classvehicle.html#afd5333bdd6640697f0202b652621c6e2">extra_drag</a> += vpi.<a class="code hl_variable" href="classvpart__info.html#a7118bbee705f88aeec2a25e57b32e5ee">power</a>;</div>
<div class="line"><a id="l05605" name="l05605"></a><span class="lineno"> 5605</span>        }</div>
<div class="line"><a id="l05606" name="l05606"></a><span class="lineno"> 5606</span>        <span class="keywordflow">if</span>( vpi.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;EXTRA_DRAG&quot;</span> ) &amp;&amp; ( vpi.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;WIND_TURBINE&quot;</span> ) ||</div>
<div class="line"><a id="l05607" name="l05607"></a><span class="lineno"> 5607</span>                                              vpi.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;WATER_WHEEL&quot;</span> ) ) ) {</div>
<div class="line"><a id="l05608" name="l05608"></a><span class="lineno"> 5608</span>            <a class="code hl_variable" href="classvehicle.html#afd5333bdd6640697f0202b652621c6e2">extra_drag</a> += vpi.<a class="code hl_variable" href="classvpart__info.html#a7118bbee705f88aeec2a25e57b32e5ee">power</a>;</div>
<div class="line"><a id="l05609" name="l05609"></a><span class="lineno"> 5609</span>        }</div>
<div class="line"><a id="l05610" name="l05610"></a><span class="lineno"> 5610</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a70a0f1b85b1b3eed228b92d7b70334b1">camera_on</a> &amp;&amp; vpi.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;CAMERA&quot;</span> ) ) {</div>
<div class="line"><a id="l05611" name="l05611"></a><span class="lineno"> 5611</span>            vp.part().enabled = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05612" name="l05612"></a><span class="lineno"> 5612</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#a70a0f1b85b1b3eed228b92d7b70334b1">camera_on</a> &amp;&amp; vpi.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;CAMERA&quot;</span> ) ) {</div>
<div class="line"><a id="l05613" name="l05613"></a><span class="lineno"> 5613</span>            vp.part().enabled = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05614" name="l05614"></a><span class="lineno"> 5614</span>        }</div>
<div class="line"><a id="l05615" name="l05615"></a><span class="lineno"> 5615</span>        <span class="keywordflow">if</span>( vpi.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;TURRET&quot;</span> ) &amp;&amp; !<a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( vp.part() ), <span class="stringliteral">&quot;TURRET_CONTROLS&quot;</span> ) ) {</div>
<div class="line"><a id="l05616" name="l05616"></a><span class="lineno"> 5616</span>            vp.part().enabled = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05617" name="l05617"></a><span class="lineno"> 5617</span>        }</div>
<div class="line"><a id="l05618" name="l05618"></a><span class="lineno"> 5618</span>    }</div>
<div class="line"><a id="l05619" name="l05619"></a><span class="lineno"> 5619</span> </div>
<div class="line"><a id="l05620" name="l05620"></a><span class="lineno"> 5620</span>    <a class="code hl_variable" href="classvehicle.html#acfae2101cfd7f4b68d64157d8d6e0a4a">front_left</a>.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> = <a class="code hl_variable" href="classvehicle.html#a93c1c8baa5cd7ee79039fd5c7226b24e">mount_max</a>.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a>;</div>
<div class="line"><a id="l05621" name="l05621"></a><span class="lineno"> 5621</span>    <a class="code hl_variable" href="classvehicle.html#acfae2101cfd7f4b68d64157d8d6e0a4a">front_left</a>.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> = <a class="code hl_variable" href="classvehicle.html#ad62e7dec9def6c6fcc23f2d7b8e51963">mount_min</a>.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a>;</div>
<div class="line"><a id="l05622" name="l05622"></a><span class="lineno"> 5622</span>    <a class="code hl_variable" href="classvehicle.html#a94fa253f6f0ceedf40843bd249eca56e">front_right</a> = <a class="code hl_variable" href="classvehicle.html#a93c1c8baa5cd7ee79039fd5c7226b24e">mount_max</a>;</div>
<div class="line"><a id="l05623" name="l05623"></a><span class="lineno"> 5623</span> </div>
<div class="line"><a id="l05624" name="l05624"></a><span class="lineno"> 5624</span>    <span class="keywordflow">if</span>( !refresh_done ) {</div>
<div class="line"><a id="l05625" name="l05625"></a><span class="lineno"> 5625</span>        <a class="code hl_variable" href="classvehicle.html#ad62e7dec9def6c6fcc23f2d7b8e51963">mount_min</a> = <a class="code hl_variable" href="classvehicle.html#a93c1c8baa5cd7ee79039fd5c7226b24e">mount_max</a> = <a class="code hl_variable" href="point_8h.html#a0ee2195dcb488ae55fbf4316f5011172">point_zero</a>;</div>
<div class="line"><a id="l05626" name="l05626"></a><span class="lineno"> 5626</span>    }</div>
<div class="line"><a id="l05627" name="l05627"></a><span class="lineno"> 5627</span> </div>
<div class="line"><a id="l05628" name="l05628"></a><span class="lineno"> 5628</span>    <span class="comment">// NB: using the _old_ pivot point, don&#39;t recalc here, we only do that when moving!</span></div>
<div class="line"><a id="l05629" name="l05629"></a><span class="lineno"> 5629</span>    <a class="code hl_function" href="classvehicle.html#a3df213ef35c4a1801ef30d1f65195f40">precalc_mounts</a>( 0, <a class="code hl_variable" href="classvehicle.html#a709da7b758c18d51b79311eea6eaca59">pivot_rotation</a>[0], <a class="code hl_variable" href="classvehicle.html#afd4e8e8471b17450205d827dee8a41a5">pivot_anchor</a>[0] );</div>
<div class="line"><a id="l05630" name="l05630"></a><span class="lineno"> 5630</span>    <a class="code hl_variable" href="classvehicle.html#ac82426b9ed349941fde4e5af18038735">check_environmental_effects</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05631" name="l05631"></a><span class="lineno"> 5631</span>    <a class="code hl_variable" href="classvehicle.html#a42aa0af38e1a54ca47855c9231aa1457">insides_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05632" name="l05632"></a><span class="lineno"> 5632</span>    <a class="code hl_variable" href="classvehicle.html#af6c2314d1f5b83a04771abea3109a137">zones_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05633" name="l05633"></a><span class="lineno"> 5633</span>    <a class="code hl_function" href="classvehicle.html#a8e8079a6591b3104191c881509f16d61">invalidate_mass</a>();</div>
<div class="line"><a id="l05634" name="l05634"></a><span class="lineno"> 5634</span>}</div>
<div class="ttc" id="aclassvehicle_html_a26f77298a01a76e95ed34888793700a4"><div class="ttname"><a href="classvehicle.html#a26f77298a01a76e95ed34888793700a4">vehicle::steering</a></div><div class="ttdeci">std::vector&lt; int &gt; steering</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01764">vehicle.h:1764</a></div></div>
<div class="ttc" id="aclassvehicle_html_a29734343c62d80afa734f4d1bc1767c6"><div class="ttname"><a href="classvehicle.html#a29734343c62d80afa734f4d1bc1767c6">vehicle::sails</a></div><div class="ttdeci">std::vector&lt; int &gt; sails</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01757">vehicle.h:1757</a></div></div>
<div class="ttc" id="aclassvehicle_html_a59bb3a4e9aa26397203cce91d56ab2ec"><div class="ttname"><a href="classvehicle.html#a59bb3a4e9aa26397203cce91d56ab2ec">vehicle::solar_panels</a></div><div class="ttdeci">std::vector&lt; int &gt; solar_panels</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01754">vehicle.h:1754</a></div></div>
<div class="ttc" id="aclassvehicle_html_a64509695c74d33dbccf7a6d10e7fcbb0"><div class="ttname"><a href="classvehicle.html#a64509695c74d33dbccf7a6d10e7fcbb0">vehicle::funnels</a></div><div class="ttdeci">std::vector&lt; int &gt; funnels</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01758">vehicle.h:1758</a></div></div>
<div class="ttc" id="aclassvehicle_html_aa467e8fa404592fb7c704dfa50ac9141"><div class="ttname"><a href="classvehicle.html#aa467e8fa404592fb7c704dfa50ac9141">vehicle::wind_turbines</a></div><div class="ttdeci">std::vector&lt; int &gt; wind_turbines</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01755">vehicle.h:1755</a></div></div>
<div class="ttc" id="aclassvehicle_html_aa8c51c573320aab5e499c239e78a285b"><div class="ttname"><a href="classvehicle.html#aa8c51c573320aab5e499c239e78a285b">vehicle::rotors</a></div><div class="ttdeci">std::vector&lt; int &gt; rotors</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01762">vehicle.h:1762</a></div></div>
<div class="ttc" id="aclassvehicle_html_aaebcdca0982ede955b6da03757db4e77"><div class="ttname"><a href="classvehicle.html#aaebcdca0982ede955b6da03757db4e77">vehicle::water_wheels</a></div><div class="ttdeci">std::vector&lt; int &gt; water_wheels</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01756">vehicle.h:1756</a></div></div>
<div class="ttc" id="aclassvehicle_html_ae57bcc52818212097155515e82c3a84d"><div class="ttname"><a href="classvehicle.html#ae57bcc52818212097155515e82c3a84d">vehicle::rail_profile</a></div><div class="ttdeci">std::vector&lt; int &gt; rail_profile</div><div class="ttdoc">Rail profile of the vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01789">vehicle.h:1789</a></div></div>
<div class="ttc" id="aclassvehicle_html_afd5333bdd6640697f0202b652621c6e2"><div class="ttname"><a href="classvehicle.html#afd5333bdd6640697f0202b652621c6e2">vehicle::extra_drag</a></div><div class="ttdeci">int extra_drag</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01877">vehicle.h:1877</a></div></div>
<div class="ttc" id="aclassvpart__info_html_afd8582ac2842567391423c795e3d7497"><div class="ttname"><a href="classvpart__info.html#afd8582ac2842567391423c795e3d7497">vpart_info::list_order</a></div><div class="ttdeci">int list_order</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00331">veh_type.h:331</a></div></div>
<div class="ttc" id="anamespacedetail_html_ad06b74f7502b63cbab323bba1ca3f72b"><div class="ttname"><a href="namespacedetail.html#ad06b74f7502b63cbab323bba1ca3f72b">detail::find</a></div><div class="ttdeci">FMT_CONSTEXPR bool find(Ptr first, Ptr last, T value, Ptr &amp;out)</div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__format_8h_source.html#l03355">fmtlib_format.h:3355</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307ea2379250900e305e10dc242e65ae3a003"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea2379250900e305e10dc242e65ae3a003">VPFLAG_ALTERNATOR</a></div><div class="ttdeci">@ VPFLAG_ALTERNATOR</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00055">veh_type.h:55</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307ea6faa9ca17bc84c8f5640cb3fc04e09d2"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea6faa9ca17bc84c8f5640cb3fc04e09d2">VPFLAG_SOLAR_PANEL</a></div><div class="ttdeci">@ VPFLAG_SOLAR_PANEL</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00064">veh_type.h:64</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307ea7dcfdb7c960ab40a4d6a8ac1f1997116"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea7dcfdb7c960ab40a4d6a8ac1f1997116">VPFLAG_ROTOR</a></div><div class="ttdeci">@ VPFLAG_ROTOR</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00049">veh_type.h:49</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307ea8128cda285c505c5d039ee2c5cc9e863"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea8128cda285c505c5d039ee2c5cc9e863">VPFLAG_FLOATS</a></div><div class="ttdeci">@ VPFLAG_FLOATS</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00051">veh_type.h:51</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307eace7ffd17e8edd10723a941fc08e07936"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307eace7ffd17e8edd10723a941fc08e07936">VPFLAG_RAIL</a></div><div class="ttdeci">@ VPFLAG_RAIL</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00075">veh_type.h:75</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01847">alternator_load</a>, <a class="el" href="vehicle_8h_source.html#l01751">alternators</a>, <a class="el" href="vehicle_8h_source.html#l01937">camera_on</a>, <a class="el" href="vehicle_8h_source.html#l01942">check_environmental_effects</a>, <a class="el" href="vehicle_8h_source.html#l01759">emitters</a>, <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, <a class="el" href="vehicle_8h_source.html#l01877">extra_drag</a>, <a class="el" href="fmtlib__format_8h_source.html#l03355">detail::find()</a>, <a class="el" href="vehicle_8h_source.html#l01767">floating</a>, <a class="el" href="vehicle_8h_source.html#l01885">front_left</a>, <a class="el" href="vehicle_8h_source.html#l01886">front_right</a>, <a class="el" href="vehicle_8h_source.html#l01758">funnels</a>, <a class="el" href="vehicle_8cpp_source.html#l06882">get_all_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="veh__type_8h_source.html#l00336">vpart_info::has_flag()</a>, <a class="el" href="vehicle_8cpp_source.html#l02558">has_part()</a>, <a class="el" href="vehicle_8h_source.html#l01944">insides_dirty</a>, <a class="el" href="vehicle_8cpp_source.html#l06778">invalidate_mass()</a>, <a class="el" href="veh__type_8h_source.html#l00331">vpart_info::list_order</a>, <a class="el" href="vehicle_8h_source.html#l01760">loose_parts</a>, <a class="el" href="vehicle_8h_source.html#l01820">mount_max</a>, <a class="el" href="vehicle_8h_source.html#l01821">mount_min</a>, <a class="el" href="vehicle_8h_source.html#l01896">no_refresh</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8cpp_source.html#l02518">part_with_feature()</a>, <a class="el" href="vehicle_8h_source.html#l01889">pivot_anchor</a>, <a class="el" href="vehicle_8h_source.html#l01883">pivot_rotation</a>, <a class="el" href="point_8h_source.html#l00274">point_zero</a>, <a class="el" href="veh__type_8h_source.html#l00197">vpart_info::power</a>, <a class="el" href="vehicle_8cpp_source.html#l03024">precalc_mounts()</a>, <a class="el" href="vehicle_8h_source.html#l01789">rail_profile</a>, <a class="el" href="vehicle_8h_source.html#l01763">rail_wheelcache</a>, <a class="el" href="vehicle_8h_source.html#l01753">reactors</a>, <a class="el" href="vehicle_8h_source.html#l01800">relative_parts</a>, <a class="el" href="vehicle_8h_source.html#l01762">rotors</a>, <a class="el" href="vehicle_8h_source.html#l01757">sails</a>, <a class="el" href="vehicle_8h_source.html#l01754">solar_panels</a>, <a class="el" href="vehicle_8h_source.html#l01766">speciality</a>, <a class="el" href="vehicle_8h_source.html#l01764">steering</a>, <a class="el" href="veh__type_8h_source.html#l00055">VPFLAG_ALTERNATOR</a>, <a class="el" href="veh__type_8h_source.html#l00056">VPFLAG_ENGINE</a>, <a class="el" href="veh__type_8h_source.html#l00051">VPFLAG_FLOATS</a>, <a class="el" href="veh__type_8h_source.html#l00075">VPFLAG_RAIL</a>, <a class="el" href="veh__type_8h_source.html#l00074">VPFLAG_REACTOR</a>, <a class="el" href="veh__type_8h_source.html#l00049">VPFLAG_ROTOR</a>, <a class="el" href="veh__type_8h_source.html#l00064">VPFLAG_SOLAR_PANEL</a>, <a class="el" href="veh__type_8h_source.html#l00048">VPFLAG_WHEEL</a>, <a class="el" href="vehicle_8h_source.html#l01756">water_wheels</a>, <a class="el" href="vehicle_8h_source.html#l01761">wheelcache</a>, <a class="el" href="vehicle_8h_source.html#l01755">wind_turbines</a>, <a class="el" href="point_8h_source.html#l00038">point::x</a>, <a class="el" href="point_8h_source.html#l00039">point::y</a>, and <a class="el" href="vehicle_8h_source.html#l01948">zones_dirty</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l00683">activate_animal_follow()</a>, <a class="el" href="vehicle_8cpp_source.html#l00669">activate_magical_follow()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00100">add_toggle_to_opts()</a>, <a class="el" href="vehicle_8cpp_source.html#l06437">damage_direct()</a>, <a class="el" href="vehicle_8cpp_source.html#l00816">drive_to_local_target()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01104">enable_patrol()</a>, <a class="el" href="vehicle_8cpp_source.html#l05459">enable_refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l01570">install_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l01654">merge_rackable_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l01940">part_removal_cleanup()</a>, <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l06547">restore()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00266">set_electronics_menu_options()</a>, <a class="el" href="vehicle_8cpp_source.html#l06310">shift_if_needed()</a>, <a class="el" href="vehicle_8cpp_source.html#l06279">shift_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00552">toggle_autopilot()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>, and <a class="el" href="vehicle_8cpp_source.html#l00251">vehicle()</a>.</p>

</div>
</div>
<a id="a8610ffeac8223a463ed316e3c3134662" name="a8610ffeac8223a463ed316e3c3134662"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8610ffeac8223a463ed316e3c3134662">&#9670;&nbsp;</a></span>refresh_insides()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::refresh_insides </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06106">6106</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06107" name="l06107"></a><span class="lineno"> 6107</span>{</div>
<div class="line"><a id="l06108" name="l06108"></a><span class="lineno"> 6108</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#a42aa0af38e1a54ca47855c9231aa1457">insides_dirty</a> ) {</div>
<div class="line"><a id="l06109" name="l06109"></a><span class="lineno"> 6109</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l06110" name="l06110"></a><span class="lineno"> 6110</span>    }</div>
<div class="line"><a id="l06111" name="l06111"></a><span class="lineno"> 6111</span>    <a class="code hl_variable" href="classvehicle.html#a42aa0af38e1a54ca47855c9231aa1457">insides_dirty</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l06112" name="l06112"></a><span class="lineno"> 6112</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a397b40aa92dd1fd09ee592aa279bc656">get_all_parts</a>() ) {</div>
<div class="line"><a id="l06113" name="l06113"></a><span class="lineno"> 6113</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> p = vp.part_index();</div>
<div class="line"><a id="l06114" name="l06114"></a><span class="lineno"> 6114</span>        <span class="keywordflow">if</span>( vp.part().removed ) {</div>
<div class="line"><a id="l06115" name="l06115"></a><span class="lineno"> 6115</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l06116" name="l06116"></a><span class="lineno"> 6116</span>        }</div>
<div class="line"><a id="l06117" name="l06117"></a><span class="lineno"> 6117</span>        <span class="comment">/* If there&#39;s no roof, or there is a roof but it&#39;s broken, it&#39;s outside.</span></div>
<div class="line"><a id="l06118" name="l06118"></a><span class="lineno"> 6118</span><span class="comment">         * (Use short-circuiting &amp;&amp; so broken frames don&#39;t screw this up) */</span></div>
<div class="line"><a id="l06119" name="l06119"></a><span class="lineno"> 6119</span>        <span class="keywordflow">if</span>( !( <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( p, <span class="stringliteral">&quot;ROOF&quot;</span>, <span class="keyword">true</span> ) &gt;= 0 &amp;&amp; vp.part().is_available() ) ) {</div>
<div class="line"><a id="l06120" name="l06120"></a><span class="lineno"> 6120</span>            vp.part().inside = <span class="keyword">false</span>;</div>
<div class="line"><a id="l06121" name="l06121"></a><span class="lineno"> 6121</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l06122" name="l06122"></a><span class="lineno"> 6122</span>        }</div>
<div class="line"><a id="l06123" name="l06123"></a><span class="lineno"> 6123</span> </div>
<div class="line"><a id="l06124" name="l06124"></a><span class="lineno"> 6124</span>        <span class="comment">// inside if not otherwise</span></div>
<div class="line"><a id="l06125" name="l06125"></a><span class="lineno"> 6125</span>        <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].inside = <span class="keyword">true</span>;</div>
<div class="line"><a id="l06126" name="l06126"></a><span class="lineno"> 6126</span>        <span class="comment">// let&#39;s check four neighbor parts</span></div>
<div class="line"><a id="l06127" name="l06127"></a><span class="lineno"> 6127</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> &amp;offset : <a class="code hl_variable" href="point_8h.html#aad28d8d682bc8e5628fd2b04df87decd">four_adjacent_offsets</a> ) {</div>
<div class="line"><a id="l06128" name="l06128"></a><span class="lineno"> 6128</span>            <a class="code hl_struct" href="structpoint.html">point</a> near_mount = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ p ].mount + offset;</div>
<div class="line"><a id="l06129" name="l06129"></a><span class="lineno"> 6129</span>            std::vector&lt;int&gt; parts_n3ar = <a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( near_mount, <span class="keyword">true</span> );</div>
<div class="line"><a id="l06130" name="l06130"></a><span class="lineno"> 6130</span>            <span class="comment">// if we aren&#39;t covered from sides, the roof at p won&#39;t save us</span></div>
<div class="line"><a id="l06131" name="l06131"></a><span class="lineno"> 6131</span>            <span class="keywordtype">bool</span> cover = <span class="keyword">false</span>;</div>
<div class="line"><a id="l06132" name="l06132"></a><span class="lineno"> 6132</span>            <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;j : parts_n3ar ) {</div>
<div class="line"><a id="l06133" name="l06133"></a><span class="lineno"> 6133</span>                <span class="comment">// another roof -- cover</span></div>
<div class="line"><a id="l06134" name="l06134"></a><span class="lineno"> 6134</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( j, <span class="stringliteral">&quot;ROOF&quot;</span> ) &amp;&amp; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ j ].is_available() ) {</div>
<div class="line"><a id="l06135" name="l06135"></a><span class="lineno"> 6135</span>                    cover = <span class="keyword">true</span>;</div>
<div class="line"><a id="l06136" name="l06136"></a><span class="lineno"> 6136</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l06137" name="l06137"></a><span class="lineno"> 6137</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( j, <span class="stringliteral">&quot;OBSTACLE&quot;</span> ) &amp;&amp; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ j ].is_available() ) {</div>
<div class="line"><a id="l06138" name="l06138"></a><span class="lineno"> 6138</span>                    <span class="comment">// found an obstacle, like board or windshield or door</span></div>
<div class="line"><a id="l06139" name="l06139"></a><span class="lineno"> 6139</span>                    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[j].inside || ( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( j, <span class="stringliteral">&quot;OPENABLE&quot;</span> ) &amp;&amp; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[j].<a class="code hl_function" href="classvehicle.html#a9d96053cfef6f4cb5db1b7c74c6da067">open</a> ) ) {</div>
<div class="line"><a id="l06140" name="l06140"></a><span class="lineno"> 6140</span>                        <span class="comment">// door and it&#39;s open -- can&#39;t cover</span></div>
<div class="line"><a id="l06141" name="l06141"></a><span class="lineno"> 6141</span>                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l06142" name="l06142"></a><span class="lineno"> 6142</span>                    }</div>
<div class="line"><a id="l06143" name="l06143"></a><span class="lineno"> 6143</span>                    cover = <span class="keyword">true</span>;</div>
<div class="line"><a id="l06144" name="l06144"></a><span class="lineno"> 6144</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l06145" name="l06145"></a><span class="lineno"> 6145</span>                }</div>
<div class="line"><a id="l06146" name="l06146"></a><span class="lineno"> 6146</span>                <span class="comment">//Otherwise keep looking, there might be another part in that square</span></div>
<div class="line"><a id="l06147" name="l06147"></a><span class="lineno"> 6147</span>            }</div>
<div class="line"><a id="l06148" name="l06148"></a><span class="lineno"> 6148</span>            <span class="keywordflow">if</span>( !cover ) {</div>
<div class="line"><a id="l06149" name="l06149"></a><span class="lineno"> 6149</span>                vp.part().inside = <span class="keyword">false</span>;</div>
<div class="line"><a id="l06150" name="l06150"></a><span class="lineno"> 6150</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l06151" name="l06151"></a><span class="lineno"> 6151</span>            }</div>
<div class="line"><a id="l06152" name="l06152"></a><span class="lineno"> 6152</span>        }</div>
<div class="line"><a id="l06153" name="l06153"></a><span class="lineno"> 6153</span>    }</div>
<div class="line"><a id="l06154" name="l06154"></a><span class="lineno"> 6154</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="point_8h_source.html#l00358">four_adjacent_offsets</a>, <a class="el" href="vehicle_8cpp_source.html#l06882">get_all_parts()</a>, <a class="el" href="vehicle_8h_source.html#l01944">insides_dirty</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01463">open()</a>, <a class="el" href="vehicle_8cpp_source.html#l02875">part_flag()</a>, <a class="el" href="vehicle_8cpp_source.html#l02518">part_with_feature()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06095">enclosed_at()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06156">vpart_position::is_inside()</a>.</p>

</div>
</div>
<a id="a3a15aa4c2578558dd2262029807deb71" name="a3a15aa4c2578558dd2262029807deb71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a15aa4c2578558dd2262029807deb71">&#9670;&nbsp;</a></span>refresh_mass()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::refresh_mass </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06789">6789</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06790" name="l06790"></a><span class="lineno"> 6790</span>{</div>
<div class="line"><a id="l06791" name="l06791"></a><span class="lineno"> 6791</span>    <a class="code hl_function" href="classvehicle.html#af3bb85693d41273a49e87ab79cb61462">calc_mass_center</a>( <span class="keyword">true</span> );</div>
<div class="line"><a id="l06792" name="l06792"></a><span class="lineno"> 6792</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l06794">calc_mass_center()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03126">total_mass()</a>.</p>

</div>
</div>
<a id="abb959a78c449c54bcbd3bc2e834e9663" name="abb959a78c449c54bcbd3bc2e834e9663"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb959a78c449c54bcbd3bc2e834e9663">&#9670;&nbsp;</a></span>refresh_pivot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::refresh_pivot </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05645">5645</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05646" name="l05646"></a><span class="lineno"> 5646</span>{</div>
<div class="line"><a id="l05647" name="l05647"></a><span class="lineno"> 5647</span>    <span class="comment">// Const method, but messes with mutable fields</span></div>
<div class="line"><a id="l05648" name="l05648"></a><span class="lineno"> 5648</span>    <a class="code hl_variable" href="classvehicle.html#a4618e6b69581e93ab96d66fc889659c5">pivot_dirty</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05649" name="l05649"></a><span class="lineno"> 5649</span> </div>
<div class="line"><a id="l05650" name="l05650"></a><span class="lineno"> 5650</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a5c432c0da0ff47a483e3aa74548bd435">wheelcache</a>.empty() || !<a class="code hl_function" href="classvehicle.html#a578c681656be6b419c62799006008035">valid_wheel_config</a>() ) {</div>
<div class="line"><a id="l05651" name="l05651"></a><span class="lineno"> 5651</span>        <span class="comment">// No usable wheels, use CoM (dragging)</span></div>
<div class="line"><a id="l05652" name="l05652"></a><span class="lineno"> 5652</span>        <a class="code hl_variable" href="classvehicle.html#a6d1b9a43a439a0ec56de30c9a8ccb328">pivot_cache</a> = <a class="code hl_function" href="classvehicle.html#a8e52e13cf66fa7ebbe89c16687bae54b">local_center_of_mass</a>();</div>
<div class="line"><a id="l05653" name="l05653"></a><span class="lineno"> 5653</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05654" name="l05654"></a><span class="lineno"> 5654</span>    }</div>
<div class="line"><a id="l05655" name="l05655"></a><span class="lineno"> 5655</span> </div>
<div class="line"><a id="l05656" name="l05656"></a><span class="lineno"> 5656</span>    <span class="comment">// The model here is:</span></div>
<div class="line"><a id="l05657" name="l05657"></a><span class="lineno"> 5657</span>    <span class="comment">//</span></div>
<div class="line"><a id="l05658" name="l05658"></a><span class="lineno"> 5658</span>    <span class="comment">//  We are trying to rotate around some point (xc,yc)</span></div>
<div class="line"><a id="l05659" name="l05659"></a><span class="lineno"> 5659</span>    <span class="comment">//  This produces a friction force / moment from each wheel resisting the</span></div>
<div class="line"><a id="l05660" name="l05660"></a><span class="lineno"> 5660</span>    <span class="comment">//  rotation. We want to find the point that minimizes that resistance.</span></div>
<div class="line"><a id="l05661" name="l05661"></a><span class="lineno"> 5661</span>    <span class="comment">//</span></div>
<div class="line"><a id="l05662" name="l05662"></a><span class="lineno"> 5662</span>    <span class="comment">//  For a given wheel w at (xw,yw), find:</span></div>
<div class="line"><a id="l05663" name="l05663"></a><span class="lineno"> 5663</span>    <span class="comment">//   weight(w): a scaling factor for the friction force based on wheel</span></div>
<div class="line"><a id="l05664" name="l05664"></a><span class="lineno"> 5664</span>    <span class="comment">//              size, brokenness, steerability/orientation</span></div>
<div class="line"><a id="l05665" name="l05665"></a><span class="lineno"> 5665</span>    <span class="comment">//   center_dist: the distance from (xw,yw) to (xc,yc)</span></div>
<div class="line"><a id="l05666" name="l05666"></a><span class="lineno"> 5666</span>    <span class="comment">//   centerline_angle: the angle between the X axis and a line through</span></div>
<div class="line"><a id="l05667" name="l05667"></a><span class="lineno"> 5667</span>    <span class="comment">//                     (xw,yw) and (xc,yc)</span></div>
<div class="line"><a id="l05668" name="l05668"></a><span class="lineno"> 5668</span>    <span class="comment">//</span></div>
<div class="line"><a id="l05669" name="l05669"></a><span class="lineno"> 5669</span>    <span class="comment">//  Decompose the force into two components, assuming that the wheel is</span></div>
<div class="line"><a id="l05670" name="l05670"></a><span class="lineno"> 5670</span>    <span class="comment">//  aligned along the X axis and we want to apply different weightings to</span></div>
<div class="line"><a id="l05671" name="l05671"></a><span class="lineno"> 5671</span>    <span class="comment">//  the in-line vs perpendicular parts of the force:</span></div>
<div class="line"><a id="l05672" name="l05672"></a><span class="lineno"> 5672</span>    <span class="comment">//</span></div>
<div class="line"><a id="l05673" name="l05673"></a><span class="lineno"> 5673</span>    <span class="comment">//   Resistance force in line with the wheel (X axis)</span></div>
<div class="line"><a id="l05674" name="l05674"></a><span class="lineno"> 5674</span>    <span class="comment">//    Fi = weightI(w) * center_dist * sin(centerline_angle)</span></div>
<div class="line"><a id="l05675" name="l05675"></a><span class="lineno"> 5675</span>    <span class="comment">//   Resistance force perpendicular to the wheel (Y axis):</span></div>
<div class="line"><a id="l05676" name="l05676"></a><span class="lineno"> 5676</span>    <span class="comment">//    Fp = weightP(w) * center_dist * cos(centerline_angle);</span></div>
<div class="line"><a id="l05677" name="l05677"></a><span class="lineno"> 5677</span>    <span class="comment">//</span></div>
<div class="line"><a id="l05678" name="l05678"></a><span class="lineno"> 5678</span>    <span class="comment">//  Then find the moment that these two forces would apply around (xc,yc)</span></div>
<div class="line"><a id="l05679" name="l05679"></a><span class="lineno"> 5679</span>    <span class="comment">//    moment(w) = center_dist * cos(centerline_angle) * Fi +</span></div>
<div class="line"><a id="l05680" name="l05680"></a><span class="lineno"> 5680</span>    <span class="comment">//                center_dist * sin(centerline_angle) * Fp</span></div>
<div class="line"><a id="l05681" name="l05681"></a><span class="lineno"> 5681</span>    <span class="comment">//</span></div>
<div class="line"><a id="l05682" name="l05682"></a><span class="lineno"> 5682</span>    <span class="comment">//  Note that:</span></div>
<div class="line"><a id="l05683" name="l05683"></a><span class="lineno"> 5683</span>    <span class="comment">//    cos(centerline_angle) = (xw-xc) / center_dist</span></div>
<div class="line"><a id="l05684" name="l05684"></a><span class="lineno"> 5684</span>    <span class="comment">//    sin(centerline_angle) = (yw-yc) / center_dist</span></div>
<div class="line"><a id="l05685" name="l05685"></a><span class="lineno"> 5685</span>    <span class="comment">// -&gt; moment(w) = weightP(w)*(xw-xc)^2 + weightI(w)*(yw-yc)^2</span></div>
<div class="line"><a id="l05686" name="l05686"></a><span class="lineno"> 5686</span>    <span class="comment">//              = weightP(w)*xc^2 - 2*weightP(w)*xc*xw + weightP(w)*xw^2 +</span></div>
<div class="line"><a id="l05687" name="l05687"></a><span class="lineno"> 5687</span>    <span class="comment">//                weightI(w)*yc^2 - 2*weightI(w)*yc*yw + weightI(w)*yw^2</span></div>
<div class="line"><a id="l05688" name="l05688"></a><span class="lineno"> 5688</span>    <span class="comment">//</span></div>
<div class="line"><a id="l05689" name="l05689"></a><span class="lineno"> 5689</span>    <span class="comment">//  which happily means that the X and Y axes can be handled independently.</span></div>
<div class="line"><a id="l05690" name="l05690"></a><span class="lineno"> 5690</span>    <span class="comment">//  We want to minimize sum(moment(w)) due to wheels w=0,1,..., which</span></div>
<div class="line"><a id="l05691" name="l05691"></a><span class="lineno"> 5691</span>    <span class="comment">//  occurs when:</span></div>
<div class="line"><a id="l05692" name="l05692"></a><span class="lineno"> 5692</span>    <span class="comment">//</span></div>
<div class="line"><a id="l05693" name="l05693"></a><span class="lineno"> 5693</span>    <span class="comment">//    sum( 2*xc*weightP(w) - 2*weightP(w)*xw ) = 0</span></div>
<div class="line"><a id="l05694" name="l05694"></a><span class="lineno"> 5694</span>    <span class="comment">//     -&gt; xc = (weightP(0)*x0 + weightP(1)*x1 + ...) /</span></div>
<div class="line"><a id="l05695" name="l05695"></a><span class="lineno"> 5695</span>    <span class="comment">//             (weightP(0) + weightP(1) + ...)</span></div>
<div class="line"><a id="l05696" name="l05696"></a><span class="lineno"> 5696</span>    <span class="comment">//    sum( 2*yc*weightI(w) - 2*weightI(w)*yw ) = 0</span></div>
<div class="line"><a id="l05697" name="l05697"></a><span class="lineno"> 5697</span>    <span class="comment">//     -&gt; yc = (weightI(0)*y0 + weightI(1)*y1 + ...) /</span></div>
<div class="line"><a id="l05698" name="l05698"></a><span class="lineno"> 5698</span>    <span class="comment">//             (weightI(0) + weightI(1) + ...)</span></div>
<div class="line"><a id="l05699" name="l05699"></a><span class="lineno"> 5699</span>    <span class="comment">//</span></div>
<div class="line"><a id="l05700" name="l05700"></a><span class="lineno"> 5700</span>    <span class="comment">// so it turns into a fairly simple weighted average of the wheel positions.</span></div>
<div class="line"><a id="l05701" name="l05701"></a><span class="lineno"> 5701</span> </div>
<div class="line"><a id="l05702" name="l05702"></a><span class="lineno"> 5702</span>    <span class="keywordtype">float</span> xc_numerator = 0;</div>
<div class="line"><a id="l05703" name="l05703"></a><span class="lineno"> 5703</span>    <span class="keywordtype">float</span> xc_denominator = 0;</div>
<div class="line"><a id="l05704" name="l05704"></a><span class="lineno"> 5704</span>    <span class="keywordtype">float</span> yc_numerator = 0;</div>
<div class="line"><a id="l05705" name="l05705"></a><span class="lineno"> 5705</span>    <span class="keywordtype">float</span> yc_denominator = 0;</div>
<div class="line"><a id="l05706" name="l05706"></a><span class="lineno"> 5706</span> </div>
<div class="line"><a id="l05707" name="l05707"></a><span class="lineno"> 5707</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> p : <a class="code hl_variable" href="classvehicle.html#a5c432c0da0ff47a483e3aa74548bd435">wheelcache</a> ) {</div>
<div class="line"><a id="l05708" name="l05708"></a><span class="lineno"> 5708</span>        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;wheel = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p];</div>
<div class="line"><a id="l05709" name="l05709"></a><span class="lineno"> 5709</span> </div>
<div class="line"><a id="l05710" name="l05710"></a><span class="lineno"> 5710</span>        <span class="comment">// TODO: load on tire?</span></div>
<div class="line"><a id="l05711" name="l05711"></a><span class="lineno"> 5711</span>        <span class="keywordtype">int</span> contact_area = wheel.wheel_area();</div>
<div class="line"><a id="l05712" name="l05712"></a><span class="lineno"> 5712</span>        <span class="keywordtype">float</span> weight_i;  <span class="comment">// weighting for the in-line part</span></div>
<div class="line"><a id="l05713" name="l05713"></a><span class="lineno"> 5713</span>        <span class="keywordtype">float</span> weight_p;  <span class="comment">// weighting for the perpendicular part</span></div>
<div class="line"><a id="l05714" name="l05714"></a><span class="lineno"> 5714</span>        <span class="keywordflow">if</span>( wheel.is_broken() ) {</div>
<div class="line"><a id="l05715" name="l05715"></a><span class="lineno"> 5715</span>            <span class="comment">// broken wheels don&#39;t roll on either axis</span></div>
<div class="line"><a id="l05716" name="l05716"></a><span class="lineno"> 5716</span>            weight_i = contact_area * 2.0;</div>
<div class="line"><a id="l05717" name="l05717"></a><span class="lineno"> 5717</span>            weight_p = contact_area * 2.0;</div>
<div class="line"><a id="l05718" name="l05718"></a><span class="lineno"> 5718</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( wheel.mount, <span class="stringliteral">&quot;STEERABLE&quot;</span>, <span class="keyword">true</span> ) != -1 ) {</div>
<div class="line"><a id="l05719" name="l05719"></a><span class="lineno"> 5719</span>            <span class="comment">// Unbroken steerable wheels can handle motion on both axes</span></div>
<div class="line"><a id="l05720" name="l05720"></a><span class="lineno"> 5720</span>            <span class="comment">// (but roll a little more easily inline)</span></div>
<div class="line"><a id="l05721" name="l05721"></a><span class="lineno"> 5721</span>            weight_i = contact_area * 0.1;</div>
<div class="line"><a id="l05722" name="l05722"></a><span class="lineno"> 5722</span>            weight_p = contact_area * 0.2;</div>
<div class="line"><a id="l05723" name="l05723"></a><span class="lineno"> 5723</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05724" name="l05724"></a><span class="lineno"> 5724</span>            <span class="comment">// Regular wheels resist perpendicular motion</span></div>
<div class="line"><a id="l05725" name="l05725"></a><span class="lineno"> 5725</span>            weight_i = contact_area * 0.1;</div>
<div class="line"><a id="l05726" name="l05726"></a><span class="lineno"> 5726</span>            weight_p = contact_area;</div>
<div class="line"><a id="l05727" name="l05727"></a><span class="lineno"> 5727</span>        }</div>
<div class="line"><a id="l05728" name="l05728"></a><span class="lineno"> 5728</span> </div>
<div class="line"><a id="l05729" name="l05729"></a><span class="lineno"> 5729</span>        xc_numerator += weight_p * wheel.mount.x;</div>
<div class="line"><a id="l05730" name="l05730"></a><span class="lineno"> 5730</span>        yc_numerator += weight_i * wheel.mount.y;</div>
<div class="line"><a id="l05731" name="l05731"></a><span class="lineno"> 5731</span>        xc_denominator += weight_p;</div>
<div class="line"><a id="l05732" name="l05732"></a><span class="lineno"> 5732</span>        yc_denominator += weight_i;</div>
<div class="line"><a id="l05733" name="l05733"></a><span class="lineno"> 5733</span>    }</div>
<div class="line"><a id="l05734" name="l05734"></a><span class="lineno"> 5734</span> </div>
<div class="line"><a id="l05735" name="l05735"></a><span class="lineno"> 5735</span>    <span class="keywordflow">if</span>( xc_denominator &lt; 0.1 || yc_denominator &lt; 0.1 ) {</div>
<div class="line"><a id="l05736" name="l05736"></a><span class="lineno"> 5736</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;vehicle::refresh_pivot had a bad weight: xc=%.3f/%.3f yc=%.3f/%.3f&quot;</span>,</div>
<div class="line"><a id="l05737" name="l05737"></a><span class="lineno"> 5737</span>                  xc_numerator, xc_denominator, yc_numerator, yc_denominator );</div>
<div class="line"><a id="l05738" name="l05738"></a><span class="lineno"> 5738</span>        <a class="code hl_variable" href="classvehicle.html#a6d1b9a43a439a0ec56de30c9a8ccb328">pivot_cache</a> = <a class="code hl_function" href="classvehicle.html#a8e52e13cf66fa7ebbe89c16687bae54b">local_center_of_mass</a>();</div>
<div class="line"><a id="l05739" name="l05739"></a><span class="lineno"> 5739</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05740" name="l05740"></a><span class="lineno"> 5740</span>        <a class="code hl_variable" href="classvehicle.html#a6d1b9a43a439a0ec56de30c9a8ccb328">pivot_cache</a>.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> = std::round( xc_numerator / xc_denominator );</div>
<div class="line"><a id="l05741" name="l05741"></a><span class="lineno"> 5741</span>        <a class="code hl_variable" href="classvehicle.html#a6d1b9a43a439a0ec56de30c9a8ccb328">pivot_cache</a>.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> = std::round( yc_numerator / yc_denominator );</div>
<div class="line"><a id="l05742" name="l05742"></a><span class="lineno"> 5742</span>    }</div>
<div class="line"><a id="l05743" name="l05743"></a><span class="lineno"> 5743</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="vehicle_8cpp_source.html#l03155">local_center_of_mass()</a>, <a class="el" href="vehicle_8cpp_source.html#l02518">part_with_feature()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8h_source.html#l01816">pivot_cache</a>, <a class="el" href="vehicle_8h_source.html#l01899">pivot_dirty</a>, <a class="el" href="vehicle_8cpp_source.html#l04279">valid_wheel_config()</a>, <a class="el" href="vehicle_8h_source.html#l01761">wheelcache</a>, <a class="el" href="point_8h_source.html#l00038">point::x</a>, and <a class="el" href="point_8h_source.html#l00039">point::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05636">pivot_point()</a>.</p>

</div>
</div>
<a id="abfc6fa64a046f2c7ceedcddd0cccef9e" name="abfc6fa64a046f2c7ceedcddd0cccef9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfc6fa64a046f2c7ceedcddd0cccef9e">&#9670;&nbsp;</a></span>refresh_zones()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::refresh_zones </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06971">6971</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06972" name="l06972"></a><span class="lineno"> 6972</span>{</div>
<div class="line"><a id="l06973" name="l06973"></a><span class="lineno"> 6973</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#af6c2314d1f5b83a04771abea3109a137">zones_dirty</a> ) {</div>
<div class="line"><a id="l06974" name="l06974"></a><span class="lineno"> 6974</span>        <span class="keyword">decltype</span>( <a class="code hl_variable" href="classvehicle.html#a90b6f438b5ae343dab2b131c64293584">loot_zones</a> ) new_zones;</div>
<div class="line"><a id="l06975" name="l06975"></a><span class="lineno"> 6975</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> <span class="keyword">const</span> &amp;z : <a class="code hl_variable" href="classvehicle.html#a90b6f438b5ae343dab2b131c64293584">loot_zones</a> ) {</div>
<div class="line"><a id="l06976" name="l06976"></a><span class="lineno"> 6976</span>            <a class="code hl_class" href="classzone__data.html">zone_data</a> zone = z.second;</div>
<div class="line"><a id="l06977" name="l06977"></a><span class="lineno"> 6977</span>            <span class="comment">//Get the global position of the first cargo part at the relative coordinate</span></div>
<div class="line"><a id="l06978" name="l06978"></a><span class="lineno"> 6978</span> </div>
<div class="line"><a id="l06979" name="l06979"></a><span class="lineno"> 6979</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> part_idx = <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( z.first, <span class="stringliteral">&quot;CARGO&quot;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a id="l06980" name="l06980"></a><span class="lineno"> 6980</span>            <span class="keywordflow">if</span>( part_idx == -1 ) {</div>
<div class="line"><a id="l06981" name="l06981"></a><span class="lineno"> 6981</span>                <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Could not find cargo part at %d,%d on vehicle %s for loot zone.  Removing loot zone.&quot;</span>,</div>
<div class="line"><a id="l06982" name="l06982"></a><span class="lineno"> 6982</span>                          z.first.x, z.first.y, this-&gt;name );</div>
<div class="line"><a id="l06983" name="l06983"></a><span class="lineno"> 6983</span> </div>
<div class="line"><a id="l06984" name="l06984"></a><span class="lineno"> 6984</span>                <span class="comment">// If this loot zone refers to a part that no longer exists at this location, then its unattached somehow.</span></div>
<div class="line"><a id="l06985" name="l06985"></a><span class="lineno"> 6985</span>                <span class="comment">// By continuing here and not adding to new_zones, we effectively remove it</span></div>
<div class="line"><a id="l06986" name="l06986"></a><span class="lineno"> 6986</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l06987" name="l06987"></a><span class="lineno"> 6987</span>            }</div>
<div class="line"><a id="l06988" name="l06988"></a><span class="lineno"> 6988</span>            <a class="code hl_struct" href="structtripoint.html">tripoint</a> zone_pos = <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( part_idx );</div>
<div class="line"><a id="l06989" name="l06989"></a><span class="lineno"> 6989</span>            zone_pos = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.getabs( zone_pos );</div>
<div class="line"><a id="l06990" name="l06990"></a><span class="lineno"> 6990</span>            <span class="comment">//Set the position of the zone to that part</span></div>
<div class="line"><a id="l06991" name="l06991"></a><span class="lineno"> 6991</span>            zone.<a class="code hl_function" href="classzone__data.html#a6ca10e3a0ae9fb2776ee9569d3ccb6e1">set_position</a>( std::pair&lt;tripoint, tripoint&gt;( zone_pos, zone_pos ), <span class="keyword">false</span> );</div>
<div class="line"><a id="l06992" name="l06992"></a><span class="lineno"> 6992</span>            new_zones.emplace( z.first, zone );</div>
<div class="line"><a id="l06993" name="l06993"></a><span class="lineno"> 6993</span>        }</div>
<div class="line"><a id="l06994" name="l06994"></a><span class="lineno"> 6994</span>        <a class="code hl_variable" href="classvehicle.html#a90b6f438b5ae343dab2b131c64293584">loot_zones</a> = new_zones;</div>
<div class="line"><a id="l06995" name="l06995"></a><span class="lineno"> 6995</span>        <a class="code hl_variable" href="classvehicle.html#af6c2314d1f5b83a04771abea3109a137">zones_dirty</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l06996" name="l06996"></a><span class="lineno"> 6996</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l06997" name="l06997"></a><span class="lineno"> 6997</span>    }</div>
<div class="line"><a id="l06998" name="l06998"></a><span class="lineno"> 6998</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l06999" name="l06999"></a><span class="lineno"> 6999</span>}</div>
<div class="ttc" id="aclasszone__data_html_a6ca10e3a0ae9fb2776ee9569d3ccb6e1"><div class="ttname"><a href="classzone__data.html#a6ca10e3a0ae9fb2776ee9569d3ccb6e1">zone_data::set_position</a></div><div class="ttdeci">void set_position(const std::pair&lt; tripoint, tripoint &gt; &amp;position, bool manual=true)</div><div class="ttdef"><b>Definition:</b> <a href="clzones_8cpp_source.html#l00553">clzones.cpp:553</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8h_source.html#l01806">loot_zones</a>, <a class="el" href="vehicle_8cpp_source.html#l02518">part_with_feature()</a>, <a class="el" href="clzones_8cpp_source.html#l00553">zone_data::set_position()</a>, and <a class="el" href="vehicle_8h_source.html#l01948">zones_dirty</a>.</p>

</div>
</div>
<a id="af1374dea5212a7c1311a1fd5bb3d1f0f" name="af1374dea5212a7c1311a1fd5bb3d1f0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1374dea5212a7c1311a1fd5bb3d1f0f">&#9670;&nbsp;</a></span>reload_seeds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::reload_seeds </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01151">1151</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>{</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>    <a class="code hl_class" href="classplayer.html">player</a> &amp;p = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u;</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span> </div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>    std::vector&lt;item *&gt; seed_inv = p.<a class="code hl_function" href="classvisitable.html#a5b3c37fbe8209cab68aa26d3cc7f4300">items_with</a>( []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; itm ) {</div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>        <span class="keywordflow">return</span> itm.<a class="code hl_function" href="classitem.html#ab00eaab576446da90f829d1ceae66c98">is_seed</a>();</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>    } );</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span> </div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>    <span class="keyword">auto</span> seed_entries = <a class="code hl_function" href="namespaceiexamine.html#a52eaa83fb4f8dacccac4a5e736cf3fe1">iexamine::get_seed_entries</a>( seed_inv );</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>    seed_entries.emplace( seed_entries.begin(), <a class="code hl_typedef" href="iexamine_8h.html#af451d8686f9b469b7d76b4d643773b6a">seed_tuple</a>( <a class="code hl_enumvalue" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>( <span class="stringliteral">&quot;null&quot;</span> ), <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;No seed&quot;</span> ), 0 ) );</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span> </div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>    <span class="keywordtype">int</span> seed_index = <a class="code hl_function" href="namespaceiexamine.html#a8076e42db14f124567108b5754caa31a">iexamine::query_seed</a>( seed_entries );</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span> </div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>    <span class="keywordflow">if</span>( seed_index &gt; 0 &amp;&amp; seed_index &lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( seed_entries.size() ) ) {</div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> = std::get&lt;2&gt;( seed_entries[seed_index] );</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>        <span class="keywordtype">int</span> amount = 0;</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>        <span class="keyword">const</span> std::string popupmsg = <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Move how many?  [Have %d] (0 to cancel)&quot;</span> ), <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> );</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span> </div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span>        amount = <a class="code hl_class" href="classstring__input__popup.html">string_input_popup</a>()</div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>                 .<a class="code hl_function" href="classstring__input__popup.html#aeced4fb3877cc8e24da36af12af2e519">title</a>( popupmsg )</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>                 .<a class="code hl_function" href="classstring__input__popup.html#acc88b6636bee68b1ee4f4dffc533d611">width</a>( 5 )</div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>                 .<a class="code hl_function" href="classstring__input__popup.html#add686042aff41369ff1bfa8754223ca0">only_digits</a>( <span class="keyword">true</span> )</div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span>                 .<a class="code hl_function" href="classstring__input__popup.html#ad9511310a3e0d119d5587fbf0f877c07">query_int</a>();</div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span> </div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>        <span class="keywordflow">if</span>( amount &gt; 0 ) {</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span>            <span class="keywordtype">int</span> actual_amount = std::min( amount, <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> );</div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>            <a class="code hl_class" href="classstring__id.html">itype_id</a> seed_id = std::get&lt;0&gt;( seed_entries[seed_index] );</div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>            std::list&lt;item&gt; used_seed;</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classitem.html#a40963a016376016eb408bdb9dbb94388">item::count_by_charges</a>( seed_id ) ) {</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>                used_seed = p.<a class="code hl_function" href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">use_charges</a>( seed_id, actual_amount );</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>                used_seed = p.<a class="code hl_function" href="classCharacter.html#a7cb114203e03014f9834a10fa4bff24e">use_amount</a>( seed_id, actual_amount );</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>            }</div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>            used_seed.front().set_age( 0_turns );</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span>            <span class="comment">//place seeds into the planter</span></div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span>            <a class="code hl_function" href="activity__handlers_8h.html#aaffe872a8e49c99b600d61b6e1b4062e">put_into_vehicle_or_drop</a>( p, <a class="code hl_enumvalue" href="activity__handlers_8h.html#a3931cba30166834e066ef80c02d84611a38dd6f2bec3ea3b3cde92db954842bdb">item_drop_reason::deliberate</a>, used_seed, <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> );</div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>        }</div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span>    }</div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>}</div>
<div class="ttc" id="aactivity__handlers_8h_html_a3931cba30166834e066ef80c02d84611a38dd6f2bec3ea3b3cde92db954842bdb"><div class="ttname"><a href="activity__handlers_8h.html#a3931cba30166834e066ef80c02d84611a38dd6f2bec3ea3b3cde92db954842bdb">item_drop_reason::deliberate</a></div><div class="ttdeci">@ deliberate</div></div>
<div class="ttc" id="aactivity__handlers_8h_html_aaffe872a8e49c99b600d61b6e1b4062e"><div class="ttname"><a href="activity__handlers_8h.html#aaffe872a8e49c99b600d61b6e1b4062e">put_into_vehicle_or_drop</a></div><div class="ttdeci">void put_into_vehicle_or_drop(Character &amp;c, item_drop_reason, const std::list&lt; item &gt; &amp;items)</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l00389">activity_item_handling.cpp:389</a></div></div>
<div class="ttc" id="aclassCharacter_html_a3d0ec2b4e80527bd2daad576c2bbb187"><div class="ttname"><a href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">Character::use_charges</a></div><div class="ttdeci">std::list&lt; item &gt; use_charges(const itype_id &amp;what, int qty, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09631">character.cpp:9631</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7cb114203e03014f9834a10fa4bff24e"><div class="ttname"><a href="classCharacter.html#a7cb114203e03014f9834a10fa4bff24e">Character::use_amount</a></div><div class="ttdeci">std::list&lt; item &gt; use_amount(itype_id it, int quantity, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09599">character.cpp:9599</a></div></div>
<div class="ttc" id="aclassitem_html_ab00eaab576446da90f829d1ceae66c98"><div class="ttname"><a href="classitem.html#ab00eaab576446da90f829d1ceae66c98">item::is_seed</a></div><div class="ttdeci">bool is_seed() const</div><div class="ttdoc">Whether this is actually a seed, the seed functions won't be of much use for non-seeds.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09601">item.cpp:9601</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html"><div class="ttname"><a href="classstring__input__popup.html">string_input_popup</a></div><div class="ttdoc">Shows a window querying the user for input.</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8h_source.html#l00046">string_input_popup.h:47</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_acc88b6636bee68b1ee4f4dffc533d611"><div class="ttname"><a href="classstring__input__popup.html#acc88b6636bee68b1ee4f4dffc533d611">string_input_popup::width</a></div><div class="ttdeci">string_input_popup &amp; width(int value)</div><div class="ttdoc">Width (in console cells) of the input field itself.</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8h_source.html#l00142">string_input_popup.h:142</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_ad9511310a3e0d119d5587fbf0f877c07"><div class="ttname"><a href="classstring__input__popup.html#ad9511310a3e0d119d5587fbf0f877c07">string_input_popup::query_int</a></div><div class="ttdeci">int query_int(bool loop=true, bool draw_only=false)</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8cpp_source.html#l00281">string_input_popup.cpp:281</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_add686042aff41369ff1bfa8754223ca0"><div class="ttname"><a href="classstring__input__popup.html#add686042aff41369ff1bfa8754223ca0">string_input_popup::only_digits</a></div><div class="ttdeci">string_input_popup &amp; only_digits(bool value)</div><div class="ttdoc">If true, any non-digit input cancels the input.</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8h_source.html#l00157">string_input_popup.h:157</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_aeced4fb3877cc8e24da36af12af2e519"><div class="ttname"><a href="classstring__input__popup.html#aeced4fb3877cc8e24da36af12af2e519">string_input_popup::title</a></div><div class="ttdeci">string_input_popup &amp; title(const std::string &amp;value)</div><div class="ttdoc">The title: short string before the actual input field.</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8h_source.html#l00104">string_input_popup.h:104</a></div></div>
<div class="ttc" id="aclassvisitable_html_a5b3c37fbe8209cab68aa26d3cc7f4300"><div class="ttname"><a href="classvisitable.html#a5b3c37fbe8209cab68aa26d3cc7f4300">visitable::items_with</a></div><div class="ttdeci">std::vector&lt; item * &gt; items_with(const std::function&lt; bool(const item &amp;)&gt; &amp;filter)</div><div class="ttdoc">Returns all items (including those within a container) matching the filter.</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00325">visitable.cpp:325</a></div></div>
<div class="ttc" id="aiexamine_8h_html_af451d8686f9b469b7d76b4d643773b6a"><div class="ttname"><a href="iexamine_8h.html#af451d8686f9b469b7d76b4d643773b6a">seed_tuple</a></div><div class="ttdeci">std::tuple&lt; itype_id, std::string, int &gt; seed_tuple</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8h_source.html#l00020">iexamine.h:20</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a52eaa83fb4f8dacccac4a5e736cf3fe1"><div class="ttname"><a href="namespaceiexamine.html#a52eaa83fb4f8dacccac4a5e736cf3fe1">iexamine::get_seed_entries</a></div><div class="ttdeci">std::vector&lt; seed_tuple &gt; get_seed_entries(const std::vector&lt; item * &gt; &amp;seed_inv)</div><div class="ttdoc">Make lists of unique seed types and names for the menu(no multiple hemp seeds etc)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02135">iexamine.cpp:2135</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a8076e42db14f124567108b5754caa31a"><div class="ttname"><a href="namespaceiexamine.html#a8076e42db14f124567108b5754caa31a">iexamine::query_seed</a></div><div class="ttdeci">int query_seed(const std::vector&lt; seed_tuple &gt; &amp;seed_entries)</div><div class="ttdoc">Choose seed for planting.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02161">iexamine.cpp:2161</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="fmtlib__core_8h_source.html#l01073">detail::count()</a>, <a class="el" href="item_8cpp_source.html#l05855">item::count_by_charges()</a>, <a class="el" href="activity__handlers_8h.html#a3931cba30166834e066ef80c02d84611a38dd6f2bec3ea3b3cde92db954842bdb">deliberate</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="iexamine_8cpp_source.html#l02135">iexamine::get_seed_entries()</a>, <a class="el" href="item_8cpp_source.html#l09601">item::is_seed()</a>, <a class="el" href="visitable_8cpp_source.html#l00325">visitable&lt; T &gt;::items_with()</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>, <a class="el" href="string__input__popup_8h_source.html#l00157">string_input_popup::only_digits()</a>, <a class="el" href="vehicle_8h_source.html#l01859">pos</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00389">put_into_vehicle_or_drop()</a>, <a class="el" href="string__input__popup_8cpp_source.html#l00281">string_input_popup::query_int()</a>, <a class="el" href="iexamine_8cpp_source.html#l02161">iexamine::query_seed()</a>, <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>, <a class="el" href="string__input__popup_8h_source.html#l00104">string_input_popup::title()</a>, <a class="el" href="character_8cpp_source.html#l09599">Character::use_amount()</a>, <a class="el" href="character_8cpp_source.html#l09631">Character::use_charges()</a>, and <a class="el" href="string__input__popup_8h_source.html#l00142">string_input_popup::width()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>.</p>

</div>
</div>
<a id="a6a4ea0ccba37cc3df09163313b402105" name="a6a4ea0ccba37cc3df09163313b402105"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a4ea0ccba37cc3df09163313b402105">&#9670;&nbsp;</a></span>relocate_passengers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::relocate_passengers </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classplayer.html">player</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>passengers</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02199">2199</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02200" name="l02200"></a><span class="lineno"> 2200</span>{</div>
<div class="line"><a id="l02201" name="l02201"></a><span class="lineno"> 2201</span>    <span class="keyword">const</span> <span class="keyword">auto</span> boardables = <a class="code hl_function" href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">get_avail_parts</a>( <span class="stringliteral">&quot;BOARDABLE&quot;</span> );</div>
<div class="line"><a id="l02202" name="l02202"></a><span class="lineno"> 2202</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classplayer.html">player</a> *passenger : passengers ) {</div>
<div class="line"><a id="l02203" name="l02203"></a><span class="lineno"> 2203</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : boardables ) {</div>
<div class="line"><a id="l02204" name="l02204"></a><span class="lineno"> 2204</span>            <span class="keywordflow">if</span>( vp.part().passenger_id == passenger-&gt;getID() ) {</div>
<div class="line"><a id="l02205" name="l02205"></a><span class="lineno"> 2205</span>                passenger-&gt;setpos( vp.pos() );</div>
<div class="line"><a id="l02206" name="l02206"></a><span class="lineno"> 2206</span>            }</div>
<div class="line"><a id="l02207" name="l02207"></a><span class="lineno"> 2207</span>        }</div>
<div class="line"><a id="l02208" name="l02208"></a><span class="lineno"> 2208</span>    }</div>
<div class="line"><a id="l02209" name="l02209"></a><span class="lineno"> 2209</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l02678">get_avail_parts()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>.</p>

</div>
</div>
<a id="adcb8ceed162110674571ecb30a3cee48" name="adcb8ceed162110674571ecb30a3cee48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcb8ceed162110674571ecb30a3cee48">&#9670;&nbsp;</a></span>remote_controlled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::remote_controlled </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l00297">297</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>{</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>    <a class="code hl_class" href="classvehicle.html">vehicle</a> *veh = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;remoteveh();</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>    <span class="keywordflow">if</span>( veh != <span class="keyword">this</span> ) {</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>    }</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span> </div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">get_avail_parts</a>( <span class="stringliteral">&quot;REMOTE_CONTROLS&quot;</span> ) ) {</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( p.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), vp.pos() ) &lt;= 40 ) {</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>        }</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>    }</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span> </div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Lost connection with the vehicle due to distance!&quot;</span> ) );</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;setremoteveh( <span class="keyword">nullptr</span> );</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l02678">get_avail_parts()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="character_8cpp_source.html#l00707">Character::pos()</a>, and <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l01098">map::displace_vehicle()</a>, and <a class="el" href="vehicle_8cpp_source.html#l00277">player_in_control()</a>.</p>

</div>
</div>
<a id="a0f50d5c5835291a971f85c12662f4e0e" name="a0f50d5c5835291a971f85c12662f4e0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f50d5c5835291a971f85c12662f4e0e">&#9670;&nbsp;</a></span>remove_carried_flag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::remove_carried_flag </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01974">1974</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01975" name="l01975"></a><span class="lineno"> 1975</span>{</div>
<div class="line"><a id="l01976" name="l01976"></a><span class="lineno"> 1976</span>    <span class="keywordflow">for</span>( <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l01977" name="l01977"></a><span class="lineno"> 1977</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.<a class="code hl_variable" href="structvehicle__part.html#a4ec92872c2987158066d420e8e76f280">carry_names</a>.empty() ) {</div>
<div class="line"><a id="l01978" name="l01978"></a><span class="lineno"> 1978</span>            <span class="comment">// note: we get here if the part was added while the vehicle was carried / mounted. This is not expected.</span></div>
<div class="line"><a id="l01979" name="l01979"></a><span class="lineno"> 1979</span>            <span class="comment">// still try to remove the carried flag, if any.</span></div>
<div class="line"><a id="l01980" name="l01980"></a><span class="lineno"> 1980</span>            <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.<a class="code hl_function" href="structvehicle__part.html#a86c3ad22b1284273f14e63ce726d685d">remove_flag</a>( <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaae9d481422fe656a547014c35ff6f2045">vehicle_part::carried_flag</a> );</div>
<div class="line"><a id="l01981" name="l01981"></a><span class="lineno"> 1981</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01982" name="l01982"></a><span class="lineno"> 1982</span>            <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.<a class="code hl_variable" href="structvehicle__part.html#a4ec92872c2987158066d420e8e76f280">carry_names</a>.pop();</div>
<div class="line"><a id="l01983" name="l01983"></a><span class="lineno"> 1983</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.<a class="code hl_variable" href="structvehicle__part.html#a4ec92872c2987158066d420e8e76f280">carry_names</a>.empty() ) {</div>
<div class="line"><a id="l01984" name="l01984"></a><span class="lineno"> 1984</span>                <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.<a class="code hl_function" href="structvehicle__part.html#a86c3ad22b1284273f14e63ce726d685d">remove_flag</a>( <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaae9d481422fe656a547014c35ff6f2045">vehicle_part::carried_flag</a> );</div>
<div class="line"><a id="l01985" name="l01985"></a><span class="lineno"> 1985</span>            }</div>
<div class="line"><a id="l01986" name="l01986"></a><span class="lineno"> 1986</span>        }</div>
<div class="line"><a id="l01987" name="l01987"></a><span class="lineno"> 1987</span>    }</div>
<div class="line"><a id="l01988" name="l01988"></a><span class="lineno"> 1988</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l00194">vehicle_part::carried_flag</a>, <a class="el" href="vehicle_8h_source.html#l00226">vehicle_part::carry_names</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="vehicle_8h_source.html#l00214">vehicle_part::remove_flag()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l02004">remove_carried_vehicle()</a>.</p>

</div>
</div>
<a id="af17aff1ff5fdcef4f1a8b63d47f32b69" name="af17aff1ff5fdcef4f1a8b63d47f32b69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af17aff1ff5fdcef4f1a8b63d47f32b69">&#9670;&nbsp;</a></span>remove_carried_vehicle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::remove_carried_vehicle </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>carried_parts</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02004">2004</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02005" name="l02005"></a><span class="lineno"> 2005</span>{</div>
<div class="line"><a id="l02006" name="l02006"></a><span class="lineno"> 2006</span>    <span class="keywordflow">if</span>( carried_parts.empty() ) {</div>
<div class="line"><a id="l02007" name="l02007"></a><span class="lineno"> 2007</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02008" name="l02008"></a><span class="lineno"> 2008</span>    }</div>
<div class="line"><a id="l02009" name="l02009"></a><span class="lineno"> 2009</span>    std::string veh_record;</div>
<div class="line"><a id="l02010" name="l02010"></a><span class="lineno"> 2010</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> new_pos3;</div>
<div class="line"><a id="l02011" name="l02011"></a><span class="lineno"> 2011</span>    <span class="keywordtype">bool</span> x_aligned = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02012" name="l02012"></a><span class="lineno"> 2012</span>    <span class="keywordtype">bool</span> tracked_parts =</div>
<div class="line"><a id="l02013" name="l02013"></a><span class="lineno"> 2013</span>        <span class="keyword">false</span>; <span class="comment">// we will set this to true if any of the vehicle parts carry a tracked_flag</span></div>
<div class="line"><a id="l02014" name="l02014"></a><span class="lineno"> 2014</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> carried_part : carried_parts ) {</div>
<div class="line"><a id="l02015" name="l02015"></a><span class="lineno"> 2015</span>        <span class="comment">//check if selected part carries tracking flag</span></div>
<div class="line"><a id="l02016" name="l02016"></a><span class="lineno"> 2016</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[carried_part].has_flag(</div>
<div class="line"><a id="l02017" name="l02017"></a><span class="lineno"> 2017</span>                <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaa1a8e65b4ccc32e8654446910b6a5c51e">vehicle_part::tracked_flag</a> ) ) { <span class="comment">//this should only need to run once</span></div>
<div class="line"><a id="l02018" name="l02018"></a><span class="lineno"> 2018</span>            tracked_parts = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02019" name="l02019"></a><span class="lineno"> 2019</span>        }</div>
<div class="line"><a id="l02020" name="l02020"></a><span class="lineno"> 2020</span>        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;carry_names = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[carried_part].carry_names;</div>
<div class="line"><a id="l02021" name="l02021"></a><span class="lineno"> 2021</span>        <span class="keywordflow">if</span>( !carry_names.empty() ) {</div>
<div class="line"><a id="l02022" name="l02022"></a><span class="lineno"> 2022</span>            std::string id_string = carry_names.top().substr( 0, 1 );</div>
<div class="line"><a id="l02023" name="l02023"></a><span class="lineno"> 2023</span>            <span class="keywordflow">if</span>( id_string == <span class="stringliteral">&quot;X&quot;</span> || id_string == <span class="stringliteral">&quot;Y&quot;</span> ) {</div>
<div class="line"><a id="l02024" name="l02024"></a><span class="lineno"> 2024</span>                veh_record = carry_names.top();</div>
<div class="line"><a id="l02025" name="l02025"></a><span class="lineno"> 2025</span>                new_pos3 = <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( carried_part );</div>
<div class="line"><a id="l02026" name="l02026"></a><span class="lineno"> 2026</span>                x_aligned = id_string == <span class="stringliteral">&quot;X&quot;</span>;</div>
<div class="line"><a id="l02027" name="l02027"></a><span class="lineno"> 2027</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02028" name="l02028"></a><span class="lineno"> 2028</span>            }</div>
<div class="line"><a id="l02029" name="l02029"></a><span class="lineno"> 2029</span>        }</div>
<div class="line"><a id="l02030" name="l02030"></a><span class="lineno"> 2030</span>    }</div>
<div class="line"><a id="l02031" name="l02031"></a><span class="lineno"> 2031</span>    <span class="keywordflow">if</span>( veh_record.empty() ) {</div>
<div class="line"><a id="l02032" name="l02032"></a><span class="lineno"> 2032</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02033" name="l02033"></a><span class="lineno"> 2033</span>    }</div>
<div class="line"><a id="l02034" name="l02034"></a><span class="lineno"> 2034</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::angle</a> new_dir =</div>
<div class="line"><a id="l02035" name="l02035"></a><span class="lineno"> 2035</span>        <a class="code hl_function" href="namespacedetail.html#a955ad02ade4f07084391a60ed80701bf">normalize</a>( <a class="code hl_function" href="namespaceunits.html#a068cd98efba5fd1fbb936ce3597db23d">units::from_degrees</a>( std::stoi( veh_record.substr( 4, 3 ) ) ) + <a class="code hl_variable" href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">face</a>.<a class="code hl_function" href="classtileray.html#a91ed01227e1754597024f4916f8bd6af">dir</a>() );</div>
<div class="line"><a id="l02036" name="l02036"></a><span class="lineno"> 2036</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::angle</a> host_dir = <a class="code hl_function" href="namespacedetail.html#a955ad02ade4f07084391a60ed80701bf">normalize</a>( <a class="code hl_variable" href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">face</a>.<a class="code hl_function" href="classtileray.html#a91ed01227e1754597024f4916f8bd6af">dir</a>(), 180_degrees );</div>
<div class="line"><a id="l02037" name="l02037"></a><span class="lineno"> 2037</span>    <span class="comment">// if the host is skewed N/S, and the carried vehicle is going to come at an angle,</span></div>
<div class="line"><a id="l02038" name="l02038"></a><span class="lineno"> 2038</span>    <span class="comment">// force it to east/west instead</span></div>
<div class="line"><a id="l02039" name="l02039"></a><span class="lineno"> 2039</span>    <span class="keywordflow">if</span>( host_dir &gt;= 45_degrees &amp;&amp; host_dir &lt;= 135_degrees ) {</div>
<div class="line"><a id="l02040" name="l02040"></a><span class="lineno"> 2040</span>        <span class="keywordflow">if</span>( new_dir &lt;= 45_degrees || new_dir &gt;= 315_degrees ) {</div>
<div class="line"><a id="l02041" name="l02041"></a><span class="lineno"> 2041</span>            new_dir = 0_degrees;</div>
<div class="line"><a id="l02042" name="l02042"></a><span class="lineno"> 2042</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( new_dir &gt;= 135_degrees &amp;&amp; new_dir &lt;= 225_degrees ) {</div>
<div class="line"><a id="l02043" name="l02043"></a><span class="lineno"> 2043</span>            new_dir = 180_degrees;</div>
<div class="line"><a id="l02044" name="l02044"></a><span class="lineno"> 2044</span>        }</div>
<div class="line"><a id="l02045" name="l02045"></a><span class="lineno"> 2045</span>    }</div>
<div class="line"><a id="l02046" name="l02046"></a><span class="lineno"> 2046</span>    <a class="code hl_class" href="classvehicle.html">vehicle</a> *new_vehicle = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_vehicle( <a class="code hl_typedef" href="type__id_8h.html#a64efc8ab51816a59711440d464136eda">vproto_id</a>( <span class="stringliteral">&quot;none&quot;</span> ), new_pos3, new_dir );</div>
<div class="line"><a id="l02047" name="l02047"></a><span class="lineno"> 2047</span>    <span class="keywordflow">if</span>( new_vehicle == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l02048" name="l02048"></a><span class="lineno"> 2048</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;Unable to unload bike rack, host face %d, new_dir %d!&quot;</span>,</div>
<div class="line"><a id="l02049" name="l02049"></a><span class="lineno"> 2049</span>                 <a class="code hl_function" href="namespaceunits.html#a9ce2bc1618fa4acf9f9e98effd9f1ae0">to_degrees</a>( <a class="code hl_variable" href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">face</a>.<a class="code hl_function" href="classtileray.html#a91ed01227e1754597024f4916f8bd6af">dir</a>() ), <a class="code hl_function" href="namespaceunits.html#a9ce2bc1618fa4acf9f9e98effd9f1ae0">to_degrees</a>( new_dir ) );</div>
<div class="line"><a id="l02050" name="l02050"></a><span class="lineno"> 2050</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02051" name="l02051"></a><span class="lineno"> 2051</span>    }</div>
<div class="line"><a id="l02052" name="l02052"></a><span class="lineno"> 2052</span> </div>
<div class="line"><a id="l02053" name="l02053"></a><span class="lineno"> 2053</span>    std::vector&lt;point&gt; new_mounts;</div>
<div class="line"><a id="l02054" name="l02054"></a><span class="lineno"> 2054</span>    new_vehicle-&gt;<a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> = veh_record.substr( <a class="code hl_variable" href="structvehicle__part.html#a171fab06f5feeebdec66c271b264efc0">vehicle_part::name_offset</a> );</div>
<div class="line"><a id="l02055" name="l02055"></a><span class="lineno"> 2055</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> carried_part : carried_parts ) {</div>
<div class="line"><a id="l02056" name="l02056"></a><span class="lineno"> 2056</span>        <a class="code hl_struct" href="structpoint.html">point</a> new_mount;</div>
<div class="line"><a id="l02057" name="l02057"></a><span class="lineno"> 2057</span>        std::string mount_str;</div>
<div class="line"><a id="l02058" name="l02058"></a><span class="lineno"> 2058</span>        <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[carried_part].carry_names.empty() ) {</div>
<div class="line"><a id="l02059" name="l02059"></a><span class="lineno"> 2059</span>            <span class="comment">// the mount string should be something like &quot;X 0 0&quot; for ex. We get the first number out of it.</span></div>
<div class="line"><a id="l02060" name="l02060"></a><span class="lineno"> 2060</span>            mount_str = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[carried_part].carry_names.top().substr( 1, 3 );</div>
<div class="line"><a id="l02061" name="l02061"></a><span class="lineno"> 2061</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02062" name="l02062"></a><span class="lineno"> 2062</span>            <span class="comment">// FIX #28712; if we get here it means that a part was added to the bike while the latter was a carried vehicle.</span></div>
<div class="line"><a id="l02063" name="l02063"></a><span class="lineno"> 2063</span>            <span class="comment">// This part didn&#39;t get a carry_names because those are assigned when the carried vehicle is loaded.</span></div>
<div class="line"><a id="l02064" name="l02064"></a><span class="lineno"> 2064</span>            <span class="comment">// We can&#39;t be sure to which vehicle it really belongs to, so it will be detached from the vehicle.</span></div>
<div class="line"><a id="l02065" name="l02065"></a><span class="lineno"> 2065</span>            <span class="comment">// We can at least inform the player that there&#39;s something wrong.</span></div>
<div class="line"><a id="l02066" name="l02066"></a><span class="lineno"> 2066</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>,</div>
<div class="line"><a id="l02067" name="l02067"></a><span class="lineno"> 2067</span>                     <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A part of the vehicle (&#39;%s&#39;) has no containing vehicle&#39;s name.  It will be detached from the %s vehicle.&quot;</span> ),</div>
<div class="line"><a id="l02068" name="l02068"></a><span class="lineno"> 2068</span>                     <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[carried_part].<a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>(),  new_vehicle-&gt;<a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l02069" name="l02069"></a><span class="lineno"> 2069</span> </div>
<div class="line"><a id="l02070" name="l02070"></a><span class="lineno"> 2070</span>            <span class="comment">// check if any other parts at the same location have a valid carry name so we can still have a valid mount location.</span></div>
<div class="line"><a id="l02071" name="l02071"></a><span class="lineno"> 2071</span>            <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;local_part : <a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[carried_part].mount, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l02072" name="l02072"></a><span class="lineno"> 2072</span>                <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[local_part].carry_names.empty() ) {</div>
<div class="line"><a id="l02073" name="l02073"></a><span class="lineno"> 2073</span>                    mount_str = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[local_part].carry_names.top().substr( 1, 3 );</div>
<div class="line"><a id="l02074" name="l02074"></a><span class="lineno"> 2074</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02075" name="l02075"></a><span class="lineno"> 2075</span>                }</div>
<div class="line"><a id="l02076" name="l02076"></a><span class="lineno"> 2076</span>            }</div>
<div class="line"><a id="l02077" name="l02077"></a><span class="lineno"> 2077</span>        }</div>
<div class="line"><a id="l02078" name="l02078"></a><span class="lineno"> 2078</span>        <span class="keywordflow">if</span>( mount_str.empty() ) {</div>
<div class="line"><a id="l02079" name="l02079"></a><span class="lineno"> 2079</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a id="l02080" name="l02080"></a><span class="lineno"> 2080</span>                     <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;There&#39;s not viable mount location on this vehicle: %s. It can&#39;t be unloaded from the rack.&quot;</span> ),</div>
<div class="line"><a id="l02081" name="l02081"></a><span class="lineno"> 2081</span>                     new_vehicle-&gt;<a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l02082" name="l02082"></a><span class="lineno"> 2082</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02083" name="l02083"></a><span class="lineno"> 2083</span>        }</div>
<div class="line"><a id="l02084" name="l02084"></a><span class="lineno"> 2084</span>        <span class="keywordflow">if</span>( x_aligned ) {</div>
<div class="line"><a id="l02085" name="l02085"></a><span class="lineno"> 2085</span>            new_mount.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> = std::stoi( mount_str );</div>
<div class="line"><a id="l02086" name="l02086"></a><span class="lineno"> 2086</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02087" name="l02087"></a><span class="lineno"> 2087</span>            new_mount.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> = std::stoi( mount_str );</div>
<div class="line"><a id="l02088" name="l02088"></a><span class="lineno"> 2088</span>        }</div>
<div class="line"><a id="l02089" name="l02089"></a><span class="lineno"> 2089</span>        new_mounts.push_back( new_mount );</div>
<div class="line"><a id="l02090" name="l02090"></a><span class="lineno"> 2090</span>    }</div>
<div class="line"><a id="l02091" name="l02091"></a><span class="lineno"> 2091</span> </div>
<div class="line"><a id="l02092" name="l02092"></a><span class="lineno"> 2092</span>    std::vector&lt;vehicle *&gt; new_vehicles;</div>
<div class="line"><a id="l02093" name="l02093"></a><span class="lineno"> 2093</span>    new_vehicles.push_back( new_vehicle );</div>
<div class="line"><a id="l02094" name="l02094"></a><span class="lineno"> 2094</span>    std::vector&lt;std::vector&lt;int&gt;&gt; carried_vehicles;</div>
<div class="line"><a id="l02095" name="l02095"></a><span class="lineno"> 2095</span>    carried_vehicles.push_back( carried_parts );</div>
<div class="line"><a id="l02096" name="l02096"></a><span class="lineno"> 2096</span>    std::vector&lt;std::vector&lt;point&gt;&gt; carried_mounts;</div>
<div class="line"><a id="l02097" name="l02097"></a><span class="lineno"> 2097</span>    carried_mounts.push_back( new_mounts );</div>
<div class="line"><a id="l02098" name="l02098"></a><span class="lineno"> 2098</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code hl_enumvalue" href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a6ece335eed53daba50d8caceed1b5c4b">success</a> = <a class="code hl_function" href="classvehicle.html#a90e64bb680f1b708b645df8d06028366">split_vehicles</a>( carried_vehicles, new_vehicles, carried_mounts );</div>
<div class="line"><a id="l02099" name="l02099"></a><span class="lineno"> 2099</span>    <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a6ece335eed53daba50d8caceed1b5c4b">success</a> ) {</div>
<div class="line"><a id="l02100" name="l02100"></a><span class="lineno"> 2100</span>        <span class="comment">//~ %s is the vehicle being loaded onto the bicycle rack</span></div>
<div class="line"><a id="l02101" name="l02101"></a><span class="lineno"> 2101</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You unload the %s from the bike rack.&quot;</span> ), new_vehicle-&gt;<a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l02102" name="l02102"></a><span class="lineno"> 2102</span>        new_vehicle-&gt;<a class="code hl_function" href="classvehicle.html#a0f50d5c5835291a971f85c12662f4e0e">remove_carried_flag</a>();</div>
<div class="line"><a id="l02103" name="l02103"></a><span class="lineno"> 2103</span>        <span class="keywordflow">if</span>( tracked_parts ) {</div>
<div class="line"><a id="l02104" name="l02104"></a><span class="lineno"> 2104</span>            new_vehicle-&gt;<a class="code hl_function" href="classvehicle.html#af215ec0fe4b4e7a8a8bf7e03e5874678">toggle_tracking</a>(); <span class="comment">//turn on tracking for our newly created vehicle</span></div>
<div class="line"><a id="l02105" name="l02105"></a><span class="lineno"> 2105</span>            new_vehicle-&gt;<a class="code hl_function" href="classvehicle.html#a653f5f2bff7517c56044fdaa16b73ed6">remove_tracked_flag</a>(); <span class="comment">//remove our tracking flags now that the vehicle isn&#39;t carried</span></div>
<div class="line"><a id="l02106" name="l02106"></a><span class="lineno"> 2106</span>        }</div>
<div class="line"><a id="l02107" name="l02107"></a><span class="lineno"> 2107</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.dirty_vehicle_list.insert( <span class="keyword">this</span> );</div>
<div class="line"><a id="l02108" name="l02108"></a><span class="lineno"> 2108</span>        <a class="code hl_function" href="classvehicle.html#a256bff136536ed8e38b84521c1450a6a">part_removal_cleanup</a>();</div>
<div class="line"><a id="l02109" name="l02109"></a><span class="lineno"> 2109</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02110" name="l02110"></a><span class="lineno"> 2110</span>        <span class="comment">//~ %s is the vehicle being loaded onto the bicycle rack</span></div>
<div class="line"><a id="l02111" name="l02111"></a><span class="lineno"> 2111</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You can&#39;t unload the %s from the bike rack.&quot;</span> ), new_vehicle-&gt;<a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l02112" name="l02112"></a><span class="lineno"> 2112</span>    }</div>
<div class="line"><a id="l02113" name="l02113"></a><span class="lineno"> 2113</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a6ece335eed53daba50d8caceed1b5c4b">success</a>;</div>
<div class="line"><a id="l02114" name="l02114"></a><span class="lineno"> 2114</span>}</div>
<div class="ttc" id="aclassvehicle_html_a0f50d5c5835291a971f85c12662f4e0e"><div class="ttname"><a href="classvehicle.html#a0f50d5c5835291a971f85c12662f4e0e">vehicle::remove_carried_flag</a></div><div class="ttdeci">void remove_carried_flag()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01974">vehicle.cpp:1974</a></div></div>
<div class="ttc" id="aclassvehicle_html_a256bff136536ed8e38b84521c1450a6a"><div class="ttname"><a href="classvehicle.html#a256bff136536ed8e38b84521c1450a6a">vehicle::part_removal_cleanup</a></div><div class="ttdeci">void part_removal_cleanup()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01940">vehicle.cpp:1940</a></div></div>
<div class="ttc" id="aclassvehicle_html_a653f5f2bff7517c56044fdaa16b73ed6"><div class="ttname"><a href="classvehicle.html#a653f5f2bff7517c56044fdaa16b73ed6">vehicle::remove_tracked_flag</a></div><div class="ttdeci">void remove_tracked_flag()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01990">vehicle.cpp:1990</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a171fab06f5feeebdec66c271b264efc0"><div class="ttname"><a href="structvehicle__part.html#a171fab06f5feeebdec66c271b264efc0">vehicle_part::name_offset</a></div><div class="ttdeci">static constexpr int name_offset</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00224">vehicle.h:224</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="tileray_8cpp_source.html#l00074">tileray::dir()</a>, <a class="el" href="vehicle_8h_source.html#l01891">face</a>, <a class="el" href="units__angle_8h_source.html#l00031">units::from_degrees()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00264">m_debug</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="vehicle_8h_source.html#l00224">vehicle_part::name_offset</a>, <a class="el" href="fmtlib__format-inl_8h_source.html#l01223">detail::normalize()</a>, <a class="el" href="vehicle_8cpp_source.html#l01940">part_removal_cleanup()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>, <a class="el" href="vehicle_8cpp_source.html#l01974">remove_carried_flag()</a>, <a class="el" href="vehicle_8cpp_source.html#l01990">remove_tracked_flag()</a>, <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>, <a class="el" href="behavior_8h_source.html#l00020">behavior::success</a>, <a class="el" href="units__angle_8h_source.html#l00036">units::to_degrees()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00593">toggle_tracking()</a>, <a class="el" href="vehicle_8h_source.html#l00196">vehicle_part::tracked_flag</a>, <a class="el" href="point_8h_source.html#l00038">point::x</a>, and <a class="el" href="point_8h_source.html#l00039">point::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l01823">use_bike_rack()</a>.</p>

</div>
</div>
<a id="a5469b7e71a5e31095c9856cb1282566b" name="a5469b7e71a5e31095c9856cb1282566b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5469b7e71a5e31095c9856cb1282566b">&#9670;&nbsp;</a></span>remove_item() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::remove_item </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>part</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05260">5260</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05261" name="l05261"></a><span class="lineno"> 5261</span>{</div>
<div class="line"><a id="l05262" name="l05262"></a><span class="lineno"> 5262</span>    <span class="keyword">const</span> <a class="code hl_class" href="classcata_1_1colony.html">cata::colony&lt;item&gt;</a> &amp;veh_items = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].items;</div>
<div class="line"><a id="l05263" name="l05263"></a><span class="lineno"> 5263</span>    <span class="keyword">const</span> <a class="code hl_class" href="classcata_1_1colony_1_1colony__iterator.html">cata::colony&lt;item&gt;::const_iterator</a> iter = veh_items.<a class="code hl_function" href="classcata_1_1colony.html#a00bbd4b9a4c5ffcc97b5443afa12aecf">get_iterator_from_pointer</a>( it );</div>
<div class="line"><a id="l05264" name="l05264"></a><span class="lineno"> 5264</span>    <span class="keywordflow">if</span>( iter == veh_items.<a class="code hl_function" href="classcata_1_1colony.html#a9c4396d91b839a9b32c306b1c5552451">end</a>() ) {</div>
<div class="line"><a id="l05265" name="l05265"></a><span class="lineno"> 5265</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05266" name="l05266"></a><span class="lineno"> 5266</span>    }</div>
<div class="line"><a id="l05267" name="l05267"></a><span class="lineno"> 5267</span>    <a class="code hl_function" href="classvehicle.html#a5469b7e71a5e31095c9856cb1282566b">remove_item</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, iter );</div>
<div class="line"><a id="l05268" name="l05268"></a><span class="lineno"> 5268</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l05269" name="l05269"></a><span class="lineno"> 5269</span>}</div>
<div class="ttc" id="aclasscata_1_1colony_html"><div class="ttname"><a href="classcata_1_1colony.html">cata::colony</a></div><div class="ttdef"><b>Definition:</b> <a href="colony_8h_source.html#l00073">colony.h:75</a></div></div>
<div class="ttc" id="aclasscata_1_1colony_html_a00bbd4b9a4c5ffcc97b5443afa12aecf"><div class="ttname"><a href="classcata_1_1colony.html#a00bbd4b9a4c5ffcc97b5443afa12aecf">cata::colony::get_iterator_from_pointer</a></div><div class="ttdeci">iterator get_iterator_from_pointer(const pointer element_pointer) const</div><div class="ttdoc">Getting a pointer from an iterator is simple - simply dereference it then grab the address ie.</div><div class="ttdef"><b>Definition:</b> <a href="colony_8h_source.html#l03112">colony.h:3112</a></div></div>
<div class="ttc" id="aclasscata_1_1colony_html_a9c4396d91b839a9b32c306b1c5552451"><div class="ttname"><a href="classcata_1_1colony.html#a9c4396d91b839a9b32c306b1c5552451">cata::colony::end</a></div><div class="ttdeci">COLONY_FORCE_INLINE iterator end() noexcept</div><div class="ttdef"><b>Definition:</b> <a href="colony_8h_source.html#l00834">colony.h:834</a></div></div>
<div class="ttc" id="aclassvehicle_html_a5469b7e71a5e31095c9856cb1282566b"><div class="ttname"><a href="classvehicle.html#a5469b7e71a5e31095c9856cb1282566b">vehicle::remove_item</a></div><div class="ttdeci">bool remove_item(int part, item *it)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05260">vehicle.cpp:5260</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="colony_8h_source.html#l00834">cata::colony&lt; element_type, element_allocator_type, element_skipfield_type &gt;::end()</a>, <a class="el" href="colony_8h_source.html#l03112">cata::colony&lt; element_type, element_allocator_type, element_skipfield_type &gt;::get_iterator_from_pointer()</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="vehicle_8cpp_source.html#l05260">remove_item()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l00230">vehicle_stack::erase()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00964">move_item()</a>, and <a class="el" href="vehicle_8cpp_source.html#l05260">remove_item()</a>.</p>

</div>
</div>
<a id="a952b8f84407547e8cf4d4508f7f9e5fd" name="a952b8f84407547e8cf4d4508f7f9e5fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a952b8f84407547e8cf4d4508f7f9e5fd">&#9670;&nbsp;</a></span>remove_item() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classitem__stack.html#a711217cbaded7f3f13b4b54f9ef617af">vehicle_stack::iterator</a> vehicle::remove_item </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>part</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem__stack.html#a4fc307204e23390ef6790b99439d4475">vehicle_stack::const_iterator</a>&#160;</td>
          <td class="paramname"><em>it</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05271">5271</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05272" name="l05272"></a><span class="lineno"> 5272</span>{</div>
<div class="line"><a id="l05273" name="l05273"></a><span class="lineno"> 5273</span>    <a class="code hl_class" href="classcata_1_1colony.html">cata::colony&lt;item&gt;</a> &amp;veh_items = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].items;</div>
<div class="line"><a id="l05274" name="l05274"></a><span class="lineno"> 5274</span> </div>
<div class="line"><a id="l05275" name="l05275"></a><span class="lineno"> 5275</span>    <span class="comment">// remove from the active items cache (if it isn&#39;t there does nothing)</span></div>
<div class="line"><a id="l05276" name="l05276"></a><span class="lineno"> 5276</span>    <a class="code hl_variable" href="classvehicle.html#ad7894d7d5b3a20fb16927cd95d4d2a04">active_items</a>.<a class="code hl_function" href="classactive__item__cache.html#a42d85138936ec2890a3c277c7fba40eb">remove</a>( &amp;*it );</div>
<div class="line"><a id="l05277" name="l05277"></a><span class="lineno"> 5277</span> </div>
<div class="line"><a id="l05278" name="l05278"></a><span class="lineno"> 5278</span>    <a class="code hl_function" href="classvehicle.html#a8e8079a6591b3104191c881509f16d61">invalidate_mass</a>();</div>
<div class="line"><a id="l05279" name="l05279"></a><span class="lineno"> 5279</span>    <span class="keywordflow">return</span> veh_items.<a class="code hl_function" href="classcata_1_1colony.html#a8a360e244231ec50daf89c340255f011">erase</a>( it );</div>
<div class="line"><a id="l05280" name="l05280"></a><span class="lineno"> 5280</span>}</div>
<div class="ttc" id="aclassactive__item__cache_html_a42d85138936ec2890a3c277c7fba40eb"><div class="ttname"><a href="classactive__item__cache.html#a42d85138936ec2890a3c277c7fba40eb">active_item_cache::remove</a></div><div class="ttdeci">void remove(const item *it)</div><div class="ttdoc">Removes the item if it is in the cache.</div><div class="ttdef"><b>Definition:</b> <a href="active__item__cache_8cpp_source.html#l00009">active_item_cache.cpp:9</a></div></div>
<div class="ttc" id="aclasscata_1_1colony_html_a8a360e244231ec50daf89c340255f011"><div class="ttname"><a href="classcata_1_1colony.html#a8a360e244231ec50daf89c340255f011">cata::colony::erase</a></div><div class="ttdeci">iterator erase(const const_iterator &amp;it)</div><div class="ttdoc">Removes the element pointed to by the supplied iterator, from the colony.</div><div class="ttdef"><b>Definition:</b> <a href="colony_8h_source.html#l01748">colony.h:1748</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01807">active_items</a>, <a class="el" href="colony_8h_source.html#l01748">cata::colony&lt; element_type, element_allocator_type, element_skipfield_type &gt;::erase()</a>, <a class="el" href="vehicle_8cpp_source.html#l06778">invalidate_mass()</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="active__item__cache_8cpp_source.html#l00009">active_item_cache::remove()</a>.</p>

</div>
</div>
<a id="aae4c2a7de2fba2e7808904f8e39bd12e" name="aae4c2a7de2fba2e7808904f8e39bd12e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae4c2a7de2fba2e7808904f8e39bd12e">&#9670;&nbsp;</a></span>remove_old_owner()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::remove_old_owner </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l00819">819</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>                                {</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>            <a class="code hl_variable" href="classvehicle.html#a191233eeb95ac9e660d5da83dd247a73">theft_time</a> = <a class="code hl_variable" href="namespacecata.html#ad05314667ac5d05f984aeeef26b9a87f">cata::nullopt</a>;</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>            <a class="code hl_variable" href="classvehicle.html#a0e6255388e73823374ec4bc9097f87c3">old_owner</a> = <a class="code hl_function" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">faction_id::NULL_ID</a>();</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">string_id&lt; faction &gt;::NULL_ID()</a>, <a class="el" href="optional_8h_source.html#l00022">cata::nullopt</a>, <a class="el" href="vehicle_8h_source.html#l01721">old_owner</a>, and <a class="el" href="vehicle_8h_source.html#l01881">theft_time</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04197">handle_potential_theft()</a>.</p>

</div>
</div>
<a id="a95f9abba8cbc766e3916da4aec323b21" name="a95f9abba8cbc766e3916da4aec323b21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95f9abba8cbc766e3916da4aec323b21">&#9670;&nbsp;</a></span>remove_owner()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::remove_owner </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l00827">827</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>                            {</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>            <a class="code hl_variable" href="classvehicle.html#afb548b72a0c24d9f9c436f198040e052">owner</a> = <a class="code hl_function" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">faction_id::NULL_ID</a>();</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">string_id&lt; faction &gt;::NULL_ID()</a>, and <a class="el" href="vehicle_8h_source.html#l01719">owner</a>.</p>

</div>
</div>
<a id="ab3994c8a66172408e26ed8bfaec2f717" name="ab3994c8a66172408e26ed8bfaec2f717"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3994c8a66172408e26ed8bfaec2f717">&#9670;&nbsp;</a></span>remove_part() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::remove_part </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mark a part as removed from the vehicle. </p>
<dl class="section return"><dt>Returns</dt><dd>bool true if the vehicle's 0,0 point shifted. </dd></dl>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01814">1814</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01815" name="l01815"></a><span class="lineno"> 1815</span>{</div>
<div class="line"><a id="l01816" name="l01816"></a><span class="lineno"> 1816</span>    <a class="code hl_class" href="classDefaultRemovePartHandler.html">DefaultRemovePartHandler</a> handler;</div>
<div class="line"><a id="l01817" name="l01817"></a><span class="lineno"> 1817</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a04638c5234928c4ccca14ddc2059fb11">remove_part</a>( p, handler );</div>
<div class="line"><a id="l01818" name="l01818"></a><span class="lineno"> 1818</span>}</div>
<div class="ttc" id="aclassDefaultRemovePartHandler_html"><div class="ttname"><a href="classDefaultRemovePartHandler.html">DefaultRemovePartHandler</a></div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l00132">vehicle.cpp:133</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>.</p>

</div>
</div>
<a id="a04638c5234928c4ccca14ddc2059fb11" name="a04638c5234928c4ccca14ddc2059fb11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04638c5234928c4ccca14ddc2059fb11">&#9670;&nbsp;</a></span>remove_part() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::remove_part </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classRemovePartHandler.html">RemovePartHandler</a> &amp;&#160;</td>
          <td class="paramname"><em>handler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handler</td><td>A class that receives various callbacks, e.g. for placing items. This handler is different when called during mapgen (when items need to be placed on the temporary mapgen map), and when called during normal game play (when items go on the main map g-&gt;m). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01820">1820</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01821" name="l01821"></a><span class="lineno"> 1821</span>{</div>
<div class="line"><a id="l01822" name="l01822"></a><span class="lineno"> 1822</span>    <span class="comment">// NOTE: Don&#39;t access g or g-&gt;m or anything from it directly here.</span></div>
<div class="line"><a id="l01823" name="l01823"></a><span class="lineno"> 1823</span>    <span class="comment">// Forward all access to the handler.</span></div>
<div class="line"><a id="l01824" name="l01824"></a><span class="lineno"> 1824</span>    <span class="comment">// There are currently two implementations of it:</span></div>
<div class="line"><a id="l01825" name="l01825"></a><span class="lineno"> 1825</span>    <span class="comment">// - one for normal game play (vehicle is on the main map g-&gt;m),</span></div>
<div class="line"><a id="l01826" name="l01826"></a><span class="lineno"> 1826</span>    <span class="comment">// - one for mapgen (vehicle is on a temporary map used only during mapgen).</span></div>
<div class="line"><a id="l01827" name="l01827"></a><span class="lineno"> 1827</span>    <span class="keywordflow">if</span>( p &gt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size() ) ) {</div>
<div class="line"><a id="l01828" name="l01828"></a><span class="lineno"> 1828</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to remove part %d but only %d parts!&quot;</span>, p, <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size() );</div>
<div class="line"><a id="l01829" name="l01829"></a><span class="lineno"> 1829</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01830" name="l01830"></a><span class="lineno"> 1830</span>    }</div>
<div class="line"><a id="l01831" name="l01831"></a><span class="lineno"> 1831</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].removed ) {</div>
<div class="line"><a id="l01832" name="l01832"></a><span class="lineno"> 1832</span>        <span class="comment">/* This happens only when we had to remove part, because it was depending on</span></div>
<div class="line"><a id="l01833" name="l01833"></a><span class="lineno"> 1833</span><span class="comment">         * other part (using recursive remove_part() call) - currently curtain</span></div>
<div class="line"><a id="l01834" name="l01834"></a><span class="lineno"> 1834</span><span class="comment">         * depending on presence of window and seatbelt depending on presence of seat.</span></div>
<div class="line"><a id="l01835" name="l01835"></a><span class="lineno"> 1835</span><span class="comment">         */</span></div>
<div class="line"><a id="l01836" name="l01836"></a><span class="lineno"> 1836</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01837" name="l01837"></a><span class="lineno"> 1837</span>    }</div>
<div class="line"><a id="l01838" name="l01838"></a><span class="lineno"> 1838</span> </div>
<div class="line"><a id="l01839" name="l01839"></a><span class="lineno"> 1839</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> part_loc = <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( p );</div>
<div class="line"><a id="l01840" name="l01840"></a><span class="lineno"> 1840</span> </div>
<div class="line"><a id="l01841" name="l01841"></a><span class="lineno"> 1841</span>    <span class="comment">// Unboard any entities standing on removed boardable parts</span></div>
<div class="line"><a id="l01842" name="l01842"></a><span class="lineno"> 1842</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( p, <span class="stringliteral">&quot;BOARDABLE&quot;</span> ) &amp;&amp; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].has_flag( <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaacbdd8bab66369a907eb2edbd4b209752">vehicle_part::passenger_flag</a> ) ) {</div>
<div class="line"><a id="l01843" name="l01843"></a><span class="lineno"> 1843</span>        handler.<a class="code hl_function" href="classRemovePartHandler.html#afba7974db989165244d598183a5000da">unboard</a>( part_loc );</div>
<div class="line"><a id="l01844" name="l01844"></a><span class="lineno"> 1844</span>    }</div>
<div class="line"><a id="l01845" name="l01845"></a><span class="lineno"> 1845</span> </div>
<div class="line"><a id="l01846" name="l01846"></a><span class="lineno"> 1846</span>    <span class="comment">// If `p` has flag `parent_flag`, remove child with flag `child_flag`</span></div>
<div class="line"><a id="l01847" name="l01847"></a><span class="lineno"> 1847</span>    <span class="comment">// Returns true if removal occurs</span></div>
<div class="line"><a id="l01848" name="l01848"></a><span class="lineno"> 1848</span>    <span class="keyword">const</span> <span class="keyword">auto</span> remove_dependent_part = [&amp;]( <span class="keyword">const</span> std::string &amp; parent_flag,</div>
<div class="line"><a id="l01849" name="l01849"></a><span class="lineno"> 1849</span>    <span class="keyword">const</span> std::string &amp; child_flag ) {</div>
<div class="line"><a id="l01850" name="l01850"></a><span class="lineno"> 1850</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( p, parent_flag ) ) {</div>
<div class="line"><a id="l01851" name="l01851"></a><span class="lineno"> 1851</span>            <span class="keywordtype">int</span> dep = <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( p, child_flag, <span class="keyword">false</span> );</div>
<div class="line"><a id="l01852" name="l01852"></a><span class="lineno"> 1852</span>            <span class="keywordflow">if</span>( dep &gt;= 0 &amp;&amp; !<a class="code hl_variable" href="classvehicle.html#a506fb7b0a17c1578498599e14c173710">magic</a> ) {</div>
<div class="line"><a id="l01853" name="l01853"></a><span class="lineno"> 1853</span>                handler.<a class="code hl_function" href="classRemovePartHandler.html#ac5c226991d6640b4e53b0071fbfd4a2d">add_item_or_charges</a>( part_loc, <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[dep].properties_to_item(), <span class="keyword">false</span> );</div>
<div class="line"><a id="l01854" name="l01854"></a><span class="lineno"> 1854</span>                <a class="code hl_function" href="classvehicle.html#a04638c5234928c4ccca14ddc2059fb11">remove_part</a>( dep, handler );</div>
<div class="line"><a id="l01855" name="l01855"></a><span class="lineno"> 1855</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01856" name="l01856"></a><span class="lineno"> 1856</span>            }</div>
<div class="line"><a id="l01857" name="l01857"></a><span class="lineno"> 1857</span>        }</div>
<div class="line"><a id="l01858" name="l01858"></a><span class="lineno"> 1858</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01859" name="l01859"></a><span class="lineno"> 1859</span>    };</div>
<div class="line"><a id="l01860" name="l01860"></a><span class="lineno"> 1860</span> </div>
<div class="line"><a id="l01861" name="l01861"></a><span class="lineno"> 1861</span>    <span class="comment">// if a windshield is removed (usually destroyed) also remove curtains</span></div>
<div class="line"><a id="l01862" name="l01862"></a><span class="lineno"> 1862</span>    <span class="comment">// attached to it.</span></div>
<div class="line"><a id="l01863" name="l01863"></a><span class="lineno"> 1863</span>    <span class="keywordflow">if</span>( remove_dependent_part( <span class="stringliteral">&quot;WINDOW&quot;</span>, <span class="stringliteral">&quot;CURTAIN&quot;</span> ) || <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( p, <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea2f8c1c03ebea1d9daec3dd65612515e6">VPFLAG_OPAQUE</a> ) ) {</div>
<div class="line"><a id="l01864" name="l01864"></a><span class="lineno"> 1864</span>        handler.<a class="code hl_function" href="classRemovePartHandler.html#a36fc2defea83865b268bdf3375c294eb">set_transparency_cache_dirty</a>( <a class="code hl_variable" href="classvehicle.html#a34630935e46860003c616e0522316f02">sm_pos</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> );</div>
<div class="line"><a id="l01865" name="l01865"></a><span class="lineno"> 1865</span>    }</div>
<div class="line"><a id="l01866" name="l01866"></a><span class="lineno"> 1866</span> </div>
<div class="line"><a id="l01867" name="l01867"></a><span class="lineno"> 1867</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( p, <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea6e2966334b988df6aff778950f24d200">VPFLAG_ROOF</a> ) || <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( p, <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea2f8c1c03ebea1d9daec3dd65612515e6">VPFLAG_OPAQUE</a> ) ) {</div>
<div class="line"><a id="l01868" name="l01868"></a><span class="lineno"> 1868</span>        handler.<a class="code hl_function" href="classRemovePartHandler.html#aba2759e33fa8a7798fbc3bd33988d22a">set_floor_cache_dirty</a>( <a class="code hl_variable" href="classvehicle.html#a34630935e46860003c616e0522316f02">sm_pos</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> + 1 );</div>
<div class="line"><a id="l01869" name="l01869"></a><span class="lineno"> 1869</span>    }</div>
<div class="line"><a id="l01870" name="l01870"></a><span class="lineno"> 1870</span> </div>
<div class="line"><a id="l01871" name="l01871"></a><span class="lineno"> 1871</span>    remove_dependent_part( <span class="stringliteral">&quot;SEAT&quot;</span>, <span class="stringliteral">&quot;SEATBELT&quot;</span> );</div>
<div class="line"><a id="l01872" name="l01872"></a><span class="lineno"> 1872</span>    remove_dependent_part( <span class="stringliteral">&quot;BATTERY_MOUNT&quot;</span>, <span class="stringliteral">&quot;NEEDS_BATTERY_MOUNT&quot;</span> );</div>
<div class="line"><a id="l01873" name="l01873"></a><span class="lineno"> 1873</span> </div>
<div class="line"><a id="l01874" name="l01874"></a><span class="lineno"> 1874</span>    <span class="comment">// Release any animal held by the part</span></div>
<div class="line"><a id="l01875" name="l01875"></a><span class="lineno"> 1875</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].has_flag( <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaaabd3365c4be9551a2c9a5b72039d04c3">vehicle_part::animal_flag</a> ) ) {</div>
<div class="line"><a id="l01876" name="l01876"></a><span class="lineno"> 1876</span>        <a class="code hl_class" href="classitem.html">item</a> base = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].get_base();</div>
<div class="line"><a id="l01877" name="l01877"></a><span class="lineno"> 1877</span>        handler.<a class="code hl_function" href="classRemovePartHandler.html#a5352724026db931c31ebb02f81c1cdcd">spawn_animal_from_part</a>( base, part_loc );</div>
<div class="line"><a id="l01878" name="l01878"></a><span class="lineno"> 1878</span>        <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].set_base( base );</div>
<div class="line"><a id="l01879" name="l01879"></a><span class="lineno"> 1879</span>        <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].remove_flag( <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaaabd3365c4be9551a2c9a5b72039d04c3">vehicle_part::animal_flag</a> );</div>
<div class="line"><a id="l01880" name="l01880"></a><span class="lineno"> 1880</span>    }</div>
<div class="line"><a id="l01881" name="l01881"></a><span class="lineno"> 1881</span> </div>
<div class="line"><a id="l01882" name="l01882"></a><span class="lineno"> 1882</span>    <span class="comment">// Update current engine configuration if needed</span></div>
<div class="line"><a id="l01883" name="l01883"></a><span class="lineno"> 1883</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( p, <span class="stringliteral">&quot;ENGINE&quot;</span> ) &amp;&amp; <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.size() &gt; 1 ) {</div>
<div class="line"><a id="l01884" name="l01884"></a><span class="lineno"> 1884</span>        <span class="keywordtype">bool</span> any_engine_on = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01885" name="l01885"></a><span class="lineno"> 1885</span> </div>
<div class="line"><a id="l01886" name="l01886"></a><span class="lineno"> 1886</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;e : <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a> ) {</div>
<div class="line"><a id="l01887" name="l01887"></a><span class="lineno"> 1887</span>            <span class="keywordflow">if</span>( e != p &amp;&amp; <a class="code hl_function" href="classvehicle.html#a625ad56bb7c71b7305ccbdb411d650db">is_part_on</a>( e ) ) {</div>
<div class="line"><a id="l01888" name="l01888"></a><span class="lineno"> 1888</span>                any_engine_on = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01889" name="l01889"></a><span class="lineno"> 1889</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01890" name="l01890"></a><span class="lineno"> 1890</span>            }</div>
<div class="line"><a id="l01891" name="l01891"></a><span class="lineno"> 1891</span>        }</div>
<div class="line"><a id="l01892" name="l01892"></a><span class="lineno"> 1892</span> </div>
<div class="line"><a id="l01893" name="l01893"></a><span class="lineno"> 1893</span>        <span class="keywordflow">if</span>( !any_engine_on ) {</div>
<div class="line"><a id="l01894" name="l01894"></a><span class="lineno"> 1894</span>            <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01895" name="l01895"></a><span class="lineno"> 1895</span>            <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;e : <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a> ) {</div>
<div class="line"><a id="l01896" name="l01896"></a><span class="lineno"> 1896</span>                <a class="code hl_function" href="classvehicle.html#a94701a6021928fbf7ba68e2ba4ad7cb8">toggle_specific_part</a>( e, <span class="keyword">true</span> );</div>
<div class="line"><a id="l01897" name="l01897"></a><span class="lineno"> 1897</span>            }</div>
<div class="line"><a id="l01898" name="l01898"></a><span class="lineno"> 1898</span>        }</div>
<div class="line"><a id="l01899" name="l01899"></a><span class="lineno"> 1899</span>    }</div>
<div class="line"><a id="l01900" name="l01900"></a><span class="lineno"> 1900</span> </div>
<div class="line"><a id="l01901" name="l01901"></a><span class="lineno"> 1901</span>    <span class="comment">//Remove loot zone if Cargo was removed.</span></div>
<div class="line"><a id="l01902" name="l01902"></a><span class="lineno"> 1902</span>    <span class="keyword">const</span> <span class="keyword">auto</span> lz_iter = <a class="code hl_variable" href="classvehicle.html#a90b6f438b5ae343dab2b131c64293584">loot_zones</a>.find( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].mount );</div>
<div class="line"><a id="l01903" name="l01903"></a><span class="lineno"> 1903</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> no_zone = lz_iter != <a class="code hl_variable" href="classvehicle.html#a90b6f438b5ae343dab2b131c64293584">loot_zones</a>.end();</div>
<div class="line"><a id="l01904" name="l01904"></a><span class="lineno"> 1904</span> </div>
<div class="line"><a id="l01905" name="l01905"></a><span class="lineno"> 1905</span>    <span class="keywordflow">if</span>( no_zone &amp;&amp; <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( p, <span class="stringliteral">&quot;CARGO&quot;</span> ) ) {</div>
<div class="line"><a id="l01906" name="l01906"></a><span class="lineno"> 1906</span>        <span class="comment">// Using the key here (instead of the iterator) will remove all zones on</span></div>
<div class="line"><a id="l01907" name="l01907"></a><span class="lineno"> 1907</span>        <span class="comment">// this mount points regardless of how many there are</span></div>
<div class="line"><a id="l01908" name="l01908"></a><span class="lineno"> 1908</span>        <a class="code hl_variable" href="classvehicle.html#a90b6f438b5ae343dab2b131c64293584">loot_zones</a>.erase( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].mount );</div>
<div class="line"><a id="l01909" name="l01909"></a><span class="lineno"> 1909</span>        <a class="code hl_variable" href="classvehicle.html#af6c2314d1f5b83a04771abea3109a137">zones_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01910" name="l01910"></a><span class="lineno"> 1910</span>    }</div>
<div class="line"><a id="l01911" name="l01911"></a><span class="lineno"> 1911</span>    <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].removed = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01912" name="l01912"></a><span class="lineno"> 1912</span>    <a class="code hl_variable" href="classvehicle.html#ab2aaa937610c71ab4b8ff3ffdfa4902d">removed_part_count</a>++;</div>
<div class="line"><a id="l01913" name="l01913"></a><span class="lineno"> 1913</span> </div>
<div class="line"><a id="l01914" name="l01914"></a><span class="lineno"> 1914</span>    handler.<a class="code hl_function" href="classRemovePartHandler.html#a8bc8af85a20de233ba9fd85eb183b8e2">removed</a>( *<span class="keyword">this</span>, p );</div>
<div class="line"><a id="l01915" name="l01915"></a><span class="lineno"> 1915</span> </div>
<div class="line"><a id="l01916" name="l01916"></a><span class="lineno"> 1916</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> &amp;vp_mount = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].mount;</div>
<div class="line"><a id="l01917" name="l01917"></a><span class="lineno"> 1917</span>    <span class="keyword">const</span> <span class="keyword">auto</span> iter = <a class="code hl_variable" href="classvehicle.html#a7c2d668e2b8f48a53f5c5e94aa2bd408">labels</a>.find( <a class="code hl_struct" href="structlabel.html">label</a>( vp_mount ) );</div>
<div class="line"><a id="l01918" name="l01918"></a><span class="lineno"> 1918</span>    <span class="keywordflow">if</span>( iter != <a class="code hl_variable" href="classvehicle.html#a7c2d668e2b8f48a53f5c5e94aa2bd408">labels</a>.end() &amp;&amp; <a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( vp_mount, <span class="keyword">false</span> ).empty() ) {</div>
<div class="line"><a id="l01919" name="l01919"></a><span class="lineno"> 1919</span>        <a class="code hl_variable" href="classvehicle.html#a7c2d668e2b8f48a53f5c5e94aa2bd408">labels</a>.erase( iter );</div>
<div class="line"><a id="l01920" name="l01920"></a><span class="lineno"> 1920</span>    }</div>
<div class="line"><a id="l01921" name="l01921"></a><span class="lineno"> 1921</span> </div>
<div class="line"><a id="l01922" name="l01922"></a><span class="lineno"> 1922</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;i : <a class="code hl_function" href="classvehicle.html#a983dd9db3cd64078b176a82289e0b260">get_items</a>( p ) ) {</div>
<div class="line"><a id="l01923" name="l01923"></a><span class="lineno"> 1923</span>        <span class="comment">// Note: this can spawn items on the other side of the wall!</span></div>
<div class="line"><a id="l01924" name="l01924"></a><span class="lineno"> 1924</span>        <span class="comment">// TODO: fix this ^^</span></div>
<div class="line"><a id="l01925" name="l01925"></a><span class="lineno"> 1925</span>        <a class="code hl_struct" href="structtripoint.html">tripoint</a> dest( part_loc + <a class="code hl_struct" href="structpoint.html">point</a>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( -3, 3 ), <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( -3, 3 ) ) );</div>
<div class="line"><a id="l01926" name="l01926"></a><span class="lineno"> 1926</span>        <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#a506fb7b0a17c1578498599e14c173710">magic</a> ) {</div>
<div class="line"><a id="l01927" name="l01927"></a><span class="lineno"> 1927</span>            <span class="comment">// This new point might be out of the map bounds.  It&#39;s not</span></div>
<div class="line"><a id="l01928" name="l01928"></a><span class="lineno"> 1928</span>            <span class="comment">// reasonable to try to spawn it outside the currently valid map,</span></div>
<div class="line"><a id="l01929" name="l01929"></a><span class="lineno"> 1929</span>            <span class="comment">// so we pass true here to cause such points to be clamped to the</span></div>
<div class="line"><a id="l01930" name="l01930"></a><span class="lineno"> 1930</span>            <span class="comment">// valid bounds without printing an error (as would normally</span></div>
<div class="line"><a id="l01931" name="l01931"></a><span class="lineno"> 1931</span>            <span class="comment">// occur).</span></div>
<div class="line"><a id="l01932" name="l01932"></a><span class="lineno"> 1932</span>            handler.<a class="code hl_function" href="classRemovePartHandler.html#ac5c226991d6640b4e53b0071fbfd4a2d">add_item_or_charges</a>( dest, i, <span class="keyword">true</span> );</div>
<div class="line"><a id="l01933" name="l01933"></a><span class="lineno"> 1933</span>        }</div>
<div class="line"><a id="l01934" name="l01934"></a><span class="lineno"> 1934</span>    }</div>
<div class="line"><a id="l01935" name="l01935"></a><span class="lineno"> 1935</span>    <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l01936" name="l01936"></a><span class="lineno"> 1936</span>    <a class="code hl_variable" href="classvehicle.html#a62e8354926b0f973a2a0ec1db3deb997">coeff_air_changed</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01937" name="l01937"></a><span class="lineno"> 1937</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#af3cd05d2cba38784e106793c3ca13147">shift_if_needed</a>();</div>
<div class="line"><a id="l01938" name="l01938"></a><span class="lineno"> 1938</span>}</div>
<div class="ttc" id="aclassRemovePartHandler_html_a36fc2defea83865b268bdf3375c294eb"><div class="ttname"><a href="classRemovePartHandler.html#a36fc2defea83865b268bdf3375c294eb">RemovePartHandler::set_transparency_cache_dirty</a></div><div class="ttdeci">virtual void set_transparency_cache_dirty(int z)=0</div></div>
<div class="ttc" id="aclassRemovePartHandler_html_a5352724026db931c31ebb02f81c1cdcd"><div class="ttname"><a href="classRemovePartHandler.html#a5352724026db931c31ebb02f81c1cdcd">RemovePartHandler::spawn_animal_from_part</a></div><div class="ttdeci">virtual void spawn_animal_from_part(item &amp;base, const tripoint &amp;loc)=0</div></div>
<div class="ttc" id="aclassRemovePartHandler_html_a8bc8af85a20de233ba9fd85eb183b8e2"><div class="ttname"><a href="classRemovePartHandler.html#a8bc8af85a20de233ba9fd85eb183b8e2">RemovePartHandler::removed</a></div><div class="ttdeci">virtual void removed(vehicle &amp;veh, int part)=0</div></div>
<div class="ttc" id="aclassRemovePartHandler_html_aba2759e33fa8a7798fbc3bd33988d22a"><div class="ttname"><a href="classRemovePartHandler.html#aba2759e33fa8a7798fbc3bd33988d22a">RemovePartHandler::set_floor_cache_dirty</a></div><div class="ttdeci">virtual void set_floor_cache_dirty(int z)=0</div></div>
<div class="ttc" id="aclassRemovePartHandler_html_ac5c226991d6640b4e53b0071fbfd4a2d"><div class="ttname"><a href="classRemovePartHandler.html#ac5c226991d6640b4e53b0071fbfd4a2d">RemovePartHandler::add_item_or_charges</a></div><div class="ttdeci">virtual void add_item_or_charges(const tripoint &amp;loc, item it, bool permit_oob)=0</div></div>
<div class="ttc" id="aclassRemovePartHandler_html_afba7974db989165244d598183a5000da"><div class="ttname"><a href="classRemovePartHandler.html#afba7974db989165244d598183a5000da">RemovePartHandler::unboard</a></div><div class="ttdeci">virtual void unboard(const tripoint &amp;loc)=0</div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307ea2f8c1c03ebea1d9daec3dd65612515e6"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea2f8c1c03ebea1d9daec3dd65612515e6">VPFLAG_OPAQUE</a></div><div class="ttdeci">@ VPFLAG_OPAQUE</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00043">veh_type.h:43</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307ea6e2966334b988df6aff778950f24d200"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea6e2966334b988df6aff778950f24d200">VPFLAG_ROOF</a></div><div class="ttdeci">@ VPFLAG_ROOF</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00077">veh_type.h:77</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classRemovePartHandler.html#ac5c226991d6640b4e53b0071fbfd4a2d">RemovePartHandler::add_item_or_charges()</a>, <a class="el" href="vehicle_8h_source.html#l00193">vehicle_part::animal_flag</a>, <a class="el" href="vehicle_8h_source.html#l01911">coeff_air_changed</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="vehicle_8h_source.html#l01930">engine_on</a>, <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, <a class="el" href="vehicle_8cpp_source.html#l05288">get_items()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l01092">is_part_on()</a>, <a class="el" href="vehicle_8h_source.html#l01801">labels</a>, <a class="el" href="vehicle_8h_source.html#l01806">loot_zones</a>, <a class="el" href="vehicle_8h_source.html#l01809">magic</a>, <a class="el" href="vehicle_8cpp_source.html#l02875">part_flag()</a>, <a class="el" href="vehicle_8cpp_source.html#l02518">part_with_feature()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>, <a class="el" href="vehicle_8h_source.html#l00192">vehicle_part::passenger_flag</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>, <a class="el" href="classRemovePartHandler.html#a8bc8af85a20de233ba9fd85eb183b8e2">RemovePartHandler::removed()</a>, <a class="el" href="vehicle_8h_source.html#l01830">removed_part_count</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="classRemovePartHandler.html#aba2759e33fa8a7798fbc3bd33988d22a">RemovePartHandler::set_floor_cache_dirty()</a>, <a class="el" href="classRemovePartHandler.html#a36fc2defea83865b268bdf3375c294eb">RemovePartHandler::set_transparency_cache_dirty()</a>, <a class="el" href="vehicle_8cpp_source.html#l06310">shift_if_needed()</a>, <a class="el" href="vehicle_8h_source.html#l01844">sm_pos</a>, <a class="el" href="classRemovePartHandler.html#a5352724026db931c31ebb02f81c1cdcd">RemovePartHandler::spawn_animal_from_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l01022">toggle_specific_part()</a>, <a class="el" href="classRemovePartHandler.html#afba7974db989165244d598183a5000da">RemovePartHandler::unboard()</a>, <a class="el" href="veh__type_8h_source.html#l00043">VPFLAG_OPAQUE</a>, <a class="el" href="veh__type_8h_source.html#l00077">VPFLAG_ROOF</a>, <a class="el" href="point_8h_source.html#l00152">tripoint::z</a>, and <a class="el" href="vehicle_8h_source.html#l01948">zones_dirty</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06338">break_off()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02986">veh_interact::complete_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l06437">damage_direct()</a>, <a class="el" href="vehicle_8cpp_source.html#l05939">invalidate_towing()</a>, <a class="el" href="item__location_8cpp_source.html#l00499">item_location::impl::item_on_vehicle::remove_item()</a>, <a class="el" href="vehicle_8cpp_source.html#l01814">remove_part()</a>, <a class="el" href="veh__utils_8cpp_source.html#l00109">veh_utils::repair_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l06067">shed_loose_parts()</a>, and <a class="el" href="vehicle_8cpp_source.html#l00936">smash()</a>.</p>

</div>
</div>
<a id="a3e69be901ab700c0d31b6b20f1f97f39" name="a3e69be901ab700c0d31b6b20f1f97f39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e69be901ab700c0d31b6b20f1f97f39">&#9670;&nbsp;</a></span>remove_remote_part()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::remove_remote_part </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>part_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove a part from a targeted remote vehicle. </p>
<p >Useful for, e.g. power cables that have a vehicle part on both sides. </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06035">6035</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06036" name="l06036"></a><span class="lineno"> 6036</span>{</div>
<div class="line"><a id="l06037" name="l06037"></a><span class="lineno"> 6037</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[part_num].has_flag( <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaaf8a55dcb9257441627b688ad897a0fa3">vehicle_part::targets_grid</a> ) ) {</div>
<div class="line"><a id="l06038" name="l06038"></a><span class="lineno"> 6038</span>        <a class="code hl_class" href="classvehicle__connector__tile.html">vehicle_connector_tile</a> *connector =</div>
<div class="line"><a id="l06039" name="l06039"></a><span class="lineno"> 6039</span>            <a class="code hl_function" href="namespaceactive__tiles.html#a8ee11199630bf6a315debc6f64d0c082">active_tiles::furn_at&lt;vehicle_connector_tile&gt;</a>( <a class="code hl_typedef" href="coordinates_8h.html#a25195af12949fae51d496c1fbd549871">tripoint_abs_ms</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[part_num].target.second ) );</div>
<div class="line"><a id="l06040" name="l06040"></a><span class="lineno"> 6040</span>        <span class="keywordflow">if</span>( connector != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l06041" name="l06041"></a><span class="lineno"> 6041</span>            <span class="keyword">auto</span> &amp;vehs = connector-&gt;<a class="code hl_variable" href="classvehicle__connector__tile.html#a9e25418fb2af615f91fa8a6ad945e3d6">connected_vehicles</a>;</div>
<div class="line"><a id="l06042" name="l06042"></a><span class="lineno"> 6042</span>            <span class="keyword">auto</span> iter = <a class="code hl_function" href="namespacedetail.html#ad06b74f7502b63cbab323bba1ca3f72b">std::find</a>( vehs.begin(), vehs.end(), <a class="code hl_class" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.getabs( <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>() ) ) );</div>
<div class="line"><a id="l06043" name="l06043"></a><span class="lineno"> 6043</span>            <span class="keywordflow">if</span>( iter != vehs.end() ) {</div>
<div class="line"><a id="l06044" name="l06044"></a><span class="lineno"> 6044</span>                vehs.erase( iter );</div>
<div class="line"><a id="l06045" name="l06045"></a><span class="lineno"> 6045</span>            }</div>
<div class="line"><a id="l06046" name="l06046"></a><span class="lineno"> 6046</span>        }</div>
<div class="line"><a id="l06047" name="l06047"></a><span class="lineno"> 6047</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l06048" name="l06048"></a><span class="lineno"> 6048</span>    }</div>
<div class="line"><a id="l06049" name="l06049"></a><span class="lineno"> 6049</span>    <span class="keyword">auto</span> veh = <a class="code hl_function" href="classvehicle.html#a9f7d91110eca49a43877317c08a99bf9">find_vehicle</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[part_num].target.second );</div>
<div class="line"><a id="l06050" name="l06050"></a><span class="lineno"> 6050</span> </div>
<div class="line"><a id="l06051" name="l06051"></a><span class="lineno"> 6051</span>    <span class="comment">// If the target vehicle is still there, ask it to remove its part</span></div>
<div class="line"><a id="l06052" name="l06052"></a><span class="lineno"> 6052</span>    <span class="keywordflow">if</span>( veh != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l06053" name="l06053"></a><span class="lineno"> 6053</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> local_abs = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.getabs( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( part_num ) );</div>
<div class="line"><a id="l06054" name="l06054"></a><span class="lineno"> 6054</span> </div>
<div class="line"><a id="l06055" name="l06055"></a><span class="lineno"> 6055</span>        <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> j = 0; j &lt; veh-&gt;loose_parts.size(); j++ ) {</div>
<div class="line"><a id="l06056" name="l06056"></a><span class="lineno"> 6056</span>            <span class="keywordtype">int</span> remote_partnum = veh-&gt;loose_parts[j];</div>
<div class="line"><a id="l06057" name="l06057"></a><span class="lineno"> 6057</span>            <span class="keyword">auto</span> remote_part = &amp;veh-&gt;parts[remote_partnum];</div>
<div class="line"><a id="l06058" name="l06058"></a><span class="lineno"> 6058</span> </div>
<div class="line"><a id="l06059" name="l06059"></a><span class="lineno"> 6059</span>            <span class="keywordflow">if</span>( veh-&gt;part_flag( remote_partnum, <span class="stringliteral">&quot;POWER_TRANSFER&quot;</span> ) &amp;&amp; remote_part-&gt;target.first == local_abs ) {</div>
<div class="line"><a id="l06060" name="l06060"></a><span class="lineno"> 6060</span>                veh-&gt;remove_part( remote_partnum );</div>
<div class="line"><a id="l06061" name="l06061"></a><span class="lineno"> 6061</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l06062" name="l06062"></a><span class="lineno"> 6062</span>            }</div>
<div class="line"><a id="l06063" name="l06063"></a><span class="lineno"> 6063</span>        }</div>
<div class="line"><a id="l06064" name="l06064"></a><span class="lineno"> 6064</span>    }</div>
<div class="line"><a id="l06065" name="l06065"></a><span class="lineno"> 6065</span>}</div>
<div class="ttc" id="aclassvehicle__connector__tile_html"><div class="ttname"><a href="classvehicle__connector__tile.html">vehicle_connector_tile</a></div><div class="ttdef"><b>Definition:</b> <a href="active__tile__data__def_8h_source.html#l00092">active_tile_data_def.h:93</a></div></div>
<div class="ttc" id="aclassvehicle__connector__tile_html_a9e25418fb2af615f91fa8a6ad945e3d6"><div class="ttname"><a href="classvehicle__connector__tile.html#a9e25418fb2af615f91fa8a6ad945e3d6">vehicle_connector_tile::connected_vehicles</a></div><div class="ttdeci">std::vector&lt; tripoint_abs_ms &gt; connected_vehicles</div><div class="ttdef"><b>Definition:</b> <a href="active__tile__data__def_8h_source.html#l00095">active_tile_data_def.h:95</a></div></div>
<div class="ttc" id="anamespaceactive__tiles_html_a8ee11199630bf6a315debc6f64d0c082"><div class="ttname"><a href="namespaceactive__tiles.html#a8ee11199630bf6a315debc6f64d0c082">active_tiles::furn_at&lt; vehicle_connector_tile &gt;</a></div><div class="ttdeci">template vehicle_connector_tile * furn_at&lt; vehicle_connector_tile &gt;(const tripoint_abs_ms &amp;)</div></div>
<div class="ttc" id="astructvehicle__part_html_a6944258e64f01a23d5ea254ad2fe71eaaf8a55dcb9257441627b688ad897a0fa3"><div class="ttname"><a href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaaf8a55dcb9257441627b688ad897a0fa3">vehicle_part::targets_grid</a></div><div class="ttdeci">@ targets_grid</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00197">vehicle.h:197</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="active__tile__data__def_8h_source.html#l00095">vehicle_connector_tile::connected_vehicles</a>, <a class="el" href="fmtlib__format_8h_source.html#l03355">detail::find()</a>, <a class="el" href="vehicle_8cpp_source.html#l04720">find_vehicle()</a>, <a class="el" href="namespaceactive__tiles.html#a8ee11199630bf6a315debc6f64d0c082">active_tiles::furn_at&lt; vehicle_connector_tile &gt;()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l03101">global_pos3()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="vehicle_8h_source.html#l00197">vehicle_part::targets_grid</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02986">veh_interact::complete_vehicle()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06067">shed_loose_parts()</a>.</p>

</div>
</div>
<a id="a653f5f2bff7517c56044fdaa16b73ed6" name="a653f5f2bff7517c56044fdaa16b73ed6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a653f5f2bff7517c56044fdaa16b73ed6">&#9670;&nbsp;</a></span>remove_tracked_flag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::remove_tracked_flag </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01990">1990</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01991" name="l01991"></a><span class="lineno"> 1991</span>{</div>
<div class="line"><a id="l01992" name="l01992"></a><span class="lineno"> 1992</span>    <span class="keywordflow">for</span>( <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l01993" name="l01993"></a><span class="lineno"> 1993</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.<a class="code hl_variable" href="structvehicle__part.html#a4ec92872c2987158066d420e8e76f280">carry_names</a>.empty() ) {</div>
<div class="line"><a id="l01994" name="l01994"></a><span class="lineno"> 1994</span>            <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.<a class="code hl_function" href="structvehicle__part.html#a86c3ad22b1284273f14e63ce726d685d">remove_flag</a>( <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaa1a8e65b4ccc32e8654446910b6a5c51e">vehicle_part::tracked_flag</a> );</div>
<div class="line"><a id="l01995" name="l01995"></a><span class="lineno"> 1995</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01996" name="l01996"></a><span class="lineno"> 1996</span>            <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.<a class="code hl_variable" href="structvehicle__part.html#a4ec92872c2987158066d420e8e76f280">carry_names</a>.pop();</div>
<div class="line"><a id="l01997" name="l01997"></a><span class="lineno"> 1997</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.<a class="code hl_variable" href="structvehicle__part.html#a4ec92872c2987158066d420e8e76f280">carry_names</a>.empty() ) {</div>
<div class="line"><a id="l01998" name="l01998"></a><span class="lineno"> 1998</span>                <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.<a class="code hl_function" href="structvehicle__part.html#a86c3ad22b1284273f14e63ce726d685d">remove_flag</a>( <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaa1a8e65b4ccc32e8654446910b6a5c51e">vehicle_part::tracked_flag</a> );</div>
<div class="line"><a id="l01999" name="l01999"></a><span class="lineno"> 1999</span>            }</div>
<div class="line"><a id="l02000" name="l02000"></a><span class="lineno"> 2000</span>        }</div>
<div class="line"><a id="l02001" name="l02001"></a><span class="lineno"> 2001</span>    }</div>
<div class="line"><a id="l02002" name="l02002"></a><span class="lineno"> 2002</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l00226">vehicle_part::carry_names</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8h_source.html#l00214">vehicle_part::remove_flag()</a>, and <a class="el" href="vehicle_8h_source.html#l00196">vehicle_part::tracked_flag</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l02004">remove_carried_vehicle()</a>.</p>

</div>
</div>
<a id="abfc3934d35e8ba27600500d0e48f0d4d" name="abfc3934d35e8ba27600500d0e48f0d4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfc3934d35e8ba27600500d0e48f0d4d">&#9670;&nbsp;</a></span>restore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::restore </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06547">6547</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06548" name="l06548"></a><span class="lineno"> 6548</span>{</div>
<div class="line"><a id="l06549" name="l06549"></a><span class="lineno"> 6549</span>    std::istringstream veh_data( data );</div>
<div class="line"><a id="l06550" name="l06550"></a><span class="lineno"> 6550</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l06551" name="l06551"></a><span class="lineno"> 6551</span>        <a class="code hl_class" href="classJsonIn.html">JsonIn</a> json( veh_data );</div>
<div class="line"><a id="l06552" name="l06552"></a><span class="lineno"> 6552</span>        <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.clear();</div>
<div class="line"><a id="l06553" name="l06553"></a><span class="lineno"> 6553</span>        json.read( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> );</div>
<div class="line"><a id="l06554" name="l06554"></a><span class="lineno"> 6554</span>    } <span class="keywordflow">catch</span>( <span class="keyword">const</span> <a class="code hl_class" href="classJsonError.html">JsonError</a> &amp;e ) {</div>
<div class="line"><a id="l06555" name="l06555"></a><span class="lineno"> 6555</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Error restoring vehicle: %s&quot;</span>, e.<a class="code hl_function" href="classJsonError.html#a6e7c0db4458ef6049d21735fb443e212">c_str</a>() );</div>
<div class="line"><a id="l06556" name="l06556"></a><span class="lineno"> 6556</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l06557" name="l06557"></a><span class="lineno"> 6557</span>    }</div>
<div class="line"><a id="l06558" name="l06558"></a><span class="lineno"> 6558</span>    <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l06559" name="l06559"></a><span class="lineno"> 6559</span>    <a class="code hl_variable" href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">face</a>.<a class="code hl_function" href="classtileray.html#ab643ca3c50332c73009031331e7c8026">init</a>( 0_degrees );</div>
<div class="line"><a id="l06560" name="l06560"></a><span class="lineno"> 6560</span>    <a class="code hl_variable" href="classvehicle.html#af366981a584e12d25133fb479d47de33">turn_dir</a> = 0_degrees;</div>
<div class="line"><a id="l06561" name="l06561"></a><span class="lineno"> 6561</span>    <a class="code hl_function" href="classvehicle.html#a1380ff85985897f9f8a34eba538e04db">turn</a>( 0_degrees );</div>
<div class="line"><a id="l06562" name="l06562"></a><span class="lineno"> 6562</span>    <a class="code hl_function" href="classvehicle.html#a3df213ef35c4a1801ef30d1f65195f40">precalc_mounts</a>( 0, <a class="code hl_variable" href="classvehicle.html#a709da7b758c18d51b79311eea6eaca59">pivot_rotation</a>[0], <a class="code hl_variable" href="classvehicle.html#afd4e8e8471b17450205d827dee8a41a5">pivot_anchor</a>[0] );</div>
<div class="line"><a id="l06563" name="l06563"></a><span class="lineno"> 6563</span>    <a class="code hl_function" href="classvehicle.html#a3df213ef35c4a1801ef30d1f65195f40">precalc_mounts</a>( 1, <a class="code hl_variable" href="classvehicle.html#a709da7b758c18d51b79311eea6eaca59">pivot_rotation</a>[1], <a class="code hl_variable" href="classvehicle.html#afd4e8e8471b17450205d827dee8a41a5">pivot_anchor</a>[1] );</div>
<div class="line"><a id="l06564" name="l06564"></a><span class="lineno"> 6564</span>    <a class="code hl_variable" href="classvehicle.html#a987b54408280dc6a74da8c857907faf2">last_update</a> = <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>;</div>
<div class="line"><a id="l06565" name="l06565"></a><span class="lineno"> 6565</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l06566" name="l06566"></a><span class="lineno"> 6566</span>}</div>
<div class="ttc" id="aclassJsonIn_html"><div class="ttname"><a href="classJsonIn.html">JsonIn</a></div><div class="ttdef"><b>Definition:</b> <a href="json_8h_source.html#l00176">json.h:177</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="json_8h_source.html#l00054">JsonError::c_str()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="vehicle_8h_source.html#l01891">face</a>, <a class="el" href="tileray_8cpp_source.html#l00027">tileray::init()</a>, <a class="el" href="vehicle_8h_source.html#l01851">last_update</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8h_source.html#l01889">pivot_anchor</a>, <a class="el" href="vehicle_8h_source.html#l01883">pivot_rotation</a>, <a class="el" href="vehicle_8cpp_source.html#l03024">precalc_mounts()</a>, <a class="el" href="json_8cpp_source.html#l01485">JsonIn::read()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00324">turn()</a>, and <a class="el" href="vehicle_8h_source.html#l01870">turn_dir</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse_8cpp_source.html#l05639">iuse::unfold_generic()</a>.</p>

</div>
</div>
<a id="a898e68c15af3168bb84a22a71a454c70" name="a898e68c15af3168bb84a22a71a454c70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a898e68c15af3168bb84a22a71a454c70">&#9670;&nbsp;</a></span>roof_at_part()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::roof_at_part </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02976">2976</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02977" name="l02977"></a><span class="lineno"> 2977</span>{</div>
<div class="line"><a id="l02978" name="l02978"></a><span class="lineno"> 2978</span>    std::vector&lt;int&gt; parts_in_square = <a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].mount, <span class="keyword">true</span> );</div>
<div class="line"><a id="l02979" name="l02979"></a><span class="lineno"> 2979</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keywordtype">int</span> p : parts_in_square ) {</div>
<div class="line"><a id="l02980" name="l02980"></a><span class="lineno"> 2980</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( p ).location == <span class="stringliteral">&quot;on_roof&quot;</span> || <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( p, <span class="stringliteral">&quot;ROOF&quot;</span> ) ) {</div>
<div class="line"><a id="l02981" name="l02981"></a><span class="lineno"> 2981</span>            <span class="keywordflow">return</span> p;</div>
<div class="line"><a id="l02982" name="l02982"></a><span class="lineno"> 2982</span>        }</div>
<div class="line"><a id="l02983" name="l02983"></a><span class="lineno"> 2983</span>    }</div>
<div class="line"><a id="l02984" name="l02984"></a><span class="lineno"> 2984</span> </div>
<div class="line"><a id="l02985" name="l02985"></a><span class="lineno"> 2985</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l02986" name="l02986"></a><span class="lineno"> 2986</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8cpp_source.html#l02875">part_flag()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l06046">map::draw_from_above()</a>, and <a class="el" href="map_8cpp_source.html#l01872">map::valid_move()</a>.</p>

</div>
</div>
<a id="a36e9c29cbead2213b56dd6dc171d9ade" name="a36e9c29cbead2213b56dd6dc171d9ade"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36e9c29cbead2213b56dd6dc171d9ade">&#9670;&nbsp;</a></span>rotated_center_of_mass()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structpoint.html">point</a> &amp; vehicle::rotated_center_of_mass </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03147">3147</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03148" name="l03148"></a><span class="lineno"> 3148</span>{</div>
<div class="line"><a id="l03149" name="l03149"></a><span class="lineno"> 3149</span>    <span class="comment">// TODO: Bring back caching of this point</span></div>
<div class="line"><a id="l03150" name="l03150"></a><span class="lineno"> 3150</span>    <a class="code hl_function" href="classvehicle.html#af3bb85693d41273a49e87ab79cb61462">calc_mass_center</a>( <span class="keyword">true</span> );</div>
<div class="line"><a id="l03151" name="l03151"></a><span class="lineno"> 3151</span> </div>
<div class="line"><a id="l03152" name="l03152"></a><span class="lineno"> 3152</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#a1a55c996486f67a46b7978f13cd1d0e1">mass_center_precalc</a>;</div>
<div class="line"><a id="l03153" name="l03153"></a><span class="lineno"> 3153</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l06794">calc_mass_center()</a>, and <a class="el" href="vehicle_8h_source.html#l01822">mass_center_precalc</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l00741">map::vehicle_vehicle_collision()</a>.</p>

</div>
</div>
<a id="a1e900eef075e4239bf1faec947f60c1d" name="a1e900eef075e4239bf1faec947f60c1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e900eef075e4239bf1faec947f60c1d">&#9670;&nbsp;</a></span>rotor_acceleration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::rotor_acceleration </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fueled</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>at_vel_in_vmi</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03396">3396</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03397" name="l03397"></a><span class="lineno"> 3397</span>{</div>
<div class="line"><a id="l03398" name="l03398"></a><span class="lineno"> 3398</span>    ( void )at_vel_in_vmi;</div>
<div class="line"><a id="l03399" name="l03399"></a><span class="lineno"> 3399</span>    <span class="keywordflow">if</span>( !( <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> || <a class="code hl_variable" href="classvehicle.html#a0a35b7f917fdb08e70a78315cc968f86">is_flying</a> ) ) {</div>
<div class="line"><a id="l03400" name="l03400"></a><span class="lineno"> 3400</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l03401" name="l03401"></a><span class="lineno"> 3401</span>    }</div>
<div class="line"><a id="l03402" name="l03402"></a><span class="lineno"> 3402</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> accel_at_vel = 100 * <a class="code hl_function" href="classvehicle.html#af531084b2df70f7d6458cb7c3093bbcf">lift_thrust_of_rotorcraft</a>( fueled ) / <a class="code hl_function" href="namespaceunits.html#afbf21a7601bd939c196667fc0b020111">to_kilogram</a>( <a class="code hl_function" href="classvehicle.html#a5a7d83716bf73d4b58d265b626872d01">total_mass</a>() );</div>
<div class="line"><a id="l03403" name="l03403"></a><span class="lineno"> 3403</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="vehicle_8h.html#a8001239e356cfe527444f6019ee90205">cmps_to_vmiph</a>( accel_at_vel );</div>
<div class="line"><a id="l03404" name="l03404"></a><span class="lineno"> 3404</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle__move_8cpp_source.html#l00077">cmps_to_vmiph()</a>, <a class="el" href="vehicle_8h_source.html#l01930">engine_on</a>, <a class="el" href="vehicle_8h_source.html#l01917">is_flying</a>, <a class="el" href="vehicle_8cpp_source.html#l03995">lift_thrust_of_rotorcraft()</a>, <a class="el" href="units__mass_8h_source.html#l00073">units::to_kilogram()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03126">total_mass()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03462">acceleration()</a>, and <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>.</p>

</div>
</div>
<a id="aae7ca2fef868c46f3f9181830a3bfa6d" name="aae7ca2fef868c46f3f9181830a3bfa6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae7ca2fef868c46f3f9181830a3bfa6d">&#9670;&nbsp;</a></span>safe_ground_velocity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::safe_ground_velocity </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fueled</em> = <code>true</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03567">3567</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03568" name="l03568"></a><span class="lineno"> 3568</span>{</div>
<div class="line"><a id="l03569" name="l03569"></a><span class="lineno"> 3569</span>    <span class="keywordtype">int</span> effective_engine_w = <a class="code hl_function" href="classvehicle.html#a73db9a09464720b32da8e3f214475a8e">total_power_w</a>( fueled, <span class="keyword">true</span> );</div>
<div class="line"><a id="l03570" name="l03570"></a><span class="lineno"> 3570</span>    <span class="keywordtype">double</span> c_rolling_drag = <a class="code hl_function" href="classvehicle.html#acc7fb8b935b2f6f3d26efaf0fae16230">coeff_rolling_drag</a>();</div>
<div class="line"><a id="l03571" name="l03571"></a><span class="lineno"> 3571</span>    <span class="keywordtype">double</span> safe_in_mps = <a class="code hl_function" href="vehicle_8cpp.html#a1c1bd01d6fc9c8984a106aef75ae294a">simple_cubic_solution</a>( <a class="code hl_function" href="classvehicle.html#a8997e3518316057cde55f9ecb444b8f0">coeff_air_drag</a>(), c_rolling_drag,</div>
<div class="line"><a id="l03572" name="l03572"></a><span class="lineno"> 3572</span>                         c_rolling_drag * <a class="code hl_variable" href="namespacevehicles.html#a38d998781d2493479832c6bff33e2f32">vehicles::rolling_constant_to_variable</a>,</div>
<div class="line"><a id="l03573" name="l03573"></a><span class="lineno"> 3573</span>                         -effective_engine_w );</div>
<div class="line"><a id="l03574" name="l03574"></a><span class="lineno"> 3574</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="vehicle_8h.html#a3bf51af37129f24d376a74ca56b2644e">mps_to_vmiph</a>( safe_in_mps );</div>
<div class="line"><a id="l03575" name="l03575"></a><span class="lineno"> 3575</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l03789">coeff_air_drag()</a>, <a class="el" href="vehicle_8cpp_source.html#l03928">coeff_rolling_drag()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00066">mps_to_vmiph()</a>, <a class="el" href="vehicle_8h_source.html#l00067">vehicles::rolling_constant_to_variable</a>, <a class="el" href="vehicle_8cpp_source.html#l03431">simple_cubic_solution()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03333">total_power_w()</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03593">safe_velocity()</a>.</p>

</div>
</div>
<a id="adfe723d18ff825cd4f9fe3a0aeac11da" name="adfe723d18ff825cd4f9fe3a0aeac11da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfe723d18ff825cd4f9fe3a0aeac11da">&#9670;&nbsp;</a></span>safe_rotor_velocity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::safe_rotor_velocity </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fueled</em> = <code>true</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03577">3577</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03578" name="l03578"></a><span class="lineno"> 3578</span>{</div>
<div class="line"><a id="l03579" name="l03579"></a><span class="lineno"> 3579</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> max_air_mps = std::sqrt( <a class="code hl_function" href="classvehicle.html#af531084b2df70f7d6458cb7c3093bbcf">lift_thrust_of_rotorcraft</a>( fueled,</div>
<div class="line"><a id="l03580" name="l03580"></a><span class="lineno"> 3580</span>                                          <span class="keyword">true</span> ) / <a class="code hl_function" href="classvehicle.html#a8997e3518316057cde55f9ecb444b8f0">coeff_air_drag</a>() );</div>
<div class="line"><a id="l03581" name="l03581"></a><span class="lineno"> 3581</span>    <span class="keywordflow">return</span> std::min( 22501, <a class="code hl_function" href="vehicle_8h.html#a3bf51af37129f24d376a74ca56b2644e">mps_to_vmiph</a>( max_air_mps ) );</div>
<div class="line"><a id="l03582" name="l03582"></a><span class="lineno"> 3582</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l03789">coeff_air_drag()</a>, <a class="el" href="vehicle_8cpp_source.html#l03995">lift_thrust_of_rotorcraft()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00066">mps_to_vmiph()</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03593">safe_velocity()</a>.</p>

</div>
</div>
<a id="ad38e05507056b3b3da5a5a5e482adba4" name="ad38e05507056b3b3da5a5a5e482adba4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad38e05507056b3b3da5a5a5e482adba4">&#9670;&nbsp;</a></span>safe_velocity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::safe_velocity </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fueled</em> = <code>true</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03593">3593</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03594" name="l03594"></a><span class="lineno"> 3594</span>{</div>
<div class="line"><a id="l03595" name="l03595"></a><span class="lineno"> 3595</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a0a35b7f917fdb08e70a78315cc968f86">is_flying</a> &amp;&amp; <a class="code hl_function" href="classvehicle.html#a292961ab33a42bf495d19b8692f6f105">is_rotorcraft</a>() ) {</div>
<div class="line"><a id="l03596" name="l03596"></a><span class="lineno"> 3596</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#adfe723d18ff825cd4f9fe3a0aeac11da">safe_rotor_velocity</a>( fueled );</div>
<div class="line"><a id="l03597" name="l03597"></a><span class="lineno"> 3597</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a0ede4cc2a97a8305b1f06817d0d6cdf8">is_watercraft</a>() ) {</div>
<div class="line"><a id="l03598" name="l03598"></a><span class="lineno"> 3598</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#af6d107ed282fd1226e070fb19d7acf74">safe_water_velocity</a>( fueled );</div>
<div class="line"><a id="l03599" name="l03599"></a><span class="lineno"> 3599</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03600" name="l03600"></a><span class="lineno"> 3600</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#aae7ca2fef868c46f3f9181830a3bfa6d">safe_ground_velocity</a>( fueled );</div>
<div class="line"><a id="l03601" name="l03601"></a><span class="lineno"> 3601</span>    }</div>
<div class="line"><a id="l03602" name="l03602"></a><span class="lineno"> 3602</span>}</div>
<div class="ttc" id="aclassvehicle_html_aae7ca2fef868c46f3f9181830a3bfa6d"><div class="ttname"><a href="classvehicle.html#aae7ca2fef868c46f3f9181830a3bfa6d">vehicle::safe_ground_velocity</a></div><div class="ttdeci">int safe_ground_velocity(bool fueled=true) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03567">vehicle.cpp:3567</a></div></div>
<div class="ttc" id="aclassvehicle_html_adfe723d18ff825cd4f9fe3a0aeac11da"><div class="ttname"><a href="classvehicle.html#adfe723d18ff825cd4f9fe3a0aeac11da">vehicle::safe_rotor_velocity</a></div><div class="ttdeci">int safe_rotor_velocity(bool fueled=true) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03577">vehicle.cpp:3577</a></div></div>
<div class="ttc" id="aclassvehicle_html_af6d107ed282fd1226e070fb19d7acf74"><div class="ttname"><a href="classvehicle.html#af6d107ed282fd1226e070fb19d7acf74">vehicle::safe_water_velocity</a></div><div class="ttdeci">int safe_water_velocity(bool fueled=true) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03585">vehicle.cpp:3585</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01917">is_flying</a>, <a class="el" href="vehicle_8cpp_source.html#l04017">is_rotorcraft()</a>, <a class="el" href="vehicle_8cpp_source.html#l04037">is_watercraft()</a>, <a class="el" href="vehicle_8cpp_source.html#l03567">safe_ground_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l03577">safe_rotor_velocity()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03585">safe_water_velocity()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00369">control_engines()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00285">cruise_thrust()</a>, <a class="el" href="vehicle_8cpp_source.html#l00816">drive_to_local_target()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04126">strain()</a>.</p>

</div>
</div>
<a id="af6d107ed282fd1226e070fb19d7acf74" name="af6d107ed282fd1226e070fb19d7acf74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6d107ed282fd1226e070fb19d7acf74">&#9670;&nbsp;</a></span>safe_water_velocity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::safe_water_velocity </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fueled</em> = <code>true</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03585">3585</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03586" name="l03586"></a><span class="lineno"> 3586</span>{</div>
<div class="line"><a id="l03587" name="l03587"></a><span class="lineno"> 3587</span>    <span class="keywordtype">int</span> total_engine_w = <a class="code hl_function" href="classvehicle.html#a73db9a09464720b32da8e3f214475a8e">total_power_w</a>( fueled, <span class="keyword">true</span> );</div>
<div class="line"><a id="l03588" name="l03588"></a><span class="lineno"> 3588</span>    <span class="keywordtype">double</span> total_drag = <a class="code hl_function" href="classvehicle.html#ae97aeac27584b839105a68f12eb1f7a1">coeff_water_drag</a>() + <a class="code hl_function" href="classvehicle.html#a8997e3518316057cde55f9ecb444b8f0">coeff_air_drag</a>();</div>
<div class="line"><a id="l03589" name="l03589"></a><span class="lineno"> 3589</span>    <span class="keywordtype">double</span> safe_in_mps = std::cbrt( total_engine_w / total_drag );</div>
<div class="line"><a id="l03590" name="l03590"></a><span class="lineno"> 3590</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="vehicle_8h.html#a3bf51af37129f24d376a74ca56b2644e">mps_to_vmiph</a>( safe_in_mps );</div>
<div class="line"><a id="l03591" name="l03591"></a><span class="lineno"> 3591</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l03789">coeff_air_drag()</a>, <a class="el" href="vehicle_8cpp_source.html#l04047">coeff_water_drag()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00066">mps_to_vmiph()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03333">total_power_w()</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03593">safe_velocity()</a>.</p>

</div>
</div>
<a id="a17aa6419424492de3019d606da710d29" name="a17aa6419424492de3019d606da710d29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17aa6419424492de3019d606da710d29">&#9670;&nbsp;</a></span>select_engine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::select_engine </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l00433">433</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>{</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>    <a class="code hl_class" href="classuilist.html">uilist</a> tmenu;</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>    tmenu.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Toggle which?&quot;</span> );</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>    <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> x = 0; x &lt; <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.size(); x++ ) {</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>        <span class="keywordtype">int</span> e = <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[ x ];</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> &amp;fuel_id : <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( e ).engine_fuel_opts() ) {</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>            <span class="keywordtype">bool</span> is_active = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ e ].enabled &amp;&amp; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ e ].fuel_current() == fuel_id;</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>            <span class="keywordtype">bool</span> is_available = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ e ].is_available() &amp;&amp;</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>                                ( <a class="code hl_function" href="classvehicle.html#a850e134844078b5efa1084fc1ebbeec0">is_perpetual_type</a>( x ) || fuel_id == <a class="code hl_variable" href="vehicle__use_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a> ||</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>                                  <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( fuel_id ) );</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>            tmenu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( i++, is_available, -1, <span class="stringliteral">&quot;[%s] %s %s&quot;</span>,</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>                            is_active ? <span class="stringliteral">&quot;x&quot;</span> : <span class="stringliteral">&quot; &quot;</span>, <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ e ].<a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>(),</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>                            <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( fuel_id ) );</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>        }</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>    }</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>    tmenu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>    <span class="keywordflow">return</span> tmenu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>}</div>
<div class="ttc" id="avehicle__use_8cpp_html_af54ee122fbd5cf94c6ef8bca7e67c8e8"><div class="ttname"><a href="vehicle__use_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a></div><div class="ttdeci">static const itype_id fuel_type_muscle(&quot;muscle&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="ui_8cpp_source.html#l00932">uilist::addentry()</a>, <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, <a class="el" href="vehicle_8cpp_source.html#l03179">fuel_left()</a>, <a class="el" href="vehicle__use_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a>, <a class="el" href="vehicle_8cpp_source.html#l01081">is_perpetual_type()</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="item_8cpp_source.html#l09749">item::nname()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="ui_8cpp_source.html#l00828">uilist::query()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, and <a class="el" href="ui_8h_source.html#l00320">uilist::text</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00369">control_engines()</a>.</p>

</div>
</div>
<a id="ac8a5271d6aeae28a1bd341800cc5254d" name="ac8a5271d6aeae28a1bd341800cc5254d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8a5271d6aeae28a1bd341800cc5254d">&#9670;&nbsp;</a></span>selfdrive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::selfdrive </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>vehicle is driving itself </p>
Dexterity increases chance of regaining control of a vehicle Driving increases chance of regaining control of a vehicle 
<p class="definition">Definition at line <a class="el" href="vehicle__move_8cpp_source.html#l00933">933</a> of file <a class="el" href="vehicle__move_8cpp_source.html">vehicle_move.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>{</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#ac24aba962fd53d1a87bf57b52ce40508">is_towed</a>() &amp;&amp; !<a class="code hl_variable" href="classvehicle.html#a506fb7b0a17c1578498599e14c173710">magic</a> ) {</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>        <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> e = 0; e &lt; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size(); e++ ) {</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ e ];</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>            <span class="keywordflow">if</span>( vp.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_variable" href="classvpart__info.html#ae9c50d26b3cc88604ae85573ee6599cd">fuel_type</a> == <a class="code hl_variable" href="vehicle__move_8cpp.html#a944ba9be1d911a61e9ca62af989355fd">fuel_type_animal</a> ) {</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>                <a class="code hl_class" href="classmonster.html">monster</a> *mon = <a class="code hl_function" href="classvehicle.html#ab266c3250ffece69b5c2ddc9897d80d3">get_pet</a>( e );</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>                <span class="keywordflow">if</span>( !mon || !mon-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="vehicle__move_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a> ) || !mon-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="vehicle__move_8cpp.html#a02a4844a7fb68c13a34dc40b0a9e94d8">effect_pet</a> ) ) {</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>                    <a class="code hl_variable" href="classvehicle.html#a26f98c384048e03538bca10e4f26905d">is_following</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>                }</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>            }</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>        }</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>    }</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::angle</a> turn_delta = 15_degrees * p.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a>;</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> handling_diff = <a class="code hl_function" href="classvehicle.html#aedeb37c9ce1c25bd8b9765e91ef6e502">handling_difficulty</a>();</div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>    <span class="keywordflow">if</span>( turn_delta != 0_degrees ) {</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>        <span class="keywordtype">float</span> eff = <a class="code hl_function" href="classvehicle.html#aec2fcbe01499d105316d14c8b99107a2">steering_effectiveness</a>();</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>        <span class="keywordflow">if</span>( eff == -2 ) {</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>        }</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span> </div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>        <span class="keywordflow">if</span>( eff &lt; 0 ) {</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>        }</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span> </div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>        <span class="keywordflow">if</span>( eff == 0 ) {</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>        }</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>        <a class="code hl_function" href="classvehicle.html#a1380ff85985897f9f8a34eba538e04db">turn</a>( turn_delta );</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>    }</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>    <span class="keywordflow">if</span>( p.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> != 0 ) {</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>        <span class="keywordtype">int</span> thr_amount = 100 * ( std::abs( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> ) &lt; 2000 ? 4 : 5 );</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#abdf6601268460dc437ef079590deb33b">cruise_on</a> ) {</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>            <a class="code hl_function" href="classvehicle.html#ac9e0d3482a62d5ac5ec8e5fc83cfaa4a">cruise_thrust</a>( -p.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> * thr_amount );</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>            <a class="code hl_function" href="classvehicle.html#a0b298dcb96f6d82ac696f38d9a89868b">thrust</a>( -p.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> );</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>        }</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>    }</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>    <span class="comment">// TODO: Actually check if we&#39;re on land on water (or disable water-skidding)</span></div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a320ca34b5c38568efd801731cef78a35">skidding</a> &amp;&amp; <a class="code hl_function" href="classvehicle.html#a578c681656be6b419c62799006008035">valid_wheel_config</a>() ) {<span class="comment"></span></div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span><span class="comment">        ///\EFFECT_DEX increases chance of regaining control of a vehicle</span></div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span><span class="comment"></span><span class="comment"></span> </div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span><span class="comment">        ///\EFFECT_DRIVING increases chance of regaining control of a vehicle</span></div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span><span class="comment"></span>        <span class="keywordflow">if</span>( handling_diff * <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 10 ) &lt; 15 ) {</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>            <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_function" href="classvehicle.html#a8e7305881802ea38e07925826da63b82">forward_velocity</a>() );</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>            <a class="code hl_variable" href="classvehicle.html#a320ca34b5c38568efd801731cef78a35">skidding</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>            <a class="code hl_variable" href="classvehicle.html#a8bbdfb41ea75fdc007feab08e2137aa2">move</a>.<a class="code hl_function" href="classtileray.html#ab643ca3c50332c73009031331e7c8026">init</a>( <a class="code hl_variable" href="classvehicle.html#af366981a584e12d25133fb479d47de33">turn_dir</a> );</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>        }</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>    }</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01928">cruise_on</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00285">cruise_thrust()</a>, <a class="el" href="vehicle__move_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a>, <a class="el" href="vehicle__move_8cpp.html#a02a4844a7fb68c13a34dc40b0a9e94d8">effect_pet</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01187">forward_velocity()</a>, <a class="el" href="veh__type_8h_source.html#l00203">vpart_info::fuel_type</a>, <a class="el" href="vehicle__move_8cpp.html#a944ba9be1d911a61e9ca62af989355fd">fuel_type_animal</a>, <a class="el" href="vehicle_8cpp_source.html#l03082">get_pet()</a>, <a class="el" href="vehicle_8cpp_source.html#l04325">handling_difficulty()</a>, <a class="el" href="creature_8cpp_source.html#l01173">Creature::has_effect()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00519">vehicle_part::info()</a>, <a class="el" href="tileray_8cpp_source.html#l00027">tileray::init()</a>, <a class="el" href="vehicle_8h_source.html#l01924">is_following</a>, <a class="el" href="vehicle_8cpp_source.html#l05859">is_towed()</a>, <a class="el" href="vehicle_8h_source.html#l01809">magic</a>, <a class="el" href="vehicle_8h_source.html#l01893">move</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="vehicle_8h_source.html#l01940">skidding</a>, <a class="el" href="vehicle_8cpp_source.html#l04284">steering_effectiveness()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00324">turn()</a>, <a class="el" href="vehicle_8h_source.html#l01870">turn_dir</a>, <a class="el" href="vehicle_8cpp_source.html#l04279">valid_wheel_config()</a>, <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>, <a class="el" href="point_8h_source.html#l00038">point::x</a>, and <a class="el" href="point_8h_source.html#l00039">point::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05745">do_towing_move()</a>, and <a class="el" href="vehicle_8cpp_source.html#l00816">drive_to_local_target()</a>.</p>

</div>
</div>
<a id="a080b319ecacdc070844e9b5cd9090216" name="a080b319ecacdc070844e9b5cd9090216"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a080b319ecacdc070844e9b5cd9090216">&#9670;&nbsp;</a></span>serialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::serialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classJsonOut.html">JsonOut</a> &amp;&#160;</td>
          <td class="paramname"><em>json</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="savegame__json_8cpp_source.html#l02768">2768</a> of file <a class="el" href="savegame__json_8cpp_source.html">savegame_json.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02769" name="l02769"></a><span class="lineno"> 2769</span>{</div>
<div class="line"><a id="l02770" name="l02770"></a><span class="lineno"> 2770</span>    json.<a class="code hl_function" href="classJsonOut.html#a4756f9a569adbfc60de127f7c335d82f">start_object</a>();</div>
<div class="line"><a id="l02771" name="l02771"></a><span class="lineno"> 2771</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;type&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a> );</div>
<div class="line"><a id="l02772" name="l02772"></a><span class="lineno"> 2772</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;posx&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> );</div>
<div class="line"><a id="l02773" name="l02773"></a><span class="lineno"> 2773</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;posy&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> );</div>
<div class="line"><a id="l02774" name="l02774"></a><span class="lineno"> 2774</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;om_id&quot;</span>, <a class="code hl_variable" href="classvehicle.html#abef886f9f8fbb643d84ef5c6ad86518d">om_id</a> );</div>
<div class="line"><a id="l02775" name="l02775"></a><span class="lineno"> 2775</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;faceDir&quot;</span>, std::lround( <a class="code hl_function" href="namespaceunits.html#a9ce2bc1618fa4acf9f9e98effd9f1ae0">to_degrees</a>( <a class="code hl_variable" href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">face</a>.<a class="code hl_function" href="classtileray.html#a91ed01227e1754597024f4916f8bd6af">dir</a>() ) ) );</div>
<div class="line"><a id="l02776" name="l02776"></a><span class="lineno"> 2776</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;moveDir&quot;</span>, std::lround( <a class="code hl_function" href="namespaceunits.html#a9ce2bc1618fa4acf9f9e98effd9f1ae0">to_degrees</a>( <a class="code hl_variable" href="classvehicle.html#a8bbdfb41ea75fdc007feab08e2137aa2">move</a>.<a class="code hl_function" href="classtileray.html#a91ed01227e1754597024f4916f8bd6af">dir</a>() ) ) );</div>
<div class="line"><a id="l02777" name="l02777"></a><span class="lineno"> 2777</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;turn_dir&quot;</span>, std::lround( <a class="code hl_function" href="namespaceunits.html#a9ce2bc1618fa4acf9f9e98effd9f1ae0">to_degrees</a>( <a class="code hl_variable" href="classvehicle.html#af366981a584e12d25133fb479d47de33">turn_dir</a> ) ) );</div>
<div class="line"><a id="l02778" name="l02778"></a><span class="lineno"> 2778</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;velocity&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> );</div>
<div class="line"><a id="l02779" name="l02779"></a><span class="lineno"> 2779</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;falling&quot;</span>, <a class="code hl_variable" href="classvehicle.html#aeafb913ad9b9d1341d51a4c51ba43a06">is_falling</a> );</div>
<div class="line"><a id="l02780" name="l02780"></a><span class="lineno"> 2780</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;floating&quot;</span>, <a class="code hl_variable" href="classvehicle.html#ae3cbbbb890aa9a12504ec3458746f3e1">is_floating</a> );</div>
<div class="line"><a id="l02781" name="l02781"></a><span class="lineno"> 2781</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;flying&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a0a35b7f917fdb08e70a78315cc968f86">is_flying</a> );</div>
<div class="line"><a id="l02782" name="l02782"></a><span class="lineno"> 2782</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;cruise_velocity&quot;</span>, <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> );</div>
<div class="line"><a id="l02783" name="l02783"></a><span class="lineno"> 2783</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;vertical_velocity&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a416a2bc9ee792663fced3344db322cb8">vertical_velocity</a> );</div>
<div class="line"><a id="l02784" name="l02784"></a><span class="lineno"> 2784</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;cruise_on&quot;</span>, <a class="code hl_variable" href="classvehicle.html#abdf6601268460dc437ef079590deb33b">cruise_on</a> );</div>
<div class="line"><a id="l02785" name="l02785"></a><span class="lineno"> 2785</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;engine_on&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> );</div>
<div class="line"><a id="l02786" name="l02786"></a><span class="lineno"> 2786</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;tracking_on&quot;</span>, <a class="code hl_variable" href="classvehicle.html#abe5f5ade599d2cd543a3e3c3860bc051">tracking_on</a> );</div>
<div class="line"><a id="l02787" name="l02787"></a><span class="lineno"> 2787</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;skidding&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a320ca34b5c38568efd801731cef78a35">skidding</a> );</div>
<div class="line"><a id="l02788" name="l02788"></a><span class="lineno"> 2788</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;of_turn_carry&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a3d2d513640544cb11fa826890b692e5a">of_turn_carry</a> );</div>
<div class="line"><a id="l02789" name="l02789"></a><span class="lineno"> 2789</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;name&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l02790" name="l02790"></a><span class="lineno"> 2790</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;owner&quot;</span>, <a class="code hl_variable" href="classvehicle.html#afb548b72a0c24d9f9c436f198040e052">owner</a> );</div>
<div class="line"><a id="l02791" name="l02791"></a><span class="lineno"> 2791</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;old_owner&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a0e6255388e73823374ec4bc9097f87c3">old_owner</a> );</div>
<div class="line"><a id="l02792" name="l02792"></a><span class="lineno"> 2792</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;theft_time&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a191233eeb95ac9e660d5da83dd247a73">theft_time</a> );</div>
<div class="line"><a id="l02793" name="l02793"></a><span class="lineno"> 2793</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;parts&quot;</span>, <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> );</div>
<div class="line"><a id="l02794" name="l02794"></a><span class="lineno"> 2794</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;tags&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a0383bc21c8d6b5a3689124f3d286a004">tags</a> );</div>
<div class="line"><a id="l02795" name="l02795"></a><span class="lineno"> 2795</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;labels&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a7c2d668e2b8f48a53f5c5e94aa2bd408">labels</a> );</div>
<div class="line"><a id="l02796" name="l02796"></a><span class="lineno"> 2796</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;zones&quot;</span> );</div>
<div class="line"><a id="l02797" name="l02797"></a><span class="lineno"> 2797</span>    json.<a class="code hl_function" href="classJsonOut.html#a4550e2036b904c4d4a90e440dd41c684">start_array</a>();</div>
<div class="line"><a id="l02798" name="l02798"></a><span class="lineno"> 2798</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> <span class="keyword">const</span> &amp;z : <a class="code hl_variable" href="classvehicle.html#a90b6f438b5ae343dab2b131c64293584">loot_zones</a> ) {</div>
<div class="line"><a id="l02799" name="l02799"></a><span class="lineno"> 2799</span>        json.<a class="code hl_function" href="classJsonOut.html#a4756f9a569adbfc60de127f7c335d82f">start_object</a>();</div>
<div class="line"><a id="l02800" name="l02800"></a><span class="lineno"> 2800</span>        json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;point&quot;</span>, z.first );</div>
<div class="line"><a id="l02801" name="l02801"></a><span class="lineno"> 2801</span>        json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;zone&quot;</span>, z.second );</div>
<div class="line"><a id="l02802" name="l02802"></a><span class="lineno"> 2802</span>        json.<a class="code hl_function" href="classJsonOut.html#aa38d37840ed6ba168b78a43570e98681">end_object</a>();</div>
<div class="line"><a id="l02803" name="l02803"></a><span class="lineno"> 2803</span>    }</div>
<div class="line"><a id="l02804" name="l02804"></a><span class="lineno"> 2804</span>    json.<a class="code hl_function" href="classJsonOut.html#a44cdd853d4c6913b37caa9f0131eeff2">end_array</a>();</div>
<div class="line"><a id="l02805" name="l02805"></a><span class="lineno"> 2805</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> other_tow_temp_point;</div>
<div class="line"><a id="l02806" name="l02806"></a><span class="lineno"> 2806</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#ac24aba962fd53d1a87bf57b52ce40508">is_towed</a>() ) {</div>
<div class="line"><a id="l02807" name="l02807"></a><span class="lineno"> 2807</span>        <a class="code hl_class" href="classvehicle.html">vehicle</a> *tower = <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a5f5e060b9d76c409ae99c49fbdeda88f">get_towed_by</a>();</div>
<div class="line"><a id="l02808" name="l02808"></a><span class="lineno"> 2808</span>        <span class="keywordflow">if</span>( tower ) {</div>
<div class="line"><a id="l02809" name="l02809"></a><span class="lineno"> 2809</span>            other_tow_temp_point = tower-&gt;<a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( tower-&gt;<a class="code hl_function" href="classvehicle.html#adb9be9ceedf5b5922879fad1646da8fb">get_tow_part</a>() );</div>
<div class="line"><a id="l02810" name="l02810"></a><span class="lineno"> 2810</span>        }</div>
<div class="line"><a id="l02811" name="l02811"></a><span class="lineno"> 2811</span>    }</div>
<div class="line"><a id="l02812" name="l02812"></a><span class="lineno"> 2812</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;other_tow_point&quot;</span>, other_tow_temp_point );</div>
<div class="line"><a id="l02813" name="l02813"></a><span class="lineno"> 2813</span> </div>
<div class="line"><a id="l02814" name="l02814"></a><span class="lineno"> 2814</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;is_locked&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a61be41a90435acf77c1c078c2966643b">is_locked</a> );</div>
<div class="line"><a id="l02815" name="l02815"></a><span class="lineno"> 2815</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;is_alarm_on&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a949775a37c7daa7a6b67e510f548bca3">is_alarm_on</a> );</div>
<div class="line"><a id="l02816" name="l02816"></a><span class="lineno"> 2816</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;camera_on&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a70a0f1b85b1b3eed228b92d7b70334b1">camera_on</a> );</div>
<div class="line"><a id="l02817" name="l02817"></a><span class="lineno"> 2817</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;last_update_turn&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a987b54408280dc6a74da8c857907faf2">last_update</a> );</div>
<div class="line"><a id="l02818" name="l02818"></a><span class="lineno"> 2818</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;pivot&quot;</span>, <a class="code hl_variable" href="classvehicle.html#afd4e8e8471b17450205d827dee8a41a5">pivot_anchor</a>[0] );</div>
<div class="line"><a id="l02819" name="l02819"></a><span class="lineno"> 2819</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;is_following&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a26f98c384048e03538bca10e4f26905d">is_following</a> );</div>
<div class="line"><a id="l02820" name="l02820"></a><span class="lineno"> 2820</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;is_patrolling&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a953fed1abe9bacc2a7c98cee6425c5b2">is_patrolling</a> );</div>
<div class="line"><a id="l02821" name="l02821"></a><span class="lineno"> 2821</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;autodrive_local_target&quot;</span>, <a class="code hl_variable" href="classvehicle.html#acdbb2eec025972d86be23e90e9e92d22">autodrive_local_target</a> );</div>
<div class="line"><a id="l02822" name="l02822"></a><span class="lineno"> 2822</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;summon_time_limit&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a975683a2a22bccef9e5e02f80661cf03">summon_time_limit</a> );</div>
<div class="line"><a id="l02823" name="l02823"></a><span class="lineno"> 2823</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;magic&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a506fb7b0a17c1578498599e14c173710">magic</a> );</div>
<div class="line"><a id="l02824" name="l02824"></a><span class="lineno"> 2824</span>    json.<a class="code hl_function" href="classJsonOut.html#aa38d37840ed6ba168b78a43570e98681">end_object</a>();</div>
<div class="line"><a id="l02825" name="l02825"></a><span class="lineno"> 2825</span>}</div>
<div class="ttc" id="aclassJsonOut_html_a44cdd853d4c6913b37caa9f0131eeff2"><div class="ttname"><a href="classJsonOut.html#a44cdd853d4c6913b37caa9f0131eeff2">JsonOut::end_array</a></div><div class="ttdeci">void end_array()</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l01961">json.cpp:1961</a></div></div>
<div class="ttc" id="aclassJsonOut_html_a4550e2036b904c4d4a90e440dd41c684"><div class="ttname"><a href="classJsonOut.html#a4550e2036b904c4d4a90e440dd41c684">JsonOut::start_array</a></div><div class="ttdeci">void start_array(bool wrap=false)</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l01950">json.cpp:1950</a></div></div>
<div class="ttc" id="aclassJsonOut_html_a4756f9a569adbfc60de127f7c335d82f"><div class="ttname"><a href="classJsonOut.html#a4756f9a569adbfc60de127f7c335d82f">JsonOut::start_object</a></div><div class="ttdeci">void start_object(bool wrap=false)</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l01931">json.cpp:1931</a></div></div>
<div class="ttc" id="aclassJsonOut_html_aa38d37840ed6ba168b78a43570e98681"><div class="ttname"><a href="classJsonOut.html#aa38d37840ed6ba168b78a43570e98681">JsonOut::end_object</a></div><div class="ttdeci">void end_object()</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l01942">json.cpp:1942</a></div></div>
<div class="ttc" id="aclassJsonOut_html_adb3c899f0ad7fc4f25cd3357c51a2c42"><div class="ttname"><a href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">JsonOut::member</a></div><div class="ttdeci">void member(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02046">json.cpp:2046</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="json_8cpp_source.html#l01961">JsonOut::end_array()</a>, <a class="el" href="json_8cpp_source.html#l01942">JsonOut::end_object()</a>, <a class="el" href="vehicle_8cpp_source.html#l05874">get_tow_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="character_8h_source.html#l01476">Character::magic</a>, <a class="el" href="json_8cpp_source.html#l02046">JsonOut::member()</a>, <a class="el" href="avatar__action_8cpp_source.html#l00090">avatar_action::move()</a>, <a class="el" href="character_8h_source.html#l01568">Character::name</a>, <a class="el" href="character_8cpp_source.html#l00707">Character::pos()</a>, <a class="el" href="json_8cpp_source.html#l01950">JsonOut::start_array()</a>, <a class="el" href="json_8cpp_source.html#l01931">JsonOut::start_object()</a>, <a class="el" href="units__angle_8h_source.html#l00036">units::to_degrees()</a>, <a class="el" href="enums_8h_source.html#l00075">type</a>, <a class="el" href="point_8h_source.html#l00150">tripoint::x</a>, and <a class="el" href="point_8h_source.html#l00151">tripoint::y</a>.</p>

</div>
</div>
<a id="a21939ab01fc986741bf90546bc4b8044" name="a21939ab01fc986741bf90546bc4b8044"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21939ab01fc986741bf90546bc4b8044">&#9670;&nbsp;</a></span>set_electronics_menu_options()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::set_electronics_menu_options </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="structuilist__entry.html">uilist_entry</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::function&lt; void()&gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>actions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l00266">266</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>{</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>    <span class="keyword">auto</span> add_toggle = [&amp;]( <span class="keyword">const</span> std::string &amp; <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, <span class="keywordtype">char</span> key, <span class="keyword">const</span> std::string &amp; flag ) {</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>        <a class="code hl_function" href="classvehicle.html#a22c303e2414d3a1ccae66d96fa77d638">add_toggle_to_opts</a>( <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>, actions, <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, key, flag );</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>    };</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>    add_toggle( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;reactor&quot;</span> ),</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>                <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_REACTOR&quot;</span> ), <span class="stringliteral">&quot;REACTOR&quot;</span> );</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>    add_toggle( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;headlights&quot;</span> ),</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>                <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_HEADLIGHT&quot;</span> ), <span class="stringliteral">&quot;CONE_LIGHT&quot;</span> );</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>    add_toggle( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;wide angle headlights&quot;</span> ),</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>                <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_WIDE_HEADLIGHT&quot;</span> ), <span class="stringliteral">&quot;WIDE_CONE_LIGHT&quot;</span> );</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>    add_toggle( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;directed overhead lights&quot;</span> ),</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>                <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_HALF_OVERHEAD_LIGHT&quot;</span> ), <span class="stringliteral">&quot;HALF_CIRCLE_LIGHT&quot;</span> );</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>    add_toggle( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;overhead lights&quot;</span> ),</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>                <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_OVERHEAD_LIGHT&quot;</span> ), <span class="stringliteral">&quot;CIRCLE_LIGHT&quot;</span> );</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>    add_toggle( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;aisle lights&quot;</span> ),</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>                <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_AISLE_LIGHT&quot;</span> ), <span class="stringliteral">&quot;AISLE_LIGHT&quot;</span> );</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>    add_toggle( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;dome lights&quot;</span> ),</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>                <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_DOME_LIGHT&quot;</span> ), <span class="stringliteral">&quot;DOME_LIGHT&quot;</span> );</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>    add_toggle( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;atomic lights&quot;</span> ),</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>                <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_ATOMIC_LIGHT&quot;</span> ), <span class="stringliteral">&quot;ATOMIC_LIGHT&quot;</span> );</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>    add_toggle( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;stereo&quot;</span> ),</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>                <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_STEREO&quot;</span> ), <span class="stringliteral">&quot;STEREO&quot;</span> );</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    add_toggle( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;chimes&quot;</span> ),</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>                <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_CHIMES&quot;</span> ), <span class="stringliteral">&quot;CHIMES&quot;</span> );</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>    add_toggle( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;fridge&quot;</span> ),</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>                <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_FRIDGE&quot;</span> ), <span class="stringliteral">&quot;FRIDGE&quot;</span> );</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>    add_toggle( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;freezer&quot;</span> ),</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>                <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_FREEZER&quot;</span> ), <span class="stringliteral">&quot;FREEZER&quot;</span> );</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>    add_toggle( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;space heater&quot;</span> ),</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>                <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_SPACE_HEATER&quot;</span> ), <span class="stringliteral">&quot;SPACE_HEATER&quot;</span> );</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>    add_toggle( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;cooler&quot;</span> ),</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>                <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_COOLER&quot;</span> ), <span class="stringliteral">&quot;COOLER&quot;</span> );</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>    add_toggle( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;recharger&quot;</span> ),</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>                <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_RECHARGER&quot;</span> ), <span class="stringliteral">&quot;RECHARGE&quot;</span> );</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>    add_toggle( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;plow&quot;</span> ),</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>                <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_PLOW&quot;</span> ), <span class="stringliteral">&quot;PLOW&quot;</span> );</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    add_toggle( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;reaper&quot;</span> ),</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>                <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_REAPER&quot;</span> ), <span class="stringliteral">&quot;REAPER&quot;</span> );</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>    add_toggle( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;planter&quot;</span> ),</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>                <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_PLANTER&quot;</span> ), <span class="stringliteral">&quot;PLANTER&quot;</span> );</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>    add_toggle( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;rockwheel&quot;</span> ),</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>                <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_PLOW&quot;</span> ), <span class="stringliteral">&quot;ROCKWHEEL&quot;</span> );</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>    add_toggle( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;roadheader&quot;</span> ),</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>                <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_PLOW&quot;</span> ), <span class="stringliteral">&quot;ROADHEAD&quot;</span> );</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>    add_toggle( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;scoop&quot;</span> ),</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>                <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_SCOOP&quot;</span> ), <span class="stringliteral">&quot;SCOOP&quot;</span> );</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>    add_toggle( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;electronics menu option&quot;</span>, <span class="stringliteral">&quot;water purifier&quot;</span> ),</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>                <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_WATER_PURIFIER&quot;</span> ), <span class="stringliteral">&quot;WATER_PURIFIER&quot;</span> );</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span> </div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;DOOR_MOTOR&quot;</span> ) ) {</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>        <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>.emplace_back( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Toggle doors&quot;</span> ), <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_DOORS&quot;</span> ) );</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>        actions.push_back( [&amp;] { <a class="code hl_function" href="classvehicle.html#ae432d73f12b167105d62fdd832f9b30e">control_doors</a>(); <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>(); } );</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>    }</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a70a0f1b85b1b3eed228b92d7b70334b1">camera_on</a> || ( <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;CAMERA&quot;</span> ) &amp;&amp; <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;CAMERA_CONTROL&quot;</span> ) ) ) {</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>        <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>.emplace_back( <a class="code hl_variable" href="classvehicle.html#a70a0f1b85b1b3eed228b92d7b70334b1">camera_on</a> ?</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>                              <a class="code hl_function" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Turn off camera system&quot;</span> ), <a class="code hl_define" href="color_8h.html#a6c870a877c442090edead1e229b3953d">c_pink</a> ) :</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>                              <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Turn on camera system&quot;</span> ),</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>                              <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_CAMERA&quot;</span> ) );</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>        actions.push_back( [&amp;] {</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a70a0f1b85b1b3eed228b92d7b70334b1">camera_on</a> )</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>            {</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>                <a class="code hl_variable" href="classvehicle.html#a70a0f1b85b1b3eed228b92d7b70334b1">camera_on</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Camera system disabled&quot;</span> ) );</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, <span class="keyword">true</span> ) )</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>            {</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>                <a class="code hl_variable" href="classvehicle.html#a70a0f1b85b1b3eed228b92d7b70334b1">camera_on</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Camera system enabled&quot;</span> ) );</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>            } <span class="keywordflow">else</span></div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>            {</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Camera system won&#39;t turn on&quot;</span> ) );</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>            }</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>            <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>        } );</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>    }</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>}</div>
<div class="ttc" id="aclassvehicle_html_a22c303e2414d3a1ccae66d96fa77d638"><div class="ttname"><a href="classvehicle.html#a22c303e2414d3a1ccae66d96fa77d638">vehicle::add_toggle_to_opts</a></div><div class="ttdeci">void add_toggle_to_opts(std::vector&lt; uilist_entry &gt; &amp;options, std::vector&lt; std::function&lt; void()&gt; &gt; &amp;actions, const std::string &amp;name, char key, const std::string &amp;flag)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00100">vehicle_use.cpp:100</a></div></div>
<div class="ttc" id="aclassvehicle_html_ae432d73f12b167105d62fdd832f9b30e"><div class="ttname"><a href="classvehicle.html#ae432d73f12b167105d62fdd832f9b30e">vehicle::control_doors</a></div><div class="ttdeci">void control_doors()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00173">vehicle_use.cpp:173</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00100">add_toggle_to_opts()</a>, <a class="el" href="color_8h_source.html#l00031">c_pink</a>, <a class="el" href="vehicle_8h_source.html#l01937">camera_on</a>, <a class="el" href="color_8cpp_source.html#l00669">colorize()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00173">control_doors()</a>, <a class="el" href="vehicle_8cpp_source.html#l03179">fuel_left()</a>, <a class="el" href="vehicle__use_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, <a class="el" href="vehicle_8cpp_source.html#l02558">has_part()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00094">keybind()</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="path__info_8cpp_source.html#l00238">PATH_INFO::options()</a>, <a class="el" href="translations_8cpp_source.html#l00041">pgettext()</a>, and <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00344">control_electronics()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="ad99135d6b3b85ed2fac910cbfd4714c3" name="ad99135d6b3b85ed2fac910cbfd4714c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad99135d6b3b85ed2fac910cbfd4714c3">&#9670;&nbsp;</a></span>set_flying()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::set_flying </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>new_flying_value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04032">4032</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04033" name="l04033"></a><span class="lineno"> 4033</span>{</div>
<div class="line"><a id="l04034" name="l04034"></a><span class="lineno"> 4034</span>    <a class="code hl_variable" href="classvehicle.html#a0a35b7f917fdb08e70a78315cc968f86">is_flying</a> = new_flying_value;</div>
<div class="line"><a id="l04035" name="l04035"></a><span class="lineno"> 4035</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01917">is_flying</a>.</p>

</div>
</div>
<a id="a84a1f3fed2f2075a8f8814e74de888c7" name="a84a1f3fed2f2075a8f8814e74de888c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84a1f3fed2f2075a8f8814e74de888c7">&#9670;&nbsp;</a></span>set_hp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::set_hp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;&#160;</td>
          <td class="paramname"><em>pt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>qty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set stat for part constrained by range [0,durability]. </p>
<dl class="section note"><dt>Note</dt><dd>does not invoke base <a class="el" href="classitem.html#aadbabbc9e7714db37f32b7c6f7406d8f">item::on_damage</a> callback </dd></dl>

<p class="definition">Definition at line <a class="el" href="vehicle__part_8cpp_source.html#l00527">527</a> of file <a class="el" href="vehicle__part_8cpp_source.html">vehicle_part.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>{</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>    <span class="keywordflow">if</span>( qty == pt.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_variable" href="classvpart__info.html#aeb9e00627b8cb80d28fb1419e7f0928a">durability</a> || pt.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_variable" href="classvpart__info.html#aeb9e00627b8cb80d28fb1419e7f0928a">durability</a> &lt;= 0 ) {</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>        pt.<a class="code hl_variable" href="structvehicle__part.html#a5122e284fbcf0f14f0e6022e01b5b574">base</a>.<a class="code hl_function" href="classitem.html#a4095bf310206d3c22ce0bb15bc7dad03">set_damage</a>( 0 );</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span> </div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( qty == 0 ) {</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>        pt.<a class="code hl_variable" href="structvehicle__part.html#a5122e284fbcf0f14f0e6022e01b5b574">base</a>.<a class="code hl_function" href="classitem.html#a4095bf310206d3c22ce0bb15bc7dad03">set_damage</a>( pt.<a class="code hl_variable" href="structvehicle__part.html#a5122e284fbcf0f14f0e6022e01b5b574">base</a>.<a class="code hl_function" href="classitem.html#a216affc51dde30087c21fa5689a5c5e9">max_damage</a>() );</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span> </div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>        pt.<a class="code hl_variable" href="structvehicle__part.html#a5122e284fbcf0f14f0e6022e01b5b574">base</a>.<a class="code hl_function" href="classitem.html#a4095bf310206d3c22ce0bb15bc7dad03">set_damage</a>( pt.<a class="code hl_variable" href="structvehicle__part.html#a5122e284fbcf0f14f0e6022e01b5b574">base</a>.<a class="code hl_function" href="classitem.html#a216affc51dde30087c21fa5689a5c5e9">max_damage</a>() - pt.<a class="code hl_variable" href="structvehicle__part.html#a5122e284fbcf0f14f0e6022e01b5b574">base</a>.<a class="code hl_function" href="classitem.html#a216affc51dde30087c21fa5689a5c5e9">max_damage</a>() * qty / pt.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_variable" href="classvpart__info.html#aeb9e00627b8cb80d28fb1419e7f0928a">durability</a> );</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>    }</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>}</div>
<div class="ttc" id="aclassitem_html_a4095bf310206d3c22ce0bb15bc7dad03"><div class="ttname"><a href="classitem.html#a4095bf310206d3c22ce0bb15bc7dad03">item::set_damage</a></div><div class="ttdeci">item &amp; set_damage(int qty)</div><div class="ttdoc">Filter setting damage constrained by min_damage and max_damage.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00711">item.cpp:711</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l00440">vehicle_part::base</a>, <a class="el" href="veh__type_8h_source.html#l00173">vpart_info::durability</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00519">vehicle_part::info()</a>, <a class="el" href="item_8cpp_source.html#l06066">item::max_damage()</a>, and <a class="el" href="item_8cpp_source.html#l00711">item::set_damage()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l00386">init_state()</a>, <a class="el" href="veh__utils_8cpp_source.html#l00109">veh_utils::repair_part()</a>, and <a class="el" href="iuse__actor_8cpp_source.html#l00633">unfold_vehicle_iuse::use()</a>.</p>

</div>
</div>
<a id="aad68498a5e732d7d0912f25f989e0356" name="aad68498a5e732d7d0912f25f989e0356"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad68498a5e732d7d0912f25f989e0356">&#9670;&nbsp;</a></span>set_old_owner()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::set_old_owner </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="clzones_8h.html#ab899db7b87cf958f079fe0f14793625b">faction_id</a> &amp;&#160;</td>
          <td class="paramname"><em>temp_owner</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l00815">815</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>                                                           {</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>            <a class="code hl_variable" href="classvehicle.html#a191233eeb95ac9e660d5da83dd247a73">theft_time</a> = <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>;</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>            <a class="code hl_variable" href="classvehicle.html#a0e6255388e73823374ec4bc9097f87c3">old_owner</a> = temp_owner;</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01721">old_owner</a>, <a class="el" href="vehicle_8h_source.html#l01881">theft_time</a>, and <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04197">handle_potential_theft()</a>.</p>

</div>
</div>
<a id="a5eb3c01708ec8090cedc2272b50d1bc4" name="a5eb3c01708ec8090cedc2272b50d1bc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5eb3c01708ec8090cedc2272b50d1bc4">&#9670;&nbsp;</a></span>set_owner() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::set_owner </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04188">4188</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04189" name="l04189"></a><span class="lineno"> 4189</span>{</div>
<div class="line"><a id="l04190" name="l04190"></a><span class="lineno"> 4190</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.get_faction() ) {</div>
<div class="line"><a id="l04191" name="l04191"></a><span class="lineno"> 4191</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;vehicle::set_owner() player %s has no valid faction&quot;</span>, <a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.disp_name() );</div>
<div class="line"><a id="l04192" name="l04192"></a><span class="lineno"> 4192</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04193" name="l04193"></a><span class="lineno"> 4193</span>    }</div>
<div class="line"><a id="l04194" name="l04194"></a><span class="lineno"> 4194</span>    <a class="code hl_variable" href="classvehicle.html#afb548b72a0c24d9f9c436f198040e052">owner</a> = <a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.get_faction()-&gt;id;</div>
<div class="line"><a id="l04195" name="l04195"></a><span class="lineno"> 4195</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01031">c</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, and <a class="el" href="vehicle_8h_source.html#l01719">owner</a>.</p>

</div>
</div>
<a id="ae57a59ca3ca669ce217f98094101b2ef" name="ae57a59ca3ca669ce217f98094101b2ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae57a59ca3ca669ce217f98094101b2ef">&#9670;&nbsp;</a></span>set_owner() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::set_owner </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="clzones_8h.html#ab899db7b87cf958f079fe0f14793625b">faction_id</a> &amp;&#160;</td>
          <td class="paramname"><em>new_owner</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l00823">823</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>                                                      {</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>            <a class="code hl_variable" href="classvehicle.html#afb548b72a0c24d9f9c436f198040e052">owner</a> = new_owner;</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01719">owner</a>.</p>

<p class="reference">Referenced by <a class="el" href="mapgen_8cpp_source.html#l05494">map::apply_faction_ownership()</a>, <a class="el" href="vehicle_8cpp_source.html#l04197">handle_potential_theft()</a>, <a class="el" href="iuse_8cpp_source.html#l05639">iuse::unfold_generic()</a>, and <a class="el" href="iuse__actor_8cpp_source.html#l00633">unfold_vehicle_iuse::use()</a>.</p>

</div>
</div>
<a id="ae53a4a9e3fd761b8fcef2f379cca8918" name="ae53a4a9e3fd761b8fcef2f379cca8918"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae53a4a9e3fd761b8fcef2f379cca8918">&#9670;&nbsp;</a></span>set_submap_moved()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::set_submap_moved </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the submap coordinates and update the tracker info in the overmap (if enabled). </p>
<p >This should be called only when the vehicle has actually been moved, not when the map is just shifted (in the later case simply set smx/smy directly). </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03116">3116</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03117" name="l03117"></a><span class="lineno"> 3117</span>{</div>
<div class="line"><a id="l03118" name="l03118"></a><span class="lineno"> 3118</span>    <span class="keyword">const</span> <a class="code hl_class" href="classcoords_1_1coord__point.html">point_abs_ms</a> old_msp = <a class="code hl_function" href="classvehicle.html#a789289c4179f7677e45cb100ff5ffb9a">global_square_location</a>().<a class="code hl_function" href="classcoords_1_1coord__point.html#acb7438b5f344b6841e64b56100761783">xy</a>();</div>
<div class="line"><a id="l03119" name="l03119"></a><span class="lineno"> 3119</span>    <a class="code hl_variable" href="classvehicle.html#a34630935e46860003c616e0522316f02">sm_pos</a> = p;</div>
<div class="line"><a id="l03120" name="l03120"></a><span class="lineno"> 3120</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#abe5f5ade599d2cd543a3e3c3860bc051">tracking_on</a> ) {</div>
<div class="line"><a id="l03121" name="l03121"></a><span class="lineno"> 3121</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03122" name="l03122"></a><span class="lineno"> 3122</span>    }</div>
<div class="line"><a id="l03123" name="l03123"></a><span class="lineno"> 3123</span>    <a class="code hl_variable" href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a>.<a class="code hl_function" href="classovermapbuffer.html#a4694c2aa77f4b83a45adb1e9c9c464d5">move_vehicle</a>( <span class="keyword">this</span>, old_msp );</div>
<div class="line"><a id="l03124" name="l03124"></a><span class="lineno"> 3124</span>}</div>
<div class="ttc" id="aclasscoords_1_1coord__point_html_acb7438b5f344b6841e64b56100761783"><div class="ttname"><a href="classcoords_1_1coord__point.html#acb7438b5f344b6841e64b56100761783">coords::coord_point::xy</a></div><div class="ttdeci">constexpr auto xy() const</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00130">coordinates.h:130</a></div></div>
<div class="ttc" id="aclassovermapbuffer_html_a4694c2aa77f4b83a45adb1e9c9c464d5"><div class="ttname"><a href="classovermapbuffer.html#a4694c2aa77f4b83a45adb1e9c9c464d5">overmapbuffer::move_vehicle</a></div><div class="ttdeci">void move_vehicle(vehicle *veh, const point_abs_ms &amp;old_msp)</div><div class="ttdoc">Move the tracking mark of the given vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00570">overmapbuffer.cpp:570</a></div></div>
<div class="ttc" id="aovermapbuffer_8cpp_html_ab3cf8344ec3e473f9ce96a33dc3425af"><div class="ttname"><a href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a></div><div class="ttdeci">overmapbuffer overmap_buffer</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00046">overmapbuffer.cpp:44</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l03091">global_square_location()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l00570">overmapbuffer::move_vehicle()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l00044">overmap_buffer</a>, <a class="el" href="vehicle_8h_source.html#l01844">sm_pos</a>, <a class="el" href="vehicle_8h_source.html#l01932">tracking_on</a>, and <a class="el" href="coordinates_8h_source.html#l00130">coords::coord_point&lt; Point, Origin, Scale &gt;::xy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l01098">map::displace_vehicle()</a>.</p>

</div>
</div>
<a id="a6c731c248cdff3b843f703b3c607a823" name="a6c731c248cdff3b843f703b3c607a823"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c731c248cdff3b843f703b3c607a823">&#9670;&nbsp;</a></span>set_tow_directions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::set_tow_directions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05906">5906</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05907" name="l05907"></a><span class="lineno"> 5907</span>{</div>
<div class="line"><a id="l05908" name="l05908"></a><span class="lineno"> 5908</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> length = <a class="code hl_variable" href="classvehicle.html#a93c1c8baa5cd7ee79039fd5c7226b24e">mount_max</a>.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> - <a class="code hl_variable" href="classvehicle.html#ad62e7dec9def6c6fcc23f2d7b8e51963">mount_min</a>.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> + 1;</div>
<div class="line"><a id="l05909" name="l05909"></a><span class="lineno"> 5909</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> mount_of_tow = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#adb9be9ceedf5b5922879fad1646da8fb">get_tow_part</a>()].mount;</div>
<div class="line"><a id="l05910" name="l05910"></a><span class="lineno"> 5910</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> normalized_tow_mount = <a class="code hl_struct" href="structpoint.html">point</a>( std::abs( mount_of_tow.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> - <a class="code hl_variable" href="classvehicle.html#ad62e7dec9def6c6fcc23f2d7b8e51963">mount_min</a>.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> ),</div>
<div class="line"><a id="l05911" name="l05911"></a><span class="lineno"> 5911</span>                                       std::abs( mount_of_tow.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> - <a class="code hl_variable" href="classvehicle.html#ad62e7dec9def6c6fcc23f2d7b8e51963">mount_min</a>.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> ) );</div>
<div class="line"><a id="l05912" name="l05912"></a><span class="lineno"> 5912</span>    <span class="keywordflow">if</span>( length &gt;= 3 ) {</div>
<div class="line"><a id="l05913" name="l05913"></a><span class="lineno"> 5913</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> trisect = length / 3;</div>
<div class="line"><a id="l05914" name="l05914"></a><span class="lineno"> 5914</span>        <span class="keywordflow">if</span>( normalized_tow_mount.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> &lt;= trisect ) {</div>
<div class="line"><a id="l05915" name="l05915"></a><span class="lineno"> 5915</span>            <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_variable" href="classtowing__data.html#aad5a9d3c2915f325ea2d2eda09d146dd">tow_direction</a> = <a class="code hl_enumvalue" href="vehicle_8h.html#a39a3696f788e37c7c3e2231d358f1eacaf59e8ef77cbda2984ea39fa8c005c763">TOW_BACK</a>;</div>
<div class="line"><a id="l05916" name="l05916"></a><span class="lineno"> 5916</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( normalized_tow_mount.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> &gt; trisect &amp;&amp; normalized_tow_mount.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> &lt;= trisect * 2 ) {</div>
<div class="line"><a id="l05917" name="l05917"></a><span class="lineno"> 5917</span>            <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_variable" href="classtowing__data.html#aad5a9d3c2915f325ea2d2eda09d146dd">tow_direction</a> = <a class="code hl_enumvalue" href="vehicle_8h.html#a39a3696f788e37c7c3e2231d358f1eaca7f496709e14f4b4ac751d042381f0f23">TOW_SIDE</a>;</div>
<div class="line"><a id="l05918" name="l05918"></a><span class="lineno"> 5918</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05919" name="l05919"></a><span class="lineno"> 5919</span>            <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_variable" href="classtowing__data.html#aad5a9d3c2915f325ea2d2eda09d146dd">tow_direction</a> = <a class="code hl_enumvalue" href="vehicle_8h.html#a39a3696f788e37c7c3e2231d358f1eacab6c366b229a91bf230e56f1ebbb466dc">TOW_FRONT</a>;</div>
<div class="line"><a id="l05920" name="l05920"></a><span class="lineno"> 5920</span>        }</div>
<div class="line"><a id="l05921" name="l05921"></a><span class="lineno"> 5921</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05922" name="l05922"></a><span class="lineno"> 5922</span>        <span class="comment">// its a small vehicle, no danger if it flips around.</span></div>
<div class="line"><a id="l05923" name="l05923"></a><span class="lineno"> 5923</span>        <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_variable" href="classtowing__data.html#aad5a9d3c2915f325ea2d2eda09d146dd">tow_direction</a> = <a class="code hl_enumvalue" href="vehicle_8h.html#a39a3696f788e37c7c3e2231d358f1eacab6c366b229a91bf230e56f1ebbb466dc">TOW_FRONT</a>;</div>
<div class="line"><a id="l05924" name="l05924"></a><span class="lineno"> 5924</span>    }</div>
<div class="line"><a id="l05925" name="l05925"></a><span class="lineno"> 5925</span>}</div>
<div class="ttc" id="avehicle_8h_html_a39a3696f788e37c7c3e2231d358f1eaca7f496709e14f4b4ac751d042381f0f23"><div class="ttname"><a href="vehicle_8h.html#a39a3696f788e37c7c3e2231d358f1eaca7f496709e14f4b4ac751d042381f0f23">TOW_SIDE</a></div><div class="ttdeci">@ TOW_SIDE</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00141">vehicle.h:141</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l05874">get_tow_part()</a>, <a class="el" href="vehicle_8h_source.html#l01820">mount_max</a>, <a class="el" href="vehicle_8h_source.html#l01821">mount_min</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8h_source.html#l00142">TOW_BACK</a>, <a class="el" href="vehicle_8h_source.html#l01887">tow_data</a>, <a class="el" href="vehicle_8h_source.html#l00165">towing_data::tow_direction</a>, <a class="el" href="vehicle_8h_source.html#l00140">TOW_FRONT</a>, <a class="el" href="vehicle_8h_source.html#l00141">TOW_SIDE</a>, <a class="el" href="point_8h_source.html#l00038">point::x</a>, and <a class="el" href="point_8h_source.html#l00039">point::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05927">towing_data::set_towing()</a>.</p>

</div>
</div>
<a id="a853f20e405b2934d63fcb43b052f8461" name="a853f20e405b2934d63fcb43b052f8461"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a853f20e405b2934d63fcb43b052f8461">&#9670;&nbsp;</a></span>shed_loose_parts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::shed_loose_parts </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06067">6067</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06068" name="l06068"></a><span class="lineno"> 6068</span>{</div>
<div class="line"><a id="l06069" name="l06069"></a><span class="lineno"> 6069</span>    <span class="comment">// remove_part rebuilds the loose_parts vector, when all of those parts have been removed,</span></div>
<div class="line"><a id="l06070" name="l06070"></a><span class="lineno"> 6070</span>    <span class="comment">// it will stay empty.</span></div>
<div class="line"><a id="l06071" name="l06071"></a><span class="lineno"> 6071</span>    <span class="keywordflow">while</span>( !<a class="code hl_variable" href="classvehicle.html#afd84ace26c98ea5025d6a7cbbfff66e1">loose_parts</a>.empty() ) {</div>
<div class="line"><a id="l06072" name="l06072"></a><span class="lineno"> 6072</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> elem = <a class="code hl_variable" href="classvehicle.html#afd84ace26c98ea5025d6a7cbbfff66e1">loose_parts</a>.front();</div>
<div class="line"><a id="l06073" name="l06073"></a><span class="lineno"> 6073</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( elem, <span class="stringliteral">&quot;POWER_TRANSFER&quot;</span> ) ) {</div>
<div class="line"><a id="l06074" name="l06074"></a><span class="lineno"> 6074</span>            <a class="code hl_function" href="classvehicle.html#a3e69be901ab700c0d31b6b20f1f97f39">remove_remote_part</a>( elem );</div>
<div class="line"><a id="l06075" name="l06075"></a><span class="lineno"> 6075</span>        }</div>
<div class="line"><a id="l06076" name="l06076"></a><span class="lineno"> 6076</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a40b149ccb2383cb1a263f3e3d88f3469">is_towing</a>() || <a class="code hl_function" href="classvehicle.html#ac24aba962fd53d1a87bf57b52ce40508">is_towed</a>() ) {</div>
<div class="line"><a id="l06077" name="l06077"></a><span class="lineno"> 6077</span>            <a class="code hl_class" href="classvehicle.html">vehicle</a> *other_veh = <a class="code hl_function" href="classvehicle.html#a40b149ccb2383cb1a263f3e3d88f3469">is_towing</a>() ? <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a4cc6247530a16020db73b3af28e0024e">get_towed</a>() : <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a5f5e060b9d76c409ae99c49fbdeda88f">get_towed_by</a>();</div>
<div class="line"><a id="l06078" name="l06078"></a><span class="lineno"> 6078</span>            <span class="keywordflow">if</span>( other_veh ) {</div>
<div class="line"><a id="l06079" name="l06079"></a><span class="lineno"> 6079</span>                other_veh-&gt;<a class="code hl_function" href="classvehicle.html#a04638c5234928c4ccca14ddc2059fb11">remove_part</a>( other_veh-&gt;<a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( other_veh-&gt;<a class="code hl_function" href="classvehicle.html#adb9be9ceedf5b5922879fad1646da8fb">get_tow_part</a>(), <span class="stringliteral">&quot;TOW_CABLE&quot;</span>,</div>
<div class="line"><a id="l06080" name="l06080"></a><span class="lineno"> 6080</span>                                        <span class="keyword">true</span> ) );</div>
<div class="line"><a id="l06081" name="l06081"></a><span class="lineno"> 6081</span>                other_veh-&gt;<a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a3be8540079c1ba0e07c594fc6e210bf3">clear_towing</a>();</div>
<div class="line"><a id="l06082" name="l06082"></a><span class="lineno"> 6082</span>            }</div>
<div class="line"><a id="l06083" name="l06083"></a><span class="lineno"> 6083</span>            <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a3be8540079c1ba0e07c594fc6e210bf3">clear_towing</a>();</div>
<div class="line"><a id="l06084" name="l06084"></a><span class="lineno"> 6084</span>        }</div>
<div class="line"><a id="l06085" name="l06085"></a><span class="lineno"> 6085</span>        <span class="keyword">auto</span> <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> = &amp;<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[elem];</div>
<div class="line"><a id="l06086" name="l06086"></a><span class="lineno"> 6086</span>        <a class="code hl_class" href="classitem.html">item</a> drop = <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>-&gt;<a class="code hl_function" href="structvehicle__part.html#a22e79d75d5b28798979df9e8cf774c0c">properties_to_item</a>();</div>
<div class="line"><a id="l06087" name="l06087"></a><span class="lineno"> 6087</span>        <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#a506fb7b0a17c1578498599e14c173710">magic</a> ) {</div>
<div class="line"><a id="l06088" name="l06088"></a><span class="lineno"> 6088</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_item_or_charges( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( *<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ), drop );</div>
<div class="line"><a id="l06089" name="l06089"></a><span class="lineno"> 6089</span>        }</div>
<div class="line"><a id="l06090" name="l06090"></a><span class="lineno"> 6090</span> </div>
<div class="line"><a id="l06091" name="l06091"></a><span class="lineno"> 6091</span>        <a class="code hl_function" href="classvehicle.html#a04638c5234928c4ccca14ddc2059fb11">remove_part</a>( elem );</div>
<div class="line"><a id="l06092" name="l06092"></a><span class="lineno"> 6092</span>    }</div>
<div class="line"><a id="l06093" name="l06093"></a><span class="lineno"> 6093</span>}</div>
<div class="ttc" id="aclassvehicle_html_a3e69be901ab700c0d31b6b20f1f97f39"><div class="ttname"><a href="classvehicle.html#a3e69be901ab700c0d31b6b20f1f97f39">vehicle::remove_remote_part</a></div><div class="ttdeci">void remove_remote_part(int part_num)</div><div class="ttdoc">Remove a part from a targeted remote vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06035">vehicle.cpp:6035</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l00161">towing_data::clear_towing()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l05874">get_tow_part()</a>, <a class="el" href="vehicle_8h_source.html#l00158">towing_data::get_towed()</a>, <a class="el" href="vehicle_8h_source.html#l00154">towing_data::get_towed_by()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l05859">is_towed()</a>, <a class="el" href="vehicle_8cpp_source.html#l05844">is_towing()</a>, <a class="el" href="vehicle_8h_source.html#l01760">loose_parts</a>, <a class="el" href="vehicle_8h_source.html#l01809">magic</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8cpp_source.html#l02875">part_flag()</a>, <a class="el" href="vehicle_8cpp_source.html#l02518">part_with_feature()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00067">vehicle_part::properties_to_item()</a>, <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l06035">remove_remote_part()</a>, and <a class="el" href="vehicle_8h_source.html#l01887">tow_data</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l01098">map::displace_vehicle()</a>, and <a class="el" href="vehicle_8cpp_source.html#l05361">gain_moves()</a>.</p>

</div>
</div>
<a id="af3cd05d2cba38784e106793c3ca13147" name="af3cd05d2cba38784e106793c3ca13147"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3cd05d2cba38784e106793c3ca13147">&#9670;&nbsp;</a></span>shift_if_needed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::shift_if_needed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detect if the vehicle is currently missing a 0,0 part, and adjust if necessary. </p>
<dl class="section return"><dt>Returns</dt><dd>bool true if the shift was needed. </dd></dl>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06310">6310</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06311" name="l06311"></a><span class="lineno"> 6311</span>{</div>
<div class="line"><a id="l06312" name="l06312"></a><span class="lineno"> 6312</span>    std::vector&lt;int&gt; vehicle_origin = <a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( <a class="code hl_variable" href="point_8h.html#a0ee2195dcb488ae55fbf4316f5011172">point_zero</a>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l06313" name="l06313"></a><span class="lineno"> 6313</span>    <span class="keywordflow">if</span>( !vehicle_origin.empty() &amp;&amp; !<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ vehicle_origin[ 0 ] ].removed ) {</div>
<div class="line"><a id="l06314" name="l06314"></a><span class="lineno"> 6314</span>        <span class="comment">// Shifting is not needed.</span></div>
<div class="line"><a id="l06315" name="l06315"></a><span class="lineno"> 6315</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l06316" name="l06316"></a><span class="lineno"> 6316</span>    }</div>
<div class="line"><a id="l06317" name="l06317"></a><span class="lineno"> 6317</span>    <span class="comment">//Find a frame, any frame, to shift to</span></div>
<div class="line"><a id="l06318" name="l06318"></a><span class="lineno"> 6318</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a397b40aa92dd1fd09ee592aa279bc656">get_all_parts</a>() ) {</div>
<div class="line"><a id="l06319" name="l06319"></a><span class="lineno"> 6319</span>        <span class="keywordflow">if</span>( vp.info().location == <span class="stringliteral">&quot;structure&quot;</span></div>
<div class="line"><a id="l06320" name="l06320"></a><span class="lineno"> 6320</span>            &amp;&amp; !vp.has_feature( <span class="stringliteral">&quot;PROTRUSION&quot;</span> )</div>
<div class="line"><a id="l06321" name="l06321"></a><span class="lineno"> 6321</span>            &amp;&amp; !vp.part().removed ) {</div>
<div class="line"><a id="l06322" name="l06322"></a><span class="lineno"> 6322</span>            <a class="code hl_function" href="classvehicle.html#a16b3772f72faa9f18472a45664b36463">shift_parts</a>( vp.mount() );</div>
<div class="line"><a id="l06323" name="l06323"></a><span class="lineno"> 6323</span>            <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l06324" name="l06324"></a><span class="lineno"> 6324</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l06325" name="l06325"></a><span class="lineno"> 6325</span>        }</div>
<div class="line"><a id="l06326" name="l06326"></a><span class="lineno"> 6326</span>    }</div>
<div class="line"><a id="l06327" name="l06327"></a><span class="lineno"> 6327</span>    <span class="comment">// There are only parts with PROTRUSION left, choose one of them.</span></div>
<div class="line"><a id="l06328" name="l06328"></a><span class="lineno"> 6328</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a397b40aa92dd1fd09ee592aa279bc656">get_all_parts</a>() ) {</div>
<div class="line"><a id="l06329" name="l06329"></a><span class="lineno"> 6329</span>        <span class="keywordflow">if</span>( !vp.part().removed ) {</div>
<div class="line"><a id="l06330" name="l06330"></a><span class="lineno"> 6330</span>            <a class="code hl_function" href="classvehicle.html#a16b3772f72faa9f18472a45664b36463">shift_parts</a>( vp.mount() );</div>
<div class="line"><a id="l06331" name="l06331"></a><span class="lineno"> 6331</span>            <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l06332" name="l06332"></a><span class="lineno"> 6332</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l06333" name="l06333"></a><span class="lineno"> 6333</span>        }</div>
<div class="line"><a id="l06334" name="l06334"></a><span class="lineno"> 6334</span>    }</div>
<div class="line"><a id="l06335" name="l06335"></a><span class="lineno"> 6335</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l06336" name="l06336"></a><span class="lineno"> 6336</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l06882">get_all_parts()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>, <a class="el" href="point_8h_source.html#l00274">point_zero</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06279">shift_parts()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l01940">part_removal_cleanup()</a>, and <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>.</p>

</div>
</div>
<a id="a16b3772f72faa9f18472a45664b36463" name="a16b3772f72faa9f18472a45664b36463"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16b3772f72faa9f18472a45664b36463">&#9670;&nbsp;</a></span>shift_parts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::shift_parts </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>delta</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shifts all parts of the vehicle by the given amounts, and then shifts the vehicle itself in the opposite direction. </p>
<p >The end result is that the vehicle appears to have not moved. Useful for re-zeroing a vehicle to ensure that a (0, 0) part is always present. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">delta</td><td>How much to shift along each axis </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06279">6279</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06280" name="l06280"></a><span class="lineno"> 6280</span>{</div>
<div class="line"><a id="l06281" name="l06281"></a><span class="lineno"> 6281</span>    <span class="comment">// Don&#39;t invalidate the active item cache&#39;s location!</span></div>
<div class="line"><a id="l06282" name="l06282"></a><span class="lineno"> 6282</span>    <a class="code hl_variable" href="classvehicle.html#ad7894d7d5b3a20fb16927cd95d4d2a04">active_items</a>.<a class="code hl_function" href="classactive__item__cache.html#ac4ffa9b7a3fdfa5b37c20fddbd185d3f">subtract_locations</a>( delta );</div>
<div class="line"><a id="l06283" name="l06283"></a><span class="lineno"> 6283</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;elem : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l06284" name="l06284"></a><span class="lineno"> 6284</span>        elem.mount -= delta;</div>
<div class="line"><a id="l06285" name="l06285"></a><span class="lineno"> 6285</span>    }</div>
<div class="line"><a id="l06286" name="l06286"></a><span class="lineno"> 6286</span> </div>
<div class="line"><a id="l06287" name="l06287"></a><span class="lineno"> 6287</span>    <span class="keyword">decltype</span>( <a class="code hl_variable" href="classvehicle.html#a7c2d668e2b8f48a53f5c5e94aa2bd408">labels</a> ) new_labels;</div>
<div class="line"><a id="l06288" name="l06288"></a><span class="lineno"> 6288</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;l : <a class="code hl_variable" href="classvehicle.html#a7c2d668e2b8f48a53f5c5e94aa2bd408">labels</a> ) {</div>
<div class="line"><a id="l06289" name="l06289"></a><span class="lineno"> 6289</span>        new_labels.insert( <a class="code hl_struct" href="structlabel.html">label</a>( l - delta, l.text ) );</div>
<div class="line"><a id="l06290" name="l06290"></a><span class="lineno"> 6290</span>    }</div>
<div class="line"><a id="l06291" name="l06291"></a><span class="lineno"> 6291</span>    <a class="code hl_variable" href="classvehicle.html#a7c2d668e2b8f48a53f5c5e94aa2bd408">labels</a> = new_labels;</div>
<div class="line"><a id="l06292" name="l06292"></a><span class="lineno"> 6292</span> </div>
<div class="line"><a id="l06293" name="l06293"></a><span class="lineno"> 6293</span>    <span class="keyword">decltype</span>( <a class="code hl_variable" href="classvehicle.html#a90b6f438b5ae343dab2b131c64293584">loot_zones</a> ) new_zones;</div>
<div class="line"><a id="l06294" name="l06294"></a><span class="lineno"> 6294</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> <span class="keyword">const</span> &amp;z : <a class="code hl_variable" href="classvehicle.html#a90b6f438b5ae343dab2b131c64293584">loot_zones</a> ) {</div>
<div class="line"><a id="l06295" name="l06295"></a><span class="lineno"> 6295</span>        new_zones.emplace( z.first - delta, z.second );</div>
<div class="line"><a id="l06296" name="l06296"></a><span class="lineno"> 6296</span>    }</div>
<div class="line"><a id="l06297" name="l06297"></a><span class="lineno"> 6297</span>    <a class="code hl_variable" href="classvehicle.html#a90b6f438b5ae343dab2b131c64293584">loot_zones</a> = new_zones;</div>
<div class="line"><a id="l06298" name="l06298"></a><span class="lineno"> 6298</span> </div>
<div class="line"><a id="l06299" name="l06299"></a><span class="lineno"> 6299</span>    <a class="code hl_variable" href="classvehicle.html#afd4e8e8471b17450205d827dee8a41a5">pivot_anchor</a>[0] -= delta;</div>
<div class="line"><a id="l06300" name="l06300"></a><span class="lineno"> 6300</span>    <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l06301" name="l06301"></a><span class="lineno"> 6301</span>    <span class="comment">//Need to also update the map after this</span></div>
<div class="line"><a id="l06302" name="l06302"></a><span class="lineno"> 6302</span>    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.reset_vehicle_cache( <a class="code hl_variable" href="classvehicle.html#a34630935e46860003c616e0522316f02">sm_pos</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> );</div>
<div class="line"><a id="l06303" name="l06303"></a><span class="lineno"> 6303</span>}</div>
<div class="ttc" id="aclassactive__item__cache_html_ac4ffa9b7a3fdfa5b37c20fddbd185d3f"><div class="ttname"><a href="classactive__item__cache.html#ac4ffa9b7a3fdfa5b37c20fddbd185d3f">active_item_cache::subtract_locations</a></div><div class="ttdeci">void subtract_locations(const point &amp;delta)</div><div class="ttdoc">Subtract delta from every item_reference's location.</div><div class="ttdef"><b>Definition:</b> <a href="active__item__cache_8cpp_source.html#l00108">active_item_cache.cpp:108</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01807">active_items</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8h_source.html#l01801">labels</a>, <a class="el" href="vehicle_8h_source.html#l01806">loot_zones</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8h_source.html#l01889">pivot_anchor</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="vehicle_8h_source.html#l01844">sm_pos</a>, <a class="el" href="active__item__cache_8cpp_source.html#l00108">active_item_cache::subtract_locations()</a>, and <a class="el" href="point_8h_source.html#l00152">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l02117">find_and_split_vehicles()</a>, <a class="el" href="vehicle_8cpp_source.html#l06310">shift_if_needed()</a>, and <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>.</p>

</div>
</div>
<a id="a60ddd6b046628f4a437779ee21735937" name="a60ddd6b046628f4a437779ee21735937"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60ddd6b046628f4a437779ee21735937">&#9670;&nbsp;</a></span>slow_leak()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::slow_leak </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05114">5114</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05115" name="l05115"></a><span class="lineno"> 5115</span>{</div>
<div class="line"><a id="l05116" name="l05116"></a><span class="lineno"> 5116</span>    <span class="comment">// for each badly damaged tanks (lower than 50% health), leak a small amount</span></div>
<div class="line"><a id="l05117" name="l05117"></a><span class="lineno"> 5117</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;p : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l05118" name="l05118"></a><span class="lineno"> 5118</span>        <span class="keyword">auto</span> health = p.health_percent();</div>
<div class="line"><a id="l05119" name="l05119"></a><span class="lineno"> 5119</span>        <span class="keywordflow">if</span>( !p.is_leaking() || p.ammo_remaining() &lt;= 0 ) {</div>
<div class="line"><a id="l05120" name="l05120"></a><span class="lineno"> 5120</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05121" name="l05121"></a><span class="lineno"> 5121</span>        }</div>
<div class="line"><a id="l05122" name="l05122"></a><span class="lineno"> 5122</span> </div>
<div class="line"><a id="l05123" name="l05123"></a><span class="lineno"> 5123</span>        <span class="keyword">auto</span> fuel = p.ammo_current();</div>
<div class="line"><a id="l05124" name="l05124"></a><span class="lineno"> 5124</span>        <span class="keywordtype">int</span> qty = std::max( ( 0.5 - health ) * ( 0.5 - health ) * p.ammo_remaining() / 10, 1.0 );</div>
<div class="line"><a id="l05125" name="l05125"></a><span class="lineno"> 5125</span>        <a class="code hl_struct" href="structpoint.html">point</a> q = <a class="code hl_function" href="classvehicle.html#ad45ae53f6326f7fde4d8e59848470457">coord_translate</a>( p.mount );</div>
<div class="line"><a id="l05126" name="l05126"></a><span class="lineno"> 5126</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> dest = <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>() + <a class="code hl_struct" href="structtripoint.html">tripoint</a>( q, 0 );</div>
<div class="line"><a id="l05127" name="l05127"></a><span class="lineno"> 5127</span> </div>
<div class="line"><a id="l05128" name="l05128"></a><span class="lineno"> 5128</span>        <span class="keywordflow">if</span>( fuel != <a class="code hl_variable" href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a> &amp;&amp; !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.inbounds( dest ) ) {</div>
<div class="line"><a id="l05129" name="l05129"></a><span class="lineno"> 5129</span>            <span class="comment">// Don&#39;t try to leak off the edge of the world</span></div>
<div class="line"><a id="l05130" name="l05130"></a><span class="lineno"> 5130</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05131" name="l05131"></a><span class="lineno"> 5131</span>        }</div>
<div class="line"><a id="l05132" name="l05132"></a><span class="lineno"> 5132</span> </div>
<div class="line"><a id="l05133" name="l05133"></a><span class="lineno"> 5133</span>        <span class="comment">// damaged batteries self-discharge without leaking, plutonium leaks slurry</span></div>
<div class="line"><a id="l05134" name="l05134"></a><span class="lineno"> 5134</span>        <span class="keywordflow">if</span>( fuel != <a class="code hl_variable" href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a> &amp;&amp; fuel != <a class="code hl_variable" href="vehicle_8cpp.html#a59f51e93e35b379afce3b4d953656938">fuel_type_plutonium_cell</a> ) {</div>
<div class="line"><a id="l05135" name="l05135"></a><span class="lineno"> 5135</span>            <a class="code hl_class" href="classitem.html">item</a> leak( fuel, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, qty );</div>
<div class="line"><a id="l05136" name="l05136"></a><span class="lineno"> 5136</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_item_or_charges( dest, leak );</div>
<div class="line"><a id="l05137" name="l05137"></a><span class="lineno"> 5137</span>            p.ammo_consume( qty, <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( p ) );</div>
<div class="line"><a id="l05138" name="l05138"></a><span class="lineno"> 5138</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( fuel == <a class="code hl_variable" href="vehicle_8cpp.html#a59f51e93e35b379afce3b4d953656938">fuel_type_plutonium_cell</a> ) {</div>
<div class="line"><a id="l05139" name="l05139"></a><span class="lineno"> 5139</span>            <span class="keywordflow">if</span>( p.ammo_remaining() &gt;= <a class="code hl_variable" href="game__constants_8h.html#a48b9330c21bc6a0b8f99d7a3414cfe9f">PLUTONIUM_CHARGES</a> / 10 ) {</div>
<div class="line"><a id="l05140" name="l05140"></a><span class="lineno"> 5140</span>                <a class="code hl_class" href="classitem.html">item</a> leak( <span class="stringliteral">&quot;plut_slurry_dense&quot;</span>, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, qty );</div>
<div class="line"><a id="l05141" name="l05141"></a><span class="lineno"> 5141</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_item_or_charges( dest, leak );</div>
<div class="line"><a id="l05142" name="l05142"></a><span class="lineno"> 5142</span>                p.ammo_consume( qty * <a class="code hl_variable" href="game__constants_8h.html#a48b9330c21bc6a0b8f99d7a3414cfe9f">PLUTONIUM_CHARGES</a> / 10, <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( p ) );</div>
<div class="line"><a id="l05143" name="l05143"></a><span class="lineno"> 5143</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05144" name="l05144"></a><span class="lineno"> 5144</span>                p.ammo_consume( p.ammo_remaining(), <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( p ) );</div>
<div class="line"><a id="l05145" name="l05145"></a><span class="lineno"> 5145</span>            }</div>
<div class="line"><a id="l05146" name="l05146"></a><span class="lineno"> 5146</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05147" name="l05147"></a><span class="lineno"> 5147</span>            p.ammo_consume( qty, <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( p ) );</div>
<div class="line"><a id="l05148" name="l05148"></a><span class="lineno"> 5148</span>        }</div>
<div class="line"><a id="l05149" name="l05149"></a><span class="lineno"> 5149</span>    }</div>
<div class="line"><a id="l05150" name="l05150"></a><span class="lineno"> 5150</span>}</div>
<div class="ttc" id="agame__constants_8h_html_a48b9330c21bc6a0b8f99d7a3414cfe9f"><div class="ttname"><a href="game__constants_8h.html#a48b9330c21bc6a0b8f99d7a3414cfe9f">PLUTONIUM_CHARGES</a></div><div class="ttdeci">static constexpr int PLUTONIUM_CHARGES</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00077">game_constants.h:77</a></div></div>
<div class="ttc" id="avehicle_8cpp_html_a59f51e93e35b379afce3b4d953656938"><div class="ttname"><a href="vehicle_8cpp.html#a59f51e93e35b379afce3b4d953656938">fuel_type_plutonium_cell</a></div><div class="ttdeci">static const itype_id fuel_type_plutonium_cell(&quot;plut_cell&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l02988">coord_translate()</a>, <a class="el" href="vehicle_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, <a class="el" href="vehicle_8cpp.html#a59f51e93e35b379afce3b4d953656938">fuel_type_plutonium_cell</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l03101">global_pos3()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="game__constants_8h_source.html#l00077">PLUTONIUM_CHARGES</a>, and <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l00398">map::vehmove()</a>.</p>

</div>
</div>
<a id="a09364942b91a344a94af82fad1702918" name="a09364942b91a344a94af82fad1702918"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09364942b91a344a94af82fad1702918">&#9670;&nbsp;</a></span>slowdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::slowdown </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>velocity</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__move_8cpp_source.html#l00087">87</a> of file <a class="el" href="vehicle__move_8cpp_source.html">vehicle_move.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>{</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>    <span class="keywordtype">double</span> mps = <a class="code hl_function" href="vehicle__move_8cpp.html#a5b4f290597a25f2c2f9447eb786c37c5">vmiph_to_mps</a>( std::abs( at_velocity ) );</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span> </div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    <span class="comment">// slowdown due to air resistance is proportional to square of speed</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    <span class="keywordtype">double</span> f_total_drag = <a class="code hl_function" href="classvehicle.html#a8997e3518316057cde55f9ecb444b8f0">coeff_air_drag</a>() * mps * mps;</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a0ede4cc2a97a8305b1f06817d0d6cdf8">is_watercraft</a>() ) {</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>        <span class="comment">// same with water resistance</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>        f_total_drag += <a class="code hl_function" href="classvehicle.html#ae97aeac27584b839105a68f12eb1f7a1">coeff_water_drag</a>() * mps * mps;</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#aeafb913ad9b9d1341d51a4c51ba43a06">is_falling</a> &amp;&amp; !<a class="code hl_variable" href="classvehicle.html#a0a35b7f917fdb08e70a78315cc968f86">is_flying</a> ) {</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>        <span class="keywordtype">double</span> f_rolling_drag = <a class="code hl_function" href="classvehicle.html#acc7fb8b935b2f6f3d26efaf0fae16230">coeff_rolling_drag</a>() * ( <a class="code hl_variable" href="namespacevehicles.html#a38d998781d2493479832c6bff33e2f32">vehicles::rolling_constant_to_variable</a> + mps );</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacevehicle__movement.html#ad2c532fb5522d745b0006f7a3b36cab3">vehicle_movement::is_on_rails</a>( <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>(), *<span class="keyword">this</span> ) ) {</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>            <span class="comment">// vehicles on rails don&#39;t skid</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>            f_total_drag += f_rolling_drag;</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>            <span class="comment">// increase rolling resistance by up to 25x if the vehicle is skidding at right angle to facing</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>            <span class="keyword">const</span> <span class="keywordtype">double</span> skid_factor = 1.0 + 24.0 * std::abs( <a class="code hl_function" href="namespaceunits.html#a4b5ee56fbe0ef728f4b190e1282a5d82">units::sin</a>( <a class="code hl_variable" href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">face</a>.<a class="code hl_function" href="classtileray.html#a91ed01227e1754597024f4916f8bd6af">dir</a>() - <a class="code hl_variable" href="classvehicle.html#a8bbdfb41ea75fdc007feab08e2137aa2">move</a>.<a class="code hl_function" href="classtileray.html#a91ed01227e1754597024f4916f8bd6af">dir</a>() ) );</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>            f_total_drag += f_rolling_drag * skid_factor;</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>        }</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    }</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>    <span class="keywordtype">double</span> accel_slowdown = f_total_drag / <a class="code hl_function" href="namespaceunits.html#afbf21a7601bd939c196667fc0b020111">to_kilogram</a>( <a class="code hl_function" href="classvehicle.html#a5a7d83716bf73d4b58d265b626872d01">total_mass</a>() );</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    <span class="comment">// converting m/s^2 to vmiph/s</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    <span class="keywordtype">int</span> <a class="code hl_function" href="classvehicle.html#a09364942b91a344a94af82fad1702918">slowdown</a> = <a class="code hl_function" href="vehicle__move_8cpp.html#a3bf51af37129f24d376a74ca56b2644e">mps_to_vmiph</a>( accel_slowdown );</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a40b149ccb2383cb1a263f3e3d88f3469">is_towing</a>() ) {</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>        <a class="code hl_class" href="classvehicle.html">vehicle</a> *other_veh = <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a4cc6247530a16020db73b3af28e0024e">get_towed</a>();</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>        <span class="keywordflow">if</span>( other_veh ) {</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>            <a class="code hl_function" href="classvehicle.html#a09364942b91a344a94af82fad1702918">slowdown</a> += other_veh-&gt;<a class="code hl_function" href="classvehicle.html#a09364942b91a344a94af82fad1702918">slowdown</a>( at_velocity );</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>        }</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>    }</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a09364942b91a344a94af82fad1702918">slowdown</a> &lt; 0 ) {</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;vehicle %s has negative drag slowdown %d\n&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, <a class="code hl_function" href="classvehicle.html#a09364942b91a344a94af82fad1702918">slowdown</a> );</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    }</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;%s at %d vimph, f_drag %3.2f, drag accel %d vmiph - extra drag %d&quot;</span>,</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>             <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, at_velocity, f_total_drag, <a class="code hl_function" href="classvehicle.html#a09364942b91a344a94af82fad1702918">slowdown</a>, <a class="code hl_function" href="classvehicle.html#a07afedd1263adc69d4ddf5967b18d1c9">static_drag</a>() );</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>    <span class="comment">// plows slow rolling vehicles, but not falling or floating vehicles</span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>    <span class="keywordflow">if</span>( !( <a class="code hl_variable" href="classvehicle.html#aeafb913ad9b9d1341d51a4c51ba43a06">is_falling</a> || <a class="code hl_variable" href="classvehicle.html#ae3cbbbb890aa9a12504ec3458746f3e1">is_floating</a> || <a class="code hl_variable" href="classvehicle.html#a0a35b7f917fdb08e70a78315cc968f86">is_flying</a> ) ) {</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>        <a class="code hl_function" href="classvehicle.html#a09364942b91a344a94af82fad1702918">slowdown</a> -= <a class="code hl_function" href="classvehicle.html#a07afedd1263adc69d4ddf5967b18d1c9">static_drag</a>();</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>    }</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span> </div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    <span class="keywordflow">return</span> std::max( 1, <a class="code hl_function" href="classvehicle.html#a09364942b91a344a94af82fad1702918">slowdown</a> );</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>}</div>
<div class="ttc" id="aclassvehicle_html_a07afedd1263adc69d4ddf5967b18d1c9"><div class="ttname"><a href="classvehicle.html#a07afedd1263adc69d4ddf5967b18d1c9">vehicle::static_drag</a></div><div class="ttdeci">int static_drag(bool actual=true) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04121">vehicle.cpp:4121</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="vehicle_8cpp_source.html#l03789">coeff_air_drag()</a>, <a class="el" href="vehicle_8cpp_source.html#l03928">coeff_rolling_drag()</a>, <a class="el" href="vehicle_8cpp_source.html#l04047">coeff_water_drag()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="tileray_8cpp_source.html#l00074">tileray::dir()</a>, <a class="el" href="vehicle_8h_source.html#l01891">face</a>, <a class="el" href="map_8cpp_source.html#l00141">get_map()</a>, <a class="el" href="vehicle_8h_source.html#l00158">towing_data::get_towed()</a>, <a class="el" href="vehicle_8h_source.html#l01946">is_falling</a>, <a class="el" href="vehicle_8h_source.html#l01913">is_floating</a>, <a class="el" href="vehicle_8h_source.html#l01917">is_flying</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01850">vehicle_movement::is_on_rails()</a>, <a class="el" href="vehicle_8cpp_source.html#l05844">is_towing()</a>, <a class="el" href="vehicle_8cpp_source.html#l04037">is_watercraft()</a>, <a class="el" href="enums_8h_source.html#l00264">m_debug</a>, <a class="el" href="vehicle_8h_source.html#l01893">move</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00066">mps_to_vmiph()</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="vehicle_8h_source.html#l00067">vehicles::rolling_constant_to_variable</a>, <a class="el" href="units__angle_8h_source.html#l00052">units::sin()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00087">slowdown()</a>, <a class="el" href="vehicle_8cpp_source.html#l04121">static_drag()</a>, <a class="el" href="units__mass_8h_source.html#l00073">units::to_kilogram()</a>, <a class="el" href="vehicle_8cpp_source.html#l03126">total_mass()</a>, <a class="el" href="vehicle_8h_source.html#l01887">tow_data</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00072">vmiph_to_mps()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05361">gain_moves()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00087">slowdown()</a>.</p>

</div>
</div>
<a id="a8b023391122d88cc354e7fca903cec54" name="a8b023391122d88cc354e7fca903cec54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b023391122d88cc354e7fca903cec54">&#9670;&nbsp;</a></span>smash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::smash </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmap.html">map</a> &amp;&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>hp_percent_loss_min</em> = <code>0.1f</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>hp_percent_loss_max</em> = <code>1.2f</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>percent_of_parts_to_affect</em> = <code>1.0f</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpoint.html">point</a>&#160;</td>
          <td class="paramname"><em>damage_origin</em> = <code><a class="el" href="point_8h.html#a0ee2195dcb488ae55fbf4316f5011172">point_zero</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>damage_size</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Smashes up a vehicle that has already been placed; used for generating very damaged vehicles. </p>
<p >Additionally, any spot where two vehicles overlapped (i.e., any spot with multiple frames) will be completely destroyed, as that was the collision point. </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l00936">936</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>{</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>        <span class="comment">//Skip any parts already mashed up or removed.</span></div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.<a class="code hl_function" href="structvehicle__part.html#aeee4fac34f34d6c9ff557fde6590439d">is_broken</a>() || <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.<a class="code hl_variable" href="structvehicle__part.html#ab1d4873f1384392595a1e01c463543a5">removed</a> ) {</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>        }</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span> </div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>        std::vector&lt;int&gt; parts_in_square = <a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.<a class="code hl_variable" href="structvehicle__part.html#ac6e2dfa7178b8bed91baea3543961a86">mount</a>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>        <span class="keywordtype">int</span> structures_found = 0;</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;square_part_index : parts_in_square ) {</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( square_part_index ).location == <a class="code hl_function" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure</a> ) {</div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>                structures_found++;</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>            }</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>        }</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span> </div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>        <span class="keywordflow">if</span>( structures_found &gt; 1 ) {</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>            <span class="comment">//Destroy everything in the square</span></div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> idx : parts_in_square ) {</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>                <a class="code hl_function" href="classvehicle.html#a9c80007e6bb704ab32bd6c8adafff454">mod_hp</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ idx ], 0 - <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ idx ].hp(), <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa5f8b46c6c239266403858fa2ae90ef23">DT_BASH</a> );</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>                <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ idx ].ammo_unset();</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>            }</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>        }</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span> </div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>        <span class="keywordtype">int</span> roll = <a class="code hl_function" href="rng_8cpp.html#a7ba03e7147e43d808dc29c54bce9e57f">dice</a>( 1, 1000 );</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>        <span class="keywordtype">int</span> pct_af = ( percent_of_parts_to_affect * 1000.0f );</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>        <span class="keywordflow">if</span>( roll &lt; pct_af ) {</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>            <span class="keywordtype">double</span> dist =  damage_size == 0.0f ? 1.0f :</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>                           <a class="code hl_function" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( 1.0f - <a class="code hl_function" href="coordinates_8h.html#adf2fa43699f878fca49a987112d4aa03">trig_dist</a>( damage_origin, <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.<a class="code hl_variable" href="structvehicle__part.html#a59d594dfb3854c67c2a04065c947cc3c">precalc</a>[0].xy() ) /</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>                                  damage_size, 0.0f, 1.0f );</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>            <span class="comment">//Everywhere else, drop by 10-120% of max HP (anything over 100 = broken)</span></div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a9c80007e6bb704ab32bd6c8adafff454">mod_hp</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, 0 - ( <a class="code hl_function" href="rng_8cpp.html#a0c88381d6334a2fbaa726c53f5cf9bb9">rng_float</a>( hp_percent_loss_min * dist,</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>                                               hp_percent_loss_max * dist ) *</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>                                    <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_variable" href="classvpart__info.html#aeb9e00627b8cb80d28fb1419e7f0928a">durability</a> ), <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa5f8b46c6c239266403858fa2ae90ef23">DT_BASH</a> ) ) {</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>                <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.<a class="code hl_function" href="structvehicle__part.html#a6f491190dc49841d818e4987e66ddbb4">ammo_unset</a>();</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>            }</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>        }</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>    }</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span> </div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>    std::unique_ptr&lt;RemovePartHandler&gt; handler_ptr;</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>    <span class="comment">// clear out any duplicated locations</span></div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> p = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size() ) - 1; p &gt;= 0; p-- ) {</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>        <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ p ];</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.<a class="code hl_variable" href="structvehicle__part.html#ab1d4873f1384392595a1e01c463543a5">removed</a> ) {</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>        }</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>        std::vector&lt;int&gt; parts_here = <a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>.<a class="code hl_variable" href="structvehicle__part.html#ac6e2dfa7178b8bed91baea3543961a86">mount</a>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> other_i = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( parts_here.size() ) - 1; other_i &gt;= 0; other_i -- ) {</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>            <span class="keywordtype">int</span> other_p = parts_here[ other_i ];</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>            <span class="keywordflow">if</span>( p == other_p ) {</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>            }</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>            <span class="keyword">const</span> <a class="code hl_class" href="classvpart__info.html">vpart_info</a> &amp;p_info = <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( p );</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>            <span class="keyword">const</span> <a class="code hl_class" href="classvpart__info.html">vpart_info</a> &amp;other_p_info = <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( other_p );</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span> </div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>            <span class="keywordflow">if</span>( p_info.<a class="code hl_function" href="classvpart__info.html#a3beec15086f138455d92d1897d867780">get_id</a>() == other_p_info.<a class="code hl_function" href="classvpart__info.html#a3beec15086f138455d92d1897d867780">get_id</a>() ||</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>                ( !p_info.<a class="code hl_variable" href="classvpart__info.html#a03cfe554b18beb9c32d9a86872a1748e">location</a>.empty() &amp;&amp; p_info.<a class="code hl_variable" href="classvpart__info.html#a03cfe554b18beb9c32d9a86872a1748e">location</a> == other_p_info.<a class="code hl_variable" href="classvpart__info.html#a03cfe554b18beb9c32d9a86872a1748e">location</a> ) ) {</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>                <span class="comment">// Deferred creation of the handler to here so it is only created when actually needed.</span></div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>                <span class="keywordflow">if</span>( !handler_ptr ) {</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>                    <span class="comment">// This is a heuristic: we just assume the default handler is good enough when called</span></div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>                    <span class="comment">// on the main game map. And assume that we run from some mapgen code if called on</span></div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>                    <span class="comment">// another instance.</span></div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>                    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a> &amp;&amp; &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m == &amp;m ) {</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>                        handler_ptr = std::make_unique&lt;DefaultRemovePartHandler&gt;();</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>                        handler_ptr = std::make_unique&lt;MapgenRemovePartHandler&gt;( m );</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>                    }</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>                }</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>                <a class="code hl_function" href="classvehicle.html#a04638c5234928c4ccca14ddc2059fb11">remove_part</a>( other_p, *handler_ptr );</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>            }</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>        }</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>    }</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>}</div>
<div class="ttc" id="acoordinates_8h_html_adf2fa43699f878fca49a987112d4aa03"><div class="ttname"><a href="coordinates_8h.html#adf2fa43699f878fca49a987112d4aa03">trig_dist</a></div><div class="ttdeci">int trig_dist(const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00512">coordinates.h:512</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle__part_8cpp_source.html#l00279">vehicle_part::ammo_unset()</a>, <a class="el" href="cata__utility_8h_source.html#l00145">clamp()</a>, <a class="el" href="rng_8cpp_source.html#l00085">dice()</a>, <a class="el" href="damage_8h_source.html#l00024">DT_BASH</a>, <a class="el" href="veh__type_8h_source.html#l00173">vpart_info::durability</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="veh__type_8h_source.html#l00147">vpart_info::get_id()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00519">vehicle_part::info()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00170">vehicle_part::is_broken()</a>, <a class="el" href="veh__type_8h_source.html#l00155">vpart_info::location</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00540">mod_hp()</a>, <a class="el" href="vehicle_8h_source.html#l00367">vehicle_part::mount</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>, <a class="el" href="vehicle_8h_source.html#l00371">vehicle_part::precalc</a>, <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>, <a class="el" href="vehicle_8h_source.html#l00410">vehicle_part::removed</a>, <a class="el" href="rng_8cpp_source.html#l00028">rng_float()</a>, and <a class="el" href="coordinates_8h_source.html#l00512">trig_dist()</a>.</p>

<p class="reference">Referenced by <a class="el" href="map__extras_8cpp_source.html#l00336">MapExtras::mx_helicopter()</a>, and <a class="el" href="monmove_8cpp_source.html#l02021">monster::shove_vehicle()</a>.</p>

</div>
</div>
<a id="a726572f5d8dc1c0123bc0ea2357499d9" name="a726572f5d8dc1c0123bc0ea2357499d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a726572f5d8dc1c0123bc0ea2357499d9">&#9670;&nbsp;</a></span>smash_security_system()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::smash_security_system </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
Mechanics reduces chance of damaging controls when smashing security system 
<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l00492">492</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>{</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span> </div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>    <span class="comment">//get security and controls location</span></div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>    <span class="keywordtype">int</span> s = -1;</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> = -1;</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> p : <a class="code hl_variable" href="classvehicle.html#aa33bd32301526128292da1ec7f78be55">speciality</a> ) {</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( p, <span class="stringliteral">&quot;SECURITY&quot;</span> ) &amp;&amp; !<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ p ].is_broken() ) {</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>            s = p;</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>            <a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> = <a class="code hl_function" href="classvehicle.html#a00f013bfeaa4b6d44eaa67961f0c1e59">part_with_feature</a>( s, <span class="stringliteral">&quot;CONTROLS&quot;</span>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>        }</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>    }</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>    <span class="comment">//controls and security must both be valid</span></div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> &gt;= 0 &amp;&amp; s &gt;= 0 ) {<span class="comment"></span></div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span><span class="comment">        ///\EFFECT_MECHANICS reduces chance of damaging controls when smashing security system</span></div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span><span class="comment"></span>        <span class="keywordtype">int</span> skill = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.get_skill_level( <a class="code hl_variable" href="vehicle__use_8cpp.html#a53a27ba882bb24158d8752e53158bf46">skill_mechanics</a> );</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>        <span class="keywordtype">int</span> percent_controls = 70 / ( 1 + skill );</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>        <span class="keywordtype">int</span> percent_alarm = ( skill + 3 ) * 10;</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>        <span class="keywordtype">int</span> rand = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 100 );</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span> </div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>        <span class="keywordflow">if</span>( percent_controls &gt; rand ) {</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>            <a class="code hl_function" href="classvehicle.html#ac2de625db1619f042c4a3a69d0995a6a">damage_direct</a>( <a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>, <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( <a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> ).durability / 4 );</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span> </div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> ].removed || <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> ].is_broken() ) {</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.controlling_vehicle = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>                <a class="code hl_variable" href="classvehicle.html#a949775a37c7daa7a6b67e510f548bca3">is_alarm_on</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You destroy the controls…&quot;</span> ) );</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You damage the controls.&quot;</span> ) );</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>            }</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>        }</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>        <span class="keywordflow">if</span>( percent_alarm &gt; rand ) {</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>            <a class="code hl_function" href="classvehicle.html#ac2de625db1619f042c4a3a69d0995a6a">damage_direct</a>( s, <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( s ).durability / 5 );</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>            <span class="comment">// chance to disable alarm immediately, or disable on destruction</span></div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>            <span class="keywordflow">if</span>( percent_alarm / 4 &gt; rand || <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ s ].is_broken() ) {</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>                <a class="code hl_variable" href="classvehicle.html#a949775a37c7daa7a6b67e510f548bca3">is_alarm_on</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>            }</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>        }</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( ( <a class="code hl_variable" href="classvehicle.html#a949775a37c7daa7a6b67e510f548bca3">is_alarm_on</a> ) ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The alarm keeps going.&quot;</span> ) : <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The alarm stops.&quot;</span> ) );</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;No security system found on vehicle.&quot;</span> );</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>    }</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="magic_8cpp_source.html#l01031">c</a>, <a class="el" href="vehicle_8cpp_source.html#l06437">damage_direct()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8h_source.html#l01936">is_alarm_on</a>, <a class="el" href="vehicle_8cpp_source.html#l02875">part_flag()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8cpp_source.html#l02518">part_with_feature()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="vehicle__use_8cpp.html#a53a27ba882bb24158d8752e53158bf46">skill_mechanics</a>, and <a class="el" href="vehicle_8h_source.html#l01766">speciality</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="a9f15b9fb1b1f72f1baf6dacfc5b05206" name="a9f15b9fb1b1f72f1baf6dacfc5b05206"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f15b9fb1b1f72f1baf6dacfc5b05206">&#9670;&nbsp;</a></span>spew_field()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::spew_field </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>joules</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>part</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="type__id_8h.html#a2a56520b7eef7294fc98230cb883c9d2">field_type_id</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>intensity</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03623">3623</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03624" name="l03624"></a><span class="lineno"> 3624</span>{</div>
<div class="line"><a id="l03625" name="l03625"></a><span class="lineno"> 3625</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 10000 ) &gt; joules ) {</div>
<div class="line"><a id="l03626" name="l03626"></a><span class="lineno"> 3626</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03627" name="l03627"></a><span class="lineno"> 3627</span>    }</div>
<div class="line"><a id="l03628" name="l03628"></a><span class="lineno"> 3628</span>    <a class="code hl_struct" href="structpoint.html">point</a> p = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].mount;</div>
<div class="line"><a id="l03629" name="l03629"></a><span class="lineno"> 3629</span>    <a class="code hl_enumvalue" href="namespacefields.html#af8bc739ca8fbe535a44afc02da973280a04bb0ec2d0e931c59f606510558e55a1">intensity</a> = std::max( joules / 10000, <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( intensity ) );</div>
<div class="line"><a id="l03630" name="l03630"></a><span class="lineno"> 3630</span>    <span class="comment">// Move back from engine/muffler until we find an open space</span></div>
<div class="line"><a id="l03631" name="l03631"></a><span class="lineno"> 3631</span>    <span class="keywordflow">while</span>( <a class="code hl_variable" href="classvehicle.html#a92654cefac764c60371c47e0b406a991">relative_parts</a>.find( p ) != <a class="code hl_variable" href="classvehicle.html#a92654cefac764c60371c47e0b406a991">relative_parts</a>.end() ) {</div>
<div class="line"><a id="l03632" name="l03632"></a><span class="lineno"> 3632</span>        p.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> += ( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &lt; 0 ? 1 : -1 );</div>
<div class="line"><a id="l03633" name="l03633"></a><span class="lineno"> 3633</span>    }</div>
<div class="line"><a id="l03634" name="l03634"></a><span class="lineno"> 3634</span>    <a class="code hl_struct" href="structpoint.html">point</a> q = <a class="code hl_function" href="classvehicle.html#ad45ae53f6326f7fde4d8e59848470457">coord_translate</a>( p );</div>
<div class="line"><a id="l03635" name="l03635"></a><span class="lineno"> 3635</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> dest = <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>() + <a class="code hl_struct" href="structtripoint.html">tripoint</a>( q, 0 );</div>
<div class="line"><a id="l03636" name="l03636"></a><span class="lineno"> 3636</span>    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.mod_field_intensity( dest, <a class="code hl_variable" href="classvehicle.html#a22b8b1fe66df7091af2eb16f62fb711b">type</a>, intensity );</div>
<div class="line"><a id="l03637" name="l03637"></a><span class="lineno"> 3637</span>}</div>
<div class="ttc" id="anamespacefields_html_af8bc739ca8fbe535a44afc02da973280a04bb0ec2d0e931c59f606510558e55a1"><div class="ttname"><a href="namespacefields.html#af8bc739ca8fbe535a44afc02da973280a04bb0ec2d0e931c59f606510558e55a1">fields::stacking_type::intensity</a></div><div class="ttdeci">@ intensity</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l02988">coord_translate()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l03101">global_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8h_source.html#l01800">relative_parts</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="vehicle_8h_source.html#l01798">type</a>, <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>, and <a class="el" href="point_8h_source.html#l00038">point::x</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03644">noise_and_smoke()</a>.</p>

</div>
</div>
<a id="a4e87fc465ea66ba46f29f09bcc68b6bb" name="a4e87fc465ea66ba46f29f09bcc68b6bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e87fc465ea66ba46f29f09bcc68b6bb">&#9670;&nbsp;</a></span>split_vehicles() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::split_vehicles </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; std::vector&lt; int &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>new_veh</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02380">2380</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02381" name="l02381"></a><span class="lineno"> 2381</span>{</div>
<div class="line"><a id="l02382" name="l02382"></a><span class="lineno"> 2382</span>    std::vector&lt;vehicle *&gt; null_vehicles;</div>
<div class="line"><a id="l02383" name="l02383"></a><span class="lineno"> 2383</span>    std::vector&lt;std::vector &lt;point&gt;&gt; null_mounts;</div>
<div class="line"><a id="l02384" name="l02384"></a><span class="lineno"> 2384</span>    std::vector&lt;point&gt; <a class="code hl_function" href="namespacetalk__function.html#aefb22fa61f477e5c65d11b767307564d">nothing</a>;</div>
<div class="line"><a id="l02385" name="l02385"></a><span class="lineno"> 2385</span>    null_vehicles.assign( new_vehs.size(), <span class="keyword">nullptr</span> );</div>
<div class="line"><a id="l02386" name="l02386"></a><span class="lineno"> 2386</span>    null_mounts.assign( new_vehs.size(), <a class="code hl_function" href="namespacetalk__function.html#aefb22fa61f477e5c65d11b767307564d">nothing</a> );</div>
<div class="line"><a id="l02387" name="l02387"></a><span class="lineno"> 2387</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a90e64bb680f1b708b645df8d06028366">split_vehicles</a>( new_vehs, null_vehicles, null_mounts );</div>
<div class="line"><a id="l02388" name="l02388"></a><span class="lineno"> 2388</span>}</div>
<div class="ttc" id="anamespacetalk__function_html_aefb22fa61f477e5c65d11b767307564d"><div class="ttname"><a href="namespacetalk__function.html#aefb22fa61f477e5c65d11b767307564d">talk_function::nothing</a></div><div class="ttdeci">void nothing(npc &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="npctalk__funcs_8cpp_source.html#l00094">npctalk_funcs.cpp:94</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="npctalk__funcs_8cpp_source.html#l00094">talk_function::nothing()</a>, and <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>.</p>

</div>
</div>
<a id="a90e64bb680f1b708b645df8d06028366" name="a90e64bb680f1b708b645df8d06028366"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90e64bb680f1b708b645df8d06028366">&#9670;&nbsp;</a></span>split_vehicles() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::split_vehicles </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; std::vector&lt; int &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>new_vehs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classvehicle.html">vehicle</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>new_vehicles</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::vector&lt; <a class="el" href="structpoint.html">point</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>new_mounts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l02222">2222</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02225" name="l02225"></a><span class="lineno"> 2225</span>{</div>
<div class="line"><a id="l02226" name="l02226"></a><span class="lineno"> 2226</span>    <span class="keywordtype">bool</span> did_split = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02227" name="l02227"></a><span class="lineno"> 2227</span>    <span class="keywordtype">size_t</span> i = 0;</div>
<div class="line"><a id="l02228" name="l02228"></a><span class="lineno"> 2228</span>    <span class="keywordflow">for</span>( i = 0; i &lt; new_vehs.size(); i ++ ) {</div>
<div class="line"><a id="l02229" name="l02229"></a><span class="lineno"> 2229</span>        std::vector&lt;int&gt; split_parts = new_vehs[ i ];</div>
<div class="line"><a id="l02230" name="l02230"></a><span class="lineno"> 2230</span>        <span class="keywordflow">if</span>( split_parts.empty() ) {</div>
<div class="line"><a id="l02231" name="l02231"></a><span class="lineno"> 2231</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02232" name="l02232"></a><span class="lineno"> 2232</span>        }</div>
<div class="line"><a id="l02233" name="l02233"></a><span class="lineno"> 2233</span>        std::vector&lt;point&gt; split_mounts = new_mounts[ i ];</div>
<div class="line"><a id="l02234" name="l02234"></a><span class="lineno"> 2234</span>        did_split = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02235" name="l02235"></a><span class="lineno"> 2235</span> </div>
<div class="line"><a id="l02236" name="l02236"></a><span class="lineno"> 2236</span>        <a class="code hl_class" href="classvehicle.html">vehicle</a> *new_vehicle = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02237" name="l02237"></a><span class="lineno"> 2237</span>        <span class="keywordflow">if</span>( i &lt; new_vehicles.size() ) {</div>
<div class="line"><a id="l02238" name="l02238"></a><span class="lineno"> 2238</span>            new_vehicle = new_vehicles[ i ];</div>
<div class="line"><a id="l02239" name="l02239"></a><span class="lineno"> 2239</span>        }</div>
<div class="line"><a id="l02240" name="l02240"></a><span class="lineno"> 2240</span>        <span class="keywordtype">int</span> split_part0 = split_parts.front();</div>
<div class="line"><a id="l02241" name="l02241"></a><span class="lineno"> 2241</span>        <a class="code hl_struct" href="structtripoint.html">tripoint</a> new_v_pos3;</div>
<div class="line"><a id="l02242" name="l02242"></a><span class="lineno"> 2242</span>        <a class="code hl_struct" href="structpoint.html">point</a> mnt_offset;</div>
<div class="line"><a id="l02243" name="l02243"></a><span class="lineno"> 2243</span> </div>
<div class="line"><a id="l02244" name="l02244"></a><span class="lineno"> 2244</span>        <span class="keyword">decltype</span>( <a class="code hl_variable" href="classvehicle.html#a7c2d668e2b8f48a53f5c5e94aa2bd408">labels</a> ) new_labels;</div>
<div class="line"><a id="l02245" name="l02245"></a><span class="lineno"> 2245</span>        <span class="keyword">decltype</span>( <a class="code hl_variable" href="classvehicle.html#a90b6f438b5ae343dab2b131c64293584">loot_zones</a> ) new_zones;</div>
<div class="line"><a id="l02246" name="l02246"></a><span class="lineno"> 2246</span>        <span class="keywordflow">if</span>( new_vehicle == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l02247" name="l02247"></a><span class="lineno"> 2247</span>            <span class="comment">// make sure the split_part0 is a legal 0,0 part</span></div>
<div class="line"><a id="l02248" name="l02248"></a><span class="lineno"> 2248</span>            <span class="keywordflow">if</span>( split_parts.size() &gt; 1 ) {</div>
<div class="line"><a id="l02249" name="l02249"></a><span class="lineno"> 2249</span>                <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> sp = 0; sp &lt; split_parts.size(); sp++ ) {</div>
<div class="line"><a id="l02250" name="l02250"></a><span class="lineno"> 2250</span>                    <span class="keywordtype">int</span> p = split_parts[ sp ];</div>
<div class="line"><a id="l02251" name="l02251"></a><span class="lineno"> 2251</span>                    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( p ).<a class="code hl_variable" href="classvpart__info.html#a03cfe554b18beb9c32d9a86872a1748e">location</a> == <a class="code hl_function" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure</a> &amp;&amp;</div>
<div class="line"><a id="l02252" name="l02252"></a><span class="lineno"> 2252</span>                        !<a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( p ).<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;PROTRUSION&quot;</span> ) ) {</div>
<div class="line"><a id="l02253" name="l02253"></a><span class="lineno"> 2253</span>                        split_part0 = sp;</div>
<div class="line"><a id="l02254" name="l02254"></a><span class="lineno"> 2254</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02255" name="l02255"></a><span class="lineno"> 2255</span>                    }</div>
<div class="line"><a id="l02256" name="l02256"></a><span class="lineno"> 2256</span>                }</div>
<div class="line"><a id="l02257" name="l02257"></a><span class="lineno"> 2257</span>            }</div>
<div class="line"><a id="l02258" name="l02258"></a><span class="lineno"> 2258</span>            new_v_pos3 = <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ split_part0 ] );</div>
<div class="line"><a id="l02259" name="l02259"></a><span class="lineno"> 2259</span>            mnt_offset = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ split_part0 ].mount;</div>
<div class="line"><a id="l02260" name="l02260"></a><span class="lineno"> 2260</span>            new_vehicle = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_vehicle( <a class="code hl_typedef" href="type__id_8h.html#a64efc8ab51816a59711440d464136eda">vproto_id</a>( <span class="stringliteral">&quot;none&quot;</span> ), new_v_pos3, <a class="code hl_variable" href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">face</a>.<a class="code hl_function" href="classtileray.html#a91ed01227e1754597024f4916f8bd6af">dir</a>() );</div>
<div class="line"><a id="l02261" name="l02261"></a><span class="lineno"> 2261</span>            <span class="keywordflow">if</span>( new_vehicle == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l02262" name="l02262"></a><span class="lineno"> 2262</span>                <span class="comment">// the split part was out of the map bounds.</span></div>
<div class="line"><a id="l02263" name="l02263"></a><span class="lineno"> 2263</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02264" name="l02264"></a><span class="lineno"> 2264</span>            }</div>
<div class="line"><a id="l02265" name="l02265"></a><span class="lineno"> 2265</span>            new_vehicle-&gt;<a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> = <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>;</div>
<div class="line"><a id="l02266" name="l02266"></a><span class="lineno"> 2266</span>            new_vehicle-&gt;<a class="code hl_variable" href="classvehicle.html#a8bbdfb41ea75fdc007feab08e2137aa2">move</a> = <a class="code hl_variable" href="classvehicle.html#a8bbdfb41ea75fdc007feab08e2137aa2">move</a>;</div>
<div class="line"><a id="l02267" name="l02267"></a><span class="lineno"> 2267</span>            new_vehicle-&gt;<a class="code hl_variable" href="classvehicle.html#af366981a584e12d25133fb479d47de33">turn_dir</a> = <a class="code hl_variable" href="classvehicle.html#af366981a584e12d25133fb479d47de33">turn_dir</a>;</div>
<div class="line"><a id="l02268" name="l02268"></a><span class="lineno"> 2268</span>            new_vehicle-&gt;<a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> = <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a>;</div>
<div class="line"><a id="l02269" name="l02269"></a><span class="lineno"> 2269</span>            new_vehicle-&gt;<a class="code hl_variable" href="classvehicle.html#a416a2bc9ee792663fced3344db322cb8">vertical_velocity</a> = <a class="code hl_variable" href="classvehicle.html#a416a2bc9ee792663fced3344db322cb8">vertical_velocity</a>;</div>
<div class="line"><a id="l02270" name="l02270"></a><span class="lineno"> 2270</span>            new_vehicle-&gt;<a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> = <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a>;</div>
<div class="line"><a id="l02271" name="l02271"></a><span class="lineno"> 2271</span>            new_vehicle-&gt;<a class="code hl_variable" href="classvehicle.html#abdf6601268460dc437ef079590deb33b">cruise_on</a> = <a class="code hl_variable" href="classvehicle.html#abdf6601268460dc437ef079590deb33b">cruise_on</a>;</div>
<div class="line"><a id="l02272" name="l02272"></a><span class="lineno"> 2272</span>            new_vehicle-&gt;<a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> = <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a>;</div>
<div class="line"><a id="l02273" name="l02273"></a><span class="lineno"> 2273</span>            new_vehicle-&gt;<a class="code hl_variable" href="classvehicle.html#abe5f5ade599d2cd543a3e3c3860bc051">tracking_on</a> = <a class="code hl_variable" href="classvehicle.html#abe5f5ade599d2cd543a3e3c3860bc051">tracking_on</a>;</div>
<div class="line"><a id="l02274" name="l02274"></a><span class="lineno"> 2274</span>            new_vehicle-&gt;<a class="code hl_variable" href="classvehicle.html#a70a0f1b85b1b3eed228b92d7b70334b1">camera_on</a> = <a class="code hl_variable" href="classvehicle.html#a70a0f1b85b1b3eed228b92d7b70334b1">camera_on</a>;</div>
<div class="line"><a id="l02275" name="l02275"></a><span class="lineno"> 2275</span>        }</div>
<div class="line"><a id="l02276" name="l02276"></a><span class="lineno"> 2276</span>        new_vehicle-&gt;<a class="code hl_variable" href="classvehicle.html#a10fc2ae6531f87ae9e7f304ec6ec811e">last_fluid_check</a> = <a class="code hl_variable" href="classvehicle.html#a10fc2ae6531f87ae9e7f304ec6ec811e">last_fluid_check</a>;</div>
<div class="line"><a id="l02277" name="l02277"></a><span class="lineno"> 2277</span> </div>
<div class="line"><a id="l02278" name="l02278"></a><span class="lineno"> 2278</span>        std::vector&lt;player *&gt; passengers;</div>
<div class="line"><a id="l02279" name="l02279"></a><span class="lineno"> 2279</span>        <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> new_part = 0; new_part &lt; split_parts.size(); new_part++ ) {</div>
<div class="line"><a id="l02280" name="l02280"></a><span class="lineno"> 2280</span>            <span class="keywordtype">int</span> mov_part = split_parts[ new_part ];</div>
<div class="line"><a id="l02281" name="l02281"></a><span class="lineno"> 2281</span>            <a class="code hl_struct" href="structpoint.html">point</a> cur_mount = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ mov_part ].mount;</div>
<div class="line"><a id="l02282" name="l02282"></a><span class="lineno"> 2282</span>            <a class="code hl_struct" href="structpoint.html">point</a> new_mount = cur_mount;</div>
<div class="line"><a id="l02283" name="l02283"></a><span class="lineno"> 2283</span>            <span class="keywordflow">if</span>( !split_mounts.empty() ) {</div>
<div class="line"><a id="l02284" name="l02284"></a><span class="lineno"> 2284</span>                new_mount = split_mounts[ new_part ];</div>
<div class="line"><a id="l02285" name="l02285"></a><span class="lineno"> 2285</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02286" name="l02286"></a><span class="lineno"> 2286</span>                new_mount -= mnt_offset;</div>
<div class="line"><a id="l02287" name="l02287"></a><span class="lineno"> 2287</span>            }</div>
<div class="line"><a id="l02288" name="l02288"></a><span class="lineno"> 2288</span> </div>
<div class="line"><a id="l02289" name="l02289"></a><span class="lineno"> 2289</span>            <a class="code hl_class" href="classplayer.html">player</a> *passenger = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02290" name="l02290"></a><span class="lineno"> 2290</span>            <span class="comment">// Unboard any entities standing on any transferred part</span></div>
<div class="line"><a id="l02291" name="l02291"></a><span class="lineno"> 2291</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( mov_part, <span class="stringliteral">&quot;BOARDABLE&quot;</span> ) ) {</div>
<div class="line"><a id="l02292" name="l02292"></a><span class="lineno"> 2292</span>                passenger = <a class="code hl_function" href="classvehicle.html#af02a0418851ddf50fcc810951d77b076">get_passenger</a>( mov_part );</div>
<div class="line"><a id="l02293" name="l02293"></a><span class="lineno"> 2293</span>                <span class="keywordflow">if</span>( passenger ) {</div>
<div class="line"><a id="l02294" name="l02294"></a><span class="lineno"> 2294</span>                    passengers.push_back( passenger );</div>
<div class="line"><a id="l02295" name="l02295"></a><span class="lineno"> 2295</span>                }</div>
<div class="line"><a id="l02296" name="l02296"></a><span class="lineno"> 2296</span>            }</div>
<div class="line"><a id="l02297" name="l02297"></a><span class="lineno"> 2297</span>            <span class="comment">// if this part is a towing part, transfer the tow_data to the new vehicle.</span></div>
<div class="line"><a id="l02298" name="l02298"></a><span class="lineno"> 2298</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( mov_part, <span class="stringliteral">&quot;TOW_CABLE&quot;</span> ) ) {</div>
<div class="line"><a id="l02299" name="l02299"></a><span class="lineno"> 2299</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#ac24aba962fd53d1a87bf57b52ce40508">is_towed</a>() ) {</div>
<div class="line"><a id="l02300" name="l02300"></a><span class="lineno"> 2300</span>                    <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a5f5e060b9d76c409ae99c49fbdeda88f">get_towed_by</a>()-&gt;<a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#aa4ea9ef21627b1cc84ff74c62fa7ba64">set_towing</a>( <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a5f5e060b9d76c409ae99c49fbdeda88f">get_towed_by</a>(), new_vehicle );</div>
<div class="line"><a id="l02301" name="l02301"></a><span class="lineno"> 2301</span>                    <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a3be8540079c1ba0e07c594fc6e210bf3">clear_towing</a>();</div>
<div class="line"><a id="l02302" name="l02302"></a><span class="lineno"> 2302</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a40b149ccb2383cb1a263f3e3d88f3469">is_towing</a>() ) {</div>
<div class="line"><a id="l02303" name="l02303"></a><span class="lineno"> 2303</span>                    <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a4cc6247530a16020db73b3af28e0024e">get_towed</a>()-&gt;<a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#aa4ea9ef21627b1cc84ff74c62fa7ba64">set_towing</a>( new_vehicle, <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a4cc6247530a16020db73b3af28e0024e">get_towed</a>() );</div>
<div class="line"><a id="l02304" name="l02304"></a><span class="lineno"> 2304</span>                    <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a3be8540079c1ba0e07c594fc6e210bf3">clear_towing</a>();</div>
<div class="line"><a id="l02305" name="l02305"></a><span class="lineno"> 2305</span>                }</div>
<div class="line"><a id="l02306" name="l02306"></a><span class="lineno"> 2306</span>            }</div>
<div class="line"><a id="l02307" name="l02307"></a><span class="lineno"> 2307</span>            <span class="comment">// transfer the vehicle_part to the new vehicle</span></div>
<div class="line"><a id="l02308" name="l02308"></a><span class="lineno"> 2308</span>            new_vehicle-&gt;<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.emplace_back( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ mov_part ] );</div>
<div class="line"><a id="l02309" name="l02309"></a><span class="lineno"> 2309</span>            new_vehicle-&gt;<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.back().mount = new_mount;</div>
<div class="line"><a id="l02310" name="l02310"></a><span class="lineno"> 2310</span> </div>
<div class="line"><a id="l02311" name="l02311"></a><span class="lineno"> 2311</span>            <span class="comment">// remove labels associated with the mov_part</span></div>
<div class="line"><a id="l02312" name="l02312"></a><span class="lineno"> 2312</span>            <span class="keyword">const</span> <span class="keyword">auto</span> iter = <a class="code hl_variable" href="classvehicle.html#a7c2d668e2b8f48a53f5c5e94aa2bd408">labels</a>.find( <a class="code hl_struct" href="structlabel.html">label</a>( cur_mount ) );</div>
<div class="line"><a id="l02313" name="l02313"></a><span class="lineno"> 2313</span>            <span class="keywordflow">if</span>( iter != <a class="code hl_variable" href="classvehicle.html#a7c2d668e2b8f48a53f5c5e94aa2bd408">labels</a>.end() ) {</div>
<div class="line"><a id="l02314" name="l02314"></a><span class="lineno"> 2314</span>                std::string label_str = iter-&gt;text;</div>
<div class="line"><a id="l02315" name="l02315"></a><span class="lineno"> 2315</span>                <a class="code hl_variable" href="classvehicle.html#a7c2d668e2b8f48a53f5c5e94aa2bd408">labels</a>.erase( iter );</div>
<div class="line"><a id="l02316" name="l02316"></a><span class="lineno"> 2316</span>                new_labels.insert( <a class="code hl_struct" href="structlabel.html">label</a>( new_mount, label_str ) );</div>
<div class="line"><a id="l02317" name="l02317"></a><span class="lineno"> 2317</span>            }</div>
<div class="line"><a id="l02318" name="l02318"></a><span class="lineno"> 2318</span>            <span class="comment">// Prepare the zones to be moved to the new vehicle</span></div>
<div class="line"><a id="l02319" name="l02319"></a><span class="lineno"> 2319</span>            <span class="keyword">const</span> std::pair&lt;std::unordered_multimap&lt;point, zone_data&gt;::iterator, std::unordered_multimap&lt;point, zone_data&gt;::iterator&gt;</div>
<div class="line"><a id="l02320" name="l02320"></a><span class="lineno"> 2320</span>            zones_on_point = <a class="code hl_variable" href="classvehicle.html#a90b6f438b5ae343dab2b131c64293584">loot_zones</a>.equal_range( cur_mount );</div>
<div class="line"><a id="l02321" name="l02321"></a><span class="lineno"> 2321</span>            <span class="keywordflow">for</span>( std::unordered_multimap&lt;point, zone_data&gt;::const_iterator lz_iter = zones_on_point.first;</div>
<div class="line"><a id="l02322" name="l02322"></a><span class="lineno"> 2322</span>                 lz_iter != zones_on_point.second; ++lz_iter ) {</div>
<div class="line"><a id="l02323" name="l02323"></a><span class="lineno"> 2323</span>                new_zones.emplace( new_mount, lz_iter-&gt;second );</div>
<div class="line"><a id="l02324" name="l02324"></a><span class="lineno"> 2324</span>            }</div>
<div class="line"><a id="l02325" name="l02325"></a><span class="lineno"> 2325</span> </div>
<div class="line"><a id="l02326" name="l02326"></a><span class="lineno"> 2326</span>            <span class="comment">// Erasing on the key removes all the zones from the point at once</span></div>
<div class="line"><a id="l02327" name="l02327"></a><span class="lineno"> 2327</span>            <a class="code hl_variable" href="classvehicle.html#a90b6f438b5ae343dab2b131c64293584">loot_zones</a>.erase( cur_mount );</div>
<div class="line"><a id="l02328" name="l02328"></a><span class="lineno"> 2328</span> </div>
<div class="line"><a id="l02329" name="l02329"></a><span class="lineno"> 2329</span>            <span class="comment">// The zone manager will be updated when we next interact with it through get_vehicle_zones</span></div>
<div class="line"><a id="l02330" name="l02330"></a><span class="lineno"> 2330</span>            <a class="code hl_variable" href="classvehicle.html#af6c2314d1f5b83a04771abea3109a137">zones_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02331" name="l02331"></a><span class="lineno"> 2331</span> </div>
<div class="line"><a id="l02332" name="l02332"></a><span class="lineno"> 2332</span>            <span class="comment">// remove the passenger from the old vehicle</span></div>
<div class="line"><a id="l02333" name="l02333"></a><span class="lineno"> 2333</span>            <span class="keywordflow">if</span>( passenger ) {</div>
<div class="line"><a id="l02334" name="l02334"></a><span class="lineno"> 2334</span>                <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ mov_part ].remove_flag( <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaacbdd8bab66369a907eb2edbd4b209752">vehicle_part::passenger_flag</a> );</div>
<div class="line"><a id="l02335" name="l02335"></a><span class="lineno"> 2335</span>                <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ mov_part ].passenger_id = <a class="code hl_enumvalue" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4abf21153f2489c6f52bf69def405456ad">character_id</a>();</div>
<div class="line"><a id="l02336" name="l02336"></a><span class="lineno"> 2336</span>            }</div>
<div class="line"><a id="l02337" name="l02337"></a><span class="lineno"> 2337</span>            <span class="comment">// indicate the part needs to be removed from the old vehicle</span></div>
<div class="line"><a id="l02338" name="l02338"></a><span class="lineno"> 2338</span>            <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ mov_part].removed = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02339" name="l02339"></a><span class="lineno"> 2339</span>            <a class="code hl_variable" href="classvehicle.html#ab2aaa937610c71ab4b8ff3ffdfa4902d">removed_part_count</a>++;</div>
<div class="line"><a id="l02340" name="l02340"></a><span class="lineno"> 2340</span>        }</div>
<div class="line"><a id="l02341" name="l02341"></a><span class="lineno"> 2341</span> </div>
<div class="line"><a id="l02342" name="l02342"></a><span class="lineno"> 2342</span>        <span class="comment">// We want to create the vehicle zones after we&#39;ve setup the parts</span></div>
<div class="line"><a id="l02343" name="l02343"></a><span class="lineno"> 2343</span>        <span class="comment">// because we need only to move the zone once per mount, not per part. If we move per</span></div>
<div class="line"><a id="l02344" name="l02344"></a><span class="lineno"> 2344</span>        <span class="comment">// part, we will end up with duplicates of the zone per part on the same mount</span></div>
<div class="line"><a id="l02345" name="l02345"></a><span class="lineno"> 2345</span>        <span class="keywordflow">for</span>( std::pair&lt;point, zone_data&gt; zone : new_zones ) {</div>
<div class="line"><a id="l02346" name="l02346"></a><span class="lineno"> 2346</span>            <a class="code hl_function" href="classzone__manager.html#a11e6a0ecb51069e3c334b6f4b9c5c6bc">zone_manager::get_manager</a>().<a class="code hl_function" href="classzone__manager.html#a9f4190e4f0475d9ea0e621629e2ad1ad">create_vehicle_loot_zone</a>( *new_vehicle, zone.first, zone.second );</div>
<div class="line"><a id="l02347" name="l02347"></a><span class="lineno"> 2347</span>        }</div>
<div class="line"><a id="l02348" name="l02348"></a><span class="lineno"> 2348</span> </div>
<div class="line"><a id="l02349" name="l02349"></a><span class="lineno"> 2349</span>        <span class="comment">// create_vehicle_loot_zone marks the vehicle as not dirty but since we got these zones</span></div>
<div class="line"><a id="l02350" name="l02350"></a><span class="lineno"> 2350</span>        <span class="comment">// in an unknown state from the previous vehicle, we need to let the cache rebuild next</span></div>
<div class="line"><a id="l02351" name="l02351"></a><span class="lineno"> 2351</span>        <span class="comment">// time we interact with them</span></div>
<div class="line"><a id="l02352" name="l02352"></a><span class="lineno"> 2352</span>        new_vehicle-&gt;<a class="code hl_variable" href="classvehicle.html#af6c2314d1f5b83a04771abea3109a137">zones_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02353" name="l02353"></a><span class="lineno"> 2353</span> </div>
<div class="line"><a id="l02354" name="l02354"></a><span class="lineno"> 2354</span>        <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l02355" name="l02355"></a><span class="lineno"> 2355</span>        here.<a class="code hl_variable" href="classmap.html#ad05f776b59564ff618ece546f9190dbc">dirty_vehicle_list</a>.insert( new_vehicle );</div>
<div class="line"><a id="l02356" name="l02356"></a><span class="lineno"> 2356</span>        here.<a class="code hl_function" href="classmap.html#a0ecdaa7f32bcc5dbcb162ae76ad863c9">set_transparency_cache_dirty</a>( <a class="code hl_variable" href="classvehicle.html#a34630935e46860003c616e0522316f02">sm_pos</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> );</div>
<div class="line"><a id="l02357" name="l02357"></a><span class="lineno"> 2357</span>        here.<a class="code hl_function" href="classmap.html#abfe32fc67ef91fe15105c31b5ef884ab">set_seen_cache_dirty</a>( <a class="code hl_variable" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a> );</div>
<div class="line"><a id="l02358" name="l02358"></a><span class="lineno"> 2358</span>        <span class="keywordflow">if</span>( !new_labels.empty() ) {</div>
<div class="line"><a id="l02359" name="l02359"></a><span class="lineno"> 2359</span>            new_vehicle-&gt;<a class="code hl_variable" href="classvehicle.html#a7c2d668e2b8f48a53f5c5e94aa2bd408">labels</a> = new_labels;</div>
<div class="line"><a id="l02360" name="l02360"></a><span class="lineno"> 2360</span>        }</div>
<div class="line"><a id="l02361" name="l02361"></a><span class="lineno"> 2361</span> </div>
<div class="line"><a id="l02362" name="l02362"></a><span class="lineno"> 2362</span>        <span class="keywordflow">if</span>( split_mounts.empty() ) {</div>
<div class="line"><a id="l02363" name="l02363"></a><span class="lineno"> 2363</span>            new_vehicle-&gt;<a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l02364" name="l02364"></a><span class="lineno"> 2364</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02365" name="l02365"></a><span class="lineno"> 2365</span>            <span class="comment">// include refresh</span></div>
<div class="line"><a id="l02366" name="l02366"></a><span class="lineno"> 2366</span>            new_vehicle-&gt;<a class="code hl_function" href="classvehicle.html#a16b3772f72faa9f18472a45664b36463">shift_parts</a>( <a class="code hl_variable" href="point_8h.html#a0ee2195dcb488ae55fbf4316f5011172">point_zero</a> - mnt_offset );</div>
<div class="line"><a id="l02367" name="l02367"></a><span class="lineno"> 2367</span>        }</div>
<div class="line"><a id="l02368" name="l02368"></a><span class="lineno"> 2368</span> </div>
<div class="line"><a id="l02369" name="l02369"></a><span class="lineno"> 2369</span>        <span class="comment">// update the precalc points</span></div>
<div class="line"><a id="l02370" name="l02370"></a><span class="lineno"> 2370</span>        new_vehicle-&gt;<a class="code hl_function" href="classvehicle.html#a3df213ef35c4a1801ef30d1f65195f40">precalc_mounts</a>( 1, new_vehicle-&gt;<a class="code hl_variable" href="classvehicle.html#a320ca34b5c38568efd801731cef78a35">skidding</a> ?</div>
<div class="line"><a id="l02371" name="l02371"></a><span class="lineno"> 2371</span>                                     new_vehicle-&gt;<a class="code hl_variable" href="classvehicle.html#af366981a584e12d25133fb479d47de33">turn_dir</a> : new_vehicle-&gt;<a class="code hl_variable" href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">face</a>.<a class="code hl_function" href="classtileray.html#a91ed01227e1754597024f4916f8bd6af">dir</a>(),</div>
<div class="line"><a id="l02372" name="l02372"></a><span class="lineno"> 2372</span>                                     new_vehicle-&gt;<a class="code hl_function" href="classvehicle.html#a19bf91bbba8085237248e25c7d214ee6">pivot_point</a>() );</div>
<div class="line"><a id="l02373" name="l02373"></a><span class="lineno"> 2373</span>        <span class="keywordflow">if</span>( !passengers.empty() ) {</div>
<div class="line"><a id="l02374" name="l02374"></a><span class="lineno"> 2374</span>            new_vehicle-&gt;<a class="code hl_function" href="classvehicle.html#a6a4ea0ccba37cc3df09163313b402105">relocate_passengers</a>( passengers );</div>
<div class="line"><a id="l02375" name="l02375"></a><span class="lineno"> 2375</span>        }</div>
<div class="line"><a id="l02376" name="l02376"></a><span class="lineno"> 2376</span>    }</div>
<div class="line"><a id="l02377" name="l02377"></a><span class="lineno"> 2377</span>    <span class="keywordflow">return</span> did_split;</div>
<div class="line"><a id="l02378" name="l02378"></a><span class="lineno"> 2378</span>}</div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4abf21153f2489c6f52bf69def405456ad"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4abf21153f2489c6f52bf69def405456ad">cata_variant_type::character_id</a></div><div class="ttdeci">@ character_id</div></div>
<div class="ttc" id="aclasstowing__data_html_aa4ea9ef21627b1cc84ff74c62fa7ba64"><div class="ttname"><a href="classtowing__data.html#aa4ea9ef21627b1cc84ff74c62fa7ba64">towing_data::set_towing</a></div><div class="ttdeci">bool set_towing(vehicle *tower_veh, vehicle *towed_veh)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05927">vehicle.cpp:5927</a></div></div>
<div class="ttc" id="aclassvehicle_html_a10fc2ae6531f87ae9e7f304ec6ec811e"><div class="ttname"><a href="classvehicle.html#a10fc2ae6531f87ae9e7f304ec6ec811e">vehicle::last_fluid_check</a></div><div class="ttdeci">time_point last_fluid_check</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01879">vehicle.h:1879</a></div></div>
<div class="ttc" id="aclassvehicle_html_a6a4ea0ccba37cc3df09163313b402105"><div class="ttname"><a href="classvehicle.html#a6a4ea0ccba37cc3df09163313b402105">vehicle::relocate_passengers</a></div><div class="ttdeci">void relocate_passengers(const std::vector&lt; player * &gt; &amp;passengers)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02199">vehicle.cpp:2199</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01937">camera_on</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4abf21153f2489c6f52bf69def405456ad">character_id</a>, <a class="el" href="vehicle_8h_source.html#l00161">towing_data::clear_towing()</a>, <a class="el" href="clzones_8cpp_source.html#l00960">zone_manager::create_vehicle_loot_zone()</a>, <a class="el" href="vehicle_8h_source.html#l01928">cruise_on</a>, <a class="el" href="vehicle_8h_source.html#l01863">cruise_velocity</a>, <a class="el" href="tileray_8cpp_source.html#l00074">tileray::dir()</a>, <a class="el" href="map_8h_source.html#l01620">map::dirty_vehicle_list</a>, <a class="el" href="vehicle_8h_source.html#l01930">engine_on</a>, <a class="el" href="vehicle_8h_source.html#l01891">face</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="clzones_8cpp_source.html#l00125">zone_manager::get_manager()</a>, <a class="el" href="map_8cpp_source.html#l00141">get_map()</a>, <a class="el" href="vehicle_8cpp_source.html#l03073">get_passenger()</a>, <a class="el" href="vehicle_8h_source.html#l00158">towing_data::get_towed()</a>, <a class="el" href="vehicle_8h_source.html#l00154">towing_data::get_towed_by()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="veh__type_8h_source.html#l00336">vpart_info::has_flag()</a>, <a class="el" href="vehicle_8cpp_source.html#l05859">is_towed()</a>, <a class="el" href="vehicle_8cpp_source.html#l05844">is_towing()</a>, <a class="el" href="vehicle_8h_source.html#l01801">labels</a>, <a class="el" href="vehicle_8h_source.html#l01879">last_fluid_check</a>, <a class="el" href="veh__type_8h_source.html#l00155">vpart_info::location</a>, <a class="el" href="vehicle_8h_source.html#l01806">loot_zones</a>, <a class="el" href="vehicle_8h_source.html#l01893">move</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="vehicle_8cpp_source.html#l02875">part_flag()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8h_source.html#l00192">vehicle_part::passenger_flag</a>, <a class="el" href="vehicle_8cpp_source.html#l05636">pivot_point()</a>, <a class="el" href="point_8h_source.html#l00274">point_zero</a>, <a class="el" href="vehicle_8cpp_source.html#l03024">precalc_mounts()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l02199">relocate_passengers()</a>, <a class="el" href="vehicle_8h_source.html#l01830">removed_part_count</a>, <a class="el" href="map_8h_source.html#l00409">map::set_seen_cache_dirty()</a>, <a class="el" href="vehicle_8cpp_source.html#l05927">towing_data::set_towing()</a>, <a class="el" href="map_8h_source.html#l00393">map::set_transparency_cache_dirty()</a>, <a class="el" href="vehicle_8cpp_source.html#l06279">shift_parts()</a>, <a class="el" href="vehicle_8h_source.html#l01940">skidding</a>, <a class="el" href="vehicle_8h_source.html#l01844">sm_pos</a>, <a class="el" href="vehicle_8h_source.html#l01887">tow_data</a>, <a class="el" href="vehicle_8h_source.html#l01932">tracking_on</a>, <a class="el" href="point_8h_source.html#l00273">tripoint_zero</a>, <a class="el" href="vehicle_8h_source.html#l01870">turn_dir</a>, <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>, <a class="el" href="vehicle_8h_source.html#l01865">vertical_velocity</a>, <a class="el" href="point_8h_source.html#l00152">tripoint::z</a>, and <a class="el" href="vehicle_8h_source.html#l01948">zones_dirty</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l02117">find_and_split_vehicles()</a>, <a class="el" href="vehicle_8cpp_source.html#l02004">remove_carried_vehicle()</a>, and <a class="el" href="vehicle_8cpp_source.html#l02380">split_vehicles()</a>.</p>

</div>
</div>
<a id="ab29f93a000f56c1118d3e2a8ea509105" name="ab29f93a000f56c1118d3e2a8ea509105"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab29f93a000f56c1118d3e2a8ea509105">&#9670;&nbsp;</a></span>start_engine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::start_engine </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l00918">918</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>{</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#a4d73f86ddc3aafe3231c33c098b9d6c8">is_engine_on</a>( e ) ) {</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>    }</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span> </div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>    <span class="keyword">const</span> <a class="code hl_class" href="classvpart__info.html">vpart_info</a> &amp;einfo = <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e] );</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>    <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;eng = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[ e ] ];</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span> </div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>    <span class="keywordtype">bool</span> out_of_fuel = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>    <span class="keywordflow">if</span>( einfo.<a class="code hl_variable" href="classvpart__info.html#ae9c50d26b3cc88604ae85573ee6599cd">fuel_type</a> != <a class="code hl_variable" href="vehicle__use_8cpp.html#a0f2fca171b1445ba75107afa924e30e3">fuel_type_none</a> &amp;&amp; <a class="code hl_function" href="classvehicle.html#af615cefb430470fc97b60635a382bc7a">engine_fuel_left</a>( e ) &lt;= 0 ) {</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> &amp;fuel_id : einfo.<a class="code hl_function" href="classvpart__info.html#a7f384f56a1cde378ede268a90a095a21">engine_fuel_opts</a>() ) {</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( fuel_id ) &gt; 0 ) {</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>                eng.<a class="code hl_function" href="structvehicle__part.html#abd5713514b5ab3a5f8a7aea140a22406">fuel_set</a>( fuel_id );</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>            }</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>        }</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>        out_of_fuel = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>    }</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span> </div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>    <span class="keywordflow">if</span>( out_of_fuel ) {</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>        <span class="keywordflow">if</span>( einfo.<a class="code hl_variable" href="classvpart__info.html#ae9c50d26b3cc88604ae85573ee6599cd">fuel_type</a> == <a class="code hl_variable" href="vehicle__use_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a> ) {</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>            <span class="comment">// Muscle engines cannot start with broken limbs</span></div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>            <span class="keywordflow">if</span>( einfo.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;MUSCLE_ARMS&quot;</span> ) &amp;&amp; ( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.get_working_arm_count() &lt; 2 ) ) {</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You cannot use %s with a broken arm.&quot;</span> ), eng.<a class="code hl_function" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() );</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( einfo.<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;MUSCLE_LEGS&quot;</span> ) &amp;&amp; ( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.get_working_leg_count() &lt; 2 ) ) {</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You cannot use %s with a broken leg.&quot;</span> ), eng.<a class="code hl_function" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() );</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>            }</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Looks like the %1$s is out of %2$s.&quot;</span> ), eng.<a class="code hl_function" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>(),</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>                     <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( einfo.<a class="code hl_variable" href="classvpart__info.html#ae9c50d26b3cc88604ae85573ee6599cd">fuel_type</a> ) );</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>        }</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>    }</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span> </div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> dmg = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e]].damage_percent();</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> engine_power = std::abs( <a class="code hl_function" href="classvehicle.html#a27cec1366be7bf296d9c483a40833120">part_epower_w</a>( <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e] ) );</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> cold_factor = <a class="code hl_function" href="classvehicle.html#ad8fcbea4632f523e20dfab4dc12b6c22">engine_cold_factor</a>( e );</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> start_moves = <a class="code hl_function" href="classvehicle.html#a6faebde63c532754c7ca9875b9d1fef9">engine_start_time</a>( e );</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span> </div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> = <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e] );</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>    <span class="keywordflow">if</span>( einfo.<a class="code hl_function" href="classvpart__info.html#a71ea297071a68c95227c1cbbf0614f0f">engine_backfire_threshold</a>() ) {</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>        <span class="keywordflow">if</span>( ( 1 - dmg ) &lt; einfo.<a class="code hl_function" href="classvpart__info.html#a71ea297071a68c95227c1cbbf0614f0f">engine_backfire_threshold</a>() &amp;&amp;</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>            <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( einfo.<a class="code hl_function" href="classvpart__info.html#a773d5d31a81a8f42f347eb7c4d9d7d78">engine_backfire_freq</a>() ) ) {</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>            <a class="code hl_function" href="classvehicle.html#a9b0acd63b60b974f0ac842263d5ec58f">backfire</a>( e );</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, start_moves / 10, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a74bcc1e0384a916f56360c649f543f3a">sounds::sound_t::movement</a>,</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>                           <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;the %s bang as it starts&quot;</span> ), eng.<a class="code hl_function" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() ), <span class="keyword">true</span>, <span class="stringliteral">&quot;vehicle&quot;</span>,</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>                           <span class="stringliteral">&quot;engine_bangs_start&quot;</span> );</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>        }</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>    }</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span> </div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>    <span class="comment">// Immobilizers need removing before the vehicle can be started</span></div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>    <span class="keywordflow">if</span>( eng.<a class="code hl_function" href="structvehicle__part.html#af3f36462b727fe082320a4f75bf6597a">faults</a>().count( <a class="code hl_variable" href="vehicle__use_8cpp.html#abdff65814bacc115b63402844460a99e">fault_immobiliser</a> ) ) {</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>        <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, 5, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>,</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>                       <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;the %s making a long beep&quot;</span> ), eng.<a class="code hl_function" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() ), <span class="keyword">true</span>, <span class="stringliteral">&quot;vehicle&quot;</span>,</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>                       <span class="stringliteral">&quot;fault_immobiliser_beep&quot;</span> );</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>    }</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span> </div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>    <span class="comment">// Engine with starter motors can fail on both battery and starter motor</span></div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>    <span class="keywordflow">if</span>( eng.<a class="code hl_function" href="structvehicle__part.html#a5dcc5fea1cf3a7b5cdc43c977cf6ddec">faults_potential</a>().count( <a class="code hl_variable" href="vehicle__use_8cpp.html#a2ff2ed0fb01c29353047de869f04657e">fault_starter</a> ) ) {</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>        <span class="keywordflow">if</span>( eng.<a class="code hl_function" href="structvehicle__part.html#af3f36462b727fe082320a4f75bf6597a">faults</a>().count( <a class="code hl_variable" href="vehicle__use_8cpp.html#a2ff2ed0fb01c29353047de869f04657e">fault_starter</a> ) ) {</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, eng.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#addce91efb443f2c5051c95c686659621">engine_noise_factor</a>(), <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>,</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>                           <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;the %s clicking once&quot;</span> ), eng.<a class="code hl_function" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() ), <span class="keyword">true</span>, <span class="stringliteral">&quot;vehicle&quot;</span>,</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>                           <span class="stringliteral">&quot;engine_single_click_fail&quot;</span> );</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>        }</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>        <span class="comment">// TODO: start_moves is in moves, but it&#39;s an integer, convert it to some time class</span></div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> start_draw_bat = <a class="code hl_function" href="classvehicle.html#a88de59eafc9488490ebdd42cff0e604f">power_to_energy_bat</a>( engine_power *</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>                                   ( 1.0 + dmg / 2 + cold_factor / 5 ) * 10,</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>                                   1_turns * start_moves / 100 );</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#acb03f8288804b551378478137e9cea11">discharge_battery</a>( start_draw_bat, <span class="keyword">true</span> ) != 0 ) {</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, eng.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#addce91efb443f2c5051c95c686659621">engine_noise_factor</a>(), <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>,</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>                           <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;the %s rapidly clicking&quot;</span> ), eng.<a class="code hl_function" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() ), <span class="keyword">true</span>, <span class="stringliteral">&quot;vehicle&quot;</span>,</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>                           <span class="stringliteral">&quot;engine_multi_click_fail&quot;</span> );</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>        }</div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>    }</div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span> </div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>    <span class="comment">// Engines always fail to start with faulty fuel pumps</span></div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>    <span class="keywordflow">if</span>( eng.<a class="code hl_function" href="structvehicle__part.html#af3f36462b727fe082320a4f75bf6597a">faults</a>().count( <a class="code hl_variable" href="vehicle__use_8cpp.html#ad9ac7089aa8c54b014320bc09cf4c3a9">fault_pump</a> ) || eng.<a class="code hl_function" href="structvehicle__part.html#af3f36462b727fe082320a4f75bf6597a">faults</a>().count( <a class="code hl_variable" href="vehicle__use_8cpp.html#abcb3e64fc26495e989fdd151f659ab00">fault_diesel</a> ) ) {</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>        <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, eng.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#addce91efb443f2c5051c95c686659621">engine_noise_factor</a>(), <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a74bcc1e0384a916f56360c649f543f3a">sounds::sound_t::movement</a>,</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>                       <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;the %s quickly stuttering out.&quot;</span> ), eng.<a class="code hl_function" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() ), <span class="keyword">true</span>, <span class="stringliteral">&quot;vehicle&quot;</span>,</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>                       <span class="stringliteral">&quot;engine_stutter_fail&quot;</span> );</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>    }</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span> </div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>    <span class="comment">// Damaged non-electric engines have a chance of failing to start</span></div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#aaea77fa5cfb98d7b1aadb0e71ee7a671">is_engine_type</a>( e, <a class="code hl_variable" href="vehicle__use_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a> ) &amp;&amp; <a class="code hl_function" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( dmg * 100, 120 ) ) {</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>        <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, eng.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#addce91efb443f2c5051c95c686659621">engine_noise_factor</a>(), <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a74bcc1e0384a916f56360c649f543f3a">sounds::sound_t::movement</a>,</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>                       <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;the %s clanking and grinding&quot;</span> ), eng.<a class="code hl_function" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() ), <span class="keyword">true</span>, <span class="stringliteral">&quot;vehicle&quot;</span>,</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>                       <span class="stringliteral">&quot;engine_clanking_fail&quot;</span> );</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>    }</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>    <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, eng.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#addce91efb443f2c5051c95c686659621">engine_noise_factor</a>(), <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a74bcc1e0384a916f56360c649f543f3a">sounds::sound_t::movement</a>,</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>                   <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;the %s starting&quot;</span> ), eng.<a class="code hl_function" href="structvehicle__part.html#a1c555386664b5d61de6bac27572c5c4f">name</a>() ) );</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span> </div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacesfx.html#a6f93b4c27e459e0d1c174674586e9c6b">sfx::has_variant_sound</a>( <span class="stringliteral">&quot;engine_start&quot;</span>, eng.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#a3beec15086f138455d92d1897d867780">get_id</a>().<a class="code hl_function" href="classstring__id.html#aa7dabc565f0c067e1a237ea224b18f93">str</a>() ) ) {</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>        <a class="code hl_function" href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a>( <span class="stringliteral">&quot;engine_start&quot;</span>, eng.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#a3beec15086f138455d92d1897d867780">get_id</a>().<a class="code hl_function" href="classstring__id.html#aa7dabc565f0c067e1a237ea224b18f93">str</a>(),</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>                                 eng.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#addce91efb443f2c5051c95c686659621">engine_noise_factor</a>() );</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aaea77fa5cfb98d7b1aadb0e71ee7a671">is_engine_type</a>( e, <a class="code hl_variable" href="vehicle__use_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a> ) ) {</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>        <a class="code hl_function" href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a>( <span class="stringliteral">&quot;engine_start&quot;</span>, <span class="stringliteral">&quot;muscle&quot;</span>, eng.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#addce91efb443f2c5051c95c686659621">engine_noise_factor</a>() );</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aaea77fa5cfb98d7b1aadb0e71ee7a671">is_engine_type</a>( e, <a class="code hl_variable" href="vehicle__use_8cpp.html#aacae8af2b949fe924016b5e370170fc8">fuel_type_wind</a> ) ) {</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>        <a class="code hl_function" href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a>( <span class="stringliteral">&quot;engine_start&quot;</span>, <span class="stringliteral">&quot;wind&quot;</span>, eng.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#addce91efb443f2c5051c95c686659621">engine_noise_factor</a>() );</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aaea77fa5cfb98d7b1aadb0e71ee7a671">is_engine_type</a>( e, <a class="code hl_variable" href="vehicle__use_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a> ) ) {</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>        <a class="code hl_function" href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a>( <span class="stringliteral">&quot;engine_start&quot;</span>, <span class="stringliteral">&quot;electric&quot;</span>, eng.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#addce91efb443f2c5051c95c686659621">engine_noise_factor</a>() );</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>        <a class="code hl_function" href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a>( <span class="stringliteral">&quot;engine_start&quot;</span>, <span class="stringliteral">&quot;combustion&quot;</span>, eng.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_function" href="classvpart__info.html#addce91efb443f2c5051c95c686659621">engine_noise_factor</a>() );</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>    }</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>}</div>
<div class="ttc" id="aclassvehicle_html_a6faebde63c532754c7ca9875b9d1fef9"><div class="ttname"><a href="classvehicle.html#a6faebde63c532754c7ca9875b9d1fef9">vehicle::engine_start_time</a></div><div class="ttdeci">int engine_start_time(int e) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00899">vehicle_use.cpp:899</a></div></div>
<div class="ttc" id="aclassvpart__info_html_a71ea297071a68c95227c1cbbf0614f0f"><div class="ttname"><a href="classvpart__info.html#a71ea297071a68c95227c1cbbf0614f0f">vpart_info::engine_backfire_threshold</a></div><div class="ttdeci">float engine_backfire_threshold() const</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8cpp_source.html#l00842">veh_type.cpp:842</a></div></div>
<div class="ttc" id="aclassvpart__info_html_a773d5d31a81a8f42f347eb7c4d9d7d78"><div class="ttname"><a href="classvpart__info.html#a773d5d31a81a8f42f347eb7c4d9d7d78">vpart_info::engine_backfire_freq</a></div><div class="ttdeci">int engine_backfire_freq() const</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8cpp_source.html#l00847">veh_type.cpp:847</a></div></div>
<div class="ttc" id="anamespacesfx_html_a6f93b4c27e459e0d1c174674586e9c6b"><div class="ttname"><a href="namespacesfx.html#a6f93b4c27e459e0d1c174674586e9c6b">sfx::has_variant_sound</a></div><div class="ttdeci">bool has_variant_sound(const std::string &amp;id, const std::string &amp;variant)</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l01618">sounds.cpp:1618</a></div></div>
<div class="ttc" id="astructvehicle__part_html_abd5713514b5ab3a5f8a7aea140a22406"><div class="ttname"><a href="structvehicle__part.html#abd5713514b5ab3a5f8a7aea140a22406">vehicle_part::fuel_set</a></div><div class="ttdeci">bool fuel_set(const itype_id &amp;fuel)</div><div class="ttdoc">Set an engine to use a different type of fuel.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00198">vehicle_part.cpp:198</a></div></div>
<div class="ttc" id="astructvehicle__part_html_af3f36462b727fe082320a4f75bf6597a"><div class="ttname"><a href="structvehicle__part.html#af3f36462b727fe082320a4f75bf6597a">vehicle_part::faults</a></div><div class="ttdeci">const std::set&lt; fault_id &gt; &amp; faults() const</div><div class="ttdoc">Current faults affecting this part (if any)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00392">vehicle_part.cpp:392</a></div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a0f2fca171b1445ba75107afa924e30e3"><div class="ttname"><a href="vehicle__use_8cpp.html#a0f2fca171b1445ba75107afa924e30e3">fuel_type_none</a></div><div class="ttdeci">static const itype_id fuel_type_none(&quot;null&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a2ff2ed0fb01c29353047de869f04657e"><div class="ttname"><a href="vehicle__use_8cpp.html#a2ff2ed0fb01c29353047de869f04657e">fault_starter</a></div><div class="ttdeci">static const fault_id fault_starter(&quot;fault_engine_starter&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_aacae8af2b949fe924016b5e370170fc8"><div class="ttname"><a href="vehicle__use_8cpp.html#aacae8af2b949fe924016b5e370170fc8">fuel_type_wind</a></div><div class="ttdeci">static const itype_id fuel_type_wind(&quot;wind&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_abcb3e64fc26495e989fdd151f659ab00"><div class="ttname"><a href="vehicle__use_8cpp.html#abcb3e64fc26495e989fdd151f659ab00">fault_diesel</a></div><div class="ttdeci">static const fault_id fault_diesel(&quot;fault_engine_pump_diesel&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_abdff65814bacc115b63402844460a99e"><div class="ttname"><a href="vehicle__use_8cpp.html#abdff65814bacc115b63402844460a99e">fault_immobiliser</a></div><div class="ttdeci">static const fault_id fault_immobiliser(&quot;fault_engine_immobiliser&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_ad9ac7089aa8c54b014320bc09cf4c3a9"><div class="ttname"><a href="vehicle__use_8cpp.html#ad9ac7089aa8c54b014320bc09cf4c3a9">fault_pump</a></div><div class="ttdeci">static const fault_id fault_pump(&quot;fault_engine_pump_fuel&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::alarm</a>, <a class="el" href="vehicle_8cpp_source.html#l01126">backfire()</a>, <a class="el" href="vehicle_8cpp_source.html#l04973">discharge_battery()</a>, <a class="el" href="veh__type_8cpp_source.html#l00847">vpart_info::engine_backfire_freq()</a>, <a class="el" href="veh__type_8cpp_source.html#l00842">vpart_info::engine_backfire_threshold()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00885">engine_cold_factor()</a>, <a class="el" href="vehicle_8cpp_source.html#l03230">engine_fuel_left()</a>, <a class="el" href="veh__type_8cpp_source.html#l00877">vpart_info::engine_fuel_opts()</a>, <a class="el" href="veh__type_8cpp_source.html#l00862">vpart_info::engine_noise_factor()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00899">engine_start_time()</a>, <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, <a class="el" href="vehicle__use_8cpp.html#abcb3e64fc26495e989fdd151f659ab00">fault_diesel</a>, <a class="el" href="vehicle__use_8cpp.html#abdff65814bacc115b63402844460a99e">fault_immobiliser</a>, <a class="el" href="vehicle__use_8cpp.html#ad9ac7089aa8c54b014320bc09cf4c3a9">fault_pump</a>, <a class="el" href="vehicle__use_8cpp.html#a2ff2ed0fb01c29353047de869f04657e">fault_starter</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00392">vehicle_part::faults()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00397">vehicle_part::faults_potential()</a>, <a class="el" href="vehicle_8cpp_source.html#l03179">fuel_left()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00198">vehicle_part::fuel_set()</a>, <a class="el" href="veh__type_8h_source.html#l00203">vpart_info::fuel_type</a>, <a class="el" href="vehicle__use_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, <a class="el" href="vehicle__use_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a>, <a class="el" href="vehicle__use_8cpp.html#a0f2fca171b1445ba75107afa924e30e3">fuel_type_none</a>, <a class="el" href="vehicle__use_8cpp.html#aacae8af2b949fe924016b5e370170fc8">fuel_type_wind</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="veh__type_8h_source.html#l00147">vpart_info::get_id()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="veh__type_8h_source.html#l00336">vpart_info::has_flag()</a>, <a class="el" href="sounds_8cpp_source.html#l01618">sfx::has_variant_sound()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00519">vehicle_part::info()</a>, <a class="el" href="vehicle_8cpp_source.html#l01087">is_engine_on()</a>, <a class="el" href="vehicle_8cpp_source.html#l01075">is_engine_type()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a74bcc1e0384a916f56360c649f543f3a">sounds::movement</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00105">vehicle_part::name()</a>, <a class="el" href="item_8cpp_source.html#l09749">item::nname()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="vehicle_8cpp_source.html#l01208">part_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="sounds_8cpp_source.html#l01590">sfx::play_variant_sound()</a>, <a class="el" href="vehicle_8h_source.html#l01859">pos</a>, <a class="el" href="vehicle_8cpp_source.html#l01217">power_to_energy_bat()</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, <a class="el" href="string__id_8h_source.html#l00255">string_id&lt; T &gt;::str()</a>, <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>, and <a class="el" href="calendar_8cpp_source.html#l00521">x_in_y()</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__handlers_8cpp_source.html#l02356">activity_handlers::start_engines_finish()</a>.</p>

</div>
</div>
<a id="a7183b4a2eac4da678e316f5ca1d46e08" name="a7183b4a2eac4da678e316f5ca1d46e08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7183b4a2eac4da678e316f5ca1d46e08">&#9670;&nbsp;</a></span>start_engines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::start_engines </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>take_control</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>autodrive</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01055">1055</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>{</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>    <span class="keywordtype">bool</span> has_engine = std::any_of( <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.begin(), <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.end(), [&amp;]( <span class="keywordtype">int</span> idx ) {</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>        return parts[ idx ].enabled &amp;&amp; !parts[ idx ].is_broken();</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>    } );</div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span> </div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>    <span class="comment">// if no engines enabled then enable all before trying to start the vehicle</span></div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>    <span class="keywordflow">if</span>( !has_engine ) {</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> idx : <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a> ) {</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>            <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ idx ].is_broken() ) {</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>                <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ idx ].enabled = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>            }</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>        }</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>    }</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span> </div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>    <span class="keywordtype">int</span> start_time = 0;</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>    <span class="comment">// record the first usable engine as the referenced position checked at the end of the engine starting activity</span></div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>    <span class="keywordtype">bool</span> has_starting_engine_position = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> starting_engine_position;</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> e = 0; e &lt; <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.size(); ++e ) {</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>        <span class="keywordflow">if</span>( !has_starting_engine_position &amp;&amp; !<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[ e ] ].is_broken() &amp;&amp;</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>            <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[ e ] ].<a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a> ) {</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>            starting_engine_position = <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[ e ] );</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>            has_starting_engine_position = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>        }</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>        has_engine = has_engine || <a class="code hl_function" href="classvehicle.html#a4d73f86ddc3aafe3231c33c098b9d6c8">is_engine_on</a>( e );</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>        start_time = std::max( start_time, <a class="code hl_function" href="classvehicle.html#a6faebde63c532754c7ca9875b9d1fef9">engine_start_time</a>( e ) );</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>    }</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span> </div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>    <span class="keywordflow">if</span>( !has_starting_engine_position ) {</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>        starting_engine_position = <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>();</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>    }</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span> </div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>    <span class="keywordflow">if</span>( !has_engine ) {</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s doesn&#39;t have an engine!&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>    }</div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span> </div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>    <span class="keywordflow">if</span>( take_control &amp;&amp; !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.controlling_vehicle ) {</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.controlling_vehicle = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You take control of the %s.&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>    }</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>    <span class="keywordflow">if</span>( !autodrive ) {</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.assign_activity( <a class="code hl_variable" href="vehicle__use_8cpp.html#ae0e6faf740eed5d3972bfbb84a03faab">ACT_START_ENGINES</a>, start_time );</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.activity.placement = starting_engine_position - <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos();</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.activity.values.push_back( take_control );</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>    }</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>}</div>
<div class="ttc" id="avehicle__use_8cpp_html_ae0e6faf740eed5d3972bfbb84a03faab"><div class="ttname"><a href="vehicle__use_8cpp.html#ae0e6faf740eed5d3972bfbb84a03faab">ACT_START_ENGINES</a></div><div class="ttdeci">static const activity_id ACT_START_ENGINES(&quot;ACT_START_ENGINES&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="vehicle__use_8cpp.html#ae0e6faf740eed5d3972bfbb84a03faab">ACT_START_ENGINES</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00899">engine_start_time()</a>, <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l03101">global_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l01087">is_engine_on()</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00369">control_engines()</a>, <a class="el" href="game_8cpp_source.html#l05443">game::control_vehicle()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01104">enable_patrol()</a>, <a class="el" href="iuse_8cpp_source.html#l08258">iuse::remoteveh()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00552">toggle_autopilot()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="a07afedd1263adc69d4ddf5967b18d1c9" name="a07afedd1263adc69d4ddf5967b18d1c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07afedd1263adc69d4ddf5967b18d1c9">&#9670;&nbsp;</a></span>static_drag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::static_drag </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>actual</em> = <code>true</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04121">4121</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04122" name="l04122"></a><span class="lineno"> 4122</span>{</div>
<div class="line"><a id="l04123" name="l04123"></a><span class="lineno"> 4123</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#afd5333bdd6640697f0202b652621c6e2">extra_drag</a> + ( actual &amp;&amp; !<a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> &amp;&amp; !<a class="code hl_function" href="classvehicle.html#ac24aba962fd53d1a87bf57b52ce40508">is_towed</a>() ? -1500 : 0 );</div>
<div class="line"><a id="l04124" name="l04124"></a><span class="lineno"> 4124</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01930">engine_on</a>, <a class="el" href="vehicle_8h_source.html#l01877">extra_drag</a>, and <a class="el" href="vehicle_8cpp_source.html#l05859">is_towed()</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00087">slowdown()</a>.</p>

</div>
</div>
<a id="aec2fcbe01499d105316d14c8b99107a2" name="aec2fcbe01499d105316d14c8b99107a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec2fcbe01499d105316d14c8b99107a2">&#9670;&nbsp;</a></span>steering_effectiveness()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float vehicle::steering_effectiveness </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04284">4284</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04285" name="l04285"></a><span class="lineno"> 4285</span>{</div>
<div class="line"><a id="l04286" name="l04286"></a><span class="lineno"> 4286</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#ae3cbbbb890aa9a12504ec3458746f3e1">is_floating</a> ) {</div>
<div class="line"><a id="l04287" name="l04287"></a><span class="lineno"> 4287</span>        <span class="comment">// I&#39;M ON A BOAT</span></div>
<div class="line"><a id="l04288" name="l04288"></a><span class="lineno"> 4288</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#ac460f925a21efb9dea1dc0fc2f930609">can_float</a>() ? 1.0f : 0.0f;</div>
<div class="line"><a id="l04289" name="l04289"></a><span class="lineno"> 4289</span>    }</div>
<div class="line"><a id="l04290" name="l04290"></a><span class="lineno"> 4290</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a0a35b7f917fdb08e70a78315cc968f86">is_flying</a> ) {</div>
<div class="line"><a id="l04291" name="l04291"></a><span class="lineno"> 4291</span>        <span class="comment">// I&#39;M IN THE AIR</span></div>
<div class="line"><a id="l04292" name="l04292"></a><span class="lineno"> 4292</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a292961ab33a42bf495d19b8692f6f105">is_rotorcraft</a>() ? 1.0f : 0.0f;</div>
<div class="line"><a id="l04293" name="l04293"></a><span class="lineno"> 4293</span>    }</div>
<div class="line"><a id="l04294" name="l04294"></a><span class="lineno"> 4294</span>    <span class="comment">// irksome special case for boats in shallow water</span></div>
<div class="line"><a id="l04295" name="l04295"></a><span class="lineno"> 4295</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a0ede4cc2a97a8305b1f06817d0d6cdf8">is_watercraft</a>() &amp;&amp; <a class="code hl_function" href="classvehicle.html#ac460f925a21efb9dea1dc0fc2f930609">can_float</a>() ) {</div>
<div class="line"><a id="l04296" name="l04296"></a><span class="lineno"> 4296</span>        <span class="keywordflow">return</span> 1.0f;</div>
<div class="line"><a id="l04297" name="l04297"></a><span class="lineno"> 4297</span>    }</div>
<div class="line"><a id="l04298" name="l04298"></a><span class="lineno"> 4298</span> </div>
<div class="line"><a id="l04299" name="l04299"></a><span class="lineno"> 4299</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a26f77298a01a76e95ed34888793700a4">steering</a>.empty() ) {</div>
<div class="line"><a id="l04300" name="l04300"></a><span class="lineno"> 4300</span>        <span class="keywordflow">return</span> -1.0f; <span class="comment">// No steering installed</span></div>
<div class="line"><a id="l04301" name="l04301"></a><span class="lineno"> 4301</span>    }</div>
<div class="line"><a id="l04302" name="l04302"></a><span class="lineno"> 4302</span>    <span class="comment">// If the only steering part is an animal harness, with no animal in, it</span></div>
<div class="line"><a id="l04303" name="l04303"></a><span class="lineno"> 4303</span>    <span class="comment">// is not steerable.</span></div>
<div class="line"><a id="l04304" name="l04304"></a><span class="lineno"> 4304</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="classvehicle.html#a26f77298a01a76e95ed34888793700a4">steering</a>[0] ];</div>
<div class="line"><a id="l04305" name="l04305"></a><span class="lineno"> 4305</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a26f77298a01a76e95ed34888793700a4">steering</a>.size() == 1 &amp;&amp; vp.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_variable" href="classvpart__info.html#ae9c50d26b3cc88604ae85573ee6599cd">fuel_type</a> == <a class="code hl_variable" href="vehicle_8cpp.html#a944ba9be1d911a61e9ca62af989355fd">fuel_type_animal</a> ) {</div>
<div class="line"><a id="l04306" name="l04306"></a><span class="lineno"> 4306</span>        <a class="code hl_class" href="classmonster.html">monster</a> *mon = <a class="code hl_function" href="classvehicle.html#ab266c3250ffece69b5c2ddc9897d80d3">get_pet</a>( <a class="code hl_variable" href="classvehicle.html#a26f77298a01a76e95ed34888793700a4">steering</a>[0] );</div>
<div class="line"><a id="l04307" name="l04307"></a><span class="lineno"> 4307</span>        <span class="keywordflow">if</span>( mon == <span class="keyword">nullptr</span> || !mon-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="vehicle_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a> ) ) {</div>
<div class="line"><a id="l04308" name="l04308"></a><span class="lineno"> 4308</span>            <span class="keywordflow">return</span> -2.0f;</div>
<div class="line"><a id="l04309" name="l04309"></a><span class="lineno"> 4309</span>        }</div>
<div class="line"><a id="l04310" name="l04310"></a><span class="lineno"> 4310</span>    }</div>
<div class="line"><a id="l04311" name="l04311"></a><span class="lineno"> 4311</span>    <span class="comment">// For now, you just need one wheel working for 100% effective steering.</span></div>
<div class="line"><a id="l04312" name="l04312"></a><span class="lineno"> 4312</span>    <span class="comment">// TODO: return something less than 1.0 if the steering isn&#39;t so good</span></div>
<div class="line"><a id="l04313" name="l04313"></a><span class="lineno"> 4313</span>    <span class="comment">// (unbalanced, long wheelbase, back-heavy vehicle with front wheel steering,</span></div>
<div class="line"><a id="l04314" name="l04314"></a><span class="lineno"> 4314</span>    <span class="comment">// etc)</span></div>
<div class="line"><a id="l04315" name="l04315"></a><span class="lineno"> 4315</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> p : <a class="code hl_variable" href="classvehicle.html#a26f77298a01a76e95ed34888793700a4">steering</a> ) {</div>
<div class="line"><a id="l04316" name="l04316"></a><span class="lineno"> 4316</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ p ].is_available() ) {</div>
<div class="line"><a id="l04317" name="l04317"></a><span class="lineno"> 4317</span>            <span class="keywordflow">return</span> 1.0f;</div>
<div class="line"><a id="l04318" name="l04318"></a><span class="lineno"> 4318</span>        }</div>
<div class="line"><a id="l04319" name="l04319"></a><span class="lineno"> 4319</span>    }</div>
<div class="line"><a id="l04320" name="l04320"></a><span class="lineno"> 4320</span> </div>
<div class="line"><a id="l04321" name="l04321"></a><span class="lineno"> 4321</span>    <span class="comment">// We have steering, but it&#39;s all broken.</span></div>
<div class="line"><a id="l04322" name="l04322"></a><span class="lineno"> 4322</span>    <span class="keywordflow">return</span> 0.0f;</div>
<div class="line"><a id="l04323" name="l04323"></a><span class="lineno"> 4323</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l03974">can_float()</a>, <a class="el" href="vehicle_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a>, <a class="el" href="veh__type_8h_source.html#l00203">vpart_info::fuel_type</a>, <a class="el" href="vehicle_8cpp.html#a944ba9be1d911a61e9ca62af989355fd">fuel_type_animal</a>, <a class="el" href="vehicle_8cpp_source.html#l03082">get_pet()</a>, <a class="el" href="creature_8cpp_source.html#l01173">Creature::has_effect()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00519">vehicle_part::info()</a>, <a class="el" href="vehicle_8h_source.html#l01913">is_floating</a>, <a class="el" href="vehicle_8h_source.html#l01917">is_flying</a>, <a class="el" href="vehicle_8cpp_source.html#l04017">is_rotorcraft()</a>, <a class="el" href="vehicle_8cpp_source.html#l04037">is_watercraft()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="vehicle_8h_source.html#l01764">steering</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04325">handling_difficulty()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01061">pldrive()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00933">selfdrive()</a>, and <a class="el" href="veh__interact_8cpp_source.html#l02322">wheel_state_description()</a>.</p>

</div>
</div>
<a id="ab3ca604dd9cd1907f37c8a888934a1d3" name="ab3ca604dd9cd1907f37c8a888934a1d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3ca604dd9cd1907f37c8a888934a1d3">&#9670;&nbsp;</a></span>stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::stop </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>update_cache</em> = <code>true</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__move_8cpp_source.html#l00338">338</a> of file <a class="el" href="vehicle__move_8cpp_source.html">vehicle_move.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>{</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>    <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> = 0;</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>    <a class="code hl_variable" href="classvehicle.html#a320ca34b5c38568efd801731cef78a35">skidding</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>    <a class="code hl_variable" href="classvehicle.html#a8bbdfb41ea75fdc007feab08e2137aa2">move</a> = <a class="code hl_variable" href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">face</a>;</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    <a class="code hl_variable" href="classvehicle.html#a3d4d97e9ca8cb2642001f8f61df500d5">last_turn</a> = 0_degrees;</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>    <a class="code hl_variable" href="classvehicle.html#a3d2d513640544cb11fa826890b692e5a">of_turn_carry</a> = 0;</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>    <span class="keywordflow">if</span>( !update_cache ) {</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>    }</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;p : <a class="code hl_function" href="classvehicle.html#a2e80dafb2c03147b569688658843d9d6">get_points</a>() ) {</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>        here.<a class="code hl_function" href="classmap.html#a49d42535b664b5a6e4e8a02e3e773f4d">set_memory_seen_cache_dirty</a>( p );</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>    }</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>}</div>
<div class="ttc" id="aclassmap_html_a49d42535b664b5a6e4e8a02e3e773f4d"><div class="ttname"><a href="classmap.html#a49d42535b664b5a6e4e8a02e3e773f4d">map::set_memory_seen_cache_dirty</a></div><div class="ttdeci">void set_memory_seen_cache_dirty(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00451">map.h:451</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01891">face</a>, <a class="el" href="map_8cpp_source.html#l00141">get_map()</a>, <a class="el" href="vehicle_8cpp_source.html#l06568">get_points()</a>, <a class="el" href="vehicle_8h_source.html#l01872">last_turn</a>, <a class="el" href="vehicle_8h_source.html#l01893">move</a>, <a class="el" href="vehicle_8h_source.html#l01876">of_turn_carry</a>, <a class="el" href="map_8h_source.html#l00451">map::set_memory_seen_cache_dirty()</a>, <a class="el" href="vehicle_8h_source.html#l01940">skidding</a>, and <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, <a class="el" href="map_8cpp_source.html#l01098">map::displace_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l00816">drive_to_local_target()</a>, <a class="el" href="vehicle_8cpp_source.html#l05361">gain_moves()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00144">handbrake()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>.</p>

</div>
</div>
<a id="a8d23ce82d669c714795a2ed9b679e3b9" name="a8d23ce82d669c714795a2ed9b679e3b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d23ce82d669c714795a2ed9b679e3b9">&#9670;&nbsp;</a></span>stop_autodriving()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::stop_autodriving </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply_brakes</em> = <code>true</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__autodrive_8cpp_source.html#l01292">1292</a> of file <a class="el" href="vehicle__autodrive_8cpp_source.html">vehicle_autodrive.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>{</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#ad95f42088a5fceef3fc215336649b4ee">is_autodriving</a> &amp;&amp; !<a class="code hl_variable" href="classvehicle.html#a953fed1abe9bacc2a7c98cee6425c5b2">is_patrolling</a> &amp;&amp; !<a class="code hl_variable" href="classvehicle.html#a26f98c384048e03538bca10e4f26905d">is_following</a> ) {</div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>    }</div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>    <span class="keywordflow">if</span>( apply_brakes ) {</div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span>        <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> = 0;</div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span>        <a class="code hl_variable" href="classvehicle.html#abdf6601268460dc437ef079590deb33b">cruise_on</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span>    }</div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span>    <a class="code hl_variable" href="classvehicle.html#ad95f42088a5fceef3fc215336649b4ee">is_autodriving</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span>    <a class="code hl_variable" href="classvehicle.html#a953fed1abe9bacc2a7c98cee6425c5b2">is_patrolling</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>    <a class="code hl_variable" href="classvehicle.html#a26f98c384048e03538bca10e4f26905d">is_following</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>    <a class="code hl_variable" href="classvehicle.html#ab0ffd12faf770950ee7d2493ffaf9bd0">autopilot_on</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span>    <a class="code hl_variable" href="classvehicle.html#acdbb2eec025972d86be23e90e9e92d22">autodrive_local_target</a> = <a class="code hl_variable" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a>;</div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>    <a class="code hl_variable" href="classvehicle.html#a5ee50a8425f281ee825025aaf1ef2ba4">collision_check_points</a>.clear();</div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>    <a class="code hl_variable" href="classvehicle.html#a5a81aa92070897147fbed2c61bad4825">active_autodrive_controller</a>.reset();</div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01825">active_autodrive_controller</a>, <a class="el" href="vehicle_8h_source.html#l01824">autodrive_local_target</a>, <a class="el" href="vehicle_8h_source.html#l01938">autopilot_on</a>, <a class="el" href="vehicle_8h_source.html#l00845">collision_check_points</a>, <a class="el" href="vehicle_8h_source.html#l01928">cruise_on</a>, <a class="el" href="vehicle_8h_source.html#l01863">cruise_velocity</a>, <a class="el" href="vehicle_8h_source.html#l01923">is_autodriving</a>, <a class="el" href="vehicle_8h_source.html#l01924">is_following</a>, <a class="el" href="vehicle_8h_source.html#l01925">is_patrolling</a>, and <a class="el" href="point_8h_source.html#l00273">tripoint_zero</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l00364">autodrive_activity_actor::canceled()</a>, <a class="el" href="vehicle_8cpp_source.html#l06437">damage_direct()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l01206">do_autodrive()</a>, <a class="el" href="vehicle_8cpp_source.html#l00816">drive_to_local_target()</a>, <a class="el" href="activity__actor_8cpp_source.html#l00374">autodrive_activity_actor::finish()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00470">part_collision()</a>.</p>

</div>
</div>
<a id="ac35c686d0d5bc43d6605036bcde5e62b" name="ac35c686d0d5bc43d6605036bcde5e62b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac35c686d0d5bc43d6605036bcde5e62b">&#9670;&nbsp;</a></span>stop_engines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::stop_engines </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01033">1033</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>{</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>    <a class="code hl_variable" href="classvehicle.html#ae3281409ce9ec7e878f9e22427e815e5">vehicle_noise</a> = 0;</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>    <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You turn the engine off.&quot;</span> ) );</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> e = 0; e &lt; <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.size(); ++e ) {</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a4d73f86ddc3aafe3231c33c098b9d6c8">is_engine_on</a>( e ) ) {</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacesfx.html#a6f93b4c27e459e0d1c174674586e9c6b">sfx::has_variant_sound</a>( <span class="stringliteral">&quot;engine_stop&quot;</span>, <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[ e ] ].info().<a class="code hl_function" href="namespacestd_1_1this__thread.html#ad1967fe44af39a7961e35eed20166ca9">get_id</a>().str() ) ) {</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>                <a class="code hl_function" href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a>( <span class="stringliteral">&quot;engine_stop&quot;</span>, <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[ e ] ].info().<a class="code hl_function" href="namespacestd_1_1this__thread.html#ad1967fe44af39a7961e35eed20166ca9">get_id</a>().str(),</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>                                         <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[ e ] ].info().engine_noise_factor() );</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aaea77fa5cfb98d7b1aadb0e71ee7a671">is_engine_type</a>( e, <a class="code hl_variable" href="vehicle__use_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a> ) ) {</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>                <a class="code hl_function" href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a>( <span class="stringliteral">&quot;engine_stop&quot;</span>, <span class="stringliteral">&quot;electric&quot;</span>,</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>                                         <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[ e ] ].info().engine_noise_factor() );</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>                <a class="code hl_function" href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a>( <span class="stringliteral">&quot;engine_stop&quot;</span>, <span class="stringliteral">&quot;combustion&quot;</span>,</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>                                         <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[ e ] ].info().engine_noise_factor() );</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>            }</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>        }</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>    }</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>    <a class="code hl_function" href="namespacesfx.html#a03291faa7dbf7c6a4c0aa23c160cd33f">sfx::do_vehicle_engine_sfx</a>();</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>}</div>
<div class="ttc" id="anamespacesfx_html_a03291faa7dbf7c6a4c0aa23c160cd33f"><div class="ttname"><a href="namespacesfx.html#a03291faa7dbf7c6a4c0aa23c160cd33f">sfx::do_vehicle_engine_sfx</a></div><div class="ttdeci">void do_vehicle_engine_sfx()</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l01605">sounds.cpp:1605</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="sounds_8cpp_source.html#l01605">sfx::do_vehicle_engine_sfx()</a>, <a class="el" href="vehicle_8h_source.html#l01930">engine_on</a>, <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, <a class="el" href="vehicle__use_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, <a class="el" href="mingw_8thread_8h_source.html#l00125">std::this_thread::get_id()</a>, <a class="el" href="sounds_8cpp_source.html#l01618">sfx::has_variant_sound()</a>, <a class="el" href="vehicle_8cpp_source.html#l01087">is_engine_on()</a>, <a class="el" href="vehicle_8cpp_source.html#l01075">is_engine_type()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="sounds_8cpp_source.html#l01590">sfx::play_variant_sound()</a>, and <a class="el" href="vehicle_8h_source.html#l01951">vehicle_noise</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00552">toggle_autopilot()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="a47f721a94d09f4161b41c3e85fadf6a5" name="a47f721a94d09f4161b41c3e85fadf6a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47f721a94d09f4161b41c3e85fadf6a5">&#9670;&nbsp;</a></span>stored_volume()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceunits.html#a5d16607c866588620acb381e7dbbf0a6">units::volume</a> vehicle::stored_volume </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05153">5153</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05154" name="l05154"></a><span class="lineno"> 5154</span>{</div>
<div class="line"><a id="l05155" name="l05155"></a><span class="lineno"> 5155</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a983dd9db3cd64078b176a82289e0b260">get_items</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ).<a class="code hl_function" href="classitem__stack.html#ab7cdf0e51936ac259d36ef4162b9ecb1">stored_volume</a>();</div>
<div class="line"><a id="l05156" name="l05156"></a><span class="lineno"> 5156</span>}</div>
<div class="ttc" id="aclassitem__stack_html_ab7cdf0e51936ac259d36ef4162b9ecb1"><div class="ttname"><a href="classitem__stack.html#ab7cdf0e51936ac259d36ef4162b9ecb1">item_stack::stored_volume</a></div><div class="ttdeci">units::volume stored_volume() const</div><div class="ttdoc">Total volume of the items here.</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00098">item_stack.cpp:98</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l05288">get_items()</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, and <a class="el" href="item__stack_8cpp_source.html#l00098">item_stack::stored_volume()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__display_8cpp_source.html#l00149">print_part_list()</a>.</p>

</div>
</div>
<a id="ac49843abe67be6f7f9c3fdaf92e2f411" name="ac49843abe67be6f7f9c3fdaf92e2f411"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac49843abe67be6f7f9c3fdaf92e2f411">&#9670;&nbsp;</a></span>strain()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float vehicle::strain </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04126">4126</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04127" name="l04127"></a><span class="lineno"> 4127</span>{</div>
<div class="line"><a id="l04128" name="l04128"></a><span class="lineno"> 4128</span>    <span class="keywordtype">int</span> mv = <a class="code hl_function" href="classvehicle.html#a8ae7b8e43449ee574a6fd266f4773892">max_velocity</a>();</div>
<div class="line"><a id="l04129" name="l04129"></a><span class="lineno"> 4129</span>    <span class="keywordtype">int</span> sv = <a class="code hl_function" href="classvehicle.html#ad38e05507056b3b3da5a5a5e482adba4">safe_velocity</a>();</div>
<div class="line"><a id="l04130" name="l04130"></a><span class="lineno"> 4130</span>    <span class="keywordflow">if</span>( mv &lt;= sv ) {</div>
<div class="line"><a id="l04131" name="l04131"></a><span class="lineno"> 4131</span>        mv = sv + 1;</div>
<div class="line"><a id="l04132" name="l04132"></a><span class="lineno"> 4132</span>    }</div>
<div class="line"><a id="l04133" name="l04133"></a><span class="lineno"> 4133</span>    <span class="keywordflow">if</span>( velocity &lt; sv &amp;&amp; velocity &gt; -sv ) {</div>
<div class="line"><a id="l04134" name="l04134"></a><span class="lineno"> 4134</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l04135" name="l04135"></a><span class="lineno"> 4135</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04136" name="l04136"></a><span class="lineno"> 4136</span>        <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( std::abs( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> ) - sv ) / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( mv - sv );</div>
<div class="line"><a id="l04137" name="l04137"></a><span class="lineno"> 4137</span>    }</div>
<div class="line"><a id="l04138" name="l04138"></a><span class="lineno"> 4138</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l03543">max_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l03593">safe_velocity()</a>, and <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04400">consume_fuel()</a>, <a class="el" href="vehicle_8cpp_source.html#l05018">do_engine_damage()</a>, <a class="el" href="panels_8cpp_source.html#l01651">draw_health_classic()</a>, <a class="el" href="panels_8cpp_source.html#l01848">draw_veh_compact()</a>, <a class="el" href="panels_8cpp_source.html#l01880">draw_veh_padding()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>.</p>

</div>
</div>
<a id="a3e6f3f24ce6c6431dcc4b915d3a437ef" name="a3e6f3f24ce6c6431dcc4b915d3a437ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e6f3f24ce6c6431dcc4b915d3a437ef">&#9670;&nbsp;</a></span>sufficient_wheel_config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::sufficient_wheel_config </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04140">4140</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04141" name="l04141"></a><span class="lineno"> 4141</span>{</div>
<div class="line"><a id="l04142" name="l04142"></a><span class="lineno"> 4142</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a5c432c0da0ff47a483e3aa74548bd435">wheelcache</a>.empty() ) {</div>
<div class="line"><a id="l04143" name="l04143"></a><span class="lineno"> 4143</span>        <span class="comment">// No wheels!</span></div>
<div class="line"><a id="l04144" name="l04144"></a><span class="lineno"> 4144</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04145" name="l04145"></a><span class="lineno"> 4145</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a5c432c0da0ff47a483e3aa74548bd435">wheelcache</a>.size() == 1 ) {</div>
<div class="line"><a id="l04146" name="l04146"></a><span class="lineno"> 4146</span>        <span class="comment">//Has to be a stable wheel, and one wheel can only support a 1-3 tile vehicle</span></div>
<div class="line"><a id="l04147" name="l04147"></a><span class="lineno"> 4147</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( <a class="code hl_variable" href="classvehicle.html#a5c432c0da0ff47a483e3aa74548bd435">wheelcache</a>.front() ).<a class="code hl_function" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <span class="stringliteral">&quot;STABLE&quot;</span> ) ||</div>
<div class="line"><a id="l04148" name="l04148"></a><span class="lineno"> 4148</span>            <a class="code hl_function" href="classvehicle.html#a2e1f54f4d34a2edb7ff3665e5eba7df9">all_parts_at_location</a>( <a class="code hl_function" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure</a> ).<a class="code hl_variable" href="namespaceom__direction.html#af97f9dbddaa758278662da3478826c61">size</a>() &gt; 3 ) {</div>
<div class="line"><a id="l04149" name="l04149"></a><span class="lineno"> 4149</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04150" name="l04150"></a><span class="lineno"> 4150</span>        }</div>
<div class="line"><a id="l04151" name="l04151"></a><span class="lineno"> 4151</span>    }</div>
<div class="line"><a id="l04152" name="l04152"></a><span class="lineno"> 4152</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04153" name="l04153"></a><span class="lineno"> 4153</span>}</div>
<div class="ttc" id="anamespaceom__direction_html_af97f9dbddaa758278662da3478826c61"><div class="ttname"><a href="namespaceom__direction.html#af97f9dbddaa758278662da3478826c61">om_direction::size</a></div><div class="ttdeci">const size_t size</div><div class="ttdef"><b>Definition:</b> <a href="omdata_8h_source.html#l00062">omdata.h:62</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l02745">all_parts_at_location()</a>, <a class="el" href="veh__type_8h_source.html#l00336">vpart_info::has_flag()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8cpp.html#a00735c0bfb68c2a0c0c7d53e8f72a70e">part_location_structure()</a>, <a class="el" href="omdata_8h_source.html#l00062">om_direction::size</a>, and <a class="el" href="vehicle_8h_source.html#l01761">wheelcache</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04279">valid_wheel_config()</a>, and <a class="el" href="veh__interact_8cpp_source.html#l02322">wheel_state_description()</a>.</p>

</div>
</div>
<a id="a1994ca720f9bd60f9fc14e9cf27e0381" name="a1994ca720f9bd60f9fc14e9cf27e0381"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1994ca720f9bd60f9fc14e9cf27e0381">&#9670;&nbsp;</a></span>suspend_refresh()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::suspend_refresh </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable or enable <a class="el" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5" title="Refreshes all caches and refinds all parts.">refresh()</a> ; used to speed up performance when creating a vehicle. </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05446">5446</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05447" name="l05447"></a><span class="lineno"> 5447</span>{</div>
<div class="line"><a id="l05448" name="l05448"></a><span class="lineno"> 5448</span>    <span class="comment">// disable refresh and cache recalculation</span></div>
<div class="line"><a id="l05449" name="l05449"></a><span class="lineno"> 5449</span>    <a class="code hl_variable" href="classvehicle.html#a680decfc32d2eac704c5f3c890639821">no_refresh</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05450" name="l05450"></a><span class="lineno"> 5450</span>    <a class="code hl_variable" href="classvehicle.html#ac9c7234d3c2f5f0c42cc57b0931d21a6">mass_dirty</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05451" name="l05451"></a><span class="lineno"> 5451</span>    <a class="code hl_variable" href="classvehicle.html#a908223c2d250ba23fdbff51379cf2213">mass_center_precalc_dirty</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05452" name="l05452"></a><span class="lineno"> 5452</span>    <a class="code hl_variable" href="classvehicle.html#afa84e5e990b66ac1cedeba291ddc6028">mass_center_no_precalc_dirty</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05453" name="l05453"></a><span class="lineno"> 5453</span>    <a class="code hl_variable" href="classvehicle.html#a57285bb3b5dfda9f926bd3f99e3e1bad">coeff_rolling_dirty</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05454" name="l05454"></a><span class="lineno"> 5454</span>    <a class="code hl_variable" href="classvehicle.html#ac1e6fe4cf22c08ceb542a7a3d515268b">coeff_air_dirty</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05455" name="l05455"></a><span class="lineno"> 5455</span>    <a class="code hl_variable" href="classvehicle.html#a3bf02329db46b5a5dda2a0b35b8147fc">coeff_water_dirty</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05456" name="l05456"></a><span class="lineno"> 5456</span>    <a class="code hl_variable" href="classvehicle.html#a62e8354926b0f973a2a0ec1db3deb997">coeff_air_changed</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05457" name="l05457"></a><span class="lineno"> 5457</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01911">coeff_air_changed</a>, <a class="el" href="vehicle_8h_source.html#l01905">coeff_air_dirty</a>, <a class="el" href="vehicle_8h_source.html#l01904">coeff_rolling_dirty</a>, <a class="el" href="vehicle_8h_source.html#l01906">coeff_water_dirty</a>, <a class="el" href="vehicle_8h_source.html#l01902">mass_center_no_precalc_dirty</a>, <a class="el" href="vehicle_8h_source.html#l01901">mass_center_precalc_dirty</a>, <a class="el" href="vehicle_8h_source.html#l01900">mass_dirty</a>, and <a class="el" href="vehicle_8h_source.html#l01896">no_refresh</a>.</p>

</div>
</div>
<a id="a0b298dcb96f6d82ac696f38d9a89868b" name="a0b298dcb96f6d82ac696f38d9a89868b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b298dcb96f6d82ac696f38d9a89868b">&#9670;&nbsp;</a></span>thrust()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::thrust </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>z</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__move_8cpp_source.html#l00129">129</a> of file <a class="el" href="vehicle__move_8cpp_source.html">vehicle_move.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>{</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    <span class="comment">//if vehicle is stopped, set target direction to forward.</span></div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    <span class="comment">//ensure it is not skidding. Set turns used to 0.</span></div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#aec9a1faa6740b681867d48878e37d7bb">is_moving</a>() &amp;&amp; z == 0 ) {</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>        <a class="code hl_variable" href="classvehicle.html#af366981a584e12d25133fb479d47de33">turn_dir</a> = <a class="code hl_variable" href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">face</a>.<a class="code hl_function" href="classtileray.html#a91ed01227e1754597024f4916f8bd6af">dir</a>();</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>        <a class="code hl_function" href="classvehicle.html#ab3ca604dd9cd1907f37c8a888934a1d3">stop</a>();</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    }</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>    <span class="keywordtype">bool</span> pl_ctrl = <a class="code hl_function" href="classvehicle.html#a341515426011486c265d016c35f84de6">player_in_control</a>( <a class="code hl_function" href="character_8cpp.html#a2fcb25d686f4a35fca374c6f71280311">get_player_character</a>() );</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span> </div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    <span class="comment">// No need to change velocity if there are no wheels</span></div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>    <span class="keywordflow">if</span>( ( <a class="code hl_variable" href="classvehicle.html#a3cfee06c49af306085cad6bbf3326319">in_water</a> &amp;&amp; <a class="code hl_function" href="classvehicle.html#ac460f925a21efb9dea1dc0fc2f930609">can_float</a>() ) || ( <a class="code hl_function" href="classvehicle.html#a292961ab33a42bf495d19b8692f6f105">is_rotorcraft</a>() &amp;&amp; ( z != 0 || <a class="code hl_variable" href="classvehicle.html#a0a35b7f917fdb08e70a78315cc968f86">is_flying</a> ) ) ) {</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>        <span class="comment">// we&#39;re good</span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#ae3cbbbb890aa9a12504ec3458746f3e1">is_floating</a> &amp;&amp; !<a class="code hl_function" href="classvehicle.html#ac460f925a21efb9dea1dc0fc2f930609">can_float</a>() ) {</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>        <a class="code hl_function" href="classvehicle.html#ab3ca604dd9cd1907f37c8a888934a1d3">stop</a>();</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>        <span class="keywordflow">if</span>( pl_ctrl ) {</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s is too leaky!&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>        }</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#a578c681656be6b419c62799006008035">valid_wheel_config</a>()  &amp;&amp; z == 0 ) {</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>        <a class="code hl_function" href="classvehicle.html#ab3ca604dd9cd1907f37c8a888934a1d3">stop</a>();</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>        <span class="keywordflow">if</span>( pl_ctrl ) {</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s doesn&#39;t have enough wheels to move!&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>        }</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>    }</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    <span class="comment">// Accelerate (true) or brake (false)</span></div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>    <span class="keywordtype">bool</span> thrusting = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> ) {</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>        <span class="keywordtype">int</span> <a class="code hl_function" href="enums_8h.html#a89bed42d8e3efcd44570febc837f088e">sgn</a> = ( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &lt; 0 ) ? -1 : 1;</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>        thrusting = ( <a class="code hl_function" href="enums_8h.html#a89bed42d8e3efcd44570febc837f088e">sgn</a> == thd );</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    }</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span> </div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>    <span class="comment">// TODO: Pass this as an argument to avoid recalculating</span></div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    <span class="keywordtype">float</span> traction = <a class="code hl_function" href="classvehicle.html#a9d41a3f9a7969c40ca5a9b7b5a3fdebe">k_traction</a>( <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().vehicle_wheel_traction( *<span class="keyword">this</span> ) );</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>    <span class="keywordtype">int</span> accel = <a class="code hl_function" href="classvehicle.html#ad81a52a0535e57a0d7e390f6f379ae42">current_acceleration</a>() * traction;</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>    <span class="keywordflow">if</span>( accel &lt; 200 &amp;&amp; velocity &gt; 0 &amp;&amp; <a class="code hl_function" href="classvehicle.html#a40b149ccb2383cb1a263f3e3d88f3469">is_towing</a>() ) {</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>        <span class="keywordflow">if</span>( pl_ctrl ) {</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s struggles to pull the %s on this surface!&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>,</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>                     <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a4cc6247530a16020db73b3af28e0024e">get_towed</a>()-&gt;<a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>        }</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>    }</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>    <span class="keywordflow">if</span>( thrusting &amp;&amp; accel == 0 ) {</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>        <span class="keywordflow">if</span>( pl_ctrl ) {</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s is too heavy for its engine(s)!&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>        }</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>    }</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> max_vel = traction * <a class="code hl_function" href="classvehicle.html#a8ae7b8e43449ee574a6fd266f4773892">max_velocity</a>();</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>    <span class="comment">// maximum braking is 20 mph/s, assumes high friction tires</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> max_brake = 20 * 100;</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    <span class="comment">//pos or neg if accelerator or brake</span></div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>    <span class="keywordtype">int</span> vel_inc = ( accel + ( thrusting ? 0 : max_brake ) ) * thd;</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>    <span class="comment">// Reverse is only 60% acceleration, unless an electric motor is in use</span></div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>    <span class="keywordflow">if</span>( thd == -1 &amp;&amp; thrusting &amp;&amp; !<a class="code hl_function" href="classvehicle.html#a603b71f04b9fdb63f400ac93fb4bea88">has_engine_type</a>( <a class="code hl_variable" href="vehicle__move_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>        vel_inc = .6 * vel_inc;</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>    }</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span> </div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    <span class="comment">//find ratio of used acceleration to maximum available, returned in tenths of a percent</span></div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>    <span class="comment">//so 1000 = 100% and 453 = 45.3%</span></div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>    <span class="keywordtype">int</span> <a class="code hl_function" href="namespaceammo__effects.html#a266026a76ad1cf3377d0b7c6efc36dd7">load</a>;</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>    <span class="comment">// Keep exact cruise control speed</span></div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#abdf6601268460dc437ef079590deb33b">cruise_on</a> &amp;&amp; accel != 0 ) {</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>        <span class="keywordtype">int</span> effective_cruise = std::min( <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a>, max_vel );</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>        <span class="keywordflow">if</span>( thd &gt; 0 ) {</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>            vel_inc = std::min( vel_inc, effective_cruise - <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> );</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>            vel_inc = std::max( vel_inc, effective_cruise - <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> );</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>        }</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>        <span class="keywordflow">if</span>( thrusting ) {</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>            <a class="code hl_function" href="namespaceammo__effects.html#a266026a76ad1cf3377d0b7c6efc36dd7">load</a> = 1000 * std::abs( vel_inc ) / accel;</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>            <span class="comment">// brakes provide 20 mph/s of slowdown and the rest is engine braking</span></div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>            <span class="comment">// TODO: braking depends on wheels, traction, driver skill</span></div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>            <a class="code hl_function" href="namespaceammo__effects.html#a266026a76ad1cf3377d0b7c6efc36dd7">load</a> = 1000 * std::max( 0, std::abs( vel_inc ) - max_brake ) / accel;</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>        }</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>        <a class="code hl_function" href="namespaceammo__effects.html#a266026a76ad1cf3377d0b7c6efc36dd7">load</a> = ( thrusting ? 1000 : 0 );</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>    }</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>    <span class="comment">// rotorcraft need to spend +5% (in addition to idle) of load to fly, +20% (in addition to idle) to ascend</span></div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a292961ab33a42bf495d19b8692f6f105">is_rotorcraft</a>() &amp;&amp; ( z &gt; 0 || <a class="code hl_function" href="classvehicle.html#a6ac15340cefeea4793448cdb34784011">is_flying_in_air</a>() ) ) {</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>        <a class="code hl_function" href="namespaceammo__effects.html#a266026a76ad1cf3377d0b7c6efc36dd7">load</a> = std::max( <a class="code hl_function" href="namespaceammo__effects.html#a266026a76ad1cf3377d0b7c6efc36dd7">load</a>, z &gt; 0 ? 200 : 50 );</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>        thrusting = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>    }</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span> </div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    <span class="comment">// only consume resources if engine accelerating</span></div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespaceammo__effects.html#a266026a76ad1cf3377d0b7c6efc36dd7">load</a> &gt;= 1 &amp;&amp; thrusting ) {</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>        <span class="comment">//abort if engines not operational</span></div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a73db9a09464720b32da8e3f214475a8e">total_power_w</a>() &lt;= 0 || !<a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> || ( z == 0 &amp;&amp; accel == 0 ) ) {</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>            <span class="keywordflow">if</span>( pl_ctrl ) {</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a73db9a09464720b32da8e3f214475a8e">total_power_w</a>( <span class="keyword">false</span> ) &lt;= 0 ) {</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s doesn&#39;t have an engine!&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a603b71f04b9fdb63f400ac93fb4bea88">has_engine_type</a>( <a class="code hl_variable" href="vehicle__move_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s&#39;s mechanism is out of reach!&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> ) {</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s&#39;s engine isn&#39;t on!&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( traction &lt; 0.01f ) {</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s is stuck.&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s&#39;s engine emits a sneezing sound.&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>                }</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>            }</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>            <a class="code hl_variable" href="classvehicle.html#af5c4cd455d31d1a9377ddad223cafe44">cruise_velocity</a> = 0;</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>        }</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>        <span class="comment">//make noise and consume fuel</span></div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>        <a class="code hl_function" href="classvehicle.html#a8bdc82052e35e69dd5f65e1177a13a95">noise_and_smoke</a>( <a class="code hl_function" href="namespaceammo__effects.html#a266026a76ad1cf3377d0b7c6efc36dd7">load</a> );</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>        <a class="code hl_function" href="classvehicle.html#a69a37e32958ea0bffc377cc3e0ece913">consume_fuel</a>( <a class="code hl_function" href="namespaceammo__effects.html#a266026a76ad1cf3377d0b7c6efc36dd7">load</a>, 1 );</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>        <span class="keywordflow">if</span>( z != 0 &amp;&amp; <a class="code hl_function" href="classvehicle.html#a292961ab33a42bf495d19b8692f6f105">is_rotorcraft</a>() ) {</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>            <a class="code hl_variable" href="classvehicle.html#aeb404e5f18eee80d104a7bb0680ac169">requested_z_change</a> = z;</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>        }</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>        <span class="comment">//break the engines a bit, if going too fast.</span></div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>        <span class="keywordtype">int</span> strn = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_function" href="classvehicle.html#ac49843abe67be6f7f9c3fdaf92e2f411">strain</a>() * <a class="code hl_function" href="classvehicle.html#ac49843abe67be6f7f9c3fdaf92e2f411">strain</a>() * 100 );</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>        <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> e = 0; e &lt; <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.size(); e++ ) {</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>            <a class="code hl_function" href="classvehicle.html#adaf4a073304f9f96f055094f700b0134">do_engine_damage</a>( e, strn );</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>        }</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>    }</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span> </div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>    <span class="comment">//wheels aren&#39;t facing the right way to change velocity properly</span></div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>    <span class="comment">//lower down, since engines should be getting damaged anyway</span></div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a320ca34b5c38568efd801731cef78a35">skidding</a> ) {</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>    }</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span> </div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>    <span class="comment">//change vehicles velocity</span></div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>    <span class="keywordflow">if</span>( ( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &gt; 0 &amp;&amp; <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> + vel_inc &lt; 0 ) || ( velocity &lt; 0 &amp;&amp; velocity + vel_inc &gt; 0 ) ) {</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>        <span class="comment">//velocity within braking distance of 0</span></div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>        <a class="code hl_function" href="classvehicle.html#ab3ca604dd9cd1907f37c8a888934a1d3">stop</a>();</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>        <span class="comment">// Increase velocity up to max_vel or min_vel, but not above.</span></div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> min_vel = <a class="code hl_function" href="classvehicle.html#ad845fa8ba69c4b41cf6a0fc35db7f01d">max_reverse_velocity</a>();</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>        <span class="keywordflow">if</span>( vel_inc &gt; 0 ) {</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>            <span class="comment">// Don&#39;t allow braking by accelerating (could happen with damaged engines)</span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>            <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> = std::max( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a>, std::min( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> + vel_inc, max_vel ) );</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>            <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> = std::min( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a>, std::max( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> + vel_inc, min_vel ) );</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>        }</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>    }</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>    <span class="comment">// If you are going faster than the animal can handle, harness is damaged</span></div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>    <span class="comment">// Animal may come free ( and possibly hit by vehicle )</span></div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> e = 0; e &lt; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size(); e++ ) {</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;vp = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ e ];</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>        <span class="keywordflow">if</span>( vp.<a class="code hl_function" href="structvehicle__part.html#a002a1023cd1a96d43556a1b912ebd27b">info</a>().<a class="code hl_variable" href="classvpart__info.html#ae9c50d26b3cc88604ae85573ee6599cd">fuel_type</a> == <a class="code hl_variable" href="vehicle__move_8cpp.html#a944ba9be1d911a61e9ca62af989355fd">fuel_type_animal</a> &amp;&amp; <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.size() != 1 ) {</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>            <a class="code hl_class" href="classmonster.html">monster</a> *mon = <a class="code hl_function" href="classvehicle.html#ab266c3250ffece69b5c2ddc9897d80d3">get_pet</a>( e );</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>            <span class="keywordflow">if</span>( mon != <span class="keyword">nullptr</span> &amp;&amp; mon-&gt;<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="vehicle__move_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a> ) ) {</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>                <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &gt; mon-&gt;<a class="code hl_function" href="classCreature.html#a261dff3caa6aabe255ae9d3eaa94d3de">get_speed</a>() * 12 ) {</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your %s is not fast enough to keep up with the %s&quot;</span> ), mon-&gt;<a class="code hl_function" href="classmonster.html#ad4fba0b9aea36097d8b972e05e66d914">get_name</a>(), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>                    <span class="keywordtype">int</span> dmg = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 10 );</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>                    <a class="code hl_function" href="classvehicle.html#ac2de625db1619f042c4a3a69d0995a6a">damage_direct</a>( e, dmg );</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>                }</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>            }</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>        }</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>    }</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>}</div>
<div class="ttc" id="aclassmonster_html_ad4fba0b9aea36097d8b972e05e66d914"><div class="ttname"><a href="classmonster.html#ad4fba0b9aea36097d8b972e05e66d914">monster::get_name</a></div><div class="ttdeci">std::string get_name() const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00487">monster.cpp:487</a></div></div>
<div class="ttc" id="aclassvehicle_html_ad81a52a0535e57a0d7e390f6f379ae42"><div class="ttname"><a href="classvehicle.html#ad81a52a0535e57a0d7e390f6f379ae42">vehicle::current_acceleration</a></div><div class="ttdeci">int current_acceleration(bool fueled=true) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03472">vehicle.cpp:3472</a></div></div>
<div class="ttc" id="aclassvehicle_html_adaf4a073304f9f96f055094f700b0134"><div class="ttname"><a href="classvehicle.html#adaf4a073304f9f96f055094f700b0134">vehicle::do_engine_damage</a></div><div class="ttdeci">void do_engine_damage(size_t e, int strain)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05018">vehicle.cpp:5018</a></div></div>
<div class="ttc" id="avehicle__move_8cpp_html_a3f2436294a28dc686156c10abab2f994"><div class="ttname"><a href="vehicle__move_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a></div><div class="ttdeci">static const itype_id fuel_type_battery(&quot;battery&quot;)</div></div>
<div class="ttc" id="avehicle__move_8cpp_html_af54ee122fbd5cf94c6ef8bca7e67c8e8"><div class="ttname"><a href="vehicle__move_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a></div><div class="ttdeci">static const itype_id fuel_type_muscle(&quot;muscle&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="vehicle_8cpp_source.html#l03974">can_float()</a>, <a class="el" href="vehicle_8cpp_source.html#l04400">consume_fuel()</a>, <a class="el" href="vehicle_8h_source.html#l01928">cruise_on</a>, <a class="el" href="vehicle_8h_source.html#l01863">cruise_velocity</a>, <a class="el" href="vehicle_8cpp_source.html#l03472">current_acceleration()</a>, <a class="el" href="vehicle_8cpp_source.html#l06437">damage_direct()</a>, <a class="el" href="tileray_8cpp_source.html#l00074">tileray::dir()</a>, <a class="el" href="vehicle_8cpp_source.html#l05018">do_engine_damage()</a>, <a class="el" href="vehicle__move_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a>, <a class="el" href="vehicle_8h_source.html#l01930">engine_on</a>, <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, <a class="el" href="vehicle_8h_source.html#l01891">face</a>, <a class="el" href="veh__type_8h_source.html#l00203">vpart_info::fuel_type</a>, <a class="el" href="vehicle__move_8cpp.html#a944ba9be1d911a61e9ca62af989355fd">fuel_type_animal</a>, <a class="el" href="vehicle__move_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, <a class="el" href="vehicle__move_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a>, <a class="el" href="map_8cpp_source.html#l00141">get_map()</a>, <a class="el" href="monster_8cpp_source.html#l00487">monster::get_name()</a>, <a class="el" href="vehicle_8cpp_source.html#l03082">get_pet()</a>, <a class="el" href="character_8cpp_source.html#l00381">get_player_character()</a>, <a class="el" href="creature_8cpp_source.html#l01498">Creature::get_speed()</a>, <a class="el" href="vehicle_8h_source.html#l00158">towing_data::get_towed()</a>, <a class="el" href="creature_8cpp_source.html#l01173">Creature::has_effect()</a>, <a class="el" href="vehicle_8cpp_source.html#l01031">has_engine_type()</a>, <a class="el" href="vehicle_8h_source.html#l01915">in_water</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00519">vehicle_part::info()</a>, <a class="el" href="vehicle_8h_source.html#l01913">is_floating</a>, <a class="el" href="vehicle_8h_source.html#l01917">is_flying</a>, <a class="el" href="vehicle_8cpp_source.html#l04027">is_flying_in_air()</a>, <a class="el" href="vehicle_8cpp_source.html#l03364">is_moving()</a>, <a class="el" href="vehicle_8cpp_source.html#l04017">is_rotorcraft()</a>, <a class="el" href="vehicle_8cpp_source.html#l05844">is_towing()</a>, <a class="el" href="vehicle_8cpp_source.html#l04097">k_traction()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00147">ammo_effects::load()</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="vehicle_8cpp_source.html#l03554">max_reverse_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l03543">max_velocity()</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="vehicle_8cpp_source.html#l03644">noise_and_smoke()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8cpp_source.html#l00277">player_in_control()</a>, <a class="el" href="vehicle_8h_source.html#l01918">requested_z_change</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="enums_8h_source.html#l00008">sgn()</a>, <a class="el" href="vehicle_8h_source.html#l01940">skidding</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00338">stop()</a>, <a class="el" href="vehicle_8cpp_source.html#l04126">strain()</a>, <a class="el" href="vehicle_8cpp_source.html#l03333">total_power_w()</a>, <a class="el" href="vehicle_8h_source.html#l01887">tow_data</a>, <a class="el" href="vehicle_8h_source.html#l01870">turn_dir</a>, <a class="el" href="vehicle_8cpp_source.html#l04279">valid_wheel_config()</a>, and <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05361">gain_moves()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01061">pldrive()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00933">selfdrive()</a>.</p>

</div>
</div>
<a id="ad5903e76e7d6113d396c9eb5eeef8f7a" name="ad5903e76e7d6113d396c9eb5eeef8f7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5903e76e7d6113d396c9eb5eeef8f7a">&#9670;&nbsp;</a></span>toggle_autopilot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::toggle_autopilot </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l00552">552</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>{</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>    <a class="code hl_class" href="classuilist.html">uilist</a> smenu;</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>    <span class="keyword">enum</span> autopilot_option : <span class="keywordtype">int</span> {</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>        PATROL,</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>        FOLLOW,</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>        STOP</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>    };</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>    smenu.<a class="code hl_variable" href="classuilist.html#a1a7ee6e719a4f1bba45fc94e29a19166">desc_enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>    smenu.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Choose action for the autopilot&quot;</span> );</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>    smenu.<a class="code hl_function" href="classuilist.html#a5ed255a8f8783d16110bd39654147c0a">addentry_col</a>( PATROL, <span class="keyword">true</span>, <span class="charliteral">&#39;P&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Patrol…&quot;</span> ),</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>                        <span class="stringliteral">&quot;&quot;</span>, <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Program the autopilot to patrol a nearby vehicle patrol zone.  &quot;</span></div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>                                           <span class="stringliteral">&quot;If no zones are nearby, you will be prompted to create one.&quot;</span> ) ) );</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>    smenu.<a class="code hl_function" href="classuilist.html#a5ed255a8f8783d16110bd39654147c0a">addentry_col</a>( FOLLOW, <span class="keyword">true</span>, <span class="charliteral">&#39;F&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Follow…&quot;</span> ),</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>                        <span class="stringliteral">&quot;&quot;</span>, <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>(</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>                            <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Program the autopilot to follow you.  It might be a good idea to have a remote control available to tell it to stop, too.&quot;</span> ) ) );</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>    smenu.<a class="code hl_function" href="classuilist.html#a5ed255a8f8783d16110bd39654147c0a">addentry_col</a>( STOP, <span class="keyword">true</span>, <span class="charliteral">&#39;S&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Stop…&quot;</span> ),</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>                        <span class="stringliteral">&quot;&quot;</span>, <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Stop all autopilot related activities.&quot;</span> ) ) );</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>    smenu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>    <span class="keywordflow">switch</span>( smenu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) {</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>        <span class="keywordflow">case</span> PATROL:</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>            <a class="code hl_function" href="classvehicle.html#a6035e37524b3ea6157fd0f3bef16ca97">autopilot_patrol_check</a>();</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>        <span class="keywordflow">case</span> STOP:</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>            <a class="code hl_variable" href="classvehicle.html#ab0ffd12faf770950ee7d2493ffaf9bd0">autopilot_on</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>            <a class="code hl_variable" href="classvehicle.html#a953fed1abe9bacc2a7c98cee6425c5b2">is_patrolling</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>            <a class="code hl_variable" href="classvehicle.html#a26f98c384048e03538bca10e4f26905d">is_following</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>            <a class="code hl_variable" href="classvehicle.html#acdbb2eec025972d86be23e90e9e92d22">autodrive_local_target</a> = <a class="code hl_variable" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a>;</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>            <a class="code hl_function" href="classvehicle.html#ac35c686d0d5bc43d6605036bcde5e62b">stop_engines</a>();</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>        <span class="keywordflow">case</span> FOLLOW:</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>            <a class="code hl_variable" href="classvehicle.html#ab0ffd12faf770950ee7d2493ffaf9bd0">autopilot_on</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>            <a class="code hl_variable" href="classvehicle.html#a26f98c384048e03538bca10e4f26905d">is_following</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>            <a class="code hl_variable" href="classvehicle.html#a953fed1abe9bacc2a7c98cee6425c5b2">is_patrolling</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>            <a class="code hl_function" href="classvehicle.html#a7183b4a2eac4da678e316f5ca1d46e08">start_engines</a>();</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>            <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>    }</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>}</div>
<div class="ttc" id="aclassuilist_html_a1a7ee6e719a4f1bba45fc94e29a19166"><div class="ttname"><a href="classuilist.html#a1a7ee6e719a4f1bba45fc94e29a19166">uilist::desc_enabled</a></div><div class="ttdeci">bool desc_enabled</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00352">ui.h:352</a></div></div>
<div class="ttc" id="aclassuilist_html_a5ed255a8f8783d16110bd39654147c0a"><div class="ttname"><a href="classuilist.html#a5ed255a8f8783d16110bd39654147c0a">uilist::addentry_col</a></div><div class="ttdeci">void addentry_col(int r, bool e, int k, const std::string &amp;str, const std::string &amp;column, const std::string &amp;desc=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l00952">ui.cpp:952</a></div></div>
<div class="ttc" id="aclassvehicle_html_a6035e37524b3ea6157fd0f3bef16ca97"><div class="ttname"><a href="classvehicle.html#a6035e37524b3ea6157fd0f3bef16ca97">vehicle::autopilot_patrol_check</a></div><div class="ttdeci">void autopilot_patrol_check()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00542">vehicle_use.cpp:542</a></div></div>
<div class="ttc" id="aclassvehicle_html_ac35c686d0d5bc43d6605036bcde5e62b"><div class="ttname"><a href="classvehicle.html#ac35c686d0d5bc43d6605036bcde5e62b">vehicle::stop_engines</a></div><div class="ttdeci">void stop_engines()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01033">vehicle_use.cpp:1033</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="ui_8cpp_source.html#l00952">uilist::addentry_col()</a>, <a class="el" href="vehicle_8h_source.html#l01824">autodrive_local_target</a>, <a class="el" href="vehicle_8h_source.html#l01938">autopilot_on</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00542">autopilot_patrol_check()</a>, <a class="el" href="ui_8h_source.html#l00352">uilist::desc_enabled</a>, <a class="el" href="vehicle_8h_source.html#l01924">is_following</a>, <a class="el" href="vehicle_8h_source.html#l01925">is_patrolling</a>, <a class="el" href="ui_8cpp_source.html#l00828">uilist::query()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01055">start_engines()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01033">stop_engines()</a>, <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>, <a class="el" href="ui_8h_source.html#l00320">uilist::text</a>, and <a class="el" href="point_8h_source.html#l00273">tripoint_zero</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="ad0ee70332f9c060254c0ba5ab37521ed" name="ad0ee70332f9c060254c0ba5ab37521ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0ee70332f9c060254c0ba5ab37521ed">&#9670;&nbsp;</a></span>toggle_specific_engine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::toggle_specific_engine </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>on</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01018">1018</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>{</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>    <a class="code hl_function" href="classvehicle.html#a94701a6021928fbf7ba68e2ba4ad7cb8">toggle_specific_part</a>( <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e], on );</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, and <a class="el" href="vehicle_8cpp_source.html#l01022">toggle_specific_part()</a>.</p>

</div>
</div>
<a id="a94701a6021928fbf7ba68e2ba4ad7cb8" name="a94701a6021928fbf7ba68e2ba4ad7cb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94701a6021928fbf7ba68e2ba4ad7cb8">&#9670;&nbsp;</a></span>toggle_specific_part()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::toggle_specific_part </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>on</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01022">1022</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>{</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>    <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].enabled = on;</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00369">control_engines()</a>, <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>, and <a class="el" href="vehicle_8cpp_source.html#l01018">toggle_specific_engine()</a>.</p>

</div>
</div>
<a id="af215ec0fe4b4e7a8a8bf7e03e5874678" name="af215ec0fe4b4e7a8a8bf7e03e5874678"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af215ec0fe4b4e7a8a8bf7e03e5874678">&#9670;&nbsp;</a></span>toggle_tracking()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::toggle_tracking </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l00593">593</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>{</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#abe5f5ade599d2cd543a3e3c3860bc051">tracking_on</a> ) {</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>        <a class="code hl_variable" href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a>.<a class="code hl_function" href="classovermapbuffer.html#aed7c783516f532d6c51339caa802374d">remove_vehicle</a>( <span class="keyword">this</span> );</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>        <a class="code hl_variable" href="classvehicle.html#abe5f5ade599d2cd543a3e3c3860bc051">tracking_on</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You stop keeping track of the vehicle position.&quot;</span> ) );</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>        <a class="code hl_variable" href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a>.<a class="code hl_function" href="classovermapbuffer.html#a4b068ec14497611ce63808e286fc27aa">add_vehicle</a>( <span class="keyword">this</span> );</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>        <a class="code hl_variable" href="classvehicle.html#abe5f5ade599d2cd543a3e3c3860bc051">tracking_on</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You start keeping track of this vehicle&#39;s position.&quot;</span> ) );</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>    }</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>}</div>
<div class="ttc" id="aclassovermapbuffer_html_a4b068ec14497611ce63808e286fc27aa"><div class="ttname"><a href="classovermapbuffer.html#a4b068ec14497611ce63808e286fc27aa">overmapbuffer::add_vehicle</a></div><div class="ttdeci">void add_vehicle(vehicle *veh)</div><div class="ttdoc">Add the vehicle to be tracked in the overmap.</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00609">overmapbuffer.cpp:609</a></div></div>
<div class="ttc" id="aclassovermapbuffer_html_aed7c783516f532d6c51339caa802374d"><div class="ttname"><a href="classovermapbuffer.html#aed7c783516f532d6c51339caa802374d">overmapbuffer::remove_vehicle</a></div><div class="ttdeci">void remove_vehicle(const vehicle *veh)</div><div class="ttdoc">Remove the vehicle from being tracked in the overmap.</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00598">overmapbuffer.cpp:598</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l00609">overmapbuffer::add_vehicle()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l00044">overmap_buffer</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l00598">overmapbuffer::remove_vehicle()</a>, and <a class="el" href="vehicle_8h_source.html#l01932">tracking_on</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>, <a class="el" href="vehicle_8cpp_source.html#l02004">remove_carried_vehicle()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="a4883ea970c6da7b880d9f16f2590a1bd" name="a4883ea970c6da7b880d9f16f2590a1bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4883ea970c6da7b880d9f16f2590a1bd">&#9670;&nbsp;</a></span>total_accessory_epower_w()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::total_accessory_epower_w </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04473">4473</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04474" name="l04474"></a><span class="lineno"> 4474</span>{</div>
<div class="line"><a id="l04475" name="l04475"></a><span class="lineno"> 4475</span>    <span class="keywordtype">int</span> epower = 0;</div>
<div class="line"><a id="l04476" name="l04476"></a><span class="lineno"> 4476</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a791413b7697a0ef434df0fe73d85b9fe">get_enabled_parts</a>( <a class="code hl_enumvalue" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea592e82f2e1fa297f50f3dd6338c2e5a0">VPFLAG_ENABLED_DRAINS_EPOWER</a> ) ) {</div>
<div class="line"><a id="l04477" name="l04477"></a><span class="lineno"> 4477</span>        epower += vp.info().epower;</div>
<div class="line"><a id="l04478" name="l04478"></a><span class="lineno"> 4478</span>    }</div>
<div class="line"><a id="l04479" name="l04479"></a><span class="lineno"> 4479</span>    <span class="keywordflow">return</span> epower;</div>
<div class="line"><a id="l04480" name="l04480"></a><span class="lineno"> 4480</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l02721">get_enabled_parts()</a>, and <a class="el" href="veh__type_8h_source.html#l00069">VPFLAG_ENABLED_DRAINS_EPOWER</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04579">net_battery_charge_rate_w()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04619">power_parts()</a>.</p>

</div>
</div>
<a id="a26e100291b7fb8dd5574463e7112713a" name="a26e100291b7fb8dd5574463e7112713a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26e100291b7fb8dd5574463e7112713a">&#9670;&nbsp;</a></span>total_alternator_epower_w()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::total_alternator_epower_w </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04482">4482</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04483" name="l04483"></a><span class="lineno"> 4483</span>{</div>
<div class="line"><a id="l04484" name="l04484"></a><span class="lineno"> 4484</span>    <span class="keywordtype">int</span> epower = 0;</div>
<div class="line"><a id="l04485" name="l04485"></a><span class="lineno"> 4485</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> ) {</div>
<div class="line"><a id="l04486" name="l04486"></a><span class="lineno"> 4486</span>        <span class="comment">// If the engine is on, the alternators are working.</span></div>
<div class="line"><a id="l04487" name="l04487"></a><span class="lineno"> 4487</span>        <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> p = 0; p &lt; <a class="code hl_variable" href="classvehicle.html#ab4dee440f50b7e9a412faf4dab9796c0">alternators</a>.size(); ++p ) {</div>
<div class="line"><a id="l04488" name="l04488"></a><span class="lineno"> 4488</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#af73c2981a9b17d7e67d37568f7ce0401">is_alternator_on</a>( p ) ) {</div>
<div class="line"><a id="l04489" name="l04489"></a><span class="lineno"> 4489</span>                epower += <a class="code hl_function" href="classvehicle.html#a27cec1366be7bf296d9c483a40833120">part_epower_w</a>( <a class="code hl_variable" href="classvehicle.html#ab4dee440f50b7e9a412faf4dab9796c0">alternators</a>[p] );</div>
<div class="line"><a id="l04490" name="l04490"></a><span class="lineno"> 4490</span>            }</div>
<div class="line"><a id="l04491" name="l04491"></a><span class="lineno"> 4491</span>        }</div>
<div class="line"><a id="l04492" name="l04492"></a><span class="lineno"> 4492</span>    }</div>
<div class="line"><a id="l04493" name="l04493"></a><span class="lineno"> 4493</span>    <span class="keywordflow">return</span> epower;</div>
<div class="line"><a id="l04494" name="l04494"></a><span class="lineno"> 4494</span>}</div>
<div class="ttc" id="aclassvehicle_html_af73c2981a9b17d7e67d37568f7ce0401"><div class="ttname"><a href="classvehicle.html#af73c2981a9b17d7e67d37568f7ce0401">vehicle::is_alternator_on</a></div><div class="ttdeci">bool is_alternator_on(int a) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01097">vehicle.cpp:1097</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01751">alternators</a>, <a class="el" href="vehicle_8h_source.html#l01930">engine_on</a>, <a class="el" href="vehicle_8cpp_source.html#l01097">is_alternator_on()</a>, and <a class="el" href="vehicle_8cpp_source.html#l01208">part_epower_w()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04579">net_battery_charge_rate_w()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04619">power_parts()</a>.</p>

</div>
</div>
<a id="a6fcd5bf8a5698a23f77e614473d0e938" name="a6fcd5bf8a5698a23f77e614473d0e938"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fcd5bf8a5698a23f77e614473d0e938">&#9670;&nbsp;</a></span>total_engine_epower_w()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::total_engine_epower_w </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04496">4496</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04497" name="l04497"></a><span class="lineno"> 4497</span>{</div>
<div class="line"><a id="l04498" name="l04498"></a><span class="lineno"> 4498</span>    <span class="keywordtype">int</span> epower = 0;</div>
<div class="line"><a id="l04499" name="l04499"></a><span class="lineno"> 4499</span> </div>
<div class="line"><a id="l04500" name="l04500"></a><span class="lineno"> 4500</span>    <span class="comment">// Engines: can both produce (plasma) or consume (gas, diesel) epower.</span></div>
<div class="line"><a id="l04501" name="l04501"></a><span class="lineno"> 4501</span>    <span class="comment">// Gas engines require epower to run for ignition system, ECU, etc.</span></div>
<div class="line"><a id="l04502" name="l04502"></a><span class="lineno"> 4502</span>    <span class="comment">// Electric motor consumption not included, see @ref vpart_info::energy_consumption</span></div>
<div class="line"><a id="l04503" name="l04503"></a><span class="lineno"> 4503</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> ) {</div>
<div class="line"><a id="l04504" name="l04504"></a><span class="lineno"> 4504</span>        <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> e = 0; e &lt; <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.size(); ++e ) {</div>
<div class="line"><a id="l04505" name="l04505"></a><span class="lineno"> 4505</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a4d73f86ddc3aafe3231c33c098b9d6c8">is_engine_on</a>( e ) ) {</div>
<div class="line"><a id="l04506" name="l04506"></a><span class="lineno"> 4506</span>                epower += <a class="code hl_function" href="classvehicle.html#a27cec1366be7bf296d9c483a40833120">part_epower_w</a>( <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e] );</div>
<div class="line"><a id="l04507" name="l04507"></a><span class="lineno"> 4507</span>            }</div>
<div class="line"><a id="l04508" name="l04508"></a><span class="lineno"> 4508</span>        }</div>
<div class="line"><a id="l04509" name="l04509"></a><span class="lineno"> 4509</span>    }</div>
<div class="line"><a id="l04510" name="l04510"></a><span class="lineno"> 4510</span> </div>
<div class="line"><a id="l04511" name="l04511"></a><span class="lineno"> 4511</span>    <span class="keywordflow">return</span> epower;</div>
<div class="line"><a id="l04512" name="l04512"></a><span class="lineno"> 4512</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01930">engine_on</a>, <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, <a class="el" href="vehicle_8cpp_source.html#l01087">is_engine_on()</a>, and <a class="el" href="vehicle_8cpp_source.html#l01208">part_epower_w()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04579">net_battery_charge_rate_w()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04619">power_parts()</a>.</p>

</div>
</div>
<a id="a8beceeb67e5a0355b3737efa24638a15" name="a8beceeb67e5a0355b3737efa24638a15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8beceeb67e5a0355b3737efa24638a15">&#9670;&nbsp;</a></span>total_folded_volume()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceunits.html#a5d16607c866588620acb381e7dbbf0a6">units::volume</a> vehicle::total_folded_volume </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03135">3135</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03136" name="l03136"></a><span class="lineno"> 3136</span>{</div>
<div class="line"><a id="l03137" name="l03137"></a><span class="lineno"> 3137</span>    <a class="code hl_class" href="classunits_1_1quantity.html">units::volume</a> m = 0_ml;</div>
<div class="line"><a id="l03138" name="l03138"></a><span class="lineno"> 3138</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a397b40aa92dd1fd09ee592aa279bc656">get_all_parts</a>() ) {</div>
<div class="line"><a id="l03139" name="l03139"></a><span class="lineno"> 3139</span>        <span class="keywordflow">if</span>( vp.part().removed ) {</div>
<div class="line"><a id="l03140" name="l03140"></a><span class="lineno"> 3140</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03141" name="l03141"></a><span class="lineno"> 3141</span>        }</div>
<div class="line"><a id="l03142" name="l03142"></a><span class="lineno"> 3142</span>        m += vp.info().folded_volume;</div>
<div class="line"><a id="l03143" name="l03143"></a><span class="lineno"> 3143</span>    }</div>
<div class="line"><a id="l03144" name="l03144"></a><span class="lineno"> 3144</span>    <span class="keywordflow">return</span> m;</div>
<div class="line"><a id="l03145" name="l03145"></a><span class="lineno"> 3145</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l06882">get_all_parts()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00801">fold_up()</a>.</p>

</div>
</div>
<a id="a5a7d83716bf73d4b58d265b626872d01" name="a5a7d83716bf73d4b58d265b626872d01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a7d83716bf73d4b58d265b626872d01">&#9670;&nbsp;</a></span>total_mass()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceunits.html#af4f3159f510e2b4372187d8fb4746e23">units::mass</a> vehicle::total_mass </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03126">3126</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03127" name="l03127"></a><span class="lineno"> 3127</span>{</div>
<div class="line"><a id="l03128" name="l03128"></a><span class="lineno"> 3128</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#ac9c7234d3c2f5f0c42cc57b0931d21a6">mass_dirty</a> ) {</div>
<div class="line"><a id="l03129" name="l03129"></a><span class="lineno"> 3129</span>        <a class="code hl_function" href="classvehicle.html#a3a15aa4c2578558dd2262029807deb71">refresh_mass</a>();</div>
<div class="line"><a id="l03130" name="l03130"></a><span class="lineno"> 3130</span>    }</div>
<div class="line"><a id="l03131" name="l03131"></a><span class="lineno"> 3131</span> </div>
<div class="line"><a id="l03132" name="l03132"></a><span class="lineno"> 3132</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#a4b083d16089ec28b00bfe19a53cf90d6">mass_cache</a>;</div>
<div class="line"><a id="l03133" name="l03133"></a><span class="lineno"> 3133</span>}</div>
<div class="ttc" id="aclassvehicle_html_a3a15aa4c2578558dd2262029807deb71"><div class="ttname"><a href="classvehicle.html#a3a15aa4c2578558dd2262029807deb71">vehicle::refresh_mass</a></div><div class="ttdeci">void refresh_mass() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06789">vehicle.cpp:6789</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01814">mass_cache</a>, <a class="el" href="vehicle_8h_source.html#l01900">mass_dirty</a>, and <a class="el" href="vehicle_8cpp_source.html#l06789">refresh_mass()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03928">coeff_rolling_drag()</a>, <a class="el" href="vehicle_8cpp_source.html#l04047">coeff_water_drag()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00801">fold_up()</a>, <a class="el" href="grab_8cpp_source.html#l00021">game::grabbed_veh_move()</a>, <a class="el" href="vehicle_8cpp_source.html#l03375">ground_acceleration()</a>, <a class="el" href="vehicle_8cpp_source.html#l04011">has_sufficient_rotorlift()</a>, <a class="el" href="veh__interact_8cpp_source.html#l00095">jack_quality()</a>, <a class="el" href="vehicle_8cpp_source.html#l04097">k_traction()</a>, <a class="el" href="vehicle_8cpp_source.html#l01012">lift_strength()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00470">part_collision()</a>, <a class="el" href="player_8cpp_source.html#l00756">player::pause()</a>, <a class="el" href="vehicle_8cpp_source.html#l03396">rotor_acceleration()</a>, <a class="el" href="monmove_8cpp_source.html#l02021">monster::shove_vehicle()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00087">slowdown()</a>, <a class="el" href="map_8cpp_source.html#l00741">map::vehicle_vehicle_collision()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03406">water_acceleration()</a>.</p>

</div>
</div>
<a id="a73db9a09464720b32da8e3f214475a8e" name="a73db9a09464720b32da8e3f214475a8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73db9a09464720b32da8e3f214475a8e">&#9670;&nbsp;</a></span>total_power_w()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::total_power_w </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fueled</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>safe</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03333">3333</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03334" name="l03334"></a><span class="lineno"> 3334</span>{</div>
<div class="line"><a id="l03335" name="l03335"></a><span class="lineno"> 3335</span>    <span class="keywordtype">int</span> pwr = 0;</div>
<div class="line"><a id="l03336" name="l03336"></a><span class="lineno"> 3336</span>    <span class="keywordtype">int</span> cnt = 0;</div>
<div class="line"><a id="l03337" name="l03337"></a><span class="lineno"> 3337</span> </div>
<div class="line"><a id="l03338" name="l03338"></a><span class="lineno"> 3338</span>    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> e = 0; e &lt; <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.size(); e++ ) {</div>
<div class="line"><a id="l03339" name="l03339"></a><span class="lineno"> 3339</span>        <span class="keywordtype">int</span> p = <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e];</div>
<div class="line"><a id="l03340" name="l03340"></a><span class="lineno"> 3340</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a4d73f86ddc3aafe3231c33c098b9d6c8">is_engine_on</a>( e ) &amp;&amp; ( !fueled || <a class="code hl_function" href="classvehicle.html#af615cefb430470fc97b60635a382bc7a">engine_fuel_left</a>( e ) ) ) {</div>
<div class="line"><a id="l03341" name="l03341"></a><span class="lineno"> 3341</span>            <span class="keywordtype">int</span> m2c = <a class="code hl_function" href="namespaceiexamine.html#ac7d5f75dd77cb40f322824cb59244bd7">safe</a> ? <a class="code hl_function" href="classvehicle.html#aab4917d0f78fe4df1c8f5303fdf2b86d">part_info</a>( <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e] ).<a class="code hl_function" href="classvpart__info.html#ad2c153dbeec562f7b1a319f515e466ea">engine_m2c</a>() : 100;</div>
<div class="line"><a id="l03342" name="l03342"></a><span class="lineno"> 3342</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e] ].faults().<a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a>( <a class="code hl_variable" href="vehicle_8cpp.html#a34a9a7092d079c64e664da1e486ddfc0">fault_filter_fuel</a> ) ) {</div>
<div class="line"><a id="l03343" name="l03343"></a><span class="lineno"> 3343</span>                m2c *= 0.6;</div>
<div class="line"><a id="l03344" name="l03344"></a><span class="lineno"> 3344</span>            }</div>
<div class="line"><a id="l03345" name="l03345"></a><span class="lineno"> 3345</span>            pwr += <a class="code hl_function" href="classvehicle.html#a5246baeafa78272d858f6cce466579e4">part_vpower_w</a>( p ) * m2c / 100;</div>
<div class="line"><a id="l03346" name="l03346"></a><span class="lineno"> 3346</span>            cnt++;</div>
<div class="line"><a id="l03347" name="l03347"></a><span class="lineno"> 3347</span>        }</div>
<div class="line"><a id="l03348" name="l03348"></a><span class="lineno"> 3348</span>    }</div>
<div class="line"><a id="l03349" name="l03349"></a><span class="lineno"> 3349</span> </div>
<div class="line"><a id="l03350" name="l03350"></a><span class="lineno"> 3350</span>    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> <a class="code hl_variable" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> = 0; <a class="code hl_variable" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> &lt; <a class="code hl_variable" href="classvehicle.html#ab4dee440f50b7e9a412faf4dab9796c0">alternators</a>.size(); <a class="code hl_variable" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a>++ ) {</div>
<div class="line"><a id="l03351" name="l03351"></a><span class="lineno"> 3351</span>        <span class="keywordtype">int</span> p = <a class="code hl_variable" href="classvehicle.html#ab4dee440f50b7e9a412faf4dab9796c0">alternators</a>[<a class="code hl_variable" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a>];</div>
<div class="line"><a id="l03352" name="l03352"></a><span class="lineno"> 3352</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#af73c2981a9b17d7e67d37568f7ce0401">is_alternator_on</a>( <a class="code hl_variable" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> ) ) {</div>
<div class="line"><a id="l03353" name="l03353"></a><span class="lineno"> 3353</span>            pwr += <a class="code hl_function" href="classvehicle.html#a5246baeafa78272d858f6cce466579e4">part_vpower_w</a>( p ); <span class="comment">// alternators have negative power</span></div>
<div class="line"><a id="l03354" name="l03354"></a><span class="lineno"> 3354</span>        }</div>
<div class="line"><a id="l03355" name="l03355"></a><span class="lineno"> 3355</span>    }</div>
<div class="line"><a id="l03356" name="l03356"></a><span class="lineno"> 3356</span>    pwr = std::max( 0, pwr );</div>
<div class="line"><a id="l03357" name="l03357"></a><span class="lineno"> 3357</span> </div>
<div class="line"><a id="l03358" name="l03358"></a><span class="lineno"> 3358</span>    <span class="keywordflow">if</span>( cnt &gt; 1 ) {</div>
<div class="line"><a id="l03359" name="l03359"></a><span class="lineno"> 3359</span>        pwr = pwr * 4 / ( 4 + cnt - 1 );</div>
<div class="line"><a id="l03360" name="l03360"></a><span class="lineno"> 3360</span>    }</div>
<div class="line"><a id="l03361" name="l03361"></a><span class="lineno"> 3361</span>    <span class="keywordflow">return</span> pwr;</div>
<div class="line"><a id="l03362" name="l03362"></a><span class="lineno"> 3362</span>}</div>
<div class="ttc" id="aclassvpart__info_html_ad2c153dbeec562f7b1a319f515e466ea"><div class="ttname"><a href="classvpart__info.html#ad2c153dbeec562f7b1a319f515e466ea">vpart_info::engine_m2c</a></div><div class="ttdeci">int engine_m2c() const</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8cpp_source.html#l00867">veh_type.cpp:867</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01029">a</a>, <a class="el" href="vehicle_8h_source.html#l01751">alternators</a>, <a class="el" href="fmtlib__core_8h_source.html#l01073">detail::count()</a>, <a class="el" href="vehicle_8cpp_source.html#l03230">engine_fuel_left()</a>, <a class="el" href="veh__type_8cpp_source.html#l00867">vpart_info::engine_m2c()</a>, <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, <a class="el" href="vehicle_8cpp.html#a34a9a7092d079c64e664da1e486ddfc0">fault_filter_fuel</a>, <a class="el" href="vehicle_8cpp_source.html#l01097">is_alternator_on()</a>, <a class="el" href="vehicle_8cpp_source.html#l01087">is_engine_on()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8cpp_source.html#l01149">part_vpower_w()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="iexamine_8cpp_source.html#l01398">iexamine::safe()</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l01355">veh_interact::calc_overview()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01230">crash_terrain_around()</a>, <a class="el" href="vehicle_8cpp_source.html#l03375">ground_acceleration()</a>, <a class="el" href="vehicle_8cpp_source.html#l05033">idle()</a>, <a class="el" href="vehicle_8cpp_source.html#l03995">lift_thrust_of_rotorcraft()</a>, <a class="el" href="vehicle_8cpp_source.html#l03502">max_ground_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l03524">max_water_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l03567">safe_ground_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l03585">safe_water_velocity()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03406">water_acceleration()</a>.</p>

</div>
</div>
<a id="a05d21beabf48728a05a9c202dd3972ee" name="a05d21beabf48728a05a9c202dd3972ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05d21beabf48728a05a9c202dd3972ee">&#9670;&nbsp;</a></span>total_rotor_area()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double vehicle::total_rotor_area </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>total area of every rotors in m^2 </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03984">3984</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03985" name="l03985"></a><span class="lineno"> 3985</span>{</div>
<div class="line"><a id="l03986" name="l03986"></a><span class="lineno"> 3986</span>    <span class="keywordflow">return</span> std::accumulate( <a class="code hl_variable" href="classvehicle.html#aa8c51c573320aab5e499c239e78a285b">rotors</a>.begin(), <a class="code hl_variable" href="classvehicle.html#aa8c51c573320aab5e499c239e78a285b">rotors</a>.end(), <span class="keywordtype">double</span>{0},</div>
<div class="line"><a id="l03987" name="l03987"></a><span class="lineno"> 3987</span>    [&amp;]( <span class="keywordtype">double</span> acc, <span class="keywordtype">int</span> rotor ) {</div>
<div class="line"><a id="l03988" name="l03988"></a><span class="lineno"> 3988</span>        const double radius{ parts[ rotor ].info().rotor_diameter() / 2.0 };</div>
<div class="line"><a id="l03989" name="l03989"></a><span class="lineno"> 3989</span>        <span class="keywordflow">return</span> acc + <a class="code hl_define" href="math__defines_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * std::pow( radius, 2 );</div>
<div class="line"><a id="l03990" name="l03990"></a><span class="lineno"> 3990</span>    } );</div>
<div class="line"><a id="l03991" name="l03991"></a><span class="lineno"> 3991</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="math__defines_8h_source.html#l00021">M_PI</a>, and <a class="el" href="vehicle_8h_source.html#l01762">rotors</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03995">lift_thrust_of_rotorcraft()</a>.</p>

</div>
</div>
<a id="a9263dc6065a0c465c2716a3964a55bb8" name="a9263dc6065a0c465c2716a3964a55bb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9263dc6065a0c465c2716a3964a55bb8">&#9670;&nbsp;</a></span>total_solar_epower_w()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::total_solar_epower_w </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04514">4514</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04515" name="l04515"></a><span class="lineno"> 4515</span>{</div>
<div class="line"><a id="l04516" name="l04516"></a><span class="lineno"> 4516</span>    <span class="keywordtype">int</span> epower_w = 0;</div>
<div class="line"><a id="l04517" name="l04517"></a><span class="lineno"> 4517</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> : <a class="code hl_variable" href="classvehicle.html#a59bb3a4e9aa26397203cce91d56ab2ec">solar_panels</a> ) {</div>
<div class="line"><a id="l04518" name="l04518"></a><span class="lineno"> 4518</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ].is_unavailable() ) {</div>
<div class="line"><a id="l04519" name="l04519"></a><span class="lineno"> 4519</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04520" name="l04520"></a><span class="lineno"> 4520</span>        }</div>
<div class="line"><a id="l04521" name="l04521"></a><span class="lineno"> 4521</span> </div>
<div class="line"><a id="l04522" name="l04522"></a><span class="lineno"> 4522</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="vehicle_8cpp.html#ab1508062d0dc9f36f50d9cd52b8ca2f8">is_sm_tile_outside</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.getabs( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ) ) ) ) {</div>
<div class="line"><a id="l04523" name="l04523"></a><span class="lineno"> 4523</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04524" name="l04524"></a><span class="lineno"> 4524</span>        }</div>
<div class="line"><a id="l04525" name="l04525"></a><span class="lineno"> 4525</span> </div>
<div class="line"><a id="l04526" name="l04526"></a><span class="lineno"> 4526</span>        epower_w += <a class="code hl_function" href="classvehicle.html#a27cec1366be7bf296d9c483a40833120">part_epower_w</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> );</div>
<div class="line"><a id="l04527" name="l04527"></a><span class="lineno"> 4527</span>    }</div>
<div class="line"><a id="l04528" name="l04528"></a><span class="lineno"> 4528</span>    <span class="comment">// Weather doesn&#39;t change much across the area of the vehicle, so just</span></div>
<div class="line"><a id="l04529" name="l04529"></a><span class="lineno"> 4529</span>    <span class="comment">// sample it once.</span></div>
<div class="line"><a id="l04530" name="l04530"></a><span class="lineno"> 4530</span>    <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">weather_type_id</a> &amp;wtype = <a class="code hl_function" href="group__Weather.html#ga275631a4069758bffeb8d4fad0cb5919">current_weather</a>( <a class="code hl_function" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>() );</div>
<div class="line"><a id="l04531" name="l04531"></a><span class="lineno"> 4531</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> tick_sunlight = <a class="code hl_function" href="group__Weather.html#gadf065e79a6c231ceff618552f791c1b1">incident_sunlight</a>( wtype, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l04532" name="l04532"></a><span class="lineno"> 4532</span>    <span class="keywordtype">double</span> <a class="code hl_enumvalue" href="namespacefields.html#af8bc739ca8fbe535a44afc02da973280a04bb0ec2d0e931c59f606510558e55a1">intensity</a> = tick_sunlight / <a class="code hl_function" href="calendar_8cpp.html#aaf7cb0e1d64b92af65e14538a7e97674">default_daylight_level</a>();</div>
<div class="line"><a id="l04533" name="l04533"></a><span class="lineno"> 4533</span>    <span class="keywordflow">return</span> epower_w * <a class="code hl_enumvalue" href="namespacefields.html#af8bc739ca8fbe535a44afc02da973280a04bb0ec2d0e931c59f606510558e55a1">intensity</a>;</div>
<div class="line"><a id="l04534" name="l04534"></a><span class="lineno"> 4534</span>}</div>
<div class="ttc" id="acalendar_8cpp_html_aaf7cb0e1d64b92af65e14538a7e97674"><div class="ttname"><a href="calendar_8cpp.html#aaf7cb0e1d64b92af65e14538a7e97674">default_daylight_level</a></div><div class="ttdeci">double default_daylight_level()</div><div class="ttdoc">How much light is provided in full daylight.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00062">calendar.cpp:62</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga275631a4069758bffeb8d4fad0cb5919"><div class="ttname"><a href="group__Weather.html#ga275631a4069758bffeb8d4fad0cb5919">current_weather</a></div><div class="ttdeci">const weather_type_id &amp; current_weather(const tripoint &amp;location, const time_point &amp;t)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00143">weather.cpp:143</a></div></div>
<div class="ttc" id="agroup__Weather_html_gadf065e79a6c231ceff618552f791c1b1"><div class="ttname"><a href="group__Weather.html#gadf065e79a6c231ceff618552f791c1b1">incident_sunlight</a></div><div class="ttdeci">int incident_sunlight(const weather_type_id &amp;wtype, const time_point &amp;t)</div><div class="ttdoc">Amount of sunlight incident at the ground, taking weather and time of day into account.</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00107">weather.cpp:107</a></div></div>
<div class="ttc" id="avehicle_8cpp_html_ab1508062d0dc9f36f50d9cd52b8ca2f8"><div class="ttname"><a href="vehicle_8cpp.html#ab1508062d0dc9f36f50d9cd52b8ca2f8">is_sm_tile_outside</a></div><div class="ttdeci">static bool is_sm_tile_outside(const tripoint &amp;real_global_pos)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06637">vehicle.cpp:6637</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="weather_8cpp_source.html#l00143">current_weather()</a>, <a class="el" href="calendar_8cpp_source.html#l00062">default_daylight_level()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l03101">global_pos3()</a>, <a class="el" href="weather_8cpp_source.html#l00107">incident_sunlight()</a>, <a class="el" href="vehicle_8cpp_source.html#l06637">is_sm_tile_outside()</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8cpp_source.html#l01208">part_epower_w()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8h_source.html#l01754">solar_panels</a>, and <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04579">net_battery_charge_rate_w()</a>.</p>

</div>
</div>
<a id="a7d7bd918d812d83f1fe3705f45b8615f" name="a7d7bd918d812d83f1fe3705f45b8615f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d7bd918d812d83f1fe3705f45b8615f">&#9670;&nbsp;</a></span>total_water_wheel_epower_w()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::total_water_wheel_epower_w </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04561">4561</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04562" name="l04562"></a><span class="lineno"> 4562</span>{</div>
<div class="line"><a id="l04563" name="l04563"></a><span class="lineno"> 4563</span>    <span class="keywordtype">int</span> epower_w = 0;</div>
<div class="line"><a id="l04564" name="l04564"></a><span class="lineno"> 4564</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> : <a class="code hl_variable" href="classvehicle.html#aaebcdca0982ede955b6da03757db4e77">water_wheels</a> ) {</div>
<div class="line"><a id="l04565" name="l04565"></a><span class="lineno"> 4565</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ].is_unavailable() ) {</div>
<div class="line"><a id="l04566" name="l04566"></a><span class="lineno"> 4566</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04567" name="l04567"></a><span class="lineno"> 4567</span>        }</div>
<div class="line"><a id="l04568" name="l04568"></a><span class="lineno"> 4568</span> </div>
<div class="line"><a id="l04569" name="l04569"></a><span class="lineno"> 4569</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="vehicle_8cpp.html#a90151ad87e2e076c5ac35442963f5fe1">is_sm_tile_over_water</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.getabs( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ) ) ) ) {</div>
<div class="line"><a id="l04570" name="l04570"></a><span class="lineno"> 4570</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04571" name="l04571"></a><span class="lineno"> 4571</span>        }</div>
<div class="line"><a id="l04572" name="l04572"></a><span class="lineno"> 4572</span> </div>
<div class="line"><a id="l04573" name="l04573"></a><span class="lineno"> 4573</span>        epower_w += <a class="code hl_function" href="classvehicle.html#a27cec1366be7bf296d9c483a40833120">part_epower_w</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> );</div>
<div class="line"><a id="l04574" name="l04574"></a><span class="lineno"> 4574</span>    }</div>
<div class="line"><a id="l04575" name="l04575"></a><span class="lineno"> 4575</span>    <span class="comment">// TODO: river current intensity changes power - flat for now.</span></div>
<div class="line"><a id="l04576" name="l04576"></a><span class="lineno"> 4576</span>    <span class="keywordflow">return</span> epower_w;</div>
<div class="line"><a id="l04577" name="l04577"></a><span class="lineno"> 4577</span>}</div>
<div class="ttc" id="avehicle_8cpp_html_a90151ad87e2e076c5ac35442963f5fe1"><div class="ttname"><a href="vehicle_8cpp.html#a90151ad87e2e076c5ac35442963f5fe1">is_sm_tile_over_water</a></div><div class="ttdeci">static bool is_sm_tile_over_water(const tripoint &amp;real_global_pos)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06617">vehicle.cpp:6617</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l06617">is_sm_tile_over_water()</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8cpp_source.html#l01208">part_epower_w()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="vehicle_8h_source.html#l01756">water_wheels</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04579">net_battery_charge_rate_w()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06657">update_time()</a>.</p>

</div>
</div>
<a id="ad83675cd116674b36d3dd8e094b7a28b" name="ad83675cd116674b36d3dd8e094b7a28b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad83675cd116674b36d3dd8e094b7a28b">&#9670;&nbsp;</a></span>total_wind_epower_w()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::total_wind_epower_w </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04536">4536</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04537" name="l04537"></a><span class="lineno"> 4537</span>{</div>
<div class="line"><a id="l04538" name="l04538"></a><span class="lineno"> 4538</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l04539" name="l04539"></a><span class="lineno"> 4539</span>    <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">oter_id</a> &amp;cur_om_ter = <a class="code hl_variable" href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a>.<a class="code hl_function" href="classovermapbuffer.html#aa9fbf966291f6b82de9c540262324aba">ter</a>( <a class="code hl_function" href="classvehicle.html#aec200af03ac3aa401024514d9cfd60ee">global_omt_location</a>() );</div>
<div class="line"><a id="l04540" name="l04540"></a><span class="lineno"> 4540</span>    <span class="keyword">const</span> <a class="code hl_class" href="classweather__manager.html">weather_manager</a> &amp;<a class="code hl_namespace" href="namespaceweather.html">weather</a> = <a class="code hl_function" href="group__Weather.html#gaa7b33196bf530c8b26654a0adf355165">get_weather</a>();</div>
<div class="line"><a id="l04541" name="l04541"></a><span class="lineno"> 4541</span>    <span class="keywordtype">int</span> epower_w = 0;</div>
<div class="line"><a id="l04542" name="l04542"></a><span class="lineno"> 4542</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> : <a class="code hl_variable" href="classvehicle.html#aa467e8fa404592fb7c704dfa50ac9141">wind_turbines</a> ) {</div>
<div class="line"><a id="l04543" name="l04543"></a><span class="lineno"> 4543</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ].is_unavailable() ) {</div>
<div class="line"><a id="l04544" name="l04544"></a><span class="lineno"> 4544</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04545" name="l04545"></a><span class="lineno"> 4545</span>        }</div>
<div class="line"><a id="l04546" name="l04546"></a><span class="lineno"> 4546</span> </div>
<div class="line"><a id="l04547" name="l04547"></a><span class="lineno"> 4547</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="vehicle_8cpp.html#ab1508062d0dc9f36f50d9cd52b8ca2f8">is_sm_tile_outside</a>( here.<a class="code hl_function" href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">getabs</a>( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ) ) ) ) {</div>
<div class="line"><a id="l04548" name="l04548"></a><span class="lineno"> 4548</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04549" name="l04549"></a><span class="lineno"> 4549</span>        }</div>
<div class="line"><a id="l04550" name="l04550"></a><span class="lineno"> 4550</span> </div>
<div class="line"><a id="l04551" name="l04551"></a><span class="lineno"> 4551</span>        <span class="keywordtype">double</span> windpower = <a class="code hl_function" href="group__Weather.html#ga23304505d04b612b77e4df5e9b64a1dd">get_local_windpower</a>( <a class="code hl_namespace" href="namespaceweather.html">weather</a>.windspeed, cur_om_ter, <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ),</div>
<div class="line"><a id="l04552" name="l04552"></a><span class="lineno"> 4552</span>                                                <a class="code hl_namespace" href="namespaceweather.html">weather</a>.winddirection, <span class="keyword">false</span> );</div>
<div class="line"><a id="l04553" name="l04553"></a><span class="lineno"> 4553</span>        <span class="keywordflow">if</span>( windpower &lt;= ( <a class="code hl_namespace" href="namespaceweather.html">weather</a>.windspeed / 10.0 ) ) {</div>
<div class="line"><a id="l04554" name="l04554"></a><span class="lineno"> 4554</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04555" name="l04555"></a><span class="lineno"> 4555</span>        }</div>
<div class="line"><a id="l04556" name="l04556"></a><span class="lineno"> 4556</span>        epower_w += <a class="code hl_function" href="classvehicle.html#a27cec1366be7bf296d9c483a40833120">part_epower_w</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ) * windpower;</div>
<div class="line"><a id="l04557" name="l04557"></a><span class="lineno"> 4557</span>    }</div>
<div class="line"><a id="l04558" name="l04558"></a><span class="lineno"> 4558</span>    <span class="keywordflow">return</span> epower_w;</div>
<div class="line"><a id="l04559" name="l04559"></a><span class="lineno"> 4559</span>}</div>
<div class="ttc" id="aclassmap_html_a501f3a1d449ac022f1b36b99da653e94"><div class="ttname"><a href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">map::getabs</a></div><div class="ttdeci">tripoint getabs(const tripoint &amp;p) const</div><div class="ttdoc">Translates local (to this map) coordinates of a square to global absolute coordinates.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l08048">map.cpp:8048</a></div></div>
<div class="ttc" id="aclassovermapbuffer_html_aa9fbf966291f6b82de9c540262324aba"><div class="ttname"><a href="classovermapbuffer.html#aa9fbf966291f6b82de9c540262324aba">overmapbuffer::ter</a></div><div class="ttdeci">const oter_id &amp; ter(const tripoint_abs_omt &amp;p)</div><div class="ttdoc">Returns the overmap terrain at the given OMT coordinates.</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00649">overmapbuffer.cpp:649</a></div></div>
<div class="ttc" id="aclassvehicle_html_aec200af03ac3aa401024514d9cfd60ee"><div class="ttname"><a href="classvehicle.html#aec200af03ac3aa401024514d9cfd60ee">vehicle::global_omt_location</a></div><div class="ttdeci">tripoint_abs_omt global_omt_location() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03096">vehicle.cpp:3096</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga23304505d04b612b77e4df5e9b64a1dd"><div class="ttname"><a href="group__Weather.html#ga23304505d04b612b77e4df5e9b64a1dd">get_local_windpower</a></div><div class="ttdeci">double get_local_windpower(double windpower, const oter_id &amp;omter, const tripoint &amp;location, const int &amp;winddirection, bool sheltered)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00938">weather.cpp:938</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="weather_8cpp_source.html#l00938">get_local_windpower()</a>, <a class="el" href="map_8cpp_source.html#l00141">get_map()</a>, <a class="el" href="weather_8cpp_source.html#l00064">get_weather()</a>, <a class="el" href="map_8cpp_source.html#l08048">map::getabs()</a>, <a class="el" href="vehicle_8cpp_source.html#l03096">global_omt_location()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l06637">is_sm_tile_outside()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l00044">overmap_buffer</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8cpp_source.html#l01208">part_epower_w()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l00649">overmapbuffer::ter()</a>, and <a class="el" href="vehicle_8h_source.html#l01755">wind_turbines</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04579">net_battery_charge_rate_w()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06657">update_time()</a>.</p>

</div>
</div>
<a id="ac943b06a3e2b9680b89c418abd4f62ff" name="ac943b06a3e2b9680b89c418abd4f62ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac943b06a3e2b9680b89c418abd4f62ff">&#9670;&nbsp;</a></span>tow_cable_too_far()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::tow_cable_too_far </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l05973">5973</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l05974" name="l05974"></a><span class="lineno"> 5974</span>{</div>
<div class="line"><a id="l05975" name="l05975"></a><span class="lineno"> 5975</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a5f5e060b9d76c409ae99c49fbdeda88f">get_towed_by</a>() ) {</div>
<div class="line"><a id="l05976" name="l05976"></a><span class="lineno"> 5976</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;checking tow cable length on a vehicle that has no towing vehicle&quot;</span> );</div>
<div class="line"><a id="l05977" name="l05977"></a><span class="lineno"> 5977</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05978" name="l05978"></a><span class="lineno"> 5978</span>    }</div>
<div class="line"><a id="l05979" name="l05979"></a><span class="lineno"> 5979</span>    <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="namespacedetail.html#ac4c79842ec549e8b02145d43a1fbc330a6a992d5529f459a44fee58c733255e86">index</a> = <a class="code hl_function" href="classvehicle.html#adb9be9ceedf5b5922879fad1646da8fb">get_tow_part</a>();</div>
<div class="line"><a id="l05980" name="l05980"></a><span class="lineno"> 5980</span>    <span class="keywordflow">if</span>( index == -1 ) {</div>
<div class="line"><a id="l05981" name="l05981"></a><span class="lineno"> 5981</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;towing data exists but no towing part&quot;</span> );</div>
<div class="line"><a id="l05982" name="l05982"></a><span class="lineno"> 5982</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05983" name="l05983"></a><span class="lineno"> 5983</span>    }</div>
<div class="line"><a id="l05984" name="l05984"></a><span class="lineno"> 5984</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> towing_point = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.getabs( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( index ) );</div>
<div class="line"><a id="l05985" name="l05985"></a><span class="lineno"> 5985</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a5f5e060b9d76c409ae99c49fbdeda88f">get_towed_by</a>()-&gt;<a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a4cc6247530a16020db73b3af28e0024e">get_towed</a>() ) {</div>
<div class="line"><a id="l05986" name="l05986"></a><span class="lineno"> 5986</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;vehicle %s has data for a towing vehicle, but that towing vehicle does not have %s listed as towed&quot;</span>,</div>
<div class="line"><a id="l05987" name="l05987"></a><span class="lineno"> 5987</span>                  <a class="code hl_function" href="classvehicle.html#ace5c25f3faffd8848491570cfb89f086">disp_name</a>(), <a class="code hl_function" href="classvehicle.html#ace5c25f3faffd8848491570cfb89f086">disp_name</a>() );</div>
<div class="line"><a id="l05988" name="l05988"></a><span class="lineno"> 5988</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05989" name="l05989"></a><span class="lineno"> 5989</span>    }</div>
<div class="line"><a id="l05990" name="l05990"></a><span class="lineno"> 5990</span>    <span class="keywordtype">int</span> other_index = <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a5f5e060b9d76c409ae99c49fbdeda88f">get_towed_by</a>()-&gt;<a class="code hl_function" href="classvehicle.html#adb9be9ceedf5b5922879fad1646da8fb">get_tow_part</a>();</div>
<div class="line"><a id="l05991" name="l05991"></a><span class="lineno"> 5991</span>    <span class="keywordflow">if</span>( other_index == -1 ) {</div>
<div class="line"><a id="l05992" name="l05992"></a><span class="lineno"> 5992</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;towing data exists but no towing part&quot;</span> );</div>
<div class="line"><a id="l05993" name="l05993"></a><span class="lineno"> 5993</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05994" name="l05994"></a><span class="lineno"> 5994</span>    }</div>
<div class="line"><a id="l05995" name="l05995"></a><span class="lineno"> 5995</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> towed_point = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.getabs( <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a5f5e060b9d76c409ae99c49fbdeda88f">get_towed_by</a>()-&gt;<a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( other_index ) );</div>
<div class="line"><a id="l05996" name="l05996"></a><span class="lineno"> 5996</span>    <span class="keywordflow">if</span>( towing_point == <a class="code hl_variable" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a> || towed_point == <a class="code hl_variable" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a> ) {</div>
<div class="line"><a id="l05997" name="l05997"></a><span class="lineno"> 5997</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;towing data exists but no towing part&quot;</span> );</div>
<div class="line"><a id="l05998" name="l05998"></a><span class="lineno"> 5998</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l05999" name="l05999"></a><span class="lineno"> 5999</span>    }</div>
<div class="line"><a id="l06000" name="l06000"></a><span class="lineno"> 6000</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( towing_point, towed_point ) &gt;= 25;</div>
<div class="line"><a id="l06001" name="l06001"></a><span class="lineno"> 6001</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00029">disp_name()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l05874">get_tow_part()</a>, <a class="el" href="vehicle_8h_source.html#l00158">towing_data::get_towed()</a>, <a class="el" href="vehicle_8h_source.html#l00154">towing_data::get_towed_by()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="coordinates_8h_source.html#l00519">rl_dist()</a>, <a class="el" href="vehicle_8h_source.html#l01887">tow_data</a>, and <a class="el" href="point_8h_source.html#l00273">tripoint_zero</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>.</p>

</div>
</div>
<a id="a75e144a47baea76ae92c0f6fc1e7c780" name="a75e144a47baea76ae92c0f6fc1e7c780"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75e144a47baea76ae92c0f6fc1e7c780">&#9670;&nbsp;</a></span>tracking_toggle_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string vehicle::tracking_toggle_string </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l00537">537</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>{</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#abe5f5ade599d2cd543a3e3c3860bc051">tracking_on</a> ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Forget vehicle position&quot;</span> ) : <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Remember vehicle position&quot;</span> );</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, and <a class="el" href="vehicle_8h_source.html#l01932">tracking_on</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>.</p>

</div>
</div>
<a id="a45a1410dc6e76021f7ed69ba82e93fe8" name="a45a1410dc6e76021f7ed69ba82e93fe8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45a1410dc6e76021f7ed69ba82e93fe8">&#9670;&nbsp;</a></span>transform_terrain()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::transform_terrain </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01264">1264</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>{</div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a791413b7697a0ef434df0fe73d85b9fe">get_enabled_parts</a>( <span class="stringliteral">&quot;TRANSFORM_TERRAIN&quot;</span> ) ) {</div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> start_pos = vp.pos();</div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structtransform__terrain__data.html">transform_terrain_data</a> &amp;ttd = vp.info().transform_terrain;</div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span>        <span class="keywordtype">bool</span> prereq_fulfilled = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;flag : ttd.<a class="code hl_variable" href="structtransform__terrain__data.html#af11b8f4a0203a05436441a252de3d8d1">pre_flags</a> ) {</div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.has_flag( flag, start_pos ) ) {</div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>                prereq_fulfilled = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span>            }</div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>        }</div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>        <span class="keywordflow">if</span>( prereq_fulfilled ) {</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>            <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">ter_id</a> new_ter = <a class="code hl_enumvalue" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4ace91d270e314ee1f266a1f4e30ea129b">ter_id</a>( ttd.<a class="code hl_variable" href="structtransform__terrain__data.html#a2b8045bc3ad9e49b56257fb1d97e8995">post_terrain</a> );</div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>            <span class="keywordflow">if</span>( new_ter != <a class="code hl_variable" href="mapdata_8cpp.html#a7eaf3fb1c88b99d3594824fe3cb7003f">t_null</a> ) {</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.ter_set( start_pos, new_ter );</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>            }</div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>            <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">furn_id</a> new_furn = <a class="code hl_typedef" href="type__id_8h.html#a6bc1468ac54b6176b517879f5f77564e">furn_id</a>( ttd.<a class="code hl_variable" href="structtransform__terrain__data.html#a0380fdc4b25258d0e8712626eb6daf0d">post_furniture</a> );</div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span>            <span class="keywordflow">if</span>( new_furn != <a class="code hl_variable" href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a> ) {</div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.furn_set( start_pos, new_furn );</div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>            }</div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>            <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">field_type_id</a> <a class="code hl_struct" href="structnew__field.html">new_field</a> = <a class="code hl_typedef" href="type__id_8h.html#a2a56520b7eef7294fc98230cb883c9d2">field_type_id</a>( ttd.<a class="code hl_variable" href="structtransform__terrain__data.html#a874a0c14ca2b060ddcd2a5935f6715af">post_field</a> );</div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>            <span class="keywordflow">if</span>( <a class="code hl_struct" href="structnew__field.html">new_field</a>.id() ) {</div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.add_field( start_pos, <a class="code hl_struct" href="structnew__field.html">new_field</a>, ttd.<a class="code hl_variable" href="structtransform__terrain__data.html#aa8d440fcc16f24267d2848da3365d784">post_field_intensity</a>, ttd.<a class="code hl_variable" href="structtransform__terrain__data.html#a5953bd47755ae6728c299c8d3fa9e59a">post_field_age</a> );</div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span>            }</div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> speed = std::abs( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> );</div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>            <span class="keywordtype">int</span> v_damage = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 3, speed );</div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span>            <a class="code hl_function" href="classvehicle.html#a7d539c327a7a8cb987d637f68f918cdf">damage</a>( vp.part_index(), v_damage, <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa5f8b46c6c239266403858fa2ae90ef23">DT_BASH</a>, <span class="keyword">false</span> );</div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>            <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( start_pos, v_damage, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Clanggggg!&quot;</span> ), <span class="keyword">false</span>,</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>                           <span class="stringliteral">&quot;smash_success&quot;</span>, <span class="stringliteral">&quot;hit_vehicle&quot;</span> );</div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>        }</div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>    }</div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>}</div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4ace91d270e314ee1f266a1f4e30ea129b"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4ace91d270e314ee1f266a1f4e30ea129b">cata_variant_type::ter_id</a></div><div class="ttdeci">@ ter_id</div></div>
<div class="ttc" id="amapdata_8cpp_html_a7eaf3fb1c88b99d3594824fe3cb7003f"><div class="ttname"><a href="mapdata_8cpp.html#a7eaf3fb1c88b99d3594824fe3cb7003f">t_null</a></div><div class="ttdeci">ter_id t_null</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00623">mapdata.cpp:623</a></div></div>
<div class="ttc" id="astructnew__field_html"><div class="ttname"><a href="structnew__field.html">new_field</a></div><div class="ttdef"><b>Definition:</b> <a href="event__statistics_8cpp_source.html#l00246">event_statistics.cpp:246</a></div></div>
<div class="ttc" id="astructtransform__terrain__data_html_a0380fdc4b25258d0e8712626eb6daf0d"><div class="ttname"><a href="structtransform__terrain__data.html#a0380fdc4b25258d0e8712626eb6daf0d">transform_terrain_data::post_furniture</a></div><div class="ttdeci">std::string post_furniture</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00126">veh_type.h:126</a></div></div>
<div class="ttc" id="astructtransform__terrain__data_html_a2b8045bc3ad9e49b56257fb1d97e8995"><div class="ttname"><a href="structtransform__terrain__data.html#a2b8045bc3ad9e49b56257fb1d97e8995">transform_terrain_data::post_terrain</a></div><div class="ttdeci">std::string post_terrain</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00125">veh_type.h:125</a></div></div>
<div class="ttc" id="astructtransform__terrain__data_html_a5953bd47755ae6728c299c8d3fa9e59a"><div class="ttname"><a href="structtransform__terrain__data.html#a5953bd47755ae6728c299c8d3fa9e59a">transform_terrain_data::post_field_age</a></div><div class="ttdeci">time_duration post_field_age</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00129">veh_type.h:129</a></div></div>
<div class="ttc" id="astructtransform__terrain__data_html_a874a0c14ca2b060ddcd2a5935f6715af"><div class="ttname"><a href="structtransform__terrain__data.html#a874a0c14ca2b060ddcd2a5935f6715af">transform_terrain_data::post_field</a></div><div class="ttdeci">std::string post_field</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00127">veh_type.h:127</a></div></div>
<div class="ttc" id="astructtransform__terrain__data_html_aa8d440fcc16f24267d2848da3365d784"><div class="ttname"><a href="structtransform__terrain__data.html#aa8d440fcc16f24267d2848da3365d784">transform_terrain_data::post_field_intensity</a></div><div class="ttdeci">int post_field_intensity</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00128">veh_type.h:128</a></div></div>
<div class="ttc" id="atype__id_8h_html_a2a56520b7eef7294fc98230cb883c9d2"><div class="ttname"><a href="type__id_8h.html#a2a56520b7eef7294fc98230cb883c9d2">field_type_id</a></div><div class="ttdeci">int_id&lt; field_type &gt; field_type_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00053">type_id.h:53</a></div></div>
<div class="ttc" id="atype__id_8h_html_a6bc1468ac54b6176b517879f5f77564e"><div class="ttname"><a href="type__id_8h.html#a6bc1468ac54b6176b517879f5f77564e">furn_id</a></div><div class="ttdeci">int_id&lt; furn_t &gt; furn_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00057">type_id.h:57</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::combat</a>, <a class="el" href="vehicle_8cpp_source.html#l06173">damage()</a>, <a class="el" href="damage_8h_source.html#l00024">DT_BASH</a>, <a class="el" href="mapdata_8cpp_source.html#l01095">f_null</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l02721">get_enabled_parts()</a>, <a class="el" href="veh__type_8h_source.html#l00127">transform_terrain_data::post_field</a>, <a class="el" href="veh__type_8h_source.html#l00129">transform_terrain_data::post_field_age</a>, <a class="el" href="veh__type_8h_source.html#l00128">transform_terrain_data::post_field_intensity</a>, <a class="el" href="veh__type_8h_source.html#l00126">transform_terrain_data::post_furniture</a>, <a class="el" href="veh__type_8h_source.html#l00125">transform_terrain_data::post_terrain</a>, <a class="el" href="veh__type_8h_source.html#l00124">transform_terrain_data::pre_flags</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, <a class="el" href="mapdata_8cpp_source.html#l00623">t_null</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4ace91d270e314ee1f266a1f4e30ea129b">ter_id</a>, and <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05096">on_move()</a>.</p>

</div>
</div>
<a id="a834d9feebd679075951c666c2030b881" name="a834d9feebd679075951c666c2030b881"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a834d9feebd679075951c666c2030b881">&#9670;&nbsp;</a></span>try_to_rack_nearby_vehicle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::try_to_rack_nearby_vehicle </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; std::vector&lt; int &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>list_of_racks</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01622">1622</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span>{</div>
<div class="line"><a id="l01624" name="l01624"></a><span class="lineno"> 1624</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;this_bike_rack : list_of_racks ) {</div>
<div class="line"><a id="l01625" name="l01625"></a><span class="lineno"> 1625</span>        std::vector&lt;vehicle *&gt; carry_vehs;</div>
<div class="line"><a id="l01626" name="l01626"></a><span class="lineno"> 1626</span>        carry_vehs.assign( 4, <span class="keyword">nullptr</span> );</div>
<div class="line"><a id="l01627" name="l01627"></a><span class="lineno"> 1627</span>        <a class="code hl_class" href="classvehicle.html">vehicle</a> *test_veh = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01628" name="l01628"></a><span class="lineno"> 1628</span>        std::set&lt;tripoint&gt; veh_partial_match;</div>
<div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span>        std::vector&lt;std::set&lt;tripoint&gt;&gt; partial_matches;</div>
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"> 1630</span>        partial_matches.assign( 4, veh_partial_match );</div>
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"> 1631</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> rack_part : this_bike_rack ) {</div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"> 1632</span>            <a class="code hl_struct" href="structtripoint.html">tripoint</a> rack_pos = <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( rack_part );</div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span>            <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"> 1634</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> &amp;offset : <a class="code hl_variable" href="point_8h.html#a7e55b593cf990cd4c6afb92cf74373cd">four_cardinal_directions</a> ) {</div>
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"> 1635</span>                <a class="code hl_struct" href="structtripoint.html">tripoint</a> search_pos( rack_pos + offset );</div>
<div class="line"><a id="l01636" name="l01636"></a><span class="lineno"> 1636</span>                test_veh = <a class="code hl_function" href="vpart__position_8h.html#a67bd76da258293f1443f1356308381dc">veh_pointer_or_null</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.veh_at( search_pos ) );</div>
<div class="line"><a id="l01637" name="l01637"></a><span class="lineno"> 1637</span>                <span class="keywordflow">if</span>( test_veh == <span class="keyword">nullptr</span> || test_veh == <span class="keyword">this</span> ) {</div>
<div class="line"><a id="l01638" name="l01638"></a><span class="lineno"> 1638</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01639" name="l01639"></a><span class="lineno"> 1639</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( test_veh != carry_vehs[ i ] ) {</div>
<div class="line"><a id="l01640" name="l01640"></a><span class="lineno"> 1640</span>                    carry_vehs[ i ] = test_veh;</div>
<div class="line"><a id="l01641" name="l01641"></a><span class="lineno"> 1641</span>                    partial_matches[ i ].clear();</div>
<div class="line"><a id="l01642" name="l01642"></a><span class="lineno"> 1642</span>                }</div>
<div class="line"><a id="l01643" name="l01643"></a><span class="lineno"> 1643</span>                partial_matches[ i ].insert( search_pos );</div>
<div class="line"><a id="l01644" name="l01644"></a><span class="lineno"> 1644</span>                <span class="keywordflow">if</span>( partial_matches[ i ] == test_veh-&gt;<a class="code hl_function" href="classvehicle.html#a2e80dafb2c03147b569688658843d9d6">get_points</a>() ) {</div>
<div class="line"><a id="l01645" name="l01645"></a><span class="lineno"> 1645</span>                    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a2fcad9b54e438d79b12f2e369511ffa8">merge_rackable_vehicle</a>( test_veh, this_bike_rack );</div>
<div class="line"><a id="l01646" name="l01646"></a><span class="lineno"> 1646</span>                }</div>
<div class="line"><a id="l01647" name="l01647"></a><span class="lineno"> 1647</span>                ++i;</div>
<div class="line"><a id="l01648" name="l01648"></a><span class="lineno"> 1648</span>            }</div>
<div class="line"><a id="l01649" name="l01649"></a><span class="lineno"> 1649</span>        }</div>
<div class="line"><a id="l01650" name="l01650"></a><span class="lineno"> 1650</span>    }</div>
<div class="line"><a id="l01651" name="l01651"></a><span class="lineno"> 1651</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01652" name="l01652"></a><span class="lineno"> 1652</span>}</div>
<div class="ttc" id="aclassvehicle_html_a2fcad9b54e438d79b12f2e369511ffa8"><div class="ttname"><a href="classvehicle.html#a2fcad9b54e438d79b12f2e369511ffa8">vehicle::merge_rackable_vehicle</a></div><div class="ttdeci">bool merge_rackable_vehicle(vehicle *carry_veh, const std::vector&lt; int &gt; &amp;rack_parts)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01654">vehicle.cpp:1654</a></div></div>
<div class="ttc" id="avpart__position_8h_html_a67bd76da258293f1443f1356308381dc"><div class="ttname"><a href="vpart__position_8h.html#a67bd76da258293f1443f1356308381dc">veh_pointer_or_null</a></div><div class="ttdeci">vehicle * veh_pointer_or_null(const optional_vpart_position &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="vpart__position_8h_source.html#l00154">vpart_position.h:154</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="point_8h_source.html#l00376">four_cardinal_directions</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l06568">get_points()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l01654">merge_rackable_vehicle()</a>, and <a class="el" href="vpart__position_8h_source.html#l00154">veh_pointer_or_null()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l01823">use_bike_rack()</a>.</p>

</div>
</div>
<a id="a1380ff85985897f9f8a34eba538e04db" name="a1380ff85985897f9f8a34eba538e04db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1380ff85985897f9f8a34eba538e04db">&#9670;&nbsp;</a></span>turn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::turn </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">units::angle</a>&#160;</td>
          <td class="paramname"><em>deg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__move_8cpp_source.html#l00324">324</a> of file <a class="el" href="vehicle__move_8cpp_source.html">vehicle_move.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>{</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>    <span class="keywordflow">if</span>( deg == 0_degrees ) {</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>    }</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &lt; 0 &amp;&amp; !::get_option&lt;bool&gt;( <span class="stringliteral">&quot;REVERSE_STEERING&quot;</span> ) ) {</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>        deg = -deg;</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>    }</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>    <a class="code hl_variable" href="classvehicle.html#a3d4d97e9ca8cb2642001f8f61df500d5">last_turn</a> = deg;</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    <a class="code hl_variable" href="classvehicle.html#af366981a584e12d25133fb479d47de33">turn_dir</a> = <a class="code hl_function" href="namespacedetail.html#a955ad02ade4f07084391a60ed80701bf">normalize</a>( <a class="code hl_variable" href="classvehicle.html#af366981a584e12d25133fb479d47de33">turn_dir</a> + deg );</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>    <span class="comment">// quick rounding the turn dir to a multiple of 15</span></div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>    <a class="code hl_variable" href="classvehicle.html#af366981a584e12d25133fb479d47de33">turn_dir</a> = <a class="code hl_function" href="units__utility_8h.html#a0ff5ed49bfcc963d25c49bd38df494e3">round_to_multiple_of</a>( <a class="code hl_variable" href="classvehicle.html#af366981a584e12d25133fb479d47de33">turn_dir</a>, 15_degrees );</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01872">last_turn</a>, <a class="el" href="fmtlib__format-inl_8h_source.html#l01223">detail::normalize()</a>, <a class="el" href="units__utility_8h_source.html#l00038">round_to_multiple_of()</a>, <a class="el" href="vehicle_8h_source.html#l01870">turn_dir</a>, and <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, <a class="el" href="grab_8cpp_source.html#l00021">game::grabbed_veh_move()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00144">handbrake()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00470">part_collision()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01061">pldrive()</a>, <a class="el" href="vehicle_8cpp_source.html#l06547">restore()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00933">selfdrive()</a>.</p>

</div>
</div>
<a id="ab09a1e3aa362419ee575f17fd665de1d" name="ab09a1e3aa362419ee575f17fd665de1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab09a1e3aa362419ee575f17fd665de1d">&#9670;&nbsp;</a></span>turret_query() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classturret__data.html">turret_data</a> vehicle::turret_query </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="turret_8cpp_source.html#l00068">68</a> of file <a class="el" href="turret_8cpp_source.html">turret.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>{</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>    <span class="keyword">auto</span> res = <a class="code hl_function" href="classvehicle.html#a38ba5bdc99241568c83ada974ed73e07">get_parts_at</a>( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, <span class="stringliteral">&quot;TURRET&quot;</span>, <a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02ca100b8cad7cf2a56f6df78f171f97a1ec">part_status_flag::any</a> );</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    <span class="keywordflow">return</span> !res.empty() ? <a class="code hl_function" href="classvehicle.html#accfab81af66cd979bdfff4c39e5a3a8e">turret_query</a>( *res.front() ) : <a class="code hl_class" href="classturret__data.html">turret_data</a>();</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02ca100b8cad7cf2a56f6df78f171f97a1ec">any</a>, <a class="el" href="vehicle_8cpp_source.html#l02580">get_parts_at()</a>, <a class="el" href="vehicle_8h_source.html#l01859">pos</a>, and <a class="el" href="turret_8cpp_source.html#l00055">turret_query()</a>.</p>

</div>
</div>
<a id="a5e9f2af1c1de05a9bfa205c2f3695140" name="a5e9f2af1c1de05a9bfa205c2f3695140"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e9f2af1c1de05a9bfa205c2f3695140">&#9670;&nbsp;</a></span>turret_query() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classturret__data.html">turret_data</a> vehicle::turret_query </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="turret_8cpp_source.html#l00074">74</a> of file <a class="el" href="turret_8cpp_source.html">turret.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>{</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>    <span class="keywordflow">return</span> <span class="keyword">const_cast&lt;</span><a class="code hl_class" href="classvehicle.html">vehicle</a> *<span class="keyword">&gt;</span>( this )-&gt;<a class="code hl_function" href="classvehicle.html#accfab81af66cd979bdfff4c39e5a3a8e">turret_query</a>( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> );</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01859">pos</a>, and <a class="el" href="turret_8cpp_source.html#l00055">turret_query()</a>.</p>

</div>
</div>
<a id="abc77498516e3767f7a1e309e4302d40f" name="abc77498516e3767f7a1e309e4302d40f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc77498516e3767f7a1e309e4302d40f">&#9670;&nbsp;</a></span>turret_query() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classturret__data.html">turret_data</a> vehicle::turret_query </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;&#160;</td>
          <td class="paramname"><em>pt</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="turret_8cpp_source.html#l00063">63</a> of file <a class="el" href="turret_8cpp_source.html">turret.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>{</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>    <span class="keywordflow">return</span> <span class="keyword">const_cast&lt;</span><a class="code hl_class" href="classvehicle.html">vehicle</a> *<span class="keyword">&gt;</span>( this )-&gt;<a class="code hl_function" href="classvehicle.html#accfab81af66cd979bdfff4c39e5a3a8e">turret_query</a>( <span class="keyword">const_cast&lt;</span><a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;<span class="keyword">&gt;</span>( pt ) );</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="turret_8cpp_source.html#l00055">turret_query()</a>.</p>

</div>
</div>
<a id="accfab81af66cd979bdfff4c39e5a3a8e" name="accfab81af66cd979bdfff4c39e5a3a8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accfab81af66cd979bdfff4c39e5a3a8e">&#9670;&nbsp;</a></span>turret_query() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classturret__data.html">turret_data</a> vehicle::turret_query </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvehicle__part.html">vehicle_part</a> &amp;&#160;</td>
          <td class="paramname"><em>pt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get firing data for a turret. </p>

<p class="definition">Definition at line <a class="el" href="turret_8cpp_source.html#l00055">55</a> of file <a class="el" href="turret_8cpp_source.html">turret.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>{</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>    <span class="keywordflow">if</span>( !pt.<a class="code hl_function" href="structvehicle__part.html#adbbad936b92e2d31bc7dfb194de3a1df">is_turret</a>() || pt.<a class="code hl_variable" href="structvehicle__part.html#ab1d4873f1384392595a1e01c463543a5">removed</a> || pt.<a class="code hl_function" href="structvehicle__part.html#aeee4fac34f34d6c9ff557fde6590439d">is_broken</a>() ) {</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>        <span class="keywordflow">return</span> <a class="code hl_class" href="classturret__data.html">turret_data</a>();</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>    }</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="classturret__data.html">turret_data</a>( <span class="keyword">this</span>, &amp;pt );</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>}</div>
<div class="ttc" id="astructvehicle__part_html_adbbad936b92e2d31bc7dfb194de3a1df"><div class="ttname"><a href="structvehicle__part.html#adbbad936b92e2d31bc7dfb194de3a1df">vehicle_part::is_turret</a></div><div class="ttdeci">bool is_turret() const</div><div class="ttdoc">Can this part function as a turret?</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__part_8cpp_source.html#l00509">vehicle_part.cpp:509</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle__part_8cpp_source.html#l00170">vehicle_part::is_broken()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00509">vehicle_part::is_turret()</a>, and <a class="el" href="vehicle_8h_source.html#l00410">vehicle_part::removed</a>.</p>

<p class="reference">Referenced by <a class="el" href="turret_8cpp_source.html#l00542">automatic_fire_turret()</a>, <a class="el" href="turret_8cpp_source.html#l00412">find_all_ready_turrets()</a>, <a class="el" href="turret_8cpp_source.html#l00202">turret_data::in_range()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>, <a class="el" href="ranged_8cpp_source.html#l00464">target_handler::mode_turrets()</a>, <a class="el" href="turret_8cpp_source.html#l00063">turret_query()</a>, <a class="el" href="turret_8cpp_source.html#l00382">turrets_aim()</a>, <a class="el" href="turret_8cpp_source.html#l00365">turrets_aim_and_fire()</a>, <a class="el" href="turret_8cpp_source.html#l00306">turrets_aim_and_fire_single()</a>, and <a class="el" href="ranged_8cpp_source.html#l02902">target_ui::update_turrets_in_range()</a>.</p>

</div>
</div>
<a id="a10a4d598caa3405cac5ed2b77a5360cf" name="a10a4d598caa3405cac5ed2b77a5360cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10a4d598caa3405cac5ed2b77a5360cf">&#9670;&nbsp;</a></span>turrets() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="structvehicle__part.html">vehicle_part</a> * &gt; vehicle::turrets </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get all vehicle turrets (excluding any that are destroyed) </p>

<p class="definition">Definition at line <a class="el" href="turret_8cpp_source.html#l00032">32</a> of file <a class="el" href="turret_8cpp_source.html">turret.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>{</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>    std::vector&lt;vehicle_part *&gt; res;</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span> </div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;e : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>        <span class="keywordflow">if</span>( !e.is_broken() &amp;&amp; e.base.is_gun() ) {</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>            res.push_back( &amp;e );</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>        }</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>    }</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>    <span class="keywordflow">return</span> res;</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="turret_8cpp_source.html#l00412">find_all_ready_turrets()</a>, <a class="el" href="vehicle_8cpp_source.html#l05361">gain_moves()</a>, <a class="el" href="turret_8cpp_source.html#l00044">turrets()</a>, <a class="el" href="turret_8cpp_source.html#l00382">turrets_aim()</a>, <a class="el" href="turret_8cpp_source.html#l00365">turrets_aim_and_fire()</a>, <a class="el" href="turret_8cpp_source.html#l00336">turrets_aim_and_fire_all_manual()</a>, <a class="el" href="turret_8cpp_source.html#l00306">turrets_aim_and_fire_single()</a>, <a class="el" href="turret_8cpp_source.html#l00352">turrets_override_automatic_aim()</a>, <a class="el" href="turret_8cpp_source.html#l00481">turrets_set_mode()</a>, and <a class="el" href="turret_8cpp_source.html#l00425">turrets_set_targeting()</a>.</p>

</div>
</div>
<a id="a8f0fa1b1f866c77dc9c857cb2bfad1d5" name="a8f0fa1b1f866c77dc9c857cb2bfad1d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f0fa1b1f866c77dc9c857cb2bfad1d5">&#9670;&nbsp;</a></span>turrets() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="structvehicle__part.html">vehicle_part</a> * &gt; vehicle::turrets </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get all vehicle turrets loaded and ready to fire at target. </p>

<p class="definition">Definition at line <a class="el" href="turret_8cpp_source.html#l00044">44</a> of file <a class="el" href="turret_8cpp_source.html">turret.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>{</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>    std::vector&lt;vehicle_part *&gt; res = <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a>();</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>    <span class="comment">// exclude turrets not ready to fire or where target is out of range</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>    res.erase( std::remove_if( res.begin(), res.end(), [&amp;]( <span class="keyword">const</span> <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> * e ) {</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>        return turret_query( *e ).query() != turret_data::status::ready ||</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>               rl_dist( global_part_pos3( *e ), target ) &gt; e-&gt;base.gun_range();</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>    } ), res.end() );</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>    <span class="keywordflow">return</span> res;</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="turret_8cpp_source.html#l00032">turrets()</a>.</p>

</div>
</div>
<a id="a39c9cf3772e36cf3587423cbd88ab442" name="a39c9cf3772e36cf3587423cbd88ab442"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39c9cf3772e36cf3587423cbd88ab442">&#9670;&nbsp;</a></span>turrets_aim()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::turrets_aim </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="structvehicle__part.html">vehicle_part</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>turrets</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
Intelligence speeds up aiming of vehicle turrets 
<p class="definition">Definition at line <a class="el" href="turret_8cpp_source.html#l00382">382</a> of file <a class="el" href="turret_8cpp_source.html">turret.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>{</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>    <span class="comment">// Clear existing targets</span></div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>    <span class="keywordflow">for</span>( <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> *t : <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a> ) {</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#accfab81af66cd979bdfff4c39e5a3a8e">turret_query</a>( *t ) ) {</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>            <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Expected a valid vehicle turret&quot;</span> );</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>        }</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>        t-&gt;reset_target( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( *t ) );</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>    }</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span> </div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>    <span class="comment">// Get target</span></div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>    <a class="code hl_typedef" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">target_handler::trajectory</a> <a class="code hl_typedef" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">trajectory</a> = <a class="code hl_function" href="namespacetarget__handler.html#a3371a56d7b45012072236fb97eda5cc0">target_handler::mode_turrets</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u, *<span class="keyword">this</span>, <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a> );</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span> </div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>    <span class="keywordtype">bool</span> got_target = !<a class="code hl_typedef" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">trajectory</a>.empty();</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>    <span class="keywordflow">if</span>( got_target ) {</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>        <a class="code hl_struct" href="structtripoint.html">tripoint</a> target = <a class="code hl_typedef" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">trajectory</a>.back();</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>        <span class="comment">// Set target for any turret in range</span></div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>        <span class="keywordflow">for</span>( <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> *t : <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a> ) {</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#accfab81af66cd979bdfff4c39e5a3a8e">turret_query</a>( *t ).<a class="code hl_function" href="classturret__data.html#ad8b9e08531f26de34c61d5821ca69d7c">in_range</a>( target ) ) {</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>                t-&gt;target.second = target;</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>            }</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>        }</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span><span class="comment"></span> </div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span><span class="comment">        ///\EFFECT_INT speeds up aiming of vehicle turrets</span></div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span><span class="comment"></span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.moves = std::min( 0, <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.moves - 100 + ( 5 * <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.int_cur ) );</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>    }</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>    <span class="keywordflow">return</span> got_target;</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>}</div>
<div class="ttc" id="aclassturret__data_html_ad8b9e08531f26de34c61d5821ca69d7c"><div class="ttname"><a href="classturret__data.html#ad8b9e08531f26de34c61d5821ca69d7c">turret_data::in_range</a></div><div class="ttdeci">bool in_range(const tripoint &amp;target) const</div><div class="ttdoc">Check if target is in range of this turret (considers current ammo) Assumes this turret's status is '...</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00202">turret.cpp:202</a></div></div>
<div class="ttc" id="anamespacetarget__handler_html_a3371a56d7b45012072236fb97eda5cc0"><div class="ttname"><a href="namespacetarget__handler.html#a3371a56d7b45012072236fb97eda5cc0">target_handler::mode_turrets</a></div><div class="ttdeci">trajectory mode_turrets(avatar &amp;you, vehicle &amp;veh, const std::vector&lt; vehicle_part * &gt; &amp;turrets)</div><div class="ttdoc">Selecting target for turrets (when using vehicle controls)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00464">ranged.cpp:464</a></div></div>
<div class="ttc" id="anamespacetarget__handler_html_aea843144f5e69546ddea88eeda177640"><div class="ttname"><a href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">target_handler::trajectory</a></div><div class="ttdeci">std::vector&lt; tripoint &gt; trajectory</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8h_source.html#l00032">ranged.h:32</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="turret_8cpp_source.html#l00202">turret_data::in_range()</a>, <a class="el" href="ranged_8cpp_source.html#l00464">target_handler::mode_turrets()</a>, <a class="el" href="turret_8cpp_source.html#l00055">turret_query()</a>, and <a class="el" href="turret_8cpp_source.html#l00032">turrets()</a>.</p>

<p class="reference">Referenced by <a class="el" href="turret_8cpp_source.html#l00365">turrets_aim_and_fire()</a>, and <a class="el" href="turret_8cpp_source.html#l00352">turrets_override_automatic_aim()</a>.</p>

</div>
</div>
<a id="a00ca4a4d048854071a831f6733161a22" name="a00ca4a4d048854071a831f6733161a22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00ca4a4d048854071a831f6733161a22">&#9670;&nbsp;</a></span>turrets_aim_and_fire()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::turrets_aim_and_fire </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="structvehicle__part.html">vehicle_part</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>turrets</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="turret_8cpp_source.html#l00365">365</a> of file <a class="el" href="turret_8cpp_source.html">turret.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>{</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>    <span class="keywordtype">int</span> shots = 0;</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a39c9cf3772e36cf3587423cbd88ab442">turrets_aim</a>( <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a> ) ) {</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>        <span class="keywordflow">for</span>( <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> *t : <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a> ) {</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>            <span class="keywordtype">bool</span> has_target = t-&gt;target.first != t-&gt;target.second;</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>            <span class="keywordflow">if</span>( has_target ) {</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>                <a class="code hl_class" href="classturret__data.html">turret_data</a> turret = <a class="code hl_function" href="classvehicle.html#accfab81af66cd979bdfff4c39e5a3a8e">turret_query</a>( *t );</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>                <a class="code hl_class" href="classnpc.html">npc</a> cpu = <a class="code hl_function" href="classvehicle.html#afa21321fd8f1d85fbc252aad2c1156da">get_targeting_npc</a>( *t );</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>                shots += turret.<a class="code hl_function" href="classturret__data.html#aaf3b3f3b0e3a8647d4641970223f24c9">fire</a>( cpu, t-&gt;target.second );</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>                t-&gt;reset_target( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( *t ) );</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>            }</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>        }</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>    }</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>    <span class="keywordflow">return</span> shots;</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>}</div>
<div class="ttc" id="aclassvehicle_html_a39c9cf3772e36cf3587423cbd88ab442"><div class="ttname"><a href="classvehicle.html#a39c9cf3772e36cf3587423cbd88ab442">vehicle::turrets_aim</a></div><div class="ttdeci">bool turrets_aim(std::vector&lt; vehicle_part * &gt; &amp;turrets)</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00382">turret.cpp:382</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="turret_8cpp_source.html#l00292">turret_data::fire()</a>, <a class="el" href="turret_8cpp_source.html#l00519">get_targeting_npc()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="turret_8cpp_source.html#l00055">turret_query()</a>, <a class="el" href="turret_8cpp_source.html#l00032">turrets()</a>, and <a class="el" href="turret_8cpp_source.html#l00382">turrets_aim()</a>.</p>

<p class="reference">Referenced by <a class="el" href="turret_8cpp_source.html#l00336">turrets_aim_and_fire_all_manual()</a>, and <a class="el" href="turret_8cpp_source.html#l00306">turrets_aim_and_fire_single()</a>.</p>

</div>
</div>
<a id="aee60cda2d8d84a6f1a912512fa523cba" name="aee60cda2d8d84a6f1a912512fa523cba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee60cda2d8d84a6f1a912512fa523cba">&#9670;&nbsp;</a></span>turrets_aim_and_fire_all_manual()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::turrets_aim_and_fire_all_manual </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>show_msg</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="turret_8cpp_source.html#l00336">336</a> of file <a class="el" href="turret_8cpp_source.html">turret.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>{</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>    std::vector&lt;vehicle_part *&gt; <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a> = <a class="code hl_function" href="classvehicle.html#ac6db05ed4285c46744bff75c3e767009">find_all_ready_turrets</a>( <span class="keyword">true</span>, <span class="keyword">false</span> );</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span> </div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a>.empty() ) {</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>        <span class="keywordflow">if</span>( show_msg ) {</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>,</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>                     <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Can&#39;t aim turrets: all turrets are offline or set to automatic targeting mode.&quot;</span> ) );</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>        }</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>    }</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span> </div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>    <a class="code hl_function" href="classvehicle.html#a00ca4a4d048854071a831f6733161a22">turrets_aim_and_fire</a>( <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a> );</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>}</div>
<div class="ttc" id="aclassvehicle_html_a00ca4a4d048854071a831f6733161a22"><div class="ttname"><a href="classvehicle.html#a00ca4a4d048854071a831f6733161a22">vehicle::turrets_aim_and_fire</a></div><div class="ttdeci">int turrets_aim_and_fire(std::vector&lt; vehicle_part * &gt; &amp;turrets)</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00365">turret.cpp:365</a></div></div>
<div class="ttc" id="aclassvehicle_html_ac6db05ed4285c46744bff75c3e767009"><div class="ttname"><a href="classvehicle.html#ac6db05ed4285c46744bff75c3e767009">vehicle::find_all_ready_turrets</a></div><div class="ttdeci">std::vector&lt; vehicle_part * &gt; find_all_ready_turrets(bool manual, bool automatic)</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00412">turret.cpp:412</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="turret_8cpp_source.html#l00412">find_all_ready_turrets()</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="turret_8cpp_source.html#l00032">turrets()</a>, and <a class="el" href="turret_8cpp_source.html#l00365">turrets_aim_and_fire()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="abb1d7445bb1b9448594d50402103bc7c" name="abb1d7445bb1b9448594d50402103bc7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb1d7445bb1b9448594d50402103bc7c">&#9670;&nbsp;</a></span>turrets_aim_and_fire_single()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::turrets_aim_and_fire_single </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Select a single ready turret, aim it using the aiming UI and fire. </p>

<p class="definition">Definition at line <a class="el" href="turret_8cpp_source.html#l00306">306</a> of file <a class="el" href="turret_8cpp_source.html">turret.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>{</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>    std::vector&lt;std::string&gt; option_names;</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>    std::vector&lt;vehicle_part *&gt; <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>;</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span> </div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>    <span class="comment">// Find all turrets that are ready to fire</span></div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;t : <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a>() ) {</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>        <a class="code hl_class" href="classturret__data.html">turret_data</a> data = <a class="code hl_function" href="classvehicle.html#accfab81af66cd979bdfff4c39e5a3a8e">turret_query</a>( *t );</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>        <span class="keywordflow">if</span>( data.<a class="code hl_function" href="classturret__data.html#a585d18f2c33116bc1e9028210fccadbc">query</a>() == <a class="code hl_enumvalue" href="classturret__data.html#aa11f464b221b987d03a8859293e07ab6ab2fdab230a2c39f3595a947861863cb7">turret_data::status::ready</a> ) {</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>            option_names.push_back( t-&gt;name() );</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>            <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>.push_back( t );</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>        }</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>    }</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span> </div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>    <span class="comment">// Select one</span></div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>.empty() ) {</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;None of the turrets are ready to fire.&quot;</span> ) );</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>    }</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> idx = <a class="code hl_class" href="classuilist.html">uilist</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Aim which turret?&quot;</span> ), option_names );</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>    <span class="keywordflow">if</span>( idx &lt; 0 ) {</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>    }</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>    <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> *turret = <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>[idx];</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span> </div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>    std::vector&lt;vehicle_part *&gt; <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a>;</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>    <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a>.push_back( turret );</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    <a class="code hl_function" href="classvehicle.html#a00ca4a4d048854071a831f6733161a22">turrets_aim_and_fire</a>( <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a> );</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="path__info_8cpp_source.html#l00238">PATH_INFO::options()</a>, <a class="el" href="turret_8cpp_source.html#l00232">turret_data::query()</a>, <a class="el" href="classturret__data.html#aa11f464b221b987d03a8859293e07ab6ab2fdab230a2c39f3595a947861863cb7">turret_data::ready</a>, <a class="el" href="turret_8cpp_source.html#l00055">turret_query()</a>, <a class="el" href="turret_8cpp_source.html#l00032">turrets()</a>, and <a class="el" href="turret_8cpp_source.html#l00365">turrets_aim_and_fire()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="a1de4016879048f712da9fa4ecd286a87" name="a1de4016879048f712da9fa4ecd286a87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1de4016879048f712da9fa4ecd286a87">&#9670;&nbsp;</a></span>turrets_override_automatic_aim()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::turrets_override_automatic_aim </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set target for automatic turrets using the aiming UI. </p>

<p class="definition">Definition at line <a class="el" href="turret_8cpp_source.html#l00352">352</a> of file <a class="el" href="turret_8cpp_source.html">turret.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>{</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>    std::vector&lt;vehicle_part *&gt; <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a> = <a class="code hl_function" href="classvehicle.html#ac6db05ed4285c46744bff75c3e767009">find_all_ready_turrets</a>( <span class="keyword">false</span>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span> </div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a>.empty() ) {</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>,</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Can&#39;t aim turrets: all turrets are offline or set to manual targeting mode.&quot;</span> ) );</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>    }</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span> </div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>    <a class="code hl_function" href="classvehicle.html#a39c9cf3772e36cf3587423cbd88ab442">turrets_aim</a>( <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a> );</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="turret_8cpp_source.html#l00412">find_all_ready_turrets()</a>, <a class="el" href="enums_8h_source.html#l00257">m_warning</a>, <a class="el" href="turret_8cpp_source.html#l00032">turrets()</a>, and <a class="el" href="turret_8cpp_source.html#l00382">turrets_aim()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="a34acaf3108178e27a2530566749a17c2" name="a34acaf3108178e27a2530566749a17c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34acaf3108178e27a2530566749a17c2">&#9670;&nbsp;</a></span>turrets_set_mode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::turrets_set_mode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set firing mode for specific turrets. </p>

<p class="definition">Definition at line <a class="el" href="turret_8cpp_source.html#l00481">481</a> of file <a class="el" href="turret_8cpp_source.html">turret.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>{</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>    std::vector&lt;vehicle_part *&gt; <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a>;</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>    std::vector&lt;tripoint&gt; <a class="code hl_variable" href="namespaceanonymous__namespace_02overmap__location_8cpp_03.html#a1746287579ae93eaa7db10693e28de66">locations</a>;</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span> </div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;p : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>        <span class="keywordflow">if</span>( p.base.is_gun() ) {</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>            <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a>.push_back( &amp;p );</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>            <a class="code hl_variable" href="namespaceanonymous__namespace_02overmap__location_8cpp_03.html#a1746287579ae93eaa7db10693e28de66">locations</a>.push_back( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( p ) );</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>        }</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>    }</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span> </div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>    <a class="code hl_class" href="classpointmenu__cb.html">pointmenu_cb</a> callback( <a class="code hl_variable" href="namespaceanonymous__namespace_02overmap__location_8cpp_03.html#a1746287579ae93eaa7db10693e28de66">locations</a> );</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span> </div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>    <span class="keywordtype">int</span> sel = 0;</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>    <span class="keywordflow">while</span>( <span class="keyword">true</span> ) {</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>        <a class="code hl_class" href="classuilist.html">uilist</a> menu;</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>        menu.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Set turret firing modes&quot;</span> );</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>        menu.<a class="code hl_variable" href="classuilist.html#ad4f5806d1d8ab3de3af8e3285faf47d6">callback</a> = &amp;callback;</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>        menu.<a class="code hl_variable" href="classuilist.html#ab0890d56d6d29dd98a0b3f17bb3ebba3">selected</a> = sel;</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>        menu.<a class="code hl_variable" href="classuilist.html#a9a58fb33d4e496b0496d47486daa056d">fselected</a> = sel;</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>        menu.<a class="code hl_variable" href="classuilist.html#ad9e47c1efe3c9fb954ceaeb5c65791fe">w_y_setup</a> = 2;</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span> </div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;p : <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a> ) {</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>            menu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( -1, <span class="keyword">true</span>, <a class="code hl_variable" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, <span class="stringliteral">&quot;%s [%s]&quot;</span>,</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>                           p-&gt;name(), p-&gt;base.gun_current_mode().tname() );</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>        }</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span> </div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>        menu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>        <span class="keywordflow">if</span>( menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &lt; 0 || <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) &gt;= <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a>.size() ) {</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>        }</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span> </div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>        sel = menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>        <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a>[ sel ]-&gt;base.gun_cycle_mode();</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>    }</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>}</div>
<div class="ttc" id="aclassuilist_html_a9a58fb33d4e496b0496d47486daa056d"><div class="ttname"><a href="classuilist.html#a9a58fb33d4e496b0496d47486daa056d">uilist::fselected</a></div><div class="ttdeci">int fselected</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00388">ui.h:388</a></div></div>
<div class="ttc" id="aclassuilist_html_ab0890d56d6d29dd98a0b3f17bb3ebba3"><div class="ttname"><a href="classuilist.html#ab0890d56d6d29dd98a0b3f17bb3ebba3">uilist::selected</a></div><div class="ttdeci">int selected</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00415">ui.h:415</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="ui_8cpp_source.html#l00932">uilist::addentry()</a>, <a class="el" href="ui_8h_source.html#l00335">uilist::callback</a>, <a class="el" href="ui_8h_source.html#l00388">uilist::fselected</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="namespaceanonymous__namespace_02overmap__location_8cpp_03.html#a1746287579ae93eaa7db10693e28de66">anonymous_namespace{overmap_location.cpp}::locations</a>, <a class="el" href="ui_8h_source.html#l00031">MENU_AUTOASSIGN</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="ui_8cpp_source.html#l00828">uilist::query()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="ui_8h_source.html#l00415">uilist::selected</a>, <a class="el" href="ui_8h_source.html#l00320">uilist::text</a>, <a class="el" href="turret_8cpp_source.html#l00032">turrets()</a>, and <a class="el" href="ui_8h_source.html#l00338">uilist::w_y_setup</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="a25395ffcb67e950d30682050f3147778" name="a25395ffcb67e950d30682050f3147778"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25395ffcb67e950d30682050f3147778">&#9670;&nbsp;</a></span>turrets_set_targeting()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::turrets_set_targeting </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set targeting mode for specific turrets. </p>

<p class="definition">Definition at line <a class="el" href="turret_8cpp_source.html#l00425">425</a> of file <a class="el" href="turret_8cpp_source.html">turret.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>{</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>    std::vector&lt;vehicle_part *&gt; <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a>;</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>    std::vector&lt;tripoint&gt; <a class="code hl_variable" href="namespaceanonymous__namespace_02overmap__location_8cpp_03.html#a1746287579ae93eaa7db10693e28de66">locations</a>;</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span> </div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;p : <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a> ) {</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>        <span class="keywordflow">if</span>( p.is_turret() ) {</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>            <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a>.push_back( &amp;p );</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>            <a class="code hl_variable" href="namespaceanonymous__namespace_02overmap__location_8cpp_03.html#a1746287579ae93eaa7db10693e28de66">locations</a>.push_back( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( p ) );</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>        }</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>    }</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span> </div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>    <a class="code hl_class" href="classpointmenu__cb.html">pointmenu_cb</a> callback( <a class="code hl_variable" href="namespaceanonymous__namespace_02overmap__location_8cpp_03.html#a1746287579ae93eaa7db10693e28de66">locations</a> );</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span> </div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>    <span class="keywordtype">int</span> sel = 0;</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>    <span class="keywordflow">while</span>( <span class="keyword">true</span> ) {</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>        <a class="code hl_class" href="classuilist.html">uilist</a> menu;</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>        menu.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Set turret targeting&quot;</span> );</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>        menu.<a class="code hl_variable" href="classuilist.html#ad4f5806d1d8ab3de3af8e3285faf47d6">callback</a> = &amp;callback;</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>        menu.<a class="code hl_variable" href="classuilist.html#ab0890d56d6d29dd98a0b3f17bb3ebba3">selected</a> = sel;</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>        menu.<a class="code hl_variable" href="classuilist.html#a9a58fb33d4e496b0496d47486daa056d">fselected</a> = sel;</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>        menu.<a class="code hl_variable" href="classuilist.html#ad9e47c1efe3c9fb954ceaeb5c65791fe">w_y_setup</a> = 2;</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span> </div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;p : <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a> ) {</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>            menu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( -1, <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( *p ), <span class="stringliteral">&quot;TURRET_CONTROLS&quot;</span> ), <a class="code hl_variable" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>,</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>                           <span class="stringliteral">&quot;%s [%s]&quot;</span>, p-&gt;name(), p-&gt;enabled ?</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>                           <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;auto -&gt; manual&quot;</span> ) : <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( *p ), <span class="stringliteral">&quot;TURRET_CONTROLS&quot;</span> ) ?</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>                           <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;manual -&gt; auto&quot;</span> ) :</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>                           <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;manual (turret control unit required for auto mode)&quot;</span> ) );</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>        }</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span> </div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>        menu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>        <span class="keywordflow">if</span>( menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &lt; 0 || <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) &gt;= <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a>.size() ) {</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>        }</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span> </div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>        sel = menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <a class="code hl_variable" href="namespaceanonymous__namespace_02overmap__location_8cpp_03.html#a1746287579ae93eaa7db10693e28de66">locations</a>[ sel ], <span class="stringliteral">&quot;TURRET_CONTROLS&quot;</span> ) ) {</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>            <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a>[sel]-&gt;enabled = !<a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a>[sel]-&gt;enabled;</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>            <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a>[sel]-&gt;enabled = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>        }</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span> </div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classvpart__reference.html">vpart_reference</a> &amp;vp : <a class="code hl_function" href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">get_avail_parts</a>( <span class="stringliteral">&quot;TURRET_CONTROLS&quot;</span> ) ) {</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>            <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp;e = vp.part();</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>            <span class="keywordflow">if</span>( e.<a class="code hl_variable" href="structvehicle__part.html#ac6e2dfa7178b8bed91baea3543961a86">mount</a> == <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a>[sel]-&gt;mount ) {</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>                e.<a class="code hl_variable" href="structvehicle__part.html#a27a7cba7268cb7d3550ed2b7c9adc323">enabled</a> = <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a>[sel]-&gt;enabled;</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>            }</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>        }</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span> </div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>        <span class="comment">// clear the turret&#39;s current targets to prevent unwanted auto-firing</span></div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>        <a class="code hl_struct" href="structtripoint.html">tripoint</a> <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> = <a class="code hl_variable" href="namespaceanonymous__namespace_02overmap__location_8cpp_03.html#a1746287579ae93eaa7db10693e28de66">locations</a>[ sel ];</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>        <a class="code hl_function" href="classvehicle.html#a10a4d598caa3405cac5ed2b77a5360cf">turrets</a>[ sel ]-&gt;reset_target( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> );</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>    }</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="ui_8cpp_source.html#l00932">uilist::addentry()</a>, <a class="el" href="ui_8h_source.html#l00335">uilist::callback</a>, <a class="el" href="vehicle_8h_source.html#l00411">vehicle_part::enabled</a>, <a class="el" href="ui_8h_source.html#l00388">uilist::fselected</a>, <a class="el" href="vehicle_8cpp_source.html#l02678">get_avail_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l02558">has_part()</a>, <a class="el" href="namespaceanonymous__namespace_02overmap__location_8cpp_03.html#a1746287579ae93eaa7db10693e28de66">anonymous_namespace{overmap_location.cpp}::locations</a>, <a class="el" href="ui_8h_source.html#l00031">MENU_AUTOASSIGN</a>, <a class="el" href="vehicle_8h_source.html#l00367">vehicle_part::mount</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8h_source.html#l01859">pos</a>, <a class="el" href="ui_8cpp_source.html#l00828">uilist::query()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="ui_8h_source.html#l00415">uilist::selected</a>, <a class="el" href="ui_8h_source.html#l00320">uilist::text</a>, <a class="el" href="turret_8cpp_source.html#l00032">turrets()</a>, and <a class="el" href="ui_8h_source.html#l00338">uilist::w_y_setup</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="a222ab75111163098b53f34a28e017dad" name="a222ab75111163098b53f34a28e017dad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a222ab75111163098b53f34a28e017dad">&#9670;&nbsp;</a></span>unboard_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::unboard_all </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06165">6165</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06166" name="l06166"></a><span class="lineno"> 6166</span>{</div>
<div class="line"><a id="l06167" name="l06167"></a><span class="lineno"> 6167</span>    std::vector&lt;int&gt; bp = <a class="code hl_function" href="classvehicle.html#ab429af6376b555746f92158331f2a4cf">boarded_parts</a>();</div>
<div class="line"><a id="l06168" name="l06168"></a><span class="lineno"> 6168</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;i : bp ) {</div>
<div class="line"><a id="l06169" name="l06169"></a><span class="lineno"> 6169</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.unboard_vehicle( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( i ) );</div>
<div class="line"><a id="l06170" name="l06170"></a><span class="lineno"> 6170</span>    }</div>
<div class="line"><a id="l06171" name="l06171"></a><span class="lineno"> 6171</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l03047">boarded_parts()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, and <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00801">fold_up()</a>.</p>

</div>
</div>
<a id="ab594a5970cdd36a1a4fbc1423de88538" name="ab594a5970cdd36a1a4fbc1423de88538"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab594a5970cdd36a1a4fbc1423de88538">&#9670;&nbsp;</a></span>update_alternator_load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::update_alternator_load </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04594">4594</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04595" name="l04595"></a><span class="lineno"> 4595</span>{</div>
<div class="line"><a id="l04596" name="l04596"></a><span class="lineno"> 4596</span>    <span class="comment">// Update alternator load</span></div>
<div class="line"><a id="l04597" name="l04597"></a><span class="lineno"> 4597</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> ) {</div>
<div class="line"><a id="l04598" name="l04598"></a><span class="lineno"> 4598</span>        <span class="keywordtype">int</span> engine_vpower = 0;</div>
<div class="line"><a id="l04599" name="l04599"></a><span class="lineno"> 4599</span>        <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> e = 0; e &lt; <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.size(); ++e ) {</div>
<div class="line"><a id="l04600" name="l04600"></a><span class="lineno"> 4600</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a4d73f86ddc3aafe3231c33c098b9d6c8">is_engine_on</a>( e ) &amp;&amp; <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e]].info().has_flag( <span class="stringliteral">&quot;E_ALTERNATOR&quot;</span> ) ) {</div>
<div class="line"><a id="l04601" name="l04601"></a><span class="lineno"> 4601</span>                engine_vpower += <a class="code hl_function" href="classvehicle.html#a5246baeafa78272d858f6cce466579e4">part_vpower_w</a>( <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[e] );</div>
<div class="line"><a id="l04602" name="l04602"></a><span class="lineno"> 4602</span>            }</div>
<div class="line"><a id="l04603" name="l04603"></a><span class="lineno"> 4603</span>        }</div>
<div class="line"><a id="l04604" name="l04604"></a><span class="lineno"> 4604</span>        <span class="keywordtype">int</span> alternators_power = 0;</div>
<div class="line"><a id="l04605" name="l04605"></a><span class="lineno"> 4605</span>        <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> p = 0; p &lt; <a class="code hl_variable" href="classvehicle.html#ab4dee440f50b7e9a412faf4dab9796c0">alternators</a>.size(); ++p ) {</div>
<div class="line"><a id="l04606" name="l04606"></a><span class="lineno"> 4606</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#af73c2981a9b17d7e67d37568f7ce0401">is_alternator_on</a>( p ) ) {</div>
<div class="line"><a id="l04607" name="l04607"></a><span class="lineno"> 4607</span>                alternators_power += <a class="code hl_function" href="classvehicle.html#a5246baeafa78272d858f6cce466579e4">part_vpower_w</a>( <a class="code hl_variable" href="classvehicle.html#ab4dee440f50b7e9a412faf4dab9796c0">alternators</a>[p] );</div>
<div class="line"><a id="l04608" name="l04608"></a><span class="lineno"> 4608</span>            }</div>
<div class="line"><a id="l04609" name="l04609"></a><span class="lineno"> 4609</span>        }</div>
<div class="line"><a id="l04610" name="l04610"></a><span class="lineno"> 4610</span>        <a class="code hl_variable" href="classvehicle.html#a6df763082e71eb21a793372711c907fa">alternator_load</a> =</div>
<div class="line"><a id="l04611" name="l04611"></a><span class="lineno"> 4611</span>            engine_vpower</div>
<div class="line"><a id="l04612" name="l04612"></a><span class="lineno"> 4612</span>            ? 1000 * ( std::abs( alternators_power ) + std::abs( <a class="code hl_variable" href="classvehicle.html#afd5333bdd6640697f0202b652621c6e2">extra_drag</a> ) ) / engine_vpower</div>
<div class="line"><a id="l04613" name="l04613"></a><span class="lineno"> 4613</span>            : 0;</div>
<div class="line"><a id="l04614" name="l04614"></a><span class="lineno"> 4614</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04615" name="l04615"></a><span class="lineno"> 4615</span>        <a class="code hl_variable" href="classvehicle.html#a6df763082e71eb21a793372711c907fa">alternator_load</a> = 0;</div>
<div class="line"><a id="l04616" name="l04616"></a><span class="lineno"> 4616</span>    }</div>
<div class="line"><a id="l04617" name="l04617"></a><span class="lineno"> 4617</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01847">alternator_load</a>, <a class="el" href="vehicle_8h_source.html#l01751">alternators</a>, <a class="el" href="vehicle_8h_source.html#l01930">engine_on</a>, <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, <a class="el" href="vehicle_8h_source.html#l01877">extra_drag</a>, <a class="el" href="vehicle_8cpp_source.html#l01097">is_alternator_on()</a>, <a class="el" href="vehicle_8cpp_source.html#l01087">is_engine_on()</a>, <a class="el" href="vehicle_8cpp_source.html#l01149">part_vpower_w()</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04619">power_parts()</a>.</p>

</div>
</div>
<a id="a43595d99bbf7a719529147ce12c0b959" name="a43595d99bbf7a719529147ce12c0b959"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43595d99bbf7a719529147ce12c0b959">&#9670;&nbsp;</a></span>update_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::update_time </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>update_to</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06657">6657</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06658" name="l06658"></a><span class="lineno"> 6658</span>{</div>
<div class="line"><a id="l06659" name="l06659"></a><span class="lineno"> 6659</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__point.html">time_point</a> update_from = <a class="code hl_variable" href="classvehicle.html#a987b54408280dc6a74da8c857907faf2">last_update</a>;</div>
<div class="line"><a id="l06660" name="l06660"></a><span class="lineno"> 6660</span>    <span class="keywordflow">if</span>( update_to &lt; update_from ) {</div>
<div class="line"><a id="l06661" name="l06661"></a><span class="lineno"> 6661</span>        <span class="comment">// Special case going backwards in time - that happens</span></div>
<div class="line"><a id="l06662" name="l06662"></a><span class="lineno"> 6662</span>        <a class="code hl_variable" href="classvehicle.html#a987b54408280dc6a74da8c857907faf2">last_update</a> = update_to;</div>
<div class="line"><a id="l06663" name="l06663"></a><span class="lineno"> 6663</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l06664" name="l06664"></a><span class="lineno"> 6664</span>    }</div>
<div class="line"><a id="l06665" name="l06665"></a><span class="lineno"> 6665</span> </div>
<div class="line"><a id="l06666" name="l06666"></a><span class="lineno"> 6666</span>    <span class="keywordflow">if</span>( update_to &gt;= update_from &amp;&amp; update_to - update_from &lt; 1_minutes ) {</div>
<div class="line"><a id="l06667" name="l06667"></a><span class="lineno"> 6667</span>        <span class="comment">// We don&#39;t need to check every turn</span></div>
<div class="line"><a id="l06668" name="l06668"></a><span class="lineno"> 6668</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l06669" name="l06669"></a><span class="lineno"> 6669</span>    }</div>
<div class="line"><a id="l06670" name="l06670"></a><span class="lineno"> 6670</span>    <a class="code hl_class" href="classtime__duration.html">time_duration</a> elapsed = update_to - <a class="code hl_variable" href="classvehicle.html#a987b54408280dc6a74da8c857907faf2">last_update</a>;</div>
<div class="line"><a id="l06671" name="l06671"></a><span class="lineno"> 6671</span>    <a class="code hl_variable" href="classvehicle.html#a987b54408280dc6a74da8c857907faf2">last_update</a> = update_to;</div>
<div class="line"><a id="l06672" name="l06672"></a><span class="lineno"> 6672</span> </div>
<div class="line"><a id="l06673" name="l06673"></a><span class="lineno"> 6673</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a34630935e46860003c616e0522316f02">sm_pos</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> &lt; 0 ) {</div>
<div class="line"><a id="l06674" name="l06674"></a><span class="lineno"> 6674</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l06675" name="l06675"></a><span class="lineno"> 6675</span>    }</div>
<div class="line"><a id="l06676" name="l06676"></a><span class="lineno"> 6676</span> </div>
<div class="line"><a id="l06677" name="l06677"></a><span class="lineno"> 6677</span>    <span class="comment">// Weather stuff, only for z-levels &gt;= 0</span></div>
<div class="line"><a id="l06678" name="l06678"></a><span class="lineno"> 6678</span>    <span class="comment">// TODO: Have it wash cars from blood?</span></div>
<div class="line"><a id="l06679" name="l06679"></a><span class="lineno"> 6679</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a64509695c74d33dbccf7a6d10e7fcbb0">funnels</a>.empty() &amp;&amp; <a class="code hl_variable" href="classvehicle.html#a59bb3a4e9aa26397203cce91d56ab2ec">solar_panels</a>.empty() &amp;&amp; <a class="code hl_variable" href="classvehicle.html#aa467e8fa404592fb7c704dfa50ac9141">wind_turbines</a>.empty() &amp;&amp; <a class="code hl_variable" href="classvehicle.html#aaebcdca0982ede955b6da03757db4e77">water_wheels</a>.empty() ) {</div>
<div class="line"><a id="l06680" name="l06680"></a><span class="lineno"> 6680</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l06681" name="l06681"></a><span class="lineno"> 6681</span>    }</div>
<div class="line"><a id="l06682" name="l06682"></a><span class="lineno"> 6682</span>    <span class="comment">// Get one weather data set per vehicle, they don&#39;t differ much across vehicle area</span></div>
<div class="line"><a id="l06683" name="l06683"></a><span class="lineno"> 6683</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structweather__sum.html">weather_sum</a> accum_weather = <a class="code hl_function" href="group__Weather.html#gacc90b85ac1849784280f581a1fb7ade8">sum_conditions</a>( update_from, update_to,</div>
<div class="line"><a id="l06684" name="l06684"></a><span class="lineno"> 6684</span>                                      <a class="code hl_function" href="classvehicle.html#a789289c4179f7677e45cb100ff5ffb9a">global_square_location</a>().raw() );</div>
<div class="line"><a id="l06685" name="l06685"></a><span class="lineno"> 6685</span>    <span class="comment">// make some reference objects to use to check for reload</span></div>
<div class="line"><a id="l06686" name="l06686"></a><span class="lineno"> 6686</span>    <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> water( <span class="stringliteral">&quot;water&quot;</span> );</div>
<div class="line"><a id="l06687" name="l06687"></a><span class="lineno"> 6687</span>    <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> water_clean( <span class="stringliteral">&quot;water_clean&quot;</span> );</div>
<div class="line"><a id="l06688" name="l06688"></a><span class="lineno"> 6688</span> </div>
<div class="line"><a id="l06689" name="l06689"></a><span class="lineno"> 6689</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> idx : <a class="code hl_variable" href="classvehicle.html#a64509695c74d33dbccf7a6d10e7fcbb0">funnels</a> ) {</div>
<div class="line"><a id="l06690" name="l06690"></a><span class="lineno"> 6690</span>        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;pt = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[idx];</div>
<div class="line"><a id="l06691" name="l06691"></a><span class="lineno"> 6691</span> </div>
<div class="line"><a id="l06692" name="l06692"></a><span class="lineno"> 6692</span>        <span class="comment">// we need an unbroken funnel mounted on the exterior of the vehicle</span></div>
<div class="line"><a id="l06693" name="l06693"></a><span class="lineno"> 6693</span>        <span class="keywordflow">if</span>( pt.is_unavailable() || !<a class="code hl_function" href="vehicle_8cpp.html#ab1508062d0dc9f36f50d9cd52b8ca2f8">is_sm_tile_outside</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.getabs( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( pt ) ) ) ) {</div>
<div class="line"><a id="l06694" name="l06694"></a><span class="lineno"> 6694</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l06695" name="l06695"></a><span class="lineno"> 6695</span>        }</div>
<div class="line"><a id="l06696" name="l06696"></a><span class="lineno"> 6696</span> </div>
<div class="line"><a id="l06697" name="l06697"></a><span class="lineno"> 6697</span>        <span class="comment">// we need an empty tank (or one already containing water) below the funnel</span></div>
<div class="line"><a id="l06698" name="l06698"></a><span class="lineno"> 6698</span>        <span class="keyword">auto</span> tank = std::find_if( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.begin(), <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.end(), [&amp;]( <span class="keyword">const</span> <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> &amp; e ) {</div>
<div class="line"><a id="l06699" name="l06699"></a><span class="lineno"> 6699</span>            return pt.mount == e.mount &amp;&amp; e.is_tank() &amp;&amp;</div>
<div class="line"><a id="l06700" name="l06700"></a><span class="lineno"> 6700</span>                   ( e.can_reload( water ) || e.can_reload( water_clean ) );</div>
<div class="line"><a id="l06701" name="l06701"></a><span class="lineno"> 6701</span>        } );</div>
<div class="line"><a id="l06702" name="l06702"></a><span class="lineno"> 6702</span> </div>
<div class="line"><a id="l06703" name="l06703"></a><span class="lineno"> 6703</span>        <span class="keywordflow">if</span>( tank == <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.end() ) {</div>
<div class="line"><a id="l06704" name="l06704"></a><span class="lineno"> 6704</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l06705" name="l06705"></a><span class="lineno"> 6705</span>        }</div>
<div class="line"><a id="l06706" name="l06706"></a><span class="lineno"> 6706</span> </div>
<div class="line"><a id="l06707" name="l06707"></a><span class="lineno"> 6707</span>        <span class="keywordtype">double</span> area = std::pow( pt.info().size / <a class="code hl_variable" href="namespaceunits.html#a58e7d31fbaa28a1dd45fb598f8d1fba9">units::legacy_volume_factor</a>, 2 ) * <a class="code hl_define" href="math__defines_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>;</div>
<div class="line"><a id="l06708" name="l06708"></a><span class="lineno"> 6708</span>        <span class="keywordtype">int</span> qty = <a class="code hl_function" href="rng_8cpp.html#acd19ae79e3590a99c9eaf0389318b686">roll_remainder</a>( <a class="code hl_function" href="group__Weather.html#ga5e6b69c07a1700d9cbbb5e666762b72c">funnel_charges_per_turn</a>( area, accum_weather.<a class="code hl_variable" href="structweather__sum.html#a5f99b2c6f5871e572b5ee517e2e562bd">rain_amount</a> ) );</div>
<div class="line"><a id="l06709" name="l06709"></a><span class="lineno"> 6709</span>        <span class="keywordtype">int</span> c_qty = qty + ( tank-&gt;can_reload( water_clean ) ?  tank-&gt;ammo_remaining() : 0 );</div>
<div class="line"><a id="l06710" name="l06710"></a><span class="lineno"> 6710</span>        <span class="keywordtype">int</span> cost_to_purify = c_qty * <a class="code hl_variable" href="vehicle_8cpp.html#a23c8190c3fbddc3ba5596ce2b31d8ce6">itype_water_purifier</a>-&gt;<a class="code hl_function" href="structitype.html#a953828c9c01185fef0f619ecdcd7f3b1">charges_to_use</a>();</div>
<div class="line"><a id="l06711" name="l06711"></a><span class="lineno"> 6711</span> </div>
<div class="line"><a id="l06712" name="l06712"></a><span class="lineno"> 6712</span>        <span class="keywordflow">if</span>( qty &gt; 0 ) {</div>
<div class="line"><a id="l06713" name="l06713"></a><span class="lineno"> 6713</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( pt ), <span class="stringliteral">&quot;WATER_PURIFIER&quot;</span>, <span class="keyword">true</span> ) &amp;&amp;</div>
<div class="line"><a id="l06714" name="l06714"></a><span class="lineno"> 6714</span>                ( <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="vehicle_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a>, <span class="keyword">true</span> ) &gt; cost_to_purify ) ) {</div>
<div class="line"><a id="l06715" name="l06715"></a><span class="lineno"> 6715</span>                tank-&gt;ammo_set( <a class="code hl_variable" href="vehicle_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a>, c_qty );</div>
<div class="line"><a id="l06716" name="l06716"></a><span class="lineno"> 6716</span>                <a class="code hl_function" href="classvehicle.html#acb03f8288804b551378478137e9cea11">discharge_battery</a>( cost_to_purify );</div>
<div class="line"><a id="l06717" name="l06717"></a><span class="lineno"> 6717</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l06718" name="l06718"></a><span class="lineno"> 6718</span>                tank-&gt;ammo_set( <a class="code hl_variable" href="vehicle_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>, tank-&gt;ammo_remaining() + qty );</div>
<div class="line"><a id="l06719" name="l06719"></a><span class="lineno"> 6719</span>            }</div>
<div class="line"><a id="l06720" name="l06720"></a><span class="lineno"> 6720</span>            <a class="code hl_function" href="classvehicle.html#a8e8079a6591b3104191c881509f16d61">invalidate_mass</a>();</div>
<div class="line"><a id="l06721" name="l06721"></a><span class="lineno"> 6721</span>        }</div>
<div class="line"><a id="l06722" name="l06722"></a><span class="lineno"> 6722</span>    }</div>
<div class="line"><a id="l06723" name="l06723"></a><span class="lineno"> 6723</span> </div>
<div class="line"><a id="l06724" name="l06724"></a><span class="lineno"> 6724</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#a59bb3a4e9aa26397203cce91d56ab2ec">solar_panels</a>.empty() ) {</div>
<div class="line"><a id="l06725" name="l06725"></a><span class="lineno"> 6725</span>        <span class="keywordtype">int</span> epower_w = 0;</div>
<div class="line"><a id="l06726" name="l06726"></a><span class="lineno"> 6726</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> : <a class="code hl_variable" href="classvehicle.html#a59bb3a4e9aa26397203cce91d56ab2ec">solar_panels</a> ) {</div>
<div class="line"><a id="l06727" name="l06727"></a><span class="lineno"> 6727</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ].is_unavailable() ) {</div>
<div class="line"><a id="l06728" name="l06728"></a><span class="lineno"> 6728</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l06729" name="l06729"></a><span class="lineno"> 6729</span>            }</div>
<div class="line"><a id="l06730" name="l06730"></a><span class="lineno"> 6730</span> </div>
<div class="line"><a id="l06731" name="l06731"></a><span class="lineno"> 6731</span>            <span class="keywordflow">if</span>( !<a class="code hl_function" href="vehicle_8cpp.html#ab1508062d0dc9f36f50d9cd52b8ca2f8">is_sm_tile_outside</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.getabs( <a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> ) ) ) ) {</div>
<div class="line"><a id="l06732" name="l06732"></a><span class="lineno"> 6732</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l06733" name="l06733"></a><span class="lineno"> 6733</span>            }</div>
<div class="line"><a id="l06734" name="l06734"></a><span class="lineno"> 6734</span> </div>
<div class="line"><a id="l06735" name="l06735"></a><span class="lineno"> 6735</span>            epower_w += <a class="code hl_function" href="classvehicle.html#a27cec1366be7bf296d9c483a40833120">part_epower_w</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a> );</div>
<div class="line"><a id="l06736" name="l06736"></a><span class="lineno"> 6736</span>        }</div>
<div class="line"><a id="l06737" name="l06737"></a><span class="lineno"> 6737</span>        <span class="keywordtype">double</span> <a class="code hl_enumvalue" href="namespacefields.html#af8bc739ca8fbe535a44afc02da973280a04bb0ec2d0e931c59f606510558e55a1">intensity</a> = accum_weather.<a class="code hl_variable" href="structweather__sum.html#a9b7b7f347b7e60c776708e9eb9d56f97">sunlight</a> / <a class="code hl_function" href="calendar_8cpp.html#aaf7cb0e1d64b92af65e14538a7e97674">default_daylight_level</a>() / to_turns&lt;double&gt;( elapsed );</div>
<div class="line"><a id="l06738" name="l06738"></a><span class="lineno"> 6738</span>        <span class="keywordtype">int</span> energy_bat = <a class="code hl_function" href="classvehicle.html#a88de59eafc9488490ebdd42cff0e604f">power_to_energy_bat</a>( epower_w * intensity, elapsed );</div>
<div class="line"><a id="l06739" name="l06739"></a><span class="lineno"> 6739</span>        <span class="keywordflow">if</span>( energy_bat &gt; 0 ) {</div>
<div class="line"><a id="l06740" name="l06740"></a><span class="lineno"> 6740</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;%s got %d kJ energy from solar panels&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, energy_bat );</div>
<div class="line"><a id="l06741" name="l06741"></a><span class="lineno"> 6741</span>            <a class="code hl_function" href="classvehicle.html#a46d22a6712ad986ed60917c367be83eb">charge_battery</a>( energy_bat );</div>
<div class="line"><a id="l06742" name="l06742"></a><span class="lineno"> 6742</span>        }</div>
<div class="line"><a id="l06743" name="l06743"></a><span class="lineno"> 6743</span>    }</div>
<div class="line"><a id="l06744" name="l06744"></a><span class="lineno"> 6744</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#aa467e8fa404592fb7c704dfa50ac9141">wind_turbines</a>.empty() ) {</div>
<div class="line"><a id="l06745" name="l06745"></a><span class="lineno"> 6745</span>        <span class="comment">// TODO: use accum_weather wind data to backfill wind turbine</span></div>
<div class="line"><a id="l06746" name="l06746"></a><span class="lineno"> 6746</span>        <span class="comment">// generation capacity.</span></div>
<div class="line"><a id="l06747" name="l06747"></a><span class="lineno"> 6747</span>        <span class="keywordtype">int</span> epower_w = <a class="code hl_function" href="classvehicle.html#ad83675cd116674b36d3dd8e094b7a28b">total_wind_epower_w</a>();</div>
<div class="line"><a id="l06748" name="l06748"></a><span class="lineno"> 6748</span>        <span class="keywordtype">int</span> energy_bat = <a class="code hl_function" href="classvehicle.html#a88de59eafc9488490ebdd42cff0e604f">power_to_energy_bat</a>( epower_w, elapsed );</div>
<div class="line"><a id="l06749" name="l06749"></a><span class="lineno"> 6749</span>        <span class="keywordflow">if</span>( energy_bat &gt; 0 ) {</div>
<div class="line"><a id="l06750" name="l06750"></a><span class="lineno"> 6750</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;%s got %d kJ energy from wind turbines&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, energy_bat );</div>
<div class="line"><a id="l06751" name="l06751"></a><span class="lineno"> 6751</span>            <a class="code hl_function" href="classvehicle.html#a46d22a6712ad986ed60917c367be83eb">charge_battery</a>( energy_bat );</div>
<div class="line"><a id="l06752" name="l06752"></a><span class="lineno"> 6752</span>        }</div>
<div class="line"><a id="l06753" name="l06753"></a><span class="lineno"> 6753</span>    }</div>
<div class="line"><a id="l06754" name="l06754"></a><span class="lineno"> 6754</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#aaebcdca0982ede955b6da03757db4e77">water_wheels</a>.empty() ) {</div>
<div class="line"><a id="l06755" name="l06755"></a><span class="lineno"> 6755</span>        <span class="keywordtype">int</span> epower_w = <a class="code hl_function" href="classvehicle.html#a7d7bd918d812d83f1fe3705f45b8615f">total_water_wheel_epower_w</a>();</div>
<div class="line"><a id="l06756" name="l06756"></a><span class="lineno"> 6756</span>        <span class="keywordtype">int</span> energy_bat = <a class="code hl_function" href="classvehicle.html#a88de59eafc9488490ebdd42cff0e604f">power_to_energy_bat</a>( epower_w, elapsed );</div>
<div class="line"><a id="l06757" name="l06757"></a><span class="lineno"> 6757</span>        <span class="keywordflow">if</span>( energy_bat &gt; 0 ) {</div>
<div class="line"><a id="l06758" name="l06758"></a><span class="lineno"> 6758</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;%s got %d kJ energy from water wheels&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, energy_bat );</div>
<div class="line"><a id="l06759" name="l06759"></a><span class="lineno"> 6759</span>            <a class="code hl_function" href="classvehicle.html#a46d22a6712ad986ed60917c367be83eb">charge_battery</a>( energy_bat );</div>
<div class="line"><a id="l06760" name="l06760"></a><span class="lineno"> 6760</span>        }</div>
<div class="line"><a id="l06761" name="l06761"></a><span class="lineno"> 6761</span>    }</div>
<div class="line"><a id="l06762" name="l06762"></a><span class="lineno"> 6762</span>}</div>
<div class="ttc" id="aclasstime__point_html"><div class="ttname"><a href="classtime__point.html">time_point</a></div><div class="ttdoc">A point in the game time.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00430">calendar.h:431</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga5e6b69c07a1700d9cbbb5e666762b72c"><div class="ttname"><a href="group__Weather.html#ga5e6b69c07a1700d9cbbb5e666762b72c">funnel_charges_per_turn</a></div><div class="ttdeci">double funnel_charges_per_turn(const double surface_area_mm2, const double rain_depth_mm_per_hour)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00267">weather.cpp:267</a></div></div>
<div class="ttc" id="agroup__Weather_html_gacc90b85ac1849784280f581a1fb7ade8"><div class="ttname"><a href="group__Weather.html#gacc90b85ac1849784280f581a1fb7ade8">sum_conditions</a></div><div class="ttdeci">weather_sum sum_conditions(const time_point &amp;start, const time_point &amp;end, const tripoint &amp;location)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00153">weather.cpp:153</a></div></div>
<div class="ttc" id="astructweather__sum_html"><div class="ttname"><a href="structweather__sum.html">weather_sum</a></div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00086">weather.h:86</a></div></div>
<div class="ttc" id="astructweather__sum_html_a5f99b2c6f5871e572b5ee517e2e562bd"><div class="ttname"><a href="structweather__sum.html#a5f99b2c6f5871e572b5ee517e2e562bd">weather_sum::rain_amount</a></div><div class="ttdeci">int rain_amount</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00087">weather.h:87</a></div></div>
<div class="ttc" id="astructweather__sum_html_a9b7b7f347b7e60c776708e9eb9d56f97"><div class="ttname"><a href="structweather__sum.html#a9b7b7f347b7e60c776708e9eb9d56f97">weather_sum::sunlight</a></div><div class="ttdeci">float sunlight</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00089">weather.h:89</a></div></div>
<div class="ttc" id="avehicle_8cpp_html_a04c0f30be5943072fbaecacc8a0cf848"><div class="ttname"><a href="vehicle_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a></div><div class="ttdeci">static const itype_id itype_water_clean(&quot;water_clean&quot;)</div></div>
<div class="ttc" id="avehicle_8cpp_html_a23c8190c3fbddc3ba5596ce2b31d8ce6"><div class="ttname"><a href="vehicle_8cpp.html#a23c8190c3fbddc3ba5596ce2b31d8ce6">itype_water_purifier</a></div><div class="ttdeci">static const itype_id itype_water_purifier(&quot;water_purifier&quot;)</div></div>
<div class="ttc" id="avehicle_8cpp_html_abfd8b1d23930a50d7f122f0d39538649"><div class="ttname"><a href="vehicle_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a></div><div class="ttdeci">static const itype_id itype_water(&quot;water&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="vehicle_8cpp_source.html#l04926">charge_battery()</a>, <a class="el" href="itype_8h_source.html#l01089">itype::charges_to_use()</a>, <a class="el" href="calendar_8cpp_source.html#l00062">default_daylight_level()</a>, <a class="el" href="vehicle_8cpp_source.html#l04973">discharge_battery()</a>, <a class="el" href="vehicle_8cpp_source.html#l03179">fuel_left()</a>, <a class="el" href="weather_8cpp_source.html#l00267">funnel_charges_per_turn()</a>, <a class="el" href="vehicle_8h_source.html#l01758">funnels</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l03091">global_square_location()</a>, <a class="el" href="vehicle_8cpp_source.html#l02558">has_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l06778">invalidate_mass()</a>, <a class="el" href="vehicle_8cpp_source.html#l06637">is_sm_tile_outside()</a>, <a class="el" href="vehicle_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a>, <a class="el" href="vehicle_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>, <a class="el" href="vehicle_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a>, <a class="el" href="vehicle_8cpp.html#a23c8190c3fbddc3ba5596ce2b31d8ce6">itype_water_purifier</a>, <a class="el" href="vehicle_8h_source.html#l01851">last_update</a>, <a class="el" href="units__volume_8h_source.html#l00050">units::legacy_volume_factor</a>, <a class="el" href="enums_8h_source.html#l00264">m_debug</a>, <a class="el" href="math__defines_8h_source.html#l00021">M_PI</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8cpp_source.html#l01208">part_epower_w()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8cpp_source.html#l01217">power_to_energy_bat()</a>, <a class="el" href="weather_8h_source.html#l00087">weather_sum::rain_amount</a>, <a class="el" href="rng_8cpp_source.html#l00096">roll_remainder()</a>, <a class="el" href="vehicle_8h_source.html#l01844">sm_pos</a>, <a class="el" href="vehicle_8h_source.html#l01754">solar_panels</a>, <a class="el" href="weather_8cpp_source.html#l00153">sum_conditions()</a>, <a class="el" href="weather_8h_source.html#l00089">weather_sum::sunlight</a>, <a class="el" href="vehicle_8cpp_source.html#l04561">total_water_wheel_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04536">total_wind_epower_w()</a>, <a class="el" href="vehicle_8h_source.html#l01756">water_wheels</a>, <a class="el" href="vehicle_8h_source.html#l01755">wind_turbines</a>, and <a class="el" href="point_8h_source.html#l00152">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05033">idle()</a>.</p>

</div>
</div>
<a id="a370afbdd3c703760b7f2c9f04d1a05ce" name="a370afbdd3c703760b7f2c9f04d1a05ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a370afbdd3c703760b7f2c9f04d1a05ce">&#9670;&nbsp;</a></span>use_autoclave()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::use_autoclave </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01556">1556</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01557" name="l01557"></a><span class="lineno"> 1557</span>{</div>
<div class="line"><a id="l01558" name="l01558"></a><span class="lineno"> 1558</span>    <span class="keyword">auto</span> items = <a class="code hl_function" href="classvehicle.html#a983dd9db3cd64078b176a82289e0b260">get_items</a>( p );</div>
<div class="line"><a id="l01559" name="l01559"></a><span class="lineno"> 1559</span>    <span class="keyword">static</span> <span class="keyword">const</span> std::string filthy( <span class="stringliteral">&quot;FILTHY&quot;</span> );</div>
<div class="line"><a id="l01560" name="l01560"></a><span class="lineno"> 1560</span>    <span class="keyword">static</span> <span class="keyword">const</span> std::string no_packed( <span class="stringliteral">&quot;NO_PACKED&quot;</span> );</div>
<div class="line"><a id="l01561" name="l01561"></a><span class="lineno"> 1561</span>    <span class="keywordtype">bool</span> filthy_items = std::any_of( items.begin(), items.end(), []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; i ) {</div>
<div class="line"><a id="l01562" name="l01562"></a><span class="lineno"> 1562</span>        return i.has_flag( filthy );</div>
<div class="line"><a id="l01563" name="l01563"></a><span class="lineno"> 1563</span>    } );</div>
<div class="line"><a id="l01564" name="l01564"></a><span class="lineno"> 1564</span> </div>
<div class="line"><a id="l01565" name="l01565"></a><span class="lineno"> 1565</span>    <span class="keywordtype">bool</span> unpacked_items = std::any_of( items.begin(), items.end(), []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; i ) {</div>
<div class="line"><a id="l01566" name="l01566"></a><span class="lineno"> 1566</span>        return i.has_flag( no_packed );</div>
<div class="line"><a id="l01567" name="l01567"></a><span class="lineno"> 1567</span>    } );</div>
<div class="line"><a id="l01568" name="l01568"></a><span class="lineno"> 1568</span> </div>
<div class="line"><a id="l01569" name="l01569"></a><span class="lineno"> 1569</span>    <span class="keywordtype">bool</span> cbms = std::all_of( items.begin(), items.end(), []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; i ) {</div>
<div class="line"><a id="l01570" name="l01570"></a><span class="lineno"> 1570</span>        return i.is_bionic();</div>
<div class="line"><a id="l01571" name="l01571"></a><span class="lineno"> 1571</span>    } );</div>
<div class="line"><a id="l01572" name="l01572"></a><span class="lineno"> 1572</span> </div>
<div class="line"><a id="l01573" name="l01573"></a><span class="lineno"> 1573</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].<a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a> ) {</div>
<div class="line"><a id="l01574" name="l01574"></a><span class="lineno"> 1574</span>        <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].enabled = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01575" name="l01575"></a><span class="lineno"> 1575</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a id="l01576" name="l01576"></a><span class="lineno"> 1576</span>                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You turn the autoclave off before it&#39;s finished the program, and open its door.&quot;</span> ) );</div>
<div class="line"><a id="l01577" name="l01577"></a><span class="lineno"> 1577</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( items.empty() ) {</div>
<div class="line"><a id="l01578" name="l01578"></a><span class="lineno"> 1578</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The autoclave is empty, there&#39;s no point in starting it.&quot;</span> ) );</div>
<div class="line"><a id="l01579" name="l01579"></a><span class="lineno"> 1579</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a> ) &lt; 8 &amp;&amp; <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a> ) &lt; 8 ) {</div>
<div class="line"><a id="l01580" name="l01580"></a><span class="lineno"> 1580</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You need 8 charges of water in tanks of the %s for the autoclave to run.&quot;</span> ),</div>
<div class="line"><a id="l01581" name="l01581"></a><span class="lineno"> 1581</span>                 <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l01582" name="l01582"></a><span class="lineno"> 1582</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( filthy_items ) {</div>
<div class="line"><a id="l01583" name="l01583"></a><span class="lineno"> 1583</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a id="l01584" name="l01584"></a><span class="lineno"> 1584</span>                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You need to remove all filthy items from the autoclave to start the sterilizing cycle.&quot;</span> ) );</div>
<div class="line"><a id="l01585" name="l01585"></a><span class="lineno"> 1585</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !cbms ) {</div>
<div class="line"><a id="l01586" name="l01586"></a><span class="lineno"> 1586</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Only CBMs can be sterilized in an autoclave.&quot;</span> ) );</div>
<div class="line"><a id="l01587" name="l01587"></a><span class="lineno"> 1587</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( unpacked_items ) {</div>
<div class="line"><a id="l01588" name="l01588"></a><span class="lineno"> 1588</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You should put your CBMs in autoclave pouches to keep them sterile.&quot;</span> ) );</div>
<div class="line"><a id="l01589" name="l01589"></a><span class="lineno"> 1589</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01590" name="l01590"></a><span class="lineno"> 1590</span>        <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].enabled = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01591" name="l01591"></a><span class="lineno"> 1591</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;n : items ) {</div>
<div class="line"><a id="l01592" name="l01592"></a><span class="lineno"> 1592</span>            n.set_age( 0_turns );</div>
<div class="line"><a id="l01593" name="l01593"></a><span class="lineno"> 1593</span>        }</div>
<div class="line"><a id="l01594" name="l01594"></a><span class="lineno"> 1594</span> </div>
<div class="line"><a id="l01595" name="l01595"></a><span class="lineno"> 1595</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a> ) &gt;= 8 ) {</div>
<div class="line"><a id="l01596" name="l01596"></a><span class="lineno"> 1596</span>            <a class="code hl_function" href="classvehicle.html#a2b28d63a4879b75d5a186289c54f6330">drain</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>, 8 );</div>
<div class="line"><a id="l01597" name="l01597"></a><span class="lineno"> 1597</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01598" name="l01598"></a><span class="lineno"> 1598</span>            <a class="code hl_function" href="classvehicle.html#a2b28d63a4879b75d5a186289c54f6330">drain</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a>, 8 );</div>
<div class="line"><a id="l01599" name="l01599"></a><span class="lineno"> 1599</span>        }</div>
<div class="line"><a id="l01600" name="l01600"></a><span class="lineno"> 1600</span> </div>
<div class="line"><a id="l01601" name="l01601"></a><span class="lineno"> 1601</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span>                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You turn the autoclave on and it starts its cycle.&quot;</span> ) );</div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span>    }</div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="vehicle_8cpp_source.html#l03246">drain()</a>, <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a>, <a class="el" href="vehicle_8cpp_source.html#l03179">fuel_left()</a>, <a class="el" href="vehicle_8cpp_source.html#l05288">get_items()</a>, <a class="el" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>, <a class="el" href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00253">m_good</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>.</p>

</div>
</div>
<a id="a418ad39b520d156f334cb08132fe472e" name="a418ad39b520d156f334cb08132fe472e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a418ad39b520d156f334cb08132fe472e">&#9670;&nbsp;</a></span>use_bike_rack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::use_bike_rack </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01823">1823</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01824" name="l01824"></a><span class="lineno"> 1824</span>{</div>
<div class="line"><a id="l01825" name="l01825"></a><span class="lineno"> 1825</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].is_unavailable() || <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].removed ) {</div>
<div class="line"><a id="l01826" name="l01826"></a><span class="lineno"> 1826</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01827" name="l01827"></a><span class="lineno"> 1827</span>    }</div>
<div class="line"><a id="l01828" name="l01828"></a><span class="lineno"> 1828</span>    std::vector&lt;std::vector &lt;int&gt;&gt; racks_parts = <a class="code hl_function" href="classvehicle.html#af0f69e5e031ee2c64b5e4ea5b874b584">find_lines_of_parts</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, <span class="stringliteral">&quot;BIKE_RACK_VEH&quot;</span> );</div>
<div class="line"><a id="l01829" name="l01829"></a><span class="lineno"> 1829</span>    <span class="keywordflow">if</span>( racks_parts.empty() ) {</div>
<div class="line"><a id="l01830" name="l01830"></a><span class="lineno"> 1830</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01831" name="l01831"></a><span class="lineno"> 1831</span>    }</div>
<div class="line"><a id="l01832" name="l01832"></a><span class="lineno"> 1832</span> </div>
<div class="line"><a id="l01833" name="l01833"></a><span class="lineno"> 1833</span>    <span class="comment">// check if we&#39;re storing a vehicle on this rack</span></div>
<div class="line"><a id="l01834" name="l01834"></a><span class="lineno"> 1834</span>    std::vector&lt;std::vector&lt;int&gt;&gt; carried_vehicles;</div>
<div class="line"><a id="l01835" name="l01835"></a><span class="lineno"> 1835</span>    std::vector&lt;std::vector&lt;int&gt;&gt; carrying_racks;</div>
<div class="line"><a id="l01836" name="l01836"></a><span class="lineno"> 1836</span>    <span class="keywordtype">bool</span> found_vehicle = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01837" name="l01837"></a><span class="lineno"> 1837</span>    <span class="keywordtype">bool</span> full_rack = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01838" name="l01838"></a><span class="lineno"> 1838</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::vector&lt;int&gt; &amp;rack_parts : racks_parts ) {</div>
<div class="line"><a id="l01839" name="l01839"></a><span class="lineno"> 1839</span>        std::vector&lt;int&gt; carried_parts;</div>
<div class="line"><a id="l01840" name="l01840"></a><span class="lineno"> 1840</span>        std::vector&lt;int&gt; carry_rack;</div>
<div class="line"><a id="l01841" name="l01841"></a><span class="lineno"> 1841</span>        <span class="keywordtype">size_t</span> carry_size = 0;</div>
<div class="line"><a id="l01842" name="l01842"></a><span class="lineno"> 1842</span>        std::string cur_vehicle;</div>
<div class="line"><a id="l01843" name="l01843"></a><span class="lineno"> 1843</span> </div>
<div class="line"><a id="l01844" name="l01844"></a><span class="lineno"> 1844</span>        <span class="keyword">const</span> <span class="keyword">auto</span> add_vehicle = []( std::vector&lt;int&gt; &amp;carried_parts,</div>
<div class="line"><a id="l01845" name="l01845"></a><span class="lineno"> 1845</span>                                     std::vector&lt;std::vector&lt;int&gt;&gt; &amp;carried_vehicles,</div>
<div class="line"><a id="l01846" name="l01846"></a><span class="lineno"> 1846</span>                                     std::vector&lt;int&gt; &amp;carry_rack,</div>
<div class="line"><a id="l01847" name="l01847"></a><span class="lineno"> 1847</span>        std::vector&lt;std::vector&lt;int&gt;&gt; &amp;carrying_racks ) {</div>
<div class="line"><a id="l01848" name="l01848"></a><span class="lineno"> 1848</span>            <span class="keywordflow">if</span>( !carry_rack.empty() ) {</div>
<div class="line"><a id="l01849" name="l01849"></a><span class="lineno"> 1849</span>                carrying_racks.emplace_back( carry_rack );</div>
<div class="line"><a id="l01850" name="l01850"></a><span class="lineno"> 1850</span>                carried_vehicles.emplace_back( carried_parts );</div>
<div class="line"><a id="l01851" name="l01851"></a><span class="lineno"> 1851</span>                carry_rack.clear();</div>
<div class="line"><a id="l01852" name="l01852"></a><span class="lineno"> 1852</span>                carried_parts.clear();</div>
<div class="line"><a id="l01853" name="l01853"></a><span class="lineno"> 1853</span>            }</div>
<div class="line"><a id="l01854" name="l01854"></a><span class="lineno"> 1854</span>        };</div>
<div class="line"><a id="l01855" name="l01855"></a><span class="lineno"> 1855</span> </div>
<div class="line"><a id="l01856" name="l01856"></a><span class="lineno"> 1856</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keywordtype">int</span> &amp;rack_part : rack_parts ) {</div>
<div class="line"><a id="l01857" name="l01857"></a><span class="lineno"> 1857</span>            <span class="comment">// skip parts that aren&#39;t carrying anything</span></div>
<div class="line"><a id="l01858" name="l01858"></a><span class="lineno"> 1858</span>            <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ rack_part ].has_flag( <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaa9d1a55e312464c51ecce1f0e187c4287">vehicle_part::carrying_flag</a> ) ) {</div>
<div class="line"><a id="l01859" name="l01859"></a><span class="lineno"> 1859</span>                add_vehicle( carried_parts, carried_vehicles, carry_rack, carrying_racks );</div>
<div class="line"><a id="l01860" name="l01860"></a><span class="lineno"> 1860</span>                cur_vehicle.clear();</div>
<div class="line"><a id="l01861" name="l01861"></a><span class="lineno"> 1861</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01862" name="l01862"></a><span class="lineno"> 1862</span>            }</div>
<div class="line"><a id="l01863" name="l01863"></a><span class="lineno"> 1863</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> &amp;mount_dir : <a class="code hl_variable" href="point_8h.html#a3eb410b1378b6a8fbac4fc8d548bdb2b">five_cardinal_directions</a> ) {</div>
<div class="line"><a id="l01864" name="l01864"></a><span class="lineno"> 1864</span>                <a class="code hl_struct" href="structpoint.html">point</a> near_loc = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ rack_part ].mount + mount_dir;</div>
<div class="line"><a id="l01865" name="l01865"></a><span class="lineno"> 1865</span>                std::vector&lt;int&gt; near_parts = <a class="code hl_function" href="classvehicle.html#a5a4d8dc36f8def16518bc7ba0126c969">parts_at_relative</a>( near_loc, <span class="keyword">true</span> );</div>
<div class="line"><a id="l01866" name="l01866"></a><span class="lineno"> 1866</span>                <span class="keywordflow">if</span>( near_parts.empty() ) {</div>
<div class="line"><a id="l01867" name="l01867"></a><span class="lineno"> 1867</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01868" name="l01868"></a><span class="lineno"> 1868</span>                }</div>
<div class="line"><a id="l01869" name="l01869"></a><span class="lineno"> 1869</span>                <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ near_parts[ 0 ] ].has_flag( <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaae9d481422fe656a547014c35ff6f2045">vehicle_part::carried_flag</a> ) ) {</div>
<div class="line"><a id="l01870" name="l01870"></a><span class="lineno"> 1870</span>                    carry_size += 1;</div>
<div class="line"><a id="l01871" name="l01871"></a><span class="lineno"> 1871</span>                    found_vehicle = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01872" name="l01872"></a><span class="lineno"> 1872</span>                    <span class="comment">// found a carried vehicle part</span></div>
<div class="line"><a id="l01873" name="l01873"></a><span class="lineno"> 1873</span>                    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ near_parts[ 0 ] ].carried_name() != cur_vehicle ) {</div>
<div class="line"><a id="l01874" name="l01874"></a><span class="lineno"> 1874</span>                        add_vehicle( carried_parts, carried_vehicles, carry_rack, carrying_racks );</div>
<div class="line"><a id="l01875" name="l01875"></a><span class="lineno"> 1875</span>                        cur_vehicle = <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ near_parts[ 0 ] ].carried_name();</div>
<div class="line"><a id="l01876" name="l01876"></a><span class="lineno"> 1876</span>                    }</div>
<div class="line"><a id="l01877" name="l01877"></a><span class="lineno"> 1877</span>                    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keywordtype">int</span> &amp;carried_part : near_parts ) {</div>
<div class="line"><a id="l01878" name="l01878"></a><span class="lineno"> 1878</span>                        carried_parts.push_back( carried_part );</div>
<div class="line"><a id="l01879" name="l01879"></a><span class="lineno"> 1879</span>                    }</div>
<div class="line"><a id="l01880" name="l01880"></a><span class="lineno"> 1880</span>                    carry_rack.push_back( rack_part );</div>
<div class="line"><a id="l01881" name="l01881"></a><span class="lineno"> 1881</span>                    <span class="comment">// we&#39;re not adjacent to another carried vehicle on this rack</span></div>
<div class="line"><a id="l01882" name="l01882"></a><span class="lineno"> 1882</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01883" name="l01883"></a><span class="lineno"> 1883</span>                }</div>
<div class="line"><a id="l01884" name="l01884"></a><span class="lineno"> 1884</span>            }</div>
<div class="line"><a id="l01885" name="l01885"></a><span class="lineno"> 1885</span>        }</div>
<div class="line"><a id="l01886" name="l01886"></a><span class="lineno"> 1886</span> </div>
<div class="line"><a id="l01887" name="l01887"></a><span class="lineno"> 1887</span>        add_vehicle( carried_parts, carried_vehicles, carry_rack, carrying_racks );</div>
<div class="line"><a id="l01888" name="l01888"></a><span class="lineno"> 1888</span>        full_rack &amp;= carry_size == rack_parts.size();</div>
<div class="line"><a id="l01889" name="l01889"></a><span class="lineno"> 1889</span>    }</div>
<div class="line"><a id="l01890" name="l01890"></a><span class="lineno"> 1890</span>    <span class="keywordtype">int</span> unload_carried = full_rack ? 0 : -1;</div>
<div class="line"><a id="l01891" name="l01891"></a><span class="lineno"> 1891</span>    <span class="keywordtype">bool</span> <a class="code hl_enumvalue" href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a6ece335eed53daba50d8caceed1b5c4b">success</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01892" name="l01892"></a><span class="lineno"> 1892</span>    <span class="keywordflow">if</span>( found_vehicle &amp;&amp; !full_rack ) {</div>
<div class="line"><a id="l01893" name="l01893"></a><span class="lineno"> 1893</span>        <a class="code hl_class" href="classuilist.html">uilist</a> rack_menu;</div>
<div class="line"><a id="l01894" name="l01894"></a><span class="lineno"> 1894</span>        rack_menu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( 0, <span class="keyword">true</span>, <span class="charliteral">&#39;0&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Load a vehicle on the rack&quot;</span> ) );</div>
<div class="line"><a id="l01895" name="l01895"></a><span class="lineno"> 1895</span>        <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0; i &lt; carried_vehicles.size(); i++ ) {</div>
<div class="line"><a id="l01896" name="l01896"></a><span class="lineno"> 1896</span>            rack_menu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( i + 1, <span class="keyword">true</span>, <span class="charliteral">&#39;1&#39;</span> + i,</div>
<div class="line"><a id="l01897" name="l01897"></a><span class="lineno"> 1897</span>                                <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Remove the %s from the rack&quot;</span> ),</div>
<div class="line"><a id="l01898" name="l01898"></a><span class="lineno"> 1898</span>                                               <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ carried_vehicles[i].front() ].carried_name() ) );</div>
<div class="line"><a id="l01899" name="l01899"></a><span class="lineno"> 1899</span>        }</div>
<div class="line"><a id="l01900" name="l01900"></a><span class="lineno"> 1900</span>        rack_menu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l01901" name="l01901"></a><span class="lineno"> 1901</span>        unload_carried = rack_menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> - 1;</div>
<div class="line"><a id="l01902" name="l01902"></a><span class="lineno"> 1902</span>    }</div>
<div class="line"><a id="l01903" name="l01903"></a><span class="lineno"> 1903</span>    <span class="keywordflow">if</span>( unload_carried &gt; -1 ) {</div>
<div class="line"><a id="l01904" name="l01904"></a><span class="lineno"> 1904</span>        <a class="code hl_enumvalue" href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a6ece335eed53daba50d8caceed1b5c4b">success</a> = <a class="code hl_function" href="classvehicle.html#af17aff1ff5fdcef4f1a8b63d47f32b69">remove_carried_vehicle</a>( carried_vehicles[unload_carried] );</div>
<div class="line"><a id="l01905" name="l01905"></a><span class="lineno"> 1905</span>        <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a6ece335eed53daba50d8caceed1b5c4b">success</a> ) {</div>
<div class="line"><a id="l01906" name="l01906"></a><span class="lineno"> 1906</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keywordtype">int</span> &amp;rack_part : carrying_racks[unload_carried] ) {</div>
<div class="line"><a id="l01907" name="l01907"></a><span class="lineno"> 1907</span>                <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ rack_part ].remove_flag( <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaa9d1a55e312464c51ecce1f0e187c4287">vehicle_part::carrying_flag</a> );</div>
<div class="line"><a id="l01908" name="l01908"></a><span class="lineno"> 1908</span>                <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[rack_part].remove_flag( <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaa1a8e65b4ccc32e8654446910b6a5c51e">vehicle_part::tracked_flag</a> );</div>
<div class="line"><a id="l01909" name="l01909"></a><span class="lineno"> 1909</span>            }</div>
<div class="line"><a id="l01910" name="l01910"></a><span class="lineno"> 1910</span>        }</div>
<div class="line"><a id="l01911" name="l01911"></a><span class="lineno"> 1911</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01912" name="l01912"></a><span class="lineno"> 1912</span>        <a class="code hl_enumvalue" href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a6ece335eed53daba50d8caceed1b5c4b">success</a> = <a class="code hl_function" href="classvehicle.html#a834d9feebd679075951c666c2030b881">try_to_rack_nearby_vehicle</a>( racks_parts );</div>
<div class="line"><a id="l01913" name="l01913"></a><span class="lineno"> 1913</span>    }</div>
<div class="line"><a id="l01914" name="l01914"></a><span class="lineno"> 1914</span>    <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a6ece335eed53daba50d8caceed1b5c4b">success</a> ) {</div>
<div class="line"><a id="l01915" name="l01915"></a><span class="lineno"> 1915</span>        <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().<a class="code hl_function" href="classmap.html#af839ef9ba53f51b09259e0af06881fe6">invalidate_map_cache</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_levz() );</div>
<div class="line"><a id="l01916" name="l01916"></a><span class="lineno"> 1916</span>        <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().<a class="code hl_function" href="classmap.html#a373c5fa6237a293b00633c6c84ca452d">reset_vehicle_cache</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_levz() );</div>
<div class="line"><a id="l01917" name="l01917"></a><span class="lineno"> 1917</span>    }</div>
<div class="line"><a id="l01918" name="l01918"></a><span class="lineno"> 1918</span>}</div>
<div class="ttc" id="aclassmap_html_a373c5fa6237a293b00633c6c84ca452d"><div class="ttname"><a href="classmap.html#a373c5fa6237a293b00633c6c84ca452d">map::reset_vehicle_cache</a></div><div class="ttdeci">void reset_vehicle_cache(int zlev)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00249">map.cpp:249</a></div></div>
<div class="ttc" id="aclassmap_html_af839ef9ba53f51b09259e0af06881fe6"><div class="ttname"><a href="classmap.html#af839ef9ba53f51b09259e0af06881fe6">map::invalidate_map_cache</a></div><div class="ttdeci">void invalidate_map_cache(const int zlev)</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00458">map.h:458</a></div></div>
<div class="ttc" id="aclassvehicle_html_a834d9feebd679075951c666c2030b881"><div class="ttname"><a href="classvehicle.html#a834d9feebd679075951c666c2030b881">vehicle::try_to_rack_nearby_vehicle</a></div><div class="ttdeci">bool try_to_rack_nearby_vehicle(const std::vector&lt; std::vector&lt; int &gt; &gt; &amp;list_of_racks)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01622">vehicle.cpp:1622</a></div></div>
<div class="ttc" id="aclassvehicle_html_af17aff1ff5fdcef4f1a8b63d47f32b69"><div class="ttname"><a href="classvehicle.html#af17aff1ff5fdcef4f1a8b63d47f32b69">vehicle::remove_carried_vehicle</a></div><div class="ttdeci">bool remove_carried_vehicle(const std::vector&lt; int &gt; &amp;carried_parts)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02004">vehicle.cpp:2004</a></div></div>
<div class="ttc" id="apoint_8h_html_a3eb410b1378b6a8fbac4fc8d548bdb2b"><div class="ttname"><a href="point_8h.html#a3eb410b1378b6a8fbac4fc8d548bdb2b">five_cardinal_directions</a></div><div class="ttdeci">static constexpr std::array&lt; point, 5 &gt; five_cardinal_directions</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00380">point.h:380</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="ui_8cpp_source.html#l00932">uilist::addentry()</a>, <a class="el" href="vehicle_8h_source.html#l00194">vehicle_part::carried_flag</a>, <a class="el" href="vehicle_8h_source.html#l00195">vehicle_part::carrying_flag</a>, <a class="el" href="vehicle_8cpp_source.html#l02789">find_lines_of_parts()</a>, <a class="el" href="point_8h_source.html#l00380">five_cardinal_directions</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="map_8cpp_source.html#l00141">get_map()</a>, <a class="el" href="map_8h_source.html#l00458">map::invalidate_map_cache()</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>, <a class="el" href="ui_8cpp_source.html#l00828">uilist::query()</a>, <a class="el" href="vehicle_8cpp_source.html#l02004">remove_carried_vehicle()</a>, <a class="el" href="map_8cpp_source.html#l00249">map::reset_vehicle_cache()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>, <a class="el" href="behavior_8h_source.html#l00020">behavior::success</a>, <a class="el" href="vehicle_8h_source.html#l00196">vehicle_part::tracked_flag</a>, and <a class="el" href="vehicle_8cpp_source.html#l01622">try_to_rack_nearby_vehicle()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>.</p>

</div>
</div>
<a id="a7872008545efae65aac7a6d9582bbd3b" name="a7872008545efae65aac7a6d9582bbd3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7872008545efae65aac7a6d9582bbd3b">&#9670;&nbsp;</a></span>use_controls()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::use_controls </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Operate vehicle controls. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pos</td><td>location of physical controls to operate (ignored during remote operation) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l00606">606</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>{</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>    std::vector&lt;uilist_entry&gt; <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>;</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>    std::vector&lt;std::function&lt;void()&gt;&gt; actions;</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span> </div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>    <span class="keywordtype">bool</span> remote = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;remoteveh() == <span class="keyword">this</span>;</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>    <span class="keywordtype">bool</span> has_electronic_controls = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span> </div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>    <span class="keywordflow">if</span>( remote ) {</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>        <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>.emplace_back( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Stop controlling&quot;</span> ), <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;RELEASE_CONTROLS&quot;</span> ) );</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>        actions.push_back( [&amp;] {</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.controlling_vehicle = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;setremoteveh( <span class="keyword">nullptr</span> );</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You stop controlling the vehicle.&quot;</span> ) );</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>            <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>        } );</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span> </div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>        has_electronic_controls = <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;CTRL_ELECTRONIC&quot;</span> ) || <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;REMOTE_CONTROLS&quot;</span> );</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span> </div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="vpart__position_8h.html#a67bd76da258293f1443f1356308381dc">veh_pointer_or_null</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.veh_at( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> ) ) == <span class="keyword">this</span> ) {</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.controlling_vehicle ) {</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>            <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>.emplace_back( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Let go of controls&quot;</span> ), <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;RELEASE_CONTROLS&quot;</span> ) );</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>            actions.push_back( [&amp;] {</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.controlling_vehicle = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You let go of the controls.&quot;</span> ) );</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>                <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>            } );</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>        }</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>        has_electronic_controls = !<a class="code hl_function" href="classvehicle.html#a38ba5bdc99241568c83ada974ed73e07">get_parts_at</a>( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, <span class="stringliteral">&quot;CTRL_ELECTRONIC&quot;</span>,</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>                                  <a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02ca100b8cad7cf2a56f6df78f171f97a1ec">part_status_flag::any</a> ).empty();</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>    }</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span> </div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a38ba5bdc99241568c83ada974ed73e07">get_parts_at</a>( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, <span class="stringliteral">&quot;CONTROLS&quot;</span>, <a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02ca100b8cad7cf2a56f6df78f171f97a1ec">part_status_flag::any</a> ).empty() &amp;&amp; !has_electronic_controls ) {</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;No controls there&quot;</span> ) );</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>    }</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span> </div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>    <span class="comment">// exit early if you can&#39;t control the vehicle</span></div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#a961aba2c257491888731b7806a103d1a">interact_vehicle_locked</a>() ) {</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>    }</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span> </div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;ENGINE&quot;</span> ) ) {</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.controlling_vehicle || ( remote &amp;&amp; <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> ) ) {</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>            <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>.emplace_back( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Stop driving&quot;</span> ), <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_ENGINE&quot;</span> ) );</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>            actions.push_back( [&amp;] {</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>                <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> &amp;&amp; <a class="code hl_function" href="classvehicle.html#a39ef96d5220fa3c0bde366f463039c21">has_engine_type_not</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a>, <span class="keyword">true</span> ) )</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>                {</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You turn the engine off and let go of the controls.&quot;</span> ) );</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>                    <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, 2, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a74bcc1e0384a916f56360c649f543f3a">sounds::sound_t::movement</a>,</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>                                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;the engine go silent&quot;</span> ) );</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>                } <span class="keywordflow">else</span></div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>                {</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You let go of the controls.&quot;</span> ) );</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>                }</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span> </div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>                <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> e = 0; e &lt; <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>.size(); ++e )</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>                {</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>                    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a4d73f86ddc3aafe3231c33c098b9d6c8">is_engine_on</a>( e ) ) {</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>                        <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacesfx.html#a6f93b4c27e459e0d1c174674586e9c6b">sfx::has_variant_sound</a>( <span class="stringliteral">&quot;engine_stop&quot;</span>, <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[ e ] ].info().<a class="code hl_function" href="namespacestd_1_1this__thread.html#ad1967fe44af39a7961e35eed20166ca9">get_id</a>().str() ) ) {</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>                            <a class="code hl_function" href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a>( <span class="stringliteral">&quot;engine_stop&quot;</span>, <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[ e ] ].info().<a class="code hl_function" href="namespacestd_1_1this__thread.html#ad1967fe44af39a7961e35eed20166ca9">get_id</a>().str(),</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>                                                     <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[ e ] ].info().engine_noise_factor() );</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>                        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aaea77fa5cfb98d7b1aadb0e71ee7a671">is_engine_type</a>( e, <a class="code hl_variable" href="vehicle__use_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a> ) ) {</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>                            <a class="code hl_function" href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a>( <span class="stringliteral">&quot;engine_stop&quot;</span>, <span class="stringliteral">&quot;muscle&quot;</span>,</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>                                                     <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[ e ] ].info().engine_noise_factor() );</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>                        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aaea77fa5cfb98d7b1aadb0e71ee7a671">is_engine_type</a>( e, <a class="code hl_variable" href="vehicle__use_8cpp.html#aacae8af2b949fe924016b5e370170fc8">fuel_type_wind</a> ) ) {</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>                            <a class="code hl_function" href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a>( <span class="stringliteral">&quot;engine_stop&quot;</span>, <span class="stringliteral">&quot;wind&quot;</span>,</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>                                                     <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[ e ] ].info().engine_noise_factor() );</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>                        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aaea77fa5cfb98d7b1aadb0e71ee7a671">is_engine_type</a>( e, <a class="code hl_variable" href="vehicle__use_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a> ) ) {</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>                            <a class="code hl_function" href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a>( <span class="stringliteral">&quot;engine_stop&quot;</span>, <span class="stringliteral">&quot;electric&quot;</span>,</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>                                                     <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[ e ] ].info().engine_noise_factor() );</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>                            <a class="code hl_function" href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a>( <span class="stringliteral">&quot;engine_stop&quot;</span>, <span class="stringliteral">&quot;combustion&quot;</span>,</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>                                                     <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ <a class="code hl_variable" href="classvehicle.html#a31bcfe9c61adc2fe500315a59e1bb690">engines</a>[ e ] ].info().engine_noise_factor() );</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>                        }</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>                    }</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>                }</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>                <a class="code hl_variable" href="classvehicle.html#ae3281409ce9ec7e878f9e22427e815e5">vehicle_noise</a> = 0;</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>                <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.controlling_vehicle = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;setremoteveh( <span class="keyword">nullptr</span> );</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>                <a class="code hl_function" href="namespacesfx.html#a03291faa7dbf7c6a4c0aa23c160cd33f">sfx::do_vehicle_engine_sfx</a>();</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>                <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>            } );</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span> </div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a39ef96d5220fa3c0bde366f463039c21">has_engine_type_not</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>            <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>.emplace_back( <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Turn off the engine&quot;</span> ) : <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Turn on the engine&quot;</span> ),</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>                                  <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_ENGINE&quot;</span> ) );</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>            actions.push_back( [&amp;] {</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>                <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> )</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>                {</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>                    <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>                    <a class="code hl_function" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a>, 2, <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a74bcc1e0384a916f56360c649f543f3a">sounds::sound_t::movement</a>,</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>                                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;the engine go silent&quot;</span> ) );</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>                    <a class="code hl_function" href="classvehicle.html#ac35c686d0d5bc43d6605036bcde5e62b">stop_engines</a>();</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>                } <span class="keywordflow">else</span></div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>                {</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>                    <a class="code hl_function" href="classvehicle.html#a7183b4a2eac4da678e316f5ca1d46e08">start_engines</a>();</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>                }</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>                <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>            } );</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>        }</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>    }</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span> </div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;HORN&quot;</span> ) ) {</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>        <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>.emplace_back( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Honk horn&quot;</span> ), <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;SOUND_HORN&quot;</span> ) );</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>        actions.push_back( [&amp;] { <a class="code hl_function" href="classvehicle.html#ad842343ffa2e67bbd0ad708bf7f7bf93">honk_horn</a>(); <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>(); } );</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>    }</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;AUTOPILOT&quot;</span> ) &amp;&amp; ( <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;CTRL_ELECTRONIC&quot;</span> ) ||</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>                                     <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;REMOTE_CONTROLS&quot;</span> ) ) ) {</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>        <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>.emplace_back( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Control autopilot&quot;</span> ),</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>                              <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;CONTROL_AUTOPILOT&quot;</span> ) );</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>        actions.push_back( [&amp;] { <a class="code hl_function" href="classvehicle.html#ad5903e76e7d6113d396c9eb5eeef8f7a">toggle_autopilot</a>(); <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>(); } );</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>    }</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span> </div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>    <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>.emplace_back( <a class="code hl_variable" href="classvehicle.html#abdf6601268460dc437ef079590deb33b">cruise_on</a> ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Disable cruise control&quot;</span> ) : <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Enable cruise control&quot;</span> ),</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>                          <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_CRUISE_CONTROL&quot;</span> ) );</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>    actions.emplace_back( [&amp;] {</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>        <a class="code hl_variable" href="classvehicle.html#abdf6601268460dc437ef079590deb33b">cruise_on</a> = !<a class="code hl_variable" href="classvehicle.html#abdf6601268460dc437ef079590deb33b">cruise_on</a>;</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_variable" href="classvehicle.html#abdf6601268460dc437ef079590deb33b">cruise_on</a> ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Cruise control turned on&quot;</span> ) : <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Cruise control turned off&quot;</span> ) );</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>        <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>    } );</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span> </div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>    <span class="keywordflow">if</span>( has_electronic_controls ) {</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>        <a class="code hl_function" href="classvehicle.html#a21939ab01fc986741bf90546bc4b8044">set_electronics_menu_options</a>( <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>, actions );</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>        <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>.emplace_back( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Control multiple electronics&quot;</span> ), <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;CONTROL_MANY_ELECTRONICS&quot;</span> ) );</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>        actions.push_back( [&amp;] { <a class="code hl_function" href="classvehicle.html#a905234356e91951db1fe65d212a0d89d">control_electronics</a>(); <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>(); } );</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>    }</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span> </div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>    <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>.emplace_back( <a class="code hl_variable" href="classvehicle.html#abe5f5ade599d2cd543a3e3c3860bc051">tracking_on</a> ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Forget vehicle position&quot;</span> ) :</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>                          <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Remember vehicle position&quot;</span> ),</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>                          <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_TRACKING&quot;</span> ) );</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>    actions.push_back( [&amp;] { <a class="code hl_function" href="classvehicle.html#af215ec0fe4b4e7a8a8bf7e03e5874678">toggle_tracking</a>(); } );</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span> </div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>    <span class="keywordflow">if</span>( ( <a class="code hl_function" href="classvehicle.html#ad9e5f31113c5dda6b76442cbd7b8429f">is_foldable</a>() || <a class="code hl_variable" href="classvehicle.html#a0383bc21c8d6b5a3689124f3d286a004">tags</a>.count( <span class="stringliteral">&quot;convertible&quot;</span> ) ) &amp;&amp; !remote ) {</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>        <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>.emplace_back( <a class="code hl_function" href="string__formatter_8h.html#a9b089d0b697443b096063219dab08ef5">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Fold %s&quot;</span> ), <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> ), <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;FOLD_VEHICLE&quot;</span> ) );</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>        actions.push_back( [&amp;] { <a class="code hl_function" href="classvehicle.html#aac5f2a0e58f59b3cc5020d9bb7216bdd">fold_up</a>(); } );</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>    }</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span> </div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;ENGINE&quot;</span> ) ) {</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>        <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>.emplace_back( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Control individual engines&quot;</span> ), <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;CONTROL_ENGINES&quot;</span> ) );</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>        actions.push_back( [&amp;] { <a class="code hl_function" href="classvehicle.html#af03022f10e08674024f2fb664624ca54">control_engines</a>(); <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>(); } );</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>    }</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span> </div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a949775a37c7daa7a6b67e510f548bca3">is_alarm_on</a> ) {</div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> == 0 &amp;&amp; !remote ) {</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>            <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>.emplace_back( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Try to disarm alarm.&quot;</span> ), <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_ALARM&quot;</span> ) );</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>            actions.push_back( [&amp;] { <a class="code hl_function" href="classvehicle.html#a726572f5d8dc1c0123bc0ea2357499d9">smash_security_system</a>(); <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>(); } );</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span> </div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( has_electronic_controls &amp;&amp; <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;SECURITY&quot;</span> ) ) {</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>            <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>.emplace_back( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Trigger alarm&quot;</span> ), <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TOGGLE_ALARM&quot;</span> ) );</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>            actions.push_back( [&amp;] {</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>                <a class="code hl_variable" href="classvehicle.html#a949775a37c7daa7a6b67e510f548bca3">is_alarm_on</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You trigger the alarm&quot;</span> ) );</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>                <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>();</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>            } );</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>        }</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>    }</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span> </div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#aca3ae013973cb492b14967e574189c1c">has_part</a>( <span class="stringliteral">&quot;TURRET&quot;</span> ) ) {</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>        <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>.emplace_back( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Set turret targeting modes&quot;</span> ), <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TURRET_TARGET_MODE&quot;</span> ) );</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>        actions.push_back( [&amp;] { <a class="code hl_function" href="classvehicle.html#a25395ffcb67e950d30682050f3147778">turrets_set_targeting</a>(); <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>(); } );</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span> </div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>        <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>.emplace_back( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Set turret firing modes&quot;</span> ), <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TURRET_FIRE_MODE&quot;</span> ) );</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>        actions.push_back( [&amp;] { <a class="code hl_function" href="classvehicle.html#a34acaf3108178e27a2530566749a17c2">turrets_set_mode</a>(); <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>(); } );</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span> </div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>        <span class="comment">// We can also fire manual turrets with ACTION_FIRE while standing at the controls.</span></div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>        <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>.emplace_back( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Aim turrets manually&quot;</span> ), <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TURRET_MANUAL_AIM&quot;</span> ) );</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>        actions.push_back( [&amp;] { <a class="code hl_function" href="classvehicle.html#aee60cda2d8d84a6f1a912512fa523cba">turrets_aim_and_fire_all_manual</a>( <span class="keyword">true</span> ); <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>(); } );</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span> </div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>        <span class="comment">// This lets us manually override and set the target for the automatic turrets instead.</span></div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>        <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>.emplace_back( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Aim automatic turrets&quot;</span> ), <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TURRET_MANUAL_OVERRIDE&quot;</span> ) );</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>        actions.push_back( [&amp;] { <a class="code hl_function" href="classvehicle.html#a1de4016879048f712da9fa4ecd286a87">turrets_override_automatic_aim</a>(); <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>(); } );</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span> </div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>        <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>.emplace_back( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Aim individual turret&quot;</span> ), <a class="code hl_function" href="vehicle__use_8cpp.html#aa2ceccc4206df9156875336ef6a593de">keybind</a>( <span class="stringliteral">&quot;TURRET_SINGLE_FIRE&quot;</span> ) );</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>        actions.push_back( [&amp;] { <a class="code hl_function" href="classvehicle.html#abb1d7445bb1b9448594d50402103bc7c">turrets_aim_and_fire_single</a>(); <a class="code hl_function" href="classvehicle.html#aaa2487e84144e8c6ea235748339e97a5">refresh</a>(); } );</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>    }</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span> </div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>    <a class="code hl_class" href="classuilist.html">uilist</a> menu;</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>    menu.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Vehicle controls&quot;</span> );</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>    menu.<a class="code hl_variable" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a> = <a class="code hl_function" href="namespacePATH__INFO.html#a5a5d41d971342c3e6103b510ccbcb9bb">options</a>;</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>    menu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>    <span class="keywordflow">if</span>( menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &gt;= 0 ) {</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>        <span class="comment">// allow player to turn off engine without triggering another warning</span></div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>        <span class="keywordflow">if</span>( menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> != 0 &amp;&amp; menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> != 1 &amp;&amp; menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> != 2 &amp;&amp; menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> != 3 ) {</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>            <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#a2f52c81265462fd7eee8fd158666f9be">handle_potential_theft</a>( <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classplayer.html">player</a> &amp;<span class="keyword">&gt;</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u ) ) ) {</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>            }</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>        }</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>        actions[menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>]();</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>        <span class="comment">// Don&#39;t access `this` from here on, one of the actions above is to call</span></div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>        <span class="comment">// fold_up(), which may have deleted `this` object.</span></div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>    }</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>}</div>
<div class="ttc" id="aclassvehicle_html_a1de4016879048f712da9fa4ecd286a87"><div class="ttname"><a href="classvehicle.html#a1de4016879048f712da9fa4ecd286a87">vehicle::turrets_override_automatic_aim</a></div><div class="ttdeci">void turrets_override_automatic_aim()</div><div class="ttdoc">Set target for automatic turrets using the aiming UI.</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00352">turret.cpp:352</a></div></div>
<div class="ttc" id="aclassvehicle_html_a25395ffcb67e950d30682050f3147778"><div class="ttname"><a href="classvehicle.html#a25395ffcb67e950d30682050f3147778">vehicle::turrets_set_targeting</a></div><div class="ttdeci">void turrets_set_targeting()</div><div class="ttdoc">Set targeting mode for specific turrets.</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00425">turret.cpp:425</a></div></div>
<div class="ttc" id="aclassvehicle_html_a34acaf3108178e27a2530566749a17c2"><div class="ttname"><a href="classvehicle.html#a34acaf3108178e27a2530566749a17c2">vehicle::turrets_set_mode</a></div><div class="ttdeci">void turrets_set_mode()</div><div class="ttdoc">Set firing mode for specific turrets.</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00481">turret.cpp:481</a></div></div>
<div class="ttc" id="aclassvehicle_html_a726572f5d8dc1c0123bc0ea2357499d9"><div class="ttname"><a href="classvehicle.html#a726572f5d8dc1c0123bc0ea2357499d9">vehicle::smash_security_system</a></div><div class="ttdeci">void smash_security_system()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00492">vehicle_use.cpp:492</a></div></div>
<div class="ttc" id="aclassvehicle_html_abb1d7445bb1b9448594d50402103bc7c"><div class="ttname"><a href="classvehicle.html#abb1d7445bb1b9448594d50402103bc7c">vehicle::turrets_aim_and_fire_single</a></div><div class="ttdeci">void turrets_aim_and_fire_single()</div><div class="ttdoc">Select a single ready turret, aim it using the aiming UI and fire.</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00306">turret.cpp:306</a></div></div>
<div class="ttc" id="aclassvehicle_html_ad5903e76e7d6113d396c9eb5eeef8f7a"><div class="ttname"><a href="classvehicle.html#ad5903e76e7d6113d396c9eb5eeef8f7a">vehicle::toggle_autopilot</a></div><div class="ttdeci">void toggle_autopilot()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00552">vehicle_use.cpp:552</a></div></div>
<div class="ttc" id="aclassvehicle_html_ad842343ffa2e67bbd0ad708bf7f7bf93"><div class="ttname"><a href="classvehicle.html#ad842343ffa2e67bbd0ad708bf7f7bf93">vehicle::honk_horn</a></div><div class="ttdeci">void honk_horn()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l01113">vehicle_use.cpp:1113</a></div></div>
<div class="ttc" id="aclassvehicle_html_aee60cda2d8d84a6f1a912512fa523cba"><div class="ttname"><a href="classvehicle.html#aee60cda2d8d84a6f1a912512fa523cba">vehicle::turrets_aim_and_fire_all_manual</a></div><div class="ttdeci">bool turrets_aim_and_fire_all_manual(bool show_msg=false)</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00336">turret.cpp:336</a></div></div>
<div class="ttc" id="aclassvehicle_html_af03022f10e08674024f2fb664624ca54"><div class="ttname"><a href="classvehicle.html#af03022f10e08674024f2fb664624ca54">vehicle::control_engines</a></div><div class="ttdeci">void control_engines()</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00369">vehicle_use.cpp:369</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02ca100b8cad7cf2a56f6df78f171f97a1ec">any</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00344">control_electronics()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00369">control_engines()</a>, <a class="el" href="vehicle_8h_source.html#l01928">cruise_on</a>, <a class="el" href="sounds_8cpp_source.html#l01605">sfx::do_vehicle_engine_sfx()</a>, <a class="el" href="vehicle_8h_source.html#l01930">engine_on</a>, <a class="el" href="vehicle_8h_source.html#l01752">engines</a>, <a class="el" href="ui_8h_source.html#l00323">uilist::entries</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00801">fold_up()</a>, <a class="el" href="vehicle__use_8cpp.html#a3f2436294a28dc686156c10abab2f994">fuel_type_battery</a>, <a class="el" href="vehicle__use_8cpp.html#af54ee122fbd5cf94c6ef8bca7e67c8e8">fuel_type_muscle</a>, <a class="el" href="vehicle__use_8cpp.html#aacae8af2b949fe924016b5e370170fc8">fuel_type_wind</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="mingw_8thread_8h_source.html#l00125">std::this_thread::get_id()</a>, <a class="el" href="vehicle_8cpp_source.html#l02580">get_parts_at()</a>, <a class="el" href="vehicle_8cpp_source.html#l04197">handle_potential_theft()</a>, <a class="el" href="vehicle_8cpp_source.html#l01040">has_engine_type_not()</a>, <a class="el" href="vehicle_8cpp_source.html#l02558">has_part()</a>, <a class="el" href="sounds_8cpp_source.html#l01618">sfx::has_variant_sound()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01113">honk_horn()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00454">interact_vehicle_locked()</a>, <a class="el" href="vehicle_8h_source.html#l01936">is_alarm_on</a>, <a class="el" href="vehicle_8cpp_source.html#l01087">is_engine_on()</a>, <a class="el" href="vehicle_8cpp_source.html#l01075">is_engine_type()</a>, <a class="el" href="vehicle_8cpp_source.html#l06537">is_foldable()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00094">keybind()</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a74bcc1e0384a916f56360c649f543f3a">sounds::movement</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="path__info_8cpp_source.html#l00238">PATH_INFO::options()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="sounds_8cpp_source.html#l01590">sfx::play_variant_sound()</a>, <a class="el" href="vehicle_8h_source.html#l01859">pos</a>, <a class="el" href="ui_8cpp_source.html#l00828">uilist::query()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00266">set_electronics_menu_options()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00492">smash_security_system()</a>, <a class="el" href="sounds_8cpp_source.html#l00177">sounds::sound()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01055">start_engines()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01033">stop_engines()</a>, <a class="el" href="string__formatter_8h_source.html#l00418">string_format()</a>, <a class="el" href="vehicle_8h_source.html#l01802">tags</a>, <a class="el" href="ui_8h_source.html#l00320">uilist::text</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00552">toggle_autopilot()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00593">toggle_tracking()</a>, <a class="el" href="vehicle_8h_source.html#l01932">tracking_on</a>, <a class="el" href="turret_8cpp_source.html#l00336">turrets_aim_and_fire_all_manual()</a>, <a class="el" href="turret_8cpp_source.html#l00306">turrets_aim_and_fire_single()</a>, <a class="el" href="turret_8cpp_source.html#l00352">turrets_override_automatic_aim()</a>, <a class="el" href="turret_8cpp_source.html#l00481">turrets_set_mode()</a>, <a class="el" href="turret_8cpp_source.html#l00425">turrets_set_targeting()</a>, <a class="el" href="vpart__position_8h_source.html#l00154">veh_pointer_or_null()</a>, <a class="el" href="vehicle_8h_source.html#l01951">vehicle_noise</a>, and <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l05443">game::control_vehicle()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>, and <a class="el" href="iuse_8cpp_source.html#l08258">iuse::remoteveh()</a>.</p>

</div>
</div>
<a id="a0cada0f94f36c1bbaf243d6ff82426ed" name="a0cada0f94f36c1bbaf243d6ff82426ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cada0f94f36c1bbaf243d6ff82426ed">&#9670;&nbsp;</a></span>use_dishwasher()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::use_dishwasher </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01691">1691</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01692" name="l01692"></a><span class="lineno"> 1692</span>{</div>
<div class="line"><a id="l01693" name="l01693"></a><span class="lineno"> 1693</span>    <span class="keywordtype">bool</span> detergent_is_enough = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.crafting_inventory().has_charges( <a class="code hl_variable" href="vehicle__use_8cpp.html#a94c468761d26393294e93fd61638b9b3">itype_detergent</a>, 5 );</div>
<div class="line"><a id="l01694" name="l01694"></a><span class="lineno"> 1694</span>    <span class="keyword">auto</span> items = <a class="code hl_function" href="classvehicle.html#a983dd9db3cd64078b176a82289e0b260">get_items</a>( p );</div>
<div class="line"><a id="l01695" name="l01695"></a><span class="lineno"> 1695</span>    <span class="keyword">static</span> <span class="keyword">const</span> std::string filthy( <span class="stringliteral">&quot;FILTHY&quot;</span> );</div>
<div class="line"><a id="l01696" name="l01696"></a><span class="lineno"> 1696</span>    <span class="keywordtype">bool</span> filthy_items = std::all_of( items.begin(), items.end(), []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; i ) {</div>
<div class="line"><a id="l01697" name="l01697"></a><span class="lineno"> 1697</span>        return i.has_flag( filthy );</div>
<div class="line"><a id="l01698" name="l01698"></a><span class="lineno"> 1698</span>    } );</div>
<div class="line"><a id="l01699" name="l01699"></a><span class="lineno"> 1699</span> </div>
<div class="line"><a id="l01700" name="l01700"></a><span class="lineno"> 1700</span>    std::string buffer;</div>
<div class="line"><a id="l01701" name="l01701"></a><span class="lineno"> 1701</span>    buffer += <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Soft items can&#39;t be cleaned in a dishwasher, you should use a washing machine for that.  You need to remove them:&quot;</span> );</div>
<div class="line"><a id="l01702" name="l01702"></a><span class="lineno"> 1702</span>    <span class="keywordtype">bool</span> soft_items = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01703" name="l01703"></a><span class="lineno"> 1703</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp;it : items ) {</div>
<div class="line"><a id="l01704" name="l01704"></a><span class="lineno"> 1704</span>        <span class="keywordflow">if</span>( it.is_soft() ) {</div>
<div class="line"><a id="l01705" name="l01705"></a><span class="lineno"> 1705</span>            soft_items = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01706" name="l01706"></a><span class="lineno"> 1706</span>            buffer += <span class="stringliteral">&quot; &quot;</span> + it.tname();</div>
<div class="line"><a id="l01707" name="l01707"></a><span class="lineno"> 1707</span>        }</div>
<div class="line"><a id="l01708" name="l01708"></a><span class="lineno"> 1708</span>    }</div>
<div class="line"><a id="l01709" name="l01709"></a><span class="lineno"> 1709</span> </div>
<div class="line"><a id="l01710" name="l01710"></a><span class="lineno"> 1710</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].<a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a> ) {</div>
<div class="line"><a id="l01711" name="l01711"></a><span class="lineno"> 1711</span>        <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].enabled = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01712" name="l01712"></a><span class="lineno"> 1712</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a id="l01713" name="l01713"></a><span class="lineno"> 1713</span>                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You turn the dishwasher off before it&#39;s finished the program, and open its lid.&quot;</span> ) );</div>
<div class="line"><a id="l01714" name="l01714"></a><span class="lineno"> 1714</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( items.empty() ) {</div>
<div class="line"><a id="l01715" name="l01715"></a><span class="lineno"> 1715</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a id="l01716" name="l01716"></a><span class="lineno"> 1716</span>                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The dishwasher is empty, there&#39;s no point in starting it.&quot;</span> ) );</div>
<div class="line"><a id="l01717" name="l01717"></a><span class="lineno"> 1717</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a> ) &lt; 24 &amp;&amp; <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a> ) &lt; 24 ) {</div>
<div class="line"><a id="l01718" name="l01718"></a><span class="lineno"> 1718</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You need 24 charges of water in tanks of the %s to fill the dishwasher.&quot;</span> ),</div>
<div class="line"><a id="l01719" name="l01719"></a><span class="lineno"> 1719</span>                 <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l01720" name="l01720"></a><span class="lineno"> 1720</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !detergent_is_enough ) {</div>
<div class="line"><a id="l01721" name="l01721"></a><span class="lineno"> 1721</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You need 5 charges of detergent for the dishwasher.&quot;</span> ) );</div>
<div class="line"><a id="l01722" name="l01722"></a><span class="lineno"> 1722</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !filthy_items ) {</div>
<div class="line"><a id="l01723" name="l01723"></a><span class="lineno"> 1723</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a id="l01724" name="l01724"></a><span class="lineno"> 1724</span>                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You need to remove all non-filthy items from the dishwasher to start the washing program.&quot;</span> ) );</div>
<div class="line"><a id="l01725" name="l01725"></a><span class="lineno"> 1725</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( soft_items ) {</div>
<div class="line"><a id="l01726" name="l01726"></a><span class="lineno"> 1726</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, buffer );</div>
<div class="line"><a id="l01727" name="l01727"></a><span class="lineno"> 1727</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01728" name="l01728"></a><span class="lineno"> 1728</span>        <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].enabled = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01729" name="l01729"></a><span class="lineno"> 1729</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;n : items ) {</div>
<div class="line"><a id="l01730" name="l01730"></a><span class="lineno"> 1730</span>            n.set_age( 0_turns );</div>
<div class="line"><a id="l01731" name="l01731"></a><span class="lineno"> 1731</span>        }</div>
<div class="line"><a id="l01732" name="l01732"></a><span class="lineno"> 1732</span> </div>
<div class="line"><a id="l01733" name="l01733"></a><span class="lineno"> 1733</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a> ) &gt;= 24 ) {</div>
<div class="line"><a id="l01734" name="l01734"></a><span class="lineno"> 1734</span>            <a class="code hl_function" href="classvehicle.html#a2b28d63a4879b75d5a186289c54f6330">drain</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>, 24 );</div>
<div class="line"><a id="l01735" name="l01735"></a><span class="lineno"> 1735</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01736" name="l01736"></a><span class="lineno"> 1736</span>            <a class="code hl_function" href="classvehicle.html#a2b28d63a4879b75d5a186289c54f6330">drain</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a>, 24 );</div>
<div class="line"><a id="l01737" name="l01737"></a><span class="lineno"> 1737</span>        }</div>
<div class="line"><a id="l01738" name="l01738"></a><span class="lineno"> 1738</span> </div>
<div class="line"><a id="l01739" name="l01739"></a><span class="lineno"> 1739</span>        std::vector&lt;item_comp&gt; detergent;</div>
<div class="line"><a id="l01740" name="l01740"></a><span class="lineno"> 1740</span>        detergent.push_back( <a class="code hl_struct" href="structitem__comp.html">item_comp</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#a94c468761d26393294e93fd61638b9b3">itype_detergent</a>, 5 ) );</div>
<div class="line"><a id="l01741" name="l01741"></a><span class="lineno"> 1741</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.consume_items( detergent, 1, <a class="code hl_function" href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a> );</div>
<div class="line"><a id="l01742" name="l01742"></a><span class="lineno"> 1742</span> </div>
<div class="line"><a id="l01743" name="l01743"></a><span class="lineno"> 1743</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a id="l01744" name="l01744"></a><span class="lineno"> 1744</span>                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You pour some detergent into the dishwasher, close its lid, and turn it on.  The dishwasher is being filled with water from vehicle tanks.&quot;</span> ) );</div>
<div class="line"><a id="l01745" name="l01745"></a><span class="lineno"> 1745</span>    }</div>
<div class="line"><a id="l01746" name="l01746"></a><span class="lineno"> 1746</span>}</div>
<div class="ttc" id="aitem_8h_html_a64c6001518eb0b959300f427a0086eb0"><div class="ttname"><a href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a></div><div class="ttdeci">bool is_crafting_component(const item &amp;component)</div><div class="ttdoc">Default filter for crafting component searches.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02275">item.h:2275</a></div></div>
<div class="ttc" id="astructitem__comp_html"><div class="ttname"><a href="structitem__comp.html">item_comp</a></div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00116">requirements.h:116</a></div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a94c468761d26393294e93fd61638b9b3"><div class="ttname"><a href="vehicle__use_8cpp.html#a94c468761d26393294e93fd61638b9b3">itype_detergent</a></div><div class="ttdeci">static const itype_id itype_detergent(&quot;detergent&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="vehicle_8cpp_source.html#l03246">drain()</a>, <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a>, <a class="el" href="vehicle_8cpp_source.html#l03179">fuel_left()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l05288">get_items()</a>, <a class="el" href="item_8h_source.html#l02275">is_crafting_component()</a>, <a class="el" href="vehicle__use_8cpp.html#a94c468761d26393294e93fd61638b9b3">itype_detergent</a>, <a class="el" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>, <a class="el" href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00253">m_good</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, and <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>.</p>

</div>
</div>
<a id="a8c5c783aa99f2c3cab059be7a72e80c4" name="a8c5c783aa99f2c3cab059be7a72e80c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c5c783aa99f2c3cab059be7a72e80c4">&#9670;&nbsp;</a></span>use_harness()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::use_harness </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>part</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01764">1764</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01765" name="l01765"></a><span class="lineno"> 1765</span>{</div>
<div class="line"><a id="l01766" name="l01766"></a><span class="lineno"> 1766</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].is_unavailable() || <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].removed ) {</div>
<div class="line"><a id="l01767" name="l01767"></a><span class="lineno"> 1767</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01768" name="l01768"></a><span class="lineno"> 1768</span>    }</div>
<div class="line"><a id="l01769" name="l01769"></a><span class="lineno"> 1769</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_empty( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> ) ) {</div>
<div class="line"><a id="l01770" name="l01770"></a><span class="lineno"> 1770</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The harness is blocked.&quot;</span> ) );</div>
<div class="line"><a id="l01771" name="l01771"></a><span class="lineno"> 1771</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01772" name="l01772"></a><span class="lineno"> 1772</span>    }</div>
<div class="line"><a id="l01773" name="l01773"></a><span class="lineno"> 1773</span>    <span class="keyword">const</span> std::function&lt;bool( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp; )&gt; f = []( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp; pnt ) {</div>
<div class="line"><a id="l01774" name="l01774"></a><span class="lineno"> 1774</span>        <a class="code hl_class" href="classmonster.html">monster</a> *mon_ptr = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at&lt;<a class="code hl_class" href="classmonster.html">monster</a>&gt;( pnt );</div>
<div class="line"><a id="l01775" name="l01775"></a><span class="lineno"> 1775</span>        <span class="keywordflow">if</span>( mon_ptr == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l01776" name="l01776"></a><span class="lineno"> 1776</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01777" name="l01777"></a><span class="lineno"> 1777</span>        }</div>
<div class="line"><a id="l01778" name="l01778"></a><span class="lineno"> 1778</span>        <a class="code hl_class" href="classmonster.html">monster</a> &amp;f = *mon_ptr;</div>
<div class="line"><a id="l01779" name="l01779"></a><span class="lineno"> 1779</span>        <span class="keywordflow">return</span> ( f.<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> != 0 &amp;&amp; ( f.<a class="code hl_function" href="classmonster.html#a0315651e596e69f0626b30e081726596">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a7fc4359d031504695d92e93c9306aab1">MF_PET_MOUNTABLE</a> ) ||</div>
<div class="line"><a id="l01780" name="l01780"></a><span class="lineno"> 1780</span>                                      f.<a class="code hl_function" href="classmonster.html#a0315651e596e69f0626b30e081726596">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a1097ae8b398e54bff84b789e42ac8552">MF_PET_HARNESSABLE</a> ) ) );</div>
<div class="line"><a id="l01781" name="l01781"></a><span class="lineno"> 1781</span>    };</div>
<div class="line"><a id="l01782" name="l01782"></a><span class="lineno"> 1782</span> </div>
<div class="line"><a id="l01783" name="l01783"></a><span class="lineno"> 1783</span>    <span class="keyword">const</span> <a class="code hl_class" href="classcata_1_1optional.html">cata::optional&lt;tripoint&gt;</a> pnt_ = <a class="code hl_function" href="action_8cpp.html#a46f5749dfc21d809440545cbaf02f8d0">choose_adjacent_highlight</a>(</div>
<div class="line"><a id="l01784" name="l01784"></a><span class="lineno"> 1784</span>            <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Where is the creature to harness?&quot;</span> ), <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;There is no creature to harness nearby.&quot;</span> ), f,</div>
<div class="line"><a id="l01785" name="l01785"></a><span class="lineno"> 1785</span>            <span class="keyword">false</span> );</div>
<div class="line"><a id="l01786" name="l01786"></a><span class="lineno"> 1786</span>    <span class="keywordflow">if</span>( !pnt_ ) {</div>
<div class="line"><a id="l01787" name="l01787"></a><span class="lineno"> 1787</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a id="l01788" name="l01788"></a><span class="lineno"> 1788</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01789" name="l01789"></a><span class="lineno"> 1789</span>    }</div>
<div class="line"><a id="l01790" name="l01790"></a><span class="lineno"> 1790</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;target = *pnt_;</div>
<div class="line"><a id="l01791" name="l01791"></a><span class="lineno"> 1791</span>    <a class="code hl_class" href="classmonster.html">monster</a> *mon_ptr = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at&lt;<a class="code hl_class" href="classmonster.html">monster</a>&gt;( target );</div>
<div class="line"><a id="l01792" name="l01792"></a><span class="lineno"> 1792</span>    <span class="keywordflow">if</span>( mon_ptr == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l01793" name="l01793"></a><span class="lineno"> 1793</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;No creature there.&quot;</span> ) );</div>
<div class="line"><a id="l01794" name="l01794"></a><span class="lineno"> 1794</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01795" name="l01795"></a><span class="lineno"> 1795</span>    }</div>
<div class="line"><a id="l01796" name="l01796"></a><span class="lineno"> 1796</span>    <a class="code hl_class" href="classmonster.html">monster</a> &amp;m = *mon_ptr;</div>
<div class="line"><a id="l01797" name="l01797"></a><span class="lineno"> 1797</span>    std::string Harness_Bodytype = <span class="stringliteral">&quot;HARNESS_&quot;</span> + m.<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_variable" href="structmtype.html#a541f9bf8c2e84856ea34db43f88991b3">bodytype</a>;</div>
<div class="line"><a id="l01798" name="l01798"></a><span class="lineno"> 1798</span>    <span class="keywordflow">if</span>( m.<a class="code hl_variable" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> == 0 ) {</div>
<div class="line"><a id="l01799" name="l01799"></a><span class="lineno"> 1799</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This creature is not friendly!&quot;</span> ) );</div>
<div class="line"><a id="l01800" name="l01800"></a><span class="lineno"> 1800</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01801" name="l01801"></a><span class="lineno"> 1801</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !m.<a class="code hl_function" href="classmonster.html#a0315651e596e69f0626b30e081726596">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a7fc4359d031504695d92e93c9306aab1">MF_PET_MOUNTABLE</a> ) &amp;&amp; !m.<a class="code hl_function" href="classmonster.html#a0315651e596e69f0626b30e081726596">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a1097ae8b398e54bff84b789e42ac8552">MF_PET_HARNESSABLE</a> ) ) {</div>
<div class="line"><a id="l01802" name="l01802"></a><span class="lineno"> 1802</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This creature cannot be harnessed.&quot;</span> ) );</div>
<div class="line"><a id="l01803" name="l01803"></a><span class="lineno"> 1803</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01804" name="l01804"></a><span class="lineno"> 1804</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !<a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, Harness_Bodytype ) &amp;&amp; !<a class="code hl_function" href="classvehicle.html#a396e319b27729d4c423b3d096e657bf9">part_flag</a>( <a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>, <span class="stringliteral">&quot;HARNESS_any&quot;</span> ) ) {</div>
<div class="line"><a id="l01805" name="l01805"></a><span class="lineno"> 1805</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The harness is not adapted for this creature morphology.&quot;</span> ) );</div>
<div class="line"><a id="l01806" name="l01806"></a><span class="lineno"> 1806</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01807" name="l01807"></a><span class="lineno"> 1807</span>    }</div>
<div class="line"><a id="l01808" name="l01808"></a><span class="lineno"> 1808</span> </div>
<div class="line"><a id="l01809" name="l01809"></a><span class="lineno"> 1809</span>    m.<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a>, 1_turns, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a> );</div>
<div class="line"><a id="l01810" name="l01810"></a><span class="lineno"> 1810</span>    m.<a class="code hl_function" href="classmonster.html#a4871f8fa2b4ba7577c80db7c5e88f291">setpos</a>( <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> );</div>
<div class="line"><a id="l01811" name="l01811"></a><span class="lineno"> 1811</span>    <span class="comment">//~ %1$s: monster name, %2$s: vehicle name</span></div>
<div class="line"><a id="l01812" name="l01812"></a><span class="lineno"> 1812</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You harness your %1$s to %2$s.&quot;</span> ), m.<a class="code hl_function" href="classmonster.html#ad4fba0b9aea36097d8b972e05e66d914">get_name</a>(), <a class="code hl_function" href="classvehicle.html#ace5c25f3faffd8848491570cfb89f086">disp_name</a>() );</div>
<div class="line"><a id="l01813" name="l01813"></a><span class="lineno"> 1813</span>    <span class="keywordflow">if</span>( m.<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#a09c667a72022d7e0ee0b851560831e04">effect_tied</a> ) ) {</div>
<div class="line"><a id="l01814" name="l01814"></a><span class="lineno"> 1814</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You untie your %s.&quot;</span> ), m.<a class="code hl_function" href="classmonster.html#ad4fba0b9aea36097d8b972e05e66d914">get_name</a>() );</div>
<div class="line"><a id="l01815" name="l01815"></a><span class="lineno"> 1815</span>        m.<a class="code hl_function" href="classCreature.html#a730fb8be5a540edd31ed9d8126ea20de">remove_effect</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#a09c667a72022d7e0ee0b851560831e04">effect_tied</a> );</div>
<div class="line"><a id="l01816" name="l01816"></a><span class="lineno"> 1816</span>        <span class="keywordflow">if</span>( m.<a class="code hl_variable" href="classmonster.html#a2881507933646bca97ef83c7112595ac">tied_item</a> ) {</div>
<div class="line"><a id="l01817" name="l01817"></a><span class="lineno"> 1817</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.i_add( *m.<a class="code hl_variable" href="classmonster.html#a2881507933646bca97ef83c7112595ac">tied_item</a> );</div>
<div class="line"><a id="l01818" name="l01818"></a><span class="lineno"> 1818</span>            m.<a class="code hl_variable" href="classmonster.html#a2881507933646bca97ef83c7112595ac">tied_item</a>.reset();</div>
<div class="line"><a id="l01819" name="l01819"></a><span class="lineno"> 1819</span>        }</div>
<div class="line"><a id="l01820" name="l01820"></a><span class="lineno"> 1820</span>    }</div>
<div class="line"><a id="l01821" name="l01821"></a><span class="lineno"> 1821</span>}</div>
<div class="ttc" id="aaction_8cpp_html_a46f5749dfc21d809440545cbaf02f8d0"><div class="ttname"><a href="action_8cpp.html#a46f5749dfc21d809440545cbaf02f8d0">choose_adjacent_highlight</a></div><div class="ttdeci">cata::optional&lt; tripoint &gt; choose_adjacent_highlight(const std::string &amp;message, const std::string &amp;failure_message, const action_id action, bool allow_vertical)</div><div class="ttdoc">Request player input of adjacent tile with highlighting, possibly on different z-level.</div><div class="ttdef"><b>Definition:</b> <a href="action_8cpp_source.html#l01015">action.cpp:1015</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a></div><div class="ttdeci">@ num_bp</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00053">bodypart.h:52</a></div></div>
<div class="ttc" id="aclassmonster_html_a0315651e596e69f0626b30e081726596"><div class="ttname"><a href="classmonster.html#a0315651e596e69f0626b30e081726596">monster::has_flag</a></div><div class="ttdeci">bool has_flag(m_flag f) const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00869">monster.cpp:869</a></div></div>
<div class="ttc" id="aclassmonster_html_a2881507933646bca97ef83c7112595ac"><div class="ttname"><a href="classmonster.html#a2881507933646bca97ef83c7112595ac">monster::tied_item</a></div><div class="ttdeci">cata::value_ptr&lt; item &gt; tied_item</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00461">monster.h:461</a></div></div>
<div class="ttc" id="aclassmonster_html_a45462fba4c37679c66ecde2f9000c22c"><div class="ttname"><a href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">monster::add_effect</a></div><div class="ttdeci">void add_effect(const efftype_id &amp;eff_id, const time_duration &amp;dur, const bodypart_str_id &amp;bp, int intensity=0, bool force=false, bool deferred=false) override</div><div class="ttdoc">Performs any monster-specific modifications to the arguments before passing to Creature::add_effect()...</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l01807">monster.cpp:1807</a></div></div>
<div class="ttc" id="aclassmonster_html_a4871f8fa2b4ba7577c80db7c5e88f291"><div class="ttname"><a href="classmonster.html#a4871f8fa2b4ba7577c80db7c5e88f291">monster::setpos</a></div><div class="ttdeci">void setpos(const tripoint &amp;p) override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00237">monster.cpp:237</a></div></div>
<div class="ttc" id="aclassmonster_html_a4e17d0d504a12d9b2e4de3e7a7503fff"><div class="ttname"><a href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">monster::friendly</a></div><div class="ttdeci">int friendly</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00471">monster.h:471</a></div></div>
<div class="ttc" id="aclassmonster_html_aa30f973bf524ba275ada847f6118b048"><div class="ttname"><a href="classmonster.html#aa30f973bf524ba275ada847f6118b048">monster::type</a></div><div class="ttdeci">const mtype * type</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00478">monster.h:478</a></div></div>
<div class="ttc" id="amtype_8h_html_afa4c966d04d2ddb261a7cde725eca842a1097ae8b398e54bff84b789e42ac8552"><div class="ttname"><a href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a1097ae8b398e54bff84b789e42ac8552">MF_PET_HARNESSABLE</a></div><div class="ttdeci">@ MF_PET_HARNESSABLE</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00165">mtype.h:165</a></div></div>
<div class="ttc" id="amtype_8h_html_afa4c966d04d2ddb261a7cde725eca842a7fc4359d031504695d92e93c9306aab1"><div class="ttname"><a href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a7fc4359d031504695d92e93c9306aab1">MF_PET_MOUNTABLE</a></div><div class="ttdeci">@ MF_PET_MOUNTABLE</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00164">mtype.h:164</a></div></div>
<div class="ttc" id="astructmtype_html_a541f9bf8c2e84856ea34db43f88991b3"><div class="ttname"><a href="structmtype.html#a541f9bf8c2e84856ea34db43f88991b3">mtype::bodytype</a></div><div class="ttdeci">bodytype_id bodytype</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00257">mtype.h:257</a></div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a09c667a72022d7e0ee0b851560831e04"><div class="ttname"><a href="vehicle__use_8cpp.html#a09c667a72022d7e0ee0b851560831e04">effect_tied</a></div><div class="ttdeci">static const efftype_id effect_tied(&quot;tied&quot;)</div></div>
<div class="ttc" id="avehicle__use_8cpp_html_a7697771dc47ecaeff36785ff20c9aa33"><div class="ttname"><a href="vehicle__use_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a></div><div class="ttdeci">static const efftype_id effect_harnessed(&quot;harnessed&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="monster_8cpp_source.html#l01807">monster::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="mtype_8h_source.html#l00257">mtype::bodytype</a>, <a class="el" href="action_8cpp_source.html#l01015">choose_adjacent_highlight()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00029">disp_name()</a>, <a class="el" href="vehicle__use_8cpp.html#a7697771dc47ecaeff36785ff20c9aa33">effect_harnessed</a>, <a class="el" href="vehicle__use_8cpp.html#a09c667a72022d7e0ee0b851560831e04">effect_tied</a>, <a class="el" href="monster_8h_source.html#l00471">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="monster_8cpp_source.html#l00487">monster::get_name()</a>, <a class="el" href="creature_8cpp_source.html#l01173">Creature::has_effect()</a>, <a class="el" href="monster_8cpp_source.html#l00869">monster::has_flag()</a>, <a class="el" href="enums_8h_source.html#l00258">m_info</a>, <a class="el" href="mtype_8h_source.html#l00165">MF_PET_HARNESSABLE</a>, <a class="el" href="mtype_8h_source.html#l00164">MF_PET_MOUNTABLE</a>, <a class="el" href="bodypart_8h_source.html#l00052">num_bp</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8cpp_source.html#l02875">part_flag()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8h_source.html#l01859">pos</a>, <a class="el" href="creature_8cpp_source.html#l01130">Creature::remove_effect()</a>, <a class="el" href="monster_8cpp_source.html#l00237">monster::setpos()</a>, <a class="el" href="monster_8h_source.html#l00461">monster::tied_item</a>, and <a class="el" href="monster_8h_source.html#l00478">monster::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>.</p>

</div>
</div>
<a id="a5b4729ccb92667a95c0682c31b4d44c4" name="a5b4729ccb92667a95c0682c31b4d44c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b4729ccb92667a95c0682c31b4d44c4">&#9670;&nbsp;</a></span>use_monster_capture()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::use_monster_capture </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>part</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01748">1748</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01749" name="l01749"></a><span class="lineno"> 1749</span>{</div>
<div class="line"><a id="l01750" name="l01750"></a><span class="lineno"> 1750</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].is_broken() || <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].removed ) {</div>
<div class="line"><a id="l01751" name="l01751"></a><span class="lineno"> 1751</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01752" name="l01752"></a><span class="lineno"> 1752</span>    }</div>
<div class="line"><a id="l01753" name="l01753"></a><span class="lineno"> 1753</span>    <a class="code hl_class" href="classitem.html">item</a> base = <a class="code hl_class" href="classitem.html">item</a>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].get_base() );</div>
<div class="line"><a id="l01754" name="l01754"></a><span class="lineno"> 1754</span>    base.<a class="code hl_variable" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code hl_function" href="structitype.html#a9df22ea5b5b6e19d18f730d4a8625cfa">invoke</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u, base, <a class="code hl_variable" href="classvehicle.html#a12844862e123c12dc923ca390becf79e">pos</a> );</div>
<div class="line"><a id="l01755" name="l01755"></a><span class="lineno"> 1755</span>    <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].set_base( base );</div>
<div class="line"><a id="l01756" name="l01756"></a><span class="lineno"> 1756</span>    <span class="keywordflow">if</span>( base.<a class="code hl_function" href="classitem.html#a478ecf81e48540e1ba39de33df968c43">has_var</a>( <span class="stringliteral">&quot;contained_name&quot;</span> ) ) {</div>
<div class="line"><a id="l01757" name="l01757"></a><span class="lineno"> 1757</span>        <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].set_flag( <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaaabd3365c4be9551a2c9a5b72039d04c3">vehicle_part::animal_flag</a> );</div>
<div class="line"><a id="l01758" name="l01758"></a><span class="lineno"> 1758</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01759" name="l01759"></a><span class="lineno"> 1759</span>        <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[<a class="code hl_function" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>].remove_flag( <a class="code hl_enumvalue" href="structvehicle__part.html#a6944258e64f01a23d5ea254ad2fe71eaaabd3365c4be9551a2c9a5b72039d04c3">vehicle_part::animal_flag</a> );</div>
<div class="line"><a id="l01760" name="l01760"></a><span class="lineno"> 1760</span>    }</div>
<div class="line"><a id="l01761" name="l01761"></a><span class="lineno"> 1761</span>    <a class="code hl_function" href="classvehicle.html#a8e8079a6591b3104191c881509f16d61">invalidate_mass</a>();</div>
<div class="line"><a id="l01762" name="l01762"></a><span class="lineno"> 1762</span>}</div>
<div class="ttc" id="aclassitem_html_a478ecf81e48540e1ba39de33df968c43"><div class="ttname"><a href="classitem.html#a478ecf81e48540e1ba39de33df968c43">item::has_var</a></div><div class="ttdeci">bool has_var(const std::string &amp;name) const</div><div class="ttdoc">Whether the variable is defined at all.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01067">item.cpp:1067</a></div></div>
<div class="ttc" id="aclassitem_html_ac1d2c4c33b8a499812f3437cb2fad742"><div class="ttname"><a href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">item::type</a></div><div class="ttdeci">const itype * type</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02156">item.h:2156</a></div></div>
<div class="ttc" id="astructitype_html_a9df22ea5b5b6e19d18f730d4a8625cfa"><div class="ttname"><a href="structitype.html#a9df22ea5b5b6e19d18f730d4a8625cfa">itype::invoke</a></div><div class="ttdeci">int invoke(player &amp;p, item &amp;it, const tripoint &amp;pos) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00105">itype.cpp:105</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l00193">vehicle_part::animal_flag</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="item_8cpp_source.html#l01067">item::has_var()</a>, <a class="el" href="vehicle_8cpp_source.html#l06778">invalidate_mass()</a>, <a class="el" href="itype_8cpp_source.html#l00105">itype::invoke()</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="vehicle_8h_source.html#l01859">pos</a>, and <a class="el" href="item_8h_source.html#l02156">item::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>.</p>

</div>
</div>
<a id="ad7ee1f39dba42cbe13f9afe26ffc8405" name="ad7ee1f39dba42cbe13f9afe26ffc8405"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7ee1f39dba42cbe13f9afe26ffc8405">&#9670;&nbsp;</a></span>use_washing_machine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vehicle::use_washing_machine </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__use_8cpp_source.html#l01606">1606</a> of file <a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01607" name="l01607"></a><span class="lineno"> 1607</span>{</div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span>    <span class="comment">// Get all the items that can be used as detergent</span></div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"> 1609</span>    <span class="keyword">const</span> <a class="code hl_class" href="classinventory.html">inventory</a> &amp;inv = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.crafting_inventory();</div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span>    std::vector&lt;const item *&gt; detergents = inv.<a class="code hl_function" href="classvisitable.html#a5b3c37fbe8209cab68aa26d3cc7f4300">items_with</a>( [inv]( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"> 1611</span>        <span class="keywordflow">return</span> it.<a class="code hl_function" href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">has_flag</a>( <span class="stringliteral">&quot;DETERGENT&quot;</span> ) &amp;&amp; inv.<a class="code hl_function" href="classinventory.html#a166c107e18ca4eea3ca2f37be350796c">has_charges</a>( it.<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>(), 5 );</div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span>    } );</div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span> </div>
<div class="line"><a id="l01614" name="l01614"></a><span class="lineno"> 1614</span>    <span class="keyword">auto</span> items = <a class="code hl_function" href="classvehicle.html#a983dd9db3cd64078b176a82289e0b260">get_items</a>( p );</div>
<div class="line"><a id="l01615" name="l01615"></a><span class="lineno"> 1615</span>    <span class="keyword">static</span> <span class="keyword">const</span> std::string filthy( <span class="stringliteral">&quot;FILTHY&quot;</span> );</div>
<div class="line"><a id="l01616" name="l01616"></a><span class="lineno"> 1616</span>    <span class="keywordtype">bool</span> filthy_items = std::all_of( items.begin(), items.end(), []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; i ) {</div>
<div class="line"><a id="l01617" name="l01617"></a><span class="lineno"> 1617</span>        return i.has_flag( filthy );</div>
<div class="line"><a id="l01618" name="l01618"></a><span class="lineno"> 1618</span>    } );</div>
<div class="line"><a id="l01619" name="l01619"></a><span class="lineno"> 1619</span> </div>
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"> 1620</span>    <span class="keywordtype">bool</span> cbms = std::any_of( items.begin(), items.end(), []( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp; i ) {</div>
<div class="line"><a id="l01621" name="l01621"></a><span class="lineno"> 1621</span>        return i.is_bionic();</div>
<div class="line"><a id="l01622" name="l01622"></a><span class="lineno"> 1622</span>    } );</div>
<div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span> </div>
<div class="line"><a id="l01624" name="l01624"></a><span class="lineno"> 1624</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].<a class="code hl_enumvalue" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a> ) {</div>
<div class="line"><a id="l01625" name="l01625"></a><span class="lineno"> 1625</span>        <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].enabled = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01626" name="l01626"></a><span class="lineno"> 1626</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a id="l01627" name="l01627"></a><span class="lineno"> 1627</span>                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You turn the washing machine off before it&#39;s finished the program, and open its lid.&quot;</span> ) );</div>
<div class="line"><a id="l01628" name="l01628"></a><span class="lineno"> 1628</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( items.empty() ) {</div>
<div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"> 1630</span>                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The washing machine is empty, there&#39;s no point in starting it.&quot;</span> ) );</div>
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"> 1631</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a> ) &lt; 24 &amp;&amp; <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a> ) &lt; 24 ) {</div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"> 1632</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You need 24 charges of water in tanks of the %s to fill the washing machine.&quot;</span> ),</div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span>                 <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"> 1634</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( detergents.empty() ) {</div>
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"> 1635</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You need 5 charges of a detergent for the washing machine.&quot;</span> ) );</div>
<div class="line"><a id="l01636" name="l01636"></a><span class="lineno"> 1636</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !filthy_items ) {</div>
<div class="line"><a id="l01637" name="l01637"></a><span class="lineno"> 1637</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a id="l01638" name="l01638"></a><span class="lineno"> 1638</span>                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You need to remove all non-filthy items from the washing machine to start the washing program.&quot;</span> ) );</div>
<div class="line"><a id="l01639" name="l01639"></a><span class="lineno"> 1639</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cbms ) {</div>
<div class="line"><a id="l01640" name="l01640"></a><span class="lineno"> 1640</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a id="l01641" name="l01641"></a><span class="lineno"> 1641</span>                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;CBMs can&#39;t be cleaned in a washing machine.  You need to remove them.&quot;</span> ) );</div>
<div class="line"><a id="l01642" name="l01642"></a><span class="lineno"> 1642</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01643" name="l01643"></a><span class="lineno"> 1643</span>        <a class="code hl_class" href="classuilist.html">uilist</a> detergent_selector;</div>
<div class="line"><a id="l01644" name="l01644"></a><span class="lineno"> 1644</span>        detergent_selector.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Use what detergent?&quot;</span> );</div>
<div class="line"><a id="l01645" name="l01645"></a><span class="lineno"> 1645</span> </div>
<div class="line"><a id="l01646" name="l01646"></a><span class="lineno"> 1646</span>        std::vector&lt;itype_id&gt; det_types;</div>
<div class="line"><a id="l01647" name="l01647"></a><span class="lineno"> 1647</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> *it : detergents ) {</div>
<div class="line"><a id="l01648" name="l01648"></a><span class="lineno"> 1648</span>            <a class="code hl_class" href="classstring__id.html">itype_id</a> det_type = it-&gt;<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>();</div>
<div class="line"><a id="l01649" name="l01649"></a><span class="lineno"> 1649</span>            <span class="comment">// If the vector does not contain the detergent type, add it</span></div>
<div class="line"><a id="l01650" name="l01650"></a><span class="lineno"> 1650</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacedetail.html#ad06b74f7502b63cbab323bba1ca3f72b">std::find</a>( det_types.begin(), det_types.end(), det_type ) == det_types.end() ) {</div>
<div class="line"><a id="l01651" name="l01651"></a><span class="lineno"> 1651</span>                det_types.emplace_back( det_type );</div>
<div class="line"><a id="l01652" name="l01652"></a><span class="lineno"> 1652</span>            }</div>
<div class="line"><a id="l01653" name="l01653"></a><span class="lineno"> 1653</span> </div>
<div class="line"><a id="l01654" name="l01654"></a><span class="lineno"> 1654</span>        }</div>
<div class="line"><a id="l01655" name="l01655"></a><span class="lineno"> 1655</span>        <span class="keywordtype">int</span> chosen_detergent = 0;</div>
<div class="line"><a id="l01656" name="l01656"></a><span class="lineno"> 1656</span>        <span class="comment">// If there&#39;s a choice to be made on what detergent to use, ask the player</span></div>
<div class="line"><a id="l01657" name="l01657"></a><span class="lineno"> 1657</span>        <span class="keywordflow">if</span>( det_types.size() &gt; 1 ) {</div>
<div class="line"><a id="l01658" name="l01658"></a><span class="lineno"> 1658</span>            <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0; i &lt; det_types.size(); ++i ) {</div>
<div class="line"><a id="l01659" name="l01659"></a><span class="lineno"> 1659</span>                detergent_selector.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( i, <span class="keyword">true</span>, 0, <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( det_types[i] ) );</div>
<div class="line"><a id="l01660" name="l01660"></a><span class="lineno"> 1660</span>            }</div>
<div class="line"><a id="l01661" name="l01661"></a><span class="lineno"> 1661</span>            detergent_selector.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( <a class="code hl_variable" href="ui_8h.html#ae8a811731dd950d56e478c3ddc17e725">UILIST_CANCEL</a>, <span class="keyword">true</span>, 0, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Cancel&quot;</span> ) );</div>
<div class="line"><a id="l01662" name="l01662"></a><span class="lineno"> 1662</span>            detergent_selector.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l01663" name="l01663"></a><span class="lineno"> 1663</span>            chosen_detergent = detergent_selector.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a id="l01664" name="l01664"></a><span class="lineno"> 1664</span>        }</div>
<div class="line"><a id="l01665" name="l01665"></a><span class="lineno"> 1665</span> </div>
<div class="line"><a id="l01666" name="l01666"></a><span class="lineno"> 1666</span>        <span class="comment">// If the player exits the menu, don&#39;t do anything else</span></div>
<div class="line"><a id="l01667" name="l01667"></a><span class="lineno"> 1667</span>        <span class="keywordflow">if</span>( chosen_detergent == <a class="code hl_variable" href="ui_8h.html#ae8a811731dd950d56e478c3ddc17e725">UILIST_CANCEL</a> ) {</div>
<div class="line"><a id="l01668" name="l01668"></a><span class="lineno"> 1668</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01669" name="l01669"></a><span class="lineno"> 1669</span>        }</div>
<div class="line"><a id="l01670" name="l01670"></a><span class="lineno"> 1670</span> </div>
<div class="line"><a id="l01671" name="l01671"></a><span class="lineno"> 1671</span>        <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[p].enabled = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01672" name="l01672"></a><span class="lineno"> 1672</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;n : items ) {</div>
<div class="line"><a id="l01673" name="l01673"></a><span class="lineno"> 1673</span>            n.set_age( 0_turns );</div>
<div class="line"><a id="l01674" name="l01674"></a><span class="lineno"> 1674</span>        }</div>
<div class="line"><a id="l01675" name="l01675"></a><span class="lineno"> 1675</span> </div>
<div class="line"><a id="l01676" name="l01676"></a><span class="lineno"> 1676</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a> ) &gt;= 24 ) {</div>
<div class="line"><a id="l01677" name="l01677"></a><span class="lineno"> 1677</span>            <a class="code hl_function" href="classvehicle.html#a2b28d63a4879b75d5a186289c54f6330">drain</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>, 24 );</div>
<div class="line"><a id="l01678" name="l01678"></a><span class="lineno"> 1678</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01679" name="l01679"></a><span class="lineno"> 1679</span>            <a class="code hl_function" href="classvehicle.html#a2b28d63a4879b75d5a186289c54f6330">drain</a>( <a class="code hl_variable" href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a>, 24 );</div>
<div class="line"><a id="l01680" name="l01680"></a><span class="lineno"> 1680</span>        }</div>
<div class="line"><a id="l01681" name="l01681"></a><span class="lineno"> 1681</span> </div>
<div class="line"><a id="l01682" name="l01682"></a><span class="lineno"> 1682</span>        std::vector&lt;item_comp&gt; detergent;</div>
<div class="line"><a id="l01683" name="l01683"></a><span class="lineno"> 1683</span>        detergent.push_back( <a class="code hl_struct" href="structitem__comp.html">item_comp</a>( det_types[chosen_detergent], 5 ) );</div>
<div class="line"><a id="l01684" name="l01684"></a><span class="lineno"> 1684</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.consume_items( detergent, 1, <a class="code hl_function" href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a> );</div>
<div class="line"><a id="l01685" name="l01685"></a><span class="lineno"> 1685</span> </div>
<div class="line"><a id="l01686" name="l01686"></a><span class="lineno"> 1686</span>        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a id="l01687" name="l01687"></a><span class="lineno"> 1687</span>                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You pour some detergent into the washing machine, close its lid, and turn it on.  The washing machine is being filled with water from vehicle tanks.&quot;</span> ) );</div>
<div class="line"><a id="l01688" name="l01688"></a><span class="lineno"> 1688</span>    }</div>
<div class="line"><a id="l01689" name="l01689"></a><span class="lineno"> 1689</span>}</div>
<div class="ttc" id="aclassinventory_html_a166c107e18ca4eea3ca2f37be350796c"><div class="ttname"><a href="classinventory.html#a166c107e18ca4eea3ca2f37be350796c">inventory::has_charges</a></div><div class="ttdeci">bool has_charges(const itype_id &amp;it, int quantity, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;) const</div><div class="ttdef"><b>Definition:</b> <a href="inventory_8cpp_source.html#l00883">inventory.cpp:883</a></div></div>
<div class="ttc" id="aclassitem_html_aa79dad64e1ef6347219be2f8666e2752"><div class="ttname"><a href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">item::typeId</a></div><div class="ttdeci">const itype_id &amp; typeId() const</div><div class="ttdoc">return the unique identifier of the items underlying type</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08196">item.cpp:8196</a></div></div>
<div class="ttc" id="aui_8h_html_ae8a811731dd950d56e478c3ddc17e725"><div class="ttname"><a href="ui_8h.html#ae8a811731dd950d56e478c3ddc17e725">UILIST_CANCEL</a></div><div class="ttdeci">const int UILIST_CANCEL</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00028">ui.h:28</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="ui_8cpp_source.html#l00932">uilist::addentry()</a>, <a class="el" href="vehicle_8cpp_source.html#l03246">drain()</a>, <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02caa10311459433adf322f2590a4987c423">enabled</a>, <a class="el" href="fmtlib__format_8h_source.html#l03355">detail::find()</a>, <a class="el" href="vehicle_8cpp_source.html#l03179">fuel_left()</a>, <a class="el" href="game_8cpp_source.html#l00267">g</a>, <a class="el" href="vehicle_8cpp_source.html#l05288">get_items()</a>, <a class="el" href="inventory_8cpp_source.html#l00883">inventory::has_charges()</a>, <a class="el" href="item_8cpp_source.html#l05192">item::has_flag()</a>, <a class="el" href="item_8h_source.html#l02275">is_crafting_component()</a>, <a class="el" href="visitable_8cpp_source.html#l00325">visitable&lt; T &gt;::items_with()</a>, <a class="el" href="vehicle__use_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>, <a class="el" href="vehicle__use_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a>, <a class="el" href="enums_8h_source.html#l00254">m_bad</a>, <a class="el" href="enums_8h_source.html#l00253">m_good</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="item_8cpp_source.html#l09749">item::nname()</a>, <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, <a class="el" href="ui_8cpp_source.html#l00828">uilist::query()</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="ui_8h_source.html#l00320">uilist::text</a>, <a class="el" href="item_8cpp_source.html#l08196">item::typeId()</a>, and <a class="el" href="ui_8h_source.html#l00028">UILIST_CANCEL</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>.</p>

</div>
</div>
<a id="a5a7109aaf54a3cc07ab71833637bfdce" name="a5a7109aaf54a3cc07ab71833637bfdce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a7109aaf54a3cc07ab71833637bfdce">&#9670;&nbsp;</a></span>valid_part()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::valid_part </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>part_num</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l06902">6902</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l06903" name="l06903"></a><span class="lineno"> 6903</span>{</div>
<div class="line"><a id="l06904" name="l06904"></a><span class="lineno"> 6904</span>    <span class="keywordflow">return</span> part_num &gt;= 0 &amp;&amp; part_num &lt; static_cast&lt;int&gt;( <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>.size() );</div>
<div class="line"><a id="l06905" name="l06905"></a><span class="lineno"> 6905</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01733">parts</a>.</p>

</div>
</div>
<a id="a578c681656be6b419c62799006008035" name="a578c681656be6b419c62799006008035"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a578c681656be6b419c62799006008035">&#9670;&nbsp;</a></span>valid_wheel_config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::valid_wheel_config </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l04279">4279</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l04280" name="l04280"></a><span class="lineno"> 4280</span>{</div>
<div class="line"><a id="l04281" name="l04281"></a><span class="lineno"> 4281</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classvehicle.html#a3e6f3f24ce6c6431dcc4b915d3a437ef">sufficient_wheel_config</a>() &amp;&amp; <a class="code hl_function" href="classvehicle.html#ada20634b6f5df98a1bd03b2af7e08d60">balanced_wheel_config</a>();</div>
<div class="line"><a id="l04282" name="l04282"></a><span class="lineno"> 4282</span>}</div>
<div class="ttc" id="aclassvehicle_html_a3e6f3f24ce6c6431dcc4b915d3a437ef"><div class="ttname"><a href="classvehicle.html#a3e6f3f24ce6c6431dcc4b915d3a437ef">vehicle::sufficient_wheel_config</a></div><div class="ttdeci">bool sufficient_wheel_config() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04140">vehicle.cpp:4140</a></div></div>
<div class="ttc" id="aclassvehicle_html_ada20634b6f5df98a1bd03b2af7e08d60"><div class="ttname"><a href="classvehicle.html#ada20634b6f5df98a1bd03b2af7e08d60">vehicle::balanced_wheel_config</a></div><div class="ttdeci">bool balanced_wheel_config() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l04260">vehicle.cpp:4260</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8cpp_source.html#l04260">balanced_wheel_config()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04140">sufficient_wheel_config()</a>.</p>

<p class="reference">Referenced by <a class="el" href="overmap__ui_8cpp_source.html#l01830">overmap_ui::get_overmap_path_to()</a>, <a class="el" href="grab_8cpp_source.html#l00021">game::grabbed_veh_move()</a>, <a class="el" href="vehicle_8cpp_source.html#l00386">init_state()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01061">pldrive()</a>, <a class="el" href="vehicle_8cpp_source.html#l05645">refresh_pivot()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00933">selfdrive()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>.</p>

</div>
</div>
<a id="ab1aa616008c1d4180e03c21d3b2ee218" name="ab1aa616008c1d4180e03c21d3b2ee218"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1aa616008c1d4180e03c21d3b2ee218">&#9670;&nbsp;</a></span>velo_vec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrl__vec2d.html">rl_vec2d</a> vehicle::velo_vec </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle__move_8cpp_source.html#l01195">1195</a> of file <a class="el" href="vehicle__move_8cpp_source.html">vehicle_move.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>{</div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>    <a class="code hl_struct" href="structrl__vec2d.html">rl_vec2d</a> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a320ca34b5c38568efd801731cef78a35">skidding</a> ) {</div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>        <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code hl_function" href="classvehicle.html#a0e308fcc9e8b3b08ccf622825e94c9cc">move_vec</a>();</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span>        <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code hl_function" href="classvehicle.html#a2bc8dfdab1fadc47966b0a69520c737c">face_vec</a>();</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span>    }</div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>    <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.normalized();</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span>    <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> * <a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a>;</div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle__move_8cpp_source.html#l01220">face_vec()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01214">move_vec()</a>, <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>, <a class="el" href="vehicle_8h_source.html#l01940">skidding</a>, and <a class="el" href="vehicle_8h_source.html#l01861">velocity</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l00741">map::vehicle_vehicle_collision()</a>.</p>

</div>
</div>
<a id="ac0c3e6e0d42b9e091fef6a799fd56b7a" name="ac0c3e6e0d42b9e091fef6a799fd56b7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0c3e6e0d42b9e091fef6a799fd56b7a">&#9670;&nbsp;</a></span>vhp_to_watts()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::vhp_to_watts </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>power</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l01230">1230</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span>{</div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>    <span class="comment">// Convert vhp units (0.5 HP ) to watts</span></div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>    <span class="comment">// Used primarily for calculating battery charge/discharge</span></div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>    <span class="comment">// TODO: convert batteries to use energy units based on watts (watt-ticks?)</span></div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>    <span class="keyword">constexpr</span> <span class="keywordtype">int</span> conversion_factor = 373; <span class="comment">// 373 watts == 1 power_vhp == 0.5 HP</span></div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>    <span class="keywordflow">return</span> power_vhp * conversion_factor;</div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l01149">part_vpower_w()</a>.</p>

</div>
</div>
<a id="abdeb5964519a588fa9be7f891e56cbfe" name="abdeb5964519a588fa9be7f891e56cbfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdeb5964519a588fa9be7f891e56cbfe">&#9670;&nbsp;</a></span>water_acceleration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::water_acceleration </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fueled</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>at_vel_in_vmi</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03406">3406</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03407" name="l03407"></a><span class="lineno"> 3407</span>{</div>
<div class="line"><a id="l03408" name="l03408"></a><span class="lineno"> 3408</span>    <span class="keywordflow">if</span>( !( <a class="code hl_variable" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> || <a class="code hl_variable" href="classvehicle.html#a320ca34b5c38568efd801731cef78a35">skidding</a> ) ) {</div>
<div class="line"><a id="l03409" name="l03409"></a><span class="lineno"> 3409</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l03410" name="l03410"></a><span class="lineno"> 3410</span>    }</div>
<div class="line"><a id="l03411" name="l03411"></a><span class="lineno"> 3411</span>    <span class="keywordtype">int</span> target_vmiph = std::max( at_vel_in_vmi, std::max( 1000,</div>
<div class="line"><a id="l03412" name="l03412"></a><span class="lineno"> 3412</span>                                 <a class="code hl_function" href="classvehicle.html#aa288156b4f46f46ba4791073cbaf4c1b">max_water_velocity</a>( fueled ) / 4 ) );</div>
<div class="line"><a id="l03413" name="l03413"></a><span class="lineno"> 3413</span>    <span class="keywordtype">int</span> cmps = <a class="code hl_function" href="vehicle_8h.html#ab3c28976bd7014b628437d061f7dc6c7">vmiph_to_cmps</a>( target_vmiph );</div>
<div class="line"><a id="l03414" name="l03414"></a><span class="lineno"> 3414</span>    <span class="keywordtype">double</span> weight = <a class="code hl_function" href="namespaceunits.html#afbf21a7601bd939c196667fc0b020111">to_kilogram</a>( <a class="code hl_function" href="classvehicle.html#a5a7d83716bf73d4b58d265b626872d01">total_mass</a>() );</div>
<div class="line"><a id="l03415" name="l03415"></a><span class="lineno"> 3415</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classvehicle.html#a40b149ccb2383cb1a263f3e3d88f3469">is_towing</a>() ) {</div>
<div class="line"><a id="l03416" name="l03416"></a><span class="lineno"> 3416</span>        <a class="code hl_class" href="classvehicle.html">vehicle</a> *other_veh = <a class="code hl_variable" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code hl_function" href="classtowing__data.html#a4cc6247530a16020db73b3af28e0024e">get_towed</a>();</div>
<div class="line"><a id="l03417" name="l03417"></a><span class="lineno"> 3417</span>        <span class="keywordflow">if</span>( other_veh ) {</div>
<div class="line"><a id="l03418" name="l03418"></a><span class="lineno"> 3418</span>            weight = weight + <a class="code hl_function" href="namespaceunits.html#afbf21a7601bd939c196667fc0b020111">to_kilogram</a>( other_veh-&gt;<a class="code hl_function" href="classvehicle.html#a5a7d83716bf73d4b58d265b626872d01">total_mass</a>() );</div>
<div class="line"><a id="l03419" name="l03419"></a><span class="lineno"> 3419</span>        }</div>
<div class="line"><a id="l03420" name="l03420"></a><span class="lineno"> 3420</span>    }</div>
<div class="line"><a id="l03421" name="l03421"></a><span class="lineno"> 3421</span>    <span class="keywordtype">int</span> engine_power_ratio = <a class="code hl_function" href="classvehicle.html#a73db9a09464720b32da8e3f214475a8e">total_power_w</a>( fueled ) / weight;</div>
<div class="line"><a id="l03422" name="l03422"></a><span class="lineno"> 3422</span>    <span class="keywordtype">int</span> accel_at_vel = 100 * 100 * engine_power_ratio / cmps;</div>
<div class="line"><a id="l03423" name="l03423"></a><span class="lineno"> 3423</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;%s: water accel at %d vimph is %d&quot;</span>, <a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, target_vmiph,</div>
<div class="line"><a id="l03424" name="l03424"></a><span class="lineno"> 3424</span>             <a class="code hl_function" href="vehicle_8h.html#a8001239e356cfe527444f6019ee90205">cmps_to_vmiph</a>( accel_at_vel ) );</div>
<div class="line"><a id="l03425" name="l03425"></a><span class="lineno"> 3425</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="vehicle_8h.html#a8001239e356cfe527444f6019ee90205">cmps_to_vmiph</a>( accel_at_vel );</div>
<div class="line"><a id="l03426" name="l03426"></a><span class="lineno"> 3426</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00077">cmps_to_vmiph()</a>, <a class="el" href="vehicle_8h_source.html#l01930">engine_on</a>, <a class="el" href="vehicle_8h_source.html#l00158">towing_data::get_towed()</a>, <a class="el" href="vehicle_8cpp_source.html#l05844">is_towing()</a>, <a class="el" href="enums_8h_source.html#l00264">m_debug</a>, <a class="el" href="vehicle_8cpp_source.html#l03524">max_water_velocity()</a>, <a class="el" href="vehicle_8h_source.html#l01792">name</a>, <a class="el" href="vehicle_8h_source.html#l01940">skidding</a>, <a class="el" href="units__mass_8h_source.html#l00073">units::to_kilogram()</a>, <a class="el" href="vehicle_8cpp_source.html#l03126">total_mass()</a>, <a class="el" href="vehicle_8cpp_source.html#l03333">total_power_w()</a>, <a class="el" href="vehicle_8h_source.html#l01887">tow_data</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00082">vmiph_to_cmps()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03462">acceleration()</a>, and <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>.</p>

</div>
</div>
<a id="ab66cf9a81dbebec6dbf6fbcfd1ae5cb9" name="ab66cf9a81dbebec6dbf6fbcfd1ae5cb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab66cf9a81dbebec6dbf6fbcfd1ae5cb9">&#9670;&nbsp;</a></span>water_draft()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double vehicle::water_draft </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>water draft in meters - how much of the vehicle's body is under water must be less than the hull height or the boat will sink at some point, also add boats with deep draft running around </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03966">3966</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03967" name="l03967"></a><span class="lineno"> 3967</span>{</div>
<div class="line"><a id="l03968" name="l03968"></a><span class="lineno"> 3968</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a3bf02329db46b5a5dda2a0b35b8147fc">coeff_water_dirty</a> ) {</div>
<div class="line"><a id="l03969" name="l03969"></a><span class="lineno"> 3969</span>        <a class="code hl_function" href="classvehicle.html#ae97aeac27584b839105a68f12eb1f7a1">coeff_water_drag</a>();</div>
<div class="line"><a id="l03970" name="l03970"></a><span class="lineno"> 3970</span>    }</div>
<div class="line"><a id="l03971" name="l03971"></a><span class="lineno"> 3971</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#a954d6ff52f6a111d01aa9700db89e941">draft_m</a>;</div>
<div class="line"><a id="l03972" name="l03972"></a><span class="lineno"> 3972</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01906">coeff_water_dirty</a>, <a class="el" href="vehicle_8cpp_source.html#l04047">coeff_water_drag()</a>, and <a class="el" href="vehicle_8h_source.html#l01727">draft_m</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>.</p>

</div>
</div>
<a id="a418620f2e2b16ad13145dc2731826fac" name="a418620f2e2b16ad13145dc2731826fac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a418620f2e2b16ad13145dc2731826fac">&#9670;&nbsp;</a></span>water_hull_height()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double vehicle::water_hull_height </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>watertight hull height in meters measures distance from bottom of vehicle to the point where the vehicle will start taking on water </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03958">3958</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03959" name="l03959"></a><span class="lineno"> 3959</span>{</div>
<div class="line"><a id="l03960" name="l03960"></a><span class="lineno"> 3960</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classvehicle.html#a3bf02329db46b5a5dda2a0b35b8147fc">coeff_water_dirty</a> ) {</div>
<div class="line"><a id="l03961" name="l03961"></a><span class="lineno"> 3961</span>        <a class="code hl_function" href="classvehicle.html#ae97aeac27584b839105a68f12eb1f7a1">coeff_water_drag</a>();</div>
<div class="line"><a id="l03962" name="l03962"></a><span class="lineno"> 3962</span>    }</div>
<div class="line"><a id="l03963" name="l03963"></a><span class="lineno"> 3963</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classvehicle.html#a8a1adee2a33275ecf3a31301a5ce88da">hull_height</a>;</div>
<div class="line"><a id="l03964" name="l03964"></a><span class="lineno"> 3964</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01906">coeff_water_dirty</a>, <a class="el" href="vehicle_8cpp_source.html#l04047">coeff_water_drag()</a>, and <a class="el" href="vehicle_8h_source.html#l01728">hull_height</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>.</p>

</div>
</div>
<a id="ab738fb6279eb3c198c96dfc2ff1207ff" name="ab738fb6279eb3c198c96dfc2ff1207ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab738fb6279eb3c198c96dfc2ff1207ff">&#9670;&nbsp;</a></span>wheel_area()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::wheel_area </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates the sum of the area under the wheels of the vehicle. </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8cpp_source.html#l03737">3737</a> of file <a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03738" name="l03738"></a><span class="lineno"> 3738</span>{</div>
<div class="line"><a id="l03739" name="l03739"></a><span class="lineno"> 3739</span>    <span class="keywordtype">int</span> total_area = 0;</div>
<div class="line"><a id="l03740" name="l03740"></a><span class="lineno"> 3740</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keywordtype">int</span> &amp;wheel_index : <a class="code hl_variable" href="classvehicle.html#a5c432c0da0ff47a483e3aa74548bd435">wheelcache</a> ) {</div>
<div class="line"><a id="l03741" name="l03741"></a><span class="lineno"> 3741</span>        total_area += <a class="code hl_variable" href="classvehicle.html#afac2bfaf9d2b400e9a9e171624f74c40">parts</a>[ wheel_index ].wheel_area();</div>
<div class="line"><a id="l03742" name="l03742"></a><span class="lineno"> 3742</span>    }</div>
<div class="line"><a id="l03743" name="l03743"></a><span class="lineno"> 3743</span> </div>
<div class="line"><a id="l03744" name="l03744"></a><span class="lineno"> 3744</span>    <span class="keywordflow">return</span> total_area;</div>
<div class="line"><a id="l03745" name="l03745"></a><span class="lineno"> 3745</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l01733">parts</a>, and <a class="el" href="vehicle_8h_source.html#l01761">wheelcache</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>, <a class="el" href="overmap__ui_8cpp_source.html#l01830">overmap_ui::get_overmap_path_to()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04097">k_traction()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a5a81aa92070897147fbed2c61bad4825" name="a5a81aa92070897147fbed2c61bad4825"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a81aa92070897147fbed2c61bad4825">&#9670;&nbsp;</a></span>active_autodrive_controller</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classvehicle_1_1autodrive__controller.html">autodrive_controller</a>&gt; vehicle::active_autodrive_controller</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01826">1826</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__autodrive_8cpp_source.html#l01206">do_autodrive()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l01123">get_debug_overlay_data()</a>, and <a class="el" href="vehicle__autodrive_8cpp_source.html#l01292">stop_autodriving()</a>.</p>

</div>
</div>
<a id="ad7894d7d5b3a20fb16927cd95d4d2a04" name="ad7894d7d5b3a20fb16927cd95d4d2a04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7894d7d5b3a20fb16927cd95d4d2a04">&#9670;&nbsp;</a></span>active_items</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classactive__item__cache.html">active_item_cache</a> vehicle::active_items</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01807">1807</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05209">add_item()</a>, <a class="el" href="vehicle_8cpp_source.html#l05168">make_active()</a>, <a class="el" href="map_8cpp_source.html#l04677">map::process_items_in_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l05271">remove_item()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06279">shift_parts()</a>.</p>

</div>
</div>
<a id="a6df763082e71eb21a793372711c907fa" name="a6df763082e71eb21a793372711c907fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6df763082e71eb21a793372711c907fa">&#9670;&nbsp;</a></span>alternator_load</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::alternator_load = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01847">1847</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05033">idle()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04594">update_alternator_load()</a>.</p>

</div>
</div>
<a id="ab4dee440f50b7e9a412faf4dab9796c0" name="ab4dee440f50b7e9a412faf4dab9796c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4dee440f50b7e9a412faf4dab9796c0">&#9670;&nbsp;</a></span>alternators</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; vehicle::alternators</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01751">1751</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l01097">is_alternator_on()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l04482">total_alternator_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l03333">total_power_w()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04594">update_alternator_load()</a>.</p>

</div>
</div>
<a id="acdbb2eec025972d86be23e90e9e92d22" name="acdbb2eec025972d86be23e90e9e92d22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdbb2eec025972d86be23e90e9e92d22">&#9670;&nbsp;</a></span>autodrive_local_target</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtripoint.html">tripoint</a> vehicle::autodrive_local_target = <a class="el" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01824">1824</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l00701">autopilot_patrol()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01104">enable_patrol()</a>, <a class="el" href="vehicle_8h_source.html#l00849">get_autodrive_target()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l01123">get_debug_overlay_data()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l01292">stop_autodriving()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00552">toggle_autopilot()</a>.</p>

</div>
</div>
<a id="ab0ffd12faf770950ee7d2493ffaf9bd0" name="ab0ffd12faf770950ee7d2493ffaf9bd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0ffd12faf770950ee7d2493ffaf9bd0">&#9670;&nbsp;</a></span>autopilot_on</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::autopilot_on = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01938">1938</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l05443">game::control_vehicle()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00285">cruise_thrust()</a>, <a class="el" href="vehicle_8cpp_source.html#l00816">drive_to_local_target()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01104">enable_patrol()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l01292">stop_autodriving()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00552">toggle_autopilot()</a>.</p>

</div>
</div>
<a id="a70a0f1b85b1b3eed228b92d7b70334b1" name="a70a0f1b85b1b3eed228b92d7b70334b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70a0f1b85b1b3eed228b92d7b70334b1">&#9670;&nbsp;</a></span>camera_on</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::camera_on = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01937">1937</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="lightmap_8cpp_source.html#l01224">map::build_seen_cache()</a>, <a class="el" href="vehicle_8cpp_source.html#l04619">power_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00266">set_electronics_menu_options()</a>, and <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>.</p>

</div>
</div>
<a id="ac82426b9ed349941fde4e5af18038735" name="ac82426b9ed349941fde4e5af18038735"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac82426b9ed349941fde4e5af18038735">&#9670;&nbsp;</a></span>check_environmental_effects</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::check_environmental_effects = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01942">1942</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05361">gain_moves()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00470">part_collision()</a>, and <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>.</p>

</div>
</div>
<a id="a62e8354926b0f973a2a0ec1db3deb997" name="a62e8354926b0f973a2a0ec1db3deb997"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62e8354926b0f973a2a0ec1db3deb997">&#9670;&nbsp;</a></span>coeff_air_changed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::coeff_air_changed = true</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01911">1911</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06437">damage_direct()</a>, <a class="el" href="vehicle_8cpp_source.html#l05459">enable_refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l01570">install_part()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01532">open_or_close()</a>, <a class="el" href="vehicle_8cpp_source.html#l01940">part_removal_cleanup()</a>, <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>, and <a class="el" href="vehicle_8cpp_source.html#l05446">suspend_refresh()</a>.</p>

</div>
</div>
<a id="ac1e6fe4cf22c08ceb542a7a3d515268b" name="ac1e6fe4cf22c08ceb542a7a3d515268b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1e6fe4cf22c08ceb542a7a3d515268b">&#9670;&nbsp;</a></span>coeff_air_dirty</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::coeff_air_dirty = true</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01905">1905</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03789">coeff_air_drag()</a>, <a class="el" href="vehicle_8cpp_source.html#l05459">enable_refresh()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01532">open_or_close()</a>, <a class="el" href="vehicle_8cpp_source.html#l01940">part_removal_cleanup()</a>, and <a class="el" href="vehicle_8cpp_source.html#l05446">suspend_refresh()</a>.</p>

</div>
</div>
<a id="a57285bb3b5dfda9f926bd3f99e3e1bad" name="a57285bb3b5dfda9f926bd3f99e3e1bad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57285bb3b5dfda9f926bd3f99e3e1bad">&#9670;&nbsp;</a></span>coeff_rolling_dirty</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::coeff_rolling_dirty = true</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01904">1904</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03928">coeff_rolling_drag()</a>, <a class="el" href="vehicle_8cpp_source.html#l05459">enable_refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l06778">invalidate_mass()</a>, and <a class="el" href="vehicle_8cpp_source.html#l05446">suspend_refresh()</a>.</p>

</div>
</div>
<a id="a3bf02329db46b5a5dda2a0b35b8147fc" name="a3bf02329db46b5a5dda2a0b35b8147fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bf02329db46b5a5dda2a0b35b8147fc">&#9670;&nbsp;</a></span>coeff_water_dirty</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::coeff_water_dirty = true</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01906">1906</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03974">can_float()</a>, <a class="el" href="vehicle_8cpp_source.html#l04047">coeff_water_drag()</a>, <a class="el" href="vehicle_8cpp_source.html#l05459">enable_refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l06778">invalidate_mass()</a>, <a class="el" href="vehicle_8cpp_source.html#l05446">suspend_refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l03966">water_draft()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03958">water_hull_height()</a>.</p>

</div>
</div>
<a id="a226257689cf48986271ad0969ab1741c" name="a226257689cf48986271ad0969ab1741c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a226257689cf48986271ad0969ab1741c">&#9670;&nbsp;</a></span>coefficient_air_resistance</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double vehicle::coefficient_air_resistance = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01724">1724</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03789">coeff_air_drag()</a>.</p>

</div>
</div>
<a id="a3ba73328e291117051f3a05b28dbd9c5" name="a3ba73328e291117051f3a05b28dbd9c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ba73328e291117051f3a05b28dbd9c5">&#9670;&nbsp;</a></span>coefficient_rolling_resistance</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double vehicle::coefficient_rolling_resistance = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01725">1725</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03928">coeff_rolling_drag()</a>.</p>

</div>
</div>
<a id="ace10be719ab1c8e5d86ff203a3298131" name="ace10be719ab1c8e5d86ff203a3298131"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace10be719ab1c8e5d86ff203a3298131">&#9670;&nbsp;</a></span>coefficient_water_resistance</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double vehicle::coefficient_water_resistance = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01726">1726</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04047">coeff_water_drag()</a>.</p>

</div>
</div>
<a id="a5ee50a8425f281ee825025aaf1ef2ba4" name="a5ee50a8425f281ee825025aaf1ef2ba4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ee50a8425f281ee825025aaf1ef2ba4">&#9670;&nbsp;</a></span>collision_check_points</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;<a class="el" href="structpoint.html">point</a>&gt; vehicle::collision_check_points</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l00845">845</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__autodrive_8cpp_source.html#l01123">get_debug_overlay_data()</a>, <a class="el" href="vehicle_8cpp_source.html#l00769">immediate_path()</a>, and <a class="el" href="vehicle__autodrive_8cpp_source.html#l01292">stop_autodriving()</a>.</p>

</div>
</div>
<a id="abdf6601268460dc437ef079590deb33b" name="abdf6601268460dc437ef079590deb33b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdf6601268460dc437ef079590deb33b">&#9670;&nbsp;</a></span>cruise_on</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::cruise_on = true</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01928">1928</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__autodrive_8cpp_source.html#l01206">do_autodrive()</a>, <a class="el" href="panels_8cpp_source.html#l01651">draw_health_classic()</a>, <a class="el" href="panels_8cpp_source.html#l01848">draw_veh_compact()</a>, <a class="el" href="panels_8cpp_source.html#l01880">draw_veh_padding()</a>, <a class="el" href="vehicle_8cpp_source.html#l05361">gain_moves()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01061">pldrive()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00933">selfdrive()</a>, <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l01292">stop_autodriving()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="af5c4cd455d31d1a9377ddad223cafe44" name="af5c4cd455d31d1a9377ddad223cafe44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5c4cd455d31d1a9377ddad223cafe44">&#9670;&nbsp;</a></span>cruise_velocity</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::cruise_velocity = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01863">1863</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l01332">game::calc_driving_offset()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00369">control_engines()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01230">crash_terrain_around()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00285">cruise_thrust()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l01206">do_autodrive()</a>, <a class="el" href="panels_8cpp_source.html#l01651">draw_health_classic()</a>, <a class="el" href="panels_8cpp_source.html#l01848">draw_veh_compact()</a>, <a class="el" href="panels_8cpp_source.html#l01880">draw_veh_padding()</a>, <a class="el" href="vehicle_8cpp_source.html#l05361">gain_moves()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00144">handbrake()</a>, <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l01292">stop_autodriving()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>.</p>

</div>
</div>
<a id="a954d6ff52f6a111d01aa9700db89e941" name="a954d6ff52f6a111d01aa9700db89e941"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a954d6ff52f6a111d01aa9700db89e941">&#9670;&nbsp;</a></span>draft_m</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double vehicle::draft_m = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01727">1727</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03974">can_float()</a>, <a class="el" href="vehicle_8cpp_source.html#l04047">coeff_water_drag()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03966">water_draft()</a>.</p>

</div>
</div>
<a id="aa5bbcf289b67336d6cd7de031517c1ea" name="aa5bbcf289b67336d6cd7de031517c1ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5bbcf289b67336d6cd7de031517c1ea">&#9670;&nbsp;</a></span>emitters</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; vehicle::emitters</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01759">1759</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06764">process_emitters()</a>, and <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>.</p>

</div>
</div>
<a id="a0ccf22f114d5d8f239ebe58f5c8f70ad" name="a0ccf22f114d5d8f239ebe58f5c8f70ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ccf22f114d5d8f239ebe58f5c8f70ad">&#9670;&nbsp;</a></span>engine_on</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::engine_on = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01930">1930</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l00683">activate_animal_follow()</a>, <a class="el" href="vehicle_8cpp_source.html#l00669">activate_magical_follow()</a>, <a class="el" href="vehicle_8cpp_source.html#l03318">consumption_per_hour()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00369">control_engines()</a>, <a class="el" href="game_8cpp_source.html#l05443">game::control_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l03375">ground_acceleration()</a>, <a class="el" href="vehicle_8cpp_source.html#l05033">idle()</a>, <a class="el" href="vehicle_8cpp_source.html#l00386">init_state()</a>, <a class="el" href="vehicle_8cpp_source.html#l03644">noise_and_smoke()</a>, <a class="el" href="vehicle_8cpp_source.html#l04619">power_parts()</a>, <a class="el" href="map_8cpp_source.html#l04677">map::process_items_in_vehicle()</a>, <a class="el" href="iuse_8cpp_source.html#l08258">iuse::remoteveh()</a>, <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l03396">rotor_acceleration()</a>, <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l02356">activity_handlers::start_engines_finish()</a>, <a class="el" href="vehicle_8cpp_source.html#l04121">static_drag()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01033">stop_engines()</a>, <a class="el" href="npctalk_8cpp_source.html#l00376">tell_magic_veh_stop_following()</a>, <a class="el" href="npctalk_8cpp_source.html#l00339">tell_veh_stop_following()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>, <a class="el" href="vehicle_8cpp_source.html#l04482">total_alternator_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04496">total_engine_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04594">update_alternator_load()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03406">water_acceleration()</a>.</p>

</div>
</div>
<a id="a31bcfe9c61adc2fe500315a59e1bb690" name="a31bcfe9c61adc2fe500315a59e1bb690"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31bcfe9c61adc2fe500315a59e1bb690">&#9670;&nbsp;</a></span>engines</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; vehicle::engines</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01752">1752</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l01126">backfire()</a>, <a class="el" href="vehicle_8cpp_source.html#l03297">basic_consumption()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00369">control_engines()</a>, <a class="el" href="vehicle_8cpp_source.html#l05018">do_engine_damage()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00885">engine_cold_factor()</a>, <a class="el" href="vehicle_8cpp_source.html#l03230">engine_fuel_left()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00899">engine_start_time()</a>, <a class="el" href="vehicle_8cpp_source.html#l04340">fuel_usage()</a>, <a class="el" href="vehicle_8cpp_source.html#l01050">has_engine_conflict()</a>, <a class="el" href="vehicle_8cpp_source.html#l01031">has_engine_type()</a>, <a class="el" href="vehicle_8cpp_source.html#l01040">has_engine_type_not()</a>, <a class="el" href="vehicle_8cpp_source.html#l01097">is_alternator_on()</a>, <a class="el" href="vehicle_8cpp_source.html#l01087">is_engine_on()</a>, <a class="el" href="vehicle_8cpp_source.html#l01075">is_engine_type()</a>, <a class="el" href="vehicle_8cpp_source.html#l01081">is_perpetual_type()</a>, <a class="el" href="vehicle_8cpp_source.html#l03644">noise_and_smoke()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00343">print_fuel_indicators()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00433">select_engine()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00918">start_engine()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01055">start_engines()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l02356">activity_handlers::start_engines_finish()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01033">stop_engines()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>, <a class="el" href="vehicle_8cpp_source.html#l01018">toggle_specific_engine()</a>, <a class="el" href="vehicle_8cpp_source.html#l04496">total_engine_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l03333">total_power_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04594">update_alternator_load()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="afd5333bdd6640697f0202b652621c6e2" name="afd5333bdd6640697f0202b652621c6e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd5333bdd6640697f0202b652621c6e2">&#9670;&nbsp;</a></span>extra_drag</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::extra_drag = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01877">1877</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l04121">static_drag()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04594">update_alternator_load()</a>.</p>

</div>
</div>
<a id="a8e021d197980bbed36ff3c43962df957" name="a8e021d197980bbed36ff3c43962df957"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e021d197980bbed36ff3c43962df957">&#9670;&nbsp;</a></span>face</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtileray.html">tileray</a> vehicle::face</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01891">1891</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02986">veh_interact::complete_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l05745">do_towing_move()</a>, <a class="el" href="map_8cpp_source.html#l06046">map::draw_from_above()</a>, <a class="el" href="panels_8cpp_source.html#l01651">draw_health_classic()</a>, <a class="el" href="editmap_8cpp_source.html#l00503">editmap::draw_main_ui_overlay()</a>, <a class="el" href="map_8cpp_source.html#l05855">map::draw_maptile()</a>, <a class="el" href="panels_8cpp_source.html#l01848">draw_veh_compact()</a>, <a class="el" href="panels_8cpp_source.html#l01880">draw_veh_padding()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01220">face_vec()</a>, <a class="el" href="lightmap_8cpp_source.html#l00369">map::generate_lightmap()</a>, <a class="el" href="vehicle_8cpp_source.html#l06849">get_bounding_box()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l01123">get_debug_overlay_data()</a>, <a class="el" href="grab_8cpp_source.html#l00021">game::grabbed_veh_move()</a>, <a class="el" href="vehicle_8cpp_source.html#l00769">immediate_path()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01850">vehicle_movement::is_on_rails()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00835">make_start_node()</a>, <a class="el" href="vehicle_8cpp_source.html#l01654">merge_rackable_vehicle()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="game_8cpp_source.html#l05412">game::moving_vehicle_dismount()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01158">possibly_recover_from_skid()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01768">vehicle_movement::process_movement_on_rails()</a>, <a class="el" href="vehicle_8cpp_source.html#l02004">remove_carried_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l06547">restore()</a>, <a class="el" href="monmove_8cpp_source.html#l02021">monster::shove_vehicle()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00087">slowdown()</a>, <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00338">stop()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>, <a class="el" href="vehicle_8cpp_source.html#l00251">vehicle()</a>, and <a class="el" href="npc_8cpp_source.html#l01370">npc::vehicle_danger()</a>.</p>

</div>
</div>
<a id="ae94902df801fd06056734d05ea98aa0f" name="ae94902df801fd06056734d05ea98aa0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae94902df801fd06056734d05ea98aa0f">&#9670;&nbsp;</a></span>floating</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; vehicle::floating</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01767">1767</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, <a class="el" href="vehicle_8cpp_source.html#l04047">coeff_water_drag()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, and <a class="el" href="veh__interact_8cpp_source.html#l02322">wheel_state_description()</a>.</p>

</div>
</div>
<a id="acfae2101cfd7f4b68d64157d8d6e0a4a" name="acfae2101cfd7f4b68d64157d8d6e0a4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfae2101cfd7f4b68d64157d8d6e0a4a">&#9670;&nbsp;</a></span>front_left</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpoint.html">point</a> vehicle::front_left</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01885">1885</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l00769">immediate_path()</a>, and <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>.</p>

</div>
</div>
<a id="a94fa253f6f0ceedf40843bd249eca56e" name="a94fa253f6f0ceedf40843bd249eca56e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94fa253f6f0ceedf40843bd249eca56e">&#9670;&nbsp;</a></span>front_right</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpoint.html">point</a> vehicle::front_right</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01886">1886</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l00769">immediate_path()</a>, and <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>.</p>

</div>
</div>
<a id="a575c37830326826ac7421382652b2f5d" name="a575c37830326826ac7421382652b2f5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a575c37830326826ac7421382652b2f5d">&#9670;&nbsp;</a></span>fuel_remainder</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, float&gt; vehicle::fuel_remainder</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01804">1804</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04400">consume_fuel()</a>.</p>

</div>
</div>
<a id="ad9047841099276d5de5a6771be72233a" name="ad9047841099276d5de5a6771be72233a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9047841099276d5de5a6771be72233a">&#9670;&nbsp;</a></span>fuel_used_last_turn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>, float&gt; vehicle::fuel_used_last_turn</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01805">1805</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04400">consume_fuel()</a>, <a class="el" href="vehicle_8cpp_source.html#l05361">gain_moves()</a>, and <a class="el" href="vehicle__display_8cpp_source.html#l00343">print_fuel_indicators()</a>.</p>

</div>
</div>
<a id="a64509695c74d33dbccf7a6d10e7fcbb0" name="a64509695c74d33dbccf7a6d10e7fcbb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64509695c74d33dbccf7a6d10e7fcbb0">&#9670;&nbsp;</a></span>funnels</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; vehicle::funnels</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01758">1758</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06657">update_time()</a>.</p>

</div>
</div>
<a id="a8a1adee2a33275ecf3a31301a5ce88da" name="a8a1adee2a33275ecf3a31301a5ce88da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a1adee2a33275ecf3a31301a5ce88da">&#9670;&nbsp;</a></span>hull_height</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double vehicle::hull_height = 0.3</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01728">1728</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03974">can_float()</a>, <a class="el" href="vehicle_8cpp_source.html#l04047">coeff_water_drag()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03958">water_hull_height()</a>.</p>

</div>
</div>
<a id="a3cfee06c49af306085cad6bbf3326319" name="a3cfee06c49af306085cad6bbf3326319"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cfee06c49af306085cad6bbf3326319">&#9670;&nbsp;</a></span>in_water</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::in_water = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01915">1915</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01461">check_falling_or_floating()</a>, <a class="el" href="vehicle_8cpp_source.html#l04042">is_in_water()</a>, <a class="el" href="vehicle_8cpp_source.html#l04037">is_watercraft()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>.</p>

</div>
</div>
<a id="a42aa0af38e1a54ca47855c9231aa1457" name="a42aa0af38e1a54ca47855c9231aa1457"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42aa0af38e1a54ca47855c9231aa1457">&#9670;&nbsp;</a></span>insides_dirty</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::insides_dirty = true</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01944">1944</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06437">damage_direct()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01532">open_or_close()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06106">refresh_insides()</a>.</p>

</div>
</div>
<a id="a949775a37c7daa7a6b67e510f548bca3" name="a949775a37c7daa7a6b67e510f548bca3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a949775a37c7daa7a6b67e510f548bca3">&#9670;&nbsp;</a></span>is_alarm_on</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_alarm_on = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01936">1936</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l01435">alarm()</a>, <a class="el" href="iuse_8cpp_source.html#l08161">hackveh()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l01786">activity_handlers::hotwire_finish()</a>, <a class="el" href="vehicle_8cpp_source.html#l05033">idle()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00454">interact_vehicle_locked()</a>, <a class="el" href="vehicle_8cpp_source.html#l04619">power_parts()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00492">smash_security_system()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="ad95f42088a5fceef3fc215336649b4ee" name="ad95f42088a5fceef3fc215336649b4ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad95f42088a5fceef3fc215336649b4ee">&#9670;&nbsp;</a></span>is_autodriving</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_autodriving = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01923">1923</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l05443">game::control_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l06437">damage_direct()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l01206">do_autodrive()</a>, <a class="el" href="activity__actor_8cpp_source.html#l00321">autodrive_activity_actor::start()</a>, and <a class="el" href="vehicle__autodrive_8cpp_source.html#l01292">stop_autodriving()</a>.</p>

</div>
</div>
<a id="aeafb913ad9b9d1341d51a4c51ba43a06" name="aeafb913ad9b9d1341d51a4c51ba43a06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeafb913ad9b9d1341d51a4c51ba43a06">&#9670;&nbsp;</a></span>is_falling</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_falling = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01946">1946</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01461">check_falling_or_floating()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00354">collision()</a>, <a class="el" href="vehicle_8cpp_source.html#l05361">gain_moves()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00087">slowdown()</a>.</p>

</div>
</div>
<a id="ae3cbbbb890aa9a12504ec3458746f3e1" name="ae3cbbbb890aa9a12504ec3458746f3e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3cbbbb890aa9a12504ec3458746f3e1">&#9670;&nbsp;</a></span>is_floating</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_floating = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01913">1913</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01461">check_falling_or_floating()</a>, <a class="el" href="vehicle_8cpp_source.html#l04042">is_in_water()</a>, <a class="el" href="vehicle_8cpp_source.html#l04037">is_watercraft()</a>, <a class="el" href="vehicle_8cpp_source.html#l04097">k_traction()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00087">slowdown()</a>, <a class="el" href="vehicle_8cpp_source.html#l04284">steering_effectiveness()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>.</p>

</div>
</div>
<a id="a0a35b7f917fdb08e70a78315cc968f86" name="a0a35b7f917fdb08e70a78315cc968f86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a35b7f917fdb08e70a78315cc968f86">&#9670;&nbsp;</a></span>is_flying</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_flying = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01917">1917</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03462">acceleration()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01461">check_falling_or_floating()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00985">check_is_heli_landed()</a>, <a class="el" href="vehicle_8cpp_source.html#l04027">is_flying_in_air()</a>, <a class="el" href="vehicle_8cpp_source.html#l04097">k_traction()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01413">level_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l03543">max_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l03396">rotor_acceleration()</a>, <a class="el" href="vehicle_8cpp_source.html#l03593">safe_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l04032">set_flying()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00087">slowdown()</a>, <a class="el" href="vehicle_8cpp_source.html#l04284">steering_effectiveness()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>.</p>

</div>
</div>
<a id="a26f98c384048e03538bca10e4f26905d" name="a26f98c384048e03538bca10e4f26905d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26f98c384048e03538bca10e4f26905d">&#9670;&nbsp;</a></span>is_following</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_following = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01924">1924</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l00683">activate_animal_follow()</a>, <a class="el" href="vehicle_8cpp_source.html#l00669">activate_magical_follow()</a>, <a class="el" href="game_8cpp_source.html#l01751">game::autopilot_vehicles()</a>, <a class="el" href="game_8cpp_source.html#l05443">game::control_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l05361">gain_moves()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00933">selfdrive()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l01292">stop_autodriving()</a>, <a class="el" href="npctalk_8cpp_source.html#l00376">tell_magic_veh_stop_following()</a>, <a class="el" href="npctalk_8cpp_source.html#l00339">tell_veh_stop_following()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00552">toggle_autopilot()</a>.</p>

</div>
</div>
<a id="a61be41a90435acf77c1c078c2966643b" name="a61be41a90435acf77c1c078c2966643b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61be41a90435acf77c1c078c2966643b">&#9670;&nbsp;</a></span>is_locked</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_locked = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01934">1934</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse_8cpp_source.html#l08161">hackveh()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l01786">activity_handlers::hotwire_finish()</a>, <a class="el" href="vehicle_8cpp_source.html#l00386">init_state()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00454">interact_vehicle_locked()</a>.</p>

</div>
</div>
<a id="a2bbb34d03303f8e298a26ab614f35adc" name="a2bbb34d03303f8e298a26ab614f35adc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bbb34d03303f8e298a26ab614f35adc">&#9670;&nbsp;</a></span>is_on_ramp</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_on_ramp = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01921">1921</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l01098">map::displace_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l05361">gain_moves()</a>, and <a class="el" href="handle__action_8cpp_source.html#l00439">pldrive()</a>.</p>

</div>
</div>
<a id="a953fed1abe9bacc2a7c98cee6425c5b2" name="a953fed1abe9bacc2a7c98cee6425c5b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a953fed1abe9bacc2a7c98cee6425c5b2">&#9670;&nbsp;</a></span>is_patrolling</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::is_patrolling = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01925">1925</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l00701">autopilot_patrol()</a>, <a class="el" href="game_8cpp_source.html#l01751">game::autopilot_vehicles()</a>, <a class="el" href="game_8cpp_source.html#l05443">game::control_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l00816">drive_to_local_target()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01104">enable_patrol()</a>, <a class="el" href="vehicle_8cpp_source.html#l05361">gain_moves()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l01292">stop_autodriving()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00552">toggle_autopilot()</a>.</p>

</div>
</div>
<a id="a7c2d668e2b8f48a53f5c5e94aa2bd408" name="a7c2d668e2b8f48a53f5c5e94aa2bd408"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c2d668e2b8f48a53f5c5e94aa2bd408">&#9670;&nbsp;</a></span>labels</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;<a class="el" href="structlabel.html">label</a>&gt; vehicle::labels</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01801">1801</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l02619">vpart_position::get_label()</a>, <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l02632">vpart_position::set_label()</a>, <a class="el" href="vehicle_8cpp_source.html#l06279">shift_parts()</a>, and <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>.</p>

</div>
</div>
<a id="a10fc2ae6531f87ae9e7f304ec6ec811e" name="a10fc2ae6531f87ae9e7f304ec6ec811e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10fc2ae6531f87ae9e7f304ec6ec811e">&#9670;&nbsp;</a></span>last_fluid_check</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtime__point.html">time_point</a> vehicle::last_fluid_check = <a class="el" href="namespacecalendar.html#a2ad145a605c70358e73fdd4a802ba21a">calendar::turn_zero</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01879">1879</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>.</p>

</div>
</div>
<a id="a3d4d97e9ca8cb2642001f8f61df500d5" name="a3d4d97e9ca8cb2642001f8f61df500d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d4d97e9ca8cb2642001f8f61df500d5">&#9670;&nbsp;</a></span>last_turn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">units::angle</a> vehicle::last_turn = 0_degrees</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01872">1872</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00144">handbrake()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01158">possibly_recover_from_skid()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00338">stop()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00324">turn()</a>.</p>

</div>
</div>
<a id="a987b54408280dc6a74da8c857907faf2" name="a987b54408280dc6a74da8c857907faf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a987b54408280dc6a74da8c857907faf2">&#9670;&nbsp;</a></span>last_update</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtime__point.html">time_point</a> vehicle::last_update = <a class="el" href="namespacecalendar.html#ae25f99fbff61e25df40b5b26bcedee8c">calendar::before_time_starts</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01851">1851</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l00386">init_state()</a>, <a class="el" href="vehicle_8cpp_source.html#l06547">restore()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06657">update_time()</a>.</p>

</div>
</div>
<a id="afd84ace26c98ea5025d6a7cbbfff66e1" name="afd84ace26c98ea5025d6a7cbbfff66e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd84ace26c98ea5025d6a7cbbfff66e1">&#9670;&nbsp;</a></span>loose_parts</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; vehicle::loose_parts</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01760">1760</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05361">gain_moves()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l06067">shed_loose_parts()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04802">distribution_graph::traverse()</a>.</p>

</div>
</div>
<a id="a90b6f438b5ae343dab2b131c64293584" name="a90b6f438b5ae343dab2b131c64293584"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90b6f438b5ae343dab2b131c64293584">&#9670;&nbsp;</a></span>loot_zones</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_multimap&lt;<a class="el" href="structpoint.html">point</a>, <a class="el" href="classzone__data.html">zone_data</a>&gt; vehicle::loot_zones</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01806">1806</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="clzones_8cpp_source.html#l00960">zone_manager::create_vehicle_loot_zone()</a>, <a class="el" href="vehicle_8cpp_source.html#l01654">merge_rackable_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l06971">refresh_zones()</a>, <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l06279">shift_parts()</a>, and <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>.</p>

</div>
</div>
<a id="a506fb7b0a17c1578498599e14c173710" name="a506fb7b0a17c1578498599e14c173710"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a506fb7b0a17c1578498599e14c173710">&#9670;&nbsp;</a></span>magic</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::magic = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01809">1809</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06338">break_off()</a>, <a class="el" href="game_8cpp_source.html#l05272">game::exam_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00933">selfdrive()</a>, <a class="el" href="vehicle_8cpp_source.html#l06067">shed_loose_parts()</a>, <a class="el" href="npctalk_8cpp_source.html#l00376">tell_magic_veh_stop_following()</a>, and <a class="el" href="npctalk_8cpp_source.html#l00360">tell_magic_veh_to_follow()</a>.</p>

</div>
</div>
<a id="a4b083d16089ec28b00bfe19a53cf90d6" name="a4b083d16089ec28b00bfe19a53cf90d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b083d16089ec28b00bfe19a53cf90d6">&#9670;&nbsp;</a></span>mass_cache</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceunits.html#af4f3159f510e2b4372187d8fb4746e23">units::mass</a> vehicle::mass_cache</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01814">1814</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06794">calc_mass_center()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03126">total_mass()</a>.</p>

</div>
</div>
<a id="ade9fbb951e5a6ab5e65708aeef3cb4e2" name="ade9fbb951e5a6ab5e65708aeef3cb4e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade9fbb951e5a6ab5e65708aeef3cb4e2">&#9670;&nbsp;</a></span>mass_center_no_precalc</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpoint.html">point</a> vehicle::mass_center_no_precalc</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01823">1823</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06794">calc_mass_center()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03155">local_center_of_mass()</a>.</p>

</div>
</div>
<a id="afa84e5e990b66ac1cedeba291ddc6028" name="afa84e5e990b66ac1cedeba291ddc6028"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa84e5e990b66ac1cedeba291ddc6028">&#9670;&nbsp;</a></span>mass_center_no_precalc_dirty</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::mass_center_no_precalc_dirty = true</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01902">1902</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06794">calc_mass_center()</a>, <a class="el" href="vehicle_8cpp_source.html#l05459">enable_refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l06778">invalidate_mass()</a>, <a class="el" href="vehicle_8cpp_source.html#l03155">local_center_of_mass()</a>, and <a class="el" href="vehicle_8cpp_source.html#l05446">suspend_refresh()</a>.</p>

</div>
</div>
<a id="a1a55c996486f67a46b7978f13cd1d0e1" name="a1a55c996486f67a46b7978f13cd1d0e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a55c996486f67a46b7978f13cd1d0e1">&#9670;&nbsp;</a></span>mass_center_precalc</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpoint.html">point</a> vehicle::mass_center_precalc</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01822">1822</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06794">calc_mass_center()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03147">rotated_center_of_mass()</a>.</p>

</div>
</div>
<a id="a908223c2d250ba23fdbff51379cf2213" name="a908223c2d250ba23fdbff51379cf2213"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a908223c2d250ba23fdbff51379cf2213">&#9670;&nbsp;</a></span>mass_center_precalc_dirty</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::mass_center_precalc_dirty = true</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01901">1901</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06794">calc_mass_center()</a>, <a class="el" href="vehicle_8cpp_source.html#l05459">enable_refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l06778">invalidate_mass()</a>, and <a class="el" href="vehicle_8cpp_source.html#l05446">suspend_refresh()</a>.</p>

</div>
</div>
<a id="ac9c7234d3c2f5f0c42cc57b0931d21a6" name="ac9c7234d3c2f5f0c42cc57b0931d21a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9c7234d3c2f5f0c42cc57b0931d21a6">&#9670;&nbsp;</a></span>mass_dirty</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::mass_dirty = true</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01900">1900</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06794">calc_mass_center()</a>, <a class="el" href="vehicle_8cpp_source.html#l05459">enable_refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l06778">invalidate_mass()</a>, <a class="el" href="vehicle_8cpp_source.html#l05446">suspend_refresh()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03126">total_mass()</a>.</p>

</div>
</div>
<a id="a93c1c8baa5cd7ee79039fd5c7226b24e" name="a93c1c8baa5cd7ee79039fd5c7226b24e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93c1c8baa5cd7ee79039fd5c7226b24e">&#9670;&nbsp;</a></span>mount_max</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpoint.html">point</a> vehicle::mount_max</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01820">1820</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03789">coeff_air_drag()</a>, <a class="el" href="vehicle_8cpp_source.html#l04047">coeff_water_drag()</a>, <a class="el" href="vehicle_8cpp_source.html#l00816">drive_to_local_target()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, and <a class="el" href="vehicle_8cpp_source.html#l05906">set_tow_directions()</a>.</p>

</div>
</div>
<a id="ad62e7dec9def6c6fcc23f2d7b8e51963" name="ad62e7dec9def6c6fcc23f2d7b8e51963"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad62e7dec9def6c6fcc23f2d7b8e51963">&#9670;&nbsp;</a></span>mount_min</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpoint.html">point</a> vehicle::mount_min</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01821">1821</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03789">coeff_air_drag()</a>, <a class="el" href="vehicle_8cpp_source.html#l04047">coeff_water_drag()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, and <a class="el" href="vehicle_8cpp_source.html#l05906">set_tow_directions()</a>.</p>

</div>
</div>
<a id="a8bbdfb41ea75fdc007feab08e2137aa2" name="a8bbdfb41ea75fdc007feab08e2137aa2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bbdfb41ea75fdc007feab08e2137aa2">&#9670;&nbsp;</a></span>move</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtileray.html">tileray</a> vehicle::move</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01893">1893</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, <a class="el" href="vehicle_8cpp_source.html#l05745">do_towing_move()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01214">move_vec()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00470">part_collision()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01061">pldrive()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01158">possibly_recover_from_skid()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00933">selfdrive()</a>, <a class="el" href="monmove_8cpp_source.html#l02021">monster::shove_vehicle()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00087">slowdown()</a>, <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00338">stop()</a>, <a class="el" href="vehicle_8cpp_source.html#l00251">vehicle()</a>, and <a class="el" href="map_8cpp_source.html#l00741">map::vehicle_vehicle_collision()</a>.</p>

</div>
</div>
<a id="a441fa41f264fb7bc45df81d71244a0d1" name="a441fa41f264fb7bc45df81d71244a0d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a441fa41f264fb7bc45df81d71244a0d1">&#9670;&nbsp;</a></span>name</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string vehicle::name</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01792">1792</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00100">add_toggle_to_opts()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l00609">overmapbuffer::add_vehicle()</a>, <a class="el" href="turret_8cpp_source.html#l00542">automatic_fire_turret()</a>, <a class="el" href="vehicle_8cpp_source.html#l01126">backfire()</a>, <a class="el" href="vehicle_8cpp_source.html#l06338">break_off()</a>, <a class="el" href="vehicle__group_8cpp_source.html#l00255">VehicleSpawnFunction::builtin_pileup()</a>, <a class="el" href="iuse_8cpp_source.html#l08909">iuse::cable_attach()</a>, <a class="el" href="faction__camp_8cpp_source.html#l03822">camp_car_description()</a>, <a class="el" href="vehicle_8cpp_source.html#l01388">can_unmount()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01478">close()</a>, <a class="el" href="gates_8cpp_source.html#l00255">doors::close_door()</a>, <a class="el" href="vehicle_8cpp_source.html#l03789">coeff_air_drag()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00354">collision()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02986">veh_interact::complete_vehicle()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00173">control_doors()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00369">control_engines()</a>, <a class="el" href="game_8cpp_source.html#l05443">game::control_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l05425">decrement_summon_timer()</a>, <a class="el" href="map_8cpp_source.html#l00340">map::detach_vehicle()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00029">disp_name()</a>, <a class="el" href="map_8cpp_source.html#l01098">map::displace_vehicle()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02586">veh_interact::display_name()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02062">veh_interact::do_rename()</a>, <a class="el" href="construction_8cpp_source.html#l01219">construct::done_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l00816">drive_to_local_target()</a>, <a class="el" href="game_8cpp_source.html#l05272">game::exam_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l06409">explode_fuel()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00801">fold_up()</a>, <a class="el" href="grab_8cpp_source.html#l00021">game::grabbed_veh_move()</a>, <a class="el" href="vehicle_8cpp_source.html#l03375">ground_acceleration()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00144">handbrake()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00845">handle_trap()</a>, <a class="el" href="vehicle_8cpp_source.html#l05033">idle()</a>, <a class="el" href="advanced__inv__area_8cpp_source.html#l00061">advanced_inv_area::init()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00454">interact_vehicle_locked()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>, <a class="el" href="vehicle_8cpp_source.html#l05859">is_towed()</a>, <a class="el" href="vehicle_8cpp_source.html#l05844">is_towing()</a>, <a class="el" href="vehicle_8cpp_source.html#l04097">k_traction()</a>, <a class="el" href="vehicle_8cpp_source.html#l03995">lift_thrust_of_rotorcraft()</a>, <a class="el" href="vehicle_8cpp_source.html#l03502">max_ground_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l03524">max_water_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l01654">merge_rackable_vehicle()</a>, <a class="el" href="avatar__action_8cpp_source.html#l00090">avatar_action::move()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="game_8cpp_source.html#l05412">game::moving_vehicle_dismount()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01463">open()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00470">part_collision()</a>, <a class="el" href="vehicle_8cpp_source.html#l05295">place_spawn_items()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01061">pldrive()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01158">possibly_recover_from_skid()</a>, <a class="el" href="character_8cpp_source.html#l06448">Character::pour_into()</a>, <a class="el" href="vehicle_8cpp_source.html#l04619">power_parts()</a>, <a class="el" href="game_8cpp_source.html#l06220">game::print_vehicle_info()</a>, <a class="el" href="map_8cpp_source.html#l04474">process_vehicle_items()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00160">put_into_vehicle()</a>, <a class="el" href="advanced__inv_8cpp_source.html#l00622">advanced_inventory::redraw_pane()</a>, <a class="el" href="vehicle_8cpp_source.html#l02004">remove_carried_vehicle()</a>, <a class="el" href="veh__utils_8cpp_source.html#l00109">veh_utils::repair_part()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00433">select_engine()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00266">set_electronics_menu_options()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01565">map::shake_vehicle()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00087">slowdown()</a>, <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01055">start_engines()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l02356">activity_handlers::start_engines_finish()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>, <a class="el" href="iuse_8cpp_source.html#l08782">iuse::tow_attach()</a>, <a class="el" href="iuse_8cpp_source.html#l05639">iuse::unfold_generic()</a>, <a class="el" href="vehicle_8cpp_source.html#l06657">update_time()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01556">use_autoclave()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01691">use_dishwasher()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01606">use_washing_machine()</a>, <a class="el" href="map_8cpp_source.html#l00741">map::vehicle_vehicle_collision()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03406">water_acceleration()</a>.</p>

</div>
</div>
<a id="a680decfc32d2eac704c5f3c890639821" name="a680decfc32d2eac704c5f3c890639821"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a680decfc32d2eac704c5f3c890639821">&#9670;&nbsp;</a></span>no_refresh</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::no_refresh = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01896">1896</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05459">enable_refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, and <a class="el" href="vehicle_8cpp_source.html#l05446">suspend_refresh()</a>.</p>

</div>
</div>
<a id="a7769b4dac262f6ff8bd328eb1b8f022c" name="a7769b4dac262f6ff8bd328eb1b8f022c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7769b4dac262f6ff8bd328eb1b8f022c">&#9670;&nbsp;</a></span>occupied_cache_time</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtime__point.html">time_point</a> vehicle::occupied_cache_time = <a class="el" href="namespacecalendar.html#ae25f99fbff61e25df40b5b26bcedee8c">calendar::before_time_starts</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Time occupied points were calculated. </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01849">1849</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06907">advance_precalc_mounts()</a>, <a class="el" href="vehicle_8cpp_source.html#l06568">get_points()</a>, and <a class="el" href="vehicle_8cpp_source.html#l05096">on_move()</a>.</p>

</div>
</div>
<a id="af3b0c13142af91fa64a5db922af2669a" name="af3b0c13142af91fa64a5db922af2669a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3b0c13142af91fa64a5db922af2669a">&#9670;&nbsp;</a></span>occupied_points</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;<a class="el" href="structtripoint.html">tripoint</a>&gt; vehicle::occupied_points</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01731">1731</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06568">get_points()</a>.</p>

</div>
</div>
<a id="af757f49411232815e121faa825d415f7" name="af757f49411232815e121faa825d415f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af757f49411232815e121faa825d415f7">&#9670;&nbsp;</a></span>of_turn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float vehicle::of_turn = 0.0f</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01874">1874</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, <a class="el" href="vehicle_8cpp_source.html#l05361">gain_moves()</a>, <a class="el" href="map_8cpp_source.html#l00741">map::vehicle_vehicle_collision()</a>, and <a class="el" href="map_8cpp_source.html#l00446">map::vehproceed()</a>.</p>

</div>
</div>
<a id="a3d2d513640544cb11fa826890b692e5a" name="a3d2d513640544cb11fa826890b692e5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d2d513640544cb11fa826890b692e5a">&#9670;&nbsp;</a></span>of_turn_carry</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float vehicle::of_turn_carry = 0.0f</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01876">1876</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, <a class="el" href="vehicle_8cpp_source.html#l05361">gain_moves()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00338">stop()</a>, and <a class="el" href="vehicle_8cpp_source.html#l00251">vehicle()</a>.</p>

</div>
</div>
<a id="a0e6255388e73823374ec4bc9097f87c3" name="a0e6255388e73823374ec4bc9097f87c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e6255388e73823374ec4bc9097f87c3">&#9670;&nbsp;</a></span>old_owner</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="clzones_8h.html#ab899db7b87cf958f079fe0f14793625b">faction_id</a> vehicle::old_owner = <a class="el" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">faction_id::NULL_ID</a>()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01721">1721</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8h_source.html#l00833">get_old_owner()</a>, <a class="el" href="vehicle_8cpp_source.html#l04197">handle_potential_theft()</a>, <a class="el" href="vehicle_8h_source.html#l00839">has_old_owner()</a>, <a class="el" href="vehicle_8cpp_source.html#l04167">is_old_owner()</a>, <a class="el" href="vehicle_8h_source.html#l00819">remove_old_owner()</a>, and <a class="el" href="vehicle_8h_source.html#l00815">set_old_owner()</a>.</p>

</div>
</div>
<a id="abef886f9f8fbb643d84ef5c6ad86518d" name="abef886f9f8fbb643d84ef5c6ad86518d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abef886f9f8fbb643d84ef5c6ad86518d">&#9670;&nbsp;</a></span>om_id</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::om_id = -1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01867">1867</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="overmapbuffer_8cpp_source.html#l00609">overmapbuffer::add_vehicle()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l00570">overmapbuffer::move_vehicle()</a>, and <a class="el" href="overmapbuffer_8cpp_source.html#l00598">overmapbuffer::remove_vehicle()</a>.</p>

</div>
</div>
<a id="afb548b72a0c24d9f9c436f198040e052" name="afb548b72a0c24d9f9c436f198040e052"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb548b72a0c24d9f9c436f198040e052">&#9670;&nbsp;</a></span>owner</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="clzones_8h.html#ab899db7b87cf958f079fe0f14793625b">faction_id</a> vehicle::owner = <a class="el" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">faction_id::NULL_ID</a>()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01719">1719</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8h_source.html#l00830">get_owner()</a>, <a class="el" href="vehicle_8cpp_source.html#l04179">get_owner_name()</a>, <a class="el" href="vehicle_8h_source.html#l00836">has_owner()</a>, <a class="el" href="vehicle_8cpp_source.html#l04155">is_owned_by()</a>, <a class="el" href="vehicle_8h_source.html#l00827">remove_owner()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04188">set_owner()</a>.</p>

</div>
</div>
<a id="afac2bfaf9d2b400e9a9e171624f74c40" name="afac2bfaf9d2b400e9a9e171624f74c40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afac2bfaf9d2b400e9a9e171624f74c40">&#9670;&nbsp;</a></span>parts</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structvehicle__part.html">vehicle_part</a>&gt; vehicle::parts</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01733">1733</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l00683">activate_animal_follow()</a>, <a class="el" href="vehicle_8cpp_source.html#l00669">activate_magical_follow()</a>, <a class="el" href="vehicle_8cpp_source.html#l05209">add_item()</a>, <a class="el" href="vehicle_8cpp_source.html#l00317">add_missing_frames()</a>, <a class="el" href="vehicle_8cpp_source.html#l00344">add_steerable_wheels()</a>, <a class="el" href="vehicle_8cpp_source.html#l06907">advance_precalc_mounts()</a>, <a class="el" href="vehicle_8cpp_source.html#l02745">all_parts_at_location()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00580">assign_seat()</a>, <a class="el" href="vehicle_8cpp_source.html#l02534">avail_part_with_feature()</a>, <a class="el" href="vehicle_8cpp_source.html#l01126">backfire()</a>, <a class="el" href="vehicle_8cpp_source.html#l04260">balanced_wheel_config()</a>, <a class="el" href="vehicle_8cpp_source.html#l03297">basic_consumption()</a>, <a class="el" href="vehicle_8cpp_source.html#l06338">break_off()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01493">can_close()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00549">can_enable()</a>, <a class="el" href="vehicle_8cpp_source.html#l01271">can_mount()</a>, <a class="el" href="vehicle_8cpp_source.html#l01388">can_unmount()</a>, <a class="el" href="vehicle_8cpp_source.html#l04926">charge_battery()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01478">close()</a>, <a class="el" href="vehicle_8cpp_source.html#l03789">coeff_air_drag()</a>, <a class="el" href="vehicle_8cpp_source.html#l03928">coeff_rolling_drag()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00354">collision()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00173">control_doors()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00369">control_engines()</a>, <a class="el" href="vehicle_8cpp_source.html#l06897">cpart()</a>, <a class="el" href="vehicle_8cpp_source.html#l06173">damage()</a>, <a class="el" href="vehicle_8cpp_source.html#l06437">damage_direct()</a>, <a class="el" href="vehicle_8cpp_source.html#l04973">discharge_battery()</a>, <a class="el" href="vehicle_8cpp_source.html#l03246">drain()</a>, <a class="el" href="vehicle_8cpp_source.html#l04371">drain_energy()</a>, <a class="el" href="vehicle_8cpp_source.html#l00816">drive_to_local_target()</a>, <a class="el" href="vehicle_8cpp_source.html#l05416">dump_items_from_part()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00885">engine_cold_factor()</a>, <a class="el" href="vehicle_8cpp_source.html#l03230">engine_fuel_left()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00899">engine_start_time()</a>, <a class="el" href="vehicle_8cpp_source.html#l06409">explode_fuel()</a>, <a class="el" href="vehicle_8cpp_source.html#l02117">find_and_split_vehicles()</a>, <a class="el" href="vehicle_8cpp_source.html#l02789">find_lines_of_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l02395">find_part()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00801">fold_up()</a>, <a class="el" href="vehicle_8cpp_source.html#l03238">fuel_capacity()</a>, <a class="el" href="vehicle_8cpp_source.html#l03179">fuel_left()</a>, <a class="el" href="vehicle_8cpp_source.html#l04340">fuel_usage()</a>, <a class="el" href="vehicle_8cpp_source.html#l06526">fuels_left()</a>, <a class="el" href="vehicle_8cpp_source.html#l06849">get_bounding_box()</a>, <a class="el" href="vehicle_8cpp_source.html#l05282">get_items()</a>, <a class="el" href="vehicle_8cpp_source.html#l02760">get_next_shifted_index()</a>, <a class="el" href="vehicle_8cpp_source.html#l02580">get_parts_at()</a>, <a class="el" href="vehicle_8cpp_source.html#l03073">get_passenger()</a>, <a class="el" href="vehicle_8cpp_source.html#l06568">get_points()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00314">get_printable_fuel_types()</a>, <a class="el" href="vehicle_8cpp_source.html#l03106">global_part_pos3()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00845">handle_trap()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00919">has_harnessed_animal()</a>, <a class="el" href="vehicle_8cpp_source.html#l02558">has_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l01112">has_security_working()</a>, <a class="el" href="vehicle_8cpp_source.html#l00386">init_state()</a>, <a class="el" href="vehicle_8cpp_source.html#l01570">install_part()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00454">interact_vehicle_locked()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>, <a class="el" href="vehicle_8cpp_source.html#l05939">invalidate_towing()</a>, <a class="el" href="vehicle_8cpp_source.html#l01097">is_alternator_on()</a>, <a class="el" href="vehicle_8cpp_source.html#l01484">is_connected()</a>, <a class="el" href="vehicle_8cpp_source.html#l01087">is_engine_on()</a>, <a class="el" href="vehicle_8cpp_source.html#l01075">is_engine_type()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01488">is_open()</a>, <a class="el" href="vehicle_8cpp_source.html#l01092">is_part_on()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01413">level_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l04462">lights()</a>, <a class="el" href="vehicle_8cpp_source.html#l01654">merge_rackable_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l02645">next_part_to_close()</a>, <a class="el" href="vehicle_8cpp_source.html#l02664">next_part_to_open()</a>, <a class="el" href="vehicle_8cpp_source.html#l03644">noise_and_smoke()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01463">open()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01514">open_all_at()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01532">open_or_close()</a>, <a class="el" href="vehicle_8cpp_source.html#l06892">part()</a>, <a class="el" href="vehicle_8cpp_source.html#l02390">part_base()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00470">part_collision()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00082">part_color()</a>, <a class="el" href="vehicle_8cpp_source.html#l06887">part_count()</a>, <a class="el" href="vehicle_8cpp_source.html#l01208">part_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l02875">part_flag()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00055">part_id_string()</a>, <a class="el" href="vehicle_8cpp_source.html#l01137">part_info()</a>, <a class="el" href="vehicle_8cpp_source.html#l01940">part_removal_cleanup()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00034">part_sym()</a>, <a class="el" href="vehicle_8cpp_source.html#l01149">part_vpower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l02501">part_with_feature()</a>, <a class="el" href="vehicle_8cpp_source.html#l05295">place_spawn_items()</a>, <a class="el" href="vehicle_8cpp_source.html#l04619">power_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l03024">precalc_mounts()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00343">print_fuel_indicators()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00149">print_part_list()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00242">print_vparts_descs()</a>, <a class="el" href="vehicle_8cpp_source.html#l06764">process_emitters()</a>, <a class="el" href="vehicle_8cpp_source.html#l06106">refresh_insides()</a>, <a class="el" href="vehicle_8cpp_source.html#l05645">refresh_pivot()</a>, <a class="el" href="vehicle_8cpp_source.html#l01974">remove_carried_flag()</a>, <a class="el" href="vehicle_8cpp_source.html#l02004">remove_carried_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l05260">remove_item()</a>, <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l06035">remove_remote_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l01990">remove_tracked_flag()</a>, <a class="el" href="vehicle_8cpp_source.html#l06547">restore()</a>, <a class="el" href="vehicle_8cpp_source.html#l02976">roof_at_part()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00433">select_engine()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00933">selfdrive()</a>, <a class="el" href="vehicle_8cpp_source.html#l05906">set_tow_directions()</a>, <a class="el" href="vehicle_8cpp_source.html#l06067">shed_loose_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l06310">shift_if_needed()</a>, <a class="el" href="vehicle_8cpp_source.html#l06279">shift_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l05114">slow_leak()</a>, <a class="el" href="vehicle_8cpp_source.html#l00936">smash()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00492">smash_security_system()</a>, <a class="el" href="vehicle_8cpp_source.html#l03623">spew_field()</a>, <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00918">start_engine()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01055">start_engines()</a>, <a class="el" href="vehicle_8cpp_source.html#l04284">steering_effectiveness()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01033">stop_engines()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>, <a class="el" href="vehicle_8cpp_source.html#l01022">toggle_specific_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l03333">total_power_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04514">total_solar_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04561">total_water_wheel_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04536">total_wind_epower_w()</a>, <a class="el" href="turret_8cpp_source.html#l00032">turrets()</a>, <a class="el" href="turret_8cpp_source.html#l00481">turrets_set_mode()</a>, <a class="el" href="turret_8cpp_source.html#l00425">turrets_set_targeting()</a>, <a class="el" href="vehicle_8cpp_source.html#l04594">update_alternator_load()</a>, <a class="el" href="vehicle_8cpp_source.html#l06657">update_time()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01556">use_autoclave()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01823">use_bike_rack()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01691">use_dishwasher()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01764">use_harness()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01748">use_monster_capture()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01606">use_washing_machine()</a>, <a class="el" href="vehicle_8cpp_source.html#l06902">valid_part()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03737">wheel_area()</a>.</p>

</div>
</div>
<a id="afd4e8e8471b17450205d827dee8a41a5" name="afd4e8e8471b17450205d827dee8a41a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd4e8e8471b17450205d827dee8a41a5">&#9670;&nbsp;</a></span>pivot_anchor</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::array&lt;<a class="el" href="structpoint.html">point</a>, 2&gt; vehicle::pivot_anchor</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01889">1889</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06907">advance_precalc_mounts()</a>, <a class="el" href="vehicle_8cpp_source.html#l02988">coord_translate()</a>, <a class="el" href="vehicle_8cpp_source.html#l03017">mount_to_tripoint()</a>, <a class="el" href="vehicle_8cpp_source.html#l03164">pivot_displacement()</a>, <a class="el" href="vehicle_8cpp_source.html#l03024">precalc_mounts()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l06547">restore()</a>, <a class="el" href="vehicle_8cpp_source.html#l06279">shift_parts()</a>, and <a class="el" href="vehicle_8cpp_source.html#l00251">vehicle()</a>.</p>

</div>
</div>
<a id="a6d1b9a43a439a0ec56de30c9a8ccb328" name="a6d1b9a43a439a0ec56de30c9a8ccb328"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d1b9a43a439a0ec56de30c9a8ccb328">&#9670;&nbsp;</a></span>pivot_cache</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpoint.html">point</a> vehicle::pivot_cache</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01816">1816</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05636">pivot_point()</a>, and <a class="el" href="vehicle_8cpp_source.html#l05645">refresh_pivot()</a>.</p>

</div>
</div>
<a id="a4618e6b69581e93ab96d66fc889659c5" name="a4618e6b69581e93ab96d66fc889659c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4618e6b69581e93ab96d66fc889659c5">&#9670;&nbsp;</a></span>pivot_dirty</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::pivot_dirty = true</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01899">1899</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06437">damage_direct()</a>, <a class="el" href="vehicle_8cpp_source.html#l06778">invalidate_mass()</a>, <a class="el" href="vehicle_8cpp_source.html#l05636">pivot_point()</a>, and <a class="el" href="vehicle_8cpp_source.html#l05645">refresh_pivot()</a>.</p>

</div>
</div>
<a id="a709da7b758c18d51b79311eea6eaca59" name="a709da7b758c18d51b79311eea6eaca59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a709da7b758c18d51b79311eea6eaca59">&#9670;&nbsp;</a></span>pivot_rotation</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::array&lt;<a class="el" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">units::angle</a>, 2&gt; vehicle::pivot_rotation = { { 0_degrees, 0_degrees } }</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01883">1883</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06907">advance_precalc_mounts()</a>, <a class="el" href="vehicle_8cpp_source.html#l02988">coord_translate()</a>, <a class="el" href="vehicle_8cpp_source.html#l03017">mount_to_tripoint()</a>, <a class="el" href="vehicle_8cpp_source.html#l03164">pivot_displacement()</a>, <a class="el" href="vehicle_8cpp_source.html#l03024">precalc_mounts()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l06547">restore()</a>, and <a class="el" href="vehicle_8cpp_source.html#l00251">vehicle()</a>.</p>

</div>
</div>
<a id="a12844862e123c12dc923ca390becf79e" name="a12844862e123c12dc923ca390becf79e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12844862e123c12dc923ca390becf79e">&#9670;&nbsp;</a></span>pos</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpoint.html">point</a> vehicle::pos</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Position of the vehicle <em>inside</em> the submap that contains the vehicle. </p>
<p >This will (nearly) always be in the range (0...SEEX-1). Note that vehicles are "moved" by <a class="el" href="classmap.html#abeefac00972febd607e98bb0431bd5a9">map::displace_vehicle</a>. You should not set them directly, except when initializing the vehicle or during mapgen. </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01859">1859</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mapgen_8cpp_source.html#l05671">map::add_vehicle_to_map()</a>, <a class="el" href="vehicle_8cpp_source.html#l06907">advance_precalc_mounts()</a>, <a class="el" href="turret_8cpp_source.html#l00542">automatic_fire_turret()</a>, <a class="el" href="vehicle_8cpp_source.html#l01126">backfire()</a>, <a class="el" href="vehicle_8cpp_source.html#l06338">break_off()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00577">vehicle::autodrive_controller::compute_profile()</a>, <a class="el" href="vehicle_8cpp_source.html#l06095">enclosed_at()</a>, <a class="el" href="vehicle_8cpp_source.html#l04720">find_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l05282">get_items()</a>, <a class="el" href="vehicle_8cpp_source.html#l02580">get_parts_at()</a>, <a class="el" href="vehicle_8cpp_source.html#l03101">global_pos3()</a>, <a class="el" href="vehicle_8cpp_source.html#l02565">has_part()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01532">open_or_close()</a>, <a class="el" href="game_8cpp_source.html#l00845">game::place_vehicle_nearby()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01151">reload_seeds()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00918">start_engine()</a>, <a class="el" href="turret_8cpp_source.html#l00068">turret_query()</a>, <a class="el" href="turret_8cpp_source.html#l00425">turrets_set_targeting()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01764">use_harness()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l01748">use_monster_capture()</a>.</p>

</div>
</div>
<a id="ae57bcc52818212097155515e82c3a84d" name="ae57bcc52818212097155515e82c3a84d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae57bcc52818212097155515e82c3a84d">&#9670;&nbsp;</a></span>rail_profile</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; vehicle::rail_profile</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rail profile of the vehicle. </p>
<p >Describes where the vehicle would expect rails to be on its y axis relative to its pivot point in its own coordinate space.</p>
<p >For example, for 2-seated draisine (drawn as facing north): </p><pre class="fragment">  +x
</pre><p> ..:...:.. ..:...:.. - and | draisine frame ..0&mdash;0.. 0 railwheels -y ..|&mdash;|.. +y p pivot point ..0-p-0.. . ground ..:...:.. : expected rail ..:...:.. -x</p>
<p >The rail profile would take the value of { -2, 2 }. </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01789">1789</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l01665">vehicle_movement::scan_rails_from_veh_internal()</a>.</p>

</div>
</div>
<a id="a905db1f8c84d0754a8e0a121392a2b3a" name="a905db1f8c84d0754a8e0a121392a2b3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a905db1f8c84d0754a8e0a121392a2b3a">&#9670;&nbsp;</a></span>rail_wheelcache</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; vehicle::rail_wheelcache</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01763">1763</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03369">can_use_rails()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l01501">map::vehicle_wheel_traction()</a>.</p>

</div>
</div>
<a id="a2423efb46e19d1801498f9ea0c06f576" name="a2423efb46e19d1801498f9ea0c06f576"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2423efb46e19d1801498f9ea0c06f576">&#9670;&nbsp;</a></span>reactors</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; vehicle::reactors</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01753">1753</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04585">max_reactor_epower_w()</a>, <a class="el" href="vehicle_8cpp_source.html#l04619">power_parts()</a>, and <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>.</p>

</div>
</div>
<a id="a92654cefac764c60371c47e0b406a991" name="a92654cefac764c60371c47e0b406a991"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92654cefac764c60371c47e0b406a991">&#9670;&nbsp;</a></span>relative_parts</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="structpoint.html">point</a>, std::vector&lt;int&gt; &gt; vehicle::relative_parts</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01800">1800</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l02501">part_with_feature()</a>, <a class="el" href="vehicle_8cpp_source.html#l02414">parts_at_relative()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03623">spew_field()</a>.</p>

</div>
</div>
<a id="ab2aaa937610c71ab4b8ff3ffdfa4902d" name="ab2aaa937610c71ab4b8ff3ffdfa4902d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2aaa937610c71ab4b8ff3ffdfa4902d">&#9670;&nbsp;</a></span>removed_part_count</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::removed_part_count = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01830">1830</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l01940">part_removal_cleanup()</a>, <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>, and <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>.</p>

</div>
</div>
<a id="aeb404e5f18eee80d104a7bb0680ac169" name="aeb404e5f18eee80d104a7bb0680ac169"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb404e5f18eee80d104a7bb0680ac169">&#9670;&nbsp;</a></span>requested_z_change</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::requested_z_change = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01918">1918</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, <a class="el" href="vehicle_8cpp_source.html#l04022">get_z_change()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>.</p>

</div>
</div>
<a id="aa8c51c573320aab5e499c239e78a285b" name="aa8c51c573320aab5e499c239e78a285b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8c51c573320aab5e499c239e78a285b">&#9670;&nbsp;</a></span>rotors</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; vehicle::rotors</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01762">1762</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03984">total_rotor_area()</a>.</p>

</div>
</div>
<a id="a29734343c62d80afa734f4d1bc1767c6" name="a29734343c62d80afa734f4d1bc1767c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29734343c62d80afa734f4d1bc1767c6">&#9670;&nbsp;</a></span>sails</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; vehicle::sails</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01757">1757</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>.</p>

</div>
</div>
<a id="a320ca34b5c38568efd801731cef78a35" name="a320ca34b5c38568efd801731cef78a35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a320ca34b5c38568efd801731cef78a35">&#9670;&nbsp;</a></span>skidding</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::skidding = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01940">1940</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, <a class="el" href="game_8cpp_source.html#l01332">game::calc_driving_offset()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l01206">do_autodrive()</a>, <a class="el" href="vehicle_8cpp_source.html#l05745">do_towing_move()</a>, <a class="el" href="vehicle_8cpp_source.html#l03375">ground_acceleration()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00144">handbrake()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00470">part_collision()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01061">pldrive()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01158">possibly_recover_from_skid()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00933">selfdrive()</a>, <a class="el" href="monmove_8cpp_source.html#l02021">monster::shove_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00338">stop()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>, <a class="el" href="map_8cpp_source.html#l01060">map::unboard_vehicle()</a>, <a class="el" href="map_8cpp_source.html#l00741">map::vehicle_vehicle_collision()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01195">velo_vec()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03406">water_acceleration()</a>.</p>

</div>
</div>
<a id="a34630935e46860003c616e0522316f02" name="a34630935e46860003c616e0522316f02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34630935e46860003c616e0522316f02">&#9670;&nbsp;</a></span>sm_pos</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtripoint.html">tripoint</a> vehicle::sm_pos</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Submap coordinates of the currently loaded submap (see <a class="el" href="classgame.html#ab6a1689fcb99f28cb9bee5b831a21450">game::m</a>) that contains this vehicle. </p>
<p >These values are changed when the map shifts (but the vehicle is not actually moved than, it also stays on the same submap, only the relative coordinates in <a class="el" href="classmap.html#a3a86dcc9866606ffff52cde90dd23ca6" title="The list of currently loaded submaps.">map::grid</a> have changed). These coordinates must always refer to the submap in <a class="el" href="classmap.html#a3a86dcc9866606ffff52cde90dd23ca6" title="The list of currently loaded submaps.">map::grid</a> that contains this vehicle. When the vehicle is really moved (by <a class="el" href="classmap.html#abeefac00972febd607e98bb0431bd5a9">map::displace_vehicle</a>), set_submap_moved is called and updates these values, when the map is only shifted or when a submap is loaded into the map the values are directly set. The vehicles position does not change therefor no call to set_submap_moved is required. </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01844">1844</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, <a class="el" href="mapgen_8cpp_source.html#l05618">map::add_vehicle()</a>, <a class="el" href="mapgen_8cpp_source.html#l05671">map::add_vehicle_to_map()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02986">veh_interact::complete_vehicle()</a>, <a class="el" href="map_8cpp_source.html#l00340">map::detach_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l00816">drive_to_local_target()</a>, <a class="el" href="vehicle_8cpp_source.html#l03101">global_pos3()</a>, <a class="el" href="map_8cpp_source.html#l06824">map::loadn()</a>, <a class="el" href="vehicle_8cpp_source.html#l01654">merge_rackable_vehicle()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01532">open_or_close()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00470">part_collision()</a>, <a class="el" href="game_8cpp_source.html#l00845">game::place_vehicle_nearby()</a>, <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>, <a class="el" href="vehicle_8cpp_source.html#l03116">set_submap_moved()</a>, <a class="el" href="vehicle_8cpp_source.html#l06279">shift_parts()</a>, <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>, <a class="el" href="vehicle_8cpp_source.html#l06657">update_time()</a>, <a class="el" href="vehicle_8cpp_source.html#l00270">vehicle()</a>, and <a class="el" href="map_8cpp_source.html#l00741">map::vehicle_vehicle_collision()</a>.</p>

</div>
</div>
<a id="a59bb3a4e9aa26397203cce91d56ab2ec" name="a59bb3a4e9aa26397203cce91d56ab2ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59bb3a4e9aa26397203cce91d56ab2ec">&#9670;&nbsp;</a></span>solar_panels</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; vehicle::solar_panels</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01754">1754</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l04514">total_solar_epower_w()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06657">update_time()</a>.</p>

</div>
</div>
<a id="aa33bd32301526128292da1ec7f78be55" name="aa33bd32301526128292da1ec7f78be55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa33bd32301526128292da1ec7f78be55">&#9670;&nbsp;</a></span>speciality</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; vehicle::speciality</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01766">1766</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l01112">has_security_working()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00492">smash_security_system()</a>.</p>

</div>
</div>
<a id="a26f77298a01a76e95ed34888793700a4" name="a26f77298a01a76e95ed34888793700a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26f77298a01a76e95ed34888793700a4">&#9670;&nbsp;</a></span>steering</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; vehicle::steering</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01764">1764</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l04284">steering_effectiveness()</a>, and <a class="el" href="veh__interact_8cpp_source.html#l00703">veh_interact::update_part_requirements()</a>.</p>

</div>
</div>
<a id="a975683a2a22bccef9e5e02f80661cf03" name="a975683a2a22bccef9e5e02f80661cf03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a975683a2a22bccef9e5e02f80661cf03">&#9670;&nbsp;</a></span>summon_time_limit</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcata_1_1optional.html">cata::optional</a>&lt;<a class="el" href="classtime__duration.html">time_duration</a>&gt; vehicle::summon_time_limit = <a class="el" href="namespacecata.html#ad05314667ac5d05f984aeeef26b9a87f">cata::nullopt</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01811">1811</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05425">decrement_summon_timer()</a>.</p>

</div>
</div>
<a id="a0383bc21c8d6b5a3689124f3d286a004" name="a0383bc21c8d6b5a3689124f3d286a004"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0383bc21c8d6b5a3689124f3d286a004">&#9670;&nbsp;</a></span>tags</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;std::string&gt; vehicle::tags</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01802">1802</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l00536">veh_interact::cant_do()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00801">fold_up()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01921">interact_with()</a>, <a class="el" href="vehicle_8cpp_source.html#l00277">player_in_control()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l00633">unfold_vehicle_iuse::use()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="a191233eeb95ac9e660d5da83dd247a73" name="a191233eeb95ac9e660d5da83dd247a73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a191233eeb95ac9e660d5da83dd247a73">&#9670;&nbsp;</a></span>theft_time</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcata_1_1optional.html">cata::optional</a>&lt;<a class="el" href="classtime__point.html">time_point</a>&gt; vehicle::theft_time</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01881">1881</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l04197">handle_potential_theft()</a>, <a class="el" href="vehicle_8h_source.html#l00819">remove_old_owner()</a>, and <a class="el" href="vehicle_8h_source.html#l00815">set_old_owner()</a>.</p>

</div>
</div>
<a id="a72a3e7b7f00c193446b29adee5d5aa9f" name="a72a3e7b7f00c193446b29adee5d5aa9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72a3e7b7f00c193446b29adee5d5aa9f">&#9670;&nbsp;</a></span>tow_data</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtowing__data.html">towing_data</a> vehicle::tow_data</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01887">1887</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="veh__interact_8cpp_source.html#l02986">veh_interact::complete_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l05745">do_towing_move()</a>, <a class="el" href="vehicle_8cpp_source.html#l03375">ground_acceleration()</a>, <a class="el" href="vehicle_8cpp_source.html#l05939">invalidate_towing()</a>, <a class="el" href="vehicle_8cpp_source.html#l05859">is_towed()</a>, <a class="el" href="vehicle_8cpp_source.html#l05844">is_towing()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l06005">no_towing_slack()</a>, <a class="el" href="vehicle_8cpp_source.html#l05906">set_tow_directions()</a>, <a class="el" href="vehicle_8cpp_source.html#l05927">towing_data::set_towing()</a>, <a class="el" href="vehicle_8cpp_source.html#l06067">shed_loose_parts()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00087">slowdown()</a>, <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>, <a class="el" href="iuse_8cpp_source.html#l08782">iuse::tow_attach()</a>, <a class="el" href="vehicle_8cpp_source.html#l05973">tow_cable_too_far()</a>, <a class="el" href="game_8cpp_source.html#l01977">game::validate_linked_vehicles()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03406">water_acceleration()</a>.</p>

</div>
</div>
<a id="abe5f5ade599d2cd543a3e3c3860bc051" name="abe5f5ade599d2cd543a3e3c3860bc051"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe5f5ade599d2cd543a3e3c3860bc051">&#9670;&nbsp;</a></span>tracking_on</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::tracking_on = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01932">1932</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l00340">map::detach_vehicle()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02062">veh_interact::do_rename()</a>, <a class="el" href="map_8cpp_source.html#l06824">map::loadn()</a>, <a class="el" href="vehicle_8cpp_source.html#l01654">merge_rackable_vehicle()</a>, <a class="el" href="game_8cpp_source.html#l00845">game::place_vehicle_nearby()</a>, <a class="el" href="vehicle_8cpp_source.html#l03116">set_submap_moved()</a>, <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00593">toggle_tracking()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00537">tracking_toggle_string()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="af366981a584e12d25133fb479d47de33" name="af366981a584e12d25133fb479d47de33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af366981a584e12d25133fb479d47de33">&#9670;&nbsp;</a></span>turn_dir</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">units::angle</a> vehicle::turn_dir = 0_degrees</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01870">1870</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l01027">vehicle::autodrive_controller::check_collision_zone()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01225">dir_vec()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l01206">do_autodrive()</a>, <a class="el" href="vehicle_8cpp_source.html#l06849">get_bounding_box()</a>, <a class="el" href="grab_8cpp_source.html#l00021">game::grabbed_veh_move()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01061">pldrive()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01768">vehicle_movement::process_movement_on_rails()</a>, <a class="el" href="vehicle_8cpp_source.html#l06547">restore()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00933">selfdrive()</a>, <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00324">turn()</a>, and <a class="el" href="vehicle_8cpp_source.html#l00251">vehicle()</a>.</p>

</div>
</div>
<a id="a22b8b1fe66df7091af2eb16f62fb711b" name="a22b8b1fe66df7091af2eb16f62fb711b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22b8b1fe66df7091af2eb16f62fb711b">&#9670;&nbsp;</a></span>type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="type__id_8h.html#a64efc8ab51816a59711440d464136eda">vproto_id</a> vehicle::type</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of the vehicle as it was spawned. </p>
<p >This will never change, but it can be an invalid type (e.g. if the definition of the prototype has been removed from json or if it has been spawned with the default constructor). </p>

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01798">1798</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mapgen_8cpp_source.html#l05671">map::add_vehicle_to_map()</a>, <a class="el" href="vehicle_8cpp_source.html#l06173">damage()</a>, <a class="el" href="vehicle_8cpp_source.html#l06252">damage_all()</a>, <a class="el" href="vehicle_8cpp_source.html#l06437">damage_direct()</a>, <a class="el" href="vehicle_8cpp_source.html#l06409">explode_fuel()</a>, <a class="el" href="vehicle_8cpp_source.html#l00386">init_state()</a>, <a class="el" href="vehicle_8cpp_source.html#l05295">place_spawn_items()</a>, <a class="el" href="vehicle_8cpp_source.html#l03623">spew_field()</a>, and <a class="el" href="vehicle_8cpp_source.html#l00251">vehicle()</a>.</p>

</div>
</div>
<a id="ae3281409ce9ec7e878f9e22427e815e5" name="ae3281409ce9ec7e878f9e22427e815e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3281409ce9ec7e878f9e22427e815e5">&#9670;&nbsp;</a></span>vehicle_noise</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char vehicle::vehicle_noise = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01951">1951</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03644">noise_and_smoke()</a>, <a class="el" href="sounds_8cpp_source.html#l00386">sounds::process_sound_markers()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01033">stop_engines()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>.</p>

</div>
</div>
<a id="a4d83e86fe57ec6126893a68f68c3c304" name="a4d83e86fe57ec6126893a68f68c3c304"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d83e86fe57ec6126893a68f68c3c304">&#9670;&nbsp;</a></span>velocity</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::velocity = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01861">1861</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, <a class="el" href="game_8cpp_source.html#l01332">game::calc_driving_offset()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l01273">can_do_activity_there()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01031">check_heli_ascend()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00996">check_heli_descend()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00354">collision()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00369">control_engines()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01230">crash_terrain_around()</a>, <a class="el" href="vehicle_8cpp_source.html#l03472">current_acceleration()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l01206">do_autodrive()</a>, <a class="el" href="vehicle_8cpp_source.html#l05745">do_towing_move()</a>, <a class="el" href="panels_8cpp_source.html#l01651">draw_health_classic()</a>, <a class="el" href="panels_8cpp_source.html#l01848">draw_veh_compact()</a>, <a class="el" href="panels_8cpp_source.html#l01880">draw_veh_padding()</a>, <a class="el" href="vehicle_8cpp_source.html#l00816">drive_to_local_target()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00801">fold_up()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01187">forward_velocity()</a>, <a class="el" href="vehicle_8cpp_source.html#l05361">gain_moves()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00144">handbrake()</a>, <a class="el" href="vehicle_8cpp_source.html#l04325">handling_difficulty()</a>, <a class="el" href="vehicle_8cpp_source.html#l00769">immediate_path()</a>, <a class="el" href="vehicle_8cpp_source.html#l03364">is_moving()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l00835">make_start_node()</a>, <a class="el" href="avatar__action_8cpp_source.html#l00090">avatar_action::move()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="game_8cpp_source.html#l05412">game::moving_vehicle_dismount()</a>, <a class="el" href="vehicle_8cpp_source.html#l03644">noise_and_smoke()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00470">part_collision()</a>, <a class="el" href="player_8cpp_source.html#l00756">player::pause()</a>, <a class="el" href="melee_8cpp_source.html#l01337">Character::perform_technique()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01061">pldrive()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01158">possibly_recover_from_skid()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01768">vehicle_movement::process_movement_on_rails()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00933">selfdrive()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01565">map::shake_vehicle()</a>, <a class="el" href="monmove_8cpp_source.html#l02021">monster::shove_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l03623">spew_field()</a>, <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l02356">activity_handlers::start_engines_finish()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00338">stop()</a>, <a class="el" href="vehicle_8cpp_source.html#l04126">strain()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00129">thrust()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01264">transform_terrain()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00324">turn()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00606">use_controls()</a>, <a class="el" href="map_8cpp_source.html#l00741">map::vehicle_vehicle_collision()</a>, and <a class="el" href="vehicle__move_8cpp_source.html#l01195">velo_vec()</a>.</p>

</div>
</div>
<a id="a416a2bc9ee792663fced3344db322cb8" name="a416a2bc9ee792663fced3344db322cb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a416a2bc9ee792663fced3344db322cb8">&#9670;&nbsp;</a></span>vertical_velocity</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vehicle::vertical_velocity = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01865">1865</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__move_8cpp_source.html#l01239">act_on_map()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00354">collision()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l00470">part_collision()</a>, <a class="el" href="monmove_8cpp_source.html#l02021">monster::shove_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>, and <a class="el" href="map_8cpp_source.html#l00741">map::vehicle_vehicle_collision()</a>.</p>

</div>
</div>
<a id="aaebcdca0982ede955b6da03757db4e77" name="aaebcdca0982ede955b6da03757db4e77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaebcdca0982ede955b6da03757db4e77">&#9670;&nbsp;</a></span>water_wheels</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; vehicle::water_wheels</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01756">1756</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l04561">total_water_wheel_epower_w()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06657">update_time()</a>.</p>

</div>
</div>
<a id="a5c432c0da0ff47a483e3aa74548bd435" name="a5c432c0da0ff47a483e3aa74548bd435"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c432c0da0ff47a483e3aa74548bd435">&#9670;&nbsp;</a></span>wheelcache</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; vehicle::wheelcache</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01761">1761</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l03747">average_or_rating()</a>, <a class="el" href="vehicle_8cpp_source.html#l04260">balanced_wheel_config()</a>, <a class="el" href="vehicle_8cpp_source.html#l03369">can_use_rails()</a>, <a class="el" href="vehicle_8cpp_source.html#l03928">coeff_rolling_drag()</a>, <a class="el" href="veh__interact_8cpp_source.html#l02372">veh_interact::display_stats()</a>, <a class="el" href="grab_8cpp_source.html#l00021">game::grabbed_veh_move()</a>, <a class="el" href="vehicle_8cpp_source.html#l00386">init_state()</a>, <a class="el" href="vehicle_8cpp_source.html#l04037">is_watercraft()</a>, <a class="el" href="map_8cpp_source.html#l00504">map::move_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l05645">refresh_pivot()</a>, <a class="el" href="vehicle_8cpp_source.html#l04140">sufficient_wheel_config()</a>, <a class="el" href="vehicle__move_8cpp_source.html#l01501">map::vehicle_wheel_traction()</a>, <a class="el" href="game_8cpp_source.html#l09307">game::walk_move()</a>, <a class="el" href="vehicle_8cpp_source.html#l03737">wheel_area()</a>, and <a class="el" href="veh__interact_8cpp_source.html#l02322">wheel_state_description()</a>.</p>

</div>
</div>
<a id="aa467e8fa404592fb7c704dfa50ac9141" name="aa467e8fa404592fb7c704dfa50ac9141"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa467e8fa404592fb7c704dfa50ac9141">&#9670;&nbsp;</a></span>wind_turbines</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; vehicle::wind_turbines</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01755">1755</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l04536">total_wind_epower_w()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06657">update_time()</a>.</p>

</div>
</div>
<a id="af6c2314d1f5b83a04771abea3109a137" name="af6c2314d1f5b83a04771abea3109a137"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6c2314d1f5b83a04771abea3109a137">&#9670;&nbsp;</a></span>zones_dirty</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vehicle::zones_dirty = true</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vehicle_8h_source.html#l01948">1948</a> of file <a class="el" href="vehicle_8h_source.html">vehicle.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="clzones_8cpp_source.html#l00960">zone_manager::create_vehicle_loot_zone()</a>, <a class="el" href="map_8cpp_source.html#l01098">map::displace_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l01654">merge_rackable_vehicle()</a>, <a class="el" href="vehicle_8cpp_source.html#l05477">refresh()</a>, <a class="el" href="vehicle_8cpp_source.html#l06971">refresh_zones()</a>, <a class="el" href="vehicle_8cpp_source.html#l01820">remove_part()</a>, and <a class="el" href="vehicle_8cpp_source.html#l02222">split_vehicles()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="vehicle_8h_source.html">vehicle.h</a></li>
<li>src/<a class="el" href="savegame__json_8cpp_source.html">savegame_json.cpp</a></li>
<li>src/<a class="el" href="turret_8cpp_source.html">turret.cpp</a></li>
<li>src/<a class="el" href="vehicle_8cpp_source.html">vehicle.cpp</a></li>
<li>src/<a class="el" href="vehicle__autodrive_8cpp_source.html">vehicle_autodrive.cpp</a></li>
<li>src/<a class="el" href="vehicle__display_8cpp_source.html">vehicle_display.cpp</a></li>
<li>src/<a class="el" href="vehicle__move_8cpp_source.html">vehicle_move.cpp</a></li>
<li>src/<a class="el" href="vehicle__part_8cpp_source.html">vehicle_part.cpp</a></li>
<li>src/<a class="el" href="vehicle__use_8cpp_source.html">vehicle_use.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classvehicle.html">vehicle</a></li>
    <li class="footer">Generated on Sat Nov 12 2022 15:16:04 for Cataclysm BN by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
