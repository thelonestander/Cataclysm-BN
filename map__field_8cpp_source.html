<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm BN: src/map_field.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm BN
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('map__field_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">map_field.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="map__field_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="preprocessor">#include &lt;array&gt;</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="preprocessor">#include &lt;bitset&gt;</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="preprocessor">#include &lt;cstddef&gt;</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#include &lt;list&gt;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#include &lt;queue&gt;</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#include &lt;set&gt;</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#include &lt;tuple&gt;</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span> </div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &quot;<a class="code" href="avatar_8h.html">avatar.h</a>&quot;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &quot;<a class="code" href="basecamp_8h.html">basecamp.h</a>&quot;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &quot;<a class="code" href="bodypart_8h.html">bodypart.h</a>&quot;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &quot;<a class="code" href="calendar_8h.html">calendar.h</a>&quot;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &quot;<a class="code" href="cata__utility_8h.html">cata_utility.h</a>&quot;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &quot;<a class="code" href="colony_8h.html">colony.h</a>&quot;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &quot;<a class="code" href="coordinate__conversions_8h.html">coordinate_conversions.h</a>&quot;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &quot;<a class="code" href="creature_8h.html">creature.h</a>&quot;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &quot;<a class="code" href="damage_8h.html">damage.h</a>&quot;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &quot;<a class="code" href="debug_8h.html">debug.h</a>&quot;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#include &quot;<a class="code" href="effect_8h.html">effect.h</a>&quot;</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &quot;<a class="code" href="emit_8h.html">emit.h</a>&quot;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &quot;<a class="code" href="enums_8h.html">enums.h</a>&quot;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#include &quot;<a class="code" href="field_8h.html">field.h</a>&quot;</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#include &quot;<a class="code" href="field__type_8h.html">field_type.h</a>&quot;</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#include &quot;<a class="code" href="fire_8h.html">fire.h</a>&quot;</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &quot;<a class="code" href="fungal__effects_8h.html">fungal_effects.h</a>&quot;</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">#include &quot;<a class="code" href="game_8h.html">game.h</a>&quot;</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#include &quot;<a class="code" href="game__constants_8h.html">game_constants.h</a>&quot;</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">#include &quot;<a class="code" href="int__id_8h.html">int_id.h</a>&quot;</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#include &quot;<a class="code" href="item_8h.html">item.h</a>&quot;</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="preprocessor">#include &quot;<a class="code" href="item__contents_8h.html">item_contents.h</a>&quot;</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="preprocessor">#include &quot;<a class="code" href="itype_8h.html">itype.h</a>&quot;</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="preprocessor">#include &quot;<a class="code" href="line_8h.html">line.h</a>&quot;</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="preprocessor">#include &quot;<a class="code" href="map_8h.html">map.h</a>&quot;</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="preprocessor">#include &quot;<a class="code" href="map__iterator_8h.html">map_iterator.h</a>&quot;</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="preprocessor">#include &quot;<a class="code" href="mapdata_8h.html">mapdata.h</a>&quot;</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="preprocessor">#include &quot;<a class="code" href="material_8h.html">material.h</a>&quot;</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="preprocessor">#include &quot;<a class="code" href="messages_8h.html">messages.h</a>&quot;</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="preprocessor">#include &quot;<a class="code" href="mongroup_8h.html">mongroup.h</a>&quot;</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="preprocessor">#include &quot;<a class="code" href="monster_8h.html">monster.h</a>&quot;</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="preprocessor">#include &quot;<a class="code" href="mtype_8h.html">mtype.h</a>&quot;</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="preprocessor">#include &quot;<a class="code" href="npc_8h.html">npc.h</a>&quot;</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span><span class="preprocessor">#include &quot;<a class="code" href="optional_8h.html">optional.h</a>&quot;</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="preprocessor">#include &quot;<a class="code" href="overmapbuffer_8h.html">overmapbuffer.h</a>&quot;</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span><span class="preprocessor">#include &quot;<a class="code" href="player_8h.html">player.h</a>&quot;</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span><span class="preprocessor">#include &quot;<a class="code" href="pldata_8h.html">pldata.h</a>&quot;</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><span class="preprocessor">#include &quot;<a class="code" href="point_8h.html">point.h</a>&quot;</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span><span class="preprocessor">#include &quot;<a class="code" href="rng_8h.html">rng.h</a>&quot;</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span><span class="preprocessor">#include &quot;<a class="code" href="scent__block_8h.html">scent_block.h</a>&quot;</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="preprocessor">#include &quot;<a class="code" href="string__id_8h.html">string_id.h</a>&quot;</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span><span class="preprocessor">#include &quot;<a class="code" href="submap_8h.html">submap.h</a>&quot;</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span><span class="preprocessor">#include &quot;<a class="code" href="teleport_8h.html">teleport.h</a>&quot;</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span><span class="preprocessor">#include &quot;<a class="code" href="translations_8h.html">translations.h</a>&quot;</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span><span class="preprocessor">#include &quot;<a class="code" href="type__id_8h.html">type_id.h</a>&quot;</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span><span class="preprocessor">#include &quot;<a class="code" href="units_8h.html">units.h</a>&quot;</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span><span class="preprocessor">#include &quot;<a class="code" href="vehicle_8h.html">vehicle.h</a>&quot;</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span><span class="preprocessor">#include &quot;<a class="code" href="vpart__position_8h.html">vpart_position.h</a>&quot;</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span><span class="preprocessor">#include &quot;<a class="code" href="weather_8h.html">weather.h</a>&quot;</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span> </div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#a2e1ccdf5aa874eaaf8e3f14757d72179">   64</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> <a class="code hl_variable" href="map__field_8cpp.html#a2e1ccdf5aa874eaaf8e3f14757d72179">itype_rm13_armor_on</a>( <span class="stringliteral">&quot;rm13_armor_on&quot;</span> );</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#a0b026348e0ab957138f7777d85fd1ebc">   65</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> <a class="code hl_variable" href="map__field_8cpp.html#a0b026348e0ab957138f7777d85fd1ebc">itype_rock</a>( <span class="stringliteral">&quot;rock&quot;</span> );</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span> </div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#a21ab92eb0bc71e62dbc4d95a9fd6eb70">   67</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">species_id</a> <a class="code hl_variable" href="map__field_8cpp.html#a21ab92eb0bc71e62dbc4d95a9fd6eb70">FUNGUS</a>( <span class="stringliteral">&quot;FUNGUS&quot;</span> );</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#a8c7cbf21cfb7caaf9cc9d45150684d29">   68</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">species_id</a> <a class="code hl_variable" href="map__field_8cpp.html#a8c7cbf21cfb7caaf9cc9d45150684d29">INSECT</a>( <span class="stringliteral">&quot;INSECT&quot;</span> );</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#aeb98a85fd2ef390ce9f1bcfa09f4e1ac">   69</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">species_id</a> <a class="code hl_variable" href="map__field_8cpp.html#aeb98a85fd2ef390ce9f1bcfa09f4e1ac">SPIDER</a>( <span class="stringliteral">&quot;SPIDER&quot;</span> );</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#af198a4e5b75aadbc020ee447fd31226b">   71</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">bionic_id</a> <a class="code hl_variable" href="map__field_8cpp.html#af198a4e5b75aadbc020ee447fd31226b">bio_heatsink</a>( <span class="stringliteral">&quot;bio_heatsink&quot;</span> );</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span> </div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#a0f3a25eb2b398fd705348436a034da00">   73</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="map__field_8cpp.html#a0f3a25eb2b398fd705348436a034da00">effect_badpoison</a>( <span class="stringliteral">&quot;badpoison&quot;</span> );</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#a09e952ef4d27618e2f60ec737a8d1bae">   74</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="map__field_8cpp.html#a09e952ef4d27618e2f60ec737a8d1bae">effect_blind</a>( <span class="stringliteral">&quot;blind&quot;</span> );</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#a489bb033f6a8cb9073ba12f2e4dd5d92">   75</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="map__field_8cpp.html#a489bb033f6a8cb9073ba12f2e4dd5d92">effect_corroding</a>( <span class="stringliteral">&quot;corroding&quot;</span> );</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#a08ed8f8240259a6a457502b0db459e08">   76</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="map__field_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a>( <span class="stringliteral">&quot;fungus&quot;</span> );</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">   77</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="map__field_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a>( <span class="stringliteral">&quot;onfire&quot;</span> );</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#ace42425e1e703ebbe953ade0f6110b7c">   78</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="map__field_8cpp.html#ace42425e1e703ebbe953ade0f6110b7c">effect_poison</a>( <span class="stringliteral">&quot;poison&quot;</span> );</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#a8e21df750cb8c6b27ba9b240e11bc6db">   79</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="map__field_8cpp.html#a8e21df750cb8c6b27ba9b240e11bc6db">effect_stung</a>( <span class="stringliteral">&quot;stung&quot;</span> );</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#ad1df0ca2944a94c3ad796e8baada33ae">   80</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="map__field_8cpp.html#ad1df0ca2944a94c3ad796e8baada33ae">effect_stunned</a>( <span class="stringliteral">&quot;stunned&quot;</span> );</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#ad37b6925aab6c082f9b6bbf00e6336aa">   81</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="map__field_8cpp.html#ad37b6925aab6c082f9b6bbf00e6336aa">effect_teargas</a>( <span class="stringliteral">&quot;teargas&quot;</span> );</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#aa222d693ccc29efba86a3bb9f18add4e">   82</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="map__field_8cpp.html#aa222d693ccc29efba86a3bb9f18add4e">effect_webbed</a>( <span class="stringliteral">&quot;webbed&quot;</span> );</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span> </div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#ae002e878ae18d5606ca01aeaa659a44c">   84</a></span><span class="keyword">static</span> <span class="keyword">const</span> std::string <a class="code hl_function" href="map__field_8cpp.html#ae002e878ae18d5606ca01aeaa659a44c">flag_FUNGUS</a>( <span class="stringliteral">&quot;FUNGUS&quot;</span> );</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#a08867676937d5a671005725465da2213">   85</a></span><span class="keyword">static</span> <span class="keyword">const</span> std::string <a class="code hl_function" href="map__field_8cpp.html#a08867676937d5a671005725465da2213">flag_GAS_PROOF</a>( <span class="stringliteral">&quot;GAS_PROOF&quot;</span> );</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span> </div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#a5fccb1c22e58777ef464ef0cbb372541">   87</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="map__field_8cpp.html#a5fccb1c22e58777ef464ef0cbb372541">trait_ACIDPROOF</a>( <span class="stringliteral">&quot;ACIDPROOF&quot;</span> );</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#a0bfdd3a7d9e971128bba26c5a37b2292">   88</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="map__field_8cpp.html#a0bfdd3a7d9e971128bba26c5a37b2292">trait_ELECTRORECEPTORS</a>( <span class="stringliteral">&quot;ELECTRORECEPTORS&quot;</span> );</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#a308d750c2cc01d70d7622fdee14be3a5">   89</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="map__field_8cpp.html#a308d750c2cc01d70d7622fdee14be3a5">trait_M_IMMUNE</a>( <span class="stringliteral">&quot;M_IMMUNE&quot;</span> );</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#a644d3f52891b843ba69587dc6c6088d3">   90</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="map__field_8cpp.html#a644d3f52891b843ba69587dc6c6088d3">trait_M_SKIN2</a>( <span class="stringliteral">&quot;M_SKIN2&quot;</span> );</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#a039c3379527621f928cbc2e62686108c">   91</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="map__field_8cpp.html#a039c3379527621f928cbc2e62686108c">trait_M_SKIN3</a>( <span class="stringliteral">&quot;M_SKIN3&quot;</span> );</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">   92</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="map__field_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">trait_THRESH_MARLOSS</a>( <span class="stringliteral">&quot;THRESH_MARLOSS&quot;</span> );</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">   93</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="map__field_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a>( <span class="stringliteral">&quot;THRESH_MYCUS&quot;</span> );</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#a0e02f772574a897b72bd8fc3c48e7f3d">   94</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="map__field_8cpp.html#a0e02f772574a897b72bd8fc3c48e7f3d">trait_WEB_WALKER</a>( <span class="stringliteral">&quot;WEB_WALKER&quot;</span> );</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span> </div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno"><a class="line" href="classmap.html#a9ada8bea4712648bcb27d0cd32f63c6a">   96</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classmap.html#a9ada8bea4712648bcb27d0cd32f63c6a">map::create_burnproducts</a>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;p, <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp;fuel, <span class="keyword">const</span> <a class="code hl_class" href="classunits_1_1quantity.html">units::mass</a> &amp;burned_mass )</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>{</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>    std::vector&lt;material_id&gt; all_mats = fuel.<a class="code hl_function" href="classitem.html#a4326944ae95f4d265c8ca1c76ed89a03">made_of</a>();</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>    <span class="keywordflow">if</span>( all_mats.empty() ) {</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>    }</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>    <span class="comment">// Items that are multiple materials are assumed to be equal parts each.</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>    <span class="keyword">const</span> <a class="code hl_class" href="classunits_1_1quantity.html">units::mass</a> by_weight = burned_mass / all_mats.size();</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classstring__id.html">material_id</a> &amp;mat : all_mats ) {</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;bp : mat-&gt;burn_products() ) {</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>            <a class="code hl_class" href="classstring__id.html">itype_id</a> <span class="keywordtype">id</span> = bp.first;</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>            <span class="comment">// Spawning the same item as the one that was just burned is pointless</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>            <span class="comment">// and leads to infinite recursion.</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>            <span class="keywordflow">if</span>( fuel.<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>() == <span class="keywordtype">id</span> ) {</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>            }</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>            <span class="keyword">const</span> <span class="keywordtype">float</span> eff = bp.second;</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> n = std::floor( eff * ( by_weight / <a class="code hl_variable" href="namespacebase__camps.html#a04fa69b1c0952a34dc4a7d26b3f9f786">id</a>-&gt;weight ) );</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span> </div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>            <span class="keywordflow">if</span>( n &lt;= 0 ) {</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>            }</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>            <a class="code hl_function" href="classmap.html#acfe43259087397daac52876165a3120c">spawn_item</a>( p, <span class="keywordtype">id</span>, n, 1, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>        }</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    }</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>}</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span> </div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span><span class="comment">// Use a helper for a bit less boilerplate</span></div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno"><a class="line" href="classmap.html#ab42c106bfff9e18e1767421be6e9e72c">  124</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classmap.html#ab42c106bfff9e18e1767421be6e9e72c">map::burn_body_part</a>( <a class="code hl_class" href="classplayer.html">player</a> &amp;u, <a class="code hl_class" href="classfield__entry.html">field_entry</a> &amp;cur, <a class="code hl_enumeration" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980">body_part</a> bp, <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_enumeration" href="namespacecoords.html#aefed5186be640da17dc0e723c536715a">scale</a> )</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>{</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    <span class="keywordtype">int</span> total_damage = 0;</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> intensity = cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>();</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> damage = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, ( <a class="code hl_enumeration" href="namespacecoords.html#aefed5186be640da17dc0e723c536715a">scale</a> + intensity ) / 2 );</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    <span class="comment">// A bit ugly, but better than being annoyed by acid when in hazmat</span></div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>    <span class="keywordflow">if</span>( u.<a class="code hl_function" href="classCharacter.html#a6aaea50daa966bc12e4b1ec44134fa12">get_armor_type</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa8fce673f2bfbb3fdb52be44a8e638c90">DT_ACID</a>, <a class="code hl_function" href="bodypart_8cpp.html#ae34a481a7c686b233f2d8c48e43b723a">convert_bp</a>( bp ) ) &lt; damage ) {</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structdealt__damage__instance.html">dealt_damage_instance</a> ddi = u.<a class="code hl_function" href="classCharacter.html#a2c05090cba2078f9ebefd80e61564be3">deal_damage</a>( <span class="keyword">nullptr</span>, <a class="code hl_function" href="bodypart_8cpp.html#ae34a481a7c686b233f2d8c48e43b723a">convert_bp</a>( bp ).<span class="keywordtype">id</span>(),</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>                                          <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa8fce673f2bfbb3fdb52be44a8e638c90">DT_ACID</a>, damage ) );</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>        total_damage += ddi.<a class="code hl_function" href="structdealt__damage__instance.html#a86b702070a1c313624abc78ff34eff48">total_damage</a>();</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    }</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>    <span class="comment">// Represents acid seeping in rather than being splashed on</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    u.<a class="code hl_function" href="classCreature.html#aeb7869963d4c1060c4d928424511d2e0">add_env_effect</a>( <a class="code hl_variable" href="map__field_8cpp.html#a489bb033f6a8cb9073ba12f2e4dd5d92">effect_corroding</a>, bp, 2 + intensity, <a class="code hl_function" href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 2,</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>                      1 + intensity ) ), bp, 0 );</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>    <span class="keywordflow">return</span> total_damage;</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>}</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span> </div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno"><a class="line" href="classmap.html#aa0d14cd7febb068abb69390c7bde9156">  141</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classmap.html#aa0d14cd7febb068abb69390c7bde9156">map::process_fields</a>()</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>{</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> minz = <a class="code hl_variable" href="classmap.html#a87a151868377cb4b2843de06991c97da">zlevels</a> ? -<a class="code hl_variable" href="game__constants_8h.html#aad0eacfa516a8f7e005674027d7640fe">OVERMAP_DEPTH</a> : <a class="code hl_variable" href="classmap.html#a5413e71e313df95a11e09d279c5605da">abs_sub</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>;</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> maxz = <a class="code hl_variable" href="classmap.html#a87a151868377cb4b2843de06991c97da">zlevels</a> ? <a class="code hl_variable" href="game__constants_8h.html#a3984a9476d1edc78e4e7b886a08d4d4b">OVERMAP_HEIGHT</a> : <a class="code hl_variable" href="classmap.html#a5413e71e313df95a11e09d279c5605da">abs_sub</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>;</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> z = minz; z &lt;= maxz; z++ ) {</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>        <span class="keyword">auto</span> &amp;field_cache = <a class="code hl_function" href="classmap.html#a2c2523e489f73c84e7a77a138e60ba25">get_cache</a>( z ).<a class="code hl_variable" href="structlevel__cache.html#a2af0622caf0c878e166015f22e2add9e">field_cache</a>;</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> x = 0; x &lt; <a class="code hl_variable" href="classmap.html#a7997e4febecb36a59b48b06649dc9173">my_MAPSIZE</a>; x++ ) {</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> y = 0; y &lt; <a class="code hl_variable" href="classmap.html#a7997e4febecb36a59b48b06649dc9173">my_MAPSIZE</a>; y++ ) {</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>                <span class="keywordflow">if</span>( field_cache[ x + y * <a class="code hl_variable" href="game__constants_8h.html#ad277b12d7860c613865a85a2cc383c17">MAPSIZE</a> ] ) {</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>                    <a class="code hl_class" href="classsubmap.html">submap</a> *<span class="keyword">const</span> current_submap = <a class="code hl_function" href="classmap.html#ac5d9bf2b01f243d3983c2054f75b1101">get_submap_at_grid</a>( { x, y, z } );</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>                    <a class="code hl_function" href="classmap.html#aa926674ebd4c5600b1994a73cd492fae">process_fields_in_submap</a>( current_submap, <a class="code hl_struct" href="structtripoint.html">tripoint</a>( x, y, z ) );</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>                }</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>            }</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>        }</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span> </div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>        <span class="comment">// no need to invalidate &quot;transparency&quot; and &quot;seen&quot; caches here</span></div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>        <span class="comment">// they are invalidated point by point inside the `process_fields_in_submap`</span></div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>    }</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>}</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span> </div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno"><a class="line" href="map_8h.html#a154653b69f33e37a47333fd07d81c6f0">  161</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="map__field_8cpp.html#a9de296e6ced54bc59e40089f8821075c">ter_furn_has_flag</a>( <span class="keyword">const</span> <a class="code hl_struct" href="structter__t.html">ter_t</a> &amp;ter, <span class="keyword">const</span> <a class="code hl_struct" href="structfurn__t.html">furn_t</a> &amp;furn, <span class="keyword">const</span> <a class="code hl_enumeration" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258">ter_bitflags</a> flag )</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>{</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    <span class="keywordflow">return</span> ter.<a class="code hl_function" href="structmap__data__common__t.html#a630778707744fb147436b9aa0c370a7e">has_flag</a>( flag ) || furn.<a class="code hl_function" href="structmap__data__common__t.html#a630778707744fb147436b9aa0c370a7e">has_flag</a>( flag );</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>}</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span> </div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#aa8ab551e835b081c3eb82476d58ee809">  166</a></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code hl_function" href="map__field_8cpp.html#aa8ab551e835b081c3eb82476d58ee809">ter_furn_movecost</a>( <span class="keyword">const</span> <a class="code hl_struct" href="structter__t.html">ter_t</a> &amp;ter, <span class="keyword">const</span> <a class="code hl_struct" href="structfurn__t.html">furn_t</a> &amp;furn )</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>{</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    <span class="keywordflow">if</span>( ter.<a class="code hl_variable" href="structmap__data__common__t.html#aa6eb23c1a5d8e89d877880f9aaf32eb6">movecost</a> == 0 ) {</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    }</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span> </div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>    <span class="keywordflow">if</span>( furn.<a class="code hl_variable" href="structmap__data__common__t.html#aa6eb23c1a5d8e89d877880f9aaf32eb6">movecost</a> &lt; 0 ) {</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    }</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span> </div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    <span class="keywordflow">return</span> ter.<a class="code hl_variable" href="structmap__data__common__t.html#aa6eb23c1a5d8e89d877880f9aaf32eb6">movecost</a> + furn.<a class="code hl_variable" href="structmap__data__common__t.html#aa6eb23c1a5d8e89d877880f9aaf32eb6">movecost</a>;</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>}</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span> </div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span><span class="comment">// Wrapper to allow skipping bound checks except at the edges of the map</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno"><a class="line" href="classmap.html#a91bb6418064c2a4c142e9410c3c661ef">  180</a></span>std::pair&lt;tripoint, maptile&gt; <a class="code hl_function" href="classmap.html#a91bb6418064c2a4c142e9410c3c661ef">map::maptile_has_bounds</a>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;p, <span class="keyword">const</span> <span class="keywordtype">bool</span> bounds_checked )</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>{</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>    <span class="keywordflow">if</span>( bounds_checked ) {</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>        <span class="comment">// We know that the point is in bounds</span></div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>        <span class="keywordflow">return</span> {p, <a class="code hl_function" href="classmap.html#aef5205f2179c538caf9901871d434462">maptile_at_internal</a>( p )};</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    }</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span> </div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    <span class="keywordflow">return</span> {p, <a class="code hl_function" href="classmap.html#a267286ed64b9685c23cf335b2bd225bb">maptile_at</a>( p )};</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>}</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span> </div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno"><a class="line" href="classmap.html#a11dbf59db7e4322c15b4aab9dfef5a91">  190</a></span>std::array&lt;std::pair&lt;tripoint, maptile&gt;, 8&gt; <a class="code hl_function" href="classmap.html#a11dbf59db7e4322c15b4aab9dfef5a91">map::get_neighbors</a>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;p )</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>{</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>    <span class="comment">// Find out which edges are in the bubble</span></div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    <span class="comment">// Where possible, do just one bounds check for all the neighbors</span></div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> west = p.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> &gt; 0;</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> north = p.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> &gt; 0;</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> east = p.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> &lt; <a class="code hl_variable" href="game__constants_8h.html#a39fd8a829e3dc412646663066dbdb54c">SEEX</a> * <a class="code hl_variable" href="classmap.html#a7997e4febecb36a59b48b06649dc9173">my_MAPSIZE</a> - 1;</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> south = p.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> &lt; <a class="code hl_variable" href="game__constants_8h.html#a4cfa35de359af17f7bc6c2a424339eb5">SEEY</a> * <a class="code hl_variable" href="classmap.html#a7997e4febecb36a59b48b06649dc9173">my_MAPSIZE</a> - 1;</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>    <span class="keywordflow">return</span> std::array&lt; std::pair&lt;tripoint, maptile&gt;, 8 &gt; { {</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>            <a class="code hl_function" href="classmap.html#a91bb6418064c2a4c142e9410c3c661ef">maptile_has_bounds</a>( p + <a class="code hl_variable" href="point_8h.html#a531b7c882d6066241b7f93268af3e68b">eight_horizontal_neighbors</a>[0], west &amp;&amp;north ),</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>            <a class="code hl_function" href="classmap.html#a91bb6418064c2a4c142e9410c3c661ef">maptile_has_bounds</a>( p + <a class="code hl_variable" href="point_8h.html#a531b7c882d6066241b7f93268af3e68b">eight_horizontal_neighbors</a>[1], north ),</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>            <a class="code hl_function" href="classmap.html#a91bb6418064c2a4c142e9410c3c661ef">maptile_has_bounds</a>( p + <a class="code hl_variable" href="point_8h.html#a531b7c882d6066241b7f93268af3e68b">eight_horizontal_neighbors</a>[2], east &amp;&amp;north ),</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>            <a class="code hl_function" href="classmap.html#a91bb6418064c2a4c142e9410c3c661ef">maptile_has_bounds</a>( p + <a class="code hl_variable" href="point_8h.html#a531b7c882d6066241b7f93268af3e68b">eight_horizontal_neighbors</a>[3], west ),</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>            <a class="code hl_function" href="classmap.html#a91bb6418064c2a4c142e9410c3c661ef">maptile_has_bounds</a>( p + <a class="code hl_variable" href="point_8h.html#a531b7c882d6066241b7f93268af3e68b">eight_horizontal_neighbors</a>[4], east ),</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>            <a class="code hl_function" href="classmap.html#a91bb6418064c2a4c142e9410c3c661ef">maptile_has_bounds</a>( p + <a class="code hl_variable" href="point_8h.html#a531b7c882d6066241b7f93268af3e68b">eight_horizontal_neighbors</a>[5], west &amp;&amp;south ),</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>            <a class="code hl_function" href="classmap.html#a91bb6418064c2a4c142e9410c3c661ef">maptile_has_bounds</a>( p + <a class="code hl_variable" href="point_8h.html#a531b7c882d6066241b7f93268af3e68b">eight_horizontal_neighbors</a>[6], south ),</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>            <a class="code hl_function" href="classmap.html#a91bb6418064c2a4c142e9410c3c661ef">maptile_has_bounds</a>( p + <a class="code hl_variable" href="point_8h.html#a531b7c882d6066241b7f93268af3e68b">eight_horizontal_neighbors</a>[7], east &amp;&amp;south ),</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>        }</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>    };</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>}</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span> </div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno"><a class="line" href="classmap.html#af4227f2341fcd97f9dab44741bdb0a84">  211</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classmap.html#af4227f2341fcd97f9dab44741bdb0a84">map::gas_can_spread_to</a>( <a class="code hl_class" href="classfield__entry.html">field_entry</a> &amp;cur, <span class="keyword">const</span> <a class="code hl_struct" href="structmaptile.html">maptile</a> &amp;dst )</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>{</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>    <span class="keyword">const</span> <a class="code hl_class" href="classfield__entry.html">field_entry</a> *tmpfld = dst.<a class="code hl_function" href="structmaptile.html#a15f6425e60113e76f02a16bc22f14032">get_field</a>().<a class="code hl_function" href="classfield.html#a0560f05925c46ef62436765b8db90731">find_field</a>( cur.<a class="code hl_function" href="classfield__entry.html#af76e247514edaeed4bdc58638bfa0ae1">get_field_type</a>() );</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>    <span class="comment">// Candidates are existing weaker fields or navigable/flagged tiles with no field.</span></div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    <span class="keywordflow">if</span>( tmpfld == <span class="keyword">nullptr</span> || tmpfld-&gt;<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() &lt; cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() ) {</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structter__t.html">ter_t</a> &amp;<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a> = dst.<a class="code hl_function" href="structmaptile.html#a09a3fb71b0c8d22a8d1257144205d775">get_ter_t</a>();</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structfurn__t.html">furn_t</a> &amp;frn = dst.<a class="code hl_function" href="structmaptile.html#ac457d93598440f370cb86702caddfdd7">get_furn_t</a>();</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="map__field_8cpp.html#aa8ab551e835b081c3eb82476d58ee809">ter_furn_movecost</a>( <a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>, frn ) &gt; 0 || <a class="code hl_function" href="map__field_8cpp.html#a9de296e6ced54bc59e40089f8821075c">ter_furn_has_flag</a>( <a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>, frn, <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a17333b0108a536601f817c86278e77bd">TFLAG_PERMEABLE</a> );</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>    }</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>}</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span> </div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno"><a class="line" href="classmap.html#aa7959ae0022b6910c744d14d8cc218ed">  223</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classmap.html#aa7959ae0022b6910c744d14d8cc218ed">map::gas_spread_to</a>( <a class="code hl_class" href="classfield__entry.html">field_entry</a> &amp;cur, <a class="code hl_struct" href="structmaptile.html">maptile</a> &amp;dst, <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;p )</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>{</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>    <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">field_type_id</a> current_type = cur.<a class="code hl_function" href="classfield__entry.html#af76e247514edaeed4bdc58638bfa0ae1">get_field_type</a>();</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> current_age = cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>();</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> current_intensity = cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>();</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>    <a class="code hl_class" href="classfield__entry.html">field_entry</a> *f = dst.<a class="code hl_function" href="structmaptile.html#a938297885d93f2c7d4f283363ca2f606">find_field</a>( current_type );</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>    <span class="comment">// Nearby gas grows thicker, and ages are shared.</span></div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> age_fraction = current_age / current_intensity;</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>    <span class="keywordflow">if</span>( f != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>        f-&gt;<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( f-&gt;<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() + 1 );</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>        cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( current_intensity - 1 );</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>        f-&gt;<a class="code hl_function" href="classfield__entry.html#a7b3755413ee669cf1b84f54883f2e363">set_field_age</a>( f-&gt;<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() + age_fraction );</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>        cur.<a class="code hl_function" href="classfield__entry.html#a7b3755413ee669cf1b84f54883f2e363">set_field_age</a>( current_age - age_fraction );</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>        <span class="comment">// Or, just create a new field.</span></div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( p, current_type, 1, 0_turns ) ) {</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>        f = dst.<a class="code hl_function" href="structmaptile.html#a938297885d93f2c7d4f283363ca2f606">find_field</a>( current_type );</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>        <span class="keywordflow">if</span>( f != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>            f-&gt;<a class="code hl_function" href="classfield__entry.html#a7b3755413ee669cf1b84f54883f2e363">set_field_age</a>( age_fraction );</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>            <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;While spreading the gas, field was added but doesn&#39;t exist.&quot;</span> );</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>        }</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>        cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( current_intensity - 1 );</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>        cur.<a class="code hl_function" href="classfield__entry.html#a7b3755413ee669cf1b84f54883f2e363">set_field_age</a>( current_age - age_fraction );</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>    }</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>}</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span> </div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno"><a class="line" href="classmap.html#a535690d28a08b8397a7a002c5c4c74af">  249</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classmap.html#a535690d28a08b8397a7a002c5c4c74af">map::spread_gas</a>( <a class="code hl_class" href="classfield__entry.html">field_entry</a> &amp;cur, <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;p, <span class="keywordtype">int</span> percent_spread,</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>                      <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> &amp;outdoor_age_speedup, <a class="code hl_struct" href="structscent__block.html">scent_block</a> &amp;sblk )</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>{</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>    <span class="comment">// TODO: fix point types</span></div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>    <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">oter_id</a> &amp;cur_om_ter =</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>        <a class="code hl_variable" href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a>.<a class="code hl_function" href="classovermapbuffer.html#aa9fbf966291f6b82de9c540262324aba">ter</a>( <a class="code hl_typedef" href="coordinates_8h.html#a383a8345c0282c087ef788e4421c3ded">tripoint_abs_omt</a>( <a class="code hl_function" href="coordinate__conversions_8cpp.html#a82aec5e351a3d6ef948536834dc1bbd0">ms_to_omt_copy</a>( here.<a class="code hl_function" href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">getabs</a>( p ) ) ) );</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> sheltered = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_sheltered( p );</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>    <span class="keyword">const</span> <a class="code hl_class" href="classweather__manager.html">weather_manager</a> &amp;<a class="code hl_namespace" href="namespaceweather.html">weather</a> = <a class="code hl_function" href="group__Weather.html#gaa7b33196bf530c8b26654a0adf355165">get_weather</a>();</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> winddirection = <a class="code hl_namespace" href="namespaceweather.html">weather</a>.winddirection;</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> windpower = <a class="code hl_function" href="group__Weather.html#ga23304505d04b612b77e4df5e9b64a1dd">get_local_windpower</a>( <a class="code hl_namespace" href="namespaceweather.html">weather</a>.windspeed, cur_om_ter, p, winddirection,</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>                          sheltered );</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span> </div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> current_intensity = cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>();</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>    <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">field_type_id</a> ft_id = cur.<a class="code hl_function" href="classfield__entry.html#af76e247514edaeed4bdc58638bfa0ae1">get_field_type</a>();</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span> </div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> scent_neutralize = ft_id-&gt;<a class="code hl_function" href="structfield__type.html#a46f1cb85c4bfdac38826b81178295ed5">get_intensity_level</a>( current_intensity -</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>                                 1 ).<a class="code hl_variable" href="structfield__intensity__level.html#ac5bea9ad065ed028bc8847d16f7d33b6">scent_neutralization</a>;</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span> </div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>    <span class="keywordflow">if</span>( scent_neutralize &gt; 0 ) {</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>        <span class="comment">// modify scents by neutralization value (minus)</span></div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;tmp : <a class="code hl_function" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( p, 1 ) ) {</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>            sblk.<a class="code hl_function" href="structscent__block.html#abd1e03ded277beee70edb7964ca3d3cc">apply_gas</a>( tmp, scent_neutralize );</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>        }</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>    }</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span> </div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>    <span class="comment">// Dissipate faster outdoors.</span></div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classmap.html#a3bc75c8b706a54c1575b4460b2f363b1">is_outside</a>( p ) ) {</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>        <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> current_age = cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>();</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>        cur.<a class="code hl_function" href="classfield__entry.html#a7b3755413ee669cf1b84f54883f2e363">set_field_age</a>( current_age + outdoor_age_speedup );</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>    }</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span> </div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>    <span class="comment">// Bail out if we don&#39;t meet the spread chance or required intensity.</span></div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>    <span class="keywordflow">if</span>( current_intensity &lt;= 1 || <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 100 - windpower ) &gt; percent_spread ) {</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>    }</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span> </div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>    <span class="comment">// First check if we can fall</span></div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>    <span class="comment">// TODO: Make fall and rise chances parameters to enable heavy/light gas</span></div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classmap.html#a87a151868377cb4b2843de06991c97da">zlevels</a> &amp;&amp; p.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> &gt; -<a class="code hl_variable" href="game__constants_8h.html#aad0eacfa516a8f7e005674027d7640fe">OVERMAP_DEPTH</a> ) {</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> down{ p.<a class="code hl_function" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>(), p.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> - 1 };</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>        <a class="code hl_struct" href="structmaptile.html">maptile</a> down_tile = <a class="code hl_function" href="classmap.html#aef5205f2179c538caf9901871d434462">maptile_at_internal</a>( down );</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classmap.html#af4227f2341fcd97f9dab44741bdb0a84">gas_can_spread_to</a>( cur, down_tile ) &amp;&amp; <a class="code hl_function" href="classmap.html#a3188771064ca49d4798c6a80bfad0fcd">valid_move</a>( p, down, <span class="keyword">true</span>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>            <a class="code hl_function" href="classmap.html#aa7959ae0022b6910c744d14d8cc218ed">gas_spread_to</a>( cur, down_tile, down );</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>        }</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>    }</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span> </div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>    <span class="keyword">auto</span> neighs = <a class="code hl_function" href="classmap.html#a11dbf59db7e4322c15b4aab9dfef5a91">get_neighbors</a>( p );</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>    <span class="keywordtype">size_t</span> end_it = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, neighs.size() - 1 ) );</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>    std::vector&lt;size_t&gt; spread;</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>    std::vector&lt;size_t&gt; neighbour_vec;</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>    <span class="comment">// Then, spread to a nearby point.</span></div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>    <span class="comment">// If not possible (or randomly), try to spread up</span></div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>    <span class="comment">// Wind direction will block the field spreading into the wind.</span></div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    <span class="comment">// Start at end_it + 1, then wrap around until all elements have been processed.</span></div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = ( end_it + 1 ) % neighs.size(), <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> = 0;</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>         <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> != neighs.size();</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>         i = ( i + 1 ) % neighs.size(), <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a>++ ) {</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;neigh = neighs[i];</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classmap.html#af4227f2341fcd97f9dab44741bdb0a84">gas_can_spread_to</a>( cur, neigh.second ) ) {</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>            spread.push_back( i );</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>        }</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>    }</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    <span class="keyword">auto</span> maptiles = <a class="code hl_function" href="classmap.html#a2583b85e82d40e942e950351c1670deb">get_wind_blockers</a>( winddirection, p );</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>    <span class="comment">// Three map tiles that are facing the wind direction.</span></div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structmaptile.html">maptile</a> remove_tile = std::get&lt;0&gt;( maptiles );</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structmaptile.html">maptile</a> remove_tile2 = std::get&lt;1&gt;( maptiles );</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structmaptile.html">maptile</a> remove_tile3 = std::get&lt;2&gt;( maptiles );</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>    <span class="keywordflow">if</span>( !spread.empty() &amp;&amp; ( !<a class="code hl_variable" href="classmap.html#a87a151868377cb4b2843de06991c97da">zlevels</a> || <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( spread.size() ) ) ) {</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>        <span class="comment">// Construct the destination from offset and p</span></div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_sheltered( p ) || windpower &lt; 5 ) {</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>            std::pair&lt;tripoint, maptile&gt; &amp;n = neighs[ <a class="code hl_function" href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a>( spread ) ];</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>            <a class="code hl_function" href="classmap.html#aa7959ae0022b6910c744d14d8cc218ed">gas_spread_to</a>( cur, n.second, n.first );</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>            end_it = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, neighs.size() - 1 ) );</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>            <span class="comment">// Start at end_it + 1, then wrap around until all elements have been processed.</span></div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>            <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = ( end_it + 1 ) % neighs.size(), <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> = 0;</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>                 <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> != neighs.size();</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>                 i = ( i + 1 ) % neighs.size(), <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a>++ ) {</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>                <span class="keyword">const</span> <span class="keyword">auto</span> &amp;neigh = neighs[i].second;</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>                <span class="keywordflow">if</span>( ( neigh.pos_.x != remove_tile.<a class="code hl_variable" href="structmaptile.html#a93e125b91c77b00f653a12800b24dbc9">pos_</a>.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> &amp;&amp; neigh.pos_.y != remove_tile.<a class="code hl_variable" href="structmaptile.html#a93e125b91c77b00f653a12800b24dbc9">pos_</a>.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> ) ||</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>                    ( neigh.pos_.x != remove_tile2.<a class="code hl_variable" href="structmaptile.html#a93e125b91c77b00f653a12800b24dbc9">pos_</a>.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> &amp;&amp; neigh.pos_.y != remove_tile2.<a class="code hl_variable" href="structmaptile.html#a93e125b91c77b00f653a12800b24dbc9">pos_</a>.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> ) ||</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>                    ( neigh.pos_.x != remove_tile3.<a class="code hl_variable" href="structmaptile.html#a93e125b91c77b00f653a12800b24dbc9">pos_</a>.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> &amp;&amp; neigh.pos_.y != remove_tile3.<a class="code hl_variable" href="structmaptile.html#a93e125b91c77b00f653a12800b24dbc9">pos_</a>.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> ) ) {</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>                    neighbour_vec.push_back( i );</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( 1, std::max( 2, windpower ) ) ) {</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>                    neighbour_vec.push_back( i );</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>                }</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>            }</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>            <span class="keywordflow">if</span>( !neighbour_vec.empty() ) {</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>                std::pair&lt;tripoint, maptile&gt; &amp;n = neighs[neighbour_vec[<a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, neighbour_vec.size() - 1 )]];</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>                <a class="code hl_function" href="classmap.html#aa7959ae0022b6910c744d14d8cc218ed">gas_spread_to</a>( cur, n.second, n.first );</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>            }</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>        }</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classmap.html#a87a151868377cb4b2843de06991c97da">zlevels</a> &amp;&amp; p.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> &lt; <a class="code hl_variable" href="game__constants_8h.html#a3984a9476d1edc78e4e7b886a08d4d4b">OVERMAP_HEIGHT</a> ) {</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> up{ p.<a class="code hl_function" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>(), p.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> + 1 };</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>        <a class="code hl_struct" href="structmaptile.html">maptile</a> up_tile = <a class="code hl_function" href="classmap.html#aef5205f2179c538caf9901871d434462">maptile_at_internal</a>( up );</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classmap.html#af4227f2341fcd97f9dab44741bdb0a84">gas_can_spread_to</a>( cur, up_tile ) &amp;&amp; <a class="code hl_function" href="classmap.html#a3188771064ca49d4798c6a80bfad0fcd">valid_move</a>( p, up, <span class="keyword">true</span>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>            <a class="code hl_function" href="classmap.html#aa7959ae0022b6910c744d14d8cc218ed">gas_spread_to</a>( cur, up_tile, up );</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>        }</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>    }</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>}</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span> </div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno"><a class="line" href="map__field_8cpp.html#accd8645ba580d83d1de9951585810aac">  352</a></span><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="map__field_8cpp.html#accd8645ba580d83d1de9951585810aac">check_flammable</a>( <span class="keyword">const</span> <a class="code hl_struct" href="structmap__data__common__t.html">map_data_common_t</a> &amp;t )</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>{</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>    <span class="keywordflow">return</span> t.<a class="code hl_function" href="structmap__data__common__t.html#a630778707744fb147436b9aa0c370a7e">has_flag</a>( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a864d6ad5483bbf02eb5653e30b42edfd">TFLAG_FLAMMABLE</a> ) || t.<a class="code hl_function" href="structmap__data__common__t.html#a630778707744fb147436b9aa0c370a7e">has_flag</a>( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a9a5b42bf32cf92352e066de02b6858ad">TFLAG_FLAMMABLE_ASH</a> ) ||</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>           t.<a class="code hl_function" href="structmap__data__common__t.html#a630778707744fb147436b9aa0c370a7e">has_flag</a>( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a67a9abfd9f6e2c9bd1c299f5ef6279e5">TFLAG_FLAMMABLE_HARD</a> );</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>}</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span> </div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span><span class="comment">/*</span></div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span><span class="comment">Helper function that encapsulates the logic involved in creating hot air.</span></div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span><span class="comment">*/</span></div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno"><a class="line" href="classmap.html#a46a11e492059459bbf26ba0f44ad951a">  361</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classmap.html#a46a11e492059459bbf26ba0f44ad951a">map::create_hot_air</a>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;p, <span class="keywordtype">int</span> intensity )</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>{</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>    <a class="code hl_class" href="classint__id.html">field_type_id</a> hot_air;</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>    <span class="keywordflow">switch</span>( intensity ) {</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>            hot_air = <a class="code hl_variable" href="field__type_8cpp.html#a8f63a8c3d9cdad5b9d6cd63fd3f3c4c5">fd_hot_air1</a>;</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>        <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>            hot_air = <a class="code hl_variable" href="field__type_8cpp.html#a6a31d100c09ce90e147a8a65bca88638">fd_hot_air2</a>;</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>        <span class="keywordflow">case</span> 3:</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>            hot_air = <a class="code hl_variable" href="field__type_8cpp.html#a476bfde4b1dbcb83067ee1c3639070b3">fd_hot_air3</a>;</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>        <span class="keywordflow">case</span> 4:</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>            hot_air = <a class="code hl_variable" href="field__type_8cpp.html#a9f3252ca58a824113fb194566f5b270f">fd_hot_air4</a>;</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>            <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to spread hot air with intensity %d&quot;</span>, intensity );</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>    }</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span> </div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> counter = 0; counter &lt; 5; counter++ ) {</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>        <a class="code hl_struct" href="structtripoint.html">tripoint</a> dst( p + <a class="code hl_struct" href="structpoint.html">point</a>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( -1, 1 ), <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( -1, 1 ) ) );</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>        <a class="code hl_function" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( dst, hot_air, 1 );</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>    }</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>}</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span> </div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span><span class="comment">/*</span></div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span><span class="comment">Function: process_fields_in_submap</span></div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span><span class="comment">Iterates over every field on every tile of the given submap given as parameter.</span></div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span><span class="comment">This is the general update function for field effects. This should only be called once per game turn.</span></div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span><span class="comment">If you need to insert a new field behavior per unit time add a case statement in the switch below.</span></div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span><span class="comment">*/</span></div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno"><a class="line" href="classmap.html#aa926674ebd4c5600b1994a73cd492fae">  394</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classmap.html#aa926674ebd4c5600b1994a73cd492fae">map::process_fields_in_submap</a>( <a class="code hl_class" href="classsubmap.html">submap</a> *<span class="keyword">const</span> current_submap,</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>                                    <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;<a class="code hl_class" href="classsubmap.html">submap</a> )</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>{</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>    <a class="code hl_struct" href="structscent__block.html">scent_block</a> sblk( <a class="code hl_class" href="classsubmap.html">submap</a>, <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;scent );</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span> </div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>    <span class="comment">// Holds m.field_at(x,y).find_field(fd_some_field) type returns.</span></div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>    <span class="comment">// Just to avoid typing that long string for a temp value.</span></div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>    <a class="code hl_class" href="classfield__entry.html">field_entry</a> *tmpfld = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span> </div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> thep;</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>    thep.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> = <a class="code hl_class" href="classsubmap.html">submap</a>.z;</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span> </div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>    <span class="comment">// Initialize the map tile wrapper</span></div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>    <a class="code hl_struct" href="structmaptile.html">maptile</a> map_tile( current_submap, <a class="code hl_variable" href="point_8h.html#a0ee2195dcb488ae55fbf4316f5011172">point_zero</a> );</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>    <span class="keywordtype">int</span> &amp;locx = map_tile.<a class="code hl_variable" href="structmaptile.html#a93e125b91c77b00f653a12800b24dbc9">pos_</a>.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a>;</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>    <span class="keywordtype">int</span> &amp;locy = map_tile.<a class="code hl_variable" href="structmaptile.html#a93e125b91c77b00f653a12800b24dbc9">pos_</a>.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a>;</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> sm_offset( <a class="code hl_class" href="classsubmap.html">submap</a>.x * <a class="code hl_variable" href="game__constants_8h.html#a39fd8a829e3dc412646663066dbdb54c">SEEX</a>, <a class="code hl_class" href="classsubmap.html">submap</a>.y * <a class="code hl_variable" href="game__constants_8h.html#a4cfa35de359af17f7bc6c2a424339eb5">SEEY</a> );</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span> </div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>    <span class="comment">// Loop through all tiles in this submap indicated by current_submap</span></div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>    <span class="keywordflow">for</span>( locx = 0; locx &lt; <a class="code hl_variable" href="game__constants_8h.html#a39fd8a829e3dc412646663066dbdb54c">SEEX</a>; locx++ ) {</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>        <span class="keywordflow">for</span>( locy = 0; locy &lt; <a class="code hl_variable" href="game__constants_8h.html#a4cfa35de359af17f7bc6c2a424339eb5">SEEY</a>; locy++ ) {</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>            <span class="comment">// Get a reference to the field variable from the submap;</span></div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>            <span class="comment">// contains all the pointers to the real field effects.</span></div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>            <a class="code hl_class" href="classfield.html">field</a> &amp;curfield = current_submap-&gt;<a class="code hl_function" href="classsubmap.html#ab97d87719e926fc4f7c614196666cbcf">get_field</a>( { <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( locx ), <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( locy ) } );</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span> </div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>            <span class="comment">// when displayed_field_type == fd_null it means that `curfield` has no fields inside</span></div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>            <span class="comment">// avoids instantiating (relatively) expensive map iterator</span></div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>            <span class="keywordflow">if</span>( !curfield.<a class="code hl_function" href="classfield.html#a8adfc9dd4000543431b4d1a94ab312ab">displayed_field_type</a>() ) {</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>            }</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span> </div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>            <span class="comment">// This is a translation from local coordinates to submap coordinates.</span></div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>            <span class="comment">// All submaps are in one long 1d array.</span></div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>            thep.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> = locx + sm_offset.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a>;</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>            thep.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> = locy + sm_offset.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a>;</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>            <span class="comment">// A const reference to the tripoint above, so that the code below doesn&#39;t accidentally change it</span></div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;p = thep;</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span> </div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>            <span class="comment">// This should be true only when the field in the current tile changes transparency state,</span></div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>            <span class="comment">// More correctly: not just when the field is opaque, but when it changes state</span></div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>            <span class="comment">// to a more/less transparent one</span></div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>            <span class="keywordtype">bool</span> dirty_transparency_cache = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span> </div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>            <span class="keywordflow">for</span>( <span class="keyword">auto</span> it = curfield.<a class="code hl_function" href="classfield.html#a4b77d0274c7e8a91e86e814acac06134">begin</a>(); it != curfield.<a class="code hl_function" href="classfield.html#acf3d02faed2e57422ee4f657d242b71e">end</a>(); ) {</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>                <span class="comment">// Iterating through all field effects in the submap&#39;s field.</span></div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>                <a class="code hl_class" href="classfield__entry.html">field_entry</a> &amp;cur = it-&gt;second;</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span> </div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>                <span class="comment">// Holds cur.get_field_type() as that is what the old system used before rewrite.</span></div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>                <a class="code hl_class" href="classint__id.html">field_type_id</a> cur_fd_type_id = cur.<a class="code hl_function" href="classfield__entry.html#af76e247514edaeed4bdc58638bfa0ae1">get_field_type</a>();</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span> </div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>                <span class="comment">// The field might have been killed by processing a neighbor field</span></div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>                <span class="keywordflow">if</span>( !cur.<a class="code hl_function" href="classfield__entry.html#a3b257586eb47865dae75df0ea947ebb3">is_field_alive</a>() ) {</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>                    <span class="keywordflow">if</span>( !cur_fd_type_id-&gt;<a class="code hl_function" href="structfield__type.html#a56afdea6073a57b9c8bf43aa6cdaed6a">get_transparent</a>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() - 1 ) ) {</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>                        dirty_transparency_cache = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>                    }</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>                    --current_submap-&gt;<a class="code hl_variable" href="classsubmap.html#aa86d0130ed1d1556482b2f7478633778">field_count</a>;</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>                    curfield.<a class="code hl_function" href="classfield.html#ae2b200f31d39fa6f8c57750d88f86d5b">remove_field</a>( it++ );</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>                }</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span> </div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>                <span class="comment">// Again, legacy support in the event someone Mods set_field_intensity to allow more values.</span></div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>                <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() &gt; 3 || cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() &lt; 1 ) {</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>                    <span class="comment">// TODO: Remove this eventually as we would suppoort more than 3 field intensity levels</span></div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>                    <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Whoooooa intensity of %d&quot;</span>, cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() );</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>                }</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span> </div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>                dirty_transparency_cache |= cur_fd_type_id-&gt;<a class="code hl_variable" href="structfield__type.html#a8af087b6107c20a7401ca0ac9831c440">dirty_transparency_cache</a>;</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span> </div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>                <span class="comment">// Don&#39;t process &quot;newborn&quot; fields. This gives the player time to run if they need to.</span></div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>                <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() == 0_turns ) {</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>                    cur_fd_type_id = <a class="code hl_variable" href="field__type_8cpp.html#a94a7b189d5f6fd60b9f4aac2624560d7">fd_null</a>;</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>                }</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span> </div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>                <span class="keyword">const</span> <a class="code hl_struct" href="structfield__type.html">field_type</a> &amp;cur_fd_type = *cur_fd_type_id;</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span> </div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>                <span class="comment">// Upgrade field intensity</span></div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>                <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#aaa0c1f4200442df272bfe66f0768ffd9">intensity_upgrade_chance</a>() &gt; 0 &amp;&amp;</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>                    <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( cur.<a class="code hl_function" href="classfield__entry.html#aaa0c1f4200442df272bfe66f0768ffd9">intensity_upgrade_chance</a>() ) &amp;&amp;</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>                    cur.<a class="code hl_function" href="classfield__entry.html#a24da46be59f0d3d3d718eb225f44c7c3">intensity_upgrade_duration</a>() &gt; 0_turns &amp;&amp;</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>                    <a class="code hl_function" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( cur.<a class="code hl_function" href="classfield__entry.html#a24da46be59f0d3d3d718eb225f44c7c3">intensity_upgrade_duration</a>() ) ) {</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>                    cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() + 1 );</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>                }</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span> </div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>                <span class="keywordtype">int</span> part;</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>                <span class="keyword">const</span> <a class="code hl_struct" href="structter__t.html">ter_t</a> &amp;<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a> = map_tile.<a class="code hl_function" href="structmaptile.html#a09a3fb71b0c8d22a8d1257144205d775">get_ter_t</a>();</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>                <span class="comment">// Dissipate faster in water</span></div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>.has_flag( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a36b67adb6e7c521980de8a6688085d16">TFLAG_SWIMMABLE</a> ) ) {</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>                    cur.<a class="code hl_function" href="classfield__entry.html#a5c3447c290158277c2d21b1996d9365e">mod_field_age</a>( cur.<a class="code hl_function" href="classfield__entry.html#a2fa8bc80139930630f3675efeb74acf4">get_underwater_age_speedup</a>() );</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>                }</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>                <span class="keywordflow">if</span>( cur_fd_type_id == <a class="code hl_variable" href="field__type_8cpp.html#ab7a8a9cdb74831f6553f4abf5df22873">fd_acid</a> ) {</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>                    <span class="comment">// Try to fall by a z-level</span></div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>                    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classmap.html#a87a151868377cb4b2843de06991c97da">zlevels</a> &amp;&amp; p.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> &gt; -<a class="code hl_variable" href="game__constants_8h.html#aad0eacfa516a8f7e005674027d7640fe">OVERMAP_DEPTH</a> ) {</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>                        <a class="code hl_struct" href="structtripoint.html">tripoint</a> dst{ p.<a class="code hl_function" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>(), p.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> - 1 };</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>                        <span class="keywordflow">if</span>( <a class="code hl_function" href="classmap.html#a3188771064ca49d4798c6a80bfad0fcd">valid_move</a>( p, dst, <span class="keyword">true</span>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>                            <a class="code hl_class" href="classfield__entry.html">field_entry</a> *acid_there = <a class="code hl_function" href="classmap.html#a395a729a4b954692cf08d13e1d32f73e">field_at</a>( dst ).<a class="code hl_function" href="classfield.html#a0560f05925c46ef62436765b8db90731">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#ab7a8a9cdb74831f6553f4abf5df22873">fd_acid</a> );</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>                            <span class="keywordflow">if</span>( acid_there == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>                                <a class="code hl_function" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( dst, <a class="code hl_variable" href="field__type_8cpp.html#ab7a8a9cdb74831f6553f4abf5df22873">fd_acid</a>, cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>(), cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() );</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>                            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>                                <span class="comment">// Math can be a bit off,</span></div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>                                <span class="comment">// but &quot;boiling&quot; falling acid can be allowed to be stronger</span></div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>                                <span class="comment">// than acid that just lies there</span></div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>                                <span class="keyword">const</span> <span class="keywordtype">int</span> sum_intensity = cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() + acid_there-&gt;<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>();</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>                                <span class="keyword">const</span> <span class="keywordtype">int</span> new_intensity = std::min( 3, sum_intensity );</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>                                <span class="comment">// No way to get precise elapsed time, let&#39;s always reset</span></div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>                                <span class="comment">// Allow falling acid to last longer than regular acid to show it off</span></div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>                                <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> new_age = -1_minutes * ( sum_intensity - new_intensity );</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>                                acid_there-&gt;<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( new_intensity );</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>                                acid_there-&gt;<a class="code hl_function" href="classfield__entry.html#a7b3755413ee669cf1b84f54883f2e363">set_field_age</a>( new_age );</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>                            }</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span> </div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>                            <span class="comment">// Set ourselves up for removal</span></div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>                            cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( 0 );</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>                        }</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>                    }</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>                    <span class="comment">// TODO: Allow spreading to the sides if age &lt; 0 &amp;&amp; intensity == 3</span></div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>                }</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>                <span class="keywordflow">if</span>( cur_fd_type.<a class="code hl_variable" href="structfield__type.html#ada24e211101baed318c9f0ec9fa040f9">apply_slime_factor</a> &gt; 0 ) {</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>                    sblk.<a class="code hl_function" href="structscent__block.html#ad1dcad9d99484b452d6882fe62cade0a">apply_slime</a>( p, cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() * cur_fd_type.<a class="code hl_variable" href="structfield__type.html#ada24e211101baed318c9f0ec9fa040f9">apply_slime_factor</a> );</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>                }</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>                <span class="keywordflow">if</span>( cur_fd_type_id == <a class="code hl_variable" href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a> ) {</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>                    cur.<a class="code hl_function" href="classfield__entry.html#a7b3755413ee669cf1b84f54883f2e363">set_field_age</a>( std::max( -24_hours, cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() ) );</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>                    <span class="comment">// Entire objects for ter/frn for flags</span></div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>                    <span class="keyword">const</span> <a class="code hl_struct" href="structter__t.html">ter_t</a> &amp;<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a> = map_tile.<a class="code hl_function" href="structmaptile.html#a09a3fb71b0c8d22a8d1257144205d775">get_ter_t</a>();</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>                    <span class="keyword">const</span> <a class="code hl_struct" href="structfurn__t.html">furn_t</a> &amp;frn = map_tile.<a class="code hl_function" href="structmaptile.html#ac457d93598440f370cb86702caddfdd7">get_furn_t</a>();</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span> </div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>                    <span class="comment">// We&#39;ve got ter/furn cached, so let&#39;s use that</span></div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>                    <span class="keyword">const</span> <span class="keywordtype">bool</span> is_sealed = <a class="code hl_function" href="map__field_8cpp.html#a9de296e6ced54bc59e40089f8821075c">ter_furn_has_flag</a>( <a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>, frn, <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a3fd392fbd28bc7d8438d40c0b2c1054a">TFLAG_SEALED</a> ) &amp;&amp;</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>                                           !<a class="code hl_function" href="map__field_8cpp.html#a9de296e6ced54bc59e40089f8821075c">ter_furn_has_flag</a>( <a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>, frn, <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a02eb9b88d6df624115f70728bda932a4">TFLAG_ALLOW_FIELD_EFFECT</a> );</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>                    <span class="comment">// Consumed items count</span></div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>                    <span class="keywordtype">int</span> consumed = 0;</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>                    <span class="comment">// How much time to add to the fire&#39;s life due to burned items/terrain/furniture</span></div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>                    <a class="code hl_class" href="classtime__duration.html">time_duration</a> time_added = 0_turns;</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>                    <span class="comment">// Checks if the fire can spread</span></div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>                    <span class="keyword">const</span> <span class="keywordtype">bool</span> can_spread = !<a class="code hl_function" href="map__field_8cpp.html#a9de296e6ced54bc59e40089f8821075c">ter_furn_has_flag</a>( <a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>, frn, <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258accfec381626070e2f0131404e1e964c7">TFLAG_FIRE_CONTAINER</a> );</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>                    <span class="keyword">const</span> <span class="keywordtype">bool</span> no_floor = <a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>.has_flag( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a7ae3043cdc343c2784d644bcafe86269">TFLAG_NO_FLOOR</a> );</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>                    <span class="comment">// If the flames are in furniture with fire_container flag like brazier or oven,</span></div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>                    <span class="comment">// they&#39;re fully contained, so skip consuming terrain</span></div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>                    <span class="keyword">const</span> <span class="keywordtype">bool</span> can_burn = !no_floor &amp;&amp; can_spread &amp;&amp;</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>                                          ( <a class="code hl_function" href="map__field_8cpp.html#accd8645ba580d83d1de9951585810aac">check_flammable</a>( <a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a> ) || <a class="code hl_function" href="map__field_8cpp.html#accd8645ba580d83d1de9951585810aac">check_flammable</a>( frn ) );</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>                    <span class="comment">// The huge indent below should probably be somehow moved away from here</span></div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>                    <span class="comment">// without forcing the function to use i_at( p ) for fires without items</span></div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>                    <span class="keywordflow">if</span>( !is_sealed &amp;&amp; map_tile.<a class="code hl_function" href="structmaptile.html#a9c9e15a1b6db4e935fc1230519e45249">get_item_count</a>() &gt; 0 ) {</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>                        <a class="code hl_class" href="classmap__stack.html">map_stack</a> items_here = <a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( p );</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>                        std::vector&lt;item&gt; new_content;</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>                        <span class="keywordflow">for</span>( <span class="keyword">auto</span> <a class="code hl_enumvalue" href="active__item__cache_8h.html#acc683dc9a32f0cb3fb0032b41c6e17b5a16ec845a09700f77aea693ee40434e73">explosive</a> = items_here.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(); <a class="code hl_enumvalue" href="active__item__cache_8h.html#acc683dc9a32f0cb3fb0032b41c6e17b5a16ec845a09700f77aea693ee40434e73">explosive</a> != items_here.<a class="code hl_function" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(); ) {</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>                            <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="active__item__cache_8h.html#acc683dc9a32f0cb3fb0032b41c6e17b5a16ec845a09700f77aea693ee40434e73">explosive</a>-&gt;will_explode_in_fire() ) {</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>                                <span class="comment">// We need to make a copy because the iterator validity is not predictable</span></div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>                                <a class="code hl_class" href="classitem.html">item</a> copy = *<a class="code hl_enumvalue" href="active__item__cache_8h.html#acc683dc9a32f0cb3fb0032b41c6e17b5a16ec845a09700f77aea693ee40434e73">explosive</a>;</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>                                <a class="code hl_enumvalue" href="active__item__cache_8h.html#acc683dc9a32f0cb3fb0032b41c6e17b5a16ec845a09700f77aea693ee40434e73">explosive</a> = items_here.<a class="code hl_function" href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">erase</a>( <a class="code hl_enumvalue" href="active__item__cache_8h.html#acc683dc9a32f0cb3fb0032b41c6e17b5a16ec845a09700f77aea693ee40434e73">explosive</a> );</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>                                <span class="keywordflow">if</span>( copy.<a class="code hl_function" href="classitem.html#ae79cfef3dd3698b98478cfc08ba20a01">detonate</a>( p, new_content ) ) {</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>                                    <span class="comment">// Need to restart, iterators may not be valid</span></div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>                                    <a class="code hl_enumvalue" href="active__item__cache_8h.html#acc683dc9a32f0cb3fb0032b41c6e17b5a16ec845a09700f77aea693ee40434e73">explosive</a> = items_here.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>();</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>                                }</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>                            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>                                ++<a class="code hl_enumvalue" href="active__item__cache_8h.html#acc683dc9a32f0cb3fb0032b41c6e17b5a16ec845a09700f77aea693ee40434e73">explosive</a>;</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>                            }</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>                        }</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span> </div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>                        <a class="code hl_struct" href="structfire__data.html">fire_data</a> frd( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>(), !can_spread );</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>                        <span class="comment">// The highest # of items this fire can remove in one turn</span></div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>                        <span class="keywordtype">int</span> max_consume = cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() * 2;</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span> </div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>                        <span class="keywordflow">for</span>( <span class="keyword">auto</span> fuel = items_here.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(); fuel != items_here.<a class="code hl_function" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>() &amp;&amp; consumed &lt; max_consume; ) {</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>                            <span class="comment">// `item::burn` modifies the charges in order to simulate some of them getting</span></div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>                            <span class="comment">// destroyed by the fire, this changes the item weight, but may not actually</span></div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>                            <span class="comment">// destroy it. We need to spawn products anyway.</span></div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>                            <span class="keyword">const</span> <a class="code hl_class" href="classunits_1_1quantity.html">units::mass</a> old_weight = fuel-&gt;weight( <span class="keyword">false</span> );</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>                            <span class="keywordtype">bool</span> <a class="code hl_enumvalue" href="mutation_8h.html#a034ae5e964e0a02c1de845df8b031755aff9a344674366cee6d23a1e3bda6c176">destroyed</a> = fuel-&gt;burn( frd );</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>                            <span class="comment">// If the item is considered destroyed, it may have negative charge count,</span></div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>                            <span class="comment">// see `item::burn?. This in turn means `item::weight` returns a negative value,</span></div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>                            <span class="comment">// which we can not use, so only call `weight` when it&#39;s still an existing item.</span></div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>                            <span class="keyword">const</span> <a class="code hl_class" href="classunits_1_1quantity.html">units::mass</a> new_weight = <a class="code hl_enumvalue" href="mutation_8h.html#a034ae5e964e0a02c1de845df8b031755aff9a344674366cee6d23a1e3bda6c176">destroyed</a> ? 0_gram : fuel-&gt;weight( <span class="keyword">false</span> );</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>                            <span class="keywordflow">if</span>( old_weight != new_weight ) {</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>                                <a class="code hl_function" href="classmap.html#a9ada8bea4712648bcb27d0cd32f63c6a">create_burnproducts</a>( p, *fuel, old_weight - new_weight );</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>                            }</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span> </div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>                            <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="mutation_8h.html#a034ae5e964e0a02c1de845df8b031755aff9a344674366cee6d23a1e3bda6c176">destroyed</a> ) {</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>                                <span class="comment">// If we decided the item was destroyed by fire, remove it.</span></div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>                                <span class="comment">// But remember its contents, except for irremovable mods, if any</span></div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>                                <span class="keyword">const</span> std::list&lt;item *&gt; content_list = fuel-&gt;contents.all_items_top();</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>                                <span class="keywordflow">for</span>( <a class="code hl_class" href="classitem.html">item</a> *it : content_list ) {</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>                                    <span class="keywordflow">if</span>( !it-&gt;is_irremovable() ) {</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>                                        new_content.push_back( <a class="code hl_class" href="classitem.html">item</a>( *it ) );</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>                                    }</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>                                }</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>                                fuel = items_here.<a class="code hl_function" href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">erase</a>( fuel );</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>                                consumed++;</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>                            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>                                ++fuel;</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>                            }</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>                        }</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span> </div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>                        <a class="code hl_function" href="classmap.html#a4648afd5a1ecdebba3dc5c5068363f8e">spawn_items</a>( p, new_content );</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>                        time_added = 1_turns * <a class="code hl_function" href="rng_8cpp.html#acd19ae79e3590a99c9eaf0389318b686">roll_remainder</a>( frd.<a class="code hl_variable" href="structfire__data.html#a766c1e9448a11a83188b5e97e3276004">fuel_produced</a> );</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>                    }</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span> </div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>                    <span class="comment">// Get the part of the vehicle in the fire (_internal skips the boundary check)</span></div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>                    <a class="code hl_class" href="classvehicle.html">vehicle</a> *veh = <a class="code hl_function" href="classmap.html#ab822562ab4d1069ff53486f67098d0da">veh_at_internal</a>( p, part );</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>                    <span class="keywordflow">if</span>( veh != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>                        veh-&gt;<a class="code hl_function" href="classvehicle.html#a7d539c327a7a8cb987d637f68f918cdf">damage</a>( part, cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() * 10, <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aae6af44cd6e0e8cafcc63cea198f627c9">DT_HEAT</a>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>                        <span class="comment">// Damage the vehicle in the fire.</span></div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>                    }</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>                    <span class="keywordflow">if</span>( can_burn ) {</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>                        <span class="keywordflow">if</span>( <a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>.has_flag( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a36b67adb6e7c521980de8a6688085d16">TFLAG_SWIMMABLE</a> ) ) {</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>                            <span class="comment">// Flames die quickly on water</span></div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>                            cur.<a class="code hl_function" href="classfield__entry.html#a7b3755413ee669cf1b84f54883f2e363">set_field_age</a>( cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() + 4_minutes );</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>                        }</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span> </div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>                        <span class="comment">// Consume the terrain we&#39;re on</span></div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>                        <span class="keywordflow">if</span>( <a class="code hl_function" href="map__field_8cpp.html#a9de296e6ced54bc59e40089f8821075c">ter_furn_has_flag</a>( <a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>, frn, <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a864d6ad5483bbf02eb5653e30b42edfd">TFLAG_FLAMMABLE</a> ) ) {</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>                            <span class="comment">// The fire feeds on the ground itself until max intensity.</span></div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>                            time_added += 1_turns * ( 5 - cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() );</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>                            <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() &gt; 1 &amp;&amp;</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>                                <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 200 - cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() * 50 ) ) {</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>                                <a class="code hl_function" href="classmap.html#a07dbd4505e0464a1f58bc732febfd6f4">destroy</a>( p, <span class="keyword">false</span> );</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>                            }</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span> </div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>                        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="map__field_8cpp.html#a9de296e6ced54bc59e40089f8821075c">ter_furn_has_flag</a>( <a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>, frn, <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a67a9abfd9f6e2c9bd1c299f5ef6279e5">TFLAG_FLAMMABLE_HARD</a> ) &amp;&amp;</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>                                   <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>                            <span class="comment">// The fire feeds on the ground itself until max intensity.</span></div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>                            time_added += 1_turns * ( 4 - cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() );</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>                            <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() &gt; 1 &amp;&amp;</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>                                <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 200 - cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() * 50 ) ) {</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>                                <a class="code hl_function" href="classmap.html#a07dbd4505e0464a1f58bc732febfd6f4">destroy</a>( p, <span class="keyword">false</span> );</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>                            }</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span> </div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>                        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>.has_flag( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a9a5b42bf32cf92352e066de02b6858ad">TFLAG_FLAMMABLE_ASH</a> ) ) {</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>                            <span class="comment">// The fire feeds on the ground itself until max intensity.</span></div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>                            time_added += 1_turns * ( 5 - cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() );</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>                            <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() &gt; 1 &amp;&amp;</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>                                <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 200 - cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() * 50 ) ) {</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>                                <span class="keywordflow">if</span>( p.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> &gt; 0 ) {</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>                                    <span class="comment">// We&#39;re in the air</span></div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>                                    <a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( p, <a class="code hl_variable" href="mapdata_8cpp.html#a231b1a6e4c654fd6584736e5397439c9">t_open_air</a> );</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>                                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>                                    <a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( p, <a class="code hl_variable" href="mapdata_8cpp.html#aa4573ce2c594834a8ced806a5099f3e3">t_dirt</a> );</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>                                }</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>                            }</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span> </div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>                        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( frn.<a class="code hl_function" href="structmap__data__common__t.html#a630778707744fb147436b9aa0c370a7e">has_flag</a>( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a9a5b42bf32cf92352e066de02b6858ad">TFLAG_FLAMMABLE_ASH</a> ) ) {</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>                            <span class="comment">// The fire feeds on the ground itself until max intensity.</span></div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>                            time_added += 1_turns * ( 5 - cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() );</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>                            <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() &gt; 1 &amp;&amp;</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>                                <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 200 - cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() * 50 ) ) {</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>                                <a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( p, <a class="code hl_variable" href="mapdata_8cpp.html#a7c029a5a6e332f6c3c9db297c2e54e3f">f_ash</a> );</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>                                <a class="code hl_function" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( p, <a class="code hl_class" href="classitem.html">item</a>( <span class="stringliteral">&quot;ash&quot;</span> ) );</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>                            }</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span> </div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>                        }</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>                    }</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span> </div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>                    <span class="keywordflow">if</span>( <a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>.has_flag( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a7ae3043cdc343c2784d644bcafe86269">TFLAG_NO_FLOOR</a> ) &amp;&amp; <a class="code hl_variable" href="classmap.html#a87a151868377cb4b2843de06991c97da">zlevels</a> &amp;&amp; p.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> &gt; -<a class="code hl_variable" href="game__constants_8h.html#aad0eacfa516a8f7e005674027d7640fe">OVERMAP_DEPTH</a> ) {</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>                        <span class="comment">// We&#39;re hanging in the air - let&#39;s fall down</span></div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>                        <a class="code hl_struct" href="structtripoint.html">tripoint</a> dst{ p.<a class="code hl_function" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>(), p.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> - 1 };</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>                        <span class="keywordflow">if</span>( <a class="code hl_function" href="classmap.html#a3188771064ca49d4798c6a80bfad0fcd">valid_move</a>( p, dst, <span class="keyword">true</span>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>                            <a class="code hl_struct" href="structmaptile.html">maptile</a> dst_tile = <a class="code hl_function" href="classmap.html#aef5205f2179c538caf9901871d434462">maptile_at_internal</a>( dst );</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>                            <a class="code hl_class" href="classfield__entry.html">field_entry</a> *fire_there = dst_tile.<a class="code hl_function" href="structmaptile.html#a938297885d93f2c7d4f283363ca2f606">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a> );</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>                            <span class="keywordflow">if</span>( fire_there == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>                                <a class="code hl_function" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( dst, <a class="code hl_variable" href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a>, 1, 0_turns, <span class="keyword">false</span> );</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>                                cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() - 1 );</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>                            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>                                <span class="comment">// Don&#39;t fuel raging fires or they&#39;ll burn forever</span></div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>                                <span class="comment">// as they can produce small fires above themselves</span></div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>                                <span class="keywordtype">int</span> new_intensity = std::max( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>(),</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>                                                              fire_there-&gt;<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() );</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>                                <span class="comment">// Allow smaller fires to combine</span></div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>                                <span class="keywordflow">if</span>( new_intensity &lt; 3 &amp;&amp;</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>                                    cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() == fire_there-&gt;<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() ) {</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>                                    new_intensity++;</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>                                }</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>                                <span class="comment">// A raging fire below us can support us for a while</span></div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>                                <span class="comment">// Otherwise decay and decay fast</span></div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>                                <span class="keywordflow">if</span>( fire_there-&gt;<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() &lt; 3 || <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 10 ) ) {</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>                                    cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() - 1 );</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>                                }</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>                                fire_there-&gt;<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( new_intensity );</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>                            }</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>                        }</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>                    }</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>                    <span class="comment">// Lower age is a longer lasting fire</span></div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>                    <span class="keywordflow">if</span>( time_added != 0_turns ) {</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>                        cur.<a class="code hl_function" href="classfield__entry.html#a7b3755413ee669cf1b84f54883f2e363">set_field_age</a>( cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() - time_added );</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( can_burn ) {</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>                        <span class="comment">// Nothing to burn = fire should be dying out faster</span></div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>                        <span class="comment">// Drain more power from big fires, so that they stop raging over nothing</span></div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>                        <span class="comment">// Except for fires on stoves and fireplaces, those are made to keep the fire alive</span></div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>                        cur.<a class="code hl_function" href="classfield__entry.html#a5c3447c290158277c2d21b1996d9365e">mod_field_age</a>( 10_seconds * cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() );</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>                    }</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span> </div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>                    <span class="comment">// Allow raging fires (and only raging fires) to spread up</span></div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>                    <span class="comment">// Spreading down is achieved by wrecking the walls/floor and then falling</span></div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>                    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classmap.html#a87a151868377cb4b2843de06991c97da">zlevels</a> &amp;&amp; cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() == 3 &amp;&amp; p.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> &lt; <a class="code hl_variable" href="game__constants_8h.html#a3984a9476d1edc78e4e7b886a08d4d4b">OVERMAP_HEIGHT</a> ) {</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>                        <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> dst_p = <a class="code hl_struct" href="structtripoint.html">tripoint</a>( p.<a class="code hl_function" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>(), p.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> + 1 );</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>                        <span class="comment">// Let it burn through the floor</span></div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>                        <a class="code hl_struct" href="structmaptile.html">maptile</a> dst = <a class="code hl_function" href="classmap.html#aef5205f2179c538caf9901871d434462">maptile_at_internal</a>( dst_p );</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>                        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;dst_ter = dst.<a class="code hl_function" href="structmaptile.html#a09a3fb71b0c8d22a8d1257144205d775">get_ter_t</a>();</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>                        <span class="keywordflow">if</span>( dst_ter.has_flag( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a7ae3043cdc343c2784d644bcafe86269">TFLAG_NO_FLOOR</a> ) ||</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>                            dst_ter.has_flag( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a864d6ad5483bbf02eb5653e30b42edfd">TFLAG_FLAMMABLE</a> ) ||</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>                            dst_ter.has_flag( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a9a5b42bf32cf92352e066de02b6858ad">TFLAG_FLAMMABLE_ASH</a> ) ||</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>                            dst_ter.has_flag( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a67a9abfd9f6e2c9bd1c299f5ef6279e5">TFLAG_FLAMMABLE_HARD</a> ) ) {</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>                            <a class="code hl_class" href="classfield__entry.html">field_entry</a> *nearfire = dst.<a class="code hl_function" href="structmaptile.html#a938297885d93f2c7d4f283363ca2f606">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a> );</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>                            <span class="keywordflow">if</span>( nearfire != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>                                nearfire-&gt;<a class="code hl_function" href="classfield__entry.html#a5c3447c290158277c2d21b1996d9365e">mod_field_age</a>( -2_turns );</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>                            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>                                <a class="code hl_function" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( dst_p, <a class="code hl_variable" href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a>, 1, 0_turns, <span class="keyword">false</span> );</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>                            }</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>                            <span class="comment">// Fueling fires above doesn&#39;t cost fuel</span></div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>                        }</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>                    }</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span> </div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>                    <span class="comment">// Below we will access our nearest 8 neighbors, so let&#39;s cache them now</span></div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>                    <span class="comment">// This should probably be done more globally, because large fires will re-do it a lot</span></div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>                    <span class="keyword">auto</span> neighs = <a class="code hl_function" href="classmap.html#a11dbf59db7e4322c15b4aab9dfef5a91">get_neighbors</a>( p );</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span> </div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>                    <span class="comment">// If the flames are in a pit, it can&#39;t spread to non-pit</span></div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>                    <span class="keyword">const</span> <span class="keywordtype">bool</span> in_pit = can_spread &amp;&amp; <a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>.<a class="code hl_function" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>.<a class="code hl_function" href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">id</a>() == <a class="code hl_variable" href="mapdata_8cpp.html#ae6822029506d9cb25c5077dfec866b86">t_pit</a>;</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span> </div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>                    <span class="comment">// Count adjacent fires, to optimize out needless smoke and hot air</span></div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>                    <span class="keywordtype">int</span> adjacent_fires = 0;</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span> </div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>                    <span class="comment">// If the flames are big, they contribute to adjacent flames</span></div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>                    <span class="keywordflow">if</span>( can_spread ) {</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>                        <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() &gt; 1 &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>                            <span class="comment">// Basically: Scan around for a spot,</span></div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>                            <span class="comment">// if there is more fire there, make it bigger and give it some fuel.</span></div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>                            <span class="comment">// This is how big fires spend their excess age:</span></div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>                            <span class="comment">// making other fires bigger. Flashpoint.</span></div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>                            <span class="keywordtype">size_t</span> end_it = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, neighs.size() - 1 ) );</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>                            <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = ( end_it + 1 ) % neighs.size(), <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> = 0;</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>                                 <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> != neighs.size() &amp;&amp; cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() &lt; 0_turns;</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>                                 i = ( i + 1 ) % neighs.size(), <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a>++ ) {</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>                                <a class="code hl_struct" href="structmaptile.html">maptile</a> &amp;dst = neighs[i].second;</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>                                <span class="keyword">auto</span> dstfld = dst.<a class="code hl_function" href="structmaptile.html#a938297885d93f2c7d4f283363ca2f606">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a> );</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>                                <span class="comment">// If the fire exists and is weaker than ours, boost it</span></div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>                                <span class="keywordflow">if</span>( dstfld != <span class="keyword">nullptr</span> &amp;&amp;</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>                                    ( dstfld-&gt;get_field_intensity() &lt;= cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() ||</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>                                      dstfld-&gt;get_field_age() &gt; cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() ) &amp;&amp;</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>                                    ( in_pit == ( dst.<a class="code hl_function" href="structmaptile.html#a9ea19f651f4ce0a70d044fac9caf6f90">get_ter</a>() == <a class="code hl_variable" href="mapdata_8cpp.html#ae6822029506d9cb25c5077dfec866b86">t_pit</a> ) ) ) {</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>                                    <span class="keywordflow">if</span>( dstfld-&gt;get_field_intensity() &lt; 2 ) {</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>                                        dstfld-&gt;<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( dstfld-&gt;get_field_intensity() + 1 );</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>                                    }</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span> </div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>                                    dstfld-&gt;set_field_age( dstfld-&gt;get_field_age() - 5_minutes );</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>                                    cur.<a class="code hl_function" href="classfield__entry.html#a7b3755413ee669cf1b84f54883f2e363">set_field_age</a>( cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() + 5_minutes );</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>                                }</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>                                <span class="keywordflow">if</span>( dstfld != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>                                    adjacent_fires++;</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>                                }</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>                            }</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>                        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() &lt; 0_turns &amp;&amp; cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() &lt; 3 ) {</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>                            <span class="comment">// See if we can grow into a stage 2/3 fire, for this</span></div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>                            <span class="comment">// burning neighbors are necessary in addition to</span></div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>                            <span class="comment">// field age &lt; 0, or alternatively, a LOT of fuel.</span></div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span> </div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>                            <span class="comment">// The maximum fire intensity is 1 for a lone fire, 2 for at least 1 neighbor,</span></div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>                            <span class="comment">// 3 for at least 2 neighbors.</span></div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>                            <span class="keywordtype">int</span> maximum_intensity = 1;</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span> </div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>                            <span class="comment">// The following logic looks a bit complex due to optimization concerns, so here are the semantics:</span></div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>                            <span class="comment">// 1. Calculate maximum field intensity based on fuel, -50 minutes is 2(medium), -500 minutes is 3(raging)</span></div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>                            <span class="comment">// 2. Calculate maximum field intensity based on neighbors, 3 neighbors is 2(medium), 7 or more neighbors is 3(raging)</span></div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>                            <span class="comment">// 3. Pick the higher maximum between 1. and 2.</span></div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>                            <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() &lt; -500_minutes ) {</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>                                maximum_intensity = 3;</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>                            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>                                <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;neigh : neighs ) {</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>                                    <span class="keywordflow">if</span>( neigh.second.get_field().find_field( <a class="code hl_variable" href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a> ) != nullptr ) {</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>                                        adjacent_fires++;</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>                                    }</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>                                }</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>                                maximum_intensity = 1 + ( adjacent_fires &gt;= 3 ) + ( adjacent_fires &gt;= 7 );</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span> </div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>                                <span class="keywordflow">if</span>( maximum_intensity &lt; 2 &amp;&amp; cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() &lt; -50_minutes ) {</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>                                    maximum_intensity = 2;</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>                                }</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>                            }</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span> </div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>                            <span class="comment">// If we consumed a lot, the flames grow higher</span></div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>                            <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() &lt; maximum_intensity &amp;&amp; cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() &lt; 0_turns ) {</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>                                <span class="comment">// Fires under 0 age grow in size. Level 3 fires under 0 spread later on.</span></div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>                                <span class="comment">// Weaken the newly-grown fire</span></div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>                                cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() + 1 );</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>                                cur.<a class="code hl_function" href="classfield__entry.html#a7b3755413ee669cf1b84f54883f2e363">set_field_age</a>( cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() + 10_minutes * cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() );</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>                            }</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>                        }</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span> </div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>                        <span class="comment">// Consume adjacent fuel / terrain / webs to spread.</span></div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>                        <span class="comment">// Our iterator will start at end_i + 1 and increment from there and then wrap around.</span></div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>                        <span class="comment">// This guarantees it will check all neighbors, starting from a random one</span></div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>                        <span class="keyword">const</span> <span class="keywordtype">size_t</span> end_i = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, neighs.size() - 1 ) );</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>                        <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = ( end_i + 1 ) % neighs.size(), <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> = 0;</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>                             <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> != neighs.size();</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>                             i = ( i + 1 ) % neighs.size(), <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a>++ ) {</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>                            <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() * 2 ) ) {</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>                                <span class="comment">// Skip some processing to save on CPU</span></div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>                                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>                            }</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span> </div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>                            <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;dst_p = neighs[i].first;</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>                            <a class="code hl_struct" href="structmaptile.html">maptile</a> &amp;dst = neighs[i].second;</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>                            <span class="comment">// No bounds checking here: we&#39;ll treat the invalid neighbors as valid.</span></div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>                            <span class="comment">// We&#39;re using the map tile wrapper, so we can treat invalid tiles as sentinels.</span></div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>                            <span class="comment">// This will create small oddities on map edges, but nothing more noticeable than</span></div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>                            <span class="comment">// &quot;cut-off&quot; that happens with bounds checks.</span></div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span> </div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>                            <a class="code hl_class" href="classfield__entry.html">field_entry</a> *nearfire = dst.<a class="code hl_function" href="structmaptile.html#a938297885d93f2c7d4f283363ca2f606">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a> );</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>                            <span class="keywordflow">if</span>( nearfire != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>                                <span class="comment">// We handled supporting fires in the section above, no need to do it here</span></div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>                                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>                            }</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span> </div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>                            <a class="code hl_class" href="classfield__entry.html">field_entry</a> *nearwebfld = dst.<a class="code hl_function" href="structmaptile.html#a938297885d93f2c7d4f283363ca2f606">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#afca1ca43633c0fc76d866752559218d4">fd_web</a> );</div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>                            <span class="keywordtype">int</span> spread_chance = 25 * ( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() - 1 );</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>                            <span class="keywordflow">if</span>( nearwebfld != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>                                spread_chance = 50 + spread_chance / 2;</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>                            }</div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span> </div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>                            <span class="keyword">const</span> <a class="code hl_struct" href="structter__t.html">ter_t</a> &amp;dster = dst.<a class="code hl_function" href="structmaptile.html#a09a3fb71b0c8d22a8d1257144205d775">get_ter_t</a>();</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>                            <span class="keyword">const</span> <a class="code hl_struct" href="structfurn__t.html">furn_t</a> &amp;dsfrn = dst.<a class="code hl_function" href="structmaptile.html#ac457d93598440f370cb86702caddfdd7">get_furn_t</a>();</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>                            <span class="comment">// Allow weaker fires to spread occasionally</span></div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>                            <span class="keyword">const</span> <span class="keywordtype">int</span> power = cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() + <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 5 );</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>                            <span class="keywordflow">if</span>( can_spread &amp;&amp; <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 100 ) &lt; spread_chance &amp;&amp;</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>                                ( <a class="code hl_function" href="map__field_8cpp.html#accd8645ba580d83d1de9951585810aac">check_flammable</a>( dster ) || <a class="code hl_function" href="map__field_8cpp.html#accd8645ba580d83d1de9951585810aac">check_flammable</a>( dsfrn ) ) &amp;&amp;</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>                                ( in_pit == ( dster.<a class="code hl_variable" href="structter__t.html#a876ecdb9de153e3d864ee221ed63bd45">id</a>.<a class="code hl_function" href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">id</a>() == <a class="code hl_variable" href="mapdata_8cpp.html#ae6822029506d9cb25c5077dfec866b86">t_pit</a> ) ) &amp;&amp;</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>                                (</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>                                    ( power &gt;= 3 &amp;&amp; cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() &lt; 0_turns &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 20 ) ) ||</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>                                    ( power &gt;= 2 &amp;&amp; ( <a class="code hl_function" href="map__field_8cpp.html#a9de296e6ced54bc59e40089f8821075c">ter_furn_has_flag</a>( dster, dsfrn, <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a864d6ad5483bbf02eb5653e30b42edfd">TFLAG_FLAMMABLE</a> ) &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) ) ) ||</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>                                    ( power &gt;= 2 &amp;&amp; ( <a class="code hl_function" href="map__field_8cpp.html#a9de296e6ced54bc59e40089f8821075c">ter_furn_has_flag</a>( dster, dsfrn, <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a9a5b42bf32cf92352e066de02b6858ad">TFLAG_FLAMMABLE_ASH</a> ) &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) ) ) ||</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>                                    ( power &gt;= 3 &amp;&amp; ( <a class="code hl_function" href="map__field_8cpp.html#a9de296e6ced54bc59e40089f8821075c">ter_furn_has_flag</a>( dster, dsfrn, <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a67a9abfd9f6e2c9bd1c299f5ef6279e5">TFLAG_FLAMMABLE_HARD</a> ) &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 5 ) ) ) ||</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>                                    nearwebfld || ( dst.<a class="code hl_function" href="structmaptile.html#a9c9e15a1b6db4e935fc1230519e45249">get_item_count</a>() &gt; 0 &amp;&amp;</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>                                                    <a class="code hl_function" href="classmap.html#ab1a08686c7d7b52636e0362ac4a0847f">flammable_items_at</a>( p + <a class="code hl_variable" href="point_8h.html#a531b7c882d6066241b7f93268af3e68b">eight_horizontal_neighbors</a>[i] ) &amp;&amp;</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>                                                    <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 5 ) )</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>                                ) ) {</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>                                <span class="comment">// Nearby open flammable ground? Set it on fire.</span></div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>                                <a class="code hl_function" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( dst_p, <a class="code hl_variable" href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a>, 1, 0_turns, <span class="keyword">false</span> );</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>                                tmpfld = dst.<a class="code hl_function" href="structmaptile.html#a938297885d93f2c7d4f283363ca2f606">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a> );</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>                                <span class="keywordflow">if</span>( tmpfld != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>                                    <span class="comment">// Make the new fire quite weak, so that it doesn&#39;t start jumping around instantly</span></div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>                                    tmpfld-&gt;<a class="code hl_function" href="classfield__entry.html#a7b3755413ee669cf1b84f54883f2e363">set_field_age</a>( 2_minutes );</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>                                    <span class="comment">// Consume a bit of our fuel</span></div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>                                    cur.<a class="code hl_function" href="classfield__entry.html#a7b3755413ee669cf1b84f54883f2e363">set_field_age</a>( cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() + 1_minutes );</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>                                }</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>                                <span class="keywordflow">if</span>( nearwebfld ) {</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>                                    nearwebfld-&gt;<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( 0 );</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>                                }</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>                            }</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>                        }</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>                    }</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>                }</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span> </div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>                <span class="comment">// Spread gaseous fields</span></div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>                <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a04fa2a563929568fdffa10837faa19af">gas_can_spread</a>() ) {</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>                    <span class="keyword">const</span> <span class="keywordtype">int</span> gas_percent_spread = cur_fd_type.<a class="code hl_variable" href="structfield__type.html#a904634135be914ae33f635af09b42d0a">percent_spread</a>;</div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>                    <span class="keywordflow">if</span>( gas_percent_spread &gt; 0 ) {</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>                        <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> outdoor_age_speedup = cur_fd_type.<a class="code hl_variable" href="structfield__type.html#abf120d0be94361ccb4acbfe6dfbc69a7">outdoor_age_speedup</a>;</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>                        <a class="code hl_function" href="classmap.html#a535690d28a08b8397a7a002c5c4c74af">spread_gas</a>( cur, p, gas_percent_spread, outdoor_age_speedup, sblk );</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>                    }</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>                }</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span> </div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>                <span class="keywordflow">if</span>( cur_fd_type_id == <a class="code hl_variable" href="field__type_8cpp.html#a68f6e17053fde556f8a2cfce44287997">fd_fungal_haze</a> ) {</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>                    <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 10 - 2 * cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() ) ) {</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>                        <span class="comment">// Haze&#39;d terrain</span></div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>                        <a class="code hl_class" href="classfungal__effects.html">fungal_effects</a>( *<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>, <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m ).<a class="code hl_function" href="classfungal__effects.html#a8060002612d6ddfcadd27437fe1e1230">spread_fungus</a>( p );</div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>                    }</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>                }</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span> </div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>                <span class="comment">// Process npc complaints</span></div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>                <span class="keyword">const</span> std::tuple&lt;int, std::string, time_duration, std::string&gt; &amp;npc_complain_data =</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>                    cur_fd_type.<a class="code hl_variable" href="structfield__type.html#aa7ad00b935da14998fc6b59b5a70a06c">npc_complain_data</a>;</div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>                <span class="keyword">const</span> <span class="keywordtype">int</span> chance = std::get&lt;0&gt;( npc_complain_data );</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>                <span class="keywordflow">if</span>( chance &gt; 0 &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( chance ) ) {</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>                    <span class="keywordflow">if</span>( <a class="code hl_class" href="classnpc.html">npc</a> *<span class="keyword">const</span> np = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at&lt;<a class="code hl_class" href="classnpc.html">npc</a>&gt;( p, <span class="keyword">false</span> ) ) {</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>                        np-&gt;complain_about( std::get&lt;1&gt;( npc_complain_data ),</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>                                            std::get&lt;2&gt;( npc_complain_data ),</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>                                            std::get&lt;3&gt;( npc_complain_data ) );</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>                    }</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>                }</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span> </div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>                <span class="comment">// Apply radiation</span></div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>                <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a6d067afbbf776958097359844a82c29e">extra_radiation_max</a>() &gt; 0 ) {</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>                    <span class="keywordtype">int</span> extra_radiation = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( cur.<a class="code hl_function" href="classfield__entry.html#a080080e792522897e40064ab2b413021">extra_radiation_min</a>(), cur.<a class="code hl_function" href="classfield__entry.html#a6d067afbbf776958097359844a82c29e">extra_radiation_max</a>() );</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>                    <a class="code hl_function" href="classmap.html#a03860b3f7c4c378d92e2719997b97f8c">adjust_radiation</a>( p, extra_radiation );</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>                }</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span> </div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>                <span class="comment">// Apply wandering fields from vents</span></div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>                <span class="keywordflow">if</span>( cur_fd_type.<a class="code hl_variable" href="structfield__type.html#aa5c0e76cf425e0f55490df0648dcdcf0">wandering_field</a> ) {</div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>                    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;pnt : <a class="code hl_function" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( p, cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() - 1 ) ) {</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>                        <a class="code hl_class" href="classfield.html">field</a> &amp;wandering_field = <a class="code hl_function" href="classmap.html#a30cfefdb115c16c5e1af6cc99f94bbbd">get_field</a>( pnt );</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>                        tmpfld = wandering_field.<a class="code hl_function" href="classfield.html#a0560f05925c46ef62436765b8db90731">find_field</a>( cur_fd_type.<a class="code hl_variable" href="structfield__type.html#aa5c0e76cf425e0f55490df0648dcdcf0">wandering_field</a> );</div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>                        <span class="keywordflow">if</span>( tmpfld &amp;&amp; tmpfld-&gt;<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() &lt; cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() ) {</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>                            tmpfld-&gt;<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( tmpfld-&gt;<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() + 1 );</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>                            <a class="code hl_function" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( pnt, cur_fd_type.<a class="code hl_variable" href="structfield__type.html#aa5c0e76cf425e0f55490df0648dcdcf0">wandering_field</a>, cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() );</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>                        }</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>                    }</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>                }</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span> </div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>                <span class="keywordflow">if</span>( cur_fd_type_id == <a class="code hl_variable" href="field__type_8cpp.html#a27d0010fd6cf77c6f12b8b48ce06fa45">fd_fire_vent</a> ) {</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span> </div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>                    <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() &gt; 1 ) {</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>                        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>                            cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() - 1 );</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>                        }</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>                        <a class="code hl_function" href="classmap.html#a46a11e492059459bbf26ba0f44ad951a">create_hot_air</a>( p, cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() );</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>                        dirty_transparency_cache = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>                        <a class="code hl_function" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( p, <a class="code hl_variable" href="field__type_8cpp.html#ac0a79fdf7c7852adae6c208031850b36">fd_flame_burst</a>, 3, cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() );</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>                        cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( 0 );</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>                    }</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>                }</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>                <span class="keywordflow">if</span>( cur_fd_type_id == <a class="code hl_variable" href="field__type_8cpp.html#ac0a79fdf7c7852adae6c208031850b36">fd_flame_burst</a> ) {</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>                    <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() &gt; 1 ) {</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>                        cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() - 1 );</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>                        <a class="code hl_function" href="classmap.html#a46a11e492059459bbf26ba0f44ad951a">create_hot_air</a>( p, cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() );</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>                        dirty_transparency_cache = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>                        <a class="code hl_function" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( p, <a class="code hl_variable" href="field__type_8cpp.html#a27d0010fd6cf77c6f12b8b48ce06fa45">fd_fire_vent</a>, 3, cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() );</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>                        cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( 0 );</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>                    }</div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>                }</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>                <span class="keywordflow">if</span>( cur_fd_type_id == <a class="code hl_variable" href="field__type_8cpp.html#a67f782decc0eca9e8e55696dfa89d13b">fd_electricity</a> ) {</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>                    <span class="comment">// 4 in 5 chance to spread</span></div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>                    <span class="keywordflow">if</span>( !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 5 ) ) {</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>                        std::vector&lt;tripoint&gt; valid;</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>                        <span class="comment">// We&#39;re grounded</span></div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>                        <span class="keywordflow">if</span>( <a class="code hl_function" href="classmap.html#a802cc11379d4be61f4e2b13a50f6390e">impassable</a>( p ) &amp;&amp; cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() &gt; 1 ) {</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>                            <span class="keywordtype">int</span> tries = 0;</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>                            <a class="code hl_struct" href="structtripoint.html">tripoint</a> pnt;</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>                            pnt.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> = p.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>;</div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>                            <span class="keywordflow">while</span>( tries &lt; 10 &amp;&amp; cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() &lt; 5_minutes &amp;&amp; cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() &gt; 1 ) {</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>                                pnt.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> = p.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> + <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( -1, 1 );</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>                                pnt.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> = p.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> + <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( -1, 1 );</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>                                <span class="keywordflow">if</span>( <a class="code hl_function" href="classmap.html#af563dc2397e71a053569cb45c6bb7e77">passable</a>( pnt ) ) {</div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>                                    <a class="code hl_function" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( pnt, <a class="code hl_variable" href="field__type_8cpp.html#a67f782decc0eca9e8e55696dfa89d13b">fd_electricity</a>, 1, cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() + 1_turns );</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>                                    cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() - 1 );</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>                                    tries = 0;</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>                                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>                                    tries++;</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>                                }</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>                            }</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>                            <span class="comment">// We&#39;re not grounded; attempt to ground</span></div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>                            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;dst : <a class="code hl_function" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( p, 1 ) ) {</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>                                <span class="comment">// Grounded tiles first</span></div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>                                <span class="keywordflow">if</span>( <a class="code hl_function" href="classmap.html#a802cc11379d4be61f4e2b13a50f6390e">impassable</a>( dst ) ) {</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>                                    valid.push_back( dst );</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>                                }</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>                            }</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>                            <span class="comment">// Spread to adjacent space, then</span></div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>                            <span class="keywordflow">if</span>( valid.empty() ) {</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>                                <a class="code hl_struct" href="structtripoint.html">tripoint</a> dst( p + <a class="code hl_struct" href="structpoint.html">point</a>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( -1, 1 ), <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( -1, 1 ) ) );</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>                                <a class="code hl_class" href="classfield__entry.html">field_entry</a> *elec = <a class="code hl_function" href="classmap.html#a30cfefdb115c16c5e1af6cc99f94bbbd">get_field</a>( dst ).find_field( <a class="code hl_variable" href="field__type_8cpp.html#a67f782decc0eca9e8e55696dfa89d13b">fd_electricity</a> );</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>                                <span class="keywordflow">if</span>( <a class="code hl_function" href="classmap.html#af563dc2397e71a053569cb45c6bb7e77">passable</a>( dst ) &amp;&amp; elec != <span class="keyword">nullptr</span> &amp;&amp;</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>                                    elec-&gt;<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() &lt; 3 ) {</div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>                                    elec-&gt;<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( elec-&gt;<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() + 1 );</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>                                    cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() - 1 );</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>                                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classmap.html#af563dc2397e71a053569cb45c6bb7e77">passable</a>( dst ) ) {</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>                                    <a class="code hl_function" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( dst, <a class="code hl_variable" href="field__type_8cpp.html#a67f782decc0eca9e8e55696dfa89d13b">fd_electricity</a>, 1, cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() + 1_turns );</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>                                }</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>                                cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() - 1 );</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>                            }</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>                            <span class="keywordflow">while</span>( !valid.empty() &amp;&amp; cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() &gt; 1 ) {</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>                                <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> target = <a class="code hl_function" href="rng_8h.html#ac634f688b3c7864ab6992939ac7b0a6e">random_entry_removed</a>( valid );</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>                                <a class="code hl_function" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( target, <a class="code hl_variable" href="field__type_8cpp.html#a67f782decc0eca9e8e55696dfa89d13b">fd_electricity</a>, 1, cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() + 1_turns );</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>                                cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() - 1 );</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>                            }</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>                        }</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>                    }</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>                }</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span> </div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>                <span class="keywordtype">int</span> monster_spawn_chance = cur.<a class="code hl_function" href="classfield__entry.html#ace87b77403d5d2b130f68f0d58c20890">monster_spawn_chance</a>();</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>                <span class="keywordtype">int</span> monster_spawn_count = cur.<a class="code hl_function" href="classfield__entry.html#a344da6654558b1175eecbb015b04add0">monster_spawn_count</a>();</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>                <span class="keywordflow">if</span>( monster_spawn_count &gt; 0 &amp;&amp; monster_spawn_chance &gt; 0 &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( monster_spawn_chance ) ) {</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>                    <span class="keywordflow">for</span>( ; monster_spawn_count &gt; 0; monster_spawn_count-- ) {</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>                        <a class="code hl_struct" href="structMonsterGroupResult.html">MonsterGroupResult</a> spawn_details = <a class="code hl_function" href="classMonsterGroupManager.html#ad16591c9153584950a7446d1678c08df">MonsterGroupManager::GetResultFromGroup</a>(</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>                                                               cur.<a class="code hl_function" href="classfield__entry.html#a288b000c18c02f26780dcd141dc9926d">monster_spawn_group</a>(), &amp;monster_spawn_count );</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>                        <span class="keywordflow">if</span>( !spawn_details.<a class="code hl_variable" href="structMonsterGroupResult.html#a33c168a013a586d2418dd9e67f7c42a0">name</a> ) {</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>                            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>                        }</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>                        <span class="keywordflow">if</span>( <span class="keyword">const</span> <a class="code hl_class" href="classcata_1_1optional.html">cata::optional&lt;tripoint&gt;</a> <a class="code hl_struct" href="structspawn__point.html">spawn_point</a> = <a class="code hl_function" href="map__selector_8cpp.html#a995bfedf09618adec57011caf2463947">random_point</a>(</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>                                    <a class="code hl_function" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( p, cur.<a class="code hl_function" href="classfield__entry.html#abb1919e365f94327ba76e3671f318199">monster_spawn_radius</a>() ),</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>                        [<span class="keyword">this</span>]( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp; n ) {</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>                        return passable( n );</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>                        } ) ) {</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>                            <a class="code hl_function" href="classmap.html#adab57612922364ffdb667c306f5a622c">add_spawn</a>( spawn_details.<a class="code hl_variable" href="structMonsterGroupResult.html#a33c168a013a586d2418dd9e67f7c42a0">name</a>, spawn_details.<a class="code hl_variable" href="structMonsterGroupResult.html#ae6dfbd3094c5339d3a3ff41b37f8d48b">pack_size</a>, *<a class="code hl_struct" href="structspawn__point.html">spawn_point</a> );</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>                        }</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>                    }</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>                }</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span> </div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>                <span class="keywordflow">if</span>( cur_fd_type_id == <a class="code hl_variable" href="field__type_8cpp.html#ab5a3cae333e4fffb95702822ebf2c43e">fd_push_items</a> ) {</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>                    <a class="code hl_class" href="classmap__stack.html">map_stack</a> items = <a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( p );</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>                    <span class="keywordflow">for</span>( <span class="keyword">auto</span> pushee = items.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(); pushee != items.<a class="code hl_function" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(); ) {</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>                        <span class="keywordflow">if</span>( pushee-&gt;typeId() != <a class="code hl_variable" href="map__field_8cpp.html#a0b026348e0ab957138f7777d85fd1ebc">itype_rock</a> ||</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>                            pushee-&gt;age() &lt; 1_turns ) {</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>                            pushee++;</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>                            <a class="code hl_class" href="classitem.html">item</a> tmp = *pushee;</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>                            tmp.<a class="code hl_function" href="classitem.html#ab55a5629e6fe769a7ac314c02d25ecef">set_age</a>( 0_turns );</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>                            pushee = items.<a class="code hl_function" href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">erase</a>( pushee );</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>                            std::vector&lt;tripoint&gt; valid;</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>                            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;dst : <a class="code hl_function" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( p, 1 ) ) {</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>                                <span class="keywordflow">if</span>( <a class="code hl_function" href="classmap.html#a30cfefdb115c16c5e1af6cc99f94bbbd">get_field</a>( dst, <a class="code hl_variable" href="field__type_8cpp.html#ab5a3cae333e4fffb95702822ebf2c43e">fd_push_items</a> ) != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>                                    valid.push_back( dst );</div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>                                }</div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>                            }</div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>                            <span class="keywordflow">if</span>( !valid.empty() ) {</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>                                <a class="code hl_struct" href="structtripoint.html">tripoint</a> newp = <a class="code hl_function" href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a>( valid );</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>                                <a class="code hl_function" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( newp, tmp );</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>                                <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() == newp ) {</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>                                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A %s hits you!&quot;</span> ), tmp.<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>() );</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>                                    <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">bodypart_id</a> hit = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.get_random_body_part();</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>                                    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.deal_damage( <span class="keyword">nullptr</span>, hit, <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa5f8b46c6c239266403858fa2ae90ef23">DT_BASH</a>, 6 ) );</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>                                    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.check_dead_state();</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>                                }</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span> </div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>                                <span class="keywordflow">if</span>( <a class="code hl_class" href="classnpc.html">npc</a> *<span class="keyword">const</span> p = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at&lt;<a class="code hl_class" href="classnpc.html">npc</a>&gt;( newp ) ) {</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>                                    <span class="comment">// TODO: combine with player character code above</span></div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>                                    <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">bodypart_id</a> hit = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.get_random_body_part();</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>                                    p-&gt;deal_damage( <span class="keyword">nullptr</span>, hit, <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa5f8b46c6c239266403858fa2ae90ef23">DT_BASH</a>, 6 ) );</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>                                    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( newp ) ) {</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>                                        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A %1$s hits %2$s!&quot;</span> ), tmp.<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>(), p-&gt;name );</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>                                    }</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>                                    p-&gt;check_dead_state();</div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>                                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">const</span> mon = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at&lt;<a class="code hl_class" href="classmonster.html">monster</a>&gt;( newp ) ) {</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>                                    mon-&gt;apply_damage( <span class="keyword">nullptr</span>, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ),</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>                                                       6 - mon-&gt;get_armor_bash( <a class="code hl_class" href="classint__id.html">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ) ) );</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>                                    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.sees( newp ) ) {</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>                                        <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A %1$s hits the %2$s!&quot;</span> ), tmp.<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>(), mon-&gt;name() );</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>                                    }</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>                                    mon-&gt;check_dead_state();</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>                                }</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>                            }</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>                        }</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>                    }</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>                }</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>                <span class="keywordflow">if</span>( cur_fd_type_id == <a class="code hl_variable" href="field__type_8cpp.html#af68a10962d47adfdd285a27f7f500e23">fd_shock_vent</a> ) {</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>                    <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() &gt; 1 ) {</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>                        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 5 ) ) {</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>                            cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() - 1 );</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>                        }</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>                        cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( 3 );</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>                        <span class="keywordtype">int</span> num_bolts = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 3, 6 );</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>                        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; num_bolts; i++ ) {</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>                            <span class="keywordtype">int</span> xdir = 0;</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>                            <span class="keywordtype">int</span> ydir = 0;</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>                            <span class="keywordflow">while</span>( xdir == 0 &amp;&amp; ydir == 0 ) {</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>                                xdir = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( -1, 1 );</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>                                ydir = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( -1, 1 );</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>                            }</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>                            <span class="keywordtype">int</span> dist = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 4, 12 );</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>                            <span class="keywordtype">int</span> boltx = p.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a>;</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>                            <span class="keywordtype">int</span> bolty = p.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a>;</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>                            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> n = 0; n &lt; dist; n++ ) {</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>                                boltx += xdir;</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>                                bolty += ydir;</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>                                <a class="code hl_function" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( <a class="code hl_struct" href="structtripoint.html">tripoint</a>( boltx, bolty, p.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> ), <a class="code hl_variable" href="field__type_8cpp.html#a67f782decc0eca9e8e55696dfa89d13b">fd_electricity</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 2, 3 ) );</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>                                <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>                                    <span class="keywordflow">if</span>( xdir == 0 ) {</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>                                        xdir = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 1 ) * 2 - 1;</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>                                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>                                        xdir = 0;</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>                                    }</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>                                }</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>                                <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>                                    <span class="keywordflow">if</span>( ydir == 0 ) {</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>                                        ydir = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 1 ) * 2 - 1;</div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>                                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>                                        ydir = 0;</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>                                    }</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>                                }</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>                            }</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>                        }</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>                    }</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>                }</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>                <span class="keywordflow">if</span>( cur_fd_type_id == <a class="code hl_variable" href="field__type_8cpp.html#a4c4d93c13302c8e6c6d29ed8e6c07a4b">fd_acid_vent</a> ) {</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span> </div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>                    <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() &gt; 1 ) {</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>                        <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() &gt;= 1_minutes ) {</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>                            cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() - 1 );</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>                            cur.<a class="code hl_function" href="classfield__entry.html#a7b3755413ee669cf1b84f54883f2e363">set_field_age</a>( 0_turns );</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>                        }</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>                        cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( 3 );</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>                        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;t : <a class="code hl_function" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( p, 5 ) ) {</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>                            <span class="keyword">const</span> <a class="code hl_class" href="classfield__entry.html">field_entry</a> *<a class="code hl_function" href="namespacemattack.html#acdda0be7e7c8dabb76e9bd130547a3fa">acid</a> = <a class="code hl_function" href="classmap.html#a30cfefdb115c16c5e1af6cc99f94bbbd">get_field</a>( t, <a class="code hl_variable" href="field__type_8cpp.html#ab7a8a9cdb74831f6553f4abf5df22873">fd_acid</a> );</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>                            <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacemattack.html#acdda0be7e7c8dabb76e9bd130547a3fa">acid</a> != <span class="keyword">nullptr</span> &amp;&amp; <a class="code hl_function" href="namespacemattack.html#acdda0be7e7c8dabb76e9bd130547a3fa">acid</a>-&gt;get_field_intensity() == 0 ) {</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>                                <span class="keywordtype">int</span> new_intensity = 3 - <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( p, t ) / 2 + ( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ? 1 : 0 );</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>                                <span class="keywordflow">if</span>( new_intensity &gt; 3 ) {</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>                                    new_intensity = 3;</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>                                }</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>                                <span class="keywordflow">if</span>( new_intensity &gt; 0 ) {</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>                                    <a class="code hl_function" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( t, <a class="code hl_variable" href="field__type_8cpp.html#ab7a8a9cdb74831f6553f4abf5df22873">fd_acid</a>, new_intensity );</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>                                }</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>                            }</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>                        }</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>                    }</div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>                }</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>                <span class="keywordflow">if</span>( cur_fd_type_id == <a class="code hl_variable" href="field__type_8cpp.html#a5d5f15ed25822dd84422bced5beef691">fd_bees</a> ) {</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>                    <span class="comment">// Poor bees are vulnerable to so many other fields.</span></div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>                    <span class="comment">// TODO: maybe adjust effects based on different fields.</span></div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>                    <span class="keywordflow">if</span>( curfield.<a class="code hl_function" href="classfield.html#a0560f05925c46ef62436765b8db90731">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#afca1ca43633c0fc76d866752559218d4">fd_web</a> ) ||</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>                        curfield.<a class="code hl_function" href="classfield.html#a0560f05925c46ef62436765b8db90731">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a> ) ||</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>                        curfield.<a class="code hl_function" href="classfield.html#a0560f05925c46ef62436765b8db90731">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#a742b7a3f2bec99838055a58c542ecddf">fd_smoke</a> ) ||</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>                        curfield.<a class="code hl_function" href="classfield.html#a0560f05925c46ef62436765b8db90731">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#a0c312b322364fa8cc46b2b0efef9d28a">fd_toxic_gas</a> ) ||</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>                        curfield.<a class="code hl_function" href="classfield.html#a0560f05925c46ef62436765b8db90731">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#a4bad315aa1dfb35f303b391abd786ae3">fd_tear_gas</a> ) ||</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>                        curfield.<a class="code hl_function" href="classfield.html#a0560f05925c46ef62436765b8db90731">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#ad86d7b9ff1a8fb05d7481abd08d0c375">fd_relax_gas</a> ) ||</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>                        curfield.<a class="code hl_function" href="classfield.html#a0560f05925c46ef62436765b8db90731">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#a50a270bd1c0284331c75930716ac4b79">fd_nuke_gas</a> ) ||</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>                        curfield.<a class="code hl_function" href="classfield.html#a0560f05925c46ef62436765b8db90731">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#a77ab80c7588f25b4a8fe10072d7d6a97">fd_gas_vent</a> ) ||</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>                        curfield.<a class="code hl_function" href="classfield.html#a0560f05925c46ef62436765b8db90731">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#a8907873928bd3b4afeff6e852434ade6">fd_smoke_vent</a> ) ||</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>                        curfield.<a class="code hl_function" href="classfield.html#a0560f05925c46ef62436765b8db90731">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#a9868dee0533f3cc11e389b49a6c4f636">fd_fungicidal_gas</a> ) ||</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>                        curfield.<a class="code hl_function" href="classfield.html#a0560f05925c46ef62436765b8db90731">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#afefbe0ddb9ee9d0a0e2db8b4d89840bb">fd_insecticidal_gas</a> ) ||</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>                        curfield.<a class="code hl_function" href="classfield.html#a0560f05925c46ef62436765b8db90731">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#a27d0010fd6cf77c6f12b8b48ce06fa45">fd_fire_vent</a> ) ||</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>                        curfield.<a class="code hl_function" href="classfield.html#a0560f05925c46ef62436765b8db90731">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#ac0a79fdf7c7852adae6c208031850b36">fd_flame_burst</a> ) ||</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>                        curfield.<a class="code hl_function" href="classfield.html#a0560f05925c46ef62436765b8db90731">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#a67f782decc0eca9e8e55696dfa89d13b">fd_electricity</a> ) ||</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>                        curfield.<a class="code hl_function" href="classfield.html#a0560f05925c46ef62436765b8db90731">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#ae1b475e49c929a1dab1575f541a11542">fd_fatigue</a> ) ||</div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>                        curfield.<a class="code hl_function" href="classfield.html#a0560f05925c46ef62436765b8db90731">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#af68a10962d47adfdd285a27f7f500e23">fd_shock_vent</a> ) ||</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>                        curfield.<a class="code hl_function" href="classfield.html#a0560f05925c46ef62436765b8db90731">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#a08a964c087363a492316c8ef6096ab01">fd_plasma</a> ) ||</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>                        curfield.<a class="code hl_function" href="classfield.html#a0560f05925c46ef62436765b8db90731">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#a06adfade9e4adf639c61c6dffcdb8a83">fd_laser</a> ) ||</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>                        curfield.<a class="code hl_function" href="classfield.html#a0560f05925c46ef62436765b8db90731">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#a67e1c2ea914225c5affdf6b847e61e26">fd_dazzling</a> ) ||</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>                        curfield.<a class="code hl_function" href="classfield.html#a0560f05925c46ef62436765b8db90731">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#a67f782decc0eca9e8e55696dfa89d13b">fd_electricity</a> ) ||</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>                        curfield.<a class="code hl_function" href="classfield.html#a0560f05925c46ef62436765b8db90731">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#a0740150aaa065c46121ca6a8981a2fdd">fd_incendiary</a> ) ) {</div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>                        <span class="comment">// Kill them at the end of processing.</span></div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>                        cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( 0 );</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>                        <span class="comment">// Bees chase the player if in range, wander randomly otherwise.</span></div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>                        <span class="keywordflow">if</span>( !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.is_underwater() &amp;&amp;</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>                            <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( p, <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() ) &lt; 10 &amp;&amp;</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>                            <a class="code hl_function" href="classmap.html#a49630763b899657bfa7c10586df7d360">clear_path</a>( p, <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos(), 10, 1, 100 ) ) {</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span> </div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>                            std::vector&lt;point&gt; candidate_positions =</div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>                                <a class="code hl_function" href="line_8cpp.html#ad3bc8422edaedcbc2d6c471b1d3168fc">squares_in_direction</a>( p.<a class="code hl_function" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>(), <a class="code hl_struct" href="structpoint.html">point</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.posx(), <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.posy() ) );</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>                            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> &amp;candidate_position : candidate_positions ) {</div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>                                <a class="code hl_class" href="classfield.html">field</a> &amp;target_field = <a class="code hl_function" href="classmap.html#a30cfefdb115c16c5e1af6cc99f94bbbd">get_field</a>( <a class="code hl_struct" href="structtripoint.html">tripoint</a>( candidate_position, p.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> ) );</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>                                <span class="comment">// Only shift if there are no bees already there.</span></div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>                                <span class="comment">// TODO: Figure out a way to merge bee fields without allowing</span></div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>                                <span class="comment">// Them to effectively move several times in a turn depending</span></div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>                                <span class="comment">// on iteration direction.</span></div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>                                <span class="keywordflow">if</span>( !target_field.<a class="code hl_function" href="classfield.html#a0560f05925c46ef62436765b8db90731">find_field</a>( <a class="code hl_variable" href="field__type_8cpp.html#a5d5f15ed25822dd84422bced5beef691">fd_bees</a> ) ) {</div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>                                    <a class="code hl_function" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( <a class="code hl_struct" href="structtripoint.html">tripoint</a>( candidate_position, p.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> ), <a class="code hl_variable" href="field__type_8cpp.html#a5d5f15ed25822dd84422bced5beef691">fd_bees</a>,</div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>                                               cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>(), cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() );</div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>                                    cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( 0 );</div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>                                }</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>                            }</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>                            <a class="code hl_function" href="classmap.html#a535690d28a08b8397a7a002c5c4c74af">spread_gas</a>( cur, p, 5, 0_turns, sblk );</div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>                        }</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>                    }</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>                }</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span>                <span class="keywordflow">if</span>( cur_fd_type_id == <a class="code hl_variable" href="field__type_8cpp.html#a0740150aaa065c46121ca6a8981a2fdd">fd_incendiary</a> ) {</div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>                    <span class="comment">// Needed for variable scope</span></div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>                    <a class="code hl_struct" href="structtripoint.html">tripoint</a> dst( p + <a class="code hl_struct" href="structpoint.html">point</a>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( -1, 1 ), <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( -1, 1 ) ) );</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>                    <span class="keywordflow">if</span>( <a class="code hl_function" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a864d6ad5483bbf02eb5653e30b42edfd">TFLAG_FLAMMABLE</a>, dst ) ||</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>                        <a class="code hl_function" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a9a5b42bf32cf92352e066de02b6858ad">TFLAG_FLAMMABLE_ASH</a>, dst ) ||</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>                        <a class="code hl_function" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a67a9abfd9f6e2c9bd1c299f5ef6279e5">TFLAG_FLAMMABLE_HARD</a>, dst ) ) {</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>                        <a class="code hl_function" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( dst, <a class="code hl_variable" href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a>, 1 );</div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>                    }</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span> </div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>                    <span class="comment">// Check piles for flammable items and set those on fire</span></div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>                    <span class="keywordflow">if</span>( <a class="code hl_function" href="classmap.html#ab1a08686c7d7b52636e0362ac4a0847f">flammable_items_at</a>( dst ) ) {</div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>                        <a class="code hl_function" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( dst, <a class="code hl_variable" href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a>, 1 );</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>                    }</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span> </div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>                    <a class="code hl_function" href="classmap.html#a46a11e492059459bbf26ba0f44ad951a">create_hot_air</a>( p, cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() );</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>                }</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>                <span class="keywordflow">if</span>( cur_fd_type_id == <a class="code hl_variable" href="field__type_8cpp.html#a9868dee0533f3cc11e389b49a6c4f636">fd_fungicidal_gas</a> ) {</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>                    <span class="comment">// Check the terrain and replace it accordingly to simulate the fungus dieing off</span></div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>                    <span class="keyword">const</span> <a class="code hl_struct" href="structter__t.html">ter_t</a> &amp;<a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a> = map_tile.<a class="code hl_function" href="structmaptile.html#a09a3fb71b0c8d22a8d1257144205d775">get_ter_t</a>();</div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>                    <span class="keyword">const</span> <a class="code hl_struct" href="structfurn__t.html">furn_t</a> &amp;frn = map_tile.<a class="code hl_function" href="structmaptile.html#ac457d93598440f370cb86702caddfdd7">get_furn_t</a>();</div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>                    <span class="keyword">const</span> <span class="keywordtype">int</span> intensity = cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>();</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>                    <span class="keywordflow">if</span>( <a class="code hl_function" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>.has_flag( <a class="code hl_function" href="map__field_8cpp.html#ae002e878ae18d5606ca01aeaa659a44c">flag_FUNGUS</a> ) &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 10 / intensity ) ) {</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>                        <a class="code hl_function" href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">ter_set</a>( p, <a class="code hl_variable" href="mapdata_8cpp.html#aa4573ce2c594834a8ced806a5099f3e3">t_dirt</a> );</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>                    }</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span>                    <span class="keywordflow">if</span>( frn.<a class="code hl_function" href="structmap__data__common__t.html#a630778707744fb147436b9aa0c370a7e">has_flag</a>( <a class="code hl_function" href="map__field_8cpp.html#ae002e878ae18d5606ca01aeaa659a44c">flag_FUNGUS</a> ) &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 10 / intensity ) ) {</div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>                        <a class="code hl_function" href="classmap.html#abf6455d82007aa379f4de85aea2f923f">furn_set</a>( p, <a class="code hl_variable" href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a> );</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>                    }</div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>                }</div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span> </div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>                cur.<a class="code hl_function" href="classfield__entry.html#a7b3755413ee669cf1b84f54883f2e363">set_field_age</a>( cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() + 1_turns );</div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>                <span class="keyword">auto</span> &amp;fdata = cur.<a class="code hl_function" href="classfield__entry.html#af76e247514edaeed4bdc58638bfa0ae1">get_field_type</a>().<a class="code hl_function" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>();</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span>                <span class="keywordflow">if</span>( fdata.half_life &gt; 0_turns &amp;&amp; cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() &gt; 0_turns &amp;&amp;</div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>                    <a class="code hl_function" href="rng_8cpp.html#a7ba03e7147e43d808dc29c54bce9e57f">dice</a>( 2, to_turns&lt;int&gt;( cur.<a class="code hl_function" href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">get_field_age</a>() ) ) &gt; to_turns&lt;int&gt;( fdata.half_life ) ) {</div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>                    cur.<a class="code hl_function" href="classfield__entry.html#a7b3755413ee669cf1b84f54883f2e363">set_field_age</a>( 0_turns );</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>                    cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() - 1 );</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>                }</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span>                <span class="keywordflow">if</span>( !cur.<a class="code hl_function" href="classfield__entry.html#a3b257586eb47865dae75df0ea947ebb3">is_field_alive</a>() ) {</div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>                    --current_submap-&gt;<a class="code hl_variable" href="classsubmap.html#aa86d0130ed1d1556482b2f7478633778">field_count</a>;</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>                    curfield.<a class="code hl_function" href="classfield.html#ae2b200f31d39fa6f8c57750d88f86d5b">remove_field</a>( it++ );</div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span>                    ++it;</div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span>                }</div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>            }</div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span> </div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>            <span class="keywordflow">if</span>( dirty_transparency_cache ) {</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span>                <a class="code hl_function" href="classmap.html#a0ecdaa7f32bcc5dbcb162ae76ad863c9">set_transparency_cache_dirty</a>( thep );</div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>                <a class="code hl_function" href="classmap.html#abfe32fc67ef91fe15105c31b5ef884ab">set_seen_cache_dirty</a>( thep );</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>            }</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>        }</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span>    }</div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> minz = <a class="code hl_variable" href="classmap.html#a87a151868377cb4b2843de06991c97da">zlevels</a> ? -<a class="code hl_variable" href="game__constants_8h.html#aad0eacfa516a8f7e005674027d7640fe">OVERMAP_DEPTH</a> : <a class="code hl_variable" href="classmap.html#a5413e71e313df95a11e09d279c5605da">abs_sub</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>;</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> maxz = <a class="code hl_variable" href="classmap.html#a87a151868377cb4b2843de06991c97da">zlevels</a> ? <a class="code hl_variable" href="game__constants_8h.html#a3984a9476d1edc78e4e7b886a08d4d4b">OVERMAP_HEIGHT</a> : <a class="code hl_variable" href="classmap.html#a5413e71e313df95a11e09d279c5605da">abs_sub</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>;</div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> z = std::max( <a class="code hl_class" href="classsubmap.html">submap</a>.z - 1, minz ); z &lt;= std::min( <a class="code hl_class" href="classsubmap.html">submap</a>.z + 1, maxz ); ++z ) {</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span>        <span class="keyword">auto</span> &amp;field_cache = <a class="code hl_function" href="classmap.html#a2c2523e489f73c84e7a77a138e60ba25">get_cache</a>( z ).<a class="code hl_variable" href="structlevel__cache.html#a2af0622caf0c878e166015f22e2add9e">field_cache</a>;</div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> y = std::max( <a class="code hl_class" href="classsubmap.html">submap</a>.y - 1, 0 ); y &lt;= std::min( <a class="code hl_class" href="classsubmap.html">submap</a>.y + 1, <a class="code hl_variable" href="game__constants_8h.html#ad277b12d7860c613865a85a2cc383c17">MAPSIZE</a> - 1 ); ++y ) {</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> x = std::max( <a class="code hl_class" href="classsubmap.html">submap</a>.x - 1, 0 ); x &lt;= std::min( <a class="code hl_class" href="classsubmap.html">submap</a>.x + 1, <a class="code hl_variable" href="game__constants_8h.html#ad277b12d7860c613865a85a2cc383c17">MAPSIZE</a> - 1 ); ++x ) {</div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="classmap.html#ac5d9bf2b01f243d3983c2054f75b1101">get_submap_at_grid</a>( { x, y, z } )-&gt;field_count &gt; 0 ) {</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span>                    field_cache.set( x + y * <a class="code hl_variable" href="game__constants_8h.html#ad277b12d7860c613865a85a2cc383c17">MAPSIZE</a> );</div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span>                    field_cache.reset( x + y * <a class="code hl_variable" href="game__constants_8h.html#ad277b12d7860c613865a85a2cc383c17">MAPSIZE</a> );</div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span>                }</div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span>            }</div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>        }</div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span>    }</div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span>    sblk.<a class="code hl_function" href="structscent__block.html#ab548a186f2f9a3ce8fa5e6ba9d477f86">commit_modifications</a>();</div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span>}</div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span> </div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span><span class="comment">// This entire function makes very little sense. Why are the rules the way they are? Why does walking into some things destroy them but not others?</span></div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span> </div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span><span class="comment">/*</span></div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span><span class="comment">Function: step_in_field</span></div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span><span class="comment">Triggers any active abilities a field effect would have. Fire burns you, acid melts you, etc.</span></div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span><span class="comment">If you add a field effect that interacts with the player place a case statement in the switch here.</span></div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span><span class="comment">If you wish for a field effect to do something over time (propagate, interact with terrain, etc) place it in process_subfields</span></div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span><span class="comment">*/</span></div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"><a class="line" href="classmap.html#a68b51d9820bb941312ffa9d7757e31bc"> 1220</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classmap.html#a68b51d9820bb941312ffa9d7757e31bc">map::player_in_field</a>( <a class="code hl_class" href="classplayer.html">player</a> &amp;u )</div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>{</div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span>    <span class="comment">// A copy of the current field for reference. Do not add fields to it, use map::add_field</span></div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span>    <a class="code hl_class" href="classfield.html">field</a> &amp;curfield = <a class="code hl_function" href="classmap.html#a30cfefdb115c16c5e1af6cc99f94bbbd">get_field</a>( u.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() );</div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span>    <span class="comment">// Are we inside?</span></div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>    <span class="keywordtype">bool</span> inside = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>    <span class="comment">// If we are in a vehicle figure out if we are inside (reduces effects usually)</span></div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>    <span class="comment">// and what part of the vehicle we need to deal with.</span></div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>    <span class="keywordflow">if</span>( u.<a class="code hl_variable" href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">in_vehicle</a> ) {</div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span>        <span class="keywordflow">if</span>( <span class="keyword">const</span> <a class="code hl_class" href="classoptional__vpart__position.html">optional_vpart_position</a> vp = <a class="code hl_function" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( u.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() ) ) {</div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>            inside = vp-&gt;is_inside();</div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span>        }</div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>    }</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span> </div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>    <span class="comment">// Iterate through all field effects on this tile.</span></div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>    <span class="comment">// Do not remove the field with remove_field, instead set it&#39;s intensity to 0. It will be removed</span></div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>    <span class="comment">// later by the field processing, which will also adjust field_count accordingly.</span></div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;field_list_it : curfield ) {</div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>        <a class="code hl_class" href="classfield__entry.html">field_entry</a> &amp;cur = field_list_it.second;</div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span>        <span class="keywordflow">if</span>( !cur.<a class="code hl_function" href="classfield__entry.html#a3b257586eb47865dae75df0ea947ebb3">is_field_alive</a>() ) {</div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>        }</div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span> </div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>        <span class="comment">// Do things based on what field effect we are currently in.</span></div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>        <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">field_type_id</a> ft = cur.<a class="code hl_function" href="classfield__entry.html#af76e247514edaeed4bdc58638bfa0ae1">get_field_type</a>();</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>        <span class="keywordflow">if</span>( ft == <a class="code hl_variable" href="field__type_8cpp.html#afca1ca43633c0fc76d866752559218d4">fd_web</a> ) {</div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>            <span class="comment">// If we are in a web, can&#39;t walk in webs or are in a vehicle, get webbed maybe.</span></div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>            <span class="comment">// Moving through multiple webs stacks the effect.</span></div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>            <span class="keywordflow">if</span>( !u.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="map__field_8cpp.html#a0e02f772574a897b72bd8fc3c48e7f3d">trait_WEB_WALKER</a> ) &amp;&amp; !u.<a class="code hl_variable" href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">in_vehicle</a> ) {</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>                <span class="comment">// Between 5 and 15 minus your current web level.</span></div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>                u.<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="map__field_8cpp.html#aa222d693ccc29efba86a3bb9f18add4e">effect_webbed</a>, 1_turns, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a>, cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() );</div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>                <span class="comment">// It is spent.</span></div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span>                cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( 0 );</div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span>                <span class="comment">// If you are in a vehicle destroy the web.</span></div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span>                <span class="comment">// It should of been destroyed when you ran over it anyway.</span></div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( u.<a class="code hl_variable" href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">in_vehicle</a> ) {</div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span>                cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( 0 );</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>            }</div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>        }</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>        <span class="keywordflow">if</span>( ft == <a class="code hl_variable" href="field__type_8cpp.html#ab7a8a9cdb74831f6553f4abf5df22873">fd_acid</a> ) {</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span>            <span class="comment">// Assume vehicles block acid damage entirely,</span></div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>            <span class="comment">// you&#39;re certainly not standing in it.</span></div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>            <span class="keywordflow">if</span>( !u.<a class="code hl_variable" href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">in_vehicle</a> &amp;&amp; !u.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="map__field_8cpp.html#a5fccb1c22e58777ef464ef0cbb372541">trait_ACIDPROOF</a> ) ) {</div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>                <span class="keywordtype">int</span> total_damage = 0;</div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>                total_damage += <a class="code hl_function" href="classmap.html#ab42c106bfff9e18e1767421be6e9e72c">burn_body_part</a>( u, cur, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a184f1b627fd11fb607e76b2d30dadfbb">bp_foot_l</a>, 2 );</div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span>                total_damage += <a class="code hl_function" href="classmap.html#ab42c106bfff9e18e1767421be6e9e72c">burn_body_part</a>( u, cur, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac094b1c6f96ebbd604928cfd2fad0ab7">bp_foot_r</a>, 2 );</div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>                <span class="keyword">const</span> <span class="keywordtype">bool</span> on_ground = u.<a class="code hl_function" href="classCharacter.html#a3f82f3257619099e3b2e3103777a703a">is_on_ground</a>();</div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span>                <span class="keywordflow">if</span>( on_ground ) {</div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span>                    <span class="comment">// Apply the effect to the remaining body parts</span></div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span>                    total_damage += <a class="code hl_function" href="classmap.html#ab42c106bfff9e18e1767421be6e9e72c">burn_body_part</a>( u, cur, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a44506e97ae9648354f97d530a3be61b8">bp_leg_l</a>, 2 );</div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>                    total_damage += <a class="code hl_function" href="classmap.html#ab42c106bfff9e18e1767421be6e9e72c">burn_body_part</a>( u, cur, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a202ad82497ebf8867cdcd6ee15085d16">bp_leg_r</a>, 2 );</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>                    total_damage += <a class="code hl_function" href="classmap.html#ab42c106bfff9e18e1767421be6e9e72c">burn_body_part</a>( u, cur, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2806629e65a2c2eb5d8049e29e77910e">bp_hand_l</a>, 2 );</div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span>                    total_damage += <a class="code hl_function" href="classmap.html#ab42c106bfff9e18e1767421be6e9e72c">burn_body_part</a>( u, cur, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a54721306a0e05318b6d0440349c1a0fb">bp_hand_r</a>, 2 );</div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>                    total_damage += <a class="code hl_function" href="classmap.html#ab42c106bfff9e18e1767421be6e9e72c">burn_body_part</a>( u, cur, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a>, 2 );</div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>                    <span class="comment">// Less arms = less ability to keep upright</span></div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>                    <span class="keywordflow">if</span>( ( !u.<a class="code hl_function" href="classCharacter.html#a8e2d2e1c01bfbb36401ae221300370f5">has_two_arms</a>() &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) || <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) ) {</div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>                        total_damage += <a class="code hl_function" href="classmap.html#ab42c106bfff9e18e1767421be6e9e72c">burn_body_part</a>( u, cur, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a441080ba1d3930d38f635658d9b28e01">bp_arm_l</a>, 1 );</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>                        total_damage += <a class="code hl_function" href="classmap.html#ab42c106bfff9e18e1767421be6e9e72c">burn_body_part</a>( u, cur, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ae5f21c7494ad730a0c6abf6957976cb3">bp_arm_r</a>, 1 );</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>                        total_damage += <a class="code hl_function" href="classmap.html#ab42c106bfff9e18e1767421be6e9e72c">burn_body_part</a>( u, cur, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab1635a97e6cc33a051cd378b60e48698">bp_head</a>, 1 );</div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>                    }</div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span>                }</div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span> </div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>                <span class="keywordflow">if</span>( on_ground &amp;&amp; total_damage &gt; 0 ) {</div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>                    u.<a class="code hl_function" href="classplayer.html#a07108565639fa6fe5b6776b4e8674fb6">add_msg_player_or_npc</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The acid burns your body!&quot;</span> ),</div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>                                             <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The acid burns &lt;npcname&gt;s body!&quot;</span> ) );</div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( total_damage &gt; 0 ) {</div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span>                    u.<a class="code hl_function" href="classplayer.html#a07108565639fa6fe5b6776b4e8674fb6">add_msg_player_or_npc</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The acid burns your legs and feet!&quot;</span> ),</div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span>                                             <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The acid burns &lt;npcname&gt;s legs and feet!&quot;</span> ) );</div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( on_ground ) {</div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>                    u.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You&#39;re lying in a pool of acid&quot;</span> ) );</div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>                    u.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You&#39;re standing in a pool of acid&quot;</span> ) );</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>                }</div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span> </div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>                u.<a class="code hl_function" href="classCreature.html#a36dcf5a04ddc0cf9fa29c08b7b099158">check_dead_state</a>();</div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>            }</div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span>        }</div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span>        <span class="keywordflow">if</span>( ft == <a class="code hl_variable" href="field__type_8cpp.html#a7673af64e5ad5618009e2ec14dba3645">fd_sap</a> ) {</div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span>            <span class="comment">// Sap does nothing to cars.</span></div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span>            <span class="keywordflow">if</span>( !u.<a class="code hl_variable" href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">in_vehicle</a> ) {</div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span>                <span class="comment">// Use up sap.</span></div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>                cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() - 1 );</div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>            }</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span>        }</div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>        <span class="keywordflow">if</span>( ft == <a class="code hl_variable" href="field__type_8cpp.html#a4f650392cc90c9a28651f06974421485">fd_sludge</a> ) {</div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>            <span class="comment">// Sludge is on the ground, but you are above the ground when boarded on a vehicle</span></div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span>            <span class="keywordflow">if</span>( !u.<a class="code hl_variable" href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">in_vehicle</a> ) {</div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span>                u.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The sludge is thick and sticky.  You struggle to pull free.&quot;</span> ) );</div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span>                u.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() * 300;</div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>                cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( 0 );</div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>            }</div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>        }</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span>        <span class="keywordflow">if</span>( ft == <a class="code hl_variable" href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a> ) {</div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span>            <span class="comment">// Heatsink or suit prevents ALL fire damage.</span></div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span>            <span class="keywordflow">if</span>( !u.<a class="code hl_function" href="classCharacter.html#af9c7419575e23d52745c94009929fafb">has_active_bionic</a>( <a class="code hl_variable" href="map__field_8cpp.html#af198a4e5b75aadbc020ee447fd31226b">bio_heatsink</a> ) &amp;&amp; !u.<a class="code hl_function" href="classCharacter.html#a6028587ccee9855c6ba900042188eec3">is_wearing</a>( <a class="code hl_variable" href="map__field_8cpp.html#a2e1ccdf5aa874eaaf8e3f14757d72179">itype_rm13_armor_on</a> ) ) {</div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span> </div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span>                <span class="comment">// To modify power of a field based on... whatever is relevant for the effect.</span></div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span>                <span class="keywordtype">int</span> adjusted_intensity = cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>();</div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span>                <span class="comment">// Burn the player. Less so if you are in a car or ON a car.</span></div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span>                <span class="keywordflow">if</span>( u.<a class="code hl_variable" href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">in_vehicle</a> ) {</div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span>                    <span class="keywordflow">if</span>( inside ) {</div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>                        adjusted_intensity -= 2;</div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>                        adjusted_intensity -= 1;</div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span>                    }</div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>                }</div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span> </div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>                <span class="keywordflow">if</span>( adjusted_intensity &gt;= 1 ) {</div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>                    <span class="comment">// Burn message by intensity</span></div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span>                    <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;std::string, 4&gt; player_burn_msg = { {</div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>                            <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;You burn your legs and feet!&quot;</span> ),</div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>                            <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;You&#39;re burning up!&quot;</span> ),</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span>                            <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;You&#39;re set ablaze!&quot;</span> ),</div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>                            <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;Your whole body is burning!&quot;</span> )</div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>                        }</div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>                    };</div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>                    <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;std::string, 4&gt; npc_burn_msg = { {</div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span>                            <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;&lt;npcname&gt; burns their legs and feet!&quot;</span> ),</div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span>                            <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;&lt;npcname&gt; is burning up!&quot;</span> ),</div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span>                            <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;&lt;npcname&gt; is set ablaze!&quot;</span> ),</div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>                            <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;&lt;npcname&gt;s whole body is burning!&quot;</span> )</div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>                        }</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span>                    };</div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span>                    <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;std::string, 4&gt; player_warn_msg = { {</div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span>                            <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;You&#39;re standing in a fire!&quot;</span> ),</div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span>                            <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;You&#39;re waist-deep in a fire!&quot;</span> ),</div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>                            <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;You&#39;re surrounded by raging fire!&quot;</span> ),</div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span>                            <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;You&#39;re lying in fire!&quot;</span> )</div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span>                        }</div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span>                    };</div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span> </div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span>                    <span class="keyword">const</span> <span class="keywordtype">int</span> burn_min = adjusted_intensity;</div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span>                    <span class="keyword">const</span> <span class="keywordtype">int</span> burn_max = 3 * adjusted_intensity + 3;</div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>                    std::list&lt;bodypart_id&gt; parts_burned;</div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span>                    <span class="keywordtype">int</span> msg_num = adjusted_intensity - 1;</div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span>                    <span class="keywordflow">if</span>( !u.<a class="code hl_function" href="classCharacter.html#a3f82f3257619099e3b2e3103777a703a">is_on_ground</a>() ) {</div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span>                        <span class="keywordflow">switch</span>( adjusted_intensity ) {</div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span>                            <span class="keywordflow">case</span> 3:</div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span>                                parts_burned.push_back( <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;hand_l&quot;</span> ) );</div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span>                                parts_burned.push_back( <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;hand_r&quot;</span> ) );</div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span>                                parts_burned.push_back( <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;arm_l&quot;</span> ) );</div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>                                parts_burned.push_back( <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;arm_r&quot;</span> ) );</div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span>                            <span class="comment">/* fallthrough */</span></div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>                            <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>                                parts_burned.push_back( <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ) );</div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>                            <span class="comment">/* fallthrough */</span></div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span>                            <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>                                parts_burned.push_back( <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;foot_l&quot;</span> ) );</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span>                                parts_burned.push_back( <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;foot_r&quot;</span> ) );</div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span>                                parts_burned.push_back( <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;leg_l&quot;</span> ) );</div>
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"> 1372</span>                                parts_burned.push_back( <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;leg_r&quot;</span> ) );</div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span>                        }</div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span>                        <span class="comment">// Lying in the fire is BAAAD news, hits every body part.</span></div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span>                        msg_num = 3;</div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span>                        <span class="keyword">const</span> std::vector&lt;bodypart_id&gt; &amp;all_parts = u.<a class="code hl_function" href="classCreature.html#a9f9cc294949ffc5bd51ab464b5c5ad6f">get_all_body_parts</a>();</div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span>                        <span class="comment">// HACK: Skip num_bp part</span></div>
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span>                        <span class="keywordflow">for</span>( <span class="keyword">auto</span> bp : all_parts ) {</div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span>                            <span class="keywordflow">if</span>( bp-&gt;token != <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a> ) {</div>
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"> 1381</span>                                parts_burned.push_back( bp );</div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"> 1382</span>                            }</div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span>                        }</div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span>                    }</div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span> </div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"> 1386</span>                    <span class="keywordtype">int</span> total_damage = 0;</div>
<div class="line"><a id="l01387" name="l01387"></a><span class="lineno"> 1387</span>                    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">bodypart_id</a> part_burned : parts_burned ) {</div>
<div class="line"><a id="l01388" name="l01388"></a><span class="lineno"> 1388</span>                        <span class="keyword">const</span> <a class="code hl_struct" href="structdealt__damage__instance.html">dealt_damage_instance</a> dealt = u.<a class="code hl_function" href="classCharacter.html#a2c05090cba2078f9ebefd80e61564be3">deal_damage</a>( <span class="keyword">nullptr</span>, part_burned,</div>
<div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span>                                                            <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aae6af44cd6e0e8cafcc63cea198f627c9">DT_HEAT</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( burn_min, burn_max ) ) );</div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span>                        total_damage += dealt.<a class="code hl_function" href="structdealt__damage__instance.html#a444eee10110e6dc30ba03db96705ee26">type_damage</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aae6af44cd6e0e8cafcc63cea198f627c9">DT_HEAT</a> );</div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span>                    }</div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span>                    <span class="keywordflow">if</span>( total_damage &gt; 0 ) {</div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span>                        u.<a class="code hl_function" href="classplayer.html#a07108565639fa6fe5b6776b4e8674fb6">add_msg_player_or_npc</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( player_burn_msg[msg_num] ), <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( npc_burn_msg[msg_num] ) );</div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span>                        u.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( player_warn_msg[msg_num] ) );</div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span>                    }</div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span>                    u.<a class="code hl_function" href="classCreature.html#a36dcf5a04ddc0cf9fa29c08b7b099158">check_dead_state</a>();</div>
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span>                }</div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span>            }</div>
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"> 1400</span> </div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"> 1401</span>        }</div>
<div class="line"><a id="l01402" name="l01402"></a><span class="lineno"> 1402</span>        <span class="keywordflow">if</span>( ft == <a class="code hl_variable" href="field__type_8cpp.html#a4bad315aa1dfb35f303b391abd786ae3">fd_tear_gas</a> ) {</div>
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"> 1403</span>            <span class="comment">// Tear gas will both give you teargas disease and/or blind you.</span></div>
<div class="line"><a id="l01404" name="l01404"></a><span class="lineno"> 1404</span>            <span class="keywordflow">if</span>( ( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() &gt; 1 || !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) &amp;&amp; ( !inside || <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) ) {</div>
<div class="line"><a id="l01405" name="l01405"></a><span class="lineno"> 1405</span>                u.<a class="code hl_function" href="classCreature.html#aeb7869963d4c1060c4d928424511d2e0">add_env_effect</a>( <a class="code hl_variable" href="map__field_8cpp.html#ad37b6925aab6c082f9b6bbf00e6336aa">effect_teargas</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980abb7b120eb8dc7c137110446fe541baed">bp_mouth</a>, 5, 20_seconds );</div>
<div class="line"><a id="l01406" name="l01406"></a><span class="lineno"> 1406</span>            }</div>
<div class="line"><a id="l01407" name="l01407"></a><span class="lineno"> 1407</span>            <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() &gt; 1 &amp;&amp; ( !inside || <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) ) {</div>
<div class="line"><a id="l01408" name="l01408"></a><span class="lineno"> 1408</span>                u.<a class="code hl_function" href="classCreature.html#aeb7869963d4c1060c4d928424511d2e0">add_env_effect</a>( <a class="code hl_variable" href="map__field_8cpp.html#a09e952ef4d27618e2f60ec737a8d1bae">effect_blind</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2055386ee220ee2ca3e61d13df65e868">bp_eyes</a>, cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() * 2, 10_seconds );</div>
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"> 1409</span>            }</div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"> 1410</span>        }</div>
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"> 1411</span>        <span class="keywordflow">if</span>( ft == <a class="code hl_variable" href="field__type_8cpp.html#a68f6e17053fde556f8a2cfce44287997">fd_fungal_haze</a> ) {</div>
<div class="line"><a id="l01412" name="l01412"></a><span class="lineno"> 1412</span>            <span class="keywordflow">if</span>( !u.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="map__field_8cpp.html#a308d750c2cc01d70d7622fdee14be3a5">trait_M_IMMUNE</a> ) &amp;&amp; ( !inside || <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) ) {</div>
<div class="line"><a id="l01413" name="l01413"></a><span class="lineno"> 1413</span>                u.<a class="code hl_function" href="classCreature.html#aeb7869963d4c1060c4d928424511d2e0">add_env_effect</a>( <a class="code hl_variable" href="map__field_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980abb7b120eb8dc7c137110446fe541baed">bp_mouth</a>, 4, 10_minutes, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a> );</div>
<div class="line"><a id="l01414" name="l01414"></a><span class="lineno"> 1414</span>                u.<a class="code hl_function" href="classCreature.html#aeb7869963d4c1060c4d928424511d2e0">add_env_effect</a>( <a class="code hl_variable" href="map__field_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2055386ee220ee2ca3e61d13df65e868">bp_eyes</a>, 4, 10_minutes, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a> );</div>
<div class="line"><a id="l01415" name="l01415"></a><span class="lineno"> 1415</span>            }</div>
<div class="line"><a id="l01416" name="l01416"></a><span class="lineno"> 1416</span>        }</div>
<div class="line"><a id="l01417" name="l01417"></a><span class="lineno"> 1417</span>        <span class="keywordflow">if</span>( ft == <a class="code hl_variable" href="field__type_8cpp.html#a67e1c2ea914225c5affdf6b847e61e26">fd_dazzling</a> ) {</div>
<div class="line"><a id="l01418" name="l01418"></a><span class="lineno"> 1418</span>            <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() &gt; 1 || <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 5 ) ) {</div>
<div class="line"><a id="l01419" name="l01419"></a><span class="lineno"> 1419</span>                u.<a class="code hl_function" href="classCreature.html#aeb7869963d4c1060c4d928424511d2e0">add_env_effect</a>( <a class="code hl_variable" href="map__field_8cpp.html#a09e952ef4d27618e2f60ec737a8d1bae">effect_blind</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2055386ee220ee2ca3e61d13df65e868">bp_eyes</a>, 10, 10_turns );</div>
<div class="line"><a id="l01420" name="l01420"></a><span class="lineno"> 1420</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01421" name="l01421"></a><span class="lineno"> 1421</span>                u.<a class="code hl_function" href="classCreature.html#aeb7869963d4c1060c4d928424511d2e0">add_env_effect</a>( <a class="code hl_variable" href="map__field_8cpp.html#a09e952ef4d27618e2f60ec737a8d1bae">effect_blind</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2055386ee220ee2ca3e61d13df65e868">bp_eyes</a>, 2, 2_turns );</div>
<div class="line"><a id="l01422" name="l01422"></a><span class="lineno"> 1422</span>            }</div>
<div class="line"><a id="l01423" name="l01423"></a><span class="lineno"> 1423</span>        }</div>
<div class="line"><a id="l01424" name="l01424"></a><span class="lineno"> 1424</span> </div>
<div class="line"><a id="l01425" name="l01425"></a><span class="lineno"> 1425</span>        <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a080080e792522897e40064ab2b413021">extra_radiation_min</a>() &gt; 0 ) {</div>
<div class="line"><a id="l01426" name="l01426"></a><span class="lineno"> 1426</span>            <span class="comment">// Get irradiated by the nuclear fallout.</span></div>
<div class="line"><a id="l01427" name="l01427"></a><span class="lineno"> 1427</span>            <span class="keyword">const</span> <span class="keywordtype">float</span> rads = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( cur.<a class="code hl_function" href="classfield__entry.html#a080080e792522897e40064ab2b413021">extra_radiation_min</a>() + 1,</div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span>                                    cur.<a class="code hl_function" href="classfield__entry.html#a6d067afbbf776958097359844a82c29e">extra_radiation_max</a>() * ( cur.<a class="code hl_function" href="classfield__entry.html#a6d067afbbf776958097359844a82c29e">extra_radiation_max</a>() + 1 ) );</div>
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"> 1429</span>            <span class="keyword">const</span> <span class="keywordtype">bool</span> rad_proof = !u.<a class="code hl_function" href="classCharacter.html#af157e1fa623589a34b3c23a511dbc797">irradiate</a>( rads );</div>
<div class="line"><a id="l01430" name="l01430"></a><span class="lineno"> 1430</span>            <span class="comment">// TODO: Reduce damage for rad resistant?</span></div>
<div class="line"><a id="l01431" name="l01431"></a><span class="lineno"> 1431</span>            <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a2cc99711c7c06a482628cb09d4ee3f50">radiation_hurt_damage_min</a>() &gt; 0 &amp;&amp; !rad_proof ) {</div>
<div class="line"><a id="l01432" name="l01432"></a><span class="lineno"> 1432</span>                u.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, cur.<a class="code hl_function" href="classfield__entry.html#a4a0c95792efa772fc965f5ee5fe829aa">radiation_hurt_message</a>() );</div>
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"> 1433</span>                u.<a class="code hl_function" href="classCharacter.html#ad30aa5db93626016bfc8ac32f848f82d">hurtall</a>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( cur.<a class="code hl_function" href="classfield__entry.html#a2cc99711c7c06a482628cb09d4ee3f50">radiation_hurt_damage_min</a>(), cur.<a class="code hl_function" href="classfield__entry.html#a7fccb871e56858b439a80d2270e86f52">radiation_hurt_damage_max</a>() ), <span class="keyword">nullptr</span> );</div>
<div class="line"><a id="l01434" name="l01434"></a><span class="lineno"> 1434</span>            }</div>
<div class="line"><a id="l01435" name="l01435"></a><span class="lineno"> 1435</span>        }</div>
<div class="line"><a id="l01436" name="l01436"></a><span class="lineno"> 1436</span>        <span class="keywordflow">if</span>( ft == <a class="code hl_variable" href="field__type_8cpp.html#ac0a79fdf7c7852adae6c208031850b36">fd_flame_burst</a> ) {</div>
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"> 1437</span>            <span class="comment">// A burst of flame? Only hits the legs and torso.</span></div>
<div class="line"><a id="l01438" name="l01438"></a><span class="lineno"> 1438</span>            <span class="keywordflow">if</span>( !inside ) {</div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span>                <span class="comment">// Fireballs can&#39;t touch you inside a car.</span></div>
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"> 1440</span>                <span class="comment">// Heatsink or suit stops fire.</span></div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"> 1441</span>                <span class="keywordflow">if</span>( !u.<a class="code hl_function" href="classCharacter.html#af9c7419575e23d52745c94009929fafb">has_active_bionic</a>( <a class="code hl_variable" href="map__field_8cpp.html#af198a4e5b75aadbc020ee447fd31226b">bio_heatsink</a> ) &amp;&amp;</div>
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"> 1442</span>                    !u.<a class="code hl_function" href="classCharacter.html#a6028587ccee9855c6ba900042188eec3">is_wearing</a>( <a class="code hl_variable" href="map__field_8cpp.html#a2e1ccdf5aa874eaaf8e3f14757d72179">itype_rm13_armor_on</a> ) ) {</div>
<div class="line"><a id="l01443" name="l01443"></a><span class="lineno"> 1443</span>                    u.<a class="code hl_function" href="classplayer.html#a07108565639fa6fe5b6776b4e8674fb6">add_msg_player_or_npc</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You&#39;re torched by flames!&quot;</span> ),</div>
<div class="line"><a id="l01444" name="l01444"></a><span class="lineno"> 1444</span>                                             <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; is torched by flames!&quot;</span> ) );</div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span>                    u.<a class="code hl_function" href="classCharacter.html#a2c05090cba2078f9ebefd80e61564be3">deal_damage</a>( <span class="keyword">nullptr</span>, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;leg_l&quot;</span> ), <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aae6af44cd6e0e8cafcc63cea198f627c9">DT_HEAT</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 2, 6 ) ) );</div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span>                    u.<a class="code hl_function" href="classCharacter.html#a2c05090cba2078f9ebefd80e61564be3">deal_damage</a>( <span class="keyword">nullptr</span>, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;leg_r&quot;</span> ), <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aae6af44cd6e0e8cafcc63cea198f627c9">DT_HEAT</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 2, 6 ) ) );</div>
<div class="line"><a id="l01447" name="l01447"></a><span class="lineno"> 1447</span>                    u.<a class="code hl_function" href="classCharacter.html#a2c05090cba2078f9ebefd80e61564be3">deal_damage</a>( <span class="keyword">nullptr</span>, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ), <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aae6af44cd6e0e8cafcc63cea198f627c9">DT_HEAT</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 4, 9 ) ) );</div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"> 1448</span>                    u.<a class="code hl_function" href="classCreature.html#a36dcf5a04ddc0cf9fa29c08b7b099158">check_dead_state</a>();</div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01450" name="l01450"></a><span class="lineno"> 1450</span>                    u.<a class="code hl_function" href="classplayer.html#a07108565639fa6fe5b6776b4e8674fb6">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;These flames do not burn you.&quot;</span> ),</div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"> 1451</span>                                             <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Those flames do not burn &lt;npcname&gt;.&quot;</span> ) );</div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"> 1452</span>                }</div>
<div class="line"><a id="l01453" name="l01453"></a><span class="lineno"> 1453</span>            }</div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span>        }</div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"> 1455</span>        <span class="keywordflow">if</span>( ft == <a class="code hl_variable" href="field__type_8cpp.html#a67f782decc0eca9e8e55696dfa89d13b">fd_electricity</a> ) {</div>
<div class="line"><a id="l01456" name="l01456"></a><span class="lineno"> 1456</span>            <span class="comment">// Small universal damage based on intensity, only if not electroproofed.</span></div>
<div class="line"><a id="l01457" name="l01457"></a><span class="lineno"> 1457</span>            <span class="keywordflow">if</span>( !u.<a class="code hl_function" href="classCharacter.html#a2fcc1fc6fbdadd5dc6f404eb80351b3f">is_elec_immune</a>() ) {</div>
<div class="line"><a id="l01458" name="l01458"></a><span class="lineno"> 1458</span>                <span class="keywordtype">int</span> total_damage = 0;</div>
<div class="line"><a id="l01459" name="l01459"></a><span class="lineno"> 1459</span>                <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code hl_enumvalue" href="pldata_8h.html#a51c99b582921c7fe956e6cb62a7b8fe0ad276871b7d0cc8a7678aae85a07a5cc6">num_hp_parts</a>; i++ ) {</div>
<div class="line"><a id="l01460" name="l01460"></a><span class="lineno"> 1460</span>                    <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">bodypart_id</a> bp = <a class="code hl_function" href="bodypart_8cpp.html#ae34a481a7c686b233f2d8c48e43b723a">convert_bp</a>( <a class="code hl_function" href="classCharacter.html#af781804624ab031f0016b970b4fa8007">player::hp_to_bp</a>( <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="pldata_8h.html#a51c99b582921c7fe956e6cb62a7b8fe0">hp_part</a><span class="keyword">&gt;</span>( i ) ) ).<a class="code hl_function" href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">id</a>();</div>
<div class="line"><a id="l01461" name="l01461"></a><span class="lineno"> 1461</span>                    <span class="keyword">const</span> <span class="keywordtype">int</span> dmg = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() );</div>
<div class="line"><a id="l01462" name="l01462"></a><span class="lineno"> 1462</span>                    total_damage += u.<a class="code hl_function" href="classCharacter.html#a2c05090cba2078f9ebefd80e61564be3">deal_damage</a>( <span class="keyword">nullptr</span>, bp, <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa31df3b2996d2d10b2ca3e275899fdddb">DT_ELECTRIC</a>, dmg ) ).<a class="code hl_function" href="structdealt__damage__instance.html#a86b702070a1c313624abc78ff34eff48">total_damage</a>();</div>
<div class="line"><a id="l01463" name="l01463"></a><span class="lineno"> 1463</span>                }</div>
<div class="line"><a id="l01464" name="l01464"></a><span class="lineno"> 1464</span> </div>
<div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span>                <span class="keywordflow">if</span>( total_damage &gt; 0 ) {</div>
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"> 1466</span>                    <span class="keywordflow">if</span>( u.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="map__field_8cpp.html#a0bfdd3a7d9e971128bba26c5a37b2292">trait_ELECTRORECEPTORS</a> ) ) {</div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span>                        u.<a class="code hl_function" href="classplayer.html#a07108565639fa6fe5b6776b4e8674fb6">add_msg_player_or_npc</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You&#39;re painfully electrocuted!&quot;</span> ),</div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span>                                                 <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; is shocked!&quot;</span> ) );</div>
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"> 1469</span>                        u.<a class="code hl_function" href="classplayer.html#a1304421e7a67d0046529f3bd9263ce42">mod_pain</a>( total_damage / 2 );</div>
<div class="line"><a id="l01470" name="l01470"></a><span class="lineno"> 1470</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01471" name="l01471"></a><span class="lineno"> 1471</span>                        u.<a class="code hl_function" href="classplayer.html#a07108565639fa6fe5b6776b4e8674fb6">add_msg_player_or_npc</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You&#39;re shocked!&quot;</span> ), <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; is shocked!&quot;</span> ) );</div>
<div class="line"><a id="l01472" name="l01472"></a><span class="lineno"> 1472</span>                    }</div>
<div class="line"><a id="l01473" name="l01473"></a><span class="lineno"> 1473</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01474" name="l01474"></a><span class="lineno"> 1474</span>                    u.<a class="code hl_function" href="classplayer.html#a07108565639fa6fe5b6776b4e8674fb6">add_msg_player_or_npc</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The electric cloud doesn&#39;t affect you.&quot;</span> ),</div>
<div class="line"><a id="l01475" name="l01475"></a><span class="lineno"> 1475</span>                                             <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The electric cloud doesn&#39;t seem to affect &lt;npcname&gt;.&quot;</span> ) );</div>
<div class="line"><a id="l01476" name="l01476"></a><span class="lineno"> 1476</span>                }</div>
<div class="line"><a id="l01477" name="l01477"></a><span class="lineno"> 1477</span>            }</div>
<div class="line"><a id="l01478" name="l01478"></a><span class="lineno"> 1478</span>        }</div>
<div class="line"><a id="l01479" name="l01479"></a><span class="lineno"> 1479</span>        <span class="keywordflow">if</span>( ft == <a class="code hl_variable" href="field__type_8cpp.html#ae1b475e49c929a1dab1575f541a11542">fd_fatigue</a> ) {</div>
<div class="line"><a id="l01480" name="l01480"></a><span class="lineno"> 1480</span>            <span class="comment">// Assume the rift is on the ground for now to prevent issues with the player being unable access vehicle controls on the same tile due to teleportation.</span></div>
<div class="line"><a id="l01481" name="l01481"></a><span class="lineno"> 1481</span>            <span class="keywordflow">if</span>( !u.<a class="code hl_variable" href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">in_vehicle</a> ) {</div>
<div class="line"><a id="l01482" name="l01482"></a><span class="lineno"> 1482</span>                <span class="comment">// Teleports you... somewhere.</span></div>
<div class="line"><a id="l01483" name="l01483"></a><span class="lineno"> 1483</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 2 ) &lt; cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() &amp;&amp; u.<a class="code hl_function" href="classplayer.html#af4d6390315e3c781edf8649c5ae59a33">is_player</a>() ) {</div>
<div class="line"><a id="l01484" name="l01484"></a><span class="lineno"> 1484</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You&#39;re violently teleported!&quot;</span> ) );</div>
<div class="line"><a id="l01485" name="l01485"></a><span class="lineno"> 1485</span>                    u.<a class="code hl_function" href="classCharacter.html#ad30aa5db93626016bfc8ac32f848f82d">hurtall</a>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>(), <span class="keyword">nullptr</span> );</div>
<div class="line"><a id="l01486" name="l01486"></a><span class="lineno"> 1486</span>                    <a class="code hl_function" href="namespaceteleport.html#a24cbf298b41e9fc23770c73d32e33a47">teleport::teleport</a>( u );</div>
<div class="line"><a id="l01487" name="l01487"></a><span class="lineno"> 1487</span>                }</div>
<div class="line"><a id="l01488" name="l01488"></a><span class="lineno"> 1488</span>            }</div>
<div class="line"><a id="l01489" name="l01489"></a><span class="lineno"> 1489</span>        }</div>
<div class="line"><a id="l01490" name="l01490"></a><span class="lineno"> 1490</span>        <span class="comment">// Why do these get removed???</span></div>
<div class="line"><a id="l01491" name="l01491"></a><span class="lineno"> 1491</span>        <span class="comment">// Stepping on a shock vent shuts it down.</span></div>
<div class="line"><a id="l01492" name="l01492"></a><span class="lineno"> 1492</span>        <span class="keywordflow">if</span>( ft == <a class="code hl_variable" href="field__type_8cpp.html#af68a10962d47adfdd285a27f7f500e23">fd_shock_vent</a> || ft == <a class="code hl_variable" href="field__type_8cpp.html#a4c4d93c13302c8e6c6d29ed8e6c07a4b">fd_acid_vent</a> ) {</div>
<div class="line"><a id="l01493" name="l01493"></a><span class="lineno"> 1493</span>            cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( 0 );</div>
<div class="line"><a id="l01494" name="l01494"></a><span class="lineno"> 1494</span>        }</div>
<div class="line"><a id="l01495" name="l01495"></a><span class="lineno"> 1495</span>        <span class="keywordflow">if</span>( ft == <a class="code hl_variable" href="field__type_8cpp.html#a5d5f15ed25822dd84422bced5beef691">fd_bees</a> ) {</div>
<div class="line"><a id="l01496" name="l01496"></a><span class="lineno"> 1496</span>            <span class="comment">// Player is immune to bees while underwater.</span></div>
<div class="line"><a id="l01497" name="l01497"></a><span class="lineno"> 1497</span>            <span class="keywordflow">if</span>( !u.<a class="code hl_function" href="classCreature.html#a5a2346f549de9c87e8f2afeec1e71366">is_underwater</a>() ) {</div>
<div class="line"><a id="l01498" name="l01498"></a><span class="lineno"> 1498</span>                <span class="keyword">const</span> <span class="keywordtype">int</span> intensity = cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>();</div>
<div class="line"><a id="l01499" name="l01499"></a><span class="lineno"> 1499</span>                <span class="comment">// Bees will try to sting you in random body parts, up to 8 times.</span></div>
<div class="line"><a id="l01500" name="l01500"></a><span class="lineno"> 1500</span>                <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 7 ); i++ ) {</div>
<div class="line"><a id="l01501" name="l01501"></a><span class="lineno"> 1501</span>                    <a class="code hl_class" href="classint__id.html">bodypart_id</a> bp = u.<a class="code hl_function" href="classCreature.html#a51c96c81ae1ea766b5eead4a265c1492">get_random_body_part</a>();</div>
<div class="line"><a id="l01502" name="l01502"></a><span class="lineno"> 1502</span>                    <span class="keywordtype">int</span> sum_cover = 0;</div>
<div class="line"><a id="l01503" name="l01503"></a><span class="lineno"> 1503</span>                    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp;i : u.<a class="code hl_variable" href="classCharacter.html#a4c3defc0d53472077cb7577b30b1605f">worn</a> ) {</div>
<div class="line"><a id="l01504" name="l01504"></a><span class="lineno"> 1504</span>                        <span class="keywordflow">if</span>( i.<a class="code hl_function" href="classitem.html#ad5b753d7b46c55de9a5b66bbc2b14b99">covers</a>( bp-&gt;token ) ) {</div>
<div class="line"><a id="l01505" name="l01505"></a><span class="lineno"> 1505</span>                            sum_cover += i.<a class="code hl_function" href="classitem.html#aae86ed52f17bed14dffddbbc618b8afa">get_coverage</a>();</div>
<div class="line"><a id="l01506" name="l01506"></a><span class="lineno"> 1506</span>                        }</div>
<div class="line"><a id="l01507" name="l01507"></a><span class="lineno"> 1507</span>                    }</div>
<div class="line"><a id="l01508" name="l01508"></a><span class="lineno"> 1508</span>                    <span class="comment">// Get stung if [clothing on a body part isn&#39;t thick enough (like t-shirt) OR clothing covers less than 100% of body part]</span></div>
<div class="line"><a id="l01509" name="l01509"></a><span class="lineno"> 1509</span>                    <span class="comment">// AND clothing on affected body part has low environmental protection value</span></div>
<div class="line"><a id="l01510" name="l01510"></a><span class="lineno"> 1510</span>                    <span class="keywordflow">if</span>( ( u.<a class="code hl_function" href="classCharacter.html#aa07b9d5f3a6d22ce9c6593d364cb14bc">get_armor_cut</a>( bp ) &lt;= 1 || ( sum_cover &lt; 100 &amp;&amp; <a class="code hl_function" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( 100 - sum_cover, 100 ) ) ) &amp;&amp;</div>
<div class="line"><a id="l01511" name="l01511"></a><span class="lineno"> 1511</span>                        u.<a class="code hl_function" href="classCreature.html#aeb7869963d4c1060c4d928424511d2e0">add_env_effect</a>( <a class="code hl_variable" href="map__field_8cpp.html#a8e21df750cb8c6b27ba9b240e11bc6db">effect_stung</a>, bp-&gt;token, intensity, 9_minutes ) ) {</div>
<div class="line"><a id="l01512" name="l01512"></a><span class="lineno"> 1512</span>                        u.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The bees sting you in %s!&quot;</span> ),</div>
<div class="line"><a id="l01513" name="l01513"></a><span class="lineno"> 1513</span>                                             <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( bp-&gt;token ) );</div>
<div class="line"><a id="l01514" name="l01514"></a><span class="lineno"> 1514</span>                    }</div>
<div class="line"><a id="l01515" name="l01515"></a><span class="lineno"> 1515</span>                }</div>
<div class="line"><a id="l01516" name="l01516"></a><span class="lineno"> 1516</span>            }</div>
<div class="line"><a id="l01517" name="l01517"></a><span class="lineno"> 1517</span>        }</div>
<div class="line"><a id="l01518" name="l01518"></a><span class="lineno"> 1518</span>        <span class="keywordflow">if</span>( ft == <a class="code hl_variable" href="field__type_8cpp.html#a0740150aaa065c46121ca6a8981a2fdd">fd_incendiary</a> ) {</div>
<div class="line"><a id="l01519" name="l01519"></a><span class="lineno"> 1519</span>            <span class="comment">// Mysterious incendiary substance melts you horribly.</span></div>
<div class="line"><a id="l01520" name="l01520"></a><span class="lineno"> 1520</span>            <span class="keywordflow">if</span>( u.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="map__field_8cpp.html#a644d3f52891b843ba69587dc6c6088d3">trait_M_SKIN2</a> ) ||</div>
<div class="line"><a id="l01521" name="l01521"></a><span class="lineno"> 1521</span>                u.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="map__field_8cpp.html#a039c3379527621f928cbc2e62686108c">trait_M_SKIN3</a> ) ||</div>
<div class="line"><a id="l01522" name="l01522"></a><span class="lineno"> 1522</span>                cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() == 1 ) {</div>
<div class="line"><a id="l01523" name="l01523"></a><span class="lineno"> 1523</span>                u.<a class="code hl_function" href="classplayer.html#a07108565639fa6fe5b6776b4e8674fb6">add_msg_player_or_npc</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The incendiary burns you!&quot;</span> ),</div>
<div class="line"><a id="l01524" name="l01524"></a><span class="lineno"> 1524</span>                                         <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The incendiary burns &lt;npcname&gt;!&quot;</span> ) );</div>
<div class="line"><a id="l01525" name="l01525"></a><span class="lineno"> 1525</span>                u.<a class="code hl_function" href="classCharacter.html#ad30aa5db93626016bfc8ac32f848f82d">hurtall</a>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 3 ), nullptr );</div>
<div class="line"><a id="l01526" name="l01526"></a><span class="lineno"> 1526</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01527" name="l01527"></a><span class="lineno"> 1527</span>                u.<a class="code hl_function" href="classplayer.html#a07108565639fa6fe5b6776b4e8674fb6">add_msg_player_or_npc</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The incendiary melts into your skin!&quot;</span> ),</div>
<div class="line"><a id="l01528" name="l01528"></a><span class="lineno"> 1528</span>                                         <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The incendiary melts into &lt;npcname&gt;s skin!&quot;</span> ) );</div>
<div class="line"><a id="l01529" name="l01529"></a><span class="lineno"> 1529</span>                u.<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="map__field_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a>, 8_turns, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a> );</div>
<div class="line"><a id="l01530" name="l01530"></a><span class="lineno"> 1530</span>                u.<a class="code hl_function" href="classCharacter.html#ad30aa5db93626016bfc8ac32f848f82d">hurtall</a>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 2, 6 ), nullptr );</div>
<div class="line"><a id="l01531" name="l01531"></a><span class="lineno"> 1531</span>            }</div>
<div class="line"><a id="l01532" name="l01532"></a><span class="lineno"> 1532</span>        }</div>
<div class="line"><a id="l01533" name="l01533"></a><span class="lineno"> 1533</span>        <span class="comment">// Both gases are unhealthy and become deadly if you cross a related threshold.</span></div>
<div class="line"><a id="l01534" name="l01534"></a><span class="lineno"> 1534</span>        <span class="keywordflow">if</span>( ft == <a class="code hl_variable" href="field__type_8cpp.html#a9868dee0533f3cc11e389b49a6c4f636">fd_fungicidal_gas</a> || ft == <a class="code hl_variable" href="field__type_8cpp.html#afefbe0ddb9ee9d0a0e2db8b4d89840bb">fd_insecticidal_gas</a> ) {</div>
<div class="line"><a id="l01535" name="l01535"></a><span class="lineno"> 1535</span>            <span class="comment">// The gas won&#39;t harm you inside a vehicle.</span></div>
<div class="line"><a id="l01536" name="l01536"></a><span class="lineno"> 1536</span>            <span class="keywordflow">if</span>( !inside ) {</div>
<div class="line"><a id="l01537" name="l01537"></a><span class="lineno"> 1537</span>                <span class="comment">// Full body suits protect you from the effects of the gas.</span></div>
<div class="line"><a id="l01538" name="l01538"></a><span class="lineno"> 1538</span>                <span class="keywordflow">if</span>( !( u.<a class="code hl_function" href="classCharacter.html#a3aaa75382f6308a729369c7f2ccf0600">worn_with_flag</a>( <a class="code hl_function" href="map__field_8cpp.html#a08867676937d5a671005725465da2213">flag_GAS_PROOF</a> ) &amp;&amp; u.<a class="code hl_function" href="classCharacter.html#a8bc4c7c3d24cec4d735cf276e02de93a">get_env_resist</a>( <a class="code hl_class" href="classint__id.html">bodypart_id</a>( <span class="stringliteral">&quot;mouth&quot;</span> ) ) &gt;= 15 &amp;&amp;</div>
<div class="line"><a id="l01539" name="l01539"></a><span class="lineno"> 1539</span>                       u.<a class="code hl_function" href="classCharacter.html#a8bc4c7c3d24cec4d735cf276e02de93a">get_env_resist</a>( <a class="code hl_class" href="classint__id.html">bodypart_id</a>( <span class="stringliteral">&quot;eyes&quot;</span> ) ) &gt;= 15 ) ) {</div>
<div class="line"><a id="l01540" name="l01540"></a><span class="lineno"> 1540</span>                    <span class="keyword">const</span> <span class="keywordtype">int</span> intensity = cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>();</div>
<div class="line"><a id="l01541" name="l01541"></a><span class="lineno"> 1541</span>                    <span class="keywordtype">bool</span> inhaled = u.<a class="code hl_function" href="classCreature.html#aeb7869963d4c1060c4d928424511d2e0">add_env_effect</a>( <a class="code hl_variable" href="map__field_8cpp.html#ace42425e1e703ebbe953ade0f6110b7c">effect_poison</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980abb7b120eb8dc7c137110446fe541baed">bp_mouth</a>, 5, intensity * 1_minutes );</div>
<div class="line"><a id="l01542" name="l01542"></a><span class="lineno"> 1542</span>                    <span class="keywordflow">if</span>( u.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="map__field_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a> ) || u.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="map__field_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">trait_THRESH_MARLOSS</a> ) ||</div>
<div class="line"><a id="l01543" name="l01543"></a><span class="lineno"> 1543</span>                        ( ft == <a class="code hl_variable" href="field__type_8cpp.html#afefbe0ddb9ee9d0a0e2db8b4d89840bb">fd_insecticidal_gas</a> &amp;&amp; ( u.<a class="code hl_function" href="classCharacter.html#ab16d86fdaf75c28043679273a8c74843">get_highest_category</a>() == <span class="stringliteral">&quot;INSECT&quot;</span> ||</div>
<div class="line"><a id="l01544" name="l01544"></a><span class="lineno"> 1544</span>                                                         u.<a class="code hl_function" href="classCharacter.html#ab16d86fdaf75c28043679273a8c74843">get_highest_category</a>() == <span class="stringliteral">&quot;SPIDER&quot;</span> ) ) ) {</div>
<div class="line"><a id="l01545" name="l01545"></a><span class="lineno"> 1545</span>                        inhaled |= u.<a class="code hl_function" href="classCreature.html#aeb7869963d4c1060c4d928424511d2e0">add_env_effect</a>( <a class="code hl_variable" href="map__field_8cpp.html#a0f3a25eb2b398fd705348436a034da00">effect_badpoison</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980abb7b120eb8dc7c137110446fe541baed">bp_mouth</a>, 5, intensity * 1_minutes );</div>
<div class="line"><a id="l01546" name="l01546"></a><span class="lineno"> 1546</span>                        u.<a class="code hl_function" href="classCharacter.html#ad30aa5db93626016bfc8ac32f848f82d">hurtall</a>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( intensity, intensity * 2 ), nullptr );</div>
<div class="line"><a id="l01547" name="l01547"></a><span class="lineno"> 1547</span>                        u.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s burns your skin.&quot;</span> ), cur.<a class="code hl_function" href="classfield__entry.html#a7befd45d74490275bd7c5bf92cabc284">name</a>() );</div>
<div class="line"><a id="l01548" name="l01548"></a><span class="lineno"> 1548</span>                    }</div>
<div class="line"><a id="l01549" name="l01549"></a><span class="lineno"> 1549</span> </div>
<div class="line"><a id="l01550" name="l01550"></a><span class="lineno"> 1550</span>                    <span class="keywordflow">if</span>( inhaled ) {</div>
<div class="line"><a id="l01551" name="l01551"></a><span class="lineno"> 1551</span>                        u.<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The %s makes you feel sick.&quot;</span> ), cur.<a class="code hl_function" href="classfield__entry.html#a7befd45d74490275bd7c5bf92cabc284">name</a>() );</div>
<div class="line"><a id="l01552" name="l01552"></a><span class="lineno"> 1552</span>                    }</div>
<div class="line"><a id="l01553" name="l01553"></a><span class="lineno"> 1553</span>                }</div>
<div class="line"><a id="l01554" name="l01554"></a><span class="lineno"> 1554</span>            }</div>
<div class="line"><a id="l01555" name="l01555"></a><span class="lineno"> 1555</span>        }</div>
<div class="line"><a id="l01556" name="l01556"></a><span class="lineno"> 1556</span>    }</div>
<div class="line"><a id="l01557" name="l01557"></a><span class="lineno"> 1557</span>}</div>
<div class="line"><a id="l01558" name="l01558"></a><span class="lineno"> 1558</span> </div>
<div class="line"><a id="l01559" name="l01559"></a><span class="lineno"><a class="line" href="classmap.html#a780bfbdc19649391081c1ad6e0e4aa81"> 1559</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classmap.html#a780bfbdc19649391081c1ad6e0e4aa81">map::creature_in_field</a>( <a class="code hl_class" href="classCreature.html">Creature</a> &amp;critter )</div>
<div class="line"><a id="l01560" name="l01560"></a><span class="lineno"> 1560</span>{</div>
<div class="line"><a id="l01561" name="l01561"></a><span class="lineno"> 1561</span>    <span class="keywordtype">bool</span> in_vehicle = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01562" name="l01562"></a><span class="lineno"> 1562</span>    <span class="keywordtype">bool</span> inside_vehicle = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01563" name="l01563"></a><span class="lineno"> 1563</span>    <a class="code hl_class" href="classplayer.html">player</a> *u = critter.<a class="code hl_function" href="classCreature.html#acb1d0a1210d3dd4c86350f3ad4c58649">as_player</a>();</div>
<div class="line"><a id="l01564" name="l01564"></a><span class="lineno"> 1564</span>    <span class="keywordflow">if</span>( critter.<a class="code hl_function" href="classCreature.html#a07012d6d1998068bef112510c7424374">is_monster</a>() ) {</div>
<div class="line"><a id="l01565" name="l01565"></a><span class="lineno"> 1565</span>        <a class="code hl_function" href="classmap.html#a8f928a118aa01688ea55482dcefc3dde">monster_in_field</a>( *<span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">&gt;</span>( &amp;critter ) );</div>
<div class="line"><a id="l01566" name="l01566"></a><span class="lineno"> 1566</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01567" name="l01567"></a><span class="lineno"> 1567</span>        <span class="keywordflow">if</span>( u ) {</div>
<div class="line"><a id="l01568" name="l01568"></a><span class="lineno"> 1568</span>            in_vehicle = u-&gt;<a class="code hl_variable" href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">in_vehicle</a>;</div>
<div class="line"><a id="l01569" name="l01569"></a><span class="lineno"> 1569</span>            <span class="comment">// If we are in a vehicle figure out if we are inside (reduces effects usually)</span></div>
<div class="line"><a id="l01570" name="l01570"></a><span class="lineno"> 1570</span>            <span class="comment">// and what part of the vehicle we need to deal with.</span></div>
<div class="line"><a id="l01571" name="l01571"></a><span class="lineno"> 1571</span>            <span class="keywordflow">if</span>( in_vehicle ) {</div>
<div class="line"><a id="l01572" name="l01572"></a><span class="lineno"> 1572</span>                <span class="keywordflow">if</span>( <span class="keyword">const</span> <a class="code hl_class" href="classoptional__vpart__position.html">optional_vpart_position</a> vp = <a class="code hl_function" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( u-&gt;<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() ) ) {</div>
<div class="line"><a id="l01573" name="l01573"></a><span class="lineno"> 1573</span>                    <span class="keywordflow">if</span>( vp-&gt;is_inside() ) {</div>
<div class="line"><a id="l01574" name="l01574"></a><span class="lineno"> 1574</span>                        inside_vehicle = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01575" name="l01575"></a><span class="lineno"> 1575</span>                    }</div>
<div class="line"><a id="l01576" name="l01576"></a><span class="lineno"> 1576</span>                }</div>
<div class="line"><a id="l01577" name="l01577"></a><span class="lineno"> 1577</span>            }</div>
<div class="line"><a id="l01578" name="l01578"></a><span class="lineno"> 1578</span>            <a class="code hl_function" href="classmap.html#a68b51d9820bb941312ffa9d7757e31bc">player_in_field</a>( *u );</div>
<div class="line"><a id="l01579" name="l01579"></a><span class="lineno"> 1579</span>        }</div>
<div class="line"><a id="l01580" name="l01580"></a><span class="lineno"> 1580</span>    }</div>
<div class="line"><a id="l01581" name="l01581"></a><span class="lineno"> 1581</span> </div>
<div class="line"><a id="l01582" name="l01582"></a><span class="lineno"> 1582</span>    <a class="code hl_class" href="classfield.html">field</a> &amp;curfield = <a class="code hl_function" href="classmap.html#a30cfefdb115c16c5e1af6cc99f94bbbd">get_field</a>( critter.<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>() );</div>
<div class="line"><a id="l01583" name="l01583"></a><span class="lineno"> 1583</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;field_entry_it : curfield ) {</div>
<div class="line"><a id="l01584" name="l01584"></a><span class="lineno"> 1584</span>        <a class="code hl_class" href="classfield__entry.html">field_entry</a> &amp;cur_field_entry = field_entry_it.second;</div>
<div class="line"><a id="l01585" name="l01585"></a><span class="lineno"> 1585</span>        <span class="keywordflow">if</span>( !cur_field_entry.<a class="code hl_function" href="classfield__entry.html#a3b257586eb47865dae75df0ea947ebb3">is_field_alive</a>() ) {</div>
<div class="line"><a id="l01586" name="l01586"></a><span class="lineno"> 1586</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01587" name="l01587"></a><span class="lineno"> 1587</span>        }</div>
<div class="line"><a id="l01588" name="l01588"></a><span class="lineno"> 1588</span>        <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">field_type_id</a> cur_field_id = cur_field_entry.<a class="code hl_function" href="classfield__entry.html#af76e247514edaeed4bdc58638bfa0ae1">get_field_type</a>();</div>
<div class="line"><a id="l01589" name="l01589"></a><span class="lineno"> 1589</span> </div>
<div class="line"><a id="l01590" name="l01590"></a><span class="lineno"> 1590</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;fe : cur_field_entry.<a class="code hl_function" href="classfield__entry.html#a19bc49a48431c18aa79f558038df43a6">field_effects</a>() ) {</div>
<div class="line"><a id="l01591" name="l01591"></a><span class="lineno"> 1591</span>            <span class="keywordflow">if</span>( in_vehicle &amp;&amp; fe.immune_in_vehicle ) {</div>
<div class="line"><a id="l01592" name="l01592"></a><span class="lineno"> 1592</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01593" name="l01593"></a><span class="lineno"> 1593</span>            }</div>
<div class="line"><a id="l01594" name="l01594"></a><span class="lineno"> 1594</span>            <span class="keywordflow">if</span>( inside_vehicle &amp;&amp; fe.immune_inside_vehicle ) {</div>
<div class="line"><a id="l01595" name="l01595"></a><span class="lineno"> 1595</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01596" name="l01596"></a><span class="lineno"> 1596</span>            }</div>
<div class="line"><a id="l01597" name="l01597"></a><span class="lineno"> 1597</span>            <span class="keywordflow">if</span>( !inside_vehicle &amp;&amp; fe.immune_outside_vehicle ) {</div>
<div class="line"><a id="l01598" name="l01598"></a><span class="lineno"> 1598</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01599" name="l01599"></a><span class="lineno"> 1599</span>            }</div>
<div class="line"><a id="l01600" name="l01600"></a><span class="lineno"> 1600</span>            <span class="keywordflow">if</span>( in_vehicle &amp;&amp; !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( fe.chance_in_vehicle ) ) {</div>
<div class="line"><a id="l01601" name="l01601"></a><span class="lineno"> 1601</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span>            }</div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span>            <span class="keywordflow">if</span>( inside_vehicle &amp;&amp; !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( fe.chance_inside_vehicle ) ) {</div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span>            }</div>
<div class="line"><a id="l01606" name="l01606"></a><span class="lineno"> 1606</span>            <span class="keywordflow">if</span>( !inside_vehicle &amp;&amp; !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( fe.chance_outside_vehicle ) ) {</div>
<div class="line"><a id="l01607" name="l01607"></a><span class="lineno"> 1607</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span>            }</div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"> 1609</span> </div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span>            <span class="keyword">const</span> <a class="code hl_class" href="classeffect.html">effect</a> field_fx = fe.get_effect();</div>
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"> 1611</span>            <span class="keywordflow">if</span>( critter.<a class="code hl_function" href="classCreature.html#a090f59402eea6b1605cbfa5c2b2ac77c">is_immune_field</a>( cur_field_id ) || critter.<a class="code hl_function" href="classCreature.html#acfe4b827ccc042c7933e709fbca6476e">is_immune_effect</a>( field_fx.<a class="code hl_function" href="classeffect.html#a64af3902e1495976589ba64ac4c82022">get_id</a>() ) ) {</div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span>            }</div>
<div class="line"><a id="l01614" name="l01614"></a><span class="lineno"> 1614</span>            <span class="keywordtype">bool</span> effect_added = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01615" name="l01615"></a><span class="lineno"> 1615</span>            <span class="keywordflow">if</span>( fe.is_environmental ) {</div>
<div class="line"><a id="l01616" name="l01616"></a><span class="lineno"> 1616</span>                effect_added = critter.<a class="code hl_function" href="classCreature.html#aeb7869963d4c1060c4d928424511d2e0">add_env_effect</a>( fe.id, fe.bp-&gt;token, fe.intensity, fe.get_duration() );</div>
<div class="line"><a id="l01617" name="l01617"></a><span class="lineno"> 1617</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01618" name="l01618"></a><span class="lineno"> 1618</span>                effect_added = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01619" name="l01619"></a><span class="lineno"> 1619</span>                critter.<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( field_fx );</div>
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"> 1620</span>            }</div>
<div class="line"><a id="l01621" name="l01621"></a><span class="lineno"> 1621</span>            <span class="keywordflow">if</span>( effect_added ) {</div>
<div class="line"><a id="l01622" name="l01622"></a><span class="lineno"> 1622</span>                critter.<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( fe.env_message_type, fe.get_message(), fe.get_message_npc() );</div>
<div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span>            }</div>
<div class="line"><a id="l01624" name="l01624"></a><span class="lineno"> 1624</span>        }</div>
<div class="line"><a id="l01625" name="l01625"></a><span class="lineno"> 1625</span>    }</div>
<div class="line"><a id="l01626" name="l01626"></a><span class="lineno"> 1626</span>}</div>
<div class="line"><a id="l01627" name="l01627"></a><span class="lineno"> 1627</span> </div>
<div class="line"><a id="l01628" name="l01628"></a><span class="lineno"><a class="line" href="classmap.html#a8f928a118aa01688ea55482dcefc3dde"> 1628</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classmap.html#a8f928a118aa01688ea55482dcefc3dde">map::monster_in_field</a>( <a class="code hl_class" href="classmonster.html">monster</a> &amp;z )</div>
<div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span>{</div>
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"> 1630</span>    <span class="keywordflow">if</span>( z.<a class="code hl_function" href="classmonster.html#af705eea6e40e12d7866010955602c7b5">digging</a>() ) {</div>
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"> 1631</span>        <span class="comment">// Digging monsters are immune to fields</span></div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"> 1632</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span>    }</div>
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"> 1634</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( z.<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>() ) ) {</div>
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"> 1635</span>        <span class="comment">// FIXME: Immune when in a vehicle for now.</span></div>
<div class="line"><a id="l01636" name="l01636"></a><span class="lineno"> 1636</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01637" name="l01637"></a><span class="lineno"> 1637</span>    }</div>
<div class="line"><a id="l01638" name="l01638"></a><span class="lineno"> 1638</span>    <a class="code hl_class" href="classfield.html">field</a> &amp;curfield = <a class="code hl_function" href="classmap.html#a30cfefdb115c16c5e1af6cc99f94bbbd">get_field</a>( z.<a class="code hl_function" href="classmonster.html#a55d95177d49525c0da7649f135a6306d">pos</a>() );</div>
<div class="line"><a id="l01639" name="l01639"></a><span class="lineno"> 1639</span> </div>
<div class="line"><a id="l01640" name="l01640"></a><span class="lineno"> 1640</span>    <span class="keywordtype">int</span> dam = 0;</div>
<div class="line"><a id="l01641" name="l01641"></a><span class="lineno"> 1641</span>    <span class="comment">// Iterate through all field effects on this tile.</span></div>
<div class="line"><a id="l01642" name="l01642"></a><span class="lineno"> 1642</span>    <span class="comment">// Do not remove the field with remove_field, instead set it&#39;s intensity to 0. It will be removed</span></div>
<div class="line"><a id="l01643" name="l01643"></a><span class="lineno"> 1643</span>    <span class="comment">// later by the field processing, which will also adjust field_count accordingly.</span></div>
<div class="line"><a id="l01644" name="l01644"></a><span class="lineno"> 1644</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;field_list_it : curfield ) {</div>
<div class="line"><a id="l01645" name="l01645"></a><span class="lineno"> 1645</span>        <a class="code hl_class" href="classfield__entry.html">field_entry</a> &amp;cur = field_list_it.second;</div>
<div class="line"><a id="l01646" name="l01646"></a><span class="lineno"> 1646</span>        <span class="keywordflow">if</span>( !cur.<a class="code hl_function" href="classfield__entry.html#a3b257586eb47865dae75df0ea947ebb3">is_field_alive</a>() ) {</div>
<div class="line"><a id="l01647" name="l01647"></a><span class="lineno"> 1647</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01648" name="l01648"></a><span class="lineno"> 1648</span>        }</div>
<div class="line"><a id="l01649" name="l01649"></a><span class="lineno"> 1649</span>        <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">field_type_id</a> cur_field_type = cur.<a class="code hl_function" href="classfield__entry.html#af76e247514edaeed4bdc58638bfa0ae1">get_field_type</a>();</div>
<div class="line"><a id="l01650" name="l01650"></a><span class="lineno"> 1650</span>        <span class="keywordflow">if</span>( cur_field_type == <a class="code hl_variable" href="field__type_8cpp.html#afca1ca43633c0fc76d866752559218d4">fd_web</a> ) {</div>
<div class="line"><a id="l01651" name="l01651"></a><span class="lineno"> 1651</span>            <span class="keywordflow">if</span>( !z.<a class="code hl_function" href="classmonster.html#a0315651e596e69f0626b30e081726596">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a5802616095163946b93de29c858419af">MF_WEBWALK</a> ) ) {</div>
<div class="line"><a id="l01652" name="l01652"></a><span class="lineno"> 1652</span>                z.<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="map__field_8cpp.html#aa222d693ccc29efba86a3bb9f18add4e">effect_webbed</a>, 1_turns, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a>, cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() );</div>
<div class="line"><a id="l01653" name="l01653"></a><span class="lineno"> 1653</span>                cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( 0 );</div>
<div class="line"><a id="l01654" name="l01654"></a><span class="lineno"> 1654</span>            }</div>
<div class="line"><a id="l01655" name="l01655"></a><span class="lineno"> 1655</span>        }</div>
<div class="line"><a id="l01656" name="l01656"></a><span class="lineno"> 1656</span>        <span class="keywordflow">if</span>( cur_field_type == <a class="code hl_variable" href="field__type_8cpp.html#ab7a8a9cdb74831f6553f4abf5df22873">fd_acid</a> ) {</div>
<div class="line"><a id="l01657" name="l01657"></a><span class="lineno"> 1657</span>            <span class="keywordflow">if</span>( !z.<a class="code hl_function" href="classmonster.html#aedaf54c4048d596420fae0d32bb1f586">flies</a>() ) {</div>
<div class="line"><a id="l01658" name="l01658"></a><span class="lineno"> 1658</span>                <span class="keyword">const</span> <span class="keywordtype">int</span> d = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>(), cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() * 3 );</div>
<div class="line"><a id="l01659" name="l01659"></a><span class="lineno"> 1659</span>                z.<a class="code hl_function" href="classCreature.html#a75ad96eb6ce27d3c1df250965b4de7b5">deal_damage</a>( <span class="keyword">nullptr</span>, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ), <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa8fce673f2bfbb3fdb52be44a8e638c90">DT_ACID</a>, d ) );</div>
<div class="line"><a id="l01660" name="l01660"></a><span class="lineno"> 1660</span>                z.<a class="code hl_function" href="classCreature.html#a36dcf5a04ddc0cf9fa29c08b7b099158">check_dead_state</a>();</div>
<div class="line"><a id="l01661" name="l01661"></a><span class="lineno"> 1661</span>                <span class="keywordflow">if</span>( d &gt; 0 ) {</div>
<div class="line"><a id="l01662" name="l01662"></a><span class="lineno"> 1662</span>                    z.<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="map__field_8cpp.html#a489bb033f6a8cb9073ba12f2e4dd5d92">effect_corroding</a>, 1_turns * <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( d / 2, d * 2 ) );</div>
<div class="line"><a id="l01663" name="l01663"></a><span class="lineno"> 1663</span>                }</div>
<div class="line"><a id="l01664" name="l01664"></a><span class="lineno"> 1664</span>            }</div>
<div class="line"><a id="l01665" name="l01665"></a><span class="lineno"> 1665</span> </div>
<div class="line"><a id="l01666" name="l01666"></a><span class="lineno"> 1666</span>        }</div>
<div class="line"><a id="l01667" name="l01667"></a><span class="lineno"> 1667</span>        <span class="keywordflow">if</span>( cur_field_type == <a class="code hl_variable" href="field__type_8cpp.html#a7673af64e5ad5618009e2ec14dba3645">fd_sap</a> ) {</div>
<div class="line"><a id="l01668" name="l01668"></a><span class="lineno"> 1668</span>            z.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() * 5;</div>
<div class="line"><a id="l01669" name="l01669"></a><span class="lineno"> 1669</span>            cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() - 1 );</div>
<div class="line"><a id="l01670" name="l01670"></a><span class="lineno"> 1670</span>        }</div>
<div class="line"><a id="l01671" name="l01671"></a><span class="lineno"> 1671</span>        <span class="keywordflow">if</span>( cur_field_type == <a class="code hl_variable" href="field__type_8cpp.html#a4f650392cc90c9a28651f06974421485">fd_sludge</a> ) {</div>
<div class="line"><a id="l01672" name="l01672"></a><span class="lineno"> 1672</span>            <span class="keywordflow">if</span>( !z.<a class="code hl_function" href="classmonster.html#a22e929800e08d5458140ec4dbaad53a5">digs</a>() &amp;&amp; !z.<a class="code hl_function" href="classmonster.html#aedaf54c4048d596420fae0d32bb1f586">flies</a>() &amp;&amp;</div>
<div class="line"><a id="l01673" name="l01673"></a><span class="lineno"> 1673</span>                !z.<a class="code hl_function" href="classmonster.html#a0315651e596e69f0626b30e081726596">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a8f3acb810268f88df5738a0bffd7fb94">MF_SLUDGEPROOF</a> ) ) {</div>
<div class="line"><a id="l01674" name="l01674"></a><span class="lineno"> 1674</span>                z.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() * 300;</div>
<div class="line"><a id="l01675" name="l01675"></a><span class="lineno"> 1675</span>                cur.<a class="code hl_function" href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">set_field_intensity</a>( 0 );</div>
<div class="line"><a id="l01676" name="l01676"></a><span class="lineno"> 1676</span>            }</div>
<div class="line"><a id="l01677" name="l01677"></a><span class="lineno"> 1677</span>        }</div>
<div class="line"><a id="l01678" name="l01678"></a><span class="lineno"> 1678</span>        <span class="keywordflow">if</span>( cur_field_type == <a class="code hl_variable" href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a> ) {</div>
<div class="line"><a id="l01679" name="l01679"></a><span class="lineno"> 1679</span>            <span class="comment">// TODO: MATERIALS Use fire resistance</span></div>
<div class="line"><a id="l01680" name="l01680"></a><span class="lineno"> 1680</span>            <span class="keywordflow">if</span>( z.<a class="code hl_function" href="classmonster.html#a0315651e596e69f0626b30e081726596">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a8dc170679ef70e968144f8da4e15b34d">MF_FIREPROOF</a> ) || z.<a class="code hl_function" href="classmonster.html#a0315651e596e69f0626b30e081726596">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a25c8b8c05cc048947f1593ce74755ae2">MF_FIREY</a> ) ) {</div>
<div class="line"><a id="l01681" name="l01681"></a><span class="lineno"> 1681</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01682" name="l01682"></a><span class="lineno"> 1682</span>            }</div>
<div class="line"><a id="l01683" name="l01683"></a><span class="lineno"> 1683</span>            <span class="comment">// TODO: Replace the section below with proper json values</span></div>
<div class="line"><a id="l01684" name="l01684"></a><span class="lineno"> 1684</span>            <span class="keywordflow">if</span>( z.<a class="code hl_function" href="classmonster.html#a4092c04058a74fa078c89763d11e53ee">made_of_any</a>( <a class="code hl_variable" href="classCreature.html#a81c28d7d1cb83a47794dbf879dede400">Creature::cmat_flesh</a> ) ) {</div>
<div class="line"><a id="l01685" name="l01685"></a><span class="lineno"> 1685</span>                dam += 3;</div>
<div class="line"><a id="l01686" name="l01686"></a><span class="lineno"> 1686</span>            }</div>
<div class="line"><a id="l01687" name="l01687"></a><span class="lineno"> 1687</span>            <span class="keywordflow">if</span>( z.<a class="code hl_function" href="classmonster.html#a6e03e18c6ea5e5adb496634b2bbaea52">made_of</a>( <a class="code hl_class" href="classstring__id.html">material_id</a>( <span class="stringliteral">&quot;veggy&quot;</span> ) ) ) {</div>
<div class="line"><a id="l01688" name="l01688"></a><span class="lineno"> 1688</span>                dam += 12;</div>
<div class="line"><a id="l01689" name="l01689"></a><span class="lineno"> 1689</span>            }</div>
<div class="line"><a id="l01690" name="l01690"></a><span class="lineno"> 1690</span>            <span class="keywordflow">if</span>( z.<a class="code hl_function" href="classmonster.html#a6e03e18c6ea5e5adb496634b2bbaea52">made_of</a>( <a class="code hl_enumvalue" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a> ) || z.<a class="code hl_function" href="classmonster.html#a4092c04058a74fa078c89763d11e53ee">made_of_any</a>( <a class="code hl_variable" href="classCreature.html#a48bb40fe4132a49d95f26611d7c622a6">Creature::cmat_flammable</a> ) ) {</div>
<div class="line"><a id="l01691" name="l01691"></a><span class="lineno"> 1691</span>                dam += 20;</div>
<div class="line"><a id="l01692" name="l01692"></a><span class="lineno"> 1692</span>            }</div>
<div class="line"><a id="l01693" name="l01693"></a><span class="lineno"> 1693</span>            <span class="keywordflow">if</span>( z.<a class="code hl_function" href="classmonster.html#a4092c04058a74fa078c89763d11e53ee">made_of_any</a>( <a class="code hl_variable" href="classCreature.html#ac5fa405fe6d75e0298051ab413cdfac1">Creature::cmat_flameres</a> ) ) {</div>
<div class="line"><a id="l01694" name="l01694"></a><span class="lineno"> 1694</span>                dam += -20;</div>
<div class="line"><a id="l01695" name="l01695"></a><span class="lineno"> 1695</span>            }</div>
<div class="line"><a id="l01696" name="l01696"></a><span class="lineno"> 1696</span>            <span class="keywordflow">if</span>( z.<a class="code hl_function" href="classmonster.html#aedaf54c4048d596420fae0d32bb1f586">flies</a>() ) {</div>
<div class="line"><a id="l01697" name="l01697"></a><span class="lineno"> 1697</span>                dam -= 15;</div>
<div class="line"><a id="l01698" name="l01698"></a><span class="lineno"> 1698</span>            }</div>
<div class="line"><a id="l01699" name="l01699"></a><span class="lineno"> 1699</span>            dam -= z.<a class="code hl_function" href="classmonster.html#ab4c072ceb9cfe95cccdcac5dd85127b8">get_armor_type</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aae6af44cd6e0e8cafcc63cea198f627c9">DT_HEAT</a>, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ) );</div>
<div class="line"><a id="l01700" name="l01700"></a><span class="lineno"> 1700</span> </div>
<div class="line"><a id="l01701" name="l01701"></a><span class="lineno"> 1701</span>            <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() == 1 ) {</div>
<div class="line"><a id="l01702" name="l01702"></a><span class="lineno"> 1702</span>                dam += <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 2, 6 );</div>
<div class="line"><a id="l01703" name="l01703"></a><span class="lineno"> 1703</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() == 2 ) {</div>
<div class="line"><a id="l01704" name="l01704"></a><span class="lineno"> 1704</span>                dam += <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 6, 12 );</div>
<div class="line"><a id="l01705" name="l01705"></a><span class="lineno"> 1705</span>                <span class="keywordflow">if</span>( !z.<a class="code hl_function" href="classmonster.html#aedaf54c4048d596420fae0d32bb1f586">flies</a>() ) {</div>
<div class="line"><a id="l01706" name="l01706"></a><span class="lineno"> 1706</span>                    z.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 20;</div>
<div class="line"><a id="l01707" name="l01707"></a><span class="lineno"> 1707</span>                    <span class="keywordflow">if</span>( dam &gt; 0 ) {</div>
<div class="line"><a id="l01708" name="l01708"></a><span class="lineno"> 1708</span>                        z.<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="map__field_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a>, 1_turns * <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( dam / 2, dam * 2 ) );</div>
<div class="line"><a id="l01709" name="l01709"></a><span class="lineno"> 1709</span>                    }</div>
<div class="line"><a id="l01710" name="l01710"></a><span class="lineno"> 1710</span>                }</div>
<div class="line"><a id="l01711" name="l01711"></a><span class="lineno"> 1711</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() == 3 ) {</div>
<div class="line"><a id="l01712" name="l01712"></a><span class="lineno"> 1712</span>                dam += <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 10, 20 );</div>
<div class="line"><a id="l01713" name="l01713"></a><span class="lineno"> 1713</span>                <span class="keywordflow">if</span>( !z.<a class="code hl_function" href="classmonster.html#aedaf54c4048d596420fae0d32bb1f586">flies</a>() || <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a id="l01714" name="l01714"></a><span class="lineno"> 1714</span>                    z.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 40;</div>
<div class="line"><a id="l01715" name="l01715"></a><span class="lineno"> 1715</span>                    <span class="keywordflow">if</span>( dam &gt; 0 ) {</div>
<div class="line"><a id="l01716" name="l01716"></a><span class="lineno"> 1716</span>                        z.<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="map__field_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a>, 1_turns * <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( dam / 2, dam * 2 ) );</div>
<div class="line"><a id="l01717" name="l01717"></a><span class="lineno"> 1717</span>                    }</div>
<div class="line"><a id="l01718" name="l01718"></a><span class="lineno"> 1718</span>                }</div>
<div class="line"><a id="l01719" name="l01719"></a><span class="lineno"> 1719</span>            }</div>
<div class="line"><a id="l01720" name="l01720"></a><span class="lineno"> 1720</span>        }</div>
<div class="line"><a id="l01721" name="l01721"></a><span class="lineno"> 1721</span>        <span class="keywordflow">if</span>( cur_field_type == <a class="code hl_variable" href="field__type_8cpp.html#a742b7a3f2bec99838055a58c542ecddf">fd_smoke</a> ) {</div>
<div class="line"><a id="l01722" name="l01722"></a><span class="lineno"> 1722</span>            <span class="keywordflow">if</span>( !z.<a class="code hl_function" href="classmonster.html#a0315651e596e69f0626b30e081726596">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842af4b448ccc2906ee0277113805bd8ae06">MF_NO_BREATHE</a> ) ) {</div>
<div class="line"><a id="l01723" name="l01723"></a><span class="lineno"> 1723</span>                <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() == 3 ) {</div>
<div class="line"><a id="l01724" name="l01724"></a><span class="lineno"> 1724</span>                    z.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 10, 20 );</div>
<div class="line"><a id="l01725" name="l01725"></a><span class="lineno"> 1725</span>                }</div>
<div class="line"><a id="l01726" name="l01726"></a><span class="lineno"> 1726</span>                <span class="comment">// Plants suffer from smoke even worse</span></div>
<div class="line"><a id="l01727" name="l01727"></a><span class="lineno"> 1727</span>                <span class="keywordflow">if</span>( z.<a class="code hl_function" href="classmonster.html#a6e03e18c6ea5e5adb496634b2bbaea52">made_of</a>( <a class="code hl_class" href="classstring__id.html">material_id</a>( <span class="stringliteral">&quot;veggy&quot;</span> ) ) ) {</div>
<div class="line"><a id="l01728" name="l01728"></a><span class="lineno"> 1728</span>                    z.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() * 12 );</div>
<div class="line"><a id="l01729" name="l01729"></a><span class="lineno"> 1729</span>                }</div>
<div class="line"><a id="l01730" name="l01730"></a><span class="lineno"> 1730</span>            }</div>
<div class="line"><a id="l01731" name="l01731"></a><span class="lineno"> 1731</span> </div>
<div class="line"><a id="l01732" name="l01732"></a><span class="lineno"> 1732</span>        }</div>
<div class="line"><a id="l01733" name="l01733"></a><span class="lineno"> 1733</span>        <span class="keywordflow">if</span>( cur_field_type == <a class="code hl_variable" href="field__type_8cpp.html#a4bad315aa1dfb35f303b391abd786ae3">fd_tear_gas</a> ) {</div>
<div class="line"><a id="l01734" name="l01734"></a><span class="lineno"> 1734</span>            <span class="keywordflow">if</span>( z.<a class="code hl_function" href="classmonster.html#a4092c04058a74fa078c89763d11e53ee">made_of_any</a>( <a class="code hl_variable" href="classCreature.html#aab3ed00f0b1635fcb5efaa93cf3f8336">Creature::cmat_fleshnveg</a> ) &amp;&amp; !z.<a class="code hl_function" href="classmonster.html#a0315651e596e69f0626b30e081726596">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842af4b448ccc2906ee0277113805bd8ae06">MF_NO_BREATHE</a> ) ) {</div>
<div class="line"><a id="l01735" name="l01735"></a><span class="lineno"> 1735</span>                <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() == 3 ) {</div>
<div class="line"><a id="l01736" name="l01736"></a><span class="lineno"> 1736</span>                    z.<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="map__field_8cpp.html#ad1df0ca2944a94c3ad796e8baada33ae">effect_stunned</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1_minutes, 2_minutes ) );</div>
<div class="line"><a id="l01737" name="l01737"></a><span class="lineno"> 1737</span>                    dam += <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 4, 10 );</div>
<div class="line"><a id="l01738" name="l01738"></a><span class="lineno"> 1738</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() == 2 ) {</div>
<div class="line"><a id="l01739" name="l01739"></a><span class="lineno"> 1739</span>                    z.<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="map__field_8cpp.html#ad1df0ca2944a94c3ad796e8baada33ae">effect_stunned</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 5_turns, 10_turns ) );</div>
<div class="line"><a id="l01740" name="l01740"></a><span class="lineno"> 1740</span>                    dam += <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 2, 5 );</div>
<div class="line"><a id="l01741" name="l01741"></a><span class="lineno"> 1741</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01742" name="l01742"></a><span class="lineno"> 1742</span>                    z.<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="map__field_8cpp.html#ad1df0ca2944a94c3ad796e8baada33ae">effect_stunned</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1_turns, 5_turns ) );</div>
<div class="line"><a id="l01743" name="l01743"></a><span class="lineno"> 1743</span>                }</div>
<div class="line"><a id="l01744" name="l01744"></a><span class="lineno"> 1744</span>                <span class="keywordflow">if</span>( z.<a class="code hl_function" href="classmonster.html#a6e03e18c6ea5e5adb496634b2bbaea52">made_of</a>( <a class="code hl_class" href="classstring__id.html">material_id</a>( <span class="stringliteral">&quot;veggy&quot;</span> ) ) ) {</div>
<div class="line"><a id="l01745" name="l01745"></a><span class="lineno"> 1745</span>                    z.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() * 5, cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() * 12 );</div>
<div class="line"><a id="l01746" name="l01746"></a><span class="lineno"> 1746</span>                    dam += cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() * <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 8, 14 );</div>
<div class="line"><a id="l01747" name="l01747"></a><span class="lineno"> 1747</span>                }</div>
<div class="line"><a id="l01748" name="l01748"></a><span class="lineno"> 1748</span>                <span class="keywordflow">if</span>( z.<a class="code hl_function" href="classmonster.html#a0315651e596e69f0626b30e081726596">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a1a9d43dc1ddecbc20beecf1760789d85">MF_SEES</a> ) ) {</div>
<div class="line"><a id="l01749" name="l01749"></a><span class="lineno"> 1749</span>                    z.<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="map__field_8cpp.html#a09e952ef4d27618e2f60ec737a8d1bae">effect_blind</a>, cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() * 8_turns );</div>
<div class="line"><a id="l01750" name="l01750"></a><span class="lineno"> 1750</span>                }</div>
<div class="line"><a id="l01751" name="l01751"></a><span class="lineno"> 1751</span>            }</div>
<div class="line"><a id="l01752" name="l01752"></a><span class="lineno"> 1752</span> </div>
<div class="line"><a id="l01753" name="l01753"></a><span class="lineno"> 1753</span>        }</div>
<div class="line"><a id="l01754" name="l01754"></a><span class="lineno"> 1754</span>        <span class="keywordflow">if</span>( cur_field_type == <a class="code hl_variable" href="field__type_8cpp.html#ad86d7b9ff1a8fb05d7481abd08d0c375">fd_relax_gas</a> ) {</div>
<div class="line"><a id="l01755" name="l01755"></a><span class="lineno"> 1755</span>            <span class="keywordflow">if</span>( z.<a class="code hl_function" href="classmonster.html#a4092c04058a74fa078c89763d11e53ee">made_of_any</a>( <a class="code hl_variable" href="classCreature.html#aab3ed00f0b1635fcb5efaa93cf3f8336">Creature::cmat_fleshnveg</a> ) &amp;&amp; !z.<a class="code hl_function" href="classmonster.html#a0315651e596e69f0626b30e081726596">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842af4b448ccc2906ee0277113805bd8ae06">MF_NO_BREATHE</a> ) ) {</div>
<div class="line"><a id="l01756" name="l01756"></a><span class="lineno"> 1756</span>                z.<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="map__field_8cpp.html#ad1df0ca2944a94c3ad796e8baada33ae">effect_stunned</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() * 4_turns,</div>
<div class="line"><a id="l01757" name="l01757"></a><span class="lineno"> 1757</span>                                                   cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() * 8_turns ) );</div>
<div class="line"><a id="l01758" name="l01758"></a><span class="lineno"> 1758</span>            }</div>
<div class="line"><a id="l01759" name="l01759"></a><span class="lineno"> 1759</span>        }</div>
<div class="line"><a id="l01760" name="l01760"></a><span class="lineno"> 1760</span>        <span class="keywordflow">if</span>( cur_field_type == <a class="code hl_variable" href="field__type_8cpp.html#a67e1c2ea914225c5affdf6b847e61e26">fd_dazzling</a> ) {</div>
<div class="line"><a id="l01761" name="l01761"></a><span class="lineno"> 1761</span>            <span class="keywordflow">if</span>( z.<a class="code hl_function" href="classmonster.html#a0315651e596e69f0626b30e081726596">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a1a9d43dc1ddecbc20beecf1760789d85">MF_SEES</a> ) &amp;&amp; !z.<a class="code hl_function" href="classmonster.html#a0315651e596e69f0626b30e081726596">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842ab2f11b921b9bcafe2af1ddea398ffb4f">MF_ELECTRONIC</a> ) ) {</div>
<div class="line"><a id="l01762" name="l01762"></a><span class="lineno"> 1762</span>                z.<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="map__field_8cpp.html#a09e952ef4d27618e2f60ec737a8d1bae">effect_blind</a>, cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() * 12_turns );</div>
<div class="line"><a id="l01763" name="l01763"></a><span class="lineno"> 1763</span>                z.<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="map__field_8cpp.html#ad1df0ca2944a94c3ad796e8baada33ae">effect_stunned</a>, cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() * <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 5_turns, 12_turns ) );</div>
<div class="line"><a id="l01764" name="l01764"></a><span class="lineno"> 1764</span>            }</div>
<div class="line"><a id="l01765" name="l01765"></a><span class="lineno"> 1765</span> </div>
<div class="line"><a id="l01766" name="l01766"></a><span class="lineno"> 1766</span>        }</div>
<div class="line"><a id="l01767" name="l01767"></a><span class="lineno"> 1767</span>        <span class="keywordflow">if</span>( cur_field_type == <a class="code hl_variable" href="field__type_8cpp.html#a0c312b322364fa8cc46b2b0efef9d28a">fd_toxic_gas</a> ) {</div>
<div class="line"><a id="l01768" name="l01768"></a><span class="lineno"> 1768</span>            <span class="keywordflow">if</span>( !z.<a class="code hl_function" href="classmonster.html#a0315651e596e69f0626b30e081726596">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842af4b448ccc2906ee0277113805bd8ae06">MF_NO_BREATHE</a> ) ) {</div>
<div class="line"><a id="l01769" name="l01769"></a><span class="lineno"> 1769</span>                dam += cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>();</div>
<div class="line"><a id="l01770" name="l01770"></a><span class="lineno"> 1770</span>                z.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>();</div>
<div class="line"><a id="l01771" name="l01771"></a><span class="lineno"> 1771</span>            }</div>
<div class="line"><a id="l01772" name="l01772"></a><span class="lineno"> 1772</span> </div>
<div class="line"><a id="l01773" name="l01773"></a><span class="lineno"> 1773</span>        }</div>
<div class="line"><a id="l01774" name="l01774"></a><span class="lineno"> 1774</span>        <span class="keywordflow">if</span>( cur_field_type == <a class="code hl_variable" href="field__type_8cpp.html#a50a270bd1c0284331c75930716ac4b79">fd_nuke_gas</a> ) {</div>
<div class="line"><a id="l01775" name="l01775"></a><span class="lineno"> 1775</span>            <span class="keywordflow">if</span>( !z.<a class="code hl_function" href="classmonster.html#a0315651e596e69f0626b30e081726596">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842af4b448ccc2906ee0277113805bd8ae06">MF_NO_BREATHE</a> ) ) {</div>
<div class="line"><a id="l01776" name="l01776"></a><span class="lineno"> 1776</span>                <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() == 3 ) {</div>
<div class="line"><a id="l01777" name="l01777"></a><span class="lineno"> 1777</span>                    z.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 60, 120 );</div>
<div class="line"><a id="l01778" name="l01778"></a><span class="lineno"> 1778</span>                    dam += <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 30, 50 );</div>
<div class="line"><a id="l01779" name="l01779"></a><span class="lineno"> 1779</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() == 2 ) {</div>
<div class="line"><a id="l01780" name="l01780"></a><span class="lineno"> 1780</span>                    z.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 20, 50 );</div>
<div class="line"><a id="l01781" name="l01781"></a><span class="lineno"> 1781</span>                    dam += <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 10, 25 );</div>
<div class="line"><a id="l01782" name="l01782"></a><span class="lineno"> 1782</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01783" name="l01783"></a><span class="lineno"> 1783</span>                    z.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 15 );</div>
<div class="line"><a id="l01784" name="l01784"></a><span class="lineno"> 1784</span>                    dam += <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 12 );</div>
<div class="line"><a id="l01785" name="l01785"></a><span class="lineno"> 1785</span>                }</div>
<div class="line"><a id="l01786" name="l01786"></a><span class="lineno"> 1786</span>                <span class="keywordflow">if</span>( z.<a class="code hl_function" href="classmonster.html#a6e03e18c6ea5e5adb496634b2bbaea52">made_of</a>( <a class="code hl_class" href="classstring__id.html">material_id</a>( <span class="stringliteral">&quot;veggy&quot;</span> ) ) ) {</div>
<div class="line"><a id="l01787" name="l01787"></a><span class="lineno"> 1787</span>                    z.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() * 5, cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() * 12 );</div>
<div class="line"><a id="l01788" name="l01788"></a><span class="lineno"> 1788</span>                    dam *= cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>();</div>
<div class="line"><a id="l01789" name="l01789"></a><span class="lineno"> 1789</span>                }</div>
<div class="line"><a id="l01790" name="l01790"></a><span class="lineno"> 1790</span>            }</div>
<div class="line"><a id="l01791" name="l01791"></a><span class="lineno"> 1791</span> </div>
<div class="line"><a id="l01792" name="l01792"></a><span class="lineno"> 1792</span>        }</div>
<div class="line"><a id="l01793" name="l01793"></a><span class="lineno"> 1793</span>        <span class="keywordflow">if</span>( cur_field_type == <a class="code hl_variable" href="field__type_8cpp.html#ac0a79fdf7c7852adae6c208031850b36">fd_flame_burst</a> ) {</div>
<div class="line"><a id="l01794" name="l01794"></a><span class="lineno"> 1794</span>            <span class="comment">// TODO: MATERIALS Use fire resistance</span></div>
<div class="line"><a id="l01795" name="l01795"></a><span class="lineno"> 1795</span>            <span class="keywordflow">if</span>( z.<a class="code hl_function" href="classmonster.html#a0315651e596e69f0626b30e081726596">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a8dc170679ef70e968144f8da4e15b34d">MF_FIREPROOF</a> ) || z.<a class="code hl_function" href="classmonster.html#a0315651e596e69f0626b30e081726596">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a25c8b8c05cc048947f1593ce74755ae2">MF_FIREY</a> ) ) {</div>
<div class="line"><a id="l01796" name="l01796"></a><span class="lineno"> 1796</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01797" name="l01797"></a><span class="lineno"> 1797</span>            }</div>
<div class="line"><a id="l01798" name="l01798"></a><span class="lineno"> 1798</span>            <span class="keywordflow">if</span>( z.<a class="code hl_function" href="classmonster.html#a4092c04058a74fa078c89763d11e53ee">made_of_any</a>( <a class="code hl_variable" href="classCreature.html#a81c28d7d1cb83a47794dbf879dede400">Creature::cmat_flesh</a> ) ) {</div>
<div class="line"><a id="l01799" name="l01799"></a><span class="lineno"> 1799</span>                dam += 3;</div>
<div class="line"><a id="l01800" name="l01800"></a><span class="lineno"> 1800</span>            }</div>
<div class="line"><a id="l01801" name="l01801"></a><span class="lineno"> 1801</span>            <span class="keywordflow">if</span>( z.<a class="code hl_function" href="classmonster.html#a6e03e18c6ea5e5adb496634b2bbaea52">made_of</a>( <a class="code hl_class" href="classstring__id.html">material_id</a>( <span class="stringliteral">&quot;veggy&quot;</span> ) ) ) {</div>
<div class="line"><a id="l01802" name="l01802"></a><span class="lineno"> 1802</span>                dam += 12;</div>
<div class="line"><a id="l01803" name="l01803"></a><span class="lineno"> 1803</span>            }</div>
<div class="line"><a id="l01804" name="l01804"></a><span class="lineno"> 1804</span>            <span class="keywordflow">if</span>( z.<a class="code hl_function" href="classmonster.html#a6e03e18c6ea5e5adb496634b2bbaea52">made_of</a>( <a class="code hl_enumvalue" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a> ) || z.<a class="code hl_function" href="classmonster.html#a4092c04058a74fa078c89763d11e53ee">made_of_any</a>( <a class="code hl_variable" href="classCreature.html#a48bb40fe4132a49d95f26611d7c622a6">Creature::cmat_flammable</a> ) ) {</div>
<div class="line"><a id="l01805" name="l01805"></a><span class="lineno"> 1805</span>                dam += 50;</div>
<div class="line"><a id="l01806" name="l01806"></a><span class="lineno"> 1806</span>            }</div>
<div class="line"><a id="l01807" name="l01807"></a><span class="lineno"> 1807</span>            <span class="keywordflow">if</span>( z.<a class="code hl_function" href="classmonster.html#a4092c04058a74fa078c89763d11e53ee">made_of_any</a>( <a class="code hl_variable" href="classCreature.html#ac5fa405fe6d75e0298051ab413cdfac1">Creature::cmat_flameres</a> ) ) {</div>
<div class="line"><a id="l01808" name="l01808"></a><span class="lineno"> 1808</span>                dam += -25;</div>
<div class="line"><a id="l01809" name="l01809"></a><span class="lineno"> 1809</span>            }</div>
<div class="line"><a id="l01810" name="l01810"></a><span class="lineno"> 1810</span>            dam += <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 8 );</div>
<div class="line"><a id="l01811" name="l01811"></a><span class="lineno"> 1811</span>            z.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 20;</div>
<div class="line"><a id="l01812" name="l01812"></a><span class="lineno"> 1812</span>        }</div>
<div class="line"><a id="l01813" name="l01813"></a><span class="lineno"> 1813</span>        <span class="keywordflow">if</span>( cur_field_type == <a class="code hl_variable" href="field__type_8cpp.html#a67f782decc0eca9e8e55696dfa89d13b">fd_electricity</a> ) {</div>
<div class="line"><a id="l01814" name="l01814"></a><span class="lineno"> 1814</span>            <span class="comment">// We don&#39;t want to increase dam, but deal a separate hit so that it can apply effects</span></div>
<div class="line"><a id="l01815" name="l01815"></a><span class="lineno"> 1815</span>            z.<a class="code hl_function" href="classCreature.html#a75ad96eb6ce27d3c1df250965b4de7b5">deal_damage</a>( <span class="keyword">nullptr</span>, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ),</div>
<div class="line"><a id="l01816" name="l01816"></a><span class="lineno"> 1816</span>                           <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a>( <a class="code hl_enumvalue" href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa31df3b2996d2d10b2ca3e275899fdddb">DT_ELECTRIC</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() * 3 ) ) );</div>
<div class="line"><a id="l01817" name="l01817"></a><span class="lineno"> 1817</span>        }</div>
<div class="line"><a id="l01818" name="l01818"></a><span class="lineno"> 1818</span>        <span class="keywordflow">if</span>( cur_field_type == <a class="code hl_variable" href="field__type_8cpp.html#ae1b475e49c929a1dab1575f541a11542">fd_fatigue</a> ) {</div>
<div class="line"><a id="l01819" name="l01819"></a><span class="lineno"> 1819</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 2 ) &lt; cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() ) {</div>
<div class="line"><a id="l01820" name="l01820"></a><span class="lineno"> 1820</span>                dam += cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>();</div>
<div class="line"><a id="l01821" name="l01821"></a><span class="lineno"> 1821</span>                <a class="code hl_function" href="namespaceteleport.html#a24cbf298b41e9fc23770c73d32e33a47">teleport::teleport</a>( z );</div>
<div class="line"><a id="l01822" name="l01822"></a><span class="lineno"> 1822</span>            }</div>
<div class="line"><a id="l01823" name="l01823"></a><span class="lineno"> 1823</span>        }</div>
<div class="line"><a id="l01824" name="l01824"></a><span class="lineno"> 1824</span>        <span class="keywordflow">if</span>( cur_field_type == <a class="code hl_variable" href="field__type_8cpp.html#a0740150aaa065c46121ca6a8981a2fdd">fd_incendiary</a> ) {</div>
<div class="line"><a id="l01825" name="l01825"></a><span class="lineno"> 1825</span>            <span class="comment">// TODO: MATERIALS Use fire resistance</span></div>
<div class="line"><a id="l01826" name="l01826"></a><span class="lineno"> 1826</span>            <span class="keywordflow">if</span>( z.<a class="code hl_function" href="classmonster.html#a0315651e596e69f0626b30e081726596">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a8dc170679ef70e968144f8da4e15b34d">MF_FIREPROOF</a> ) || z.<a class="code hl_function" href="classmonster.html#a0315651e596e69f0626b30e081726596">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a25c8b8c05cc048947f1593ce74755ae2">MF_FIREY</a> ) ) {</div>
<div class="line"><a id="l01827" name="l01827"></a><span class="lineno"> 1827</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01828" name="l01828"></a><span class="lineno"> 1828</span>            }</div>
<div class="line"><a id="l01829" name="l01829"></a><span class="lineno"> 1829</span>            <span class="keywordflow">if</span>( z.<a class="code hl_function" href="classmonster.html#a4092c04058a74fa078c89763d11e53ee">made_of_any</a>( <a class="code hl_variable" href="classCreature.html#a81c28d7d1cb83a47794dbf879dede400">Creature::cmat_flesh</a> ) ) {</div>
<div class="line"><a id="l01830" name="l01830"></a><span class="lineno"> 1830</span>                dam += 3;</div>
<div class="line"><a id="l01831" name="l01831"></a><span class="lineno"> 1831</span>            }</div>
<div class="line"><a id="l01832" name="l01832"></a><span class="lineno"> 1832</span>            <span class="keywordflow">if</span>( z.<a class="code hl_function" href="classmonster.html#a6e03e18c6ea5e5adb496634b2bbaea52">made_of</a>( <a class="code hl_class" href="classstring__id.html">material_id</a>( <span class="stringliteral">&quot;veggy&quot;</span> ) ) ) {</div>
<div class="line"><a id="l01833" name="l01833"></a><span class="lineno"> 1833</span>                dam += 12;</div>
<div class="line"><a id="l01834" name="l01834"></a><span class="lineno"> 1834</span>            }</div>
<div class="line"><a id="l01835" name="l01835"></a><span class="lineno"> 1835</span>            <span class="keywordflow">if</span>( z.<a class="code hl_function" href="classmonster.html#a6e03e18c6ea5e5adb496634b2bbaea52">made_of</a>( <a class="code hl_enumvalue" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a> ) || z.<a class="code hl_function" href="classmonster.html#a4092c04058a74fa078c89763d11e53ee">made_of_any</a>( <a class="code hl_variable" href="classCreature.html#a48bb40fe4132a49d95f26611d7c622a6">Creature::cmat_flammable</a> ) ) {</div>
<div class="line"><a id="l01836" name="l01836"></a><span class="lineno"> 1836</span>                dam += 20;</div>
<div class="line"><a id="l01837" name="l01837"></a><span class="lineno"> 1837</span>            }</div>
<div class="line"><a id="l01838" name="l01838"></a><span class="lineno"> 1838</span>            <span class="keywordflow">if</span>( z.<a class="code hl_function" href="classmonster.html#a4092c04058a74fa078c89763d11e53ee">made_of_any</a>( <a class="code hl_variable" href="classCreature.html#ac5fa405fe6d75e0298051ab413cdfac1">Creature::cmat_flameres</a> ) ) {</div>
<div class="line"><a id="l01839" name="l01839"></a><span class="lineno"> 1839</span>                dam += -5;</div>
<div class="line"><a id="l01840" name="l01840"></a><span class="lineno"> 1840</span>            }</div>
<div class="line"><a id="l01841" name="l01841"></a><span class="lineno"> 1841</span> </div>
<div class="line"><a id="l01842" name="l01842"></a><span class="lineno"> 1842</span>            <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() == 1 ) {</div>
<div class="line"><a id="l01843" name="l01843"></a><span class="lineno"> 1843</span>                dam += <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 2, 6 );</div>
<div class="line"><a id="l01844" name="l01844"></a><span class="lineno"> 1844</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() == 2 ) {</div>
<div class="line"><a id="l01845" name="l01845"></a><span class="lineno"> 1845</span>                dam += <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 6, 12 );</div>
<div class="line"><a id="l01846" name="l01846"></a><span class="lineno"> 1846</span>                z.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 20;</div>
<div class="line"><a id="l01847" name="l01847"></a><span class="lineno"> 1847</span>                <span class="keywordflow">if</span>( !z.<a class="code hl_function" href="classmonster.html#a6e03e18c6ea5e5adb496634b2bbaea52">made_of</a>( <a class="code hl_enumvalue" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a> ) &amp;&amp; !z.<a class="code hl_function" href="classmonster.html#a4092c04058a74fa078c89763d11e53ee">made_of_any</a>( <a class="code hl_variable" href="classCreature.html#ac5fa405fe6d75e0298051ab413cdfac1">Creature::cmat_flameres</a> ) ) {</div>
<div class="line"><a id="l01848" name="l01848"></a><span class="lineno"> 1848</span>                    z.<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="map__field_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 8_turns, 12_turns ) );</div>
<div class="line"><a id="l01849" name="l01849"></a><span class="lineno"> 1849</span>                }</div>
<div class="line"><a id="l01850" name="l01850"></a><span class="lineno"> 1850</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>() == 3 ) {</div>
<div class="line"><a id="l01851" name="l01851"></a><span class="lineno"> 1851</span>                dam += <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 10, 20 );</div>
<div class="line"><a id="l01852" name="l01852"></a><span class="lineno"> 1852</span>                z.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= 40;</div>
<div class="line"><a id="l01853" name="l01853"></a><span class="lineno"> 1853</span>                <span class="keywordflow">if</span>( !z.<a class="code hl_function" href="classmonster.html#a6e03e18c6ea5e5adb496634b2bbaea52">made_of</a>( <a class="code hl_enumvalue" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a> ) &amp;&amp; !z.<a class="code hl_function" href="classmonster.html#a4092c04058a74fa078c89763d11e53ee">made_of_any</a>( <a class="code hl_variable" href="classCreature.html#ac5fa405fe6d75e0298051ab413cdfac1">Creature::cmat_flameres</a> ) ) {</div>
<div class="line"><a id="l01854" name="l01854"></a><span class="lineno"> 1854</span>                    z.<a class="code hl_function" href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">add_effect</a>( <a class="code hl_variable" href="map__field_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a>, <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 12_turns, 16_turns ) );</div>
<div class="line"><a id="l01855" name="l01855"></a><span class="lineno"> 1855</span>                }</div>
<div class="line"><a id="l01856" name="l01856"></a><span class="lineno"> 1856</span>            }</div>
<div class="line"><a id="l01857" name="l01857"></a><span class="lineno"> 1857</span>        }</div>
<div class="line"><a id="l01858" name="l01858"></a><span class="lineno"> 1858</span>        <span class="keywordflow">if</span>( cur_field_type == <a class="code hl_variable" href="field__type_8cpp.html#a68f6e17053fde556f8a2cfce44287997">fd_fungal_haze</a> ) {</div>
<div class="line"><a id="l01859" name="l01859"></a><span class="lineno"> 1859</span>            <span class="keywordflow">if</span>( !z.<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_function" href="structmtype.html#a51ec342d71717bb513f0158198b12840">in_species</a>( <a class="code hl_variable" href="map__field_8cpp.html#a21ab92eb0bc71e62dbc4d95a9fd6eb70">FUNGUS</a> ) &amp;&amp;</div>
<div class="line"><a id="l01860" name="l01860"></a><span class="lineno"> 1860</span>                !z.<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_function" href="structmtype.html#a208b05355d08ec7d628606f18e2d53be">has_flag</a>( <a class="code hl_enumvalue" href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842af4b448ccc2906ee0277113805bd8ae06">MF_NO_BREATHE</a> ) &amp;&amp;</div>
<div class="line"><a id="l01861" name="l01861"></a><span class="lineno"> 1861</span>                !z.<a class="code hl_function" href="classmonster.html#a4fddab3f065220c8b7c015572a5de408">make_fungus</a>() ) {</div>
<div class="line"><a id="l01862" name="l01862"></a><span class="lineno"> 1862</span>                <span class="comment">// Don&#39;t insta-kill jabberwocks, that&#39;s silly</span></div>
<div class="line"><a id="l01863" name="l01863"></a><span class="lineno"> 1863</span>                <span class="keyword">const</span> <span class="keywordtype">int</span> intensity = cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>();</div>
<div class="line"><a id="l01864" name="l01864"></a><span class="lineno"> 1864</span>                z.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 10 * intensity, 30 * intensity );</div>
<div class="line"><a id="l01865" name="l01865"></a><span class="lineno"> 1865</span>                dam += <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 10 * intensity );</div>
<div class="line"><a id="l01866" name="l01866"></a><span class="lineno"> 1866</span>            }</div>
<div class="line"><a id="l01867" name="l01867"></a><span class="lineno"> 1867</span>        }</div>
<div class="line"><a id="l01868" name="l01868"></a><span class="lineno"> 1868</span>        <span class="keywordflow">if</span>( cur_field_type == <a class="code hl_variable" href="field__type_8cpp.html#a9868dee0533f3cc11e389b49a6c4f636">fd_fungicidal_gas</a> ) {</div>
<div class="line"><a id="l01869" name="l01869"></a><span class="lineno"> 1869</span>            <span class="keywordflow">if</span>( z.<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_function" href="structmtype.html#a51ec342d71717bb513f0158198b12840">in_species</a>( <a class="code hl_variable" href="map__field_8cpp.html#a21ab92eb0bc71e62dbc4d95a9fd6eb70">FUNGUS</a> ) ) {</div>
<div class="line"><a id="l01870" name="l01870"></a><span class="lineno"> 1870</span>                <span class="keyword">const</span> <span class="keywordtype">int</span> intensity = cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>();</div>
<div class="line"><a id="l01871" name="l01871"></a><span class="lineno"> 1871</span>                z.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 10 * intensity, 30 * intensity );</div>
<div class="line"><a id="l01872" name="l01872"></a><span class="lineno"> 1872</span>                dam += <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 4, 7 * intensity );</div>
<div class="line"><a id="l01873" name="l01873"></a><span class="lineno"> 1873</span>            }</div>
<div class="line"><a id="l01874" name="l01874"></a><span class="lineno"> 1874</span>        }</div>
<div class="line"><a id="l01875" name="l01875"></a><span class="lineno"> 1875</span>        <span class="keywordflow">if</span>( cur_field_type == <a class="code hl_variable" href="field__type_8cpp.html#afefbe0ddb9ee9d0a0e2db8b4d89840bb">fd_insecticidal_gas</a> ) {</div>
<div class="line"><a id="l01876" name="l01876"></a><span class="lineno"> 1876</span>            <span class="keywordflow">if</span>( z.<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_function" href="structmtype.html#a51ec342d71717bb513f0158198b12840">in_species</a>( <a class="code hl_variable" href="map__field_8cpp.html#a8c7cbf21cfb7caaf9cc9d45150684d29">INSECT</a> ) || z.<a class="code hl_variable" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code hl_function" href="structmtype.html#a51ec342d71717bb513f0158198b12840">in_species</a>( <a class="code hl_variable" href="map__field_8cpp.html#aeb98a85fd2ef390ce9f1bcfa09f4e1ac">SPIDER</a> ) ) {</div>
<div class="line"><a id="l01877" name="l01877"></a><span class="lineno"> 1877</span>                <span class="keyword">const</span> <span class="keywordtype">int</span> intensity = cur.<a class="code hl_function" href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">get_field_intensity</a>();</div>
<div class="line"><a id="l01878" name="l01878"></a><span class="lineno"> 1878</span>                z.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> -= <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 10 * intensity, 30 * intensity );</div>
<div class="line"><a id="l01879" name="l01879"></a><span class="lineno"> 1879</span>                dam += <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 4, 7 * intensity );</div>
<div class="line"><a id="l01880" name="l01880"></a><span class="lineno"> 1880</span>            }</div>
<div class="line"><a id="l01881" name="l01881"></a><span class="lineno"> 1881</span>        }</div>
<div class="line"><a id="l01882" name="l01882"></a><span class="lineno"> 1882</span>    }</div>
<div class="line"><a id="l01883" name="l01883"></a><span class="lineno"> 1883</span> </div>
<div class="line"><a id="l01884" name="l01884"></a><span class="lineno"> 1884</span>    <span class="keywordflow">if</span>( dam &gt; 0 ) {</div>
<div class="line"><a id="l01885" name="l01885"></a><span class="lineno"> 1885</span>        z.<a class="code hl_function" href="classmonster.html#afc6e6f5443145732310dd4901a394b4f">apply_damage</a>( <span class="keyword">nullptr</span>, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ), dam, <span class="keyword">true</span> );</div>
<div class="line"><a id="l01886" name="l01886"></a><span class="lineno"> 1886</span>        z.<a class="code hl_function" href="classCreature.html#a36dcf5a04ddc0cf9fa29c08b7b099158">check_dead_state</a>();</div>
<div class="line"><a id="l01887" name="l01887"></a><span class="lineno"> 1887</span>    }</div>
<div class="line"><a id="l01888" name="l01888"></a><span class="lineno"> 1888</span>}</div>
<div class="line"><a id="l01889" name="l01889"></a><span class="lineno"> 1889</span> </div>
<div class="line"><a id="l01890" name="l01890"></a><span class="lineno"><a class="line" href="classmap.html#a2583b85e82d40e942e950351c1670deb"> 1890</a></span>std::tuple&lt;maptile, maptile, maptile&gt; <a class="code hl_function" href="classmap.html#a2583b85e82d40e942e950351c1670deb">map::get_wind_blockers</a>( <span class="keyword">const</span> <span class="keywordtype">int</span> &amp;winddirection,</div>
<div class="line"><a id="l01891" name="l01891"></a><span class="lineno"> 1891</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;pos )</div>
<div class="line"><a id="l01892" name="l01892"></a><span class="lineno"> 1892</span>{</div>
<div class="line"><a id="l01893" name="l01893"></a><span class="lineno"> 1893</span>    <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;std::pair&lt;int, std::tuple&lt; point, point, point &gt;&gt;, 9&gt; outputs = {{</div>
<div class="line"><a id="l01894" name="l01894"></a><span class="lineno"> 1894</span>            { 330, std::make_tuple( <a class="code hl_variable" href="point_8h.html#aff73fd5bf470a3db5291c5dec855bb71">point_east</a>, <a class="code hl_variable" href="point_8h.html#a2a05b0afd49b81447a71d380cca8a9b7">point_north_east</a>, <a class="code hl_variable" href="point_8h.html#a5c8645fbdd39f3862d10d1521f3d0254">point_south_east</a> ) },</div>
<div class="line"><a id="l01895" name="l01895"></a><span class="lineno"> 1895</span>            { 301, std::make_tuple( <a class="code hl_variable" href="point_8h.html#a5c8645fbdd39f3862d10d1521f3d0254">point_south_east</a>, <a class="code hl_variable" href="point_8h.html#aff73fd5bf470a3db5291c5dec855bb71">point_east</a>, <a class="code hl_variable" href="point_8h.html#a702e673ec0d39d0822e2dc453a6af3e5">point_south</a> ) },</div>
<div class="line"><a id="l01896" name="l01896"></a><span class="lineno"> 1896</span>            { 240, std::make_tuple( <a class="code hl_variable" href="point_8h.html#a702e673ec0d39d0822e2dc453a6af3e5">point_south</a>, <a class="code hl_variable" href="point_8h.html#a00c12fd271c36080d351498039b9e1cb">point_south_west</a>, <a class="code hl_variable" href="point_8h.html#a5c8645fbdd39f3862d10d1521f3d0254">point_south_east</a> ) },</div>
<div class="line"><a id="l01897" name="l01897"></a><span class="lineno"> 1897</span>            { 211, std::make_tuple( <a class="code hl_variable" href="point_8h.html#a00c12fd271c36080d351498039b9e1cb">point_south_west</a>, <a class="code hl_variable" href="point_8h.html#a0acd5e182489265fadc8c586f5d4d701">point_west</a>, <a class="code hl_variable" href="point_8h.html#a702e673ec0d39d0822e2dc453a6af3e5">point_south</a> ) },</div>
<div class="line"><a id="l01898" name="l01898"></a><span class="lineno"> 1898</span>            { 150, std::make_tuple( <a class="code hl_variable" href="point_8h.html#a0acd5e182489265fadc8c586f5d4d701">point_west</a>, <a class="code hl_variable" href="point_8h.html#a3de2338afabdfe2d3ef10e35532a2976">point_north_west</a>, <a class="code hl_variable" href="point_8h.html#a00c12fd271c36080d351498039b9e1cb">point_south_west</a> ) },</div>
<div class="line"><a id="l01899" name="l01899"></a><span class="lineno"> 1899</span>            { 121, std::make_tuple( <a class="code hl_variable" href="point_8h.html#a3de2338afabdfe2d3ef10e35532a2976">point_north_west</a>, <a class="code hl_variable" href="point_8h.html#acfe3d4a2977589c0adad45cf36774d8a">point_north</a>, <a class="code hl_variable" href="point_8h.html#a0acd5e182489265fadc8c586f5d4d701">point_west</a> ) },</div>
<div class="line"><a id="l01900" name="l01900"></a><span class="lineno"> 1900</span>            { 60, std::make_tuple( <a class="code hl_variable" href="point_8h.html#acfe3d4a2977589c0adad45cf36774d8a">point_north</a>, <a class="code hl_variable" href="point_8h.html#a3de2338afabdfe2d3ef10e35532a2976">point_north_west</a>, <a class="code hl_variable" href="point_8h.html#a2a05b0afd49b81447a71d380cca8a9b7">point_north_east</a> ) },</div>
<div class="line"><a id="l01901" name="l01901"></a><span class="lineno"> 1901</span>            { 31, std::make_tuple( <a class="code hl_variable" href="point_8h.html#a2a05b0afd49b81447a71d380cca8a9b7">point_north_east</a>, <a class="code hl_variable" href="point_8h.html#aff73fd5bf470a3db5291c5dec855bb71">point_east</a>, <a class="code hl_variable" href="point_8h.html#acfe3d4a2977589c0adad45cf36774d8a">point_north</a> ) },</div>
<div class="line"><a id="l01902" name="l01902"></a><span class="lineno"> 1902</span>            { 0, std::make_tuple( <a class="code hl_variable" href="point_8h.html#aff73fd5bf470a3db5291c5dec855bb71">point_east</a>, <a class="code hl_variable" href="point_8h.html#a2a05b0afd49b81447a71d380cca8a9b7">point_north_east</a>, <a class="code hl_variable" href="point_8h.html#a5c8645fbdd39f3862d10d1521f3d0254">point_south_east</a> ) }</div>
<div class="line"><a id="l01903" name="l01903"></a><span class="lineno"> 1903</span>        }</div>
<div class="line"><a id="l01904" name="l01904"></a><span class="lineno"> 1904</span>    };</div>
<div class="line"><a id="l01905" name="l01905"></a><span class="lineno"> 1905</span> </div>
<div class="line"><a id="l01906" name="l01906"></a><span class="lineno"> 1906</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> removepoint;</div>
<div class="line"><a id="l01907" name="l01907"></a><span class="lineno"> 1907</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> removepoint2;</div>
<div class="line"><a id="l01908" name="l01908"></a><span class="lineno"> 1908</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> removepoint3;</div>
<div class="line"><a id="l01909" name="l01909"></a><span class="lineno"> 1909</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;<span class="keywordtype">int</span>, std::tuple&lt; point, point, point &gt;&gt; &amp;val : outputs ) {</div>
<div class="line"><a id="l01910" name="l01910"></a><span class="lineno"> 1910</span>        <span class="keywordflow">if</span>( winddirection &gt;= val.first ) {</div>
<div class="line"><a id="l01911" name="l01911"></a><span class="lineno"> 1911</span>            removepoint = pos + std::get&lt;0&gt;( val.second );</div>
<div class="line"><a id="l01912" name="l01912"></a><span class="lineno"> 1912</span>            removepoint2 = pos + std::get&lt;1&gt;( val.second );</div>
<div class="line"><a id="l01913" name="l01913"></a><span class="lineno"> 1913</span>            removepoint3 = pos + std::get&lt;2&gt;( val.second );</div>
<div class="line"><a id="l01914" name="l01914"></a><span class="lineno"> 1914</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01915" name="l01915"></a><span class="lineno"> 1915</span>        }</div>
<div class="line"><a id="l01916" name="l01916"></a><span class="lineno"> 1916</span>    }</div>
<div class="line"><a id="l01917" name="l01917"></a><span class="lineno"> 1917</span> </div>
<div class="line"><a id="l01918" name="l01918"></a><span class="lineno"> 1918</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structmaptile.html">maptile</a> remove_tile = <a class="code hl_function" href="classmap.html#a267286ed64b9685c23cf335b2bd225bb">maptile_at</a>( removepoint );</div>
<div class="line"><a id="l01919" name="l01919"></a><span class="lineno"> 1919</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structmaptile.html">maptile</a> remove_tile2 = <a class="code hl_function" href="classmap.html#a267286ed64b9685c23cf335b2bd225bb">maptile_at</a>( removepoint2 );</div>
<div class="line"><a id="l01920" name="l01920"></a><span class="lineno"> 1920</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structmaptile.html">maptile</a> remove_tile3 = <a class="code hl_function" href="classmap.html#a267286ed64b9685c23cf335b2bd225bb">maptile_at</a>( removepoint3 );</div>
<div class="line"><a id="l01921" name="l01921"></a><span class="lineno"> 1921</span>    <span class="keywordflow">return</span> std::make_tuple( remove_tile, remove_tile2, remove_tile3 );</div>
<div class="line"><a id="l01922" name="l01922"></a><span class="lineno"> 1922</span>}</div>
<div class="line"><a id="l01923" name="l01923"></a><span class="lineno"> 1923</span> </div>
<div class="line"><a id="l01924" name="l01924"></a><span class="lineno"><a class="line" href="classmap.html#a150f1b826e0e2722ccf76dbdac136ffd"> 1924</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classmap.html#a150f1b826e0e2722ccf76dbdac136ffd">map::emit_field</a>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;pos, <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">emit_id</a> &amp;src, <span class="keywordtype">float</span> mul )</div>
<div class="line"><a id="l01925" name="l01925"></a><span class="lineno"> 1925</span>{</div>
<div class="line"><a id="l01926" name="l01926"></a><span class="lineno"> 1926</span>    <span class="keywordflow">if</span>( !src.<a class="code hl_function" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() ) {</div>
<div class="line"><a id="l01927" name="l01927"></a><span class="lineno"> 1927</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01928" name="l01928"></a><span class="lineno"> 1928</span>    }</div>
<div class="line"><a id="l01929" name="l01929"></a><span class="lineno"> 1929</span> </div>
<div class="line"><a id="l01930" name="l01930"></a><span class="lineno"> 1930</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> chance = src-&gt;<a class="code hl_function" href="classemit.html#a64ead1306677782208d53896a3f276b0">chance</a>() * mul;</div>
<div class="line"><a id="l01931" name="l01931"></a><span class="lineno"> 1931</span>    <span class="keywordflow">if</span>( src.<a class="code hl_function" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() &amp;&amp;  <a class="code hl_function" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( chance, 100 ) ) {</div>
<div class="line"><a id="l01932" name="l01932"></a><span class="lineno"> 1932</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> qty = chance &gt; 100.0f ? <a class="code hl_function" href="rng_8cpp.html#acd19ae79e3590a99c9eaf0389318b686">roll_remainder</a>( src-&gt;<a class="code hl_function" href="classemit.html#a5fb324b1cbd77d601d0728cafb8994c9">qty</a>() * chance / 100.0f ) : src-&gt;<a class="code hl_function" href="classemit.html#a5fb324b1cbd77d601d0728cafb8994c9">qty</a>();</div>
<div class="line"><a id="l01933" name="l01933"></a><span class="lineno"> 1933</span>        <a class="code hl_function" href="classmap.html#a11febee9ceafc538b720ee0d30d995d8">propagate_field</a>( pos, src-&gt;<a class="code hl_function" href="classemit.html#a907ba86167c4a93baefd2993b1d1975e">field</a>(), qty, src-&gt;<a class="code hl_function" href="classemit.html#a04216143ac34480a3b6c17768fb18621">intensity</a>() );</div>
<div class="line"><a id="l01934" name="l01934"></a><span class="lineno"> 1934</span>    }</div>
<div class="line"><a id="l01935" name="l01935"></a><span class="lineno"> 1935</span>}</div>
<div class="line"><a id="l01936" name="l01936"></a><span class="lineno"> 1936</span> </div>
<div class="line"><a id="l01937" name="l01937"></a><span class="lineno"><a class="line" href="classmap.html#a11febee9ceafc538b720ee0d30d995d8"> 1937</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classmap.html#a11febee9ceafc538b720ee0d30d995d8">map::propagate_field</a>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;<a class="code hl_enumvalue" href="enums_8h.html#a00763863874f01b868849b27ceee73c9ac6c4bfa285e112c6854a2d820f854e3b">center</a>, <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">field_type_id</a> &amp;<a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a>, <span class="keywordtype">int</span> amount,</div>
<div class="line"><a id="l01938" name="l01938"></a><span class="lineno"> 1938</span>                           <span class="keywordtype">int</span> max_intensity )</div>
<div class="line"><a id="l01939" name="l01939"></a><span class="lineno"> 1939</span>{</div>
<div class="line"><a id="l01940" name="l01940"></a><span class="lineno"> 1940</span>    <span class="keyword">using</span> gas_blast = std::pair&lt;float, tripoint&gt;;</div>
<div class="line"><a id="l01941" name="l01941"></a><span class="lineno"> 1941</span>    std::priority_queue&lt;gas_blast, std::vector&lt;gas_blast&gt;, <a class="code hl_struct" href="structpair__greater__cmp__first.html">pair_greater_cmp_first</a>&gt; <a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a>;</div>
<div class="line"><a id="l01942" name="l01942"></a><span class="lineno"> 1942</span>    std::set&lt;tripoint&gt; closed;</div>
<div class="line"><a id="l01943" name="l01943"></a><span class="lineno"> 1943</span>    <a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a>.push( { 0.0f, <a class="code hl_enumvalue" href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">center</a> } );</div>
<div class="line"><a id="l01944" name="l01944"></a><span class="lineno"> 1944</span> </div>
<div class="line"><a id="l01945" name="l01945"></a><span class="lineno"> 1945</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> not_gas = <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a>.obj().phase != <a class="code hl_enumvalue" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a9584dc4fcb96c51dda36a881a6dbb212">GAS</a>;</div>
<div class="line"><a id="l01946" name="l01946"></a><span class="lineno"> 1946</span> </div>
<div class="line"><a id="l01947" name="l01947"></a><span class="lineno"> 1947</span>    <span class="keywordflow">while</span>( amount &gt; 0 &amp;&amp; !<a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a>.empty() ) {</div>
<div class="line"><a id="l01948" name="l01948"></a><span class="lineno"> 1948</span>        <span class="keywordflow">if</span>( closed.count( <a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a>.top().second ) ) {</div>
<div class="line"><a id="l01949" name="l01949"></a><span class="lineno"> 1949</span>            <a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a>.pop();</div>
<div class="line"><a id="l01950" name="l01950"></a><span class="lineno"> 1950</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01951" name="l01951"></a><span class="lineno"> 1951</span>        }</div>
<div class="line"><a id="l01952" name="l01952"></a><span class="lineno"> 1952</span> </div>
<div class="line"><a id="l01953" name="l01953"></a><span class="lineno"> 1953</span>        <span class="comment">// All points with equal gas intensity should propagate at the same time</span></div>
<div class="line"><a id="l01954" name="l01954"></a><span class="lineno"> 1954</span>        std::list&lt;gas_blast&gt; gas_front;</div>
<div class="line"><a id="l01955" name="l01955"></a><span class="lineno"> 1955</span>        gas_front.push_back( <a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a>.top() );</div>
<div class="line"><a id="l01956" name="l01956"></a><span class="lineno"> 1956</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> cur_intensity = <a class="code hl_function" href="classmap.html#a34f983a946812fa51de439bd68f6dc09">get_field_intensity</a>( <a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a>.top().second, <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a> );</div>
<div class="line"><a id="l01957" name="l01957"></a><span class="lineno"> 1957</span>        <a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a>.pop();</div>
<div class="line"><a id="l01958" name="l01958"></a><span class="lineno"> 1958</span>        <span class="keywordflow">while</span>( !<a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a>.empty() &amp;&amp; <a class="code hl_function" href="classmap.html#a34f983a946812fa51de439bd68f6dc09">get_field_intensity</a>( <a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a>.top().second, <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a> ) == cur_intensity ) {</div>
<div class="line"><a id="l01959" name="l01959"></a><span class="lineno"> 1959</span>            <span class="keywordflow">if</span>( closed.count( <a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a>.top().second ) == 0 ) {</div>
<div class="line"><a id="l01960" name="l01960"></a><span class="lineno"> 1960</span>                gas_front.push_back( <a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a>.top() );</div>
<div class="line"><a id="l01961" name="l01961"></a><span class="lineno"> 1961</span>            }</div>
<div class="line"><a id="l01962" name="l01962"></a><span class="lineno"> 1962</span> </div>
<div class="line"><a id="l01963" name="l01963"></a><span class="lineno"> 1963</span>            <a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a>.pop();</div>
<div class="line"><a id="l01964" name="l01964"></a><span class="lineno"> 1964</span>        }</div>
<div class="line"><a id="l01965" name="l01965"></a><span class="lineno"> 1965</span> </div>
<div class="line"><a id="l01966" name="l01966"></a><span class="lineno"> 1966</span>        <span class="keywordtype">int</span> increment = std::max&lt;int&gt;( 1, amount / gas_front.size() );</div>
<div class="line"><a id="l01967" name="l01967"></a><span class="lineno"> 1967</span> </div>
<div class="line"><a id="l01968" name="l01968"></a><span class="lineno"> 1968</span>        <span class="keywordflow">while</span>( !gas_front.empty() ) {</div>
<div class="line"><a id="l01969" name="l01969"></a><span class="lineno"> 1969</span>            gas_blast gp = <a class="code hl_function" href="rng_8h.html#ac634f688b3c7864ab6992939ac7b0a6e">random_entry_removed</a>( gas_front );</div>
<div class="line"><a id="l01970" name="l01970"></a><span class="lineno"> 1970</span>            closed.insert( gp.second );</div>
<div class="line"><a id="l01971" name="l01971"></a><span class="lineno"> 1971</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> cur_intensity = <a class="code hl_function" href="classmap.html#a34f983a946812fa51de439bd68f6dc09">get_field_intensity</a>( gp.second, <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a> );</div>
<div class="line"><a id="l01972" name="l01972"></a><span class="lineno"> 1972</span>            <span class="keywordflow">if</span>( cur_intensity &lt; max_intensity ) {</div>
<div class="line"><a id="l01973" name="l01973"></a><span class="lineno"> 1973</span>                <span class="keyword">const</span> <span class="keywordtype">int</span> bonus = std::min( max_intensity - cur_intensity, increment );</div>
<div class="line"><a id="l01974" name="l01974"></a><span class="lineno"> 1974</span>                <a class="code hl_function" href="classmap.html#ace2f169fced91ed2daf1f3ab1fb0d0cf">mod_field_intensity</a>( gp.second, <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a>, bonus );</div>
<div class="line"><a id="l01975" name="l01975"></a><span class="lineno"> 1975</span>                amount -= bonus;</div>
<div class="line"><a id="l01976" name="l01976"></a><span class="lineno"> 1976</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01977" name="l01977"></a><span class="lineno"> 1977</span>                amount--;</div>
<div class="line"><a id="l01978" name="l01978"></a><span class="lineno"> 1978</span>            }</div>
<div class="line"><a id="l01979" name="l01979"></a><span class="lineno"> 1979</span> </div>
<div class="line"><a id="l01980" name="l01980"></a><span class="lineno"> 1980</span>            <span class="keywordflow">if</span>( amount &lt;= 0 ) {</div>
<div class="line"><a id="l01981" name="l01981"></a><span class="lineno"> 1981</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01982" name="l01982"></a><span class="lineno"> 1982</span>            }</div>
<div class="line"><a id="l01983" name="l01983"></a><span class="lineno"> 1983</span> </div>
<div class="line"><a id="l01984" name="l01984"></a><span class="lineno"> 1984</span>            <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;int, 8&gt; x_offset = {{ -1, 1,  0, 0,  1, -1, -1, 1  }};</div>
<div class="line"><a id="l01985" name="l01985"></a><span class="lineno"> 1985</span>            <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;int, 8&gt; y_offset = {{  0, 0, -1, 1, -1,  1, -1, 1  }};</div>
<div class="line"><a id="l01986" name="l01986"></a><span class="lineno"> 1986</span>            <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0; i &lt; 8; i++ ) {</div>
<div class="line"><a id="l01987" name="l01987"></a><span class="lineno"> 1987</span>                <a class="code hl_struct" href="structtripoint.html">tripoint</a> pt = gp.second + <a class="code hl_struct" href="structpoint.html">point</a>( x_offset[ i ], y_offset[ i ] );</div>
<div class="line"><a id="l01988" name="l01988"></a><span class="lineno"> 1988</span>                <span class="keywordflow">if</span>( closed.count( pt ) &gt; 0 ) {</div>
<div class="line"><a id="l01989" name="l01989"></a><span class="lineno"> 1989</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01990" name="l01990"></a><span class="lineno"> 1990</span>                }</div>
<div class="line"><a id="l01991" name="l01991"></a><span class="lineno"> 1991</span> </div>
<div class="line"><a id="l01992" name="l01992"></a><span class="lineno"> 1992</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="classmap.html#a802cc11379d4be61f4e2b13a50f6390e">impassable</a>( pt ) &amp;&amp; ( not_gas || !<a class="code hl_function" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a17333b0108a536601f817c86278e77bd">TFLAG_PERMEABLE</a>, pt ) ) ) {</div>
<div class="line"><a id="l01993" name="l01993"></a><span class="lineno"> 1993</span>                    closed.insert( pt );</div>
<div class="line"><a id="l01994" name="l01994"></a><span class="lineno"> 1994</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01995" name="l01995"></a><span class="lineno"> 1995</span>                }</div>
<div class="line"><a id="l01996" name="l01996"></a><span class="lineno"> 1996</span> </div>
<div class="line"><a id="l01997" name="l01997"></a><span class="lineno"> 1997</span>                <a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a>.push( { <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( <a class="code hl_function" href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a>( <a class="code hl_enumvalue" href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">center</a>, pt ) ), pt } );</div>
<div class="line"><a id="l01998" name="l01998"></a><span class="lineno"> 1998</span>            }</div>
<div class="line"><a id="l01999" name="l01999"></a><span class="lineno"> 1999</span>        }</div>
<div class="line"><a id="l02000" name="l02000"></a><span class="lineno"> 2000</span>    }</div>
<div class="line"><a id="l02001" name="l02001"></a><span class="lineno"> 2001</span>}</div>
<div class="ttc" id="aactive__item__cache_8h_html_acc683dc9a32f0cb3fb0032b41c6e17b5a16ec845a09700f77aea693ee40434e73"><div class="ttname"><a href="active__item__cache_8h.html#acc683dc9a32f0cb3fb0032b41c6e17b5a16ec845a09700f77aea693ee40434e73">special_item_type::explosive</a></div><div class="ttdeci">@ explosive</div></div>
<div class="ttc" id="aartifact_8cpp_html_a70800e95389f34dd34186fafaea2a840"><div class="ttname"><a href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a></div><div class="ttdeci">units::quantity&lt; V, B &gt; rng(const units::quantity&lt; V, B &gt; &amp;min, const units::quantity&lt; V, B &gt; &amp;max)</div><div class="ttdef"><b>Definition:</b> <a href="artifact_8cpp_source.html#l00032">artifact.cpp:32</a></div></div>
<div class="ttc" id="aavatar_8h_html"><div class="ttname"><a href="avatar_8h.html">avatar.h</a></div></div>
<div class="ttc" id="abasecamp_8h_html"><div class="ttname"><a href="basecamp_8h.html">basecamp.h</a></div></div>
<div class="ttc" id="abodypart_8cpp_html_ab29c0bad9828b787ace4d04a5e951c6b"><div class="ttname"><a href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a></div><div class="ttdeci">std::string body_part_name_accusative(body_part bp, int number)</div><div class="ttdoc">Returns the matching accusative name of the body_part token, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8cpp_source.html#l00329">bodypart.cpp:329</a></div></div>
<div class="ttc" id="abodypart_8cpp_html_ae34a481a7c686b233f2d8c48e43b723a"><div class="ttname"><a href="bodypart_8cpp.html#ae34a481a7c686b233f2d8c48e43b723a">convert_bp</a></div><div class="ttdeci">const bodypart_str_id &amp; convert_bp(body_part bp)</div><div class="ttdoc">Returns the new id for old token.</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8cpp_source.html#l00185">bodypart.cpp:185</a></div></div>
<div class="ttc" id="abodypart_8h_html"><div class="ttname"><a href="bodypart_8h.html">bodypart.h</a></div></div>
<div class="ttc" id="abodypart_8h_html_a426444e2d486ce1ee315d8b8acc86b40"><div class="ttname"><a href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a></div><div class="ttdeci">int_id&lt; body_part_type &gt; bodypart_id</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00023">bodypart.h:23</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980">body_part</a></div><div class="ttdeci">body_part</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00039">bodypart.h:39</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a184f1b627fd11fb607e76b2d30dadfbb"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a184f1b627fd11fb607e76b2d30dadfbb">bp_foot_l</a></div><div class="ttdeci">@ bp_foot_l</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00050">bodypart.h:50</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a202ad82497ebf8867cdcd6ee15085d16"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a202ad82497ebf8867cdcd6ee15085d16">bp_leg_r</a></div><div class="ttdeci">@ bp_leg_r</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00049">bodypart.h:49</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a2055386ee220ee2ca3e61d13df65e868"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2055386ee220ee2ca3e61d13df65e868">bp_eyes</a></div><div class="ttdeci">@ bp_eyes</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00042">bodypart.h:42</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a2806629e65a2c2eb5d8049e29e77910e"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2806629e65a2c2eb5d8049e29e77910e">bp_hand_l</a></div><div class="ttdeci">@ bp_hand_l</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00046">bodypart.h:46</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a441080ba1d3930d38f635658d9b28e01"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a441080ba1d3930d38f635658d9b28e01">bp_arm_l</a></div><div class="ttdeci">@ bp_arm_l</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00044">bodypart.h:44</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a44506e97ae9648354f97d530a3be61b8"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a44506e97ae9648354f97d530a3be61b8">bp_leg_l</a></div><div class="ttdeci">@ bp_leg_l</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00048">bodypart.h:48</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a54721306a0e05318b6d0440349c1a0fb"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a54721306a0e05318b6d0440349c1a0fb">bp_hand_r</a></div><div class="ttdeci">@ bp_hand_r</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00047">bodypart.h:47</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ab1635a97e6cc33a051cd378b60e48698"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab1635a97e6cc33a051cd378b60e48698">bp_head</a></div><div class="ttdeci">@ bp_head</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00041">bodypart.h:41</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a></div><div class="ttdeci">@ bp_torso</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00040">bodypart.h:40</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980abb7b120eb8dc7c137110446fe541baed"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980abb7b120eb8dc7c137110446fe541baed">bp_mouth</a></div><div class="ttdeci">@ bp_mouth</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00043">bodypart.h:43</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ac094b1c6f96ebbd604928cfd2fad0ab7"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac094b1c6f96ebbd604928cfd2fad0ab7">bp_foot_r</a></div><div class="ttdeci">@ bp_foot_r</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00051">bodypart.h:51</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a></div><div class="ttdeci">@ num_bp</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00053">bodypart.h:52</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ae5f21c7494ad730a0c6abf6957976cb3"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ae5f21c7494ad730a0c6abf6957976cb3">bp_arm_r</a></div><div class="ttdeci">@ bp_arm_r</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00045">bodypart.h:45</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a359120c15f92d54a49fec9de7bcb571f"><div class="ttname"><a href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a></div><div class="ttdeci">bool x_in_y(const time_duration &amp;a, const time_duration &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00521">calendar.cpp:521</a></div></div>
<div class="ttc" id="acalendar_8h_html"><div class="ttname"><a href="calendar_8h.html">calendar.h</a></div></div>
<div class="ttc" id="acata__tiles_8h_html_affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667"><div class="ttname"><a href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">text_alignment::center</a></div><div class="ttdeci">@ center</div></div>
<div class="ttc" id="acata__utility_8h_html"><div class="ttname"><a href="cata__utility_8h.html">cata_utility.h</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2c05090cba2078f9ebefd80e61564be3"><div class="ttname"><a href="classCharacter.html#a2c05090cba2078f9ebefd80e61564be3">Character::deal_damage</a></div><div class="ttdeci">dealt_damage_instance deal_damage(Creature *source, bodypart_id bp, const damage_instance &amp;d) override</div><div class="ttdoc">Calls Creature::deal_damage and handles damaged effects (waking up, etc.)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08437">character.cpp:8437</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2fcc1fc6fbdadd5dc6f404eb80351b3f"><div class="ttname"><a href="classCharacter.html#a2fcc1fc6fbdadd5dc6f404eb80351b3f">Character::is_elec_immune</a></div><div class="ttdeci">bool is_elec_immune() const override</div><div class="ttdoc">Returns true is the player is protected from electric shocks.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06173">character.cpp:6173</a></div></div>
<div class="ttc" id="aclassCharacter_html_a3aaa75382f6308a729369c7f2ccf0600"><div class="ttname"><a href="classCharacter.html#a3aaa75382f6308a729369c7f2ccf0600">Character::worn_with_flag</a></div><div class="ttdeci">bool worn_with_flag(const std::string &amp;flag, const bodypart_id &amp;bp=bodypart_str_id::NULL_ID()) const</div><div class="ttdoc">Returns true if the player is wearing an item with the given flag.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03241">character.cpp:3241</a></div></div>
<div class="ttc" id="aclassCharacter_html_a3f82f3257619099e3b2e3103777a703a"><div class="ttname"><a href="classCharacter.html#a3f82f3257619099e3b2e3103777a703a">Character::is_on_ground</a></div><div class="ttdeci">bool is_on_ground() const override</div><div class="ttdoc">Returns true if the player is knocked over or has broken legs.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00953">character.cpp:953</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4c3defc0d53472077cb7577b30b1605f"><div class="ttname"><a href="classCharacter.html#a4c3defc0d53472077cb7577b30b1605f">Character::worn</a></div><div class="ttdeci">std::list&lt; item &gt; worn</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01571">character.h:1571</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6028587ccee9855c6ba900042188eec3"><div class="ttname"><a href="classCharacter.html#a6028587ccee9855c6ba900042188eec3">Character::is_wearing</a></div><div class="ttdeci">bool is_wearing(const itype_id &amp;it) const</div><div class="ttdoc">Returns true if the player is wearing the item.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03221">character.cpp:3221</a></div></div>
<div class="ttc" id="aclassCharacter_html_a61bc9422c35b63128532af268e52cb71"><div class="ttname"><a href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">Character::in_vehicle</a></div><div class="ttdeci">bool in_vehicle</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01575">character.h:1575</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6aaea50daa966bc12e4b1ec44134fa12"><div class="ttname"><a href="classCharacter.html#a6aaea50daa966bc12e4b1ec44134fa12">Character::get_armor_type</a></div><div class="ttdeci">int get_armor_type(damage_type dt, bodypart_id bp) const override</div><div class="ttdoc">Returns overall resistance to given type on the bod part.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06968">character.cpp:6968</a></div></div>
<div class="ttc" id="aclassCharacter_html_a8bc4c7c3d24cec4d735cf276e02de93a"><div class="ttname"><a href="classCharacter.html#a8bc4c7c3d24cec4d735cf276e02de93a">Character::get_env_resist</a></div><div class="ttdeci">int get_env_resist(bodypart_id bp) const override</div><div class="ttdoc">Returns overall env_resist on a body_part.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07114">character.cpp:7114</a></div></div>
<div class="ttc" id="aclassCharacter_html_a8e2d2e1c01bfbb36401ae221300370f5"><div class="ttname"><a href="classCharacter.html#a8e2d2e1c01bfbb36401ae221300370f5">Character::has_two_arms</a></div><div class="ttdeci">bool has_two_arms() const</div><div class="ttdoc">Returns true if the player has two functioning arms.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01270">character.cpp:1270</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa07b9d5f3a6d22ce9c6593d364cb14bc"><div class="ttname"><a href="classCharacter.html#aa07b9d5f3a6d22ce9c6593d364cb14bc">Character::get_armor_cut</a></div><div class="ttdeci">int get_armor_cut(bodypart_id bp) const override</div><div class="ttdoc">Returns overall cutting resistance for the body_part.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06957">character.cpp:6957</a></div></div>
<div class="ttc" id="aclassCharacter_html_ab16d86fdaf75c28043679273a8c74843"><div class="ttname"><a href="classCharacter.html#ab16d86fdaf75c28043679273a8c74843">Character::get_highest_category</a></div><div class="ttdeci">std::string get_highest_category() const</div><div class="ttdoc">Returns the highest mutation category.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07949">character.cpp:7949</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad24859164517ed6e392e21df69527199"><div class="ttname"><a href="classCharacter.html#ad24859164517ed6e392e21df69527199">Character::pos</a></div><div class="ttdeci">const tripoint &amp; pos() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00707">character.cpp:707</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad30aa5db93626016bfc8ac32f848f82d"><div class="ttname"><a href="classCharacter.html#ad30aa5db93626016bfc8ac32f848f82d">Character::hurtall</a></div><div class="ttdeci">void hurtall(int dam, Creature *source, bool disturb=true)</div><div class="ttdoc">Hurts all body parts for dam, no armor reduction.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08635">character.cpp:8635</a></div></div>
<div class="ttc" id="aclassCharacter_html_af06dd97724f4f05df782e7a4b4f9cfe1"><div class="ttname"><a href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">Character::has_trait</a></div><div class="ttdeci">bool has_trait(const trait_id &amp;b) const override</div><div class="ttdoc">Returns true if the player has the entered trait.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00103">mutation.cpp:103</a></div></div>
<div class="ttc" id="aclassCharacter_html_af157e1fa623589a34b3c23a511dbc797"><div class="ttname"><a href="classCharacter.html#af157e1fa623589a34b3c23a511dbc797">Character::irradiate</a></div><div class="ttdeci">bool irradiate(float rads, bool bypass=false)</div><div class="ttdoc">Handles mitigation and application of radiation.</div><div class="ttdef"><b>Definition:</b> <a href="suffer_8cpp_source.html#l01532">suffer.cpp:1532</a></div></div>
<div class="ttc" id="aclassCharacter_html_af781804624ab031f0016b970b4fa8007"><div class="ttname"><a href="classCharacter.html#af781804624ab031f0016b970b4fa8007">Character::hp_to_bp</a></div><div class="ttdeci">static body_part hp_to_bp(hp_part hpart)</div><div class="ttdoc">Converts an hp_part to a body_part.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06571">character.cpp:6571</a></div></div>
<div class="ttc" id="aclassCharacter_html_af9c7419575e23d52745c94009929fafb"><div class="ttname"><a href="classCharacter.html#af9c7419575e23d52745c94009929fafb">Character::has_active_bionic</a></div><div class="ttdeci">bool has_active_bionic(const bionic_id &amp;b) const</div><div class="ttdoc">Returns true if the player has the entered bionic id and it is powered on.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01876">character.cpp:1876</a></div></div>
<div class="ttc" id="aclassCreature_html"><div class="ttname"><a href="classCreature.html">Creature</a></div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00077">creature.h:78</a></div></div>
<div class="ttc" id="aclassCreature_html_a07012d6d1998068bef112510c7424374"><div class="ttname"><a href="classCreature.html#a07012d6d1998068bef112510c7424374">Creature::is_monster</a></div><div class="ttdeci">virtual bool is_monster() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00101">creature.h:101</a></div></div>
<div class="ttc" id="aclassCreature_html_a090f59402eea6b1605cbfa5c2b2ac77c"><div class="ttname"><a href="classCreature.html#a090f59402eea6b1605cbfa5c2b2ac77c">Creature::is_immune_field</a></div><div class="ttdeci">virtual bool is_immune_field(const field_type_id &amp;) const</div><div class="ttdoc">Returns true if we are immune to the field type with the given fid.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00325">creature.h:325</a></div></div>
<div class="ttc" id="aclassCreature_html_a36dcf5a04ddc0cf9fa29c08b7b099158"><div class="ttname"><a href="classCreature.html#a36dcf5a04ddc0cf9fa29c08b7b099158">Creature::check_dead_state</a></div><div class="ttdeci">void check_dead_state()</div><div class="ttdoc">This function checks the creatures is_dead_state and (if true) calls die.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01833">creature.cpp:1833</a></div></div>
<div class="ttc" id="aclassCreature_html_a45926a7ba63ccc9be744f87a4d540b7d"><div class="ttname"><a href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos</a></div><div class="ttdeci">virtual const tripoint &amp; pos() const =0</div></div>
<div class="ttc" id="aclassCreature_html_a48bb40fe4132a49d95f26611d7c622a6"><div class="ttname"><a href="classCreature.html#a48bb40fe4132a49d95f26611d7c622a6">Creature::cmat_flammable</a></div><div class="ttdeci">static const std::set&lt; material_id &gt; cmat_flammable</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00477">creature.h:477</a></div></div>
<div class="ttc" id="aclassCreature_html_a51c96c81ae1ea766b5eead4a265c1492"><div class="ttname"><a href="classCreature.html#a51c96c81ae1ea766b5eead4a265c1492">Creature::get_random_body_part</a></div><div class="ttdeci">bodypart_id get_random_body_part(bool main=false) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01614">creature.cpp:1614</a></div></div>
<div class="ttc" id="aclassCreature_html_a5a2346f549de9c87e8f2afeec1e71366"><div class="ttname"><a href="classCreature.html#a5a2346f549de9c87e8f2afeec1e71366">Creature::is_underwater</a></div><div class="ttdeci">virtual bool is_underwater() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00174">creature.cpp:174</a></div></div>
<div class="ttc" id="aclassCreature_html_a666022fd3ed772fa109d273c20e8de55"><div class="ttname"><a href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">Creature::add_effect</a></div><div class="ttdeci">void add_effect(const effect &amp;eff, bool force=false, bool deferred=false)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00974">creature.cpp:974</a></div></div>
<div class="ttc" id="aclassCreature_html_a75ad96eb6ce27d3c1df250965b4de7b5"><div class="ttname"><a href="classCreature.html#a75ad96eb6ce27d3c1df250965b4de7b5">Creature::deal_damage</a></div><div class="ttdeci">virtual dealt_damage_instance deal_damage(Creature *source, bodypart_id bp, const damage_instance &amp;dam)</div><div class="ttdoc">Deals the damage via an attack.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00873">creature.cpp:873</a></div></div>
<div class="ttc" id="aclassCreature_html_a7cf71d2bd6c350f2ceda3f1d64046e63"><div class="ttname"><a href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">Creature::add_msg_player_or_npc</a></div><div class="ttdeci">virtual void add_msg_player_or_npc(const std::string &amp;, const std::string &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00677">creature.h:677</a></div></div>
<div class="ttc" id="aclassCreature_html_a81c28d7d1cb83a47794dbf879dede400"><div class="ttname"><a href="classCreature.html#a81c28d7d1cb83a47794dbf879dede400">Creature::cmat_flesh</a></div><div class="ttdeci">static const std::set&lt; material_id &gt; cmat_flesh</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00475">creature.h:475</a></div></div>
<div class="ttc" id="aclassCreature_html_a8c5a392caa213bee9581b47e9f0e2052"><div class="ttname"><a href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">Creature::moves</a></div><div class="ttdeci">int moves</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00569">creature.h:569</a></div></div>
<div class="ttc" id="aclassCreature_html_a9f9cc294949ffc5bd51ab464b5c5ad6f"><div class="ttname"><a href="classCreature.html#a9f9cc294949ffc5bd51ab464b5c5ad6f">Creature::get_all_body_parts</a></div><div class="ttdeci">std::vector&lt; bodypart_id &gt; get_all_body_parts(bool only_main=false) const</div><div class="ttdoc">Returns body parts this creature have.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01621">creature.cpp:1621</a></div></div>
<div class="ttc" id="aclassCreature_html_aab3ed00f0b1635fcb5efaa93cf3f8336"><div class="ttname"><a href="classCreature.html#aab3ed00f0b1635fcb5efaa93cf3f8336">Creature::cmat_fleshnveg</a></div><div class="ttdeci">static const std::set&lt; material_id &gt; cmat_fleshnveg</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00476">creature.h:476</a></div></div>
<div class="ttc" id="aclassCreature_html_ac5fa405fe6d75e0298051ab413cdfac1"><div class="ttname"><a href="classCreature.html#ac5fa405fe6d75e0298051ab413cdfac1">Creature::cmat_flameres</a></div><div class="ttdeci">static const std::set&lt; material_id &gt; cmat_flameres</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00478">creature.h:478</a></div></div>
<div class="ttc" id="aclassCreature_html_acb1d0a1210d3dd4c86350f3ad4c58649"><div class="ttname"><a href="classCreature.html#acb1d0a1210d3dd4c86350f3ad4c58649">Creature::as_player</a></div><div class="ttdeci">virtual player * as_player()</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00122">creature.h:122</a></div></div>
<div class="ttc" id="aclassCreature_html_acfe4b827ccc042c7933e709fbca6476e"><div class="ttname"><a href="classCreature.html#acfe4b827ccc042c7933e709fbca6476e">Creature::is_immune_effect</a></div><div class="ttdeci">virtual bool is_immune_effect(const efftype_id &amp;type) const =0</div></div>
<div class="ttc" id="aclassCreature_html_aeb7869963d4c1060c4d928424511d2e0"><div class="ttname"><a href="classCreature.html#aeb7869963d4c1060c4d928424511d2e0">Creature::add_env_effect</a></div><div class="ttdeci">bool add_env_effect(const efftype_id &amp;eff_id, body_part vector, int strength, const time_duration &amp;dur, body_part bp=num_bp, int intensity=1, bool force=false)</div><div class="ttdoc">Gives chance to save via environmental resist, returns false if resistance was successful.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01106">creature.cpp:1106</a></div></div>
<div class="ttc" id="aclassMonsterGroupManager_html_ad16591c9153584950a7446d1678c08df"><div class="ttname"><a href="classMonsterGroupManager.html#ad16591c9153584950a7446d1678c08df">MonsterGroupManager::GetResultFromGroup</a></div><div class="ttdeci">static MonsterGroupResult GetResultFromGroup(const mongroup_id &amp;group, int *quantity=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="mongroup_8cpp_source.html#l00098">mongroup.cpp:98</a></div></div>
<div class="ttc" id="aclasscata_1_1optional_html"><div class="ttname"><a href="classcata_1_1optional.html">cata::optional</a></div><div class="ttdef"><b>Definition:</b> <a href="optional_8h_source.html#l00030">optional.h:31</a></div></div>
<div class="ttc" id="aclasseffect_html"><div class="ttname"><a href="classeffect.html">effect</a></div><div class="ttdef"><b>Definition:</b> <a href="effect_8h_source.html#l00160">effect.h:161</a></div></div>
<div class="ttc" id="aclasseffect_html_a64af3902e1495976589ba64ac4c82022"><div class="ttname"><a href="classeffect.html#a64af3902e1495976589ba64ac4c82022">effect::get_id</a></div><div class="ttdeci">const efftype_id &amp; get_id() const</div><div class="ttdoc">Returns the effect's matching effect_type id.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8h_source.html#l00305">effect.h:305</a></div></div>
<div class="ttc" id="aclassemit_html_a04216143ac34480a3b6c17768fb18621"><div class="ttname"><a href="classemit.html#a04216143ac34480a3b6c17768fb18621">emit::intensity</a></div><div class="ttdeci">int intensity() const</div><div class="ttdoc">Intensity of output fields, range [1..maximum_intensity].</div><div class="ttdef"><b>Definition:</b> <a href="emit_8h_source.html#l00034">emit.h:34</a></div></div>
<div class="ttc" id="aclassemit_html_a5fb324b1cbd77d601d0728cafb8994c9"><div class="ttname"><a href="classemit.html#a5fb324b1cbd77d601d0728cafb8994c9">emit::qty</a></div><div class="ttdeci">int qty() const</div><div class="ttdoc">Units of field to generate per turn subject to chance.</div><div class="ttdef"><b>Definition:</b> <a href="emit_8h_source.html#l00039">emit.h:39</a></div></div>
<div class="ttc" id="aclassemit_html_a64ead1306677782208d53896a3f276b0"><div class="ttname"><a href="classemit.html#a64ead1306677782208d53896a3f276b0">emit::chance</a></div><div class="ttdeci">int chance() const</div><div class="ttdoc">Chance to emit each turn, range [1..100].</div><div class="ttdef"><b>Definition:</b> <a href="emit_8h_source.html#l00044">emit.h:44</a></div></div>
<div class="ttc" id="aclassemit_html_a907ba86167c4a93baefd2993b1d1975e"><div class="ttname"><a href="classemit.html#a907ba86167c4a93baefd2993b1d1975e">emit::field</a></div><div class="ttdeci">field_type_id field() const</div><div class="ttdoc">Type of field to emit.</div><div class="ttdef"><b>Definition:</b> <a href="emit_8h_source.html#l00029">emit.h:29</a></div></div>
<div class="ttc" id="aclassfield__entry_html"><div class="ttname"><a href="classfield__entry.html">field_entry</a></div><div class="ttdoc">An active or passive effect existing on a tile.</div><div class="ttdef"><b>Definition:</b> <a href="field_8h_source.html#l00019">field.h:20</a></div></div>
<div class="ttc" id="aclassfield__entry_html_a04fa2a563929568fdffa10837faa19af"><div class="ttname"><a href="classfield__entry.html#a04fa2a563929568fdffa10837faa19af">field_entry::gas_can_spread</a></div><div class="ttdeci">bool gas_can_spread()</div><div class="ttdef"><b>Definition:</b> <a href="field_8h_source.html#l00093">field.h:93</a></div></div>
<div class="ttc" id="aclassfield__entry_html_a080080e792522897e40064ab2b413021"><div class="ttname"><a href="classfield__entry.html#a080080e792522897e40064ab2b413021">field_entry::extra_radiation_min</a></div><div class="ttdeci">int extra_radiation_min() const</div><div class="ttdef"><b>Definition:</b> <a href="field_8cpp_source.html#l00014">field.cpp:14</a></div></div>
<div class="ttc" id="aclassfield__entry_html_a19bc49a48431c18aa79f558038df43a6"><div class="ttname"><a href="classfield__entry.html#a19bc49a48431c18aa79f558038df43a6">field_entry::field_effects</a></div><div class="ttdeci">std::vector&lt; field_effect &gt; field_effects() const</div><div class="ttdef"><b>Definition:</b> <a href="field_8cpp_source.html#l00294">field.cpp:294</a></div></div>
<div class="ttc" id="aclassfield__entry_html_a24da46be59f0d3d3d718eb225f44c7c3"><div class="ttname"><a href="classfield__entry.html#a24da46be59f0d3d3d718eb225f44c7c3">field_entry::intensity_upgrade_duration</a></div><div class="ttdeci">time_duration intensity_upgrade_duration() const</div><div class="ttdef"><b>Definition:</b> <a href="field_8cpp_source.html#l00044">field.cpp:44</a></div></div>
<div class="ttc" id="aclassfield__entry_html_a288b000c18c02f26780dcd141dc9926d"><div class="ttname"><a href="classfield__entry.html#a288b000c18c02f26780dcd141dc9926d">field_entry::monster_spawn_group</a></div><div class="ttdeci">mongroup_id monster_spawn_group() const</div><div class="ttdef"><b>Definition:</b> <a href="field_8cpp_source.html#l00064">field.cpp:64</a></div></div>
<div class="ttc" id="aclassfield__entry_html_a2cc99711c7c06a482628cb09d4ee3f50"><div class="ttname"><a href="classfield__entry.html#a2cc99711c7c06a482628cb09d4ee3f50">field_entry::radiation_hurt_damage_min</a></div><div class="ttdeci">int radiation_hurt_damage_min() const</div><div class="ttdef"><b>Definition:</b> <a href="field_8cpp_source.html#l00024">field.cpp:24</a></div></div>
<div class="ttc" id="aclassfield__entry_html_a2fa8bc80139930630f3675efeb74acf4"><div class="ttname"><a href="classfield__entry.html#a2fa8bc80139930630f3675efeb74acf4">field_entry::get_underwater_age_speedup</a></div><div class="ttdeci">time_duration get_underwater_age_speedup() const</div><div class="ttdef"><b>Definition:</b> <a href="field_8h_source.html#l00097">field.h:97</a></div></div>
<div class="ttc" id="aclassfield__entry_html_a344da6654558b1175eecbb015b04add0"><div class="ttname"><a href="classfield__entry.html#a344da6654558b1175eecbb015b04add0">field_entry::monster_spawn_count</a></div><div class="ttdeci">int monster_spawn_count() const</div><div class="ttdef"><b>Definition:</b> <a href="field_8cpp_source.html#l00054">field.cpp:54</a></div></div>
<div class="ttc" id="aclassfield__entry_html_a3b257586eb47865dae75df0ea947ebb3"><div class="ttname"><a href="classfield__entry.html#a3b257586eb47865dae75df0ea947ebb3">field_entry::is_field_alive</a></div><div class="ttdeci">bool is_field_alive()</div><div class="ttdef"><b>Definition:</b> <a href="field_8h_source.html#l00089">field.h:89</a></div></div>
<div class="ttc" id="aclassfield__entry_html_a4a0c95792efa772fc965f5ee5fe829aa"><div class="ttname"><a href="classfield__entry.html#a4a0c95792efa772fc965f5ee5fe829aa">field_entry::radiation_hurt_message</a></div><div class="ttdeci">std::string radiation_hurt_message() const</div><div class="ttdef"><b>Definition:</b> <a href="field_8cpp_source.html#l00034">field.cpp:34</a></div></div>
<div class="ttc" id="aclassfield__entry_html_a5c3447c290158277c2d21b1996d9365e"><div class="ttname"><a href="classfield__entry.html#a5c3447c290158277c2d21b1996d9365e">field_entry::mod_field_age</a></div><div class="ttdeci">time_duration mod_field_age(const time_duration &amp;mod_age)</div><div class="ttdoc">Adds given value to age.</div><div class="ttdef"><b>Definition:</b> <a href="field_8h_source.html#l00073">field.h:73</a></div></div>
<div class="ttc" id="aclassfield__entry_html_a5ee5768041fa90ed1518442b9bd7daab"><div class="ttname"><a href="classfield__entry.html#a5ee5768041fa90ed1518442b9bd7daab">field_entry::get_field_intensity</a></div><div class="ttdeci">int get_field_intensity() const</div><div class="ttdef"><b>Definition:</b> <a href="field_8cpp_source.html#l00121">field.cpp:121</a></div></div>
<div class="ttc" id="aclassfield__entry_html_a6d067afbbf776958097359844a82c29e"><div class="ttname"><a href="classfield__entry.html#a6d067afbbf776958097359844a82c29e">field_entry::extra_radiation_max</a></div><div class="ttdeci">int extra_radiation_max() const</div><div class="ttdef"><b>Definition:</b> <a href="field_8cpp_source.html#l00019">field.cpp:19</a></div></div>
<div class="ttc" id="aclassfield__entry_html_a7b3755413ee669cf1b84f54883f2e363"><div class="ttname"><a href="classfield__entry.html#a7b3755413ee669cf1b84f54883f2e363">field_entry::set_field_age</a></div><div class="ttdeci">time_duration set_field_age(const time_duration &amp;new_age)</div><div class="ttdoc">Sets age to the given value.</div><div class="ttdef"><b>Definition:</b> <a href="field_8cpp_source.html#l00138">field.cpp:138</a></div></div>
<div class="ttc" id="aclassfield__entry_html_a7befd45d74490275bd7c5bf92cabc284"><div class="ttname"><a href="classfield__entry.html#a7befd45d74490275bd7c5bf92cabc284">field_entry::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="field_8h_source.html#l00084">field.h:84</a></div></div>
<div class="ttc" id="aclassfield__entry_html_a7eb2efd29a27ad81d198009ad674a61d"><div class="ttname"><a href="classfield__entry.html#a7eb2efd29a27ad81d198009ad674a61d">field_entry::get_field_age</a></div><div class="ttdeci">time_duration get_field_age() const</div><div class="ttdef"><b>Definition:</b> <a href="field_8cpp_source.html#l00133">field.cpp:133</a></div></div>
<div class="ttc" id="aclassfield__entry_html_a7fccb871e56858b439a80d2270e86f52"><div class="ttname"><a href="classfield__entry.html#a7fccb871e56858b439a80d2270e86f52">field_entry::radiation_hurt_damage_max</a></div><div class="ttdeci">int radiation_hurt_damage_max() const</div><div class="ttdef"><b>Definition:</b> <a href="field_8cpp_source.html#l00029">field.cpp:29</a></div></div>
<div class="ttc" id="aclassfield__entry_html_aa9d315e6acc5b6425428d40b5b10f966"><div class="ttname"><a href="classfield__entry.html#aa9d315e6acc5b6425428d40b5b10f966">field_entry::set_field_intensity</a></div><div class="ttdeci">int set_field_intensity(int new_intensity)</div><div class="ttdef"><b>Definition:</b> <a href="field_8cpp_source.html#l00126">field.cpp:126</a></div></div>
<div class="ttc" id="aclassfield__entry_html_aaa0c1f4200442df272bfe66f0768ffd9"><div class="ttname"><a href="classfield__entry.html#aaa0c1f4200442df272bfe66f0768ffd9">field_entry::intensity_upgrade_chance</a></div><div class="ttdeci">int intensity_upgrade_chance() const</div><div class="ttdef"><b>Definition:</b> <a href="field_8cpp_source.html#l00039">field.cpp:39</a></div></div>
<div class="ttc" id="aclassfield__entry_html_abb1919e365f94327ba76e3671f318199"><div class="ttname"><a href="classfield__entry.html#abb1919e365f94327ba76e3671f318199">field_entry::monster_spawn_radius</a></div><div class="ttdeci">int monster_spawn_radius() const</div><div class="ttdef"><b>Definition:</b> <a href="field_8cpp_source.html#l00059">field.cpp:59</a></div></div>
<div class="ttc" id="aclassfield__entry_html_ace87b77403d5d2b130f68f0d58c20890"><div class="ttname"><a href="classfield__entry.html#ace87b77403d5d2b130f68f0d58c20890">field_entry::monster_spawn_chance</a></div><div class="ttdeci">int monster_spawn_chance() const</div><div class="ttdef"><b>Definition:</b> <a href="field_8cpp_source.html#l00049">field.cpp:49</a></div></div>
<div class="ttc" id="aclassfield__entry_html_af76e247514edaeed4bdc58638bfa0ae1"><div class="ttname"><a href="classfield__entry.html#af76e247514edaeed4bdc58638bfa0ae1">field_entry::get_field_type</a></div><div class="ttdeci">field_type_id get_field_type() const</div><div class="ttdef"><b>Definition:</b> <a href="field_8cpp_source.html#l00105">field.cpp:105</a></div></div>
<div class="ttc" id="aclassfield_html"><div class="ttname"><a href="classfield.html">field</a></div><div class="ttdoc">A variable sized collection of field entries on a given map square.</div><div class="ttdef"><b>Definition:</b> <a href="field_8h_source.html#l00130">field.h:131</a></div></div>
<div class="ttc" id="aclassfield_html_a0560f05925c46ef62436765b8db90731"><div class="ttname"><a href="classfield.html#a0560f05925c46ef62436765b8db90731">field::find_field</a></div><div class="ttdeci">field_entry * find_field(const field_type_id &amp;field_type_to_find)</div><div class="ttdoc">Returns a field entry corresponding to the field_type_id parameter passed in.</div><div class="ttdef"><b>Definition:</b> <a href="field_8cpp_source.html#l00153">field.cpp:153</a></div></div>
<div class="ttc" id="aclassfield_html_a4b77d0274c7e8a91e86e814acac06134"><div class="ttname"><a href="classfield.html#a4b77d0274c7e8a91e86e814acac06134">field::begin</a></div><div class="ttdeci">std::map&lt; field_type_id, field_entry &gt;::iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="field_8cpp_source.html#l00251">field.cpp:251</a></div></div>
<div class="ttc" id="aclassfield_html_a8adfc9dd4000543431b4d1a94ab312ab"><div class="ttname"><a href="classfield.html#a8adfc9dd4000543431b4d1a94ab312ab">field::displayed_field_type</a></div><div class="ttdeci">field_type_id displayed_field_type() const</div><div class="ttdoc">Returns field type that should be drawn.</div><div class="ttdef"><b>Definition:</b> <a href="field_8cpp_source.html#l00275">field.cpp:275</a></div></div>
<div class="ttc" id="aclassfield_html_acf3d02faed2e57422ee4f657d242b71e"><div class="ttname"><a href="classfield.html#acf3d02faed2e57422ee4f657d242b71e">field::end</a></div><div class="ttdeci">std::map&lt; field_type_id, field_entry &gt;::iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="field_8cpp_source.html#l00261">field.cpp:261</a></div></div>
<div class="ttc" id="aclassfield_html_ae2b200f31d39fa6f8c57750d88f86d5b"><div class="ttname"><a href="classfield.html#ae2b200f31d39fa6f8c57750d88f86d5b">field::remove_field</a></div><div class="ttdeci">bool remove_field(const field_type_id &amp;field_to_remove)</div><div class="ttdoc">Removes the field entry with a type equal to the field_type_id parameter.</div><div class="ttdef"><b>Definition:</b> <a href="field_8cpp_source.html#l00219">field.cpp:219</a></div></div>
<div class="ttc" id="aclassfungal__effects_html"><div class="ttname"><a href="classfungal__effects.html">fungal_effects</a></div><div class="ttdef"><b>Definition:</b> <a href="fungal__effects_8h_source.html#l00010">fungal_effects.h:11</a></div></div>
<div class="ttc" id="aclassfungal__effects_html_a8060002612d6ddfcadd27437fe1e1230"><div class="ttname"><a href="classfungal__effects.html#a8060002612d6ddfcadd27437fe1e1230">fungal_effects::spread_fungus</a></div><div class="ttdeci">void spread_fungus(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="fungal__effects_8cpp_source.html#l00242">fungal_effects.cpp:242</a></div></div>
<div class="ttc" id="aclassint__id_html"><div class="ttname"><a href="classint__id.html">int_id&lt; field_type &gt;</a></div></div>
<div class="ttc" id="aclassint__id_html_a4796245d3cd6e0283670698a98d46ae9"><div class="ttname"><a href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">int_id::obj</a></div><div class="ttdeci">const T &amp; obj() const</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00026">ammo_effect.cpp:26</a></div></div>
<div class="ttc" id="aclassint__id_html_a88b1e0c550f4d6f36cac7a73feca7f01"><div class="ttname"><a href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">int_id::id</a></div><div class="ttdeci">const string_id&lt; T &gt; &amp; id() const</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00033">ammo_effect.cpp:33</a></div></div>
<div class="ttc" id="aclassitem__stack_html_a588d49cd17fbf3c64227906758940769"><div class="ttname"><a href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">item_stack::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00028">item_stack.cpp:28</a></div></div>
<div class="ttc" id="aclassitem__stack_html_ad04a969155cc139c54a6a3b4a3395454"><div class="ttname"><a href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">item_stack::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00033">item_stack.cpp:33</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00175">item.h:176</a></div></div>
<div class="ttc" id="aclassitem_html_a4326944ae95f4d265c8ca1c76ed89a03"><div class="ttname"><a href="classitem.html#a4326944ae95f4d265c8ca1c76ed89a03">item::made_of</a></div><div class="ttdeci">const std::vector&lt; material_id &gt; &amp; made_of() const</div><div class="ttdoc">The ids of all the materials this is made of.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06263">item.cpp:6263</a></div></div>
<div class="ttc" id="aclassitem_html_a7e78e26dcf9b357cda769c3ca2938eda"><div class="ttname"><a href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">item::tname</a></div><div class="ttdeci">std::string tname(unsigned int quantity=1, bool with_prefix=true, unsigned int truncate=0) const</div><div class="ttdoc">Return the (translated) item name.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04440">item.cpp:4440</a></div></div>
<div class="ttc" id="aclassitem_html_aa79dad64e1ef6347219be2f8666e2752"><div class="ttname"><a href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">item::typeId</a></div><div class="ttdeci">const itype_id &amp; typeId() const</div><div class="ttdoc">return the unique identifier of the items underlying type</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08196">item.cpp:8196</a></div></div>
<div class="ttc" id="aclassitem_html_aae86ed52f17bed14dffddbbc618b8afa"><div class="ttname"><a href="classitem.html#aae86ed52f17bed14dffddbbc618b8afa">item::get_coverage</a></div><div class="ttdeci">int get_coverage() const</div><div class="ttdoc">Returns the relative coverage that this item has when worn.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05750">item.cpp:5750</a></div></div>
<div class="ttc" id="aclassitem_html_ab55a5629e6fe769a7ac314c02d25ecef"><div class="ttname"><a href="classitem.html#ab55a5629e6fe769a7ac314c02d25ecef">item::set_age</a></div><div class="ttdeci">void set_age(const time_duration &amp;age)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09837">item.cpp:9837</a></div></div>
<div class="ttc" id="aclassitem_html_ad5b753d7b46c55de9a5b66bbc2b14b99"><div class="ttname"><a href="classitem.html#ad5b753d7b46c55de9a5b66bbc2b14b99">item::covers</a></div><div class="ttdeci">bool covers(body_part bp) const</div><div class="ttdoc">Whether this item (when worn) covers the given body part.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00740">item.cpp:740</a></div></div>
<div class="ttc" id="aclassitem_html_ae79cfef3dd3698b98478cfc08ba20a01"><div class="ttname"><a href="classitem.html#ae79cfef3dd3698b98478cfc08ba20a01">item::detonate</a></div><div class="ttdeci">bool detonate(const tripoint &amp;p, std::vector&lt; item &gt; &amp;drops)</div><div class="ttdoc">Detonates the item and adds remains (if any) to drops.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08592">item.cpp:8592</a></div></div>
<div class="ttc" id="aclassmap__stack_html"><div class="ttname"><a href="classmap__stack.html">map_stack</a></div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00100">map.h:101</a></div></div>
<div class="ttc" id="aclassmap__stack_html_ab58ec66a7ca2e476c6d90967dccc8062"><div class="ttname"><a href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">map_stack::erase</a></div><div class="ttdeci">iterator erase(const_iterator it) override</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00147">map.cpp:147</a></div></div>
<div class="ttc" id="aclassmap_html"><div class="ttname"><a href="classmap.html">map</a></div><div class="ttdoc">Manage and cache data about a part of the map.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00371">map.h:372</a></div></div>
<div class="ttc" id="aclassmap_html_a03860b3f7c4c378d92e2719997b97f8c"><div class="ttname"><a href="classmap.html#a03860b3f7c4c378d92e2719997b97f8c">map::adjust_radiation</a></div><div class="ttdeci">void adjust_radiation(const tripoint &amp;p, int delta)</div><div class="ttdoc">Increment the radiation in the given tile by the given delta (decrement it if delta is negative)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04051">map.cpp:4051</a></div></div>
<div class="ttc" id="aclassmap_html_a07dbd4505e0464a1f58bc732febfd6f4"><div class="ttname"><a href="classmap.html#a07dbd4505e0464a1f58bc732febfd6f4">map::destroy</a></div><div class="ttdeci">void destroy(const tripoint &amp;p, bool silent=false)</div><div class="ttdoc">Keeps bashing a square until it can't be bashed anymore.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03631">map.cpp:3631</a></div></div>
<div class="ttc" id="aclassmap_html_a0ecdaa7f32bcc5dbcb162ae76ad863c9"><div class="ttname"><a href="classmap.html#a0ecdaa7f32bcc5dbcb162ae76ad863c9">map::set_transparency_cache_dirty</a></div><div class="ttdeci">void set_transparency_cache_dirty(const int zlev)</div><div class="ttdoc">Sets a dirty flag on the a given cache.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00393">map.h:393</a></div></div>
<div class="ttc" id="aclassmap_html_a11dbf59db7e4322c15b4aab9dfef5a91"><div class="ttname"><a href="classmap.html#a11dbf59db7e4322c15b4aab9dfef5a91">map::get_neighbors</a></div><div class="ttdeci">std::array&lt; std::pair&lt; tripoint, maptile &gt;, 8 &gt; get_neighbors(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map__field_8cpp_source.html#l00190">map_field.cpp:190</a></div></div>
<div class="ttc" id="aclassmap_html_a11febee9ceafc538b720ee0d30d995d8"><div class="ttname"><a href="classmap.html#a11febee9ceafc538b720ee0d30d995d8">map::propagate_field</a></div><div class="ttdeci">void propagate_field(const tripoint &amp;center, const field_type_id &amp;type, int amount, int max_intensity=0)</div><div class="ttdef"><b>Definition:</b> <a href="map__field_8cpp_source.html#l01937">map_field.cpp:1937</a></div></div>
<div class="ttc" id="aclassmap_html_a150f1b826e0e2722ccf76dbdac136ffd"><div class="ttname"><a href="classmap.html#a150f1b826e0e2722ccf76dbdac136ffd">map::emit_field</a></div><div class="ttdeci">void emit_field(const tripoint &amp;pos, const emit_id &amp;src, float mul=1.0f)</div><div class="ttdoc">Runs one cycle of emission src which may result in propagation of fields.</div><div class="ttdef"><b>Definition:</b> <a href="map__field_8cpp_source.html#l01924">map_field.cpp:1924</a></div></div>
<div class="ttc" id="aclassmap_html_a2583b85e82d40e942e950351c1670deb"><div class="ttname"><a href="classmap.html#a2583b85e82d40e942e950351c1670deb">map::get_wind_blockers</a></div><div class="ttdeci">std::tuple&lt; maptile, maptile, maptile &gt; get_wind_blockers(const int &amp;winddirection, const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="map__field_8cpp_source.html#l01890">map_field.cpp:1890</a></div></div>
<div class="ttc" id="aclassmap_html_a267286ed64b9685c23cf335b2bd225bb"><div class="ttname"><a href="classmap.html#a267286ed64b9685c23cf335b2bd225bb">map::maptile_at</a></div><div class="ttdeci">maptile maptile_at(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00196">map.cpp:196</a></div></div>
<div class="ttc" id="aclassmap_html_a27e22f0999ea03eff18babc48643c568"><div class="ttname"><a href="classmap.html#a27e22f0999ea03eff18babc48643c568">map::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02304">map.cpp:2304</a></div></div>
<div class="ttc" id="aclassmap_html_a2c2523e489f73c84e7a77a138e60ba25"><div class="ttname"><a href="classmap.html#a2c2523e489f73c84e7a77a138e60ba25">map::get_cache</a></div><div class="ttdeci">level_cache &amp; get_cache(int zlev) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l01999">map.h:1999</a></div></div>
<div class="ttc" id="aclassmap_html_a30cfefdb115c16c5e1af6cc99f94bbbd"><div class="ttname"><a href="classmap.html#a30cfefdb115c16c5e1af6cc99f94bbbd">map::get_field</a></div><div class="ttdeci">field_entry * get_field(const tripoint &amp;p, const field_type_id &amp;type)</div><div class="ttdoc">Get field of specific type at point.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05383">map.cpp:5383</a></div></div>
<div class="ttc" id="aclassmap_html_a3188771064ca49d4798c6a80bfad0fcd"><div class="ttname"><a href="classmap.html#a3188771064ca49d4798c6a80bfad0fcd">map::valid_move</a></div><div class="ttdeci">bool valid_move(const tripoint &amp;from, const tripoint &amp;to, bool bash=false, bool flying=false, bool via_ramp=false) const</div><div class="ttdoc">Returns true if a creature could walk from from to to in one step.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01872">map.cpp:1872</a></div></div>
<div class="ttc" id="aclassmap_html_a32a9de57ddea3145ca42e6acfde7f3d6"><div class="ttname"><a href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">map::add_field</a></div><div class="ttdeci">bool add_field(const tripoint &amp;p, const field_type_id &amp;type_id, int intensity=INT_MAX, const time_duration &amp;age=0_turns, bool hit_player=true)</div><div class="ttdoc">Add field entry at point, or set intensity if present.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05406">map.cpp:5406</a></div></div>
<div class="ttc" id="aclassmap_html_a34f983a946812fa51de439bd68f6dc09"><div class="ttname"><a href="classmap.html#a34f983a946812fa51de439bd68f6dc09">map::get_field_intensity</a></div><div class="ttdeci">int get_field_intensity(const tripoint &amp;p, const field_type_id &amp;type) const</div><div class="ttdoc">Get the intensity of a field entry (field_entry::intensity), if there is no field of that type,...</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05377">map.cpp:5377</a></div></div>
<div class="ttc" id="aclassmap_html_a395a729a4b954692cf08d13e1d32f73e"><div class="ttname"><a href="classmap.html#a395a729a4b954692cf08d13e1d32f73e">map::field_at</a></div><div class="ttdeci">const field &amp; field_at(const tripoint &amp;p) const</div><div class="ttdoc">Get the fields that are here.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05297">map.cpp:5297</a></div></div>
<div class="ttc" id="aclassmap_html_a3bc75c8b706a54c1575b4460b2f363b1"><div class="ttname"><a href="classmap.html#a3bc75c8b706a54c1575b4460b2f363b1">map::is_outside</a></div><div class="ttdeci">bool is_outside(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02572">map.cpp:2572</a></div></div>
<div class="ttc" id="aclassmap_html_a4648afd5a1ecdebba3dc5c5068363f8e"><div class="ttname"><a href="classmap.html#a4648afd5a1ecdebba3dc5c5068363f8e">map::spawn_items</a></div><div class="ttdeci">std::vector&lt; item * &gt; spawn_items(const tripoint &amp;p, const std::vector&lt; item &gt; &amp;new_items)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04156">map.cpp:4156</a></div></div>
<div class="ttc" id="aclassmap_html_a46a11e492059459bbf26ba0f44ad951a"><div class="ttname"><a href="classmap.html#a46a11e492059459bbf26ba0f44ad951a">map::create_hot_air</a></div><div class="ttdeci">void create_hot_air(const tripoint &amp;p, int intensity)</div><div class="ttdef"><b>Definition:</b> <a href="map__field_8cpp_source.html#l00361">map_field.cpp:361</a></div></div>
<div class="ttc" id="aclassmap_html_a49630763b899657bfa7c10586df7d360"><div class="ttname"><a href="classmap.html#a49630763b899657bfa7c10586df7d360">map::clear_path</a></div><div class="ttdeci">bool clear_path(const tripoint &amp;f, const tripoint &amp;t, int range, int cost_min, int cost_max) const</div><div class="ttdoc">Check whether there's a direct line of sight between F and T with the additional movecost restraints.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06380">map.cpp:6380</a></div></div>
<div class="ttc" id="aclassmap_html_a4f5f812d7e89a998429958573a4c340f"><div class="ttname"><a href="classmap.html#a4f5f812d7e89a998429958573a4c340f">map::points_in_radius</a></div><div class="ttdeci">tripoint_range&lt; tripoint &gt; points_in_radius(const tripoint &amp;center, size_t radius, size_t radiusz=0) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l08396">map.cpp:8396</a></div></div>
<div class="ttc" id="aclassmap_html_a501f3a1d449ac022f1b36b99da653e94"><div class="ttname"><a href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">map::getabs</a></div><div class="ttdeci">tripoint getabs(const tripoint &amp;p) const</div><div class="ttdoc">Translates local (to this map) coordinates of a square to global absolute coordinates.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l08048">map.cpp:8048</a></div></div>
<div class="ttc" id="aclassmap_html_a5130a127601b67e569eaef37a1a88610"><div class="ttname"><a href="classmap.html#a5130a127601b67e569eaef37a1a88610">map::i_at</a></div><div class="ttdeci">map_stack i_at(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04083">map.cpp:4083</a></div></div>
<div class="ttc" id="aclassmap_html_a535690d28a08b8397a7a002c5c4c74af"><div class="ttname"><a href="classmap.html#a535690d28a08b8397a7a002c5c4c74af">map::spread_gas</a></div><div class="ttdeci">void spread_gas(field_entry &amp;cur, const tripoint &amp;p, int percent_spread, const time_duration &amp;outdoor_age_speedup, scent_block &amp;sblk)</div><div class="ttdef"><b>Definition:</b> <a href="map__field_8cpp_source.html#l00249">map_field.cpp:249</a></div></div>
<div class="ttc" id="aclassmap_html_a5413e71e313df95a11e09d279c5605da"><div class="ttname"><a href="classmap.html#a5413e71e313df95a11e09d279c5605da">map::abs_sub</a></div><div class="ttdeci">tripoint abs_sub</div><div class="ttdoc">Absolute coordinates of first submap (get_submap_at(0,0)) This is in submap coordinates (see overmapb...</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l01807">map.h:1807</a></div></div>
<div class="ttc" id="aclassmap_html_a5579e13088b4ccd9c5a75458919d528a"><div class="ttname"><a href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">map::add_item_or_charges</a></div><div class="ttdeci">item &amp; add_item_or_charges(const tripoint &amp;pos, item obj, bool overflow=true)</div><div class="ttdoc">Adds an item to map tile or stacks charges.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04228">map.cpp:4228</a></div></div>
<div class="ttc" id="aclassmap_html_a68b51d9820bb941312ffa9d7757e31bc"><div class="ttname"><a href="classmap.html#a68b51d9820bb941312ffa9d7757e31bc">map::player_in_field</a></div><div class="ttdeci">void player_in_field(player &amp;u)</div><div class="ttdef"><b>Definition:</b> <a href="map__field_8cpp_source.html#l01220">map_field.cpp:1220</a></div></div>
<div class="ttc" id="aclassmap_html_a75c60b0b73d8b492df608a2a4b824784"><div class="ttname"><a href="classmap.html#a75c60b0b73d8b492df608a2a4b824784">map::ter_set</a></div><div class="ttdeci">bool ter_set(const tripoint &amp;p, const ter_id &amp;new_terrain)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01650">map.cpp:1650</a></div></div>
<div class="ttc" id="aclassmap_html_a780bfbdc19649391081c1ad6e0e4aa81"><div class="ttname"><a href="classmap.html#a780bfbdc19649391081c1ad6e0e4aa81">map::creature_in_field</a></div><div class="ttdeci">void creature_in_field(Creature &amp;critter)</div><div class="ttdoc">Apply field effects to the creature when it's on a square with fields.</div><div class="ttdef"><b>Definition:</b> <a href="map__field_8cpp_source.html#l01559">map_field.cpp:1559</a></div></div>
<div class="ttc" id="aclassmap_html_a7997e4febecb36a59b48b06649dc9173"><div class="ttname"><a href="classmap.html#a7997e4febecb36a59b48b06649dc9173">map::my_MAPSIZE</a></div><div class="ttdeci">int my_MAPSIZE</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l01796">map.h:1796</a></div></div>
<div class="ttc" id="aclassmap_html_a802cc11379d4be61f4e2b13a50f6390e"><div class="ttname"><a href="classmap.html#a802cc11379d4be61f4e2b13a50f6390e">map::impassable</a></div><div class="ttdeci">bool impassable(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01806">map.cpp:1806</a></div></div>
<div class="ttc" id="aclassmap_html_a87a151868377cb4b2843de06991c97da"><div class="ttname"><a href="classmap.html#a87a151868377cb4b2843de06991c97da">map::zlevels</a></div><div class="ttdeci">bool zlevels</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l01797">map.h:1797</a></div></div>
<div class="ttc" id="aclassmap_html_a8f928a118aa01688ea55482dcefc3dde"><div class="ttname"><a href="classmap.html#a8f928a118aa01688ea55482dcefc3dde">map::monster_in_field</a></div><div class="ttdeci">void monster_in_field(monster &amp;z)</div><div class="ttdef"><b>Definition:</b> <a href="map__field_8cpp_source.html#l01628">map_field.cpp:1628</a></div></div>
<div class="ttc" id="aclassmap_html_a91bb6418064c2a4c142e9410c3c661ef"><div class="ttname"><a href="classmap.html#a91bb6418064c2a4c142e9410c3c661ef">map::maptile_has_bounds</a></div><div class="ttdeci">std::pair&lt; tripoint, maptile &gt; maptile_has_bounds(const tripoint &amp;p, bool bounds_checked)</div><div class="ttdef"><b>Definition:</b> <a href="map__field_8cpp_source.html#l00180">map_field.cpp:180</a></div></div>
<div class="ttc" id="aclassmap_html_a9ada8bea4712648bcb27d0cd32f63c6a"><div class="ttname"><a href="classmap.html#a9ada8bea4712648bcb27d0cd32f63c6a">map::create_burnproducts</a></div><div class="ttdeci">void create_burnproducts(const tripoint &amp;p, const item &amp;fuel, const units::mass &amp;burned_mass)</div><div class="ttdef"><b>Definition:</b> <a href="map__field_8cpp_source.html#l00096">map_field.cpp:96</a></div></div>
<div class="ttc" id="aclassmap_html_aa0d14cd7febb068abb69390c7bde9156"><div class="ttname"><a href="classmap.html#aa0d14cd7febb068abb69390c7bde9156">map::process_fields</a></div><div class="ttdeci">void process_fields()</div><div class="ttdef"><b>Definition:</b> <a href="map__field_8cpp_source.html#l00141">map_field.cpp:141</a></div></div>
<div class="ttc" id="aclassmap_html_aa487d96256c3d35db7a1bf273156b64a"><div class="ttname"><a href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">map::veh_at</a></div><div class="ttdeci">optional_vpart_position veh_at(const tripoint &amp;p) const</div><div class="ttdoc">Checks if tile is occupied by vehicle and by which part.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00988">map.cpp:988</a></div></div>
<div class="ttc" id="aclassmap_html_aa7959ae0022b6910c744d14d8cc218ed"><div class="ttname"><a href="classmap.html#aa7959ae0022b6910c744d14d8cc218ed">map::gas_spread_to</a></div><div class="ttdeci">void gas_spread_to(field_entry &amp;cur, maptile &amp;dst, const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map__field_8cpp_source.html#l00223">map_field.cpp:223</a></div></div>
<div class="ttc" id="aclassmap_html_aa926674ebd4c5600b1994a73cd492fae"><div class="ttname"><a href="classmap.html#aa926674ebd4c5600b1994a73cd492fae">map::process_fields_in_submap</a></div><div class="ttdeci">void process_fields_in_submap(submap *current_submap, const tripoint &amp;submap_pos)</div><div class="ttdef"><b>Definition:</b> <a href="map__field_8cpp_source.html#l00394">map_field.cpp:394</a></div></div>
<div class="ttc" id="aclassmap_html_ab1a08686c7d7b52636e0362ac4a0847f"><div class="ttname"><a href="classmap.html#ab1a08686c7d7b52636e0362ac4a0847f">map::flammable_items_at</a></div><div class="ttdeci">bool flammable_items_at(const tripoint &amp;p, int threshold=0)</div><div class="ttdoc">Checks if there are any flammable items on the tile.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02634">map.cpp:2634</a></div></div>
<div class="ttc" id="aclassmap_html_ab42c106bfff9e18e1767421be6e9e72c"><div class="ttname"><a href="classmap.html#ab42c106bfff9e18e1767421be6e9e72c">map::burn_body_part</a></div><div class="ttdeci">int burn_body_part(player &amp;u, field_entry &amp;cur, body_part bp, int scale)</div><div class="ttdef"><b>Definition:</b> <a href="map__field_8cpp_source.html#l00124">map_field.cpp:124</a></div></div>
<div class="ttc" id="aclassmap_html_ab822562ab4d1069ff53486f67098d0da"><div class="ttname"><a href="classmap.html#ab822562ab4d1069ff53486f67098d0da">map::veh_at_internal</a></div><div class="ttdeci">vehicle * veh_at_internal(const tripoint &amp;p, int &amp;part_num)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01023">map.cpp:1023</a></div></div>
<div class="ttc" id="aclassmap_html_aba8f330c2cc25be0652489b42d8dd530"><div class="ttname"><a href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">map::ter</a></div><div class="ttdeci">ter_id ter(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01509">map.cpp:1509</a></div></div>
<div class="ttc" id="aclassmap_html_abf6455d82007aa379f4de85aea2f923f"><div class="ttname"><a href="classmap.html#abf6455d82007aa379f4de85aea2f923f">map::furn_set</a></div><div class="ttdeci">void furn_set(const tripoint &amp;p, const furn_id &amp;new_furniture, cata::poly_serialized&lt; active_tile_data &gt; new_active=nullptr)</div><div class="ttdoc">Sets the furniture at given position.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01371">map.cpp:1371</a></div></div>
<div class="ttc" id="aclassmap_html_abfe32fc67ef91fe15105c31b5ef884ab"><div class="ttname"><a href="classmap.html#abfe32fc67ef91fe15105c31b5ef884ab">map::set_seen_cache_dirty</a></div><div class="ttdeci">void set_seen_cache_dirty(const tripoint change_location)</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00409">map.h:409</a></div></div>
<div class="ttc" id="aclassmap_html_ac5d9bf2b01f243d3983c2054f75b1101"><div class="ttname"><a href="classmap.html#ac5d9bf2b01f243d3983c2054f75b1101">map::get_submap_at_grid</a></div><div class="ttdeci">submap * get_submap_at_grid(const point &amp;gridp) const</div><div class="ttdoc">Get submap pointer in the grid at given grid coordinates.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l01842">map.h:1842</a></div></div>
<div class="ttc" id="aclassmap_html_ace2f169fced91ed2daf1f3ab1fb0d0cf"><div class="ttname"><a href="classmap.html#ace2f169fced91ed2daf1f3ab1fb0d0cf">map::mod_field_intensity</a></div><div class="ttdeci">int mod_field_intensity(const tripoint &amp;p, const field_type_id &amp;type, int offset)</div><div class="ttdoc">Increment/decrement intensity of field entry at point, creating if not present, removing if intensity...</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05332">map.cpp:5332</a></div></div>
<div class="ttc" id="aclassmap_html_acfe43259087397daac52876165a3120c"><div class="ttname"><a href="classmap.html#acfe43259087397daac52876165a3120c">map::spawn_item</a></div><div class="ttdeci">void spawn_item(const tripoint &amp;p, const itype_id &amp;type_id, unsigned quantity=1, int charges=0, const time_point &amp;birthday=calendar::start_of_cataclysm, int damlevel=0)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04187">map.cpp:4187</a></div></div>
<div class="ttc" id="aclassmap_html_adab57612922364ffdb667c306f5a622c"><div class="ttname"><a href="classmap.html#adab57612922364ffdb667c306f5a622c">map::add_spawn</a></div><div class="ttdeci">void add_spawn(const mtype_id &amp;type, int count, const tripoint &amp;p, bool friendly=false, int faction_id=-1, int mission_id=-1, const std::string &amp;name=&quot;NONE&quot;) const</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l05578">mapgen.cpp:5578</a></div></div>
<div class="ttc" id="aclassmap_html_aef5205f2179c538caf9901871d434462"><div class="ttname"><a href="classmap.html#aef5205f2179c538caf9901871d434462">map::maptile_at_internal</a></div><div class="ttdeci">maptile maptile_at_internal(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00214">map.cpp:214</a></div></div>
<div class="ttc" id="aclassmap_html_af4227f2341fcd97f9dab44741bdb0a84"><div class="ttname"><a href="classmap.html#af4227f2341fcd97f9dab44741bdb0a84">map::gas_can_spread_to</a></div><div class="ttdeci">bool gas_can_spread_to(field_entry &amp;cur, const maptile &amp;dst)</div><div class="ttdef"><b>Definition:</b> <a href="map__field_8cpp_source.html#l00211">map_field.cpp:211</a></div></div>
<div class="ttc" id="aclassmap_html_af563dc2397e71a053569cb45c6bb7e77"><div class="ttname"><a href="classmap.html#af563dc2397e71a053569cb45c6bb7e77">map::passable</a></div><div class="ttdeci">bool passable(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01811">map.cpp:1811</a></div></div>
<div class="ttc" id="aclassmonster_html"><div class="ttname"><a href="classmonster.html">monster</a></div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00083">monster.h:84</a></div></div>
<div class="ttc" id="aclassmonster_html_a0315651e596e69f0626b30e081726596"><div class="ttname"><a href="classmonster.html#a0315651e596e69f0626b30e081726596">monster::has_flag</a></div><div class="ttdeci">bool has_flag(m_flag f) const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00869">monster.cpp:869</a></div></div>
<div class="ttc" id="aclassmonster_html_a22e929800e08d5458140ec4dbaad53a5"><div class="ttname"><a href="classmonster.html#a22e929800e08d5458140ec4dbaad53a5">monster::digs</a></div><div class="ttdeci">bool digs() const</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00911">monster.cpp:911</a></div></div>
<div class="ttc" id="aclassmonster_html_a4092c04058a74fa078c89763d11e53ee"><div class="ttname"><a href="classmonster.html#a4092c04058a74fa078c89763d11e53ee">monster::made_of_any</a></div><div class="ttdeci">bool made_of_any(const std::set&lt; material_id &gt; &amp;ms) const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00963">monster.cpp:963</a></div></div>
<div class="ttc" id="aclassmonster_html_a45462fba4c37679c66ecde2f9000c22c"><div class="ttname"><a href="classmonster.html#a45462fba4c37679c66ecde2f9000c22c">monster::add_effect</a></div><div class="ttdeci">void add_effect(const efftype_id &amp;eff_id, const time_duration &amp;dur, const bodypart_str_id &amp;bp, int intensity=0, bool force=false, bool deferred=false) override</div><div class="ttdoc">Performs any monster-specific modifications to the arguments before passing to Creature::add_effect()...</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l01807">monster.cpp:1807</a></div></div>
<div class="ttc" id="aclassmonster_html_a4fddab3f065220c8b7c015572a5de408"><div class="ttname"><a href="classmonster.html#a4fddab3f065220c8b7c015572a5de408">monster::make_fungus</a></div><div class="ttdeci">bool make_fungus()</div><div class="ttdoc">Makes this monster into a fungus version Returns false if no such monster exists Returns true if mons...</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l02599">monster.cpp:2599</a></div></div>
<div class="ttc" id="aclassmonster_html_a55d95177d49525c0da7649f135a6306d"><div class="ttname"><a href="classmonster.html#a55d95177d49525c0da7649f135a6306d">monster::pos</a></div><div class="ttdeci">const tripoint &amp; pos() const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00255">monster.cpp:255</a></div></div>
<div class="ttc" id="aclassmonster_html_a6e03e18c6ea5e5adb496634b2bbaea52"><div class="ttname"><a href="classmonster.html#a6e03e18c6ea5e5adb496634b2bbaea52">monster::made_of</a></div><div class="ttdeci">bool made_of(const material_id &amp;m) const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00958">monster.cpp:958</a></div></div>
<div class="ttc" id="aclassmonster_html_aa30f973bf524ba275ada847f6118b048"><div class="ttname"><a href="classmonster.html#aa30f973bf524ba275ada847f6118b048">monster::type</a></div><div class="ttdeci">const mtype * type</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00478">monster.h:478</a></div></div>
<div class="ttc" id="aclassmonster_html_ab4c072ceb9cfe95cccdcac5dd85127b8"><div class="ttname"><a href="classmonster.html#ab4c072ceb9cfe95cccdcac5dd85127b8">monster::get_armor_type</a></div><div class="ttdeci">int get_armor_type(damage_type dt, bodypart_id bp) const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l01868">monster.cpp:1868</a></div></div>
<div class="ttc" id="aclassmonster_html_aedaf54c4048d596420fae0d32bb1f586"><div class="ttname"><a href="classmonster.html#aedaf54c4048d596420fae0d32bb1f586">monster::flies</a></div><div class="ttdeci">bool flies() const</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00916">monster.cpp:916</a></div></div>
<div class="ttc" id="aclassmonster_html_af705eea6e40e12d7866010955602c7b5"><div class="ttname"><a href="classmonster.html#af705eea6e40e12d7866010955602c7b5">monster::digging</a></div><div class="ttdeci">bool digging() const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00901">monster.cpp:901</a></div></div>
<div class="ttc" id="aclassmonster_html_afc6e6f5443145732310dd4901a394b4f"><div class="ttname"><a href="classmonster.html#afc6e6f5443145732310dd4901a394b4f">monster::apply_damage</a></div><div class="ttdeci">void apply_damage(Creature *source, bodypart_id bp, int dam, bool bypass_med=false) override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l01636">monster.cpp:1636</a></div></div>
<div class="ttc" id="aclassnpc_html"><div class="ttname"><a href="classnpc.html">npc</a></div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l00780">npc.h:781</a></div></div>
<div class="ttc" id="aclassoptional__vpart__position_html"><div class="ttname"><a href="classoptional__vpart__position.html">optional_vpart_position</a></div><div class="ttdoc">Simple wrapper to forward functions that may return a cata::optional to vpart_position.</div><div class="ttdef"><b>Definition:</b> <a href="vpart__position_8h_source.html#l00101">vpart_position.h:102</a></div></div>
<div class="ttc" id="aclassovermapbuffer_html_aa9fbf966291f6b82de9c540262324aba"><div class="ttname"><a href="classovermapbuffer.html#aa9fbf966291f6b82de9c540262324aba">overmapbuffer::ter</a></div><div class="ttdeci">const oter_id &amp; ter(const tripoint_abs_omt &amp;p)</div><div class="ttdoc">Returns the overmap terrain at the given OMT coordinates.</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00649">overmapbuffer.cpp:649</a></div></div>
<div class="ttc" id="aclassplayer_html"><div class="ttname"><a href="classplayer.html">player</a></div><div class="ttdef"><b>Definition:</b> <a href="player_8h_source.html#l00098">player.h:99</a></div></div>
<div class="ttc" id="aclassplayer_html_a07108565639fa6fe5b6776b4e8674fb6"><div class="ttname"><a href="classplayer.html#a07108565639fa6fe5b6776b4e8674fb6">player::add_msg_player_or_npc</a></div><div class="ttdeci">void add_msg_player_or_npc(const std::string &amp;player_msg, const std::string &amp;npc_str) const override</div><div class="ttdef"><b>Definition:</b> <a href="player_8cpp_source.html#l04373">player.cpp:4373</a></div></div>
<div class="ttc" id="aclassplayer_html_a1304421e7a67d0046529f3bd9263ce42"><div class="ttname"><a href="classplayer.html#a1304421e7a67d0046529f3bd9263ce42">player::mod_pain</a></div><div class="ttdeci">void mod_pain(int npain) override</div><div class="ttdoc">Modifies a pain value by player traits before passing it to Creature::mod_pain()</div><div class="ttdef"><b>Definition:</b> <a href="player_8cpp_source.html#l01092">player.cpp:1092</a></div></div>
<div class="ttc" id="aclassplayer_html_ae7009d849f19a4f5ebe877cbe463c459"><div class="ttname"><a href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">player::add_msg_if_player</a></div><div class="ttdeci">void add_msg_if_player(const std::string &amp;msg) const override</div><div class="ttdef"><b>Definition:</b> <a href="player_8cpp_source.html#l04368">player.cpp:4368</a></div></div>
<div class="ttc" id="aclassplayer_html_af4d6390315e3c781edf8649c5ae59a33"><div class="ttname"><a href="classplayer.html#af4d6390315e3c781edf8649c5ae59a33">player::is_player</a></div><div class="ttdeci">bool is_player() const override</div><div class="ttdef"><b>Definition:</b> <a href="player_8h_source.html#l00114">player.h:114</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; itype &gt;</a></div></div>
<div class="ttc" id="aclassstring__id_html_a8ca0e76fa665125f1e50bd1ed8dbd213"><div class="ttname"><a href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">string_id::is_valid</a></div><div class="ttdeci">bool is_valid() const</div><div class="ttdoc">Returns whether this id is valid, that means whether it refers to an existing object.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00065">achievement.cpp:65</a></div></div>
<div class="ttc" id="aclassstring__id_html_aa3cde2bfb58efa9621289c0a70d24c5a"><div class="ttname"><a href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">string_id::id</a></div><div class="ttdeci">int_id&lt; T &gt; id() const</div><div class="ttdoc">Translate the string based it to the matching integer based id.</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00054">ammo_effect.cpp:54</a></div></div>
<div class="ttc" id="aclasssubmap_html"><div class="ttname"><a href="classsubmap.html">submap</a></div><div class="ttdef"><b>Definition:</b> <a href="submap_8h_source.html#l00064">submap.h:65</a></div></div>
<div class="ttc" id="aclasssubmap_html_aa86d0130ed1d1556482b2f7478633778"><div class="ttname"><a href="classsubmap.html#aa86d0130ed1d1556482b2f7478633778">submap::field_count</a></div><div class="ttdeci">int field_count</div><div class="ttdef"><b>Definition:</b> <a href="submap_8h_source.html#l00239">submap.h:239</a></div></div>
<div class="ttc" id="aclasssubmap_html_ab97d87719e926fc4f7c614196666cbcf"><div class="ttname"><a href="classsubmap.html#ab97d87719e926fc4f7c614196666cbcf">submap::get_field</a></div><div class="ttdeci">field &amp; get_field(const point &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="submap_8h_source.html#l00170">submap.h:170</a></div></div>
<div class="ttc" id="aclasstime__duration_html"><div class="ttname"><a href="classtime__duration.html">time_duration</a></div><div class="ttdoc">A duration defined as a number of specific time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00179">calendar.h:180</a></div></div>
<div class="ttc" id="aclasstime__duration_html_a0f7145f4fc4c09defbaf25f468e4e54a"><div class="ttname"><a href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a></div><div class="ttdeci">static constexpr time_duration from_turns(const T t)</div><div class="ttdoc">Named constructors to get a duration representing a multiple of the named time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00204">calendar.h:204</a></div></div>
<div class="ttc" id="aclassunits_1_1quantity_html"><div class="ttname"><a href="classunits_1_1quantity.html">units::quantity</a></div><div class="ttdef"><b>Definition:</b> <a href="units__def_8h_source.html#l00014">units_def.h:15</a></div></div>
<div class="ttc" id="aclassvehicle_html"><div class="ttname"><a href="classvehicle.html">vehicle</a></div><div class="ttdoc">A vehicle as a whole with all its components.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00674">vehicle.h:675</a></div></div>
<div class="ttc" id="aclassvehicle_html_a7d539c327a7a8cb987d637f68f918cdf"><div class="ttname"><a href="classvehicle.html#a7d539c327a7a8cb987d637f68f918cdf">vehicle::damage</a></div><div class="ttdeci">int damage(int p, int dmg, damage_type type=DT_BASH, bool aimed=true)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06173">vehicle.cpp:6173</a></div></div>
<div class="ttc" id="aclassweather__manager_html"><div class="ttname"><a href="classweather__manager.html">weather_manager</a></div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00177">weather.h:178</a></div></div>
<div class="ttc" id="acolony_8h_html"><div class="ttname"><a href="colony_8h.html">colony.h</a></div></div>
<div class="ttc" id="acoordinate__conversions_8cpp_html_a82aec5e351a3d6ef948536834dc1bbd0"><div class="ttname"><a href="coordinate__conversions_8cpp.html#a82aec5e351a3d6ef948536834dc1bbd0">ms_to_omt_copy</a></div><div class="ttdeci">point ms_to_omt_copy(const point &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="coordinate__conversions_8cpp_source.html#l00162">coordinate_conversions.cpp:162</a></div></div>
<div class="ttc" id="acoordinate__conversions_8h_html"><div class="ttname"><a href="coordinate__conversions_8h.html">coordinate_conversions.h</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a383a8345c0282c087ef788e4421c3ded"><div class="ttname"><a href="coordinates_8h.html#a383a8345c0282c087ef788e4421c3ded">tripoint_abs_omt</a></div><div class="ttdeci">coords::coord_point&lt; tripoint, coords::origin::abs, coords::omt &gt; tripoint_abs_omt</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00493">coordinates.h:493</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a47953b33a873caa0861b12222842a5ec"><div class="ttname"><a href="coordinates_8h.html#a47953b33a873caa0861b12222842a5ec">rl_dist</a></div><div class="ttdeci">int rl_dist(const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00519">coordinates.h:519</a></div></div>
<div class="ttc" id="acreature_8h_html"><div class="ttname"><a href="creature_8h.html">creature.h</a></div></div>
<div class="ttc" id="adamage_8h_html"><div class="ttname"><a href="damage_8h.html">damage.h</a></div></div>
<div class="ttc" id="adamage_8h_html_ae63a2cf8429f9edf77b547d34ffe4e7aa31df3b2996d2d10b2ca3e275899fdddb"><div class="ttname"><a href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa31df3b2996d2d10b2ca3e275899fdddb">DT_ELECTRIC</a></div><div class="ttdeci">@ DT_ELECTRIC</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00030">damage.h:30</a></div></div>
<div class="ttc" id="adamage_8h_html_ae63a2cf8429f9edf77b547d34ffe4e7aa5f8b46c6c239266403858fa2ae90ef23"><div class="ttname"><a href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa5f8b46c6c239266403858fa2ae90ef23">DT_BASH</a></div><div class="ttdeci">@ DT_BASH</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00024">damage.h:24</a></div></div>
<div class="ttc" id="adamage_8h_html_ae63a2cf8429f9edf77b547d34ffe4e7aa8fce673f2bfbb3fdb52be44a8e638c90"><div class="ttname"><a href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aa8fce673f2bfbb3fdb52be44a8e638c90">DT_ACID</a></div><div class="ttdeci">@ DT_ACID</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00026">damage.h:26</a></div></div>
<div class="ttc" id="adamage_8h_html_ae63a2cf8429f9edf77b547d34ffe4e7aae6af44cd6e0e8cafcc63cea198f627c9"><div class="ttname"><a href="damage_8h.html#ae63a2cf8429f9edf77b547d34ffe4e7aae6af44cd6e0e8cafcc63cea198f627c9">DT_HEAT</a></div><div class="ttdeci">@ DT_HEAT</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00028">damage.h:28</a></div></div>
<div class="ttc" id="adebug_8h_html"><div class="ttname"><a href="debug_8h.html">debug.h</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level DL::Error and class DC::DebugMsg, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00074">debug.h:74</a></div></div>
<div class="ttc" id="aeffect_8h_html"><div class="ttname"><a href="effect_8h.html">effect.h</a></div></div>
<div class="ttc" id="aemit_8h_html"><div class="ttname"><a href="emit_8h.html">emit.h</a></div></div>
<div class="ttc" id="aenums_8h_html"><div class="ttname"><a href="enums_8h.html">enums.h</a></div></div>
<div class="ttc" id="aenums_8h_html_a00763863874f01b868849b27ceee73c9ac6c4bfa285e112c6854a2d820f854e3b"><div class="ttname"><a href="enums_8h.html#a00763863874f01b868849b27ceee73c9ac6c4bfa285e112c6854a2d820f854e3b">center</a></div><div class="ttdeci">@ center</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00316">enums.h:316</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00254">enums.h:254</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a></div><div class="ttdeci">@ m_warning</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00257">enums.h:257</a></div></div>
<div class="ttc" id="aenums_8h_html_ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab"><div class="ttname"><a href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a></div><div class="ttdeci">@ type</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00075">enums.h:75</a></div></div>
<div class="ttc" id="aenums_8h_html_ade8f325e8cc8463cef8f944f3209d0e5a9584dc4fcb96c51dda36a881a6dbb212"><div class="ttname"><a href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a9584dc4fcb96c51dda36a881a6dbb212">GAS</a></div><div class="ttdeci">@ GAS</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00175">enums.h:175</a></div></div>
<div class="ttc" id="aenums_8h_html_ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce"><div class="ttname"><a href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a></div><div class="ttdeci">@ LIQUID</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00175">enums.h:175</a></div></div>
<div class="ttc" id="afield_8h_html"><div class="ttname"><a href="field_8h.html">field.h</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a06adfade9e4adf639c61c6dffcdb8a83"><div class="ttname"><a href="field__type_8cpp.html#a06adfade9e4adf639c61c6dffcdb8a83">fd_laser</a></div><div class="ttdeci">field_type_id fd_laser</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00359">field_type.cpp:359</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a0740150aaa065c46121ca6a8981a2fdd"><div class="ttname"><a href="field__type_8cpp.html#a0740150aaa065c46121ca6a8981a2fdd">fd_incendiary</a></div><div class="ttdeci">field_type_id fd_incendiary</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00372">field_type.cpp:372</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a08a964c087363a492316c8ef6096ab01"><div class="ttname"><a href="field__type_8cpp.html#a08a964c087363a492316c8ef6096ab01">fd_plasma</a></div><div class="ttdeci">field_type_id fd_plasma</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00358">field_type.cpp:358</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a0c312b322364fa8cc46b2b0efef9d28a"><div class="ttname"><a href="field__type_8cpp.html#a0c312b322364fa8cc46b2b0efef9d28a">fd_toxic_gas</a></div><div class="ttdeci">field_type_id fd_toxic_gas</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00347">field_type.cpp:347</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a261d438c14892c55153e1b615c548164"><div class="ttname"><a href="field__type_8cpp.html#a261d438c14892c55153e1b615c548164">fd_fire</a></div><div class="ttdeci">field_type_id fd_fire</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00345">field_type.cpp:345</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a27d0010fd6cf77c6f12b8b48ce06fa45"><div class="ttname"><a href="field__type_8cpp.html#a27d0010fd6cf77c6f12b8b48ce06fa45">fd_fire_vent</a></div><div class="ttdeci">field_type_id fd_fire_vent</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00351">field_type.cpp:351</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a476bfde4b1dbcb83067ee1c3639070b3"><div class="ttname"><a href="field__type_8cpp.html#a476bfde4b1dbcb83067ee1c3639070b3">fd_hot_air3</a></div><div class="ttdeci">field_type_id fd_hot_air3</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00381">field_type.cpp:381</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a4bad315aa1dfb35f303b391abd786ae3"><div class="ttname"><a href="field__type_8cpp.html#a4bad315aa1dfb35f303b391abd786ae3">fd_tear_gas</a></div><div class="ttdeci">field_type_id fd_tear_gas</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00348">field_type.cpp:348</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a4c4d93c13302c8e6c6d29ed8e6c07a4b"><div class="ttname"><a href="field__type_8cpp.html#a4c4d93c13302c8e6c6d29ed8e6c07a4b">fd_acid_vent</a></div><div class="ttdeci">field_type_id fd_acid_vent</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00357">field_type.cpp:357</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a4f650392cc90c9a28651f06974421485"><div class="ttname"><a href="field__type_8cpp.html#a4f650392cc90c9a28651f06974421485">fd_sludge</a></div><div class="ttdeci">field_type_id fd_sludge</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00344">field_type.cpp:344</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a50a270bd1c0284331c75930716ac4b79"><div class="ttname"><a href="field__type_8cpp.html#a50a270bd1c0284331c75930716ac4b79">fd_nuke_gas</a></div><div class="ttdeci">field_type_id fd_nuke_gas</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00349">field_type.cpp:349</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a5d5f15ed25822dd84422bced5beef691"><div class="ttname"><a href="field__type_8cpp.html#a5d5f15ed25822dd84422bced5beef691">fd_bees</a></div><div class="ttdeci">field_type_id fd_bees</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00371">field_type.cpp:371</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a67e1c2ea914225c5affdf6b847e61e26"><div class="ttname"><a href="field__type_8cpp.html#a67e1c2ea914225c5affdf6b847e61e26">fd_dazzling</a></div><div class="ttdeci">field_type_id fd_dazzling</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00361">field_type.cpp:361</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a67f782decc0eca9e8e55696dfa89d13b"><div class="ttname"><a href="field__type_8cpp.html#a67f782decc0eca9e8e55696dfa89d13b">fd_electricity</a></div><div class="ttdeci">field_type_id fd_electricity</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00353">field_type.cpp:353</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a68f6e17053fde556f8a2cfce44287997"><div class="ttname"><a href="field__type_8cpp.html#a68f6e17053fde556f8a2cfce44287997">fd_fungal_haze</a></div><div class="ttdeci">field_type_id fd_fungal_haze</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00374">field_type.cpp:374</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a6a31d100c09ce90e147a8a65bca88638"><div class="ttname"><a href="field__type_8cpp.html#a6a31d100c09ce90e147a8a65bca88638">fd_hot_air2</a></div><div class="ttdeci">field_type_id fd_hot_air2</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00380">field_type.cpp:380</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a742b7a3f2bec99838055a58c542ecddf"><div class="ttname"><a href="field__type_8cpp.html#a742b7a3f2bec99838055a58c542ecddf">fd_smoke</a></div><div class="ttdeci">field_type_id fd_smoke</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00346">field_type.cpp:346</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a7673af64e5ad5618009e2ec14dba3645"><div class="ttname"><a href="field__type_8cpp.html#a7673af64e5ad5618009e2ec14dba3645">fd_sap</a></div><div class="ttdeci">field_type_id fd_sap</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00343">field_type.cpp:343</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a77ab80c7588f25b4a8fe10072d7d6a97"><div class="ttname"><a href="field__type_8cpp.html#a77ab80c7588f25b4a8fe10072d7d6a97">fd_gas_vent</a></div><div class="ttdeci">field_type_id fd_gas_vent</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00350">field_type.cpp:350</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a8907873928bd3b4afeff6e852434ade6"><div class="ttname"><a href="field__type_8cpp.html#a8907873928bd3b4afeff6e852434ade6">fd_smoke_vent</a></div><div class="ttdeci">field_type_id fd_smoke_vent</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00385">field_type.cpp:385</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a8f63a8c3d9cdad5b9d6cd63fd3f3c4c5"><div class="ttname"><a href="field__type_8cpp.html#a8f63a8c3d9cdad5b9d6cd63fd3f3c4c5">fd_hot_air1</a></div><div class="ttdeci">field_type_id fd_hot_air1</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00379">field_type.cpp:379</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a94a7b189d5f6fd60b9f4aac2624560d7"><div class="ttname"><a href="field__type_8cpp.html#a94a7b189d5f6fd60b9f4aac2624560d7">fd_null</a></div><div class="ttdeci">field_type_id fd_null</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00335">field_type.cpp:335</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a9868dee0533f3cc11e389b49a6c4f636"><div class="ttname"><a href="field__type_8cpp.html#a9868dee0533f3cc11e389b49a6c4f636">fd_fungicidal_gas</a></div><div class="ttdeci">field_type_id fd_fungicidal_gas</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00383">field_type.cpp:383</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a9f3252ca58a824113fb194566f5b270f"><div class="ttname"><a href="field__type_8cpp.html#a9f3252ca58a824113fb194566f5b270f">fd_hot_air4</a></div><div class="ttdeci">field_type_id fd_hot_air4</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00382">field_type.cpp:382</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_ab5a3cae333e4fffb95702822ebf2c43e"><div class="ttname"><a href="field__type_8cpp.html#ab5a3cae333e4fffb95702822ebf2c43e">fd_push_items</a></div><div class="ttdeci">field_type_id fd_push_items</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00355">field_type.cpp:355</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_ab7a8a9cdb74831f6553f4abf5df22873"><div class="ttname"><a href="field__type_8cpp.html#ab7a8a9cdb74831f6553f4abf5df22873">fd_acid</a></div><div class="ttdeci">field_type_id fd_acid</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00342">field_type.cpp:342</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_ac0a79fdf7c7852adae6c208031850b36"><div class="ttname"><a href="field__type_8cpp.html#ac0a79fdf7c7852adae6c208031850b36">fd_flame_burst</a></div><div class="ttdeci">field_type_id fd_flame_burst</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00352">field_type.cpp:352</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_ad86d7b9ff1a8fb05d7481abd08d0c375"><div class="ttname"><a href="field__type_8cpp.html#ad86d7b9ff1a8fb05d7481abd08d0c375">fd_relax_gas</a></div><div class="ttdeci">field_type_id fd_relax_gas</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00373">field_type.cpp:373</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_ae1b475e49c929a1dab1575f541a11542"><div class="ttname"><a href="field__type_8cpp.html#ae1b475e49c929a1dab1575f541a11542">fd_fatigue</a></div><div class="ttdeci">field_type_id fd_fatigue</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00354">field_type.cpp:354</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_af68a10962d47adfdd285a27f7f500e23"><div class="ttname"><a href="field__type_8cpp.html#af68a10962d47adfdd285a27f7f500e23">fd_shock_vent</a></div><div class="ttdeci">field_type_id fd_shock_vent</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00356">field_type.cpp:356</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_afca1ca43633c0fc76d866752559218d4"><div class="ttname"><a href="field__type_8cpp.html#afca1ca43633c0fc76d866752559218d4">fd_web</a></div><div class="ttdeci">field_type_id fd_web</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00340">field_type.cpp:340</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_afefbe0ddb9ee9d0a0e2db8b4d89840bb"><div class="ttname"><a href="field__type_8cpp.html#afefbe0ddb9ee9d0a0e2db8b4d89840bb">fd_insecticidal_gas</a></div><div class="ttdeci">field_type_id fd_insecticidal_gas</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00384">field_type.cpp:384</a></div></div>
<div class="ttc" id="afield__type_8h_html"><div class="ttname"><a href="field__type_8h.html">field_type.h</a></div></div>
<div class="ttc" id="afire_8h_html"><div class="ttname"><a href="fire_8h.html">fire.h</a></div></div>
<div class="ttc" id="afungal__effects_8h_html"><div class="ttname"><a href="fungal__effects_8h.html">fungal_effects.h</a></div></div>
<div class="ttc" id="agame_8cpp_html_abeb98e93502d73818b4a73fabe191bc1"><div class="ttname"><a href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a></div><div class="ttdeci">std::unique_ptr&lt; game &gt; g</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00267">game.cpp:267</a></div></div>
<div class="ttc" id="agame_8h_html"><div class="ttname"><a href="game_8h.html">game.h</a></div></div>
<div class="ttc" id="agame__constants_8h_html"><div class="ttname"><a href="game__constants_8h.html">game_constants.h</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a3984a9476d1edc78e4e7b886a08d4d4b"><div class="ttname"><a href="game__constants_8h.html#a3984a9476d1edc78e4e7b886a08d4d4b">OVERMAP_HEIGHT</a></div><div class="ttdeci">static constexpr int OVERMAP_HEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00063">game_constants.h:63</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a39fd8a829e3dc412646663066dbdb54c"><div class="ttname"><a href="game__constants_8h.html#a39fd8a829e3dc412646663066dbdb54c">SEEX</a></div><div class="ttdeci">static constexpr int SEEX</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00036">game_constants.h:36</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a4cfa35de359af17f7bc6c2a424339eb5"><div class="ttname"><a href="game__constants_8h.html#a4cfa35de359af17f7bc6c2a424339eb5">SEEY</a></div><div class="ttdeci">static constexpr int SEEY</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00037">game_constants.h:37</a></div></div>
<div class="ttc" id="agame__constants_8h_html_aad0eacfa516a8f7e005674027d7640fe"><div class="ttname"><a href="game__constants_8h.html#aad0eacfa516a8f7e005674027d7640fe">OVERMAP_DEPTH</a></div><div class="ttdeci">static constexpr int OVERMAP_DEPTH</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00061">game_constants.h:61</a></div></div>
<div class="ttc" id="agame__constants_8h_html_ad277b12d7860c613865a85a2cc383c17"><div class="ttname"><a href="game__constants_8h.html#ad277b12d7860c613865a85a2cc383c17">MAPSIZE</a></div><div class="ttdeci">static constexpr int MAPSIZE</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00031">game_constants.h:31</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga23304505d04b612b77e4df5e9b64a1dd"><div class="ttname"><a href="group__Weather.html#ga23304505d04b612b77e4df5e9b64a1dd">get_local_windpower</a></div><div class="ttdeci">double get_local_windpower(double windpower, const oter_id &amp;omter, const tripoint &amp;location, const int &amp;winddirection, bool sheltered)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00938">weather.cpp:938</a></div></div>
<div class="ttc" id="agroup__Weather_html_gaa7b33196bf530c8b26654a0adf355165"><div class="ttname"><a href="group__Weather.html#gaa7b33196bf530c8b26654a0adf355165">get_weather</a></div><div class="ttdeci">weather_manager &amp; get_weather()</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00064">weather.cpp:64</a></div></div>
<div class="ttc" id="ahandle__action_8cpp_html_a18a5c5b03ba964c4d5d06e062510c99c"><div class="ttname"><a href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a></div><div class="ttdeci">static void open()</div><div class="ttdef"><b>Definition:</b> <a href="handle__action_8cpp_source.html#l00510">handle_action.cpp:510</a></div></div>
<div class="ttc" id="aint__id_8h_html"><div class="ttname"><a href="int__id_8h.html">int_id.h</a></div></div>
<div class="ttc" id="aitem_8h_html"><div class="ttname"><a href="item_8h.html">item.h</a></div></div>
<div class="ttc" id="aitem__contents_8h_html"><div class="ttname"><a href="item__contents_8h.html">item_contents.h</a></div></div>
<div class="ttc" id="aitype_8h_html"><div class="ttname"><a href="itype_8h.html">itype.h</a></div></div>
<div class="ttc" id="aline_8cpp_html_ad3bc8422edaedcbc2d6c471b1d3168fc"><div class="ttname"><a href="line_8cpp.html#ad3bc8422edaedcbc2d6c471b1d3168fc">squares_in_direction</a></div><div class="ttdeci">std::vector&lt; point &gt; squares_in_direction(const point &amp;p1, const point &amp;p2)</div><div class="ttdef"><b>Definition:</b> <a href="line_8cpp_source.html#l00588">line.cpp:588</a></div></div>
<div class="ttc" id="aline_8h_html"><div class="ttname"><a href="line_8h.html">line.h</a></div></div>
<div class="ttc" id="amap_8cpp_html_acb0b34be6e497bdd2f9f40ae6929d562"><div class="ttname"><a href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00141">map.cpp:141</a></div></div>
<div class="ttc" id="amap_8h_html"><div class="ttname"><a href="map_8h.html">map.h</a></div></div>
<div class="ttc" id="amap__field_8cpp_html_a039c3379527621f928cbc2e62686108c"><div class="ttname"><a href="map__field_8cpp.html#a039c3379527621f928cbc2e62686108c">trait_M_SKIN3</a></div><div class="ttdeci">static const trait_id trait_M_SKIN3(&quot;M_SKIN3&quot;)</div></div>
<div class="ttc" id="amap__field_8cpp_html_a08867676937d5a671005725465da2213"><div class="ttname"><a href="map__field_8cpp.html#a08867676937d5a671005725465da2213">flag_GAS_PROOF</a></div><div class="ttdeci">static const std::string flag_GAS_PROOF(&quot;GAS_PROOF&quot;)</div></div>
<div class="ttc" id="amap__field_8cpp_html_a08ed8f8240259a6a457502b0db459e08"><div class="ttname"><a href="map__field_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a></div><div class="ttdeci">static const efftype_id effect_fungus(&quot;fungus&quot;)</div></div>
<div class="ttc" id="amap__field_8cpp_html_a09e952ef4d27618e2f60ec737a8d1bae"><div class="ttname"><a href="map__field_8cpp.html#a09e952ef4d27618e2f60ec737a8d1bae">effect_blind</a></div><div class="ttdeci">static const efftype_id effect_blind(&quot;blind&quot;)</div></div>
<div class="ttc" id="amap__field_8cpp_html_a0b026348e0ab957138f7777d85fd1ebc"><div class="ttname"><a href="map__field_8cpp.html#a0b026348e0ab957138f7777d85fd1ebc">itype_rock</a></div><div class="ttdeci">static const itype_id itype_rock(&quot;rock&quot;)</div></div>
<div class="ttc" id="amap__field_8cpp_html_a0bfdd3a7d9e971128bba26c5a37b2292"><div class="ttname"><a href="map__field_8cpp.html#a0bfdd3a7d9e971128bba26c5a37b2292">trait_ELECTRORECEPTORS</a></div><div class="ttdeci">static const trait_id trait_ELECTRORECEPTORS(&quot;ELECTRORECEPTORS&quot;)</div></div>
<div class="ttc" id="amap__field_8cpp_html_a0d7873e243723a1ba7390f11e934f61f"><div class="ttname"><a href="map__field_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">trait_THRESH_MARLOSS</a></div><div class="ttdeci">static const trait_id trait_THRESH_MARLOSS(&quot;THRESH_MARLOSS&quot;)</div></div>
<div class="ttc" id="amap__field_8cpp_html_a0e02f772574a897b72bd8fc3c48e7f3d"><div class="ttname"><a href="map__field_8cpp.html#a0e02f772574a897b72bd8fc3c48e7f3d">trait_WEB_WALKER</a></div><div class="ttdeci">static const trait_id trait_WEB_WALKER(&quot;WEB_WALKER&quot;)</div></div>
<div class="ttc" id="amap__field_8cpp_html_a0f3a25eb2b398fd705348436a034da00"><div class="ttname"><a href="map__field_8cpp.html#a0f3a25eb2b398fd705348436a034da00">effect_badpoison</a></div><div class="ttdeci">static const efftype_id effect_badpoison(&quot;badpoison&quot;)</div></div>
<div class="ttc" id="amap__field_8cpp_html_a21ab92eb0bc71e62dbc4d95a9fd6eb70"><div class="ttname"><a href="map__field_8cpp.html#a21ab92eb0bc71e62dbc4d95a9fd6eb70">FUNGUS</a></div><div class="ttdeci">static const species_id FUNGUS(&quot;FUNGUS&quot;)</div></div>
<div class="ttc" id="amap__field_8cpp_html_a2e1ccdf5aa874eaaf8e3f14757d72179"><div class="ttname"><a href="map__field_8cpp.html#a2e1ccdf5aa874eaaf8e3f14757d72179">itype_rm13_armor_on</a></div><div class="ttdeci">static const itype_id itype_rm13_armor_on(&quot;rm13_armor_on&quot;)</div></div>
<div class="ttc" id="amap__field_8cpp_html_a308d750c2cc01d70d7622fdee14be3a5"><div class="ttname"><a href="map__field_8cpp.html#a308d750c2cc01d70d7622fdee14be3a5">trait_M_IMMUNE</a></div><div class="ttdeci">static const trait_id trait_M_IMMUNE(&quot;M_IMMUNE&quot;)</div></div>
<div class="ttc" id="amap__field_8cpp_html_a40331e22a139e13b3b70f387c9fdd390"><div class="ttname"><a href="map__field_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a></div><div class="ttdeci">static const trait_id trait_THRESH_MYCUS(&quot;THRESH_MYCUS&quot;)</div></div>
<div class="ttc" id="amap__field_8cpp_html_a489bb033f6a8cb9073ba12f2e4dd5d92"><div class="ttname"><a href="map__field_8cpp.html#a489bb033f6a8cb9073ba12f2e4dd5d92">effect_corroding</a></div><div class="ttdeci">static const efftype_id effect_corroding(&quot;corroding&quot;)</div></div>
<div class="ttc" id="amap__field_8cpp_html_a5fccb1c22e58777ef464ef0cbb372541"><div class="ttname"><a href="map__field_8cpp.html#a5fccb1c22e58777ef464ef0cbb372541">trait_ACIDPROOF</a></div><div class="ttdeci">static const trait_id trait_ACIDPROOF(&quot;ACIDPROOF&quot;)</div></div>
<div class="ttc" id="amap__field_8cpp_html_a644d3f52891b843ba69587dc6c6088d3"><div class="ttname"><a href="map__field_8cpp.html#a644d3f52891b843ba69587dc6c6088d3">trait_M_SKIN2</a></div><div class="ttdeci">static const trait_id trait_M_SKIN2(&quot;M_SKIN2&quot;)</div></div>
<div class="ttc" id="amap__field_8cpp_html_a8c7cbf21cfb7caaf9cc9d45150684d29"><div class="ttname"><a href="map__field_8cpp.html#a8c7cbf21cfb7caaf9cc9d45150684d29">INSECT</a></div><div class="ttdeci">static const species_id INSECT(&quot;INSECT&quot;)</div></div>
<div class="ttc" id="amap__field_8cpp_html_a8e21df750cb8c6b27ba9b240e11bc6db"><div class="ttname"><a href="map__field_8cpp.html#a8e21df750cb8c6b27ba9b240e11bc6db">effect_stung</a></div><div class="ttdeci">static const efftype_id effect_stung(&quot;stung&quot;)</div></div>
<div class="ttc" id="amap__field_8cpp_html_a9de296e6ced54bc59e40089f8821075c"><div class="ttname"><a href="map__field_8cpp.html#a9de296e6ced54bc59e40089f8821075c">ter_furn_has_flag</a></div><div class="ttdeci">bool ter_furn_has_flag(const ter_t &amp;ter, const furn_t &amp;furn, const ter_bitflags flag)</div><div class="ttdef"><b>Definition:</b> <a href="map__field_8cpp_source.html#l00161">map_field.cpp:161</a></div></div>
<div class="ttc" id="amap__field_8cpp_html_aa222d693ccc29efba86a3bb9f18add4e"><div class="ttname"><a href="map__field_8cpp.html#aa222d693ccc29efba86a3bb9f18add4e">effect_webbed</a></div><div class="ttdeci">static const efftype_id effect_webbed(&quot;webbed&quot;)</div></div>
<div class="ttc" id="amap__field_8cpp_html_aa8ab551e835b081c3eb82476d58ee809"><div class="ttname"><a href="map__field_8cpp.html#aa8ab551e835b081c3eb82476d58ee809">ter_furn_movecost</a></div><div class="ttdeci">static int ter_furn_movecost(const ter_t &amp;ter, const furn_t &amp;furn)</div><div class="ttdef"><b>Definition:</b> <a href="map__field_8cpp_source.html#l00166">map_field.cpp:166</a></div></div>
<div class="ttc" id="amap__field_8cpp_html_accd8645ba580d83d1de9951585810aac"><div class="ttname"><a href="map__field_8cpp.html#accd8645ba580d83d1de9951585810aac">check_flammable</a></div><div class="ttdeci">static bool check_flammable(const map_data_common_t &amp;t)</div><div class="ttdef"><b>Definition:</b> <a href="map__field_8cpp_source.html#l00352">map_field.cpp:352</a></div></div>
<div class="ttc" id="amap__field_8cpp_html_ace42425e1e703ebbe953ade0f6110b7c"><div class="ttname"><a href="map__field_8cpp.html#ace42425e1e703ebbe953ade0f6110b7c">effect_poison</a></div><div class="ttdeci">static const efftype_id effect_poison(&quot;poison&quot;)</div></div>
<div class="ttc" id="amap__field_8cpp_html_ad1df0ca2944a94c3ad796e8baada33ae"><div class="ttname"><a href="map__field_8cpp.html#ad1df0ca2944a94c3ad796e8baada33ae">effect_stunned</a></div><div class="ttdeci">static const efftype_id effect_stunned(&quot;stunned&quot;)</div></div>
<div class="ttc" id="amap__field_8cpp_html_ad37b6925aab6c082f9b6bbf00e6336aa"><div class="ttname"><a href="map__field_8cpp.html#ad37b6925aab6c082f9b6bbf00e6336aa">effect_teargas</a></div><div class="ttdeci">static const efftype_id effect_teargas(&quot;teargas&quot;)</div></div>
<div class="ttc" id="amap__field_8cpp_html_ae002e878ae18d5606ca01aeaa659a44c"><div class="ttname"><a href="map__field_8cpp.html#ae002e878ae18d5606ca01aeaa659a44c">flag_FUNGUS</a></div><div class="ttdeci">static const std::string flag_FUNGUS(&quot;FUNGUS&quot;)</div></div>
<div class="ttc" id="amap__field_8cpp_html_aeb98a85fd2ef390ce9f1bcfa09f4e1ac"><div class="ttname"><a href="map__field_8cpp.html#aeb98a85fd2ef390ce9f1bcfa09f4e1ac">SPIDER</a></div><div class="ttdeci">static const species_id SPIDER(&quot;SPIDER&quot;)</div></div>
<div class="ttc" id="amap__field_8cpp_html_af198a4e5b75aadbc020ee447fd31226b"><div class="ttname"><a href="map__field_8cpp.html#af198a4e5b75aadbc020ee447fd31226b">bio_heatsink</a></div><div class="ttdeci">static const bionic_id bio_heatsink(&quot;bio_heatsink&quot;)</div></div>
<div class="ttc" id="amap__field_8cpp_html_afcfa82c36c0dc2d76cd19d622c2b6ab4"><div class="ttname"><a href="map__field_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a></div><div class="ttdeci">static const efftype_id effect_onfire(&quot;onfire&quot;)</div></div>
<div class="ttc" id="amap__iterator_8h_html"><div class="ttname"><a href="map__iterator_8h.html">map_iterator.h</a></div></div>
<div class="ttc" id="amap__selector_8cpp_html_a995bfedf09618adec57011caf2463947"><div class="ttname"><a href="map__selector_8cpp.html#a995bfedf09618adec57011caf2463947">random_point</a></div><div class="ttdeci">cata::optional&lt; tripoint &gt; random_point(const map &amp;m, const std::function&lt; bool(const tripoint &amp;)&gt; &amp;predicate)</div><div class="ttdoc">Same as other random_point with a range enclosing all valid points of the map.</div><div class="ttdef"><b>Definition:</b> <a href="map__selector_8cpp_source.html#l00033">map_selector.cpp:33</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a231b1a6e4c654fd6584736e5397439c9"><div class="ttname"><a href="mapdata_8cpp.html#a231b1a6e4c654fd6584736e5397439c9">t_open_air</a></div><div class="ttdeci">ter_id t_open_air</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00727">mapdata.cpp:727</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a7c029a5a6e332f6c3c9db297c2e54e3f"><div class="ttname"><a href="mapdata_8cpp.html#a7c029a5a6e332f6c3c9db297c2e54e3f">f_ash</a></div><div class="ttdeci">furn_id f_ash</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l01097">mapdata.cpp:1097</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a98423a935af4b918d68f206e63f6cf7f"><div class="ttname"><a href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a></div><div class="ttdeci">furn_id f_null</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l01095">mapdata.cpp:1095</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_aa4573ce2c594834a8ced806a5099f3e3"><div class="ttname"><a href="mapdata_8cpp.html#aa4573ce2c594834a8ced806a5099f3e3">t_dirt</a></div><div class="ttdeci">ter_id t_dirt</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00625">mapdata.cpp:625</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_ae6822029506d9cb25c5077dfec866b86"><div class="ttname"><a href="mapdata_8cpp.html#ae6822029506d9cb25c5077dfec866b86">t_pit</a></div><div class="ttdeci">ter_id t_pit</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00625">mapdata.cpp:625</a></div></div>
<div class="ttc" id="amapdata_8h_html"><div class="ttname"><a href="mapdata_8h.html">mapdata.h</a></div></div>
<div class="ttc" id="amapdata_8h_html_aa04d037303ea30193f7cf0cd82304258"><div class="ttname"><a href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258">ter_bitflags</a></div><div class="ttdeci">ter_bitflags</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00275">mapdata.h:275</a></div></div>
<div class="ttc" id="amapdata_8h_html_aa04d037303ea30193f7cf0cd82304258a02eb9b88d6df624115f70728bda932a4"><div class="ttname"><a href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a02eb9b88d6df624115f70728bda932a4">TFLAG_ALLOW_FIELD_EFFECT</a></div><div class="ttdeci">@ TFLAG_ALLOW_FIELD_EFFECT</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00286">mapdata.h:286</a></div></div>
<div class="ttc" id="amapdata_8h_html_aa04d037303ea30193f7cf0cd82304258a17333b0108a536601f817c86278e77bd"><div class="ttname"><a href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a17333b0108a536601f817c86278e77bd">TFLAG_PERMEABLE</a></div><div class="ttdeci">@ TFLAG_PERMEABLE</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00304">mapdata.h:304</a></div></div>
<div class="ttc" id="amapdata_8h_html_aa04d037303ea30193f7cf0cd82304258a36b67adb6e7c521980de8a6688085d16"><div class="ttname"><a href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a36b67adb6e7c521980de8a6688085d16">TFLAG_SWIMMABLE</a></div><div class="ttdeci">@ TFLAG_SWIMMABLE</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00279">mapdata.h:279</a></div></div>
<div class="ttc" id="amapdata_8h_html_aa04d037303ea30193f7cf0cd82304258a3fd392fbd28bc7d8438d40c0b2c1054a"><div class="ttname"><a href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a3fd392fbd28bc7d8438d40c0b2c1054a">TFLAG_SEALED</a></div><div class="ttdeci">@ TFLAG_SEALED</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00285">mapdata.h:285</a></div></div>
<div class="ttc" id="amapdata_8h_html_aa04d037303ea30193f7cf0cd82304258a67a9abfd9f6e2c9bd1c299f5ef6279e5"><div class="ttname"><a href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a67a9abfd9f6e2c9bd1c299f5ef6279e5">TFLAG_FLAMMABLE_HARD</a></div><div class="ttdeci">@ TFLAG_FLAMMABLE_HARD</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00294">mapdata.h:294</a></div></div>
<div class="ttc" id="amapdata_8h_html_aa04d037303ea30193f7cf0cd82304258a7ae3043cdc343c2784d644bcafe86269"><div class="ttname"><a href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a7ae3043cdc343c2784d644bcafe86269">TFLAG_NO_FLOOR</a></div><div class="ttdeci">@ TFLAG_NO_FLOOR</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00310">mapdata.h:310</a></div></div>
<div class="ttc" id="amapdata_8h_html_aa04d037303ea30193f7cf0cd82304258a864d6ad5483bbf02eb5653e30b42edfd"><div class="ttname"><a href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a864d6ad5483bbf02eb5653e30b42edfd">TFLAG_FLAMMABLE</a></div><div class="ttdeci">@ TFLAG_FLAMMABLE</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00277">mapdata.h:277</a></div></div>
<div class="ttc" id="amapdata_8h_html_aa04d037303ea30193f7cf0cd82304258a9a5b42bf32cf92352e066de02b6858ad"><div class="ttname"><a href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258a9a5b42bf32cf92352e066de02b6858ad">TFLAG_FLAMMABLE_ASH</a></div><div class="ttdeci">@ TFLAG_FLAMMABLE_ASH</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00289">mapdata.h:289</a></div></div>
<div class="ttc" id="amapdata_8h_html_aa04d037303ea30193f7cf0cd82304258accfec381626070e2f0131404e1e964c7"><div class="ttname"><a href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258accfec381626070e2f0131404e1e964c7">TFLAG_FIRE_CONTAINER</a></div><div class="ttdeci">@ TFLAG_FIRE_CONTAINER</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00293">mapdata.h:293</a></div></div>
<div class="ttc" id="amaterial_8h_html"><div class="ttname"><a href="material_8h.html">material.h</a></div></div>
<div class="ttc" id="amessages_8cpp_html_a54489326fc37823819c5105addfa27f2"><div class="ttname"><a href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a></div><div class="ttdeci">void add_msg(std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l00884">messages.cpp:884</a></div></div>
<div class="ttc" id="amessages_8h_html"><div class="ttname"><a href="messages_8h.html">messages.h</a></div></div>
<div class="ttc" id="amongroup_8h_html"><div class="ttname"><a href="mongroup_8h.html">mongroup.h</a></div></div>
<div class="ttc" id="amonster_8h_html"><div class="ttname"><a href="monster_8h.html">monster.h</a></div></div>
<div class="ttc" id="amtype_8h_html"><div class="ttname"><a href="mtype_8h.html">mtype.h</a></div></div>
<div class="ttc" id="amtype_8h_html_afa4c966d04d2ddb261a7cde725eca842a1a9d43dc1ddecbc20beecf1760789d85"><div class="ttname"><a href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a1a9d43dc1ddecbc20beecf1760789d85">MF_SEES</a></div><div class="ttdeci">@ MF_SEES</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00067">mtype.h:67</a></div></div>
<div class="ttc" id="amtype_8h_html_afa4c966d04d2ddb261a7cde725eca842a25c8b8c05cc048947f1593ce74755ae2"><div class="ttname"><a href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a25c8b8c05cc048947f1593ce74755ae2">MF_FIREY</a></div><div class="ttdeci">@ MF_FIREY</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00103">mtype.h:103</a></div></div>
<div class="ttc" id="amtype_8h_html_afa4c966d04d2ddb261a7cde725eca842a5802616095163946b93de29c858419af"><div class="ttname"><a href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a5802616095163946b93de29c858419af">MF_WEBWALK</a></div><div class="ttdeci">@ MF_WEBWALK</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00085">mtype.h:85</a></div></div>
<div class="ttc" id="amtype_8h_html_afa4c966d04d2ddb261a7cde725eca842a8dc170679ef70e968144f8da4e15b34d"><div class="ttname"><a href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a8dc170679ef70e968144f8da4e15b34d">MF_FIREPROOF</a></div><div class="ttdeci">@ MF_FIREPROOF</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00099">mtype.h:99</a></div></div>
<div class="ttc" id="amtype_8h_html_afa4c966d04d2ddb261a7cde725eca842a8f3acb810268f88df5738a0bffd7fb94"><div class="ttname"><a href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842a8f3acb810268f88df5738a0bffd7fb94">MF_SLUDGEPROOF</a></div><div class="ttdeci">@ MF_SLUDGEPROOF</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00100">mtype.h:100</a></div></div>
<div class="ttc" id="amtype_8h_html_afa4c966d04d2ddb261a7cde725eca842ab2f11b921b9bcafe2af1ddea398ffb4f"><div class="ttname"><a href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842ab2f11b921b9bcafe2af1ddea398ffb4f">MF_ELECTRONIC</a></div><div class="ttdeci">@ MF_ELECTRONIC</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00105">mtype.h:105</a></div></div>
<div class="ttc" id="amtype_8h_html_afa4c966d04d2ddb261a7cde725eca842af4b448ccc2906ee0277113805bd8ae06"><div class="ttname"><a href="mtype_8h.html#afa4c966d04d2ddb261a7cde725eca842af4b448ccc2906ee0277113805bd8ae06">MF_NO_BREATHE</a></div><div class="ttdeci">@ MF_NO_BREATHE</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00123">mtype.h:123</a></div></div>
<div class="ttc" id="amutation_8h_html_a034ae5e964e0a02c1de845df8b031755aff9a344674366cee6d23a1e3bda6c176"><div class="ttname"><a href="mutation_8h.html#a034ae5e964e0a02c1de845df8b031755aff9a344674366cee6d23a1e3bda6c176">mutagen_rejection::destroyed</a></div><div class="ttdeci">@ destroyed</div></div>
<div class="ttc" id="anamespacebase__camps_html_a04fa69b1c0952a34dc4a7d26b3f9f786"><div class="ttname"><a href="namespacebase__camps.html#a04fa69b1c0952a34dc4a7d26b3f9f786">base_camps::id</a></div><div class="ttdeci">const std::string id</div><div class="ttdef"><b>Definition:</b> <a href="basecamp_8h_source.html#l00087">basecamp.h:87</a></div></div>
<div class="ttc" id="anamespacecalendar_html_a356df28513f4d655ae35c312ab6e7d55"><div class="ttname"><a href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a></div><div class="ttdeci">bool once_every(const time_duration &amp;event_frequency)</div><div class="ttdoc">Predicate to handle rate-limiting.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00490">calendar.cpp:490</a></div></div>
<div class="ttc" id="anamespacecalendar_html_ae15fcbf1c971589eb49c1a657fb6a580"><div class="ttname"><a href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a></div><div class="ttdeci">time_point turn</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00036">calendar.cpp:36</a></div></div>
<div class="ttc" id="anamespacecoords_html_aefed5186be640da17dc0e723c536715a"><div class="ttname"><a href="namespacecoords.html#aefed5186be640da17dc0e723c536715a">coords::scale</a></div><div class="ttdeci">scale</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00021">coordinates.h:21</a></div></div>
<div class="ttc" id="anamespacedetail_html_ab2f84fb3de26acdac3fc63a2dce5ea5e"><div class="ttname"><a href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">detail::count</a></div><div class="ttdeci">constexpr size_t count()</div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__core_8h_source.html#l01073">fmtlib_core.h:1073</a></div></div>
<div class="ttc" id="anamespacemattack_html_acdda0be7e7c8dabb76e9bd130547a3fa"><div class="ttname"><a href="namespacemattack.html#acdda0be7e7c8dabb76e9bd130547a3fa">mattack::acid</a></div><div class="ttdeci">bool acid(monster *z)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l00581">monattack.cpp:581</a></div></div>
<div class="ttc" id="anamespaceteleport_html_a24cbf298b41e9fc23770c73d32e33a47"><div class="ttname"><a href="namespaceteleport.html#a24cbf298b41e9fc23770c73d32e33a47">teleport::teleport</a></div><div class="ttdeci">bool teleport(Creature &amp;critter, int min_distance=2, int max_distance=12, bool safe=false, bool add_teleglow=true)</div><div class="ttdoc">Teleports a creature to a tile within min_distance and max_distance tiles.</div><div class="ttdef"><b>Definition:</b> <a href="teleport_8cpp_source.html#l00024">teleport.cpp:24</a></div></div>
<div class="ttc" id="anamespaceweather_html"><div class="ttname"><a href="namespaceweather.html">weather</a></div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l01150">weather.cpp:1151</a></div></div>
<div class="ttc" id="anpc_8h_html"><div class="ttname"><a href="npc_8h.html">npc.h</a></div></div>
<div class="ttc" id="aoptional_8h_html"><div class="ttname"><a href="optional_8h.html">optional.h</a></div></div>
<div class="ttc" id="aovermapbuffer_8cpp_html_ab3cf8344ec3e473f9ce96a33dc3425af"><div class="ttname"><a href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a></div><div class="ttdeci">overmapbuffer overmap_buffer</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00046">overmapbuffer.cpp:44</a></div></div>
<div class="ttc" id="aovermapbuffer_8h_html"><div class="ttname"><a href="overmapbuffer_8h.html">overmapbuffer.h</a></div></div>
<div class="ttc" id="aplayer_8h_html"><div class="ttname"><a href="player_8h.html">player.h</a></div></div>
<div class="ttc" id="apldata_8h_html"><div class="ttname"><a href="pldata_8h.html">pldata.h</a></div></div>
<div class="ttc" id="apldata_8h_html_a51c99b582921c7fe956e6cb62a7b8fe0"><div class="ttname"><a href="pldata_8h.html#a51c99b582921c7fe956e6cb62a7b8fe0">hp_part</a></div><div class="ttdeci">hp_part</div><div class="ttdef"><b>Definition:</b> <a href="pldata_8h_source.html#l00032">pldata.h:32</a></div></div>
<div class="ttc" id="apldata_8h_html_a51c99b582921c7fe956e6cb62a7b8fe0ad276871b7d0cc8a7678aae85a07a5cc6"><div class="ttname"><a href="pldata_8h.html#a51c99b582921c7fe956e6cb62a7b8fe0ad276871b7d0cc8a7678aae85a07a5cc6">num_hp_parts</a></div><div class="ttdeci">@ num_hp_parts</div><div class="ttdef"><b>Definition:</b> <a href="pldata_8h_source.html#l00040">pldata.h:39</a></div></div>
<div class="ttc" id="apoint_8h_html"><div class="ttname"><a href="point_8h.html">point.h</a></div></div>
<div class="ttc" id="apoint_8h_html_a00c12fd271c36080d351498039b9e1cb"><div class="ttname"><a href="point_8h.html#a00c12fd271c36080d351498039b9e1cb">point_south_west</a></div><div class="ttdeci">static constexpr point point_south_west</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00281">point.h:281</a></div></div>
<div class="ttc" id="apoint_8h_html_a0acd5e182489265fadc8c586f5d4d701"><div class="ttname"><a href="point_8h.html#a0acd5e182489265fadc8c586f5d4d701">point_west</a></div><div class="ttdeci">static constexpr point point_west</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00282">point.h:282</a></div></div>
<div class="ttc" id="apoint_8h_html_a0ee2195dcb488ae55fbf4316f5011172"><div class="ttname"><a href="point_8h.html#a0ee2195dcb488ae55fbf4316f5011172">point_zero</a></div><div class="ttdeci">static constexpr point point_zero</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00274">point.h:274</a></div></div>
<div class="ttc" id="apoint_8h_html_a2a05b0afd49b81447a71d380cca8a9b7"><div class="ttname"><a href="point_8h.html#a2a05b0afd49b81447a71d380cca8a9b7">point_north_east</a></div><div class="ttdeci">static constexpr point point_north_east</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00277">point.h:277</a></div></div>
<div class="ttc" id="apoint_8h_html_a3de2338afabdfe2d3ef10e35532a2976"><div class="ttname"><a href="point_8h.html#a3de2338afabdfe2d3ef10e35532a2976">point_north_west</a></div><div class="ttdeci">static constexpr point point_north_west</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00283">point.h:283</a></div></div>
<div class="ttc" id="apoint_8h_html_a531b7c882d6066241b7f93268af3e68b"><div class="ttname"><a href="point_8h.html#a531b7c882d6066241b7f93268af3e68b">eight_horizontal_neighbors</a></div><div class="ttdeci">static const std::array&lt; tripoint, 8 &gt; eight_horizontal_neighbors</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00389">point.h:389</a></div></div>
<div class="ttc" id="apoint_8h_html_a5c8645fbdd39f3862d10d1521f3d0254"><div class="ttname"><a href="point_8h.html#a5c8645fbdd39f3862d10d1521f3d0254">point_south_east</a></div><div class="ttdeci">static constexpr point point_south_east</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00279">point.h:279</a></div></div>
<div class="ttc" id="apoint_8h_html_a702e673ec0d39d0822e2dc453a6af3e5"><div class="ttname"><a href="point_8h.html#a702e673ec0d39d0822e2dc453a6af3e5">point_south</a></div><div class="ttdeci">static constexpr point point_south</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00280">point.h:280</a></div></div>
<div class="ttc" id="apoint_8h_html_acfe3d4a2977589c0adad45cf36774d8a"><div class="ttname"><a href="point_8h.html#acfe3d4a2977589c0adad45cf36774d8a">point_north</a></div><div class="ttdeci">static constexpr point point_north</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00276">point.h:276</a></div></div>
<div class="ttc" id="apoint_8h_html_aff73fd5bf470a3db5291c5dec855bb71"><div class="ttname"><a href="point_8h.html#aff73fd5bf470a3db5291c5dec855bb71">point_east</a></div><div class="ttdeci">static constexpr point point_east</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00278">point.h:278</a></div></div>
<div class="ttc" id="arng_8cpp_html_a7ba03e7147e43d808dc29c54bce9e57f"><div class="ttname"><a href="rng_8cpp.html#a7ba03e7147e43d808dc29c54bce9e57f">dice</a></div><div class="ttdeci">int dice(int number, int sides)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00085">rng.cpp:85</a></div></div>
<div class="ttc" id="arng_8cpp_html_aad28bdad07401a34ecf9912708f8b750"><div class="ttname"><a href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a></div><div class="ttdeci">bool one_in(int chance)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00065">rng.cpp:65</a></div></div>
<div class="ttc" id="arng_8cpp_html_acd19ae79e3590a99c9eaf0389318b686"><div class="ttname"><a href="rng_8cpp.html#acd19ae79e3590a99c9eaf0389318b686">roll_remainder</a></div><div class="ttdeci">int roll_remainder(double value)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00096">rng.cpp:96</a></div></div>
<div class="ttc" id="arng_8h_html"><div class="ttname"><a href="rng_8h.html">rng.h</a></div></div>
<div class="ttc" id="arng_8h_html_a12244355ee77108f1b08618e9962e4d1"><div class="ttname"><a href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a></div><div class="ttdeci">V random_entry(const C &amp;container, D default_value)</div><div class="ttdoc">Returns a random entry in the container.</div><div class="ttdef"><b>Definition:</b> <a href="rng_8h_source.html#l00088">rng.h:88</a></div></div>
<div class="ttc" id="arng_8h_html_ac634f688b3c7864ab6992939ac7b0a6e"><div class="ttname"><a href="rng_8h.html#ac634f688b3c7864ab6992939ac7b0a6e">random_entry_removed</a></div><div class="ttdeci">V random_entry_removed(C &amp;container)</div><div class="ttdoc">Returns a random entry in the container and removes it from the container.</div><div class="ttdef"><b>Definition:</b> <a href="rng_8h_source.html#l00170">rng.h:170</a></div></div>
<div class="ttc" id="ascent__block_8h_html"><div class="ttname"><a href="scent__block_8h.html">scent_block.h</a></div></div>
<div class="ttc" id="astring__id_8h_html"><div class="ttname"><a href="string__id_8h.html">string_id.h</a></div></div>
<div class="ttc" id="astructMonsterGroupResult_html"><div class="ttname"><a href="structMonsterGroupResult.html">MonsterGroupResult</a></div><div class="ttdef"><b>Definition:</b> <a href="mongroup_8h_source.html#l00052">mongroup.h:52</a></div></div>
<div class="ttc" id="astructMonsterGroupResult_html_a33c168a013a586d2418dd9e67f7c42a0"><div class="ttname"><a href="structMonsterGroupResult.html#a33c168a013a586d2418dd9e67f7c42a0">MonsterGroupResult::name</a></div><div class="ttdeci">mtype_id name</div><div class="ttdef"><b>Definition:</b> <a href="mongroup_8h_source.html#l00053">mongroup.h:53</a></div></div>
<div class="ttc" id="astructMonsterGroupResult_html_ae6dfbd3094c5339d3a3ff41b37f8d48b"><div class="ttname"><a href="structMonsterGroupResult.html#ae6dfbd3094c5339d3a3ff41b37f8d48b">MonsterGroupResult::pack_size</a></div><div class="ttdeci">int pack_size</div><div class="ttdef"><b>Definition:</b> <a href="mongroup_8h_source.html#l00054">mongroup.h:54</a></div></div>
<div class="ttc" id="astructdamage__instance_html"><div class="ttname"><a href="structdamage__instance.html">damage_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00051">damage.h:51</a></div></div>
<div class="ttc" id="astructdealt__damage__instance_html"><div class="ttname"><a href="structdealt__damage__instance.html">dealt_damage_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00085">damage.h:85</a></div></div>
<div class="ttc" id="astructdealt__damage__instance_html_a444eee10110e6dc30ba03db96705ee26"><div class="ttname"><a href="structdealt__damage__instance.html#a444eee10110e6dc30ba03db96705ee26">dealt_damage_instance::type_damage</a></div><div class="ttdeci">int type_damage(damage_type dt) const</div><div class="ttdef"><b>Definition:</b> <a href="damage_8cpp_source.html#l00172">damage.cpp:172</a></div></div>
<div class="ttc" id="astructdealt__damage__instance_html_a86b702070a1c313624abc78ff34eff48"><div class="ttname"><a href="structdealt__damage__instance.html#a86b702070a1c313624abc78ff34eff48">dealt_damage_instance::total_damage</a></div><div class="ttdeci">int total_damage() const</div><div class="ttdef"><b>Definition:</b> <a href="damage_8cpp_source.html#l00180">damage.cpp:180</a></div></div>
<div class="ttc" id="astructfield__intensity__level_html_ac5bea9ad065ed028bc8847d16f7d33b6"><div class="ttname"><a href="structfield__intensity__level.html#ac5bea9ad065ed028bc8847d16f7d33b6">field_intensity_level::scent_neutralization</a></div><div class="ttdeci">int scent_neutralization</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8h_source.html#l00131">field_type.h:131</a></div></div>
<div class="ttc" id="astructfield__type_html"><div class="ttname"><a href="structfield__type.html">field_type</a></div><div class="ttdef"><b>Definition:</b> <a href="field__type_8h_source.html#l00135">field_type.h:135</a></div></div>
<div class="ttc" id="astructfield__type_html_a46f1cb85c4bfdac38826b81178295ed5"><div class="ttname"><a href="structfield__type.html#a46f1cb85c4bfdac38826b81178295ed5">field_type::get_intensity_level</a></div><div class="ttdeci">const field_intensity_level &amp; get_intensity_level(int level=0) const</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00130">field_type.cpp:130</a></div></div>
<div class="ttc" id="astructfield__type_html_a56afdea6073a57b9c8bf43aa6cdaed6a"><div class="ttname"><a href="structfield__type.html#a56afdea6073a57b9c8bf43aa6cdaed6a">field_type::get_transparent</a></div><div class="ttdeci">bool get_transparent(int level=0) const</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8h_source.html#l00204">field_type.h:204</a></div></div>
<div class="ttc" id="astructfield__type_html_a8af087b6107c20a7401ca0ac9831c440"><div class="ttname"><a href="structfield__type.html#a8af087b6107c20a7401ca0ac9831c440">field_type::dirty_transparency_cache</a></div><div class="ttdeci">bool dirty_transparency_cache</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8h_source.html#l00161">field_type.h:161</a></div></div>
<div class="ttc" id="astructfield__type_html_a904634135be914ae33f635af09b42d0a"><div class="ttname"><a href="structfield__type.html#a904634135be914ae33f635af09b42d0a">field_type::percent_spread</a></div><div class="ttdeci">int percent_spread</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8h_source.html#l00157">field_type.h:157</a></div></div>
<div class="ttc" id="astructfield__type_html_aa5c0e76cf425e0f55490df0648dcdcf0"><div class="ttname"><a href="structfield__type.html#aa5c0e76cf425e0f55490df0648dcdcf0">field_type::wandering_field</a></div><div class="ttdeci">field_type_id wandering_field</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8h_source.html#l00182">field_type.h:182</a></div></div>
<div class="ttc" id="astructfield__type_html_aa7ad00b935da14998fc6b59b5a70a06c"><div class="ttname"><a href="structfield__type.html#aa7ad00b935da14998fc6b59b5a70a06c">field_type::npc_complain_data</a></div><div class="ttdeci">std::tuple&lt; int, std::string, time_duration, std::string &gt; npc_complain_data</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8h_source.html#l00170">field_type.h:170</a></div></div>
<div class="ttc" id="astructfield__type_html_abf120d0be94361ccb4acbfe6dfbc69a7"><div class="ttname"><a href="structfield__type.html#abf120d0be94361ccb4acbfe6dfbc69a7">field_type::outdoor_age_speedup</a></div><div class="ttdeci">time_duration outdoor_age_speedup</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8h_source.html#l00155">field_type.h:155</a></div></div>
<div class="ttc" id="astructfield__type_html_ada24e211101baed318c9f0ec9fa040f9"><div class="ttname"><a href="structfield__type.html#ada24e211101baed318c9f0ec9fa040f9">field_type::apply_slime_factor</a></div><div class="ttdeci">int apply_slime_factor</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8h_source.html#l00158">field_type.h:158</a></div></div>
<div class="ttc" id="astructfire__data_html"><div class="ttname"><a href="structfire__data.html">fire_data</a></div><div class="ttdoc">Contains the state of a fire in one tile on one turn.</div><div class="ttdef"><b>Definition:</b> <a href="fire_8h_source.html#l00018">fire.h:18</a></div></div>
<div class="ttc" id="astructfire__data_html_a766c1e9448a11a83188b5e97e3276004"><div class="ttname"><a href="structfire__data.html#a766c1e9448a11a83188b5e97e3276004">fire_data::fuel_produced</a></div><div class="ttdeci">float fuel_produced</div><div class="ttdoc">Fuel contributed by each burning item this turn is summed here.</div><div class="ttdef"><b>Definition:</b> <a href="fire_8h_source.html#l00029">fire.h:29</a></div></div>
<div class="ttc" id="astructfurn__t_html"><div class="ttname"><a href="structfurn__t.html">furn_t</a></div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00489">mapdata.h:489</a></div></div>
<div class="ttc" id="astructlevel__cache_html_a2af0622caf0c878e166015f22e2add9e"><div class="ttname"><a href="structlevel__cache.html#a2af0622caf0c878e166015f22e2add9e">level_cache::field_cache</a></div><div class="ttdeci">std::bitset&lt; MAPSIZE *MAPSIZE &gt; field_cache</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00340">map.h:340</a></div></div>
<div class="ttc" id="astructmap__data__common__t_html"><div class="ttname"><a href="structmap__data__common__t.html">map_data_common_t</a></div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00343">mapdata.h:343</a></div></div>
<div class="ttc" id="astructmap__data__common__t_html_a630778707744fb147436b9aa0c370a7e"><div class="ttname"><a href="structmap__data__common__t.html#a630778707744fb147436b9aa0c370a7e">map_data_common_t::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00415">mapdata.h:415</a></div></div>
<div class="ttc" id="astructmap__data__common__t_html_aa6eb23c1a5d8e89d877880f9aaf32eb6"><div class="ttname"><a href="structmap__data__common__t.html#aa6eb23c1a5d8e89d877880f9aaf32eb6">map_data_common_t::movecost</a></div><div class="ttdeci">int movecost</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00381">mapdata.h:381</a></div></div>
<div class="ttc" id="astructmaptile_html"><div class="ttname"><a href="structmaptile.html">maptile</a></div><div class="ttdoc">A wrapper for a submap point.</div><div class="ttdef"><b>Definition:</b> <a href="submap_8h_source.html#l00267">submap.h:267</a></div></div>
<div class="ttc" id="astructmaptile_html_a09a3fb71b0c8d22a8d1257144205d775"><div class="ttname"><a href="structmaptile.html#a09a3fb71b0c8d22a8d1257144205d775">maptile::get_ter_t</a></div><div class="ttdeci">const ter_t &amp; get_ter_t() const</div><div class="ttdef"><b>Definition:</b> <a href="submap_8h_source.html#l00300">submap.h:300</a></div></div>
<div class="ttc" id="astructmaptile_html_a15f6425e60113e76f02a16bc22f14032"><div class="ttname"><a href="structmaptile.html#a15f6425e60113e76f02a16bc22f14032">maptile::get_field</a></div><div class="ttdeci">const field &amp; get_field() const</div><div class="ttdef"><b>Definition:</b> <a href="submap_8h_source.html#l00304">submap.h:304</a></div></div>
<div class="ttc" id="astructmaptile_html_a938297885d93f2c7d4f283363ca2f606"><div class="ttname"><a href="structmaptile.html#a938297885d93f2c7d4f283363ca2f606">maptile::find_field</a></div><div class="ttdeci">field_entry * find_field(const field_type_id &amp;field_to_find)</div><div class="ttdef"><b>Definition:</b> <a href="submap_8h_source.html#l00308">submap.h:308</a></div></div>
<div class="ttc" id="astructmaptile_html_a93e125b91c77b00f653a12800b24dbc9"><div class="ttname"><a href="structmaptile.html#a93e125b91c77b00f653a12800b24dbc9">maptile::pos_</a></div><div class="ttdeci">point pos_</div><div class="ttdef"><b>Definition:</b> <a href="submap_8h_source.html#l00272">submap.h:272</a></div></div>
<div class="ttc" id="astructmaptile_html_a9c9e15a1b6db4e935fc1230519e45249"><div class="ttname"><a href="structmaptile.html#a9c9e15a1b6db4e935fc1230519e45249">maptile::get_item_count</a></div><div class="ttdeci">size_t get_item_count() const</div><div class="ttdef"><b>Definition:</b> <a href="submap_8h_source.html#l00333">submap.h:333</a></div></div>
<div class="ttc" id="astructmaptile_html_a9ea19f651f4ce0a70d044fac9caf6f90"><div class="ttname"><a href="structmaptile.html#a9ea19f651f4ce0a70d044fac9caf6f90">maptile::get_ter</a></div><div class="ttdeci">ter_id get_ter() const</div><div class="ttdef"><b>Definition:</b> <a href="submap_8h_source.html#l00289">submap.h:289</a></div></div>
<div class="ttc" id="astructmaptile_html_ac457d93598440f370cb86702caddfdd7"><div class="ttname"><a href="structmaptile.html#ac457d93598440f370cb86702caddfdd7">maptile::get_furn_t</a></div><div class="ttdeci">const furn_t &amp; get_furn_t() const</div><div class="ttdef"><b>Definition:</b> <a href="submap_8h_source.html#l00297">submap.h:297</a></div></div>
<div class="ttc" id="astructmtype_html_a208b05355d08ec7d628606f18e2d53be"><div class="ttname"><a href="structmtype.html#a208b05355d08ec7d628606f18e2d53be">mtype::has_flag</a></div><div class="ttdeci">bool has_flag(m_flag flag) const</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8cpp_source.html#l00075">mtype.cpp:75</a></div></div>
<div class="ttc" id="astructmtype_html_a51ec342d71717bb513f0158198b12840"><div class="ttname"><a href="structmtype.html#a51ec342d71717bb513f0158198b12840">mtype::in_species</a></div><div class="ttdeci">bool in_species(const species_id &amp;spec) const</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8cpp_source.html#l00122">mtype.cpp:122</a></div></div>
<div class="ttc" id="astructpair__greater__cmp__first_html"><div class="ttname"><a href="structpair__greater__cmp__first.html">pair_greater_cmp_first</a></div><div class="ttdoc">Greater-than comparison operator; required by the sort interface.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00016">cata_utility.h:16</a></div></div>
<div class="ttc" id="astructpoint_html"><div class="ttname"><a href="structpoint.html">point</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00035">point.h:35</a></div></div>
<div class="ttc" id="astructpoint_html_a9a82ca9504acabb1e30569f89c805471"><div class="ttname"><a href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">point::y</a></div><div class="ttdeci">int y</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00039">point.h:39</a></div></div>
<div class="ttc" id="astructpoint_html_ad679b07fb69d55f5ad454d0f1f2891d5"><div class="ttname"><a href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">point::x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00038">point.h:38</a></div></div>
<div class="ttc" id="astructscent__block_html"><div class="ttname"><a href="structscent__block.html">scent_block</a></div><div class="ttdef"><b>Definition:</b> <a href="scent__block_8h_source.html#l00012">scent_block.h:12</a></div></div>
<div class="ttc" id="astructscent__block_html_ab548a186f2f9a3ce8fa5e6ba9d477f86"><div class="ttname"><a href="structscent__block.html#ab548a186f2f9a3ce8fa5e6ba9d477f86">scent_block::commit_modifications</a></div><div class="ttdeci">void commit_modifications()</div><div class="ttdef"><b>Definition:</b> <a href="scent__block_8h_source.html#l00044">scent_block.h:44</a></div></div>
<div class="ttc" id="astructscent__block_html_abd1e03ded277beee70edb7964ca3d3cc"><div class="ttname"><a href="structscent__block.html#abd1e03ded277beee70edb7964ca3d3cc">scent_block::apply_gas</a></div><div class="ttdeci">void apply_gas(const tripoint &amp;p, const int nintensity=0)</div><div class="ttdef"><b>Definition:</b> <a href="scent__block_8h_source.html#l00077">scent_block.h:77</a></div></div>
<div class="ttc" id="astructscent__block_html_ad1dcad9d99484b452d6882fe62cade0a"><div class="ttname"><a href="structscent__block.html#ad1dcad9d99484b452d6882fe62cade0a">scent_block::apply_slime</a></div><div class="ttdeci">void apply_slime(const tripoint &amp;p, int intensity)</div><div class="ttdef"><b>Definition:</b> <a href="scent__block_8h_source.html#l00083">scent_block.h:83</a></div></div>
<div class="ttc" id="astructspawn__point_html"><div class="ttname"><a href="structspawn__point.html">spawn_point</a></div><div class="ttdef"><b>Definition:</b> <a href="submap_8h_source.html#l00035">submap.h:35</a></div></div>
<div class="ttc" id="astructter__t_html"><div class="ttname"><a href="structter__t.html">ter_t</a></div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00457">mapdata.h:457</a></div></div>
<div class="ttc" id="astructter__t_html_a876ecdb9de153e3d864ee221ed63bd45"><div class="ttname"><a href="structter__t.html#a876ecdb9de153e3d864ee221ed63bd45">ter_t::id</a></div><div class="ttdeci">ter_str_id id</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00458">mapdata.h:458</a></div></div>
<div class="ttc" id="astructtripoint_html"><div class="ttname"><a href="structtripoint.html">tripoint</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00147">point.h:147</a></div></div>
<div class="ttc" id="astructtripoint_html_a89f6c0a16e2bfd7ce4f1f1d20404c4d7"><div class="ttname"><a href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">tripoint::y</a></div><div class="ttdeci">int y</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00151">point.h:151</a></div></div>
<div class="ttc" id="astructtripoint_html_ac944c0e329b5eba2602f7a52f66bbbb9"><div class="ttname"><a href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">tripoint::z</a></div><div class="ttdeci">int z</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00152">point.h:152</a></div></div>
<div class="ttc" id="astructtripoint_html_accc0725c936dbebb2486f969f39e2e5f"><div class="ttname"><a href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">tripoint::xy</a></div><div class="ttdeci">constexpr point xy() const</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00220">point.h:220</a></div></div>
<div class="ttc" id="astructtripoint_html_affdc0d5b75024cbfacd208a495def3dc"><div class="ttname"><a href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">tripoint::x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00150">point.h:150</a></div></div>
<div class="ttc" id="asubmap_8h_html"><div class="ttname"><a href="submap_8h.html">submap.h</a></div></div>
<div class="ttc" id="ateleport_8h_html"><div class="ttname"><a href="teleport_8h.html">teleport.h</a></div></div>
<div class="ttc" id="atranslations_8h_html"><div class="ttname"><a href="translations_8h.html">translations.h</a></div></div>
<div class="ttc" id="atranslations_8h_html_a0b3ab525ec6b450b2487e7644255fa7c"><div class="ttname"><a href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a></div><div class="ttdeci">#define translate_marker(x)</div><div class="ttdoc">Marks a string literal to be extracted for translation.</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00030">translations.h:30</a></div></div>
<div class="ttc" id="atranslations_8h_html_aa829053017e23ef22d44dccecba63a34"><div class="ttname"><a href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a></div><div class="ttdeci">#define _(msg)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00116">translations.h:116</a></div></div>
<div class="ttc" id="atype__id_8h_html"><div class="ttname"><a href="type__id_8h.html">type_id.h</a></div></div>
<div class="ttc" id="aunits_8h_html"><div class="ttname"><a href="units_8h.html">units.h</a></div></div>
<div class="ttc" id="avehicle_8h_html"><div class="ttname"><a href="vehicle_8h.html">vehicle.h</a></div></div>
<div class="ttc" id="avpart__position_8h_html"><div class="ttname"><a href="vpart__position_8h.html">vpart_position.h</a></div></div>
<div class="ttc" id="aweather_8h_html"><div class="ttname"><a href="weather_8h.html">weather.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="map__field_8cpp.html">map_field.cpp</a></li>
    <li class="footer">Generated on Sat Nov 12 2022 15:15:27 for Cataclysm BN by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
